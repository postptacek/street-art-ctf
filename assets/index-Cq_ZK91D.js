function CA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var AA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wx={exports:{}},$d={},xx={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wu=Symbol.for("react.element"),kA=Symbol.for("react.portal"),bA=Symbol.for("react.fragment"),RA=Symbol.for("react.strict_mode"),LA=Symbol.for("react.profiler"),NA=Symbol.for("react.provider"),MA=Symbol.for("react.context"),DA=Symbol.for("react.forward_ref"),OA=Symbol.for("react.suspense"),VA=Symbol.for("react.memo"),jA=Symbol.for("react.lazy"),vv=Symbol.iterator;function zA(t){return t===null||typeof t!="object"?null:(t=vv&&t[vv]||t["@@iterator"],typeof t=="function"?t:null)}var Tx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ex=Object.assign,Px={};function Ha(t,e,n){this.props=t,this.context=e,this.refs=Px,this.updater=n||Tx}Ha.prototype.isReactComponent={};Ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sx(){}Sx.prototype=Ha.prototype;function Hg(t,e,n){this.props=t,this.context=e,this.refs=Px,this.updater=n||Tx}var Wg=Hg.prototype=new Sx;Wg.constructor=Hg;Ex(Wg,Ha.prototype);Wg.isPureReactComponent=!0;var wv=Array.isArray,Ix=Object.prototype.hasOwnProperty,$g={current:null},Cx={key:!0,ref:!0,__self:!0,__source:!0};function Ax(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Ix.call(e,i)&&!Cx.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Wu,type:t,key:o,ref:a,props:r,_owner:$g.current}}function FA(t,e){return{$$typeof:Wu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wu}function BA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xv=/\/+/g;function Jf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BA(""+t.key):e.toString(36)}function vh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Wu:case kA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Jf(a,0):i,wv(r)?(n="",t!=null&&(n=t.replace(xv,"$&/")+"/"),vh(r,e,n,"",function(f){return f})):r!=null&&(qg(r)&&(r=FA(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(xv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",wv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+Jf(o,u);a+=vh(o,e,n,h,r)}else if(h=zA(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+Jf(o,u++),a+=vh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function $c(t,e,n){if(t==null)return t;var i=[],r=0;return vh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function UA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},wh={transition:null},HA={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:wh,ReactCurrentOwner:$g};function kx(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:$c,forEach:function(t,e,n){$c(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $c(t,function(){e++}),e},toArray:function(t){return $c(t,function(e){return e})||[]},only:function(t){if(!qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Ha;Ce.Fragment=bA;Ce.Profiler=LA;Ce.PureComponent=Hg;Ce.StrictMode=RA;Ce.Suspense=OA;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HA;Ce.act=kx;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Ex({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=$g.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)Ix.call(e,h)&&!Cx.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Wu,type:t.type,key:r,ref:o,props:i,_owner:a}};Ce.createContext=function(t){return t={$$typeof:MA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NA,_context:t},t.Consumer=t};Ce.createElement=Ax;Ce.createFactory=function(t){var e=Ax.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:DA,render:t}};Ce.isValidElement=qg;Ce.lazy=function(t){return{$$typeof:jA,_payload:{_status:-1,_result:t},_init:UA}};Ce.memo=function(t,e){return{$$typeof:VA,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=wh.transition;wh.transition={};try{t()}finally{wh.transition=e}};Ce.unstable_act=kx;Ce.useCallback=function(t,e){return tn.current.useCallback(t,e)};Ce.useContext=function(t){return tn.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return tn.current.useEffect(t,e)};Ce.useId=function(){return tn.current.useId()};Ce.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return tn.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};Ce.useRef=function(t){return tn.current.useRef(t)};Ce.useState=function(t){return tn.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return tn.current.useTransition()};Ce.version="18.3.1";xx.exports=Ce;var j=xx.exports;const Zs=vx(j),WA=CA({__proto__:null,default:Zs},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $A=j,qA=Symbol.for("react.element"),GA=Symbol.for("react.fragment"),ZA=Object.prototype.hasOwnProperty,KA=$A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QA={key:!0,ref:!0,__self:!0,__source:!0};function bx(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)ZA.call(e,i)&&!QA.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:qA,type:t,key:o,ref:a,props:r,_owner:KA.current}}$d.Fragment=GA;$d.jsx=bx;$d.jsxs=bx;wx.exports=$d;var x=wx.exports,sm={},Rx={exports:{}},Pn={},Lx={exports:{}},Nx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ce){var J=G.length;G.push(ce);e:for(;0<J;){var te=J-1>>>1,ve=G[te];if(0<r(ve,ce))G[te]=ce,G[J]=ve,J=te;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ce=G[0],J=G.pop();if(J!==ce){G[0]=J;e:for(var te=0,ve=G.length,He=ve>>>1;te<He;){var Pe=2*(te+1)-1,Ee=G[Pe],ne=Pe+1,Le=G[ne];if(0>r(Ee,J))ne<ve&&0>r(Le,Ee)?(G[te]=Le,G[ne]=J,te=ne):(G[te]=Ee,G[Pe]=J,te=Pe);else if(ne<ve&&0>r(Le,J))G[te]=Le,G[ne]=J,te=ne;else break e}}return ce}function r(G,ce){var J=G.sortIndex-ce.sortIndex;return J!==0?J:G.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,v=3,T=!1,R=!1,b=!1,z=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(G){for(var ce=n(f);ce!==null;){if(ce.callback===null)i(f);else if(ce.startTime<=G)i(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=n(f)}}function F(G){if(b=!1,I(G),!R)if(n(h)!==null)R=!0,Te(q);else{var ce=n(f);ce!==null&&Re(F,ce.startTime-G)}}function q(G,ce){R=!1,b&&(b=!1,C(S),S=-1),T=!0;var J=v;try{for(I(ce),g=n(h);g!==null&&(!(g.expirationTime>ce)||G&&!O());){var te=g.callback;if(typeof te=="function"){g.callback=null,v=g.priorityLevel;var ve=te(g.expirationTime<=ce);ce=t.unstable_now(),typeof ve=="function"?g.callback=ve:g===n(h)&&i(h),I(ce)}else i(h);g=n(h)}if(g!==null)var He=!0;else{var Pe=n(f);Pe!==null&&Re(F,Pe.startTime-ce),He=!1}return He}finally{g=null,v=J,T=!1}}var Z=!1,N=null,S=-1,k=5,M=-1;function O(){return!(t.unstable_now()-M<k)}function B(){if(N!==null){var G=t.unstable_now();M=G;var ce=!0;try{ce=N(!0,G)}finally{ce?D():(Z=!1,N=null)}}else Z=!1}var D;if(typeof E=="function")D=function(){E(B)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Oe=ae.port2;ae.port1.onmessage=B,D=function(){Oe.postMessage(null)}}else D=function(){z(B,0)};function Te(G){N=G,Z||(Z=!0,D())}function Re(G,ce){S=z(function(){G(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){R||T||(R=!0,Te(q))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var J=v;v=ce;try{return G()}finally{v=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=v;v=G;try{return ce()}finally{v=J}},t.unstable_scheduleCallback=function(G,ce,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,G){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=J+ve,G={id:m++,callback:ce,priorityLevel:G,startTime:J,expirationTime:ve,sortIndex:-1},J>te?(G.sortIndex=J,e(f,G),n(h)===null&&G===n(f)&&(b?(C(S),S=-1):b=!0,Re(F,J-te))):(G.sortIndex=ve,e(h,G),R||T||(R=!0,Te(q))),G},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(G){var ce=v;return function(){var J=v;v=ce;try{return G.apply(this,arguments)}finally{v=J}}}})(Nx);Lx.exports=Nx;var XA=Lx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YA=j,Tn=XA;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mx=new Set,fu={};function so(t,e){Ia(t,e),Ia(t+"Capture",e)}function Ia(t,e){for(fu[t]=e,t=0;t<e.length;t++)Mx.add(e[t])}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),om=Object.prototype.hasOwnProperty,JA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tv={},Ev={};function ek(t){return om.call(Ev,t)?!0:om.call(Tv,t)?!1:JA.test(t)?Ev[t]=!0:(Tv[t]=!0,!1)}function tk(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nk(t,e,n,i){if(e===null||typeof e>"u"||tk(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gg=/[\-:]([a-z])/g;function Zg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gg,Zg);Ot[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gg,Zg);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gg,Zg);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kg(t,e,n,i){var r=Ot.hasOwnProperty(e)?Ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nk(e,n,r,i)&&(n=null),i||r===null?ek(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var lr=YA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qc=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),Qg=Symbol.for("react.strict_mode"),am=Symbol.for("react.profiler"),Dx=Symbol.for("react.provider"),Ox=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),lm=Symbol.for("react.suspense"),um=Symbol.for("react.suspense_list"),Yg=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),Vx=Symbol.for("react.offscreen"),Pv=Symbol.iterator;function Al(t){return t===null||typeof t!="object"?null:(t=Pv&&t[Pv]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,ep;function jl(t){if(ep===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ep=e&&e[1]||""}return`
`+ep+t}var tp=!1;function np(t,e){if(!t||tp)return"";tp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{tp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jl(t):""}function ik(t){switch(t.tag){case 5:return jl(t.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return t=np(t.type,!1),t;case 11:return t=np(t.type.render,!1),t;case 1:return t=np(t.type,!0),t;default:return""}}function cm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case Qo:return"Portal";case am:return"Profiler";case Qg:return"StrictMode";case lm:return"Suspense";case um:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ox:return(t.displayName||"Context")+".Consumer";case Dx:return(t._context.displayName||"Context")+".Provider";case Xg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yg:return e=t.displayName||null,e!==null?e:cm(t.type)||"Memo";case Pr:e=t._payload,t=t._init;try{return cm(t(e))}catch{}}return null}function rk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cm(e);case 8:return e===Qg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sk(t){var e=jx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gc(t){t._valueTracker||(t._valueTracker=sk(t))}function zx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=jx(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Hh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hm(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fx(t,e){e=e.checked,e!=null&&Kg(t,"checked",e,!1)}function dm(t,e){Fx(t,e);var n=Jr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fm(t,e.type,n):e.hasOwnProperty("defaultValue")&&fm(t,e.type,Jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Iv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fm(t,e,n){(e!=="number"||Hh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zl=Array.isArray;function fa(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Jr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function pm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(zl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jr(n)}}function Bx(t,e){var n=Jr(e.value),i=Jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Av(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ux(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ux(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zc,Hx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zc=Zc||document.createElement("div"),Zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ok=["Webkit","ms","Moz","O"];Object.keys(Gl).forEach(function(t){ok.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gl[e]=Gl[t]})});function Wx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gl.hasOwnProperty(t)&&Gl[t]?(""+e).trim():e+"px"}function $x(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Wx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var ak=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gm(t,e){if(e){if(ak[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function ym(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=null;function Jg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vm=null,pa=null,ma=null;function kv(t){if(t=Gu(t)){if(typeof vm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Qd(e),vm(t.stateNode,t.type,e))}}function qx(t){pa?ma?ma.push(t):ma=[t]:pa=t}function Gx(){if(pa){var t=pa,e=ma;if(ma=pa=null,kv(t),e)for(t=0;t<e.length;t++)kv(e[t])}}function Zx(t,e){return t(e)}function Kx(){}var ip=!1;function Qx(t,e,n){if(ip)return t(e,n);ip=!0;try{return Zx(t,e,n)}finally{ip=!1,(pa!==null||ma!==null)&&(Kx(),Gx())}}function mu(t,e){var n=t.stateNode;if(n===null)return null;var i=Qd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var wm=!1;if(Yi)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){wm=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{wm=!1}function lk(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var Zl=!1,Wh=null,$h=!1,xm=null,uk={onError:function(t){Zl=!0,Wh=t}};function ck(t,e,n,i,r,o,a,u,h){Zl=!1,Wh=null,lk.apply(uk,arguments)}function hk(t,e,n,i,r,o,a,u,h){if(ck.apply(this,arguments),Zl){if(Zl){var f=Wh;Zl=!1,Wh=null}else throw Error(Y(198));$h||($h=!0,xm=f)}}function oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bv(t){if(oo(t)!==t)throw Error(Y(188))}function dk(t){var e=t.alternate;if(!e){if(e=oo(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return bv(r),t;if(o===i)return bv(r),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Yx(t){return t=dk(t),t!==null?Jx(t):null}function Jx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Jx(t);if(e!==null)return e;t=t.sibling}return null}var eT=Tn.unstable_scheduleCallback,Rv=Tn.unstable_cancelCallback,fk=Tn.unstable_shouldYield,pk=Tn.unstable_requestPaint,dt=Tn.unstable_now,mk=Tn.unstable_getCurrentPriorityLevel,ey=Tn.unstable_ImmediatePriority,tT=Tn.unstable_UserBlockingPriority,qh=Tn.unstable_NormalPriority,gk=Tn.unstable_LowPriority,nT=Tn.unstable_IdlePriority,qd=null,yi=null;function yk(t){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(qd,t,void 0,(t.current.flags&128)===128)}catch{}}var ni=Math.clz32?Math.clz32:wk,_k=Math.log,vk=Math.LN2;function wk(t){return t>>>=0,t===0?32:31-(_k(t)/vk|0)|0}var Kc=64,Qc=4194304;function Fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Fl(u):(o&=a,o!==0&&(i=Fl(o)))}else a=n&~r,a!==0?i=Fl(a):o!==0&&(i=Fl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ni(e),r=1<<n,i|=t[n],e&=~r;return i}function xk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ni(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=xk(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iT(){var t=Kc;return Kc<<=1,!(Kc&4194240)&&(Kc=64),t}function rp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $u(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ni(e),t[e]=n}function Ek(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ni(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function ty(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ni(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var $e=0;function rT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sT,ny,oT,aT,lT,Em=!1,Xc=[],Vr=null,jr=null,zr=null,gu=new Map,yu=new Map,Cr=[],Pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lv(t,e){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":gu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(e.pointerId)}}function bl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Gu(e),e!==null&&ny(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Sk(t,e,n,i,r){switch(e){case"focusin":return Vr=bl(Vr,t,e,n,i,r),!0;case"dragenter":return jr=bl(jr,t,e,n,i,r),!0;case"mouseover":return zr=bl(zr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return gu.set(o,bl(gu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,yu.set(o,bl(yu.get(o)||null,t,e,n,i,r)),!0}return!1}function uT(t){var e=js(t.target);if(e!==null){var n=oo(e);if(n!==null){if(e=n.tag,e===13){if(e=Xx(n),e!==null){t.blockedOn=e,lT(t.priority,function(){oT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);_m=i,n.target.dispatchEvent(i),_m=null}else return e=Gu(n),e!==null&&ny(e),t.blockedOn=n,!1;e.shift()}return!0}function Nv(t,e,n){xh(t)&&n.delete(e)}function Ik(){Em=!1,Vr!==null&&xh(Vr)&&(Vr=null),jr!==null&&xh(jr)&&(jr=null),zr!==null&&xh(zr)&&(zr=null),gu.forEach(Nv),yu.forEach(Nv)}function Rl(t,e){t.blockedOn===e&&(t.blockedOn=null,Em||(Em=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,Ik)))}function _u(t){function e(r){return Rl(r,t)}if(0<Xc.length){Rl(Xc[0],t);for(var n=1;n<Xc.length;n++){var i=Xc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Vr!==null&&Rl(Vr,t),jr!==null&&Rl(jr,t),zr!==null&&Rl(zr,t),gu.forEach(e),yu.forEach(e),n=0;n<Cr.length;n++)i=Cr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)uT(n),n.blockedOn===null&&Cr.shift()}var ga=lr.ReactCurrentBatchConfig,Zh=!0;function Ck(t,e,n,i){var r=$e,o=ga.transition;ga.transition=null;try{$e=1,iy(t,e,n,i)}finally{$e=r,ga.transition=o}}function Ak(t,e,n,i){var r=$e,o=ga.transition;ga.transition=null;try{$e=4,iy(t,e,n,i)}finally{$e=r,ga.transition=o}}function iy(t,e,n,i){if(Zh){var r=Pm(t,e,n,i);if(r===null)pp(t,e,i,Kh,n),Lv(t,i);else if(Sk(r,t,e,n,i))i.stopPropagation();else if(Lv(t,i),e&4&&-1<Pk.indexOf(t)){for(;r!==null;){var o=Gu(r);if(o!==null&&sT(o),o=Pm(t,e,n,i),o===null&&pp(t,e,i,Kh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else pp(t,e,i,null,n)}}var Kh=null;function Pm(t,e,n,i){if(Kh=null,t=Jg(i),t=js(t),t!==null)if(e=oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kh=t,null}function cT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mk()){case ey:return 1;case tT:return 4;case qh:case gk:return 16;case nT:return 536870912;default:return 16}default:return 16}}var Nr=null,ry=null,Th=null;function hT(){if(Th)return Th;var t,e=ry,n=e.length,i,r="value"in Nr?Nr.value:Nr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Th=r.slice(t,1<i?1-i:void 0)}function Eh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yc(){return!0}function Mv(){return!1}function Sn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Yc:Mv,this.isPropagationStopped=Mv,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yc)},persist:function(){},isPersistent:Yc}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sy=Sn(Wa),qu=st({},Wa,{view:0,detail:0}),kk=Sn(qu),sp,op,Ll,Gd=st({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ll&&(Ll&&t.type==="mousemove"?(sp=t.screenX-Ll.screenX,op=t.screenY-Ll.screenY):op=sp=0,Ll=t),sp)},movementY:function(t){return"movementY"in t?t.movementY:op}}),Dv=Sn(Gd),bk=st({},Gd,{dataTransfer:0}),Rk=Sn(bk),Lk=st({},qu,{relatedTarget:0}),ap=Sn(Lk),Nk=st({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),Mk=Sn(Nk),Dk=st({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ok=Sn(Dk),Vk=st({},Wa,{data:0}),Ov=Sn(Vk),jk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Fk[t])?!!e[t]:!1}function oy(){return Bk}var Uk=st({},qu,{key:function(t){if(t.key){var e=jk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oy,charCode:function(t){return t.type==="keypress"?Eh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hk=Sn(Uk),Wk=st({},Gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vv=Sn(Wk),$k=st({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oy}),qk=Sn($k),Gk=st({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zk=Sn(Gk),Kk=st({},Gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qk=Sn(Kk),Xk=[9,13,27,32],ay=Yi&&"CompositionEvent"in window,Kl=null;Yi&&"documentMode"in document&&(Kl=document.documentMode);var Yk=Yi&&"TextEvent"in window&&!Kl,dT=Yi&&(!ay||Kl&&8<Kl&&11>=Kl),jv=" ",zv=!1;function fT(t,e){switch(t){case"keyup":return Xk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yo=!1;function Jk(t,e){switch(t){case"compositionend":return pT(e);case"keypress":return e.which!==32?null:(zv=!0,jv);case"textInput":return t=e.data,t===jv&&zv?null:t;default:return null}}function eb(t,e){if(Yo)return t==="compositionend"||!ay&&fT(t,e)?(t=hT(),Th=ry=Nr=null,Yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dT&&e.locale!=="ko"?null:e.data;default:return null}}var tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tb[t.type]:e==="textarea"}function mT(t,e,n,i){qx(i),e=Qh(e,"onChange"),0<e.length&&(n=new sy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ql=null,vu=null;function nb(t){IT(t,0)}function Zd(t){var e=ta(t);if(zx(e))return t}function ib(t,e){if(t==="change")return e}var gT=!1;if(Yi){var lp;if(Yi){var up="oninput"in document;if(!up){var Bv=document.createElement("div");Bv.setAttribute("oninput","return;"),up=typeof Bv.oninput=="function"}lp=up}else lp=!1;gT=lp&&(!document.documentMode||9<document.documentMode)}function Uv(){Ql&&(Ql.detachEvent("onpropertychange",yT),vu=Ql=null)}function yT(t){if(t.propertyName==="value"&&Zd(vu)){var e=[];mT(e,vu,t,Jg(t)),Qx(nb,e)}}function rb(t,e,n){t==="focusin"?(Uv(),Ql=e,vu=n,Ql.attachEvent("onpropertychange",yT)):t==="focusout"&&Uv()}function sb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zd(vu)}function ob(t,e){if(t==="click")return Zd(e)}function ab(t,e){if(t==="input"||t==="change")return Zd(e)}function lb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ri=typeof Object.is=="function"?Object.is:lb;function wu(t,e){if(ri(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!om.call(e,r)||!ri(t[r],e[r]))return!1}return!0}function Hv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wv(t,e){var n=Hv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hv(n)}}function _T(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_T(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vT(){for(var t=window,e=Hh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hh(t.document)}return e}function ly(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ub(t){var e=vT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_T(n.ownerDocument.documentElement,n)){if(i!==null&&ly(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Wv(n,o);var a=Wv(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cb=Yi&&"documentMode"in document&&11>=document.documentMode,Jo=null,Sm=null,Xl=null,Im=!1;function $v(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Im||Jo==null||Jo!==Hh(i)||(i=Jo,"selectionStart"in i&&ly(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xl&&wu(Xl,i)||(Xl=i,i=Qh(Sm,"onSelect"),0<i.length&&(e=new sy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Jo)))}function Jc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ea={animationend:Jc("Animation","AnimationEnd"),animationiteration:Jc("Animation","AnimationIteration"),animationstart:Jc("Animation","AnimationStart"),transitionend:Jc("Transition","TransitionEnd")},cp={},wT={};Yi&&(wT=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function Kd(t){if(cp[t])return cp[t];if(!ea[t])return t;var e=ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wT)return cp[t]=e[n];return t}var xT=Kd("animationend"),TT=Kd("animationiteration"),ET=Kd("animationstart"),PT=Kd("transitionend"),ST=new Map,qv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(t,e){ST.set(t,e),so(e,[t])}for(var hp=0;hp<qv.length;hp++){var dp=qv[hp],hb=dp.toLowerCase(),db=dp[0].toUpperCase()+dp.slice(1);cs(hb,"on"+db)}cs(xT,"onAnimationEnd");cs(TT,"onAnimationIteration");cs(ET,"onAnimationStart");cs("dblclick","onDoubleClick");cs("focusin","onFocus");cs("focusout","onBlur");cs(PT,"onTransitionEnd");Ia("onMouseEnter",["mouseout","mouseover"]);Ia("onMouseLeave",["mouseout","mouseover"]);Ia("onPointerEnter",["pointerout","pointerover"]);Ia("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function Gv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,hk(i,e,void 0,t),t.currentTarget=null}function IT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;Gv(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;Gv(r,u,f),o=h}}}if($h)throw t=xm,$h=!1,xm=null,t}function Qe(t,e){var n=e[Rm];n===void 0&&(n=e[Rm]=new Set);var i=t+"__bubble";n.has(i)||(CT(e,t,2,!1),n.add(i))}function fp(t,e,n){var i=0;e&&(i|=4),CT(n,t,i,e)}var eh="_reactListening"+Math.random().toString(36).slice(2);function xu(t){if(!t[eh]){t[eh]=!0,Mx.forEach(function(n){n!=="selectionchange"&&(fb.has(n)||fp(n,!1,t),fp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eh]||(e[eh]=!0,fp("selectionchange",!1,e))}}function CT(t,e,n,i){switch(cT(e)){case 1:var r=Ck;break;case 4:r=Ak;break;default:r=iy}n=r.bind(null,e,n,t),r=void 0,!wm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function pp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=js(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}Qx(function(){var f=o,m=Jg(n),g=[];e:{var v=ST.get(t);if(v!==void 0){var T=sy,R=t;switch(t){case"keypress":if(Eh(n)===0)break e;case"keydown":case"keyup":T=Hk;break;case"focusin":R="focus",T=ap;break;case"focusout":R="blur",T=ap;break;case"beforeblur":case"afterblur":T=ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Dv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Rk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=qk;break;case xT:case TT:case ET:T=Mk;break;case PT:T=Zk;break;case"scroll":T=kk;break;case"wheel":T=Qk;break;case"copy":case"cut":case"paste":T=Ok;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Vv}var b=(e&4)!==0,z=!b&&t==="scroll",C=b?v!==null?v+"Capture":null:v;b=[];for(var E=f,I;E!==null;){I=E;var F=I.stateNode;if(I.tag===5&&F!==null&&(I=F,C!==null&&(F=mu(E,C),F!=null&&b.push(Tu(E,F,I)))),z)break;E=E.return}0<b.length&&(v=new T(v,R,null,n,m),g.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==_m&&(R=n.relatedTarget||n.fromElement)&&(js(R)||R[Ji]))break e;if((T||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,T?(R=n.relatedTarget||n.toElement,T=f,R=R?js(R):null,R!==null&&(z=oo(R),R!==z||R.tag!==5&&R.tag!==6)&&(R=null)):(T=null,R=f),T!==R)){if(b=Dv,F="onMouseLeave",C="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=Vv,F="onPointerLeave",C="onPointerEnter",E="pointer"),z=T==null?v:ta(T),I=R==null?v:ta(R),v=new b(F,E+"leave",T,n,m),v.target=z,v.relatedTarget=I,F=null,js(m)===f&&(b=new b(C,E+"enter",R,n,m),b.target=I,b.relatedTarget=z,F=b),z=F,T&&R)t:{for(b=T,C=R,E=0,I=b;I;I=Ho(I))E++;for(I=0,F=C;F;F=Ho(F))I++;for(;0<E-I;)b=Ho(b),E--;for(;0<I-E;)C=Ho(C),I--;for(;E--;){if(b===C||C!==null&&b===C.alternate)break t;b=Ho(b),C=Ho(C)}b=null}else b=null;T!==null&&Zv(g,v,T,b,!1),R!==null&&z!==null&&Zv(g,z,R,b,!0)}}e:{if(v=f?ta(f):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var q=ib;else if(Fv(v))if(gT)q=ab;else{q=sb;var Z=rb}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(q=ob);if(q&&(q=q(t,f))){mT(g,q,n,m);break e}Z&&Z(t,v,f),t==="focusout"&&(Z=v._wrapperState)&&Z.controlled&&v.type==="number"&&fm(v,"number",v.value)}switch(Z=f?ta(f):window,t){case"focusin":(Fv(Z)||Z.contentEditable==="true")&&(Jo=Z,Sm=f,Xl=null);break;case"focusout":Xl=Sm=Jo=null;break;case"mousedown":Im=!0;break;case"contextmenu":case"mouseup":case"dragend":Im=!1,$v(g,n,m);break;case"selectionchange":if(cb)break;case"keydown":case"keyup":$v(g,n,m)}var N;if(ay)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Yo?fT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(dT&&n.locale!=="ko"&&(Yo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Yo&&(N=hT()):(Nr=m,ry="value"in Nr?Nr.value:Nr.textContent,Yo=!0)),Z=Qh(f,S),0<Z.length&&(S=new Ov(S,t,null,n,m),g.push({event:S,listeners:Z}),N?S.data=N:(N=pT(n),N!==null&&(S.data=N)))),(N=Yk?Jk(t,n):eb(t,n))&&(f=Qh(f,"onBeforeInput"),0<f.length&&(m=new Ov("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=N))}IT(g,e)})}function Tu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=mu(t,n),o!=null&&i.unshift(Tu(t,o,r)),o=mu(t,e),o!=null&&i.push(Tu(t,o,r))),t=t.return}return i}function Ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zv(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=mu(n,o),h!=null&&a.unshift(Tu(n,h,u))):r||(h=mu(n,o),h!=null&&a.push(Tu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var pb=/\r\n?/g,mb=/\u0000|\uFFFD/g;function Kv(t){return(typeof t=="string"?t:""+t).replace(pb,`
`).replace(mb,"")}function th(t,e,n){if(e=Kv(e),Kv(t)!==e&&n)throw Error(Y(425))}function Xh(){}var Cm=null,Am=null;function km(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bm=typeof setTimeout=="function"?setTimeout:void 0,gb=typeof clearTimeout=="function"?clearTimeout:void 0,Qv=typeof Promise=="function"?Promise:void 0,yb=typeof queueMicrotask=="function"?queueMicrotask:typeof Qv<"u"?function(t){return Qv.resolve(null).then(t).catch(_b)}:bm;function _b(t){setTimeout(function(){throw t})}function mp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),_u(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);_u(e)}function Fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $a=Math.random().toString(36).slice(2),gi="__reactFiber$"+$a,Eu="__reactProps$"+$a,Ji="__reactContainer$"+$a,Rm="__reactEvents$"+$a,vb="__reactListeners$"+$a,wb="__reactHandles$"+$a;function js(t){var e=t[gi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ji]||n[gi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xv(t);t!==null;){if(n=t[gi])return n;t=Xv(t)}return e}t=n,n=t.parentNode}return null}function Gu(t){return t=t[gi]||t[Ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ta(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Qd(t){return t[Eu]||null}var Lm=[],na=-1;function hs(t){return{current:t}}function Je(t){0>na||(t.current=Lm[na],Lm[na]=null,na--)}function Ze(t,e){na++,Lm[na]=t.current,t.current=e}var es={},qt=hs(es),fn=hs(!1),Ks=es;function Ca(t,e){var n=t.type.contextTypes;if(!n)return es;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function pn(t){return t=t.childContextTypes,t!=null}function Yh(){Je(fn),Je(qt)}function Yv(t,e,n){if(qt.current!==es)throw Error(Y(168));Ze(qt,e),Ze(fn,n)}function AT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,rk(t)||"Unknown",r));return st({},n,i)}function Jh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Ks=qt.current,Ze(qt,t),Ze(fn,fn.current),!0}function Jv(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=AT(t,e,Ks),i.__reactInternalMemoizedMergedChildContext=t,Je(fn),Je(qt),Ze(qt,t)):Je(fn),Ze(fn,n)}var Ui=null,Xd=!1,gp=!1;function kT(t){Ui===null?Ui=[t]:Ui.push(t)}function xb(t){Xd=!0,kT(t)}function ds(){if(!gp&&Ui!==null){gp=!0;var t=0,e=$e;try{var n=Ui;for($e=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ui=null,Xd=!1}catch(r){throw Ui!==null&&(Ui=Ui.slice(t+1)),eT(ey,ds),r}finally{$e=e,gp=!1}}return null}var ia=[],ra=0,ed=null,td=0,Dn=[],On=0,Qs=null,Hi=1,Wi="";function Ls(t,e){ia[ra++]=td,ia[ra++]=ed,ed=t,td=e}function bT(t,e,n){Dn[On++]=Hi,Dn[On++]=Wi,Dn[On++]=Qs,Qs=t;var i=Hi;t=Wi;var r=32-ni(i)-1;i&=~(1<<r),n+=1;var o=32-ni(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Hi=1<<32-ni(e)+r|n<<r|i,Wi=o+t}else Hi=1<<o|n<<r|i,Wi=t}function uy(t){t.return!==null&&(Ls(t,1),bT(t,1,0))}function cy(t){for(;t===ed;)ed=ia[--ra],ia[ra]=null,td=ia[--ra],ia[ra]=null;for(;t===Qs;)Qs=Dn[--On],Dn[On]=null,Wi=Dn[--On],Dn[On]=null,Hi=Dn[--On],Dn[On]=null}var xn=null,wn=null,et=!1,Yn=null;function RT(t,e){var n=zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,wn=Fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qs!==null?{id:Hi,overflow:Wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xn=t,wn=null,!0):!1;default:return!1}}function Nm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mm(t){if(et){var e=wn;if(e){var n=e;if(!e0(t,e)){if(Nm(t))throw Error(Y(418));e=Fr(n.nextSibling);var i=xn;e&&e0(t,e)?RT(i,n):(t.flags=t.flags&-4097|2,et=!1,xn=t)}}else{if(Nm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,et=!1,xn=t}}}function t0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function nh(t){if(t!==xn)return!1;if(!et)return t0(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!km(t.type,t.memoizedProps)),e&&(e=wn)){if(Nm(t))throw LT(),Error(Y(418));for(;e;)RT(t,e),e=Fr(e.nextSibling)}if(t0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=xn?Fr(t.stateNode.nextSibling):null;return!0}function LT(){for(var t=wn;t;)t=Fr(t.nextSibling)}function Aa(){wn=xn=null,et=!1}function hy(t){Yn===null?Yn=[t]:Yn.push(t)}var Tb=lr.ReactCurrentBatchConfig;function Nl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function ih(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n0(t){var e=t._init;return e(t._payload)}function NT(t){function e(C,E){if(t){var I=C.deletions;I===null?(C.deletions=[E],C.flags|=16):I.push(E)}}function n(C,E){if(!t)return null;for(;E!==null;)e(C,E),E=E.sibling;return null}function i(C,E){for(C=new Map;E!==null;)E.key!==null?C.set(E.key,E):C.set(E.index,E),E=E.sibling;return C}function r(C,E){return C=Wr(C,E),C.index=0,C.sibling=null,C}function o(C,E,I){return C.index=I,t?(I=C.alternate,I!==null?(I=I.index,I<E?(C.flags|=2,E):I):(C.flags|=2,E)):(C.flags|=1048576,E)}function a(C){return t&&C.alternate===null&&(C.flags|=2),C}function u(C,E,I,F){return E===null||E.tag!==6?(E=Ep(I,C.mode,F),E.return=C,E):(E=r(E,I),E.return=C,E)}function h(C,E,I,F){var q=I.type;return q===Xo?m(C,E,I.props.children,F,I.key):E!==null&&(E.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Pr&&n0(q)===E.type)?(F=r(E,I.props),F.ref=Nl(C,E,I),F.return=C,F):(F=bh(I.type,I.key,I.props,null,C.mode,F),F.ref=Nl(C,E,I),F.return=C,F)}function f(C,E,I,F){return E===null||E.tag!==4||E.stateNode.containerInfo!==I.containerInfo||E.stateNode.implementation!==I.implementation?(E=Pp(I,C.mode,F),E.return=C,E):(E=r(E,I.children||[]),E.return=C,E)}function m(C,E,I,F,q){return E===null||E.tag!==7?(E=Ws(I,C.mode,F,q),E.return=C,E):(E=r(E,I),E.return=C,E)}function g(C,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ep(""+E,C.mode,I),E.return=C,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case qc:return I=bh(E.type,E.key,E.props,null,C.mode,I),I.ref=Nl(C,null,E),I.return=C,I;case Qo:return E=Pp(E,C.mode,I),E.return=C,E;case Pr:var F=E._init;return g(C,F(E._payload),I)}if(zl(E)||Al(E))return E=Ws(E,C.mode,I,null),E.return=C,E;ih(C,E)}return null}function v(C,E,I,F){var q=E!==null?E.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return q!==null?null:u(C,E,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case qc:return I.key===q?h(C,E,I,F):null;case Qo:return I.key===q?f(C,E,I,F):null;case Pr:return q=I._init,v(C,E,q(I._payload),F)}if(zl(I)||Al(I))return q!==null?null:m(C,E,I,F,null);ih(C,I)}return null}function T(C,E,I,F,q){if(typeof F=="string"&&F!==""||typeof F=="number")return C=C.get(I)||null,u(E,C,""+F,q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case qc:return C=C.get(F.key===null?I:F.key)||null,h(E,C,F,q);case Qo:return C=C.get(F.key===null?I:F.key)||null,f(E,C,F,q);case Pr:var Z=F._init;return T(C,E,I,Z(F._payload),q)}if(zl(F)||Al(F))return C=C.get(I)||null,m(E,C,F,q,null);ih(E,F)}return null}function R(C,E,I,F){for(var q=null,Z=null,N=E,S=E=0,k=null;N!==null&&S<I.length;S++){N.index>S?(k=N,N=null):k=N.sibling;var M=v(C,N,I[S],F);if(M===null){N===null&&(N=k);break}t&&N&&M.alternate===null&&e(C,N),E=o(M,E,S),Z===null?q=M:Z.sibling=M,Z=M,N=k}if(S===I.length)return n(C,N),et&&Ls(C,S),q;if(N===null){for(;S<I.length;S++)N=g(C,I[S],F),N!==null&&(E=o(N,E,S),Z===null?q=N:Z.sibling=N,Z=N);return et&&Ls(C,S),q}for(N=i(C,N);S<I.length;S++)k=T(N,C,S,I[S],F),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?S:k.key),E=o(k,E,S),Z===null?q=k:Z.sibling=k,Z=k);return t&&N.forEach(function(O){return e(C,O)}),et&&Ls(C,S),q}function b(C,E,I,F){var q=Al(I);if(typeof q!="function")throw Error(Y(150));if(I=q.call(I),I==null)throw Error(Y(151));for(var Z=q=null,N=E,S=E=0,k=null,M=I.next();N!==null&&!M.done;S++,M=I.next()){N.index>S?(k=N,N=null):k=N.sibling;var O=v(C,N,M.value,F);if(O===null){N===null&&(N=k);break}t&&N&&O.alternate===null&&e(C,N),E=o(O,E,S),Z===null?q=O:Z.sibling=O,Z=O,N=k}if(M.done)return n(C,N),et&&Ls(C,S),q;if(N===null){for(;!M.done;S++,M=I.next())M=g(C,M.value,F),M!==null&&(E=o(M,E,S),Z===null?q=M:Z.sibling=M,Z=M);return et&&Ls(C,S),q}for(N=i(C,N);!M.done;S++,M=I.next())M=T(N,C,S,M.value,F),M!==null&&(t&&M.alternate!==null&&N.delete(M.key===null?S:M.key),E=o(M,E,S),Z===null?q=M:Z.sibling=M,Z=M);return t&&N.forEach(function(B){return e(C,B)}),et&&Ls(C,S),q}function z(C,E,I,F){if(typeof I=="object"&&I!==null&&I.type===Xo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case qc:e:{for(var q=I.key,Z=E;Z!==null;){if(Z.key===q){if(q=I.type,q===Xo){if(Z.tag===7){n(C,Z.sibling),E=r(Z,I.props.children),E.return=C,C=E;break e}}else if(Z.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Pr&&n0(q)===Z.type){n(C,Z.sibling),E=r(Z,I.props),E.ref=Nl(C,Z,I),E.return=C,C=E;break e}n(C,Z);break}else e(C,Z);Z=Z.sibling}I.type===Xo?(E=Ws(I.props.children,C.mode,F,I.key),E.return=C,C=E):(F=bh(I.type,I.key,I.props,null,C.mode,F),F.ref=Nl(C,E,I),F.return=C,C=F)}return a(C);case Qo:e:{for(Z=I.key;E!==null;){if(E.key===Z)if(E.tag===4&&E.stateNode.containerInfo===I.containerInfo&&E.stateNode.implementation===I.implementation){n(C,E.sibling),E=r(E,I.children||[]),E.return=C,C=E;break e}else{n(C,E);break}else e(C,E);E=E.sibling}E=Pp(I,C.mode,F),E.return=C,C=E}return a(C);case Pr:return Z=I._init,z(C,E,Z(I._payload),F)}if(zl(I))return R(C,E,I,F);if(Al(I))return b(C,E,I,F);ih(C,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,E!==null&&E.tag===6?(n(C,E.sibling),E=r(E,I),E.return=C,C=E):(n(C,E),E=Ep(I,C.mode,F),E.return=C,C=E),a(C)):n(C,E)}return z}var ka=NT(!0),MT=NT(!1),nd=hs(null),id=null,sa=null,dy=null;function fy(){dy=sa=id=null}function py(t){var e=nd.current;Je(nd),t._currentValue=e}function Dm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ya(t,e){id=t,dy=sa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(dy!==t)if(t={context:t,memoizedValue:e,next:null},sa===null){if(id===null)throw Error(Y(308));sa=t,id.dependencies={lanes:0,firstContext:t}}else sa=sa.next=t;return e}var zs=null;function my(t){zs===null?zs=[t]:zs.push(t)}function DT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,my(e)):(n.next=r.next,r.next=n),e.interleaved=n,er(t,i)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sr=!1;function gy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Br(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,De&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,er(t,n)}return r=i.interleaved,r===null?(e.next=e,my(i)):(e.next=r.next,r.next=e),i.interleaved=e,er(t,n)}function Ph(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ty(t,n)}}function i0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rd(t,e,n,i){var r=t.updateQueue;Sr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var v=u.lane,T=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var R=t,b=u;switch(v=e,T=n,b.tag){case 1:if(R=b.payload,typeof R=="function"){g=R.call(T,g,v);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=b.payload,v=typeof R=="function"?R.call(T,g,v):R,v==null)break e;g=st({},g,v);break e;case 2:Sr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else T={eventTime:T,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,h=g):m=m.next=T,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Ys|=a,t.lanes=a,t.memoizedState=g}}function r0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var Zu={},_i=hs(Zu),Pu=hs(Zu),Su=hs(Zu);function Fs(t){if(t===Zu)throw Error(Y(174));return t}function yy(t,e){switch(Ze(Su,e),Ze(Pu,t),Ze(_i,Zu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mm(e,t)}Je(_i),Ze(_i,e)}function ba(){Je(_i),Je(Pu),Je(Su)}function VT(t){Fs(Su.current);var e=Fs(_i.current),n=mm(e,t.type);e!==n&&(Ze(Pu,t),Ze(_i,n))}function _y(t){Pu.current===t&&(Je(_i),Je(Pu))}var tt=hs(0);function sd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yp=[];function vy(){for(var t=0;t<yp.length;t++)yp[t]._workInProgressVersionPrimary=null;yp.length=0}var Sh=lr.ReactCurrentDispatcher,_p=lr.ReactCurrentBatchConfig,Xs=0,rt=null,wt=null,kt=null,od=!1,Yl=!1,Iu=0,Eb=0;function zt(){throw Error(Y(321))}function wy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ri(t[n],e[n]))return!1;return!0}function xy(t,e,n,i,r,o){if(Xs=o,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sh.current=t===null||t.memoizedState===null?Cb:Ab,t=n(i,r),Yl){o=0;do{if(Yl=!1,Iu=0,25<=o)throw Error(Y(301));o+=1,kt=wt=null,e.updateQueue=null,Sh.current=kb,t=n(i,r)}while(Yl)}if(Sh.current=ad,e=wt!==null&&wt.next!==null,Xs=0,kt=wt=rt=null,od=!1,e)throw Error(Y(300));return t}function Ty(){var t=Iu!==0;return Iu=0,t}function pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?rt.memoizedState=kt=t:kt=kt.next=t,kt}function Un(){if(wt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=kt===null?rt.memoizedState:kt.next;if(e!==null)kt=e,wt=t;else{if(t===null)throw Error(Y(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},kt===null?rt.memoizedState=kt=t:kt=kt.next=t}return kt}function Cu(t,e){return typeof e=="function"?e(t):e}function vp(t){var e=Un(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=wt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((Xs&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,rt.lanes|=m,Ys|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,ri(i,e.memoizedState)||(dn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,rt.lanes|=o,Ys|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wp(t){var e=Un(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);ri(o,e.memoizedState)||(dn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function jT(){}function zT(t,e){var n=rt,i=Un(),r=e(),o=!ri(i.memoizedState,r);if(o&&(i.memoizedState=r,dn=!0),i=i.queue,Ey(UT.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,Au(9,BT.bind(null,n,i,r,e),void 0,null),Rt===null)throw Error(Y(349));Xs&30||FT(n,e,r)}return r}function FT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function BT(t,e,n,i){e.value=n,e.getSnapshot=i,HT(e)&&WT(t)}function UT(t,e,n){return n(function(){HT(e)&&WT(t)})}function HT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ri(t,n)}catch{return!0}}function WT(t){var e=er(t,1);e!==null&&ii(e,t,1,-1)}function s0(t){var e=pi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cu,lastRenderedState:t},e.queue=t,t=t.dispatch=Ib.bind(null,rt,t),[e.memoizedState,t]}function Au(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function $T(){return Un().memoizedState}function Ih(t,e,n,i){var r=pi();rt.flags|=t,r.memoizedState=Au(1|e,n,void 0,i===void 0?null:i)}function Yd(t,e,n,i){var r=Un();i=i===void 0?null:i;var o=void 0;if(wt!==null){var a=wt.memoizedState;if(o=a.destroy,i!==null&&wy(i,a.deps)){r.memoizedState=Au(e,n,o,i);return}}rt.flags|=t,r.memoizedState=Au(1|e,n,o,i)}function o0(t,e){return Ih(8390656,8,t,e)}function Ey(t,e){return Yd(2048,8,t,e)}function qT(t,e){return Yd(4,2,t,e)}function GT(t,e){return Yd(4,4,t,e)}function ZT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function KT(t,e,n){return n=n!=null?n.concat([t]):null,Yd(4,4,ZT.bind(null,e,t),n)}function Py(){}function QT(t,e){var n=Un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&wy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function XT(t,e){var n=Un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&wy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function YT(t,e,n){return Xs&21?(ri(n,e)||(n=iT(),rt.lanes|=n,Ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function Pb(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var i=_p.transition;_p.transition={};try{t(!1),e()}finally{$e=n,_p.transition=i}}function JT(){return Un().memoizedState}function Sb(t,e,n){var i=Hr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},eE(t))tE(e,n);else if(n=DT(t,e,n,i),n!==null){var r=en();ii(n,t,i,r),nE(n,e,i)}}function Ib(t,e,n){var i=Hr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(eE(t))tE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,ri(u,a)){var h=e.interleaved;h===null?(r.next=r,my(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=DT(t,e,r,i),n!==null&&(r=en(),ii(n,t,i,r),nE(n,e,i))}}function eE(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function tE(t,e){Yl=od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ty(t,n)}}var ad={readContext:Bn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},Cb={readContext:Bn,useCallback:function(t,e){return pi().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:o0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ih(4194308,4,ZT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ih(4,2,t,e)},useMemo:function(t,e){var n=pi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=pi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Sb.bind(null,rt,t),[i.memoizedState,t]},useRef:function(t){var e=pi();return t={current:t},e.memoizedState=t},useState:s0,useDebugValue:Py,useDeferredValue:function(t){return pi().memoizedState=t},useTransition:function(){var t=s0(!1),e=t[0];return t=Pb.bind(null,t[1]),pi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=rt,r=pi();if(et){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Rt===null)throw Error(Y(349));Xs&30||FT(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,o0(UT.bind(null,i,o,t),[t]),i.flags|=2048,Au(9,BT.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=pi(),e=Rt.identifierPrefix;if(et){var n=Wi,i=Hi;n=(i&~(1<<32-ni(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Iu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Eb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ab={readContext:Bn,useCallback:QT,useContext:Bn,useEffect:Ey,useImperativeHandle:KT,useInsertionEffect:qT,useLayoutEffect:GT,useMemo:XT,useReducer:vp,useRef:$T,useState:function(){return vp(Cu)},useDebugValue:Py,useDeferredValue:function(t){var e=Un();return YT(e,wt.memoizedState,t)},useTransition:function(){var t=vp(Cu)[0],e=Un().memoizedState;return[t,e]},useMutableSource:jT,useSyncExternalStore:zT,useId:JT,unstable_isNewReconciler:!1},kb={readContext:Bn,useCallback:QT,useContext:Bn,useEffect:Ey,useImperativeHandle:KT,useInsertionEffect:qT,useLayoutEffect:GT,useMemo:XT,useReducer:wp,useRef:$T,useState:function(){return wp(Cu)},useDebugValue:Py,useDeferredValue:function(t){var e=Un();return wt===null?e.memoizedState=t:YT(e,wt.memoizedState,t)},useTransition:function(){var t=wp(Cu)[0],e=Un().memoizedState;return[t,e]},useMutableSource:jT,useSyncExternalStore:zT,useId:JT,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Om(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jd={isMounted:function(t){return(t=t._reactInternals)?oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=en(),r=Hr(t),o=Zi(i,r);o.payload=e,n!=null&&(o.callback=n),e=Br(t,o,r),e!==null&&(ii(e,t,r,i),Ph(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=en(),r=Hr(t),o=Zi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Br(t,o,r),e!==null&&(ii(e,t,r,i),Ph(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),i=Hr(t),r=Zi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Br(t,r,i),e!==null&&(ii(e,t,i,n),Ph(e,t,i))}};function a0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!wu(n,i)||!wu(r,o):!0}function iE(t,e,n){var i=!1,r=es,o=e.contextType;return typeof o=="object"&&o!==null?o=Bn(o):(r=pn(e)?Ks:qt.current,i=e.contextTypes,o=(i=i!=null)?Ca(t,r):es),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function l0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Jd.enqueueReplaceState(e,e.state,null)}function Vm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},gy(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Bn(o):(o=pn(e)?Ks:qt.current,r.context=Ca(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Om(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Jd.enqueueReplaceState(r,r.state,null),rd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ra(t,e){try{var n="",i=e;do n+=ik(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function xp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bb=typeof WeakMap=="function"?WeakMap:Map;function rE(t,e,n){n=Zi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ud||(ud=!0,Zm=i),jm(t,e)},n}function sE(t,e,n){n=Zi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){jm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){jm(t,e),typeof i!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function u0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new bb;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Wb.bind(null,t,e,n),e.then(t,t))}function c0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function h0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zi(-1,1),e.tag=2,Br(n,e,1))),n.lanes|=1),t)}var Rb=lr.ReactCurrentOwner,dn=!1;function Jt(t,e,n,i){e.child=t===null?MT(e,null,n,i):ka(e,t.child,n,i)}function d0(t,e,n,i,r){n=n.render;var o=e.ref;return ya(e,r),i=xy(t,e,n,i,o,r),n=Ty(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,tr(t,e,r)):(et&&n&&uy(e),e.flags|=1,Jt(t,e,i,r),e.child)}function f0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Ly(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,oE(t,e,o,i,r)):(t=bh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:wu,n(a,i)&&t.ref===e.ref)return tr(t,e,r)}return e.flags|=1,t=Wr(o,i),t.ref=e.ref,t.return=e,e.child=t}function oE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(wu(o,i)&&t.ref===e.ref)if(dn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,tr(t,e,r)}return zm(t,e,n,i,r)}function aE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(aa,vn),vn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(aa,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ze(aa,vn),vn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ze(aa,vn),vn|=i;return Jt(t,e,r,n),e.child}function lE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zm(t,e,n,i,r){var o=pn(n)?Ks:qt.current;return o=Ca(e,o),ya(e,r),n=xy(t,e,n,i,o,r),i=Ty(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,tr(t,e,r)):(et&&i&&uy(e),e.flags|=1,Jt(t,e,n,r),e.child)}function p0(t,e,n,i,r){if(pn(n)){var o=!0;Jh(e)}else o=!1;if(ya(e,r),e.stateNode===null)Ch(t,e),iE(e,n,i),Vm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Bn(f):(f=pn(n)?Ks:qt.current,f=Ca(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&l0(e,a,i,f),Sr=!1;var v=e.memoizedState;a.state=v,rd(e,i,a,r),h=e.memoizedState,u!==i||v!==h||fn.current||Sr?(typeof m=="function"&&(Om(e,n,m,i),h=e.memoizedState),(u=Sr||a0(e,n,u,i,v,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,OT(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Qn(e.type,u),a.props=f,g=e.pendingProps,v=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Bn(h):(h=pn(n)?Ks:qt.current,h=Ca(e,h));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||v!==h)&&l0(e,a,i,h),Sr=!1,v=e.memoizedState,a.state=v,rd(e,i,a,r);var R=e.memoizedState;u!==g||v!==R||fn.current||Sr?(typeof T=="function"&&(Om(e,n,T,i),R=e.memoizedState),(f=Sr||a0(e,n,f,i,v,R,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,R,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,R,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=R),a.props=i,a.state=R,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return Fm(t,e,n,i,o,r)}function Fm(t,e,n,i,r,o){lE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Jv(e,n,!1),tr(t,e,o);i=e.stateNode,Rb.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=ka(e,t.child,null,o),e.child=ka(e,null,u,o)):Jt(t,e,u,o),e.memoizedState=i.state,r&&Jv(e,n,!0),e.child}function uE(t){var e=t.stateNode;e.pendingContext?Yv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yv(t,e.context,!1),yy(t,e.containerInfo)}function m0(t,e,n,i,r){return Aa(),hy(r),e.flags|=256,Jt(t,e,n,i),e.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function Um(t){return{baseLanes:t,cachePool:null,transitions:null}}function cE(t,e,n){var i=e.pendingProps,r=tt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ze(tt,r&1),t===null)return Mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=nf(a,i,0,null),t=Ws(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Um(n),e.memoizedState=Bm,t):Sy(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Lb(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Wr(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Wr(u,o):(o=Ws(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Um(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Bm,i}return o=t.child,t=o.sibling,i=Wr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Sy(t,e){return e=nf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rh(t,e,n,i){return i!==null&&hy(i),ka(e,t.child,null,n),t=Sy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lb(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=xp(Error(Y(422))),rh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=nf({mode:"visible",children:i.children},r,0,null),o=Ws(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ka(e,t.child,null,a),e.child.memoizedState=Um(a),e.memoizedState=Bm,o);if(!(e.mode&1))return rh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(Y(419)),i=xp(o,i,void 0),rh(t,e,a,i)}if(u=(a&t.childLanes)!==0,dn||u){if(i=Rt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,er(t,r),ii(i,t,r,-1))}return Ry(),i=xp(Error(Y(421))),rh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=$b.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,wn=Fr(r.nextSibling),xn=e,et=!0,Yn=null,t!==null&&(Dn[On++]=Hi,Dn[On++]=Wi,Dn[On++]=Qs,Hi=t.id,Wi=t.overflow,Qs=e),e=Sy(e,i.children),e.flags|=4096,e)}function g0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Dm(t.return,e,n)}function Tp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function hE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Jt(t,e,i.children,n),i=tt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g0(t,n,e);else if(t.tag===19)g0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ze(tt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&sd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Tp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&sd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Tp(e,!0,n,null,o);break;case"together":Tp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ch(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nb(t,e,n){switch(e.tag){case 3:uE(e),Aa();break;case 5:VT(e);break;case 1:pn(e.type)&&Jh(e);break;case 4:yy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ze(nd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ze(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?cE(t,e,n):(Ze(tt,tt.current&1),t=tr(t,e,n),t!==null?t.sibling:null);Ze(tt,tt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return hE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ze(tt,tt.current),i)break;return null;case 22:case 23:return e.lanes=0,aE(t,e,n)}return tr(t,e,n)}var dE,Hm,fE,pE;dE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hm=function(){};fE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Fs(_i.current);var o=null;switch(n){case"input":r=hm(t,r),i=hm(t,i),o=[];break;case"select":r=st({},r,{value:void 0}),i=st({},i,{value:void 0}),o=[];break;case"textarea":r=pm(t,r),i=pm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Xh)}gm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(fu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(fu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Qe("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};pE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ml(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Mb(t,e,n){var i=e.pendingProps;switch(cy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return pn(e.type)&&Yh(),Ft(e),null;case 3:return i=e.stateNode,ba(),Je(fn),Je(qt),vy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(nh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(Xm(Yn),Yn=null))),Hm(t,e),Ft(e),null;case 5:_y(e);var r=Fs(Su.current);if(n=e.type,t!==null&&e.stateNode!=null)fE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Ft(e),null}if(t=Fs(_i.current),nh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[gi]=e,i[Eu]=o,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":case"embed":Qe("load",i);break;case"video":case"audio":for(r=0;r<Bl.length;r++)Qe(Bl[r],i);break;case"source":Qe("error",i);break;case"img":case"image":case"link":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"input":Sv(i,o),Qe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Qe("invalid",i);break;case"textarea":Cv(i,o),Qe("invalid",i)}gm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&th(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&th(i.textContent,u,t),r=["children",""+u]):fu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Qe("scroll",i)}switch(n){case"input":Gc(i),Iv(i,o,!0);break;case"textarea":Gc(i),Av(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Xh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ux(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[gi]=e,t[Eu]=i,dE(t,e,!1,!1),e.stateNode=t;e:{switch(a=ym(n,i),n){case"dialog":Qe("cancel",t),Qe("close",t),r=i;break;case"iframe":case"object":case"embed":Qe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Bl.length;r++)Qe(Bl[r],t);r=i;break;case"source":Qe("error",t),r=i;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),r=i;break;case"details":Qe("toggle",t),r=i;break;case"input":Sv(t,i),r=hm(t,i),Qe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=st({},i,{value:void 0}),Qe("invalid",t);break;case"textarea":Cv(t,i),r=pm(t,i),Qe("invalid",t);break;default:r=i}gm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?$x(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Hx(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&pu(t,h):typeof h=="number"&&pu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(fu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Qe("scroll",t):h!=null&&Kg(t,o,h,a))}switch(n){case"input":Gc(t),Iv(t,i,!1);break;case"textarea":Gc(t),Av(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Jr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?fa(t,!!i.multiple,o,!1):i.defaultValue!=null&&fa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Xh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)pE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Fs(Su.current),Fs(_i.current),nh(e)){if(i=e.stateNode,n=e.memoizedProps,i[gi]=e,(o=i.nodeValue!==n)&&(t=xn,t!==null))switch(t.tag){case 3:th(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&th(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[gi]=e,e.stateNode=i}return Ft(e),null;case 13:if(Je(tt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&wn!==null&&e.mode&1&&!(e.flags&128))LT(),Aa(),e.flags|=98560,o=!1;else if(o=nh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[gi]=e}else Aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),o=!1}else Yn!==null&&(Xm(Yn),Yn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?Tt===0&&(Tt=3):Ry())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return ba(),Hm(t,e),t===null&&xu(e.stateNode.containerInfo),Ft(e),null;case 10:return py(e.type._context),Ft(e),null;case 17:return pn(e.type)&&Yh(),Ft(e),null;case 19:if(Je(tt),o=e.memoizedState,o===null)return Ft(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Ml(o,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=sd(t),a!==null){for(e.flags|=128,Ml(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ze(tt,tt.current&1|2),e.child}t=t.sibling}o.tail!==null&&dt()>La&&(e.flags|=128,i=!0,Ml(o,!1),e.lanes=4194304)}else{if(!i)if(t=sd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ml(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!et)return Ft(e),null}else 2*dt()-o.renderingStartTime>La&&n!==1073741824&&(e.flags|=128,i=!0,Ml(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=dt(),e.sibling=null,n=tt.current,Ze(tt,i?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return by(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?vn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Db(t,e){switch(cy(e),e.tag){case 1:return pn(e.type)&&Yh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ba(),Je(fn),Je(qt),vy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _y(e),null;case 13:if(Je(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(tt),null;case 4:return ba(),null;case 10:return py(e.type._context),null;case 22:case 23:return by(),null;case 24:return null;default:return null}}var sh=!1,Wt=!1,Ob=typeof WeakSet=="function"?WeakSet:Set,oe=null;function oa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){lt(t,e,i)}else n.current=null}function Wm(t,e,n){try{n()}catch(i){lt(t,e,i)}}var y0=!1;function Vb(t,e){if(Cm=Zh,t=vT(),ly(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,v=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)v=g,g=T;for(;;){if(g===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++m===i&&(h=a),(T=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Am={focusedElem:t,selectionRange:n},Zh=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var b=R.memoizedProps,z=R.memoizedState,C=e.stateNode,E=C.getSnapshotBeforeUpdate(e.elementType===e.type?b:Qn(e.type,b),z);C.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(F){lt(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return R=y0,y0=!1,R}function Jl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Wm(e,n,o)}r=r.next}while(r!==i)}}function ef(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function $m(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mE(t){var e=t.alternate;e!==null&&(t.alternate=null,mE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gi],delete e[Eu],delete e[Rm],delete e[vb],delete e[wb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gE(t){return t.tag===5||t.tag===3||t.tag===4}function _0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xh));else if(i!==4&&(t=t.child,t!==null))for(qm(t,e,n),t=t.sibling;t!==null;)qm(t,e,n),t=t.sibling}function Gm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Gm(t,e,n),t=t.sibling;t!==null;)Gm(t,e,n),t=t.sibling}var Lt=null,Xn=!1;function wr(t,e,n){for(n=n.child;n!==null;)yE(t,e,n),n=n.sibling}function yE(t,e,n){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(qd,n)}catch{}switch(n.tag){case 5:Wt||oa(n,e);case 6:var i=Lt,r=Xn;Lt=null,wr(t,e,n),Lt=i,Xn=r,Lt!==null&&(Xn?(t=Lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Lt.removeChild(n.stateNode));break;case 18:Lt!==null&&(Xn?(t=Lt,n=n.stateNode,t.nodeType===8?mp(t.parentNode,n):t.nodeType===1&&mp(t,n),_u(t)):mp(Lt,n.stateNode));break;case 4:i=Lt,r=Xn,Lt=n.stateNode.containerInfo,Xn=!0,wr(t,e,n),Lt=i,Xn=r;break;case 0:case 11:case 14:case 15:if(!Wt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Wm(n,e,a),r=r.next}while(r!==i)}wr(t,e,n);break;case 1:if(!Wt&&(oa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){lt(n,e,u)}wr(t,e,n);break;case 21:wr(t,e,n);break;case 22:n.mode&1?(Wt=(i=Wt)||n.memoizedState!==null,wr(t,e,n),Wt=i):wr(t,e,n);break;default:wr(t,e,n)}}function v0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ob),e.forEach(function(i){var r=qb.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Lt=u.stateNode,Xn=!1;break e;case 3:Lt=u.stateNode.containerInfo,Xn=!0;break e;case 4:Lt=u.stateNode.containerInfo,Xn=!0;break e}u=u.return}if(Lt===null)throw Error(Y(160));yE(o,a,r),Lt=null,Xn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){lt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_E(e,t),e=e.sibling}function _E(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),fi(t),i&4){try{Jl(3,t,t.return),ef(3,t)}catch(b){lt(t,t.return,b)}try{Jl(5,t,t.return)}catch(b){lt(t,t.return,b)}}break;case 1:Kn(e,t),fi(t),i&512&&n!==null&&oa(n,n.return);break;case 5:if(Kn(e,t),fi(t),i&512&&n!==null&&oa(n,n.return),t.flags&32){var r=t.stateNode;try{pu(r,"")}catch(b){lt(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Fx(r,o),ym(u,a);var f=ym(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?$x(r,g):m==="dangerouslySetInnerHTML"?Hx(r,g):m==="children"?pu(r,g):Kg(r,m,g,f)}switch(u){case"input":dm(r,o);break;case"textarea":Bx(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?fa(r,!!o.multiple,T,!1):v!==!!o.multiple&&(o.defaultValue!=null?fa(r,!!o.multiple,o.defaultValue,!0):fa(r,!!o.multiple,o.multiple?[]:"",!1))}r[Eu]=o}catch(b){lt(t,t.return,b)}}break;case 6:if(Kn(e,t),fi(t),i&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){lt(t,t.return,b)}}break;case 3:if(Kn(e,t),fi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{_u(e.containerInfo)}catch(b){lt(t,t.return,b)}break;case 4:Kn(e,t),fi(t);break;case 13:Kn(e,t),fi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Ay=dt())),i&4&&v0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(f=Wt)||m,Kn(e,t),Wt=f):Kn(e,t),fi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(oe=t,m=t.child;m!==null;){for(g=oe=m;oe!==null;){switch(v=oe,T=v.child,v.tag){case 0:case 11:case 14:case 15:Jl(4,v,v.return);break;case 1:oa(v,v.return);var R=v.stateNode;if(typeof R.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(b){lt(i,n,b)}}break;case 5:oa(v,v.return);break;case 22:if(v.memoizedState!==null){x0(g);continue}}T!==null?(T.return=v,oe=T):x0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=Wx("display",a))}catch(b){lt(t,t.return,b)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(b){lt(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Kn(e,t),fi(t),i&4&&v0(t);break;case 21:break;default:Kn(e,t),fi(t)}}function fi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(pu(r,""),i.flags&=-33);var o=_0(t);Gm(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=_0(t);qm(t,u,a);break;default:throw Error(Y(161))}}catch(h){lt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jb(t,e,n){oe=t,vE(t)}function vE(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||sh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Wt;u=sh;var f=Wt;if(sh=a,(Wt=h)&&!f)for(oe=r;oe!==null;)a=oe,h=a.child,a.tag===22&&a.memoizedState!==null?T0(r):h!==null?(h.return=a,oe=h):T0(r);for(;o!==null;)oe=o,vE(o),o=o.sibling;oe=r,sh=u,Wt=f}w0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):w0(t)}}function w0(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||ef(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Wt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&r0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}r0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&_u(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Wt||e.flags&512&&$m(e)}catch(v){lt(e,e.return,v)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function x0(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function T0(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ef(4,e)}catch(h){lt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){lt(e,r,h)}}var o=e.return;try{$m(e)}catch(h){lt(e,o,h)}break;case 5:var a=e.return;try{$m(e)}catch(h){lt(e,a,h)}}}catch(h){lt(e,e.return,h)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var zb=Math.ceil,ld=lr.ReactCurrentDispatcher,Iy=lr.ReactCurrentOwner,Fn=lr.ReactCurrentBatchConfig,De=0,Rt=null,_t=null,Dt=0,vn=0,aa=hs(0),Tt=0,ku=null,Ys=0,tf=0,Cy=0,eu=null,hn=null,Ay=0,La=1/0,Bi=null,ud=!1,Zm=null,Ur=null,oh=!1,Mr=null,cd=0,tu=0,Km=null,Ah=-1,kh=0;function en(){return De&6?dt():Ah!==-1?Ah:Ah=dt()}function Hr(t){return t.mode&1?De&2&&Dt!==0?Dt&-Dt:Tb.transition!==null?(kh===0&&(kh=iT()),kh):(t=$e,t!==0||(t=window.event,t=t===void 0?16:cT(t.type)),t):1}function ii(t,e,n,i){if(50<tu)throw tu=0,Km=null,Error(Y(185));$u(t,n,i),(!(De&2)||t!==Rt)&&(t===Rt&&(!(De&2)&&(tf|=n),Tt===4&&Ar(t,Dt)),mn(t,i),n===1&&De===0&&!(e.mode&1)&&(La=dt()+500,Xd&&ds()))}function mn(t,e){var n=t.callbackNode;Tk(t,e);var i=Gh(t,t===Rt?Dt:0);if(i===0)n!==null&&Rv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Rv(n),e===1)t.tag===0?xb(E0.bind(null,t)):kT(E0.bind(null,t)),yb(function(){!(De&6)&&ds()}),n=null;else{switch(rT(i)){case 1:n=ey;break;case 4:n=tT;break;case 16:n=qh;break;case 536870912:n=nT;break;default:n=qh}n=CE(n,wE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wE(t,e){if(Ah=-1,kh=0,De&6)throw Error(Y(327));var n=t.callbackNode;if(_a()&&t.callbackNode!==n)return null;var i=Gh(t,t===Rt?Dt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=hd(t,i);else{e=i;var r=De;De|=2;var o=TE();(Rt!==t||Dt!==e)&&(Bi=null,La=dt()+500,Hs(t,e));do try{Ub();break}catch(u){xE(t,u)}while(!0);fy(),ld.current=o,De=r,_t!==null?e=0:(Rt=null,Dt=0,e=Tt)}if(e!==0){if(e===2&&(r=Tm(t),r!==0&&(i=r,e=Qm(t,r))),e===1)throw n=ku,Hs(t,0),Ar(t,i),mn(t,dt()),n;if(e===6)Ar(t,i);else{if(r=t.current.alternate,!(i&30)&&!Fb(r)&&(e=hd(t,i),e===2&&(o=Tm(t),o!==0&&(i=o,e=Qm(t,o))),e===1))throw n=ku,Hs(t,0),Ar(t,i),mn(t,dt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:Ns(t,hn,Bi);break;case 3:if(Ar(t,i),(i&130023424)===i&&(e=Ay+500-dt(),10<e)){if(Gh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){en(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=bm(Ns.bind(null,t,hn,Bi),e);break}Ns(t,hn,Bi);break;case 4:if(Ar(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ni(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=dt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zb(i/1960))-i,10<i){t.timeoutHandle=bm(Ns.bind(null,t,hn,Bi),i);break}Ns(t,hn,Bi);break;case 5:Ns(t,hn,Bi);break;default:throw Error(Y(329))}}}return mn(t,dt()),t.callbackNode===n?wE.bind(null,t):null}function Qm(t,e){var n=eu;return t.current.memoizedState.isDehydrated&&(Hs(t,e).flags|=256),t=hd(t,e),t!==2&&(e=hn,hn=n,e!==null&&Xm(e)),t}function Xm(t){hn===null?hn=t:hn.push.apply(hn,t)}function Fb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ri(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~Cy,e&=~tf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ni(e),i=1<<n;t[n]=-1,e&=~i}}function E0(t){if(De&6)throw Error(Y(327));_a();var e=Gh(t,0);if(!(e&1))return mn(t,dt()),null;var n=hd(t,e);if(t.tag!==0&&n===2){var i=Tm(t);i!==0&&(e=i,n=Qm(t,i))}if(n===1)throw n=ku,Hs(t,0),Ar(t,e),mn(t,dt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ns(t,hn,Bi),mn(t,dt()),null}function ky(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&(La=dt()+500,Xd&&ds())}}function Js(t){Mr!==null&&Mr.tag===0&&!(De&6)&&_a();var e=De;De|=1;var n=Fn.transition,i=$e;try{if(Fn.transition=null,$e=1,t)return t()}finally{$e=i,Fn.transition=n,De=e,!(De&6)&&ds()}}function by(){vn=aa.current,Je(aa)}function Hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gb(n)),_t!==null)for(n=_t.return;n!==null;){var i=n;switch(cy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Yh();break;case 3:ba(),Je(fn),Je(qt),vy();break;case 5:_y(i);break;case 4:ba();break;case 13:Je(tt);break;case 19:Je(tt);break;case 10:py(i.type._context);break;case 22:case 23:by()}n=n.return}if(Rt=t,_t=t=Wr(t.current,null),Dt=vn=e,Tt=0,ku=null,Cy=tf=Ys=0,hn=eu=null,zs!==null){for(e=0;e<zs.length;e++)if(n=zs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}zs=null}return t}function xE(t,e){do{var n=_t;try{if(fy(),Sh.current=ad,od){for(var i=rt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}od=!1}if(Xs=0,kt=wt=rt=null,Yl=!1,Iu=0,Iy.current=null,n===null||n.return===null){Tt=1,ku=e,_t=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Dt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=c0(a);if(T!==null){T.flags&=-257,h0(T,a,u,o,e),T.mode&1&&u0(o,f,e),e=T,h=f;var R=e.updateQueue;if(R===null){var b=new Set;b.add(h),e.updateQueue=b}else R.add(h);break e}else{if(!(e&1)){u0(o,f,e),Ry();break e}h=Error(Y(426))}}else if(et&&u.mode&1){var z=c0(a);if(z!==null){!(z.flags&65536)&&(z.flags|=256),h0(z,a,u,o,e),hy(Ra(h,u));break e}}o=h=Ra(h,u),Tt!==4&&(Tt=2),eu===null?eu=[o]:eu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=rE(o,h,e);i0(o,C);break e;case 1:u=h;var E=o.type,I=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ur===null||!Ur.has(I)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=sE(o,u,e);i0(o,F);break e}}o=o.return}while(o!==null)}PE(n)}catch(q){e=q,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(!0)}function TE(){var t=ld.current;return ld.current=ad,t===null?ad:t}function Ry(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Rt===null||!(Ys&268435455)&&!(tf&268435455)||Ar(Rt,Dt)}function hd(t,e){var n=De;De|=2;var i=TE();(Rt!==t||Dt!==e)&&(Bi=null,Hs(t,e));do try{Bb();break}catch(r){xE(t,r)}while(!0);if(fy(),De=n,ld.current=i,_t!==null)throw Error(Y(261));return Rt=null,Dt=0,Tt}function Bb(){for(;_t!==null;)EE(_t)}function Ub(){for(;_t!==null&&!fk();)EE(_t)}function EE(t){var e=IE(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?PE(t):_t=e,Iy.current=null}function PE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Db(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,_t=null;return}}else if(n=Mb(n,e,vn),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);Tt===0&&(Tt=5)}function Ns(t,e,n){var i=$e,r=Fn.transition;try{Fn.transition=null,$e=1,Hb(t,e,n,i)}finally{Fn.transition=r,$e=i}return null}function Hb(t,e,n,i){do _a();while(Mr!==null);if(De&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Ek(t,o),t===Rt&&(_t=Rt=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oh||(oh=!0,CE(qh,function(){return _a(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Fn.transition,Fn.transition=null;var a=$e;$e=1;var u=De;De|=4,Iy.current=null,Vb(t,n),_E(n,t),ub(Am),Zh=!!Cm,Am=Cm=null,t.current=n,jb(n),pk(),De=u,$e=a,Fn.transition=o}else t.current=n;if(oh&&(oh=!1,Mr=t,cd=r),o=t.pendingLanes,o===0&&(Ur=null),yk(n.stateNode),mn(t,dt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ud)throw ud=!1,t=Zm,Zm=null,t;return cd&1&&t.tag!==0&&_a(),o=t.pendingLanes,o&1?t===Km?tu++:(tu=0,Km=t):tu=0,ds(),null}function _a(){if(Mr!==null){var t=rT(cd),e=Fn.transition,n=$e;try{if(Fn.transition=null,$e=16>t?16:t,Mr===null)var i=!1;else{if(t=Mr,Mr=null,cd=0,De&6)throw Error(Y(331));var r=De;for(De|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(oe=f;oe!==null;){var m=oe;switch(m.tag){case 0:case 11:case 15:Jl(8,m,o)}var g=m.child;if(g!==null)g.return=m,oe=g;else for(;oe!==null;){m=oe;var v=m.sibling,T=m.return;if(mE(m),m===f){oe=null;break}if(v!==null){v.return=T,oe=v;break}oe=T}}}var R=o.alternate;if(R!==null){var b=R.child;if(b!==null){R.child=null;do{var z=b.sibling;b.sibling=null,b=z}while(b!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Jl(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,oe=C;break e}oe=o.return}}var E=t.current;for(oe=E;oe!==null;){a=oe;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,oe=I;else e:for(a=E;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ef(9,u)}}catch(q){lt(u,u.return,q)}if(u===a){oe=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,oe=F;break e}oe=u.return}}if(De=r,ds(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(qd,t)}catch{}i=!0}return i}finally{$e=n,Fn.transition=e}}return!1}function P0(t,e,n){e=Ra(n,e),e=rE(t,e,1),t=Br(t,e,1),e=en(),t!==null&&($u(t,1,e),mn(t,e))}function lt(t,e,n){if(t.tag===3)P0(t,t,n);else for(;e!==null;){if(e.tag===3){P0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ur===null||!Ur.has(i))){t=Ra(n,t),t=sE(e,t,1),e=Br(e,t,1),t=en(),e!==null&&($u(e,1,t),mn(e,t));break}}e=e.return}}function Wb(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Dt&n)===n&&(Tt===4||Tt===3&&(Dt&130023424)===Dt&&500>dt()-Ay?Hs(t,0):Cy|=n),mn(t,e)}function SE(t,e){e===0&&(t.mode&1?(e=Qc,Qc<<=1,!(Qc&130023424)&&(Qc=4194304)):e=1);var n=en();t=er(t,e),t!==null&&($u(t,e,n),mn(t,n))}function $b(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SE(t,n)}function qb(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),SE(t,n)}var IE;IE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,Nb(t,e,n);dn=!!(t.flags&131072)}else dn=!1,et&&e.flags&1048576&&bT(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ch(t,e),t=e.pendingProps;var r=Ca(e,qt.current);ya(e,n),r=xy(null,e,i,t,r,n);var o=Ty();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(i)?(o=!0,Jh(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,gy(e),r.updater=Jd,e.stateNode=r,r._reactInternals=e,Vm(e,i,t,n),e=Fm(null,e,i,!0,o,n)):(e.tag=0,et&&o&&uy(e),Jt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ch(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Zb(i),t=Qn(i,t),r){case 0:e=zm(null,e,i,t,n);break e;case 1:e=p0(null,e,i,t,n);break e;case 11:e=d0(null,e,i,t,n);break e;case 14:e=f0(null,e,i,Qn(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qn(i,r),zm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qn(i,r),p0(t,e,i,r,n);case 3:e:{if(uE(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,r=o.element,OT(t,e),rd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Ra(Error(Y(423)),e),e=m0(t,e,i,n,r);break e}else if(i!==r){r=Ra(Error(Y(424)),e),e=m0(t,e,i,n,r);break e}else for(wn=Fr(e.stateNode.containerInfo.firstChild),xn=e,et=!0,Yn=null,n=MT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Aa(),i===r){e=tr(t,e,n);break e}Jt(t,e,i,n)}e=e.child}return e;case 5:return VT(e),t===null&&Mm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,km(i,r)?a=null:o!==null&&km(i,o)&&(e.flags|=32),lE(t,e),Jt(t,e,a,n),e.child;case 6:return t===null&&Mm(e),null;case 13:return cE(t,e,n);case 4:return yy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ka(e,null,i,n):Jt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qn(i,r),d0(t,e,i,r,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Ze(nd,i._currentValue),i._currentValue=a,o!==null)if(ri(o.value,a)){if(o.children===r.children&&!fn.current){e=tr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=Zi(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Dm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Y(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Dm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Jt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ya(e,n),r=Bn(r),i=i(r),e.flags|=1,Jt(t,e,i,n),e.child;case 14:return i=e.type,r=Qn(i,e.pendingProps),r=Qn(i.type,r),f0(t,e,i,r,n);case 15:return oE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qn(i,r),Ch(t,e),e.tag=1,pn(i)?(t=!0,Jh(e)):t=!1,ya(e,n),iE(e,i,r),Vm(e,i,r,n),Fm(null,e,i,!0,t,n);case 19:return hE(t,e,n);case 22:return aE(t,e,n)}throw Error(Y(156,e.tag))};function CE(t,e){return eT(t,e)}function Gb(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,e,n,i){return new Gb(t,e,n,i)}function Ly(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zb(t){if(typeof t=="function")return Ly(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xg)return 11;if(t===Yg)return 14}return 2}function Wr(t,e){var n=t.alternate;return n===null?(n=zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Ly(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Xo:return Ws(n.children,r,o,e);case Qg:a=8,r|=8;break;case am:return t=zn(12,n,e,r|2),t.elementType=am,t.lanes=o,t;case lm:return t=zn(13,n,e,r),t.elementType=lm,t.lanes=o,t;case um:return t=zn(19,n,e,r),t.elementType=um,t.lanes=o,t;case Vx:return nf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dx:a=10;break e;case Ox:a=9;break e;case Xg:a=11;break e;case Yg:a=14;break e;case Pr:a=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=zn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Ws(t,e,n,i){return t=zn(7,t,i,e),t.lanes=n,t}function nf(t,e,n,i){return t=zn(22,t,i,e),t.elementType=Vx,t.lanes=n,t.stateNode={isHidden:!1},t}function Ep(t,e,n){return t=zn(6,t,null,e),t.lanes=n,t}function Pp(t,e,n){return e=zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kb(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rp(0),this.expirationTimes=rp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ny(t,e,n,i,r,o,a,u,h){return t=new Kb(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=zn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gy(o),t}function Qb(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function AE(t){if(!t)return es;t=t._reactInternals;e:{if(oo(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(pn(n))return AT(t,n,e)}return e}function kE(t,e,n,i,r,o,a,u,h){return t=Ny(n,i,!0,t,r,o,a,u,h),t.context=AE(null),n=t.current,i=en(),r=Hr(n),o=Zi(i,r),o.callback=e??null,Br(n,o,r),t.current.lanes=r,$u(t,r,i),mn(t,i),t}function rf(t,e,n,i){var r=e.current,o=en(),a=Hr(r);return n=AE(n),e.context===null?e.context=n:e.pendingContext=n,e=Zi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Br(r,e,a),t!==null&&(ii(t,r,a,o),Ph(t,r,a)),a}function dd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function S0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function My(t,e){S0(t,e),(t=t.alternate)&&S0(t,e)}function Xb(){return null}var bE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dy(t){this._internalRoot=t}sf.prototype.render=Dy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));rf(t,e,null,null)};sf.prototype.unmount=Dy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Js(function(){rf(null,t,null,null)}),e[Ji]=null}};function sf(t){this._internalRoot=t}sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=aT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&uT(t)}};function Oy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I0(){}function Yb(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=dd(a);o.call(f)}}var a=kE(e,i,t,0,null,!1,!1,"",I0);return t._reactRootContainer=a,t[Ji]=a.current,xu(t.nodeType===8?t.parentNode:t),Js(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=dd(h);u.call(f)}}var h=Ny(t,0,!1,null,null,!1,!1,"",I0);return t._reactRootContainer=h,t[Ji]=h.current,xu(t.nodeType===8?t.parentNode:t),Js(function(){rf(e,h,n,i)}),h}function af(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=dd(a);u.call(h)}}rf(e,a,t,r)}else a=Yb(n,e,t,r,i);return dd(a)}sT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fl(e.pendingLanes);n!==0&&(ty(e,n|1),mn(e,dt()),!(De&6)&&(La=dt()+500,ds()))}break;case 13:Js(function(){var i=er(t,1);if(i!==null){var r=en();ii(i,t,1,r)}}),My(t,1)}};ny=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=en();ii(e,t,134217728,n)}My(t,134217728)}};oT=function(t){if(t.tag===13){var e=Hr(t),n=er(t,e);if(n!==null){var i=en();ii(n,t,e,i)}My(t,e)}};aT=function(){return $e};lT=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};vm=function(t,e,n){switch(e){case"input":if(dm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Qd(i);if(!r)throw Error(Y(90));zx(i),dm(i,r)}}}break;case"textarea":Bx(t,n);break;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}};Zx=ky;Kx=Js;var Jb={usingClientEntryPoint:!1,Events:[Gu,ta,Qd,qx,Gx,ky]},Dl={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e2={bundleType:Dl.bundleType,version:Dl.version,rendererPackageName:Dl.rendererPackageName,rendererConfig:Dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Yx(t),t===null?null:t.stateNode},findFiberByHostInstance:Dl.findFiberByHostInstance||Xb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{qd=ah.inject(e2),yi=ah}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jb;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oy(e))throw Error(Y(200));return Qb(t,e,null,n)};Pn.createRoot=function(t,e){if(!Oy(t))throw Error(Y(299));var n=!1,i="",r=bE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ny(t,1,!1,null,null,n,!1,i,r),t[Ji]=e.current,xu(t.nodeType===8?t.parentNode:t),new Dy(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Yx(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return Js(t)};Pn.hydrate=function(t,e,n){if(!of(e))throw Error(Y(200));return af(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!Oy(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=bE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=kE(e,null,t,1,n??null,r,!1,o,a),t[Ji]=e.current,xu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new sf(e)};Pn.render=function(t,e,n){if(!of(e))throw Error(Y(200));return af(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!of(t))throw Error(Y(40));return t._reactRootContainer?(Js(function(){af(null,null,t,!1,function(){t._reactRootContainer=null,t[Ji]=null})}),!0):!1};Pn.unstable_batchedUpdates=ky;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!of(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return af(t,e,n,!1,i)};Pn.version="18.3.1-next-f1338f8080-20240426";function RE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RE)}catch(t){console.error(t)}}RE(),Rx.exports=Pn;var t2=Rx.exports,C0=t2;sm.createRoot=C0.createRoot,sm.hydrateRoot=C0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bu.apply(this,arguments)}var Dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dr||(Dr={}));const A0="popstate";function n2(t){t===void 0&&(t={});function e(i,r){let{pathname:o,search:a,hash:u}=i.location;return Ym("",{pathname:o,search:a,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:fd(r)}return r2(e,n,null,t)}function ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function i2(){return Math.random().toString(36).substr(2,8)}function k0(t,e){return{usr:t.state,key:t.key,idx:e}}function Ym(t,e,n,i){return n===void 0&&(n=null),bu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qa(e):e,{state:n,key:e&&e.key||i||i2()})}function fd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function qa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function r2(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Dr.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(bu({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Dr.Pop;let z=m(),C=z==null?null:z-f;f=z,h&&h({action:u,location:b.location,delta:C})}function v(z,C){u=Dr.Push;let E=Ym(b.location,z,C);f=m()+1;let I=k0(E,f),F=b.createHref(E);try{a.pushState(I,"",F)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;r.location.assign(F)}o&&h&&h({action:u,location:b.location,delta:1})}function T(z,C){u=Dr.Replace;let E=Ym(b.location,z,C);f=m();let I=k0(E,f),F=b.createHref(E);a.replaceState(I,"",F),o&&h&&h({action:u,location:b.location,delta:0})}function R(z){let C=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof z=="string"?z:fd(z);return E=E.replace(/ $/,"%20"),ut(C,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,C)}let b={get action(){return u},get location(){return t(r,a)},listen(z){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(A0,g),h=z,()=>{r.removeEventListener(A0,g),h=null}},createHref(z){return e(r,z)},createURL:R,encodeLocation(z){let C=R(z);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:T,go(z){return a.go(z)}};return b}var b0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(b0||(b0={}));function s2(t,e,n){return n===void 0&&(n="/"),o2(t,e,n)}function o2(t,e,n,i){let r=typeof e=="string"?qa(e):e,o=Na(r.pathname||"/",n);if(o==null)return null;let a=LE(t);a2(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=_2(o);u=g2(a[h],f)}return u}function LE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(ut(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=$r([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(ut(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),LE(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:p2(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of NE(o.path))r(o,a,h)}),e}function NE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=NE(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function a2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:m2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const l2=/^:[\w-]+$/,u2=3,c2=2,h2=1,d2=10,f2=-2,R0=t=>t==="*";function p2(t,e){let n=t.split("/"),i=n.length;return n.some(R0)&&(i+=f2),e&&(i+=c2),n.filter(r=>!R0(r)).reduce((r,o)=>r+(l2.test(o)?u2:o===""?h2:d2),i)}function m2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function g2(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=Jm({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),v=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:$r([o,g.pathname]),pathnameBase:E2($r([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=$r([o,g.pathnameBase]))}return a}function Jm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=y2(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:v,isOptional:T}=m;if(v==="*"){let b=u[g]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const R=u[g];return T&&!R?f[v]=void 0:f[v]=(R||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function y2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function _2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Na(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const v2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w2=t=>v2.test(t);function x2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?qa(t):t,o;if(n)if(w2(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Vy(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=L0(n.substring(1),"/"):o=L0(n,e)}else o=e;return{pathname:o,search:P2(i),hash:S2(r)}}function L0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Sp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function T2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ME(t,e){let n=T2(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function DE(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=qa(t):(r=bu({},t),ut(!r.pathname||!r.pathname.includes("?"),Sp("?","pathname","search",r)),ut(!r.pathname||!r.pathname.includes("#"),Sp("#","pathname","hash",r)),ut(!r.search||!r.search.includes("#"),Sp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}u=g>=0?e[g]:"/"}let h=x2(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const $r=t=>t.join("/").replace(/\/\/+/g,"/"),E2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),P2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,S2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function I2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OE=["post","put","patch","delete"];new Set(OE);const C2=["get",...OE];new Set(C2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ru.apply(this,arguments)}const lf=j.createContext(null),VE=j.createContext(null),fs=j.createContext(null),uf=j.createContext(null),ao=j.createContext({outlet:null,matches:[],isDataRoute:!1}),jE=j.createContext(null);function A2(t,e){let{relative:n}=e===void 0?{}:e;Ku()||ut(!1);let{basename:i,navigator:r}=j.useContext(fs),{hash:o,pathname:a,search:u}=cf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:$r([i,a])),r.createHref({pathname:h,search:u,hash:o})}function Ku(){return j.useContext(uf)!=null}function Ga(){return Ku()||ut(!1),j.useContext(uf).location}function zE(t){j.useContext(fs).static||j.useLayoutEffect(t)}function FE(){let{isDataRoute:t}=j.useContext(ao);return t?B2():k2()}function k2(){Ku()||ut(!1);let t=j.useContext(lf),{basename:e,future:n,navigator:i}=j.useContext(fs),{matches:r}=j.useContext(ao),{pathname:o}=Ga(),a=JSON.stringify(ME(r,n.v7_relativeSplatPath)),u=j.useRef(!1);return zE(()=>{u.current=!0}),j.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=DE(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:$r([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function cf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=j.useContext(fs),{matches:r}=j.useContext(ao),{pathname:o}=Ga(),a=JSON.stringify(ME(r,i.v7_relativeSplatPath));return j.useMemo(()=>DE(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function b2(t,e){return R2(t,e)}function R2(t,e,n,i){Ku()||ut(!1);let{navigator:r}=j.useContext(fs),{matches:o}=j.useContext(ao),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=Ga(),m;if(e){var g;let z=typeof e=="string"?qa(e):e;h==="/"||(g=z.pathname)!=null&&g.startsWith(h)||ut(!1),m=z}else m=f;let v=m.pathname||"/",T=v;if(h!=="/"){let z=h.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(z.length).join("/")}let R=s2(t,{pathname:T}),b=O2(R&&R.map(z=>Object.assign({},z,{params:Object.assign({},u,z.params),pathname:$r([h,r.encodeLocation?r.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?h:$r([h,r.encodeLocation?r.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,n,i);return e&&b?j.createElement(uf.Provider,{value:{location:Ru({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Dr.Pop}},b):b}function L2(){let t=F2(),e=I2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:r},n):null,null)}const N2=j.createElement(L2,null);class M2 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(ao.Provider,{value:this.props.routeContext},j.createElement(jE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D2(t){let{routeContext:e,match:n,children:i}=t,r=j.useContext(lf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(ao.Provider,{value:e},i)}function O2(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||ut(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:v,errors:T}=n,R=g.route.loader&&v[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||R){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let T,R=!1,b=null,z=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,b=g.route.errorElement||N2,h&&(f<0&&v===0?(U2("route-fallback"),R=!0,z=null):f===v&&(R=!0,z=g.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,v+1)),E=()=>{let I;return T?I=b:R?I=z:g.route.Component?I=j.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=m,j.createElement(D2,{match:g,routeContext:{outlet:m,matches:C,isDataRoute:n!=null},children:I})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?j.createElement(M2,{location:n.location,revalidation:n.revalidation,component:b,error:T,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):E()},null)}var BE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(BE||{}),UE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(UE||{});function V2(t){let e=j.useContext(lf);return e||ut(!1),e}function j2(t){let e=j.useContext(VE);return e||ut(!1),e}function z2(t){let e=j.useContext(ao);return e||ut(!1),e}function HE(t){let e=z2(),n=e.matches[e.matches.length-1];return n.route.id||ut(!1),n.route.id}function F2(){var t;let e=j.useContext(jE),n=j2(),i=HE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function B2(){let{router:t}=V2(BE.UseNavigateStable),e=HE(UE.UseNavigateStable),n=j.useRef(!1);return zE(()=>{n.current=!0}),j.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ru({fromRouteId:e},o)))},[t,e])}const N0={};function U2(t,e,n){N0[t]||(N0[t]=!0)}function H2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Wo(t){ut(!1)}function W2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Dr.Pop,navigator:o,static:a=!1,future:u}=t;Ku()&&ut(!1);let h=e.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:h,navigator:o,static:a,future:Ru({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=qa(i));let{pathname:m="/",search:g="",hash:v="",state:T=null,key:R="default"}=i,b=j.useMemo(()=>{let z=Na(m,h);return z==null?null:{location:{pathname:z,search:g,hash:v,state:T,key:R},navigationType:r}},[h,m,g,v,T,R,r]);return b==null?null:j.createElement(fs.Provider,{value:f},j.createElement(uf.Provider,{children:n,value:b}))}function $2(t){let{children:e,location:n}=t;return b2(eg(e),n)}new Promise(()=>{});function eg(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(i,r)=>{if(!j.isValidElement(i))return;let o=[...e,r];if(i.type===j.Fragment){n.push.apply(n,eg(i.props.children,o));return}i.type!==Wo&&ut(!1),!i.props.index||!i.props.children||ut(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=eg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pd.apply(this,arguments)}function WE(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function q2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function G2(t,e){return t.button===0&&(!e||e==="_self")&&!q2(t)}const Z2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],K2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Q2="6";try{window.__reactRouterVersion=Q2}catch{}const X2=j.createContext({isTransitioning:!1}),Y2="startTransition",M0=WA[Y2];function J2(t){let{basename:e,children:n,future:i,window:r}=t,o=j.useRef();o.current==null&&(o.current=n2({window:r,v5Compat:!0}));let a=o.current,[u,h]=j.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=j.useCallback(g=>{f&&M0?M0(()=>h(g)):h(g)},[h,f]);return j.useLayoutEffect(()=>a.listen(m),[a,m]),j.useEffect(()=>H2(i),[i]),j.createElement(W2,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const eR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nR=j.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,v=WE(e,Z2),{basename:T}=j.useContext(fs),R,b=!1;if(typeof f=="string"&&tR.test(f)&&(R=f,eR))try{let I=new URL(window.location.href),F=f.startsWith("//")?new URL(I.protocol+f):new URL(f),q=Na(F.pathname,T);F.origin===I.origin&&q!=null?f=q+F.search+F.hash:b=!0}catch{}let z=A2(f,{relative:r}),C=sR(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function E(I){i&&i(I),I.defaultPrevented||C(I)}return j.createElement("a",pd({},v,{href:R||z,onClick:b||o?i:E,ref:n,target:h}))}),iR=j.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=WE(e,K2),v=cf(h,{relative:g.relative}),T=Ga(),R=j.useContext(VE),{navigator:b,basename:z}=j.useContext(fs),C=R!=null&&oR(v)&&f===!0,E=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,I=T.pathname,F=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;r||(I=I.toLowerCase(),F=F?F.toLowerCase():null,E=E.toLowerCase()),F&&z&&(F=Na(F,z)||F);const q=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let Z=I===E||!a&&I.startsWith(E)&&I.charAt(q)==="/",N=F!=null&&(F===E||!a&&F.startsWith(E)&&F.charAt(E.length)==="/"),S={isActive:Z,isPending:N,isTransitioning:C},k=Z?i:void 0,M;typeof o=="function"?M=o(S):M=[o,Z?"active":null,N?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(S):u;return j.createElement(nR,pd({},g,{"aria-current":k,className:M,ref:n,style:O,to:h,viewTransition:f}),typeof m=="function"?m(S):m)});var tg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tg||(tg={}));var D0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(D0||(D0={}));function rR(t){let e=j.useContext(lf);return e||ut(!1),e}function sR(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=FE(),f=Ga(),m=cf(t,{relative:a});return j.useCallback(g=>{if(G2(g,n)){g.preventDefault();let v=i!==void 0?i:fd(f)===fd(m);h(t,{replace:v,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function oR(t,e){e===void 0&&(e={});let n=j.useContext(X2);n==null&&ut(!1);let{basename:i}=rR(tg.useViewTransitionState),r=cf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Na(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Na(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Jm(r.pathname,a)!=null||Jm(r.pathname,o)!=null}const $E=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),hf=j.createContext({}),df=j.createContext(null),ff=typeof document<"u",jy=ff?j.useLayoutEffect:j.useEffect,qE=j.createContext({strict:!1}),zy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),aR="framerAppearId",GE="data-"+zy(aR);function lR(t,e,n,i){const{visualElement:r}=j.useContext(hf),o=j.useContext(qE),a=j.useContext(df),u=j.useContext($E).reducedMotion,h=j.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;j.useInsertionEffect(()=>{f&&f.update(n,a)});const m=j.useRef(!!(n[GE]&&!window.HandoffComplete));return jy(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),j.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function la(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function uR(t,e,n){return j.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):la(n)&&(n.current=i))},[e])}function Lu(t){return typeof t=="string"||Array.isArray(t)}function pf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Fy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],By=["initial",...Fy];function mf(t){return pf(t.animate)||By.some(e=>Lu(t[e]))}function ZE(t){return!!(mf(t)||t.variants)}function cR(t,e){if(mf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Lu(n)?n:void 0,animate:Lu(i)?i:void 0}}return t.inherit!==!1?e:{}}function hR(t){const{initial:e,animate:n}=cR(t,j.useContext(hf));return j.useMemo(()=>({initial:e,animate:n}),[O0(e),O0(n)])}function O0(t){return Array.isArray(t)?t.join(" "):t}const V0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nu={};for(const t in V0)Nu[t]={isEnabled:e=>V0[t].some(n=>!!e[n])};function dR(t){for(const e in t)Nu[e]={...Nu[e],...t[e]}}const Uy=j.createContext({}),KE=j.createContext({}),fR=Symbol.for("motionComponentSymbol");function pR({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&dR(t);function o(u,h){let f;const m={...j.useContext($E),...u,layoutId:mR(u)},{isStatic:g}=m,v=hR(u),T=i(u,g);if(!g&&ff){v.visualElement=lR(r,T,m,e);const R=j.useContext(KE),b=j.useContext(qE).strict;v.visualElement&&(f=v.visualElement.loadFeatures(m,b,t,R))}return j.createElement(hf.Provider,{value:v},f&&v.visualElement?j.createElement(f,{visualElement:v.visualElement,...m}):null,n(r,u,uR(T,v.visualElement,h),T,g,v.visualElement))}const a=j.forwardRef(o);return a[fR]=r,a}function mR({layoutId:t}){const e=j.useContext(Uy).id;return e&&t!==void 0?e+"-"+t:t}function gR(t){function e(i,r={}){return pR(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const yR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hy(t){return typeof t!="string"||t.includes("-")?!1:!!(yR.indexOf(t)>-1||/[A-Z]/.test(t))}const md={};function _R(t){Object.assign(md,t)}const Qu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lo=new Set(Qu);function QE(t,{layout:e,layoutId:n}){return lo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!md[t]||t==="opacity")}const gn=t=>!!(t&&t.getVelocity),vR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wR=Qu.length;function xR(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<wR;a++){const u=Qu[a];if(t[u]!==void 0){const h=vR[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const XE=t=>e=>typeof e=="string"&&e.startsWith(t),YE=XE("--"),ng=XE("var(--"),TR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,ER=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ts=(t,e,n)=>Math.min(Math.max(n,t),e),uo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},nu={...uo,transform:t=>ts(0,1,t)},lh={...uo,default:1},iu=t=>Math.round(t*1e5)/1e5,gf=/(-)?([\d]*\.?[\d])+/g,JE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,PR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Xu(t){return typeof t=="string"}const Yu=t=>({test:e=>Xu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Er=Yu("deg"),vi=Yu("%"),pe=Yu("px"),SR=Yu("vh"),IR=Yu("vw"),j0={...vi,parse:t=>vi.parse(t)/100,transform:t=>vi.transform(t*100)},z0={...uo,transform:Math.round},eP={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,size:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,rotate:Er,rotateX:Er,rotateY:Er,rotateZ:Er,scale:lh,scaleX:lh,scaleY:lh,scaleZ:lh,skew:Er,skewX:Er,skewY:Er,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:nu,originX:j0,originY:j0,originZ:pe,zIndex:z0,fillOpacity:nu,strokeOpacity:nu,numOctaves:z0};function Wy(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const v=e[g];if(YE(g)){o[g]=v;continue}const T=eP[g],R=ER(v,T);if(lo.has(g)){if(h=!0,a[g]=R,!m)continue;v!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=R):r[g]=R}if(e.transform||(h||i?r.transform=xR(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:v="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${v} ${T}`}}const $y=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tP(t,e,n){for(const i in e)!gn(e[i])&&!QE(i,n)&&(t[i]=e[i])}function CR({transformTemplate:t},e,n){return j.useMemo(()=>{const i=$y();return Wy(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function AR(t,e,n){const i=t.style||{},r={};return tP(r,i,t),Object.assign(r,CR(t,e,n)),t.transformValues?t.transformValues(r):r}function kR(t,e,n){const i={},r=AR(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const bR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||bR.has(t)}let nP=t=>!gd(t);function RR(t){t&&(nP=e=>e.startsWith("on")?!gd(e):t(e))}try{RR(require("@emotion/is-prop-valid").default)}catch{}function LR(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(nP(r)||n===!0&&gd(r)||!e&&!gd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function F0(t,e,n){return typeof t=="string"?t:pe.transform(e+n*t)}function NR(t,e,n){const i=F0(e,t.x,t.width),r=F0(n,t.y,t.height);return`${i} ${r}`}const MR={offset:"stroke-dashoffset",array:"stroke-dasharray"},DR={offset:"strokeDashoffset",array:"strokeDasharray"};function OR(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?MR:DR;t[o.offset]=pe.transform(-i);const a=pe.transform(e),u=pe.transform(n);t[o.array]=`${a} ${u}`}function qy(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,v){if(Wy(t,f,m,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:R,dimensions:b}=t;T.transform&&(b&&(R.transform=T.transform),delete T.transform),b&&(r!==void 0||o!==void 0||R.transform)&&(R.transformOrigin=NR(b,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&OR(T,a,u,h,!1)}const iP=()=>({...$y(),attrs:{}}),Gy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function VR(t,e,n,i){const r=j.useMemo(()=>{const o=iP();return qy(o,e,{enableHardwareAcceleration:!1},Gy(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};tP(o,t.style,t),r.style={...o,...r.style}}return r}function jR(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Hy(n)?VR:kR)(i,o,a,n),m={...LR(i,typeof n=="string",t),...h,ref:r},{children:g}=i,v=j.useMemo(()=>gn(g)?g.get():g,[g]);return j.createElement(n,{...m,children:v})}}function rP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const sP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oP(t,e,n,i){rP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(sP.has(r)?r:zy(r),e.attrs[r])}function Zy(t,e){const{style:n}=t,i={};for(const r in n)(gn(n[r])||e.style&&gn(e.style[r])||QE(r,t))&&(i[r]=n[r]);return i}function aP(t,e){const n=Zy(t,e);for(const i in t)if(gn(t[i])||gn(e[i])){const r=Qu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function Ky(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function lP(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const yd=t=>Array.isArray(t),zR=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),FR=t=>yd(t)?t[t.length-1]||0:t;function Rh(t){const e=gn(t)?t.get():t;return zR(e)?e.toValue():e}function BR({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:UR(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const uP=t=>(e,n)=>{const i=j.useContext(hf),r=j.useContext(df),o=()=>BR(t,e,i,r);return n?o():lP(o)};function UR(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=Rh(o[v]);let{initial:a,animate:u}=t;const h=mf(t),f=ZE(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!pf(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const R=Ky(t,T);if(!R)return;const{transitionEnd:b,transition:z,...C}=R;for(const E in C){let I=C[E];if(Array.isArray(I)){const F=m?I.length-1:0;I=I[F]}I!==null&&(r[E]=I)}for(const E in b)r[E]=b[E]}),r}const ft=t=>t;class B0{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function HR(t){let e=new B0,n=new B0,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,v=g?e:n;return f&&a.add(h),v.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const uh=["prepare","read","update","preRender","render","postRender"],WR=40;function $R(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=uh.reduce((g,v)=>(g[v]=HR(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,WR),1),r.timestamp=g,r.isProcessing=!0,uh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:uh.reduce((g,v)=>{const T=o[v];return g[v]=(R,b=!1,z=!1)=>(n||h(),T.schedule(R,b,z)),g},{}),cancel:g=>uh.forEach(v=>o[v].cancel(g)),state:r,steps:o}}const{schedule:Ke,cancel:nr,state:Ut,steps:Ip}=$R(typeof requestAnimationFrame<"u"?requestAnimationFrame:ft,!0),qR={useVisualState:uP({scrapeMotionValuesFromProps:aP,createRenderState:iP,onMount:(t,e,{renderState:n,latestValues:i})=>{Ke.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ke.render(()=>{qy(n,i,{enableHardwareAcceleration:!1},Gy(e.tagName),t.transformTemplate),oP(e,n)})}})},GR={useVisualState:uP({scrapeMotionValuesFromProps:Zy,createRenderState:$y})};function ZR(t,{forwardMotionProps:e=!1},n,i){return{...Hy(t)?qR:GR,preloadedFeatures:n,useRender:jR(e),createVisualElement:i,Component:t}}function $i(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const cP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function yf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const KR=t=>e=>cP(e)&&t(e,yf(e));function Ki(t,e,n,i){return $i(t,e,KR(n),i)}const QR=(t,e)=>n=>e(t(n)),qr=(...t)=>t.reduce(QR);function hP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const U0=hP("dragHorizontal"),H0=hP("dragVertical");function dP(t){let e=!1;if(t==="y")e=H0();else if(t==="x")e=U0();else{const n=U0(),i=H0();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function fP(){const t=dP(!0);return t?(t(),!1):!0}class ps{constructor(e){this.isMounted=!1,this.node=e}update(){}}function W0(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||fP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&Ke.update(()=>u[i](o,a))};return Ki(t.current,n,r,{passive:!t.getProps()[i]})}class XR extends ps{mount(){this.unmount=qr(W0(this.node,!0),W0(this.node,!1))}unmount(){}}class YR extends ps{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qr($i(this.node.current,"focus",()=>this.onFocus()),$i(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const pP=(t,e)=>e?t===e?!0:pP(t,e.parentElement):!1;function Cp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,yf(n))}class JR extends ps{constructor(){super(...arguments),this.removeStartListeners=ft,this.removeEndListeners=ft,this.removeAccessibleListeners=ft,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=Ki(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Ke.update(()=>{!g&&!pP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=Ki(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=qr(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Cp("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&Ke.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=$i(this.node.current,"keyup",a),Cp("down",(u,h)=>{this.startPress(u,h)})},n=$i(this.node.current,"keydown",e),i=()=>{this.isPressing&&Cp("cancel",(o,a)=>this.cancelPress(o,a))},r=$i(this.node.current,"blur",i);this.removeAccessibleListeners=qr(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Ke.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!fP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Ke.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Ki(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=$i(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=qr(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ig=new WeakMap,Ap=new WeakMap,eL=t=>{const e=ig.get(t.target);e&&e(t)},tL=t=>{t.forEach(eL)};function nL({root:t,...e}){const n=t||document;Ap.has(n)||Ap.set(n,{});const i=Ap.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(tL,{root:t,...e})),i[r]}function iL(t,e,n){const i=nL(e);return ig.set(t,n),i.observe(t),()=>{ig.delete(t),i.unobserve(t)}}const rL={some:0,all:1};class sL extends ps{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:rL[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=f?m:g;v&&v(h)};return iL(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(oL(e,n))&&this.startObserver()}unmount(){}}function oL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const aL={inView:{Feature:sL},tap:{Feature:JR},focus:{Feature:YR},hover:{Feature:XR}};function mP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function lL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function uL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function _f(t,e,n){const i=t.getProps();return Ky(i,e,n!==void 0?n:i.custom,lL(t),uL(t))}let Qy=ft;const $s=t=>t*1e3,Qi=t=>t/1e3,cL={current:!1},gP=t=>Array.isArray(t)&&typeof t[0]=="number";function yP(t){return!!(!t||typeof t=="string"&&_P[t]||gP(t)||Array.isArray(t)&&t.every(yP))}const Ul=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,_P={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ul([0,.65,.55,1]),circOut:Ul([.55,0,1,.45]),backIn:Ul([.31,.01,.66,-.59]),backOut:Ul([.33,1.53,.69,.99])};function vP(t){if(t)return gP(t)?Ul(t):Array.isArray(t)?t.map(vP):_P[t]}function hL(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=vP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function dL(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const wP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,fL=1e-7,pL=12;function mL(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=wP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>fL&&++u<pL);return a}function Ju(t,e,n,i){if(t===e&&n===i)return ft;const r=o=>mL(o,0,1,t,n);return o=>o===0||o===1?o:wP(r(o),e,i)}const gL=Ju(.42,0,1,1),yL=Ju(0,0,.58,1),xP=Ju(.42,0,.58,1),_L=t=>Array.isArray(t)&&typeof t[0]!="number",TP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,EP=t=>e=>1-t(1-e),Xy=t=>1-Math.sin(Math.acos(t)),PP=EP(Xy),vL=TP(Xy),SP=Ju(.33,1.53,.69,.99),Yy=EP(SP),wL=TP(Yy),xL=t=>(t*=2)<1?.5*Yy(t):.5*(2-Math.pow(2,-10*(t-1))),TL={linear:ft,easeIn:gL,easeInOut:xP,easeOut:yL,circIn:Xy,circInOut:vL,circOut:PP,backIn:Yy,backInOut:wL,backOut:SP,anticipate:xL},$0=t=>{if(Array.isArray(t)){Qy(t.length===4);const[e,n,i,r]=t;return Ju(e,n,i,r)}else if(typeof t=="string")return TL[t];return t},Jy=(t,e)=>n=>!!(Xu(n)&&PR.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),IP=(t,e,n)=>i=>{if(!Xu(i))return i;const[r,o,a,u]=i.match(gf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},EL=t=>ts(0,255,t),kp={...uo,transform:t=>Math.round(EL(t))},Bs={test:Jy("rgb","red"),parse:IP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+kp.transform(t)+", "+kp.transform(e)+", "+kp.transform(n)+", "+iu(nu.transform(i))+")"};function PL(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const rg={test:Jy("#"),parse:PL,transform:Bs.transform},ua={test:Jy("hsl","hue"),parse:IP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+vi.transform(iu(e))+", "+vi.transform(iu(n))+", "+iu(nu.transform(i))+")"},Yt={test:t=>Bs.test(t)||rg.test(t)||ua.test(t),parse:t=>Bs.test(t)?Bs.parse(t):ua.test(t)?ua.parse(t):rg.parse(t),transform:t=>Xu(t)?t:t.hasOwnProperty("red")?Bs.transform(t):ua.transform(t)},it=(t,e,n)=>-n*t+n*e+t;function bp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function SL({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=bp(h,u,t+1/3),o=bp(h,u,t),a=bp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Rp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},IL=[rg,Bs,ua],CL=t=>IL.find(e=>e.test(t));function q0(t){const e=CL(t);let n=e.parse(t);return e===ua&&(n=SL(n)),n}const CP=(t,e)=>{const n=q0(t),i=q0(e),r={...n};return o=>(r.red=Rp(n.red,i.red,o),r.green=Rp(n.green,i.green,o),r.blue=Rp(n.blue,i.blue,o),r.alpha=it(n.alpha,i.alpha,o),Bs.transform(r))};function AL(t){var e,n;return isNaN(t)&&Xu(t)&&(((e=t.match(gf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(JE))===null||n===void 0?void 0:n.length)||0)>0}const AP={regex:TR,countKey:"Vars",token:"${v}",parse:ft},kP={regex:JE,countKey:"Colors",token:"${c}",parse:Yt.parse},bP={regex:gf,countKey:"Numbers",token:"${n}",parse:uo.parse};function Lp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function _d(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Lp(n,AP),Lp(n,kP),Lp(n,bP),n}function RP(t){return _d(t).values}function LP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=_d(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(AP.token,a[h]):h<i+n?u=u.replace(kP.token,Yt.transform(a[h])):u=u.replace(bP.token,iu(a[h]));return u}}const kL=t=>typeof t=="number"?0:t;function bL(t){const e=RP(t);return LP(t)(e.map(kL))}const ns={test:AL,parse:RP,createTransformer:LP,getAnimatableNone:bL},NP=(t,e)=>n=>`${n>0?e:t}`;function MP(t,e){return typeof t=="number"?n=>it(t,e,n):Yt.test(t)?CP(t,e):t.startsWith("var(")?NP(t,e):OP(t,e)}const DP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>MP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},RL=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=MP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},OP=(t,e)=>{const n=ns.createTransformer(e),i=_d(t),r=_d(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?qr(DP(i.values,r.values),n):NP(t,e)},Mu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},G0=(t,e)=>n=>it(t,e,n);function LL(t){return typeof t=="number"?G0:typeof t=="string"?Yt.test(t)?CP:OP:Array.isArray(t)?DP:typeof t=="object"?RL:G0}function NL(t,e,n){const i=[],r=n||LL(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||ft:e;u=qr(h,u)}i.push(u)}return i}function VP(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(Qy(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=NL(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Mu(t[m],t[m+1],f);return a[m](g)};return n?f=>h(ts(t[0],t[o-1],f)):h}function ML(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Mu(0,e,i);t.push(it(n,1,r))}}function DL(t){const e=[0];return ML(e,t.length-1),e}function OL(t,e){return t.map(n=>n*e)}function VL(t,e){return t.map(()=>e||xP).splice(0,t.length-1)}function vd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=_L(i)?i.map($0):$0(i),o={done:!1,value:e[0]},a=OL(n&&n.length===e.length?n:DL(e),t),u=VP(a,e,{ease:Array.isArray(r)?r:VL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function jP(t,e){return e?t*(1e3/e):0}const jL=5;function zP(t,e,n){const i=Math.max(e-jL,0);return jP(n-t(i),e-i)}const Np=.001,zL=.01,FL=10,BL=.05,UL=1;function HL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=ts(BL,UL,a),t=ts(zL,FL,Qi(t)),a<1?(r=f=>{const m=f*a,g=m*t,v=m-n,T=sg(f,a),R=Math.exp(-g);return Np-v/T*R},o=f=>{const g=f*a*t,v=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,R=Math.exp(-g),b=sg(Math.pow(f,2),a);return(-r(f)+Np>0?-1:1)*((v-T)*R)/b}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Np+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=$L(r,o,u);if(t=$s(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const WL=12;function $L(t,e,n){let i=n;for(let r=1;r<WL;r++)i=i-t(i)/e(i);return i}function sg(t,e){return t*Math.sqrt(1-e*e)}const qL=["duration","bounce"],GL=["stiffness","damping","mass"];function Z0(t,e){return e.some(n=>t[n]!==void 0)}function ZL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Z0(t,GL)&&Z0(t,qL)){const n=HL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function FP({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:v}=ZL({...i,velocity:-Qi(i.velocity||0)}),T=g||0,R=h/(2*Math.sqrt(u*f)),b=o-r,z=Qi(Math.sqrt(u/f)),C=Math.abs(b)<5;n||(n=C?.01:2),e||(e=C?.005:.5);let E;if(R<1){const I=sg(z,R);E=F=>{const q=Math.exp(-R*z*F);return o-q*((T+R*z*b)/I*Math.sin(I*F)+b*Math.cos(I*F))}}else if(R===1)E=I=>o-Math.exp(-z*I)*(b+(T+z*b)*I);else{const I=z*Math.sqrt(R*R-1);E=F=>{const q=Math.exp(-R*z*F),Z=Math.min(I*F,300);return o-q*((T+R*z*b)*Math.sinh(Z)+I*b*Math.cosh(Z))/I}}return{calculatedDuration:v&&m||null,next:I=>{const F=E(I);if(v)a.done=I>=m;else{let q=T;I!==0&&(R<1?q=zP(E,I,F):q=0);const Z=Math.abs(q)<=n,N=Math.abs(o-F)<=e;a.done=Z&&N}return a.value=a.done?o:F,a}}}function K0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],v={done:!1,value:g},T=S=>u!==void 0&&S<u||h!==void 0&&S>h,R=S=>u===void 0?h:h===void 0||Math.abs(u-S)<Math.abs(h-S)?u:h;let b=n*e;const z=g+b,C=a===void 0?z:a(z);C!==z&&(b=C-g);const E=S=>-b*Math.exp(-S/i),I=S=>C+E(S),F=S=>{const k=E(S),M=I(S);v.done=Math.abs(k)<=f,v.value=v.done?C:M};let q,Z;const N=S=>{T(v.value)&&(q=S,Z=FP({keyframes:[v.value,R(v.value)],velocity:zP(I,S,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return N(0),{calculatedDuration:null,next:S=>{let k=!1;return!Z&&q===void 0&&(k=!0,F(S),N(S)),q!==void 0&&S>q?Z.next(S-q):(!k&&F(S),v)}}}const KL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ke.update(e,!0),stop:()=>nr(e),now:()=>Ut.isProcessing?Ut.timestamp:performance.now()}},Q0=2e4;function X0(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Q0;)e+=n,i=t.next(e);return e>=Q0?1/0:e}const QL={decay:K0,inertia:K0,tween:vd,keyframes:vd,spring:FP};function wd({autoplay:t=!0,delay:e=0,driver:n=KL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,...v}){let T=1,R=!1,b,z;const C=()=>{z=new Promise(te=>{b=te})};C();let E;const I=QL[r]||vd;let F;I!==vd&&typeof i[0]!="number"&&(F=VP([0,100],i,{clamp:!1}),i=[0,100]);const q=I({...v,keyframes:i});let Z;u==="mirror"&&(Z=I({...v,keyframes:[...i].reverse(),velocity:-(v.velocity||0)}));let N="idle",S=null,k=null,M=null;q.calculatedDuration===null&&o&&(q.calculatedDuration=X0(q));const{calculatedDuration:O}=q;let B=1/0,D=1/0;O!==null&&(B=O+a,D=B*(o+1)-a);let ae=0;const Oe=te=>{if(k===null)return;T>0&&(k=Math.min(k,te)),T<0&&(k=Math.min(te-D/T,k)),S!==null?ae=S:ae=Math.round(te-k)*T;const ve=ae-e*(T>=0?1:-1),He=T>=0?ve<0:ve>D;ae=Math.max(ve,0),N==="finished"&&S===null&&(ae=D);let Pe=ae,Ee=q;if(o){const rn=Math.min(ae,D)/B;let sn=Math.floor(rn),Zt=rn%1;!Zt&&rn>=1&&(Zt=1),Zt===1&&sn--,sn=Math.min(sn,o+1),!!(sn%2)&&(u==="reverse"?(Zt=1-Zt,a&&(Zt-=a/B)):u==="mirror"&&(Ee=Z)),Pe=ts(0,1,Zt)*B}const ne=He?{done:!1,value:i[0]}:Ee.next(Pe);F&&(ne.value=F(ne.value));let{done:Le}=ne;!He&&O!==null&&(Le=T>=0?ae>=D:ae<=0);const qe=S===null&&(N==="finished"||N==="running"&&Le);return g&&g(ne.value),qe&&G(),ne},Te=()=>{E&&E.stop(),E=void 0},Re=()=>{N="idle",Te(),b(),C(),k=M=null},G=()=>{N="finished",m&&m(),Te(),b()},ce=()=>{if(R)return;E||(E=n(Oe));const te=E.now();h&&h(),S!==null?k=te-S:(!k||N==="finished")&&(k=te),N==="finished"&&C(),M=k,S=null,N="running",E.start()};t&&ce();const J={then(te,ve){return z.then(te,ve)},get time(){return Qi(ae)},set time(te){te=$s(te),ae=te,S!==null||!E||T===0?S=te:k=E.now()-te/T},get duration(){const te=q.calculatedDuration===null?X0(q):q.calculatedDuration;return Qi(te)},get speed(){return T},set speed(te){te===T||!E||(T=te,J.time=Qi(ae))},get state(){return N},play:ce,pause:()=>{N="paused",S=ae},stop:()=>{R=!0,N!=="idle"&&(N="idle",f&&f(),Re())},cancel:()=>{M!==null&&Oe(M),Re()},complete:()=>{N="finished"},sample:te=>(k=0,Oe(te))};return J}function XL(t){let e;return()=>(e===void 0&&(e=t()),e)}const YL=XL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),JL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ch=10,eN=2e4,tN=(t,e)=>e.type==="spring"||t==="backgroundColor"||!yP(e.ease);function nN(t,e,{onUpdate:n,onComplete:i,...r}){if(!(YL()&&JL.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(I=>{u=I})};m();let{keyframes:g,duration:v=300,ease:T,times:R}=r;if(tN(e,r)){const I=wd({...r,repeat:0,delay:0});let F={done:!1,value:g[0]};const q=[];let Z=0;for(;!F.done&&Z<eN;)F=I.sample(Z),q.push(F.value),Z+=ch;R=void 0,g=q,v=Z-ch,T="linear"}const b=hL(t.owner.current,e,g,{...r,duration:v,ease:T,times:R}),z=()=>{f=!1,b.cancel()},C=()=>{f=!0,Ke.update(z),u(),m()};return b.onfinish=()=>{f||(t.set(dL(g,r)),i&&i(),C())},{then(I,F){return h.then(I,F)},attachTimeline(I){return b.timeline=I,b.onfinish=null,ft},get time(){return Qi(b.currentTime||0)},set time(I){b.currentTime=$s(I)},get speed(){return b.playbackRate},set speed(I){b.playbackRate=I},get duration(){return Qi(v)},play:()=>{a||(b.play(),nr(z))},pause:()=>b.pause(),stop:()=>{if(a=!0,b.playState==="idle")return;const{currentTime:I}=b;if(I){const F=wd({...r,autoplay:!1});t.setWithVelocity(F.sample(I-ch).value,F.sample(I).value,ch)}C()},complete:()=>{f||b.finish()},cancel:C}}function iN({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:ft,pause:ft,stop:ft,then:o=>(o(),Promise.resolve()),cancel:ft,complete:ft});return e?wd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const rN={type:"spring",stiffness:500,damping:25,restSpeed:10},sN=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),oN={type:"keyframes",duration:.8},aN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lN=(t,{keyframes:e})=>e.length>2?oN:lo.has(t)?t.startsWith("scale")?sN(e[1]):rN:aN,og=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ns.test(e)||e==="0")&&!e.startsWith("url(")),uN=new Set(["brightness","contrast","saturate","opacity"]);function cN(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(gf)||[];if(!i)return t;const r=n.replace(i,"");let o=uN.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const hN=/([a-z-]*)\(.*?\)/g,ag={...ns,getAnimatableNone:t=>{const e=t.match(hN);return e?e.map(cN).join(" "):t}},dN={...eP,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:ag,WebkitFilter:ag},e_=t=>dN[t];function BP(t,e){let n=e_(t);return n!==ag&&(n=ns),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const UP=t=>/^0[^.\s]+$/.test(t);function fN(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||UP(t)}function pN(t,e,n,i){const r=og(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),fN(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=BP(e,u)}return o}function mN({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function t_(t,e){return t[e]||t.default||t}const gN={skipAnimations:!1},n_=(t,e,n,i={})=>r=>{const o=t_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-$s(a);const h=pN(e,t,n,o),f=h[0],m=h[h.length-1],g=og(t,f),v=og(t,m);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:R=>{e.set(R),o.onUpdate&&o.onUpdate(R)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(mN(o)||(T={...T,...lN(t,T)}),T.duration&&(T.duration=$s(T.duration)),T.repeatDelay&&(T.repeatDelay=$s(T.repeatDelay)),!g||!v||cL.current||o.type===!1||gN.skipAnimations)return iN(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const R=nN(e,t,T);if(R)return R}return wd(T)};function xd(t){return!!(gn(t)&&t.add)}const HP=t=>/^\-?\d*\.?\d+$/.test(t);function i_(t,e){t.indexOf(e)===-1&&t.push(e)}function r_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class s_{constructor(){this.subscriptions=[]}add(e){return i_(this.subscriptions,e),()=>r_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yN=t=>!isNaN(parseFloat(t));class _N{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Ut;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Ke.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ke.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=yN(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new s_);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ke.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?jP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ma(t,e){return new _N(t,e)}const WP=t=>e=>e.test(t),vN={test:t=>t==="auto",parse:t=>t},$P=[uo,pe,vi,Er,IR,SR,vN],Ol=t=>$P.find(WP(t)),wN=[...$P,Yt,ns],xN=t=>wN.find(WP(t));function TN(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ma(n))}function EN(t,e){const n=_f(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=FR(o[a]);TN(t,a,u)}}function PN(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(HP(m)||UP(m))?m=parseFloat(m):!xN(m)&&ns.test(f)&&(m=BP(h,f)),t.addValue(h,Ma(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function SN(t,e){return e?(e[t]||e.default||e).from:void 0}function IN(t,e,n){const i={};for(const r in t){const o=SN(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function CN({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function AN(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function qP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const v=t.getValue(g),T=u[g];if(!v||T===void 0||m&&CN(m,g))continue;const R={delay:n,elapsed:0,...t_(o||{},g)};if(window.HandoffAppearAnimations){const C=t.getProps()[GE];if(C){const E=window.HandoffAppearAnimations(C,g,v,Ke);E!==null&&(R.elapsed=E,R.isHandoff=!0)}}let b=!R.isHandoff&&!AN(v,T);if(R.type==="spring"&&(v.getVelocity()||R.velocity)&&(b=!1),v.animation&&(b=!1),b)continue;v.start(n_(g,v,T,t.shouldReduceMotion&&lo.has(g)?{type:!1}:R));const z=v.animation;xd(h)&&(h.add(g),z.then(()=>h.remove(g))),f.push(z)}return a&&Promise.all(f).then(()=>{a&&EN(t,a)}),f}function lg(t,e,n={}){const i=_f(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(qP(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return kN(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function kN(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(bN).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(lg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function bN(t,e){return t.sortNodePosition(e)}function RN(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>lg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=lg(t,e,n);else{const r=typeof e=="function"?_f(t,e,n.custom):e;i=Promise.all(qP(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const LN=[...Fy].reverse(),NN=Fy.length;function MN(t){return e=>Promise.all(e.map(({animation:n,options:i})=>RN(t,n,i)))}function DN(t){let e=MN(t);const n=VN();let i=!0;const r=(h,f)=>{const m=_f(t,f);if(m){const{transition:g,transitionEnd:v,...T}=m;h={...h,...T,...v}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},v=[],T=new Set;let R={},b=1/0;for(let C=0;C<NN;C++){const E=LN[C],I=n[E],F=m[E]!==void 0?m[E]:g[E],q=Lu(F),Z=E===f?I.isActive:null;Z===!1&&(b=C);let N=F===g[E]&&F!==m[E]&&q;if(N&&i&&t.manuallyAnimateOnMount&&(N=!1),I.protectedKeys={...R},!I.isActive&&Z===null||!F&&!I.prevProp||pf(F)||typeof F=="boolean")continue;let k=ON(I.prevProp,F)||E===f&&I.isActive&&!N&&q||C>b&&q,M=!1;const O=Array.isArray(F)?F:[F];let B=O.reduce(r,{});Z===!1&&(B={});const{prevResolvedValues:D={}}=I,ae={...D,...B},Oe=Te=>{k=!0,T.has(Te)&&(M=!0,T.delete(Te)),I.needsAnimating[Te]=!0};for(const Te in ae){const Re=B[Te],G=D[Te];if(R.hasOwnProperty(Te))continue;let ce=!1;yd(Re)&&yd(G)?ce=!mP(Re,G):ce=Re!==G,ce?Re!==void 0?Oe(Te):T.add(Te):Re!==void 0&&T.has(Te)?Oe(Te):I.protectedKeys[Te]=!0}I.prevProp=F,I.prevResolvedValues=B,I.isActive&&(R={...R,...B}),i&&t.blockInitialAnimation&&(k=!1),k&&(!N||M)&&v.push(...O.map(Te=>({animation:Te,options:{type:E,...h}})))}if(T.size){const C={};T.forEach(E=>{const I=t.getBaseTarget(E);I!==void 0&&(C[E]=I)}),v.push({animation:C})}let z=!!v.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(z=!1),i=!1,z?e(v):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var R;return(R=T.animationState)===null||R===void 0?void 0:R.setActive(h,f)}),n[h].isActive=f;const v=a(m,h);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function ON(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!mP(e,t):!1}function Rs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VN(){return{animate:Rs(!0),whileInView:Rs(),whileHover:Rs(),whileTap:Rs(),whileDrag:Rs(),whileFocus:Rs(),exit:Rs()}}class jN extends ps{constructor(e){super(e),e.animationState||(e.animationState=DN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),pf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let zN=0;class FN extends ps{constructor(){super(...arguments),this.id=zN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const BN={animation:{Feature:jN},exit:{Feature:FN}},Y0=(t,e)=>Math.abs(t-e);function UN(t,e){const n=Y0(t.x,e.x),i=Y0(t.y,e.y);return Math.sqrt(n**2+i**2)}class GP{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Dp(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=UN(g.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:R}=g,{timestamp:b}=Ut;this.history.push({...R,timestamp:b});const{onStart:z,onMove:C}=this.handlers;v||(z&&z(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Mp(v,this.transformPagePoint),Ke.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:T,onSessionEnd:R,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=Dp(g.type==="pointercancel"?this.lastMoveEventInfo:Mp(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,z),R&&R(g,z)},!cP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=yf(e),u=Mp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Ut;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,Dp(u,this.history)),this.removeListeners=qr(Ki(this.contextWindow,"pointermove",this.handlePointerMove),Ki(this.contextWindow,"pointerup",this.handlePointerUp),Ki(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),nr(this.updatePoint)}}function Mp(t,e){return e?{point:e(t.point)}:t}function J0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Dp({point:t},e){return{point:t,delta:J0(t,ZP(e)),offset:J0(t,HN(e)),velocity:WN(e,.1)}}function HN(t){return t[0]}function ZP(t){return t[t.length-1]}function WN(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=ZP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>$s(e)));)n--;if(!i)return{x:0,y:0};const o=Qi(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function En(t){return t.max-t.min}function ug(t,e=0,n=.01){return Math.abs(t-e)<=n}function ew(t,e,n,i=.5){t.origin=i,t.originPoint=it(e.min,e.max,t.origin),t.scale=En(n)/En(e),(ug(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=it(n.min,n.max,t.origin)-t.originPoint,(ug(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ru(t,e,n,i){ew(t.x,e.x,n.x,i?i.originX:void 0),ew(t.y,e.y,n.y,i?i.originY:void 0)}function tw(t,e,n){t.min=n.min+e.min,t.max=t.min+En(e)}function $N(t,e,n){tw(t.x,e.x,n.x),tw(t.y,e.y,n.y)}function nw(t,e,n){t.min=e.min-n.min,t.max=t.min+En(e)}function su(t,e,n){nw(t.x,e.x,n.x),nw(t.y,e.y,n.y)}function qN(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?it(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?it(n,t,i.max):Math.min(t,n)),t}function iw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function GN(t,{top:e,left:n,bottom:i,right:r}){return{x:iw(t.x,n,r),y:iw(t.y,e,i)}}function rw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function ZN(t,e){return{x:rw(t.x,e.x),y:rw(t.y,e.y)}}function KN(t,e){let n=.5;const i=En(t),r=En(e);return r>i?n=Mu(e.min,e.max-i,t.min):i>r&&(n=Mu(t.min,t.max-r,e.min)),ts(0,1,n)}function QN(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const cg=.35;function XN(t=cg){return t===!1?t=0:t===!0&&(t=cg),{x:sw(t,"left","right"),y:sw(t,"top","bottom")}}function sw(t,e,n){return{min:ow(t,e),max:ow(t,n)}}function ow(t,e){return typeof t=="number"?t:t[e]||0}const aw=()=>({translate:0,scale:1,origin:0,originPoint:0}),ca=()=>({x:aw(),y:aw()}),lw=()=>({min:0,max:0}),yt=()=>({x:lw(),y:lw()});function Mn(t){return[t("x"),t("y")]}function KP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function YN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function JN(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Op(t){return t===void 0||t===1}function hg({scale:t,scaleX:e,scaleY:n}){return!Op(t)||!Op(e)||!Op(n)}function Ms(t){return hg(t)||QP(t)||t.z||t.rotate||t.rotateX||t.rotateY}function QP(t){return uw(t.x)||uw(t.y)}function uw(t){return t&&t!=="0%"}function Td(t,e,n){const i=t-n,r=e*i;return n+r}function cw(t,e,n,i,r){return r!==void 0&&(t=Td(t,r,i)),Td(t,n,i)+e}function dg(t,e=0,n=1,i,r){t.min=cw(t.min,e,n,i,r),t.max=cw(t.max,e,n,i,r)}function XP(t,{x:e,y:n}){dg(t.x,e.translate,e.scale,e.originPoint),dg(t.y,n.translate,n.scale,n.originPoint)}function eM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ha(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,XP(t,a)),i&&Ms(o.latestValues)&&ha(t,o.latestValues))}e.x=hw(e.x),e.y=hw(e.y)}function hw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ir(t,e){t.min=t.min+e,t.max=t.max+e}function dw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=it(t.min,t.max,o);dg(t,e[n],e[i],a,e.scale)}const tM=["x","scaleX","originX"],nM=["y","scaleY","originY"];function ha(t,e){dw(t.x,e,tM),dw(t.y,e,nM)}function YP(t,e){return KP(JN(t.getBoundingClientRect(),e))}function iM(t,e,n){const i=YP(t,n),{scroll:r}=e;return r&&(Ir(i.x,r.offset.x),Ir(i.y,r.offset.y)),i}const JP=({current:t})=>t?t.ownerDocument.defaultView:null,rM=new WeakMap;class sM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yf(m,"page").point)},o=(m,g)=>{const{drag:v,dragPropagation:T,onDragStart:R}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=dP(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mn(z=>{let C=this.getAxisMotionValue(z).get()||0;if(vi.test(C)){const{projection:E}=this.visualElement;if(E&&E.layout){const I=E.layout.layoutBox[z];I&&(C=En(I)*(parseFloat(C)/100))}}this.originPoint[z]=C}),R&&Ke.update(()=>R(m,g),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:R,onDrag:b}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:z}=g;if(T&&this.currentDirection===null){this.currentDirection=oM(z),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",g.point,z),this.updateAxis("y",g.point,z),this.visualElement.render(),b&&b(m,g)},u=(m,g)=>this.stop(m,g),h=()=>Mn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new GP(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:JP(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Ke.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!hh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=qN(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&la(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=GN(r.layoutBox,n):this.constraints=!1,this.elastic=XN(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Mn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=QN(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!la(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=iM(i,r.root,this.visualElement.getTransformPagePoint());let a=ZN(r.layout.layoutBox,o);if(n){const u=n(YN(a));this.hasMutatedConstraints=!!u,u&&(a=KP(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Mn(m=>{if(!hh(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const v=r?200:1e6,T=r?40:1e7,R={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,R)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(n_(e,i,0,n))}stopAnimation(){Mn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Mn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Mn(n=>{const{drag:i}=this.getProps();if(!hh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-it(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!la(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Mn(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=KN({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Mn(a=>{if(!hh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(it(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;rM.set(this.visualElement,this);const e=this.visualElement.current,n=Ki(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();la(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=$i(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Mn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=cg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function hh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function oM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class aM extends ps{constructor(e){super(e),this.removeGroupControls=ft,this.removeListeners=ft,this.controls=new sM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ft}unmount(){this.removeGroupControls(),this.removeListeners()}}const fw=t=>(e,n)=>{t&&Ke.update(()=>t(e,n))};class lM extends ps{constructor(){super(...arguments),this.removePointerDownListener=ft}onPointerDown(e){this.session=new GP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:fw(e),onStart:fw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Ke.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=Ki(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function uM(){const t=j.useContext(df);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=j.useId();return j.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Lh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=pw(t,e.target.x),i=pw(t,e.target.y);return`${n}% ${i}%`}},cM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ns.parse(t);if(r.length>5)return i;const o=ns.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=it(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class hM extends Zs.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;_R(dM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Lh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Ke.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eS(t){const[e,n]=uM(),i=j.useContext(Uy);return Zs.createElement(hM,{...t,layoutGroup:i,switchLayoutGroup:j.useContext(KE),isPresent:e,safeToRemove:n})}const dM={borderRadius:{...Vl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vl,borderTopRightRadius:Vl,borderBottomLeftRadius:Vl,borderBottomRightRadius:Vl,boxShadow:cM},tS=["TopLeft","TopRight","BottomLeft","BottomRight"],fM=tS.length,mw=t=>typeof t=="string"?parseFloat(t):t,gw=t=>typeof t=="number"||pe.test(t);function pM(t,e,n,i,r,o){r?(t.opacity=it(0,n.opacity!==void 0?n.opacity:1,mM(i)),t.opacityExit=it(e.opacity!==void 0?e.opacity:1,0,gM(i))):o&&(t.opacity=it(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<fM;a++){const u=`border${tS[a]}Radius`;let h=yw(e,u),f=yw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||gw(h)===gw(f)?(t[u]=Math.max(it(mw(h),mw(f),i),0),(vi.test(f)||vi.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=it(e.rotate||0,n.rotate||0,i))}function yw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const mM=nS(0,.5,PP),gM=nS(.5,.95,ft);function nS(t,e,n){return i=>i<t?0:i>e?1:n(Mu(t,e,i))}function _w(t,e){t.min=e.min,t.max=e.max}function Nn(t,e){_w(t.x,e.x),_w(t.y,e.y)}function vw(t,e,n,i,r){return t-=e,t=Td(t,1/n,i),r!==void 0&&(t=Td(t,1/r,i)),t}function yM(t,e=0,n=1,i=.5,r,o=t,a=t){if(vi.test(e)&&(e=parseFloat(e),e=it(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=it(o.min,o.max,i);t===o&&(u-=e),t.min=vw(t.min,e,n,u,r),t.max=vw(t.max,e,n,u,r)}function ww(t,e,[n,i,r],o,a){yM(t,e[n],e[i],e[r],e.scale,o,a)}const _M=["x","scaleX","originX"],vM=["y","scaleY","originY"];function xw(t,e,n,i){ww(t.x,e,_M,n?n.x:void 0,i?i.x:void 0),ww(t.y,e,vM,n?n.y:void 0,i?i.y:void 0)}function Tw(t){return t.translate===0&&t.scale===1}function iS(t){return Tw(t.x)&&Tw(t.y)}function wM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function rS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Ew(t){return En(t.x)/En(t.y)}class xM{constructor(){this.members=[]}add(e){i_(this.members,e),e.scheduleRender()}remove(e){if(r_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const TM=(t,e)=>t.depth-e.depth;class EM{constructor(){this.children=[],this.isDirty=!1}add(e){i_(this.children,e),this.isDirty=!0}remove(e){r_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TM),this.isDirty=!1,this.children.forEach(e)}}function PM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(nr(i),t(o-e))};return Ke.read(i,!0),()=>nr(i)}function SM(t){window.MotionDebug&&window.MotionDebug.record(t)}function IM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function CM(t,e,n){const i=gn(t)?t:Ma(t);return i.start(n_("",i,e,n)),i.animation}const Sw=["","X","Y","Z"],AM={visibility:"hidden"},Iw=1e3;let kM=0;const Ds={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function sS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=kM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ds.totalNodes=Ds.resolvedTargetDeltas=Ds.recalculatedProjection=0,this.nodes.forEach(LM),this.nodes.forEach(VM),this.nodes.forEach(jM),this.nodes.forEach(NM),SM(Ds)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new EM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new s_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=IM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=PM(v,250),Lh.hasAnimatedSinceResize&&(Lh.hasAnimatedSinceResize=!1,this.nodes.forEach(Aw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||HM,{onLayoutAnimationStart:z,onLayoutAnimationComplete:C}=m.getProps(),E=!this.targetLayout||!rS(this.targetLayout,R)||T,I=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||I||v&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,I);const F={...t_(b,"layout"),onPlay:z,onComplete:C};(m.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else v||Aw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zM),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Cw);return}this.isUpdating||this.nodes.forEach(DM),this.isUpdating=!1,this.nodes.forEach(OM),this.nodes.forEach(bM),this.nodes.forEach(RM),this.clearAllSnapshots();const u=performance.now();Ut.delta=ts(0,1e3/60,u-Ut.timestamp),Ut.timestamp=u,Ut.isProcessing=!0,Ip.update.process(Ut),Ip.preRender.process(Ut),Ip.render.process(Ut),Ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(MM),this.sharedNodes.forEach(FM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!iS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Ms(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),WM(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return yt();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Ir(u.x,h.offset.x),Ir(u.y,h.offset.y)),u}removeElementScroll(a){const u=yt();Nn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){Nn(u,a);const{scroll:v}=this.root;v&&(Ir(u.x,-v.offset.x),Ir(u.y,-v.offset.y))}Ir(u.x,m.offset.x),Ir(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=yt();Nn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ha(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Ms(m.latestValues)&&ha(h,m.latestValues)}return Ms(this.latestValues)&&ha(h,this.latestValues),h}removeTransform(a){const u=yt();Nn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Ms(f.latestValues))continue;hg(f.latestValues)&&f.updateSnapshot();const m=yt(),g=f.measurePageBox();Nn(m,g),xw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Ms(this.latestValues)&&xw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Ut.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),su(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$N(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nn(this.target,this.layout.layoutBox),XP(this.target,this.targetDelta)):Nn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),su(this.relativeTargetOrigin,this.target,T.target),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ds.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hg(this.parent.latestValues)||QP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Ut.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Nn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;eM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:R}=u;if(!R){this.projectionTransform&&(this.projectionDelta=ca(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ca(),this.projectionDeltaWithTransform=ca());const b=this.projectionTransform;ru(this.projectionDelta,this.layoutCorrected,R,this.latestValues),this.projectionTransform=Pw(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R)),Ds.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=ca();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=yt(),T=h?h.source:void 0,R=this.layout?this.layout.source:void 0,b=T!==R,z=this.getStack(),C=!z||z.members.length<=1,E=!!(b&&!C&&this.options.crossfade===!0&&!this.path.some(UM));this.animationProgress=0;let I;this.mixTargetDelta=F=>{const q=F/1e3;kw(g.x,a.x,q),kw(g.y,a.y,q),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(su(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BM(this.relativeTarget,this.relativeTargetOrigin,v,q),I&&wM(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=yt()),Nn(I,this.relativeTarget)),b&&(this.animationValues=m,pM(m,f,this.latestValues,q,E,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ke.update(()=>{Lh.hasAnimatedSinceResize=!0,this.currentAnimation=CM(0,Iw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Iw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&oS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||yt();const g=En(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const v=En(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}Nn(u,h),ha(u,m),ru(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new xM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<Sw.length;m++){const g="rotate"+Sw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return AM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Rh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Rh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ms(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=Pw(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:T,y:R}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${R.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in md){if(v[b]===void 0)continue;const{correct:z,applyTo:C}=md[b],E=f.transform==="none"?v[b]:z(v[b],g);if(C){const I=C.length;for(let F=0;F<I;F++)f[C[F]]=E}else f[b]=E}return this.options.layoutId&&(f.pointerEvents=g===this?Rh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Cw),this.root.sharedNodes.clear()}}}function bM(t){t.updateLayout()}function RM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Mn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=En(v);v.min=i[g].min,v.max=v.min+T}):oS(o,n.layoutBox,i)&&Mn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=En(i[g]);v.max=v.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=ca();ru(u,i,n.layoutBox);const h=ca();a?ru(h,t.applyTransform(r,!0),n.measuredBox):ru(h,i,n.layoutBox);const f=!iS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:T}=g;if(v&&T){const R=yt();su(R,n.layoutBox,v.layoutBox);const b=yt();su(b,i,T.layoutBox),rS(R,b)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=R,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function LM(t){Ds.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function NM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function MM(t){t.clearSnapshot()}function Cw(t){t.clearMeasurements()}function DM(t){t.isLayoutDirty=!1}function OM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Aw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function VM(t){t.resolveTargetDelta()}function jM(t){t.calcProjection()}function zM(t){t.resetRotation()}function FM(t){t.removeLeadSnapshot()}function kw(t,e,n){t.translate=it(e.translate,0,n),t.scale=it(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function bw(t,e,n,i){t.min=it(e.min,n.min,i),t.max=it(e.max,n.max,i)}function BM(t,e,n,i){bw(t.x,e.x,n.x,i),bw(t.y,e.y,n.y,i)}function UM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const HM={duration:.45,ease:[.4,0,.1,1]},Rw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Lw=Rw("applewebkit/")&&!Rw("chrome/")?Math.round:ft;function Nw(t){t.min=Lw(t.min),t.max=Lw(t.max)}function WM(t){Nw(t.x),Nw(t.y)}function oS(t,e,n){return t==="position"||t==="preserve-aspect"&&!ug(Ew(e),Ew(n),.2)}const $M=sS({attachResizeListener:(t,e)=>$i(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vp={current:void 0},aS=sS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Vp.current){const t=new $M({});t.mount(window),t.setOptions({layoutScroll:!0}),Vp.current=t}return Vp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),qM={pan:{Feature:lM},drag:{Feature:aM,ProjectionNode:aS,MeasureLayout:eS}},GM=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ZM(t){const e=GM.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function fg(t,e,n=1){const[i,r]=ZM(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return HP(a)?parseFloat(a):a}else return ng(r)?fg(r,e,n+1):r}function KM(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!ng(o))return;const a=fg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!ng(o))continue;const a=fg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const QM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),lS=t=>QM.has(t),XM=t=>Object.keys(t).some(lS),Mw=t=>t===uo||t===pe,Dw=(t,e)=>parseFloat(t.split(", ")[e]),Ow=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Dw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Dw(o[1],t):0}},YM=new Set(["x","y","z"]),JM=Qu.filter(t=>!YM.has(t));function eD(t){const e=[];return JM.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Da={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Ow(4,13),y:Ow(5,14)};Da.translateX=Da.x;Da.translateY=Da.y;const tD=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Da[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=Da[f](h,o)}),t},nD=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(lS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=Ol(m);const v=e[h];let T;if(yd(v)){const R=v.length,b=v[0]===null?1:0;m=v[b],g=Ol(m);for(let z=b;z<R&&v[z]!==null;z++)T?Qy(Ol(v[z])===T):T=Ol(v[z])}else T=Ol(v);if(g!==T)if(Mw(g)&&Mw(T)){const R=f.get();typeof R=="string"&&f.set(parseFloat(R)),typeof v=="string"?e[h]=parseFloat(v):Array.isArray(v)&&T===pe&&(e[h]=v.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||v===0)?m===0?f.set(T.transform(m)):e[h]=g.transform(v):(a||(o=eD(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(v))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=tD(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),ff&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function iD(t,e,n,i){return XM(e)?nD(t,e,n,i):{target:e,transitionEnd:i}}const rD=(t,e,n,i)=>{const r=KM(t,e,i);return e=r.target,i=r.transitionEnd,iD(t,e,n,i)},pg={current:null},uS={current:!1};function sD(){if(uS.current=!0,!!ff)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>pg.current=t.matches;t.addListener(e),e()}else pg.current=!1}function oD(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(gn(o))t.addValue(r,o),xd(i)&&i.add(r);else if(gn(a))t.addValue(r,Ma(o,{owner:t})),xd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Ma(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Vw=new WeakMap,cS=Object.keys(Nu),aD=cS.length,jw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],lD=By.length;class uD{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ke.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=mf(n),this.isVariantNode=ZE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const v=m[g];u[g]!==void 0&&gn(v)&&(v.set(u[g],!1),xd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Vw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),uS.current||sD(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Vw.delete(this.current),this.projection&&this.projection.unmount(),nr(this.notifyUpdate),nr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=lo.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ke.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<aD;h++){const f=cS[h],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:T}=Nu[f];v&&(a=v),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&la(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<jw.length;i++){const r=jw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=oD(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<lD;i++){const r=By[i],o=this.props[r];(Lu(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ma(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=Ky(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!gn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new s_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class hS extends uD{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=IN(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){PN(this,i,a);const u=rD(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function cD(t){return window.getComputedStyle(t)}class hD extends hS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(lo.has(n)){const i=e_(n);return i&&i.default||0}else{const i=cD(e),r=(YE(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return YP(e,n)}build(e,n,i,r){Wy(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Zy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){rP(e,n,i,r)}}class dD extends hS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(lo.has(n)){const i=e_(n);return i&&i.default||0}return n=sP.has(n)?n:zy(n),e.getAttribute(n)}measureInstanceViewportBox(){return yt()}scrapeMotionValuesFromProps(e,n){return aP(e,n)}build(e,n,i,r){qy(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){oP(e,n,i,r)}mount(e){this.isSVGTag=Gy(e.tagName),super.mount(e)}}const fD=(t,e)=>Hy(t)?new dD(e,{enableHardwareAcceleration:!1}):new hD(e,{enableHardwareAcceleration:!0}),pD={layout:{ProjectionNode:aS,MeasureLayout:eS}},mD={...BN,...aL,...qM,...pD},ue=gR((t,e)=>ZR(t,e,mD,fD));function dS(){const t=j.useRef(!1);return jy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function gD(){const t=dS(),[e,n]=j.useState(0),i=j.useCallback(()=>{t.current&&n(e+1)},[e]);return[j.useCallback(()=>Ke.postRender(i),[i]),e]}class yD extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function _D({children:t,isPresent:e}){const n=j.useId(),i=j.useRef(null),r=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),j.createElement(yD,{isPresent:e,childRef:i,sizeRef:r},j.cloneElement(t,{ref:i}))}const jp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=lP(vD),h=j.useId(),f=j.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return j.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),j.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=j.createElement(_D,{isPresent:n},t)),j.createElement(df.Provider,{value:f},t)};function vD(){return new Map}function wD(t){return j.useEffect(()=>()=>t(),[])}const Os=t=>t.key||"";function xD(t,e){t.forEach(n=>{const i=Os(n);e.set(i,n)})}function TD(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const va=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=j.useContext(Uy).forceRender||gD()[0],h=dS(),f=TD(t);let m=f;const g=j.useRef(new Map).current,v=j.useRef(m),T=j.useRef(new Map).current,R=j.useRef(!0);if(jy(()=>{R.current=!1,xD(f,T),v.current=m}),wD(()=>{R.current=!0,T.clear(),g.clear()}),R.current)return j.createElement(j.Fragment,null,m.map(E=>j.createElement(jp,{key:Os(E),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},E)));m=[...m];const b=v.current.map(Os),z=f.map(Os),C=b.length;for(let E=0;E<C;E++){const I=b[E];z.indexOf(I)===-1&&!g.has(I)&&g.set(I,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((E,I)=>{if(z.indexOf(I)!==-1)return;const F=T.get(I);if(!F)return;const q=b.indexOf(I);let Z=E;if(!Z){const N=()=>{g.delete(I);const S=Array.from(T.keys()).filter(k=>!z.includes(k));if(S.forEach(k=>T.delete(k)),v.current=f.filter(k=>{const M=Os(k);return M===I||S.includes(M)}),!g.size){if(h.current===!1)return;u(),i&&i()}};Z=j.createElement(jp,{key:Os(F),isPresent:!1,onExitComplete:N,custom:e,presenceAffectsLayout:o,mode:a},F),g.set(I,Z)}m.splice(q,0,Z)}),m=m.map(E=>{const I=E.key;return g.has(I)?E:j.createElement(jp,{key:Os(E),isPresent:!0,presenceAffectsLayout:o,mode:a},E)}),j.createElement(j.Fragment,null,g.size?m:m.map(E=>j.cloneElement(E)))},ED=()=>{};var zw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},PD=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},pS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(v=64)),i.push(n[m],n[g],n[v],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new SD;const v=o<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const R=f<<6&192|g;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ID=function(t){const e=fS(t);return pS.encodeByteArray(e,!0)},Ed=function(t){return ID(t).replace(/\./g,"")},mS=function(t){try{return pS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=()=>CD().__FIREBASE_DEFAULTS__,kD=()=>{if(typeof process>"u"||typeof zw>"u")return;const t=zw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mS(t[1]);return e&&JSON.parse(e)},vf=()=>{try{return ED()||AD()||kD()||bD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gS=t=>{var e,n;return(n=(e=vf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},RD=t=>{const e=gS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},yS=()=>{var t;return(t=vf())==null?void 0:t.config},_S=t=>{var e;return(e=vf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ed(JSON.stringify(n)),Ed(JSON.stringify(a)),""].join(".")}const ou={};function MD(){const t={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?t.emulator.push(e):t.prod.push(e);return t}function DD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Fw=!1;function wS(t,e){if(typeof window>"u"||typeof document>"u"||!Za(window.location.host)||ou[t]===e||ou[t]||Fw)return;ou[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=MD().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Fw=!0,a()},v}function m(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=DD(i),T=n("text"),R=document.getElementById(T)||document.createElement("span"),b=n("learnmore"),z=document.getElementById(b)||document.createElement("a"),C=n("preprendIcon"),E=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const I=v.element;u(I),m(z,b);const F=f();h(E,C),I.append(E,R,z,F),document.body.appendChild(I)}o?(R.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function VD(){var e;const t=(e=vf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BD(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UD(){return!VD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HD(){try{return typeof indexedDB=="object"}catch{return!1}}function WD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="FirebaseError";class ur extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=$D,Object.setPrototypeOf(this,ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ec.prototype.create)}}class ec{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?qD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new ur(r,u,i)}}function qD(t,e){return t.replace(GD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const GD=/\{\$([^}]+)}/g;function ZD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function eo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Bw(o)&&Bw(a)){if(!eo(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Bw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function KD(t,e){const n=new QD(t,e);return n.subscribe.bind(n)}class QD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");XD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=zp),r.error===void 0&&(r.error=zp),r.complete===void 0&&(r.complete=zp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t){return t&&t._delegate?t._delegate:t}class to{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new LD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eO(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:JD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JD(t){return t===Vs?void 0:t}function eO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const nO={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},iO=Ae.INFO,rO={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},sO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=rO[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o_{constructor(e){this.name=e,this._logLevel=iO,this._logHandler=sO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const oO=(t,e)=>e.some(n=>t instanceof n);let Uw,Hw;function aO(){return Uw||(Uw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lO(){return Hw||(Hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xS=new WeakMap,mg=new WeakMap,TS=new WeakMap,Fp=new WeakMap,a_=new WeakMap;function uO(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Gr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&xS.set(n,t)}).catch(()=>{}),a_.set(e,t),e}function cO(t){if(mg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});mg.set(t,e)}let gg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hO(t){gg=t(gg)}function dO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Bp(this),e,...n);return TS.set(i,e.sort?e.sort():[e]),Gr(i)}:lO().includes(t)?function(...e){return t.apply(Bp(this),e),Gr(xS.get(this))}:function(...e){return Gr(t.apply(Bp(this),e))}}function fO(t){return typeof t=="function"?dO(t):(t instanceof IDBTransaction&&cO(t),oO(t,aO())?new Proxy(t,gg):t)}function Gr(t){if(t instanceof IDBRequest)return uO(t);if(Fp.has(t))return Fp.get(t);const e=fO(t);return e!==t&&(Fp.set(t,e),a_.set(e,t)),e}const Bp=t=>a_.get(t);function pO(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Gr(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Gr(a.result),h.oldVersion,h.newVersion,Gr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const mO=["get","getKey","getAll","getAllKeys","count"],gO=["put","add","delete","clear"],Up=new Map;function Ww(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=gO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||mO.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return Up.set(e,o),o}hO(t=>({...t,get:(e,n,i)=>Ww(e,n)||t.get(e,n,i),has:(e,n)=>!!Ww(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_O(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function _O(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yg="@firebase/app",$w="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new o_("@firebase/app"),vO="@firebase/app-compat",wO="@firebase/analytics-compat",xO="@firebase/analytics",TO="@firebase/app-check-compat",EO="@firebase/app-check",PO="@firebase/auth",SO="@firebase/auth-compat",IO="@firebase/database",CO="@firebase/data-connect",AO="@firebase/database-compat",kO="@firebase/functions",bO="@firebase/functions-compat",RO="@firebase/installations",LO="@firebase/installations-compat",NO="@firebase/messaging",MO="@firebase/messaging-compat",DO="@firebase/performance",OO="@firebase/performance-compat",VO="@firebase/remote-config",jO="@firebase/remote-config-compat",zO="@firebase/storage",FO="@firebase/storage-compat",BO="@firebase/firestore",UO="@firebase/ai",HO="@firebase/firestore-compat",WO="firebase",$O="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="[DEFAULT]",qO={[yg]:"fire-core",[vO]:"fire-core-compat",[xO]:"fire-analytics",[wO]:"fire-analytics-compat",[EO]:"fire-app-check",[TO]:"fire-app-check-compat",[PO]:"fire-auth",[SO]:"fire-auth-compat",[IO]:"fire-rtdb",[CO]:"fire-data-connect",[AO]:"fire-rtdb-compat",[kO]:"fire-fn",[bO]:"fire-fn-compat",[RO]:"fire-iid",[LO]:"fire-iid-compat",[NO]:"fire-fcm",[MO]:"fire-fcm-compat",[DO]:"fire-perf",[OO]:"fire-perf-compat",[VO]:"fire-rc",[jO]:"fire-rc-compat",[zO]:"fire-gcs",[FO]:"fire-gcs-compat",[BO]:"fire-fst",[HO]:"fire-fst-compat",[UO]:"fire-vertex","fire-js":"fire-js",[WO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Map,GO=new Map,vg=new Map;function qw(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oa(t){const e=t.name;if(vg.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;vg.set(e,t);for(const n of Pd.values())qw(n,t);for(const n of GO.values())qw(n,t);return!0}function l_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Jn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new ec("app","Firebase",ZO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=$O;function ES(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:_g,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Zr.create("bad-app-name",{appName:String(r)});if(n||(n=yS()),!n)throw Zr.create("no-options");const o=Pd.get(r);if(o){if(eo(n,o.options)&&eo(i,o.config))return o;throw Zr.create("duplicate-app",{appName:r})}const a=new tO(r);for(const h of vg.values())a.addComponent(h);const u=new KO(n,i,a);return Pd.set(r,u),u}function PS(t=_g){const e=Pd.get(t);if(!e&&t===_g&&yS())return ES();if(!e)throw Zr.create("no-app",{appName:t});return e}function Kr(t,e,n){let i=qO[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(a.join(" "));return}Oa(new to(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="firebase-heartbeat-database",XO=1,Du="firebase-heartbeat-store";let Hp=null;function SS(){return Hp||(Hp=pO(QO,XO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Du)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),Hp}async function YO(t){try{const n=(await SS()).transaction(Du),i=await n.objectStore(Du).get(IS(t));return await n.done,i}catch(e){if(e instanceof ur)ir.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function Gw(t,e){try{const i=(await SS()).transaction(Du,"readwrite");await i.objectStore(Du).put(e,IS(t)),await i.done}catch(n){if(n instanceof ur)ir.warn(n.message);else{const i=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(i.message)}}}function IS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=1024,eV=30;class tV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Zw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>eV){const a=rV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ir.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zw(),{heartbeatsToSend:i,unsentEntries:r}=nV(this._heartbeatsCache.heartbeats),o=Ed(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ir.warn(n),""}}}function Zw(){return new Date().toISOString().substring(0,10)}function nV(t,e=JO){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Kw(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Kw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class iV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HD()?WD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Gw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Gw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Kw(t){return Ed(JSON.stringify({version:2,heartbeats:t})).length}function rV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){Oa(new to("platform-logger",e=>new yO(e),"PRIVATE")),Oa(new to("heartbeat",e=>new tV(e),"PRIVATE")),Kr(yg,$w,t),Kr(yg,$w,"esm2020"),Kr("fire-js","")}sV("");var Qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,CS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function k(){}k.prototype=S.prototype,N.F=S.prototype,N.prototype=new k,N.prototype.constructor=N,N.D=function(M,O,B){for(var D=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)D[ae-2]=arguments[ae];return S.prototype[O].apply(M,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,S,k){k||(k=0);const M=Array(16);if(typeof S=="string")for(var O=0;O<16;++O)M[O]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(O=0;O<16;++O)M[O]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=N.g[0],k=N.g[1],O=N.g[2];let B=N.g[3],D;D=S+(B^k&(O^B))+M[0]+3614090360&4294967295,S=k+(D<<7&4294967295|D>>>25),D=B+(O^S&(k^O))+M[1]+3905402710&4294967295,B=S+(D<<12&4294967295|D>>>20),D=O+(k^B&(S^k))+M[2]+606105819&4294967295,O=B+(D<<17&4294967295|D>>>15),D=k+(S^O&(B^S))+M[3]+3250441966&4294967295,k=O+(D<<22&4294967295|D>>>10),D=S+(B^k&(O^B))+M[4]+4118548399&4294967295,S=k+(D<<7&4294967295|D>>>25),D=B+(O^S&(k^O))+M[5]+1200080426&4294967295,B=S+(D<<12&4294967295|D>>>20),D=O+(k^B&(S^k))+M[6]+2821735955&4294967295,O=B+(D<<17&4294967295|D>>>15),D=k+(S^O&(B^S))+M[7]+4249261313&4294967295,k=O+(D<<22&4294967295|D>>>10),D=S+(B^k&(O^B))+M[8]+1770035416&4294967295,S=k+(D<<7&4294967295|D>>>25),D=B+(O^S&(k^O))+M[9]+2336552879&4294967295,B=S+(D<<12&4294967295|D>>>20),D=O+(k^B&(S^k))+M[10]+4294925233&4294967295,O=B+(D<<17&4294967295|D>>>15),D=k+(S^O&(B^S))+M[11]+2304563134&4294967295,k=O+(D<<22&4294967295|D>>>10),D=S+(B^k&(O^B))+M[12]+1804603682&4294967295,S=k+(D<<7&4294967295|D>>>25),D=B+(O^S&(k^O))+M[13]+4254626195&4294967295,B=S+(D<<12&4294967295|D>>>20),D=O+(k^B&(S^k))+M[14]+2792965006&4294967295,O=B+(D<<17&4294967295|D>>>15),D=k+(S^O&(B^S))+M[15]+1236535329&4294967295,k=O+(D<<22&4294967295|D>>>10),D=S+(O^B&(k^O))+M[1]+4129170786&4294967295,S=k+(D<<5&4294967295|D>>>27),D=B+(k^O&(S^k))+M[6]+3225465664&4294967295,B=S+(D<<9&4294967295|D>>>23),D=O+(S^k&(B^S))+M[11]+643717713&4294967295,O=B+(D<<14&4294967295|D>>>18),D=k+(B^S&(O^B))+M[0]+3921069994&4294967295,k=O+(D<<20&4294967295|D>>>12),D=S+(O^B&(k^O))+M[5]+3593408605&4294967295,S=k+(D<<5&4294967295|D>>>27),D=B+(k^O&(S^k))+M[10]+38016083&4294967295,B=S+(D<<9&4294967295|D>>>23),D=O+(S^k&(B^S))+M[15]+3634488961&4294967295,O=B+(D<<14&4294967295|D>>>18),D=k+(B^S&(O^B))+M[4]+3889429448&4294967295,k=O+(D<<20&4294967295|D>>>12),D=S+(O^B&(k^O))+M[9]+568446438&4294967295,S=k+(D<<5&4294967295|D>>>27),D=B+(k^O&(S^k))+M[14]+3275163606&4294967295,B=S+(D<<9&4294967295|D>>>23),D=O+(S^k&(B^S))+M[3]+4107603335&4294967295,O=B+(D<<14&4294967295|D>>>18),D=k+(B^S&(O^B))+M[8]+1163531501&4294967295,k=O+(D<<20&4294967295|D>>>12),D=S+(O^B&(k^O))+M[13]+2850285829&4294967295,S=k+(D<<5&4294967295|D>>>27),D=B+(k^O&(S^k))+M[2]+4243563512&4294967295,B=S+(D<<9&4294967295|D>>>23),D=O+(S^k&(B^S))+M[7]+1735328473&4294967295,O=B+(D<<14&4294967295|D>>>18),D=k+(B^S&(O^B))+M[12]+2368359562&4294967295,k=O+(D<<20&4294967295|D>>>12),D=S+(k^O^B)+M[5]+4294588738&4294967295,S=k+(D<<4&4294967295|D>>>28),D=B+(S^k^O)+M[8]+2272392833&4294967295,B=S+(D<<11&4294967295|D>>>21),D=O+(B^S^k)+M[11]+1839030562&4294967295,O=B+(D<<16&4294967295|D>>>16),D=k+(O^B^S)+M[14]+4259657740&4294967295,k=O+(D<<23&4294967295|D>>>9),D=S+(k^O^B)+M[1]+2763975236&4294967295,S=k+(D<<4&4294967295|D>>>28),D=B+(S^k^O)+M[4]+1272893353&4294967295,B=S+(D<<11&4294967295|D>>>21),D=O+(B^S^k)+M[7]+4139469664&4294967295,O=B+(D<<16&4294967295|D>>>16),D=k+(O^B^S)+M[10]+3200236656&4294967295,k=O+(D<<23&4294967295|D>>>9),D=S+(k^O^B)+M[13]+681279174&4294967295,S=k+(D<<4&4294967295|D>>>28),D=B+(S^k^O)+M[0]+3936430074&4294967295,B=S+(D<<11&4294967295|D>>>21),D=O+(B^S^k)+M[3]+3572445317&4294967295,O=B+(D<<16&4294967295|D>>>16),D=k+(O^B^S)+M[6]+76029189&4294967295,k=O+(D<<23&4294967295|D>>>9),D=S+(k^O^B)+M[9]+3654602809&4294967295,S=k+(D<<4&4294967295|D>>>28),D=B+(S^k^O)+M[12]+3873151461&4294967295,B=S+(D<<11&4294967295|D>>>21),D=O+(B^S^k)+M[15]+530742520&4294967295,O=B+(D<<16&4294967295|D>>>16),D=k+(O^B^S)+M[2]+3299628645&4294967295,k=O+(D<<23&4294967295|D>>>9),D=S+(O^(k|~B))+M[0]+4096336452&4294967295,S=k+(D<<6&4294967295|D>>>26),D=B+(k^(S|~O))+M[7]+1126891415&4294967295,B=S+(D<<10&4294967295|D>>>22),D=O+(S^(B|~k))+M[14]+2878612391&4294967295,O=B+(D<<15&4294967295|D>>>17),D=k+(B^(O|~S))+M[5]+4237533241&4294967295,k=O+(D<<21&4294967295|D>>>11),D=S+(O^(k|~B))+M[12]+1700485571&4294967295,S=k+(D<<6&4294967295|D>>>26),D=B+(k^(S|~O))+M[3]+2399980690&4294967295,B=S+(D<<10&4294967295|D>>>22),D=O+(S^(B|~k))+M[10]+4293915773&4294967295,O=B+(D<<15&4294967295|D>>>17),D=k+(B^(O|~S))+M[1]+2240044497&4294967295,k=O+(D<<21&4294967295|D>>>11),D=S+(O^(k|~B))+M[8]+1873313359&4294967295,S=k+(D<<6&4294967295|D>>>26),D=B+(k^(S|~O))+M[15]+4264355552&4294967295,B=S+(D<<10&4294967295|D>>>22),D=O+(S^(B|~k))+M[6]+2734768916&4294967295,O=B+(D<<15&4294967295|D>>>17),D=k+(B^(O|~S))+M[13]+1309151649&4294967295,k=O+(D<<21&4294967295|D>>>11),D=S+(O^(k|~B))+M[4]+4149444226&4294967295,S=k+(D<<6&4294967295|D>>>26),D=B+(k^(S|~O))+M[11]+3174756917&4294967295,B=S+(D<<10&4294967295|D>>>22),D=O+(S^(B|~k))+M[2]+718787259&4294967295,O=B+(D<<15&4294967295|D>>>17),D=k+(B^(O|~S))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+B&4294967295}i.prototype.v=function(N,S){S===void 0&&(S=N.length);const k=S-this.blockSize,M=this.C;let O=this.h,B=0;for(;B<S;){if(O==0)for(;B<=k;)r(this,N,B),B+=this.blockSize;if(typeof N=="string"){for(;B<S;)if(M[O++]=N.charCodeAt(B++),O==this.blockSize){r(this,M),O=0;break}}else for(;B<S;)if(M[O++]=N[B++],O==this.blockSize){r(this,M),O=0;break}}this.h=O,this.o+=S},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;S=this.o*8;for(var k=N.length-8;k<N.length;++k)N[k]=S&255,S/=256;for(this.v(N),N=Array(16),S=0,k=0;k<4;++k)for(let M=0;M<32;M+=8)N[S++]=this.g[k]>>>M&255;return N};function o(N,S){var k=u;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=S(N)}function a(N,S){this.h=S;const k=[];let M=!0;for(let O=N.length-1;O>=0;O--){const B=N[O]|0;M&&B==S||(k[O]=B,M=!1)}this.g=k}var u={};function h(N){return-128<=N&&N<128?o(N,function(S){return new a([S|0],S<0?-1:0)}):new a([N|0],N<0?-1:0)}function f(N){if(isNaN(N)||!isFinite(N))return g;if(N<0)return z(f(-N));const S=[];let k=1;for(let M=0;N>=k;M++)S[M]=N/k|0,k*=4294967296;return new a(S,0)}function m(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return z(m(N.substring(1),S));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=f(Math.pow(S,8));let M=g;for(let B=0;B<N.length;B+=8){var O=Math.min(8,N.length-B);const D=parseInt(N.substring(B,B+O),S);O<8?(O=f(Math.pow(S,O)),M=M.j(O).add(f(D))):(M=M.j(k),M=M.add(f(D)))}return M}var g=h(0),v=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(b(this))return-z(this).m();let N=0,S=1;for(let k=0;k<this.g.length;k++){const M=this.i(k);N+=(M>=0?M:4294967296+M)*S,S*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(R(this))return"0";if(b(this))return"-"+z(this).toString(N);const S=f(Math.pow(N,6));var k=this;let M="";for(;;){const O=F(k,S).g;k=C(k,O.j(S));let B=((k.g.length>0?k.g[0]:k.h)>>>0).toString(N);if(k=O,R(k))return B+M;for(;B.length<6;)B="0"+B;M=B+M}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function R(N){if(N.h!=0)return!1;for(let S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function b(N){return N.h==-1}t.l=function(N){return N=C(this,N),b(N)?-1:R(N)?0:1};function z(N){const S=N.g.length,k=[];for(let M=0;M<S;M++)k[M]=~N.g[M];return new a(k,~N.h).add(v)}t.abs=function(){return b(this)?z(this):this},t.add=function(N){const S=Math.max(this.g.length,N.g.length),k=[];let M=0;for(let O=0;O<=S;O++){let B=M+(this.i(O)&65535)+(N.i(O)&65535),D=(B>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);M=D>>>16,B&=65535,D&=65535,k[O]=D<<16|B}return new a(k,k[k.length-1]&-2147483648?-1:0)};function C(N,S){return N.add(z(S))}t.j=function(N){if(R(this)||R(N))return g;if(b(this))return b(N)?z(this).j(z(N)):z(z(this).j(N));if(b(N))return z(this.j(z(N)));if(this.l(T)<0&&N.l(T)<0)return f(this.m()*N.m());const S=this.g.length+N.g.length,k=[];for(var M=0;M<2*S;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<N.g.length;O++){const B=this.i(M)>>>16,D=this.i(M)&65535,ae=N.i(O)>>>16,Oe=N.i(O)&65535;k[2*M+2*O]+=D*Oe,E(k,2*M+2*O),k[2*M+2*O+1]+=B*Oe,E(k,2*M+2*O+1),k[2*M+2*O+1]+=D*ae,E(k,2*M+2*O+1),k[2*M+2*O+2]+=B*ae,E(k,2*M+2*O+2)}for(N=0;N<S;N++)k[N]=k[2*N+1]<<16|k[2*N];for(N=S;N<2*S;N++)k[N]=0;return new a(k,0)};function E(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function I(N,S){this.g=N,this.h=S}function F(N,S){if(R(S))throw Error("division by zero");if(R(N))return new I(g,g);if(b(N))return S=F(z(N),S),new I(z(S.g),z(S.h));if(b(S))return S=F(N,z(S)),new I(z(S.g),S.h);if(N.g.length>30){if(b(N)||b(S))throw Error("slowDivide_ only works with positive integers.");for(var k=v,M=S;M.l(N)<=0;)k=q(k),M=q(M);var O=Z(k,1),B=Z(M,1);for(M=Z(M,2),k=Z(k,2);!R(M);){var D=B.add(M);D.l(N)<=0&&(O=O.add(k),B=D),M=Z(M,1),k=Z(k,1)}return S=C(N,O.j(S)),new I(O,S)}for(O=g;N.l(S)>=0;){for(k=Math.max(1,Math.floor(N.m()/S.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),B=f(k),D=B.j(S);b(D)||D.l(N)>0;)k-=M,B=f(k),D=B.j(S);R(B)&&(B=v),O=O.add(B),N=C(N,D)}return new I(O,N)}t.B=function(N){return F(this,N).h},t.and=function(N){const S=Math.max(this.g.length,N.g.length),k=[];for(let M=0;M<S;M++)k[M]=this.i(M)&N.i(M);return new a(k,this.h&N.h)},t.or=function(N){const S=Math.max(this.g.length,N.g.length),k=[];for(let M=0;M<S;M++)k[M]=this.i(M)|N.i(M);return new a(k,this.h|N.h)},t.xor=function(N){const S=Math.max(this.g.length,N.g.length),k=[];for(let M=0;M<S;M++)k[M]=this.i(M)^N.i(M);return new a(k,this.h^N.h)};function q(N){const S=N.g.length+1,k=[];for(let M=0;M<S;M++)k[M]=N.i(M)<<1|N.i(M-1)>>>31;return new a(k,N.h)}function Z(N,S){const k=S>>5;S%=32;const M=N.g.length-k,O=[];for(let B=0;B<M;B++)O[B]=S>0?N.i(B+k)>>>S|N.i(B+k+1)<<32-S:N.i(B+k);return new a(O,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,CS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Qr=a}).apply(typeof Qw<"u"?Qw:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AS,Hl,kS,Nh,wg,bS,RS,LS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var y=0;y<c.length;++y){var w=c[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var w=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in w))break e;w=w[U]}c=c[c.length-1],A=w[c],y=y(A),y!=A&&y!=null&&e(w,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var w=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&w.push([A,y[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,w){return c.call.apply(c.bind,arguments)}function f(c,y,w){return f=h,f.apply(null,arguments)}function m(c,y){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function g(c,y){function w(){}w.prototype=y.prototype,c.Z=y.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(A,U,W){for(var ee=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)ee[_e-2]=arguments[_e];return y.prototype[U].apply(A,ee)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const w=Array(y);for(let A=0;A<y;A++)w[A]=c[A];return w}return[]}function R(c,y){for(let A=1;A<arguments.length;A++){const U=arguments[A];var w=typeof U;if(w=w!="object"?w:U?Array.isArray(U)?"array":w:"null",w=="array"||w=="object"&&typeof U.length=="number"){w=c.length||0;const W=U.length||0;c.length=w+W;for(let ee=0;ee<W;ee++)c[w+ee]=U[ee]}else c.push(U)}}class b{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(c){a.setTimeout(()=>{throw c},0)}function C(){var c=N;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class E{constructor(){this.h=this.g=null}add(y,w){const A=I.get();A.set(y,w),this.h?this.h.next=A:this.g=A,this.h=A}}var I=new b(()=>new F,c=>c.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,Z=!1,N=new E,S=()=>{const c=Promise.resolve(void 0);q=()=>{c.then(k)}};function k(){for(var c;c=C();){try{c.h.call(c.g)}catch(w){z(w)}var y=I;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}Z=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return c}();function D(c){return/^[\s\xa0]*$/.test(c)}function ae(c,y){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(ae,O),ae.prototype.init=function(c,y){const w=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(w=="mouseover"?y=c.fromElement:w=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),Te=0;function Re(c,y,w,A,U){this.listener=c,this.proxy=null,this.src=y,this.type=w,this.capture=!!A,this.ha=U,this.key=++Te,this.da=this.fa=!1}function G(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ce(c,y,w){for(const A in c)y.call(w,c[A],A,c)}function J(c,y){for(const w in c)y.call(void 0,c[w],w,c)}function te(c){const y={};for(const w in c)y[w]=c[w];return y}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function He(c,y){let w,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(w in A)c[w]=A[w];for(let W=0;W<ve.length;W++)w=ve[W],Object.prototype.hasOwnProperty.call(A,w)&&(c[w]=A[w])}}function Pe(c){this.src=c,this.g={},this.h=0}Pe.prototype.add=function(c,y,w,A,U){const W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);const ee=ne(c,y,A,U);return ee>-1?(y=c[ee],w||(y.fa=!1)):(y=new Re(y,this.src,W,!!A,U),y.fa=w,c.push(y)),y};function Ee(c,y){const w=y.type;if(w in c.g){var A=c.g[w],U=Array.prototype.indexOf.call(A,y,void 0),W;(W=U>=0)&&Array.prototype.splice.call(A,U,1),W&&(G(y),c.g[w].length==0&&(delete c.g[w],c.h--))}}function ne(c,y,w,A){for(let U=0;U<c.length;++U){const W=c[U];if(!W.da&&W.listener==y&&W.capture==!!w&&W.ha==A)return U}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),qe={};function rn(c,y,w,A,U){if(Array.isArray(y)){for(let W=0;W<y.length;W++)rn(c,y[W],w,A,U);return null}return w=ys(w),c&&c[Oe]?c.J(y,w,u(A)?!!A.capture:!1,U):sn(c,y,w,!1,A,U)}function sn(c,y,w,A,U,W){if(!y)throw Error("Invalid event type");const ee=u(U)?!!U.capture:!!U;let _e=mo(c);if(_e||(c[Le]=_e=new Pe(c)),w=_e.add(y,w,A,ee,W),w.proxy)return w;if(A=Zt(),w.proxy=A,A.src=c,A.listener=w,c.addEventListener)B||(U=ee),U===void 0&&(U=!1),c.addEventListener(y.toString(),A,U);else if(c.attachEvent)c.attachEvent(hc(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Zt(){function c(w){return y.call(c.src,c.listener,w)}const y=dc;return c}function Ai(c,y,w,A,U){if(Array.isArray(y))for(var W=0;W<y.length;W++)Ai(c,y[W],w,A,U);else A=u(A)?!!A.capture:!!A,w=ys(w),c&&c[Oe]?(c=c.i,W=String(y).toString(),W in c.g&&(y=c.g[W],w=ne(y,w,A,U),w>-1&&(G(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete c.g[W],c.h--)))):c&&(c=mo(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ne(y,w,A,U)),(w=c>-1?y[c]:null)&&ms(w))}function ms(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Oe])Ee(y.i,c);else{var w=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(w,A,c.capture):y.detachEvent?y.detachEvent(hc(w),A):y.addListener&&y.removeListener&&y.removeListener(A),(w=mo(y))?(Ee(w,c),w.h==0&&(w.src=null,y[Le]=null)):G(c)}}}function hc(c){return c in qe?qe[c]:qe[c]="on"+c}function dc(c,y){if(c.da)c=!0;else{y=new ae(y,this);const w=c.listener,A=c.ha||c.src;c.fa&&ms(c),c=w.call(A,y)}return c}function mo(c){return c=c[Le],c instanceof Pe?c:null}var gs="__closure_events_fn_"+(Math.random()*1e9>>>0);function ys(c){return typeof c=="function"?c:(c[gs]||(c[gs]=function(y){return c.handleEvent(y)}),c[gs])}function Pt(){M.call(this),this.i=new Pe(this),this.M=this,this.G=null}g(Pt,M),Pt.prototype[Oe]=!0,Pt.prototype.removeEventListener=function(c,y,w,A){Ai(this,c,y,w,A)};function St(c,y){var w,A=c.G;if(A)for(w=[];A;A=A.G)w.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new O(y,c);else if(y instanceof O)y.target=y.target||c;else{var U=y;y=new O(A,c),He(y,U)}U=!0;let W,ee;if(w)for(ee=w.length-1;ee>=0;ee--)W=y.g=w[ee],U=cr(W,A,!0,y)&&U;if(W=y.g=c,U=cr(W,A,!0,y)&&U,U=cr(W,A,!1,y)&&U,w)for(ee=0;ee<w.length;ee++)W=y.g=w[ee],U=cr(W,A,!1,y)&&U}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const w=c.g[y];for(let A=0;A<w.length;A++)G(w[A]);delete c.g[y],c.h--}}this.G=null},Pt.prototype.J=function(c,y,w,A){return this.i.add(String(c),y,!1,w,A)},Pt.prototype.K=function(c,y,w,A){return this.i.add(String(c),y,!0,w,A)};function cr(c,y,w,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let W=0;W<y.length;++W){const ee=y[W];if(ee&&!ee.da&&ee.capture==w){const _e=ee.listener,je=ee.ha||ee.src;ee.fa&&Ee(c.i,ee),U=_e.call(je,A)!==!1&&U}}return U&&!A.defaultPrevented}function fc(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function nl(c){c.g=fc(()=>{c.g=null,c.i&&(c.i=!1,nl(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Ff extends M{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:nl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(c){M.call(this),this.h=c,this.g={}}g(_s,M);var go=[];function il(c){ce(c.g,function(y,w){this.g.hasOwnProperty(w)&&ms(y)},c),c.g={}}_s.prototype.N=function(){_s.Z.N.call(this),il(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yo=a.JSON.stringify,Bf=a.JSON.parse,pc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function rl(){}function mc(){}var hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vs(){O.call(this,"d")}g(vs,O);function _o(){O.call(this,"c")}g(_o,O);var ki={},dr=null;function vo(){return dr=dr||new Pt}ki.Ia="serverreachability";function gc(c){O.call(this,ki.Ia,c)}g(gc,O);function fr(c){const y=vo();St(y,new gc(y))}ki.STAT_EVENT="statevent";function sl(c,y){O.call(this,ki.STAT_EVENT,c),this.stat=y}g(sl,O);function It(c){const y=vo();St(y,new sl(y,c))}ki.Ja="timingevent";function yc(c,y){O.call(this,ki.Ja,c),this.size=y}g(yc,O);function ws(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function xs(){this.g=!0}xs.prototype.ua=function(){this.g=!1};function Uf(c,y,w,A,U,W){c.info(function(){if(c.g)if(W){var ee="",_e=W.split("&");for(let Be=0;Be<_e.length;Be++){var je=_e[Be].split("=");if(je.length>1){const ct=je[0];je=je[1];const bn=ct.split("_");ee=bn.length>=2&&bn[1]=="type"?ee+(ct+"="+je+"&"):ee+(ct+"=redacted&")}}}else ee=null;else ee=W;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+y+`
`+w+`
`+ee})}function Hf(c,y,w,A,U,W,ee){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+y+`
`+w+`
`+W+" "+ee})}function pr(c,y,w,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Wf(c,w)+(A?" "+A:"")})}function ol(c,y){c.info(function(){return"TIMEOUT: "+y})}xs.prototype.info=function(){};function Wf(c,y){if(!c.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(c=0;c<W.length;c++)if(Array.isArray(W[c])){var w=W[c];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ee=1;ee<A.length;ee++)A[ee]=""}}}}return yo(W)}catch{return y}}var wo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_c={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vc;function on(){}g(on,rl),on.prototype.g=function(){return new XMLHttpRequest},vc=new on;function le(c){return encodeURIComponent(String(c))}function wc(c){var y=1;c=c.split(":");const w=[];for(;y>0&&c.length;)w.push(c.shift()),y--;return c.length&&w.push(c.join(":")),w}function Wn(c,y,w,A){this.j=c,this.i=y,this.l=w,this.S=A||1,this.V=new _s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new al}function al(){this.i=null,this.g="",this.h=!1}var ll={},Ts={};function xo(c,y,w){c.M=1,c.A=Ge(Kt(y)),c.u=w,c.R=!0,bi(c,null)}function bi(c,y){c.F=Date.now(),To(c),c.B=Kt(c.A);var w=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Co(w.i,"t",A),c.C=0,w=c.j.L,c.h=new al,c.g=Tl(c.j,w?y:null,!c.u),c.P>0&&(c.O=new Ff(f(c.Y,c,c.g),c.P)),y=c.V,w=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(go[0]=U.toString()),U=go);for(let W=0;W<U.length;W++){const ee=rn(w,U[W],A||y.handleEvent,!1,y.h||y);if(!ee)break;y.g[ee.key]=ee}y=c.J?te(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),fr(),Uf(c.i,c.v,c.B,c.l,c.S,c.u)}Wn.prototype.ba=function(c){c=c.target;const y=this.O;y&&li(c)==3?y.j():this.Y(c)},Wn.prototype.Y=function(c){try{if(c==this.g)e:{const _e=li(this.g),je=this.g.ya(),Be=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||ml(this.g)))){this.K||_e!=4||je==7||(je==8||Be<=0?fr(3):fr(2)),Eo(this);var y=this.g.ca();this.X=y;var w=xc(this);if(this.o=y==200,Hf(this.i,this.v,this.B,this.l,this.S,_e,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(A)){var W=A;break t}}W=null}if(c=W)pr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ul(this,c);else{this.o=!1,this.m=3,It(12),In(this),Es(this);break e}}if(this.R){c=!0;let ct;for(;!this.K&&this.C<w.length;)if(ct=$f(this,w),ct==Ts){_e==4&&(this.m=4,It(14),c=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==ll){this.m=4,It(15),pr(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else pr(this.i,this.l,ct,null),ul(this,ct);if(Tc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||w.length!=0||this.h.h||(this.m=1,It(16),c=!1),this.o=this.o&&c,!c)pr(this.i,this.l,w,"[Invalid Chunked Response]"),In(this),Es(this);else if(w.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),wl(ee),ee.P=!0,It(11))}}else pr(this.i,this.l,w,null),ul(this,w);_e==4&&In(this),this.o&&!this.K&&(_e==4?_n(this.j,this):(this.o=!1,To(this)))}else gl(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),In(this),Es(this)}}}catch{}finally{}};function xc(c){if(!Tc(c))return c.g.la();const y=ml(c.g);if(y==="")return"";let w="";const A=y.length,U=li(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return In(c),Es(c),"";c.h.i=new a.TextDecoder}for(let W=0;W<A;W++)c.h.h=!0,w+=c.h.i.decode(y[W],{stream:!(U&&W==A-1)});return y.length=0,c.h.g+=w,c.C=0,c.h.g}function Tc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function $f(c,y){var w=c.C,A=y.indexOf(`
`,w);return A==-1?Ts:(w=Number(y.substring(w,A)),isNaN(w)?ll:(A+=1,A+w>y.length?Ts:(y=y.slice(A,A+w),c.C=A+w,y)))}Wn.prototype.cancel=function(){this.K=!0,In(this)};function To(c){c.T=Date.now()+c.H,Ec(c,c.H)}function Ec(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ws(f(c.aa,c),y)}function Eo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}Wn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ol(this.i,this.B),this.M!=2&&(fr(),It(17)),In(this),this.m=2,Es(this)):Ec(this,this.T-c)};function Es(c){c.j.I==0||c.K||_n(c.j,c)}function In(c){Eo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,il(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function ul(c,y){try{var w=c.j;if(w.I!=0&&(w.g==c||Ps(w.h,c))){if(!c.L&&Ps(w.h,c)&&w.I==3){try{var A=w.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Lo(w),bo(w);else break e;vl(w),It(18)}}else w.xa=U[1],0<w.xa-w.K&&U[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=ws(f(w.Va,w),6e3));Ic(w.h)<=1&&w.ta&&(w.ta=void 0)}else ci(w,11)}else if((c.L||w.g==c)&&Lo(w),!D(y))for(U=w.Ba.g.parse(y),y=0;y<U.length;y++){let Be=U[y];const ct=Be[0];if(!(ct<=w.K))if(w.K=ct,Be=Be[1],w.I==2)if(Be[0]=="c"){w.M=Be[1],w.ba=Be[2];const bn=Be[3];bn!=null&&(w.ka=bn,w.j.info("VER="+w.ka));const Gn=Be[4];Gn!=null&&(w.za=Gn,w.j.info("SVER="+w.za));const Rn=Be[5];Rn!=null&&typeof Rn=="number"&&Rn>0&&(A=1.5*Rn,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const hi=c.g;if(hi){const Do=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Do){var W=A.h;W.g||Do.indexOf("spdy")==-1&&Do.indexOf("quic")==-1&&Do.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ri(W,W.h),W.h=null))}if(A.G){const Oo=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Oo&&(A.wa=Oo,se(A.J,A.G,Oo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var ee=c;if(A.na=xl(A,A.L?A.ba:null,A.W),ee.L){cl(A.h,ee);var _e=ee,je=A.O;je&&(_e.H=je),_e.D&&(Eo(_e),To(_e)),A.g=ee}else _l(A);w.i.length>0&&ui(w)}else Be[0]!="stop"&&Be[0]!="close"||ci(w,7);else w.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ci(w,7):Se(w):Be[0]!="noop"&&w.l&&w.l.qa(Be),w.A=0)}}fr(4)}catch{}}var qf=class{constructor(c,y){this.g=c,this.map=y}};function Pc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ic(c){return c.h?1:c.g?c.g.size:0}function Ps(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ri(c,y){c.g?c.g.add(y):c.h=y}function cl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Pc.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function hl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const w of c.g.values())y=y.concat(w.G);return y}return T(c.i)}var mr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ne(c,y){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const A=c[w].indexOf("=");let U,W=null;A>=0?(U=c[w].substring(0,A),W=c[w].substring(A+1)):U=c[w],y(U,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Ve(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Ve?(this.l=c.l,Cn(this,c.j),this.o=c.o,this.g=c.g,An(this,c.u),this.h=c.h,Ss(this,Is(c.i)),this.m=c.m):c&&(y=String(c).match(mr))?(this.l=!1,Cn(this,y[1]||"",!0),this.o=Li(y[2]||""),this.g=Li(y[3]||"",!0),An(this,y[4]),this.h=Li(y[5]||"",!0),Ss(this,y[6]||"",!0),this.m=Li(y[7]||"")):(this.l=!1,this.i=new $n(null,this.l))}Ve.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(si(y,Cc,!0),":");var w=this.g;return(w||y=="file")&&(c.push("//"),(y=this.o)&&c.push(si(y,Cc,!0),"@"),c.push(le(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(si(w,w.charAt(0)=="/"?Ni:Po,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",si(w,Mi)),c.join("")},Ve.prototype.resolve=function(c){const y=Kt(this);let w=!!c.j;w?Cn(y,c.j):w=!!c.o,w?y.o=c.o:w=!!c.g,w?y.g=c.g:w=c.u!=null;var A=c.h;if(w)An(y,c.u);else if(w=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=y.h.lastIndexOf("/");U!=-1&&(A=y.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const W=[];for(let ee=0;ee<U.length;){const _e=U[ee++];_e=="."?A&&ee==U.length&&W.push(""):_e==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&ee==U.length&&W.push("")):(W.push(_e),A=!0)}A=W.join("/")}else A=U}return w?y.h=A:w=c.i.toString()!=="",w?Ss(y,Is(c.i)):w=!!c.m,w&&(y.m=c.m),y};function Kt(c){return new Ve(c)}function Cn(c,y,w){c.j=w?Li(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function An(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Ss(c,y,w){y instanceof $n?(c.i=y,dl(c.i,c.l)):(w||(y=si(y,at)),c.i=new $n(y,c.l))}function se(c,y,w){c.i.set(y,w)}function Ge(c){return se(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Li(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function si(c,y,w){return typeof c=="string"?(c=encodeURI(c).replace(y,an),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function an(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cc=/[#\/\?@]/g,Po=/[#\?:]/g,Ni=/[#\?]/g,at=/[#\?@]/g,Mi=/#/g;function $n(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function yn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ne(c.i,function(y,w){c.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=$n.prototype,t.add=function(c,y){yn(this),this.i=null,c=oi(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(y),this.h+=1,this};function So(c,y){yn(c),y=oi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function gr(c,y){return yn(c),y=oi(c,y),c.g.has(y)}t.forEach=function(c,y){yn(this),this.g.forEach(function(w,A){w.forEach(function(U){c.call(y,U,A,this)},this)},this)};function Io(c,y){yn(c);let w=[];if(typeof y=="string")gr(c,y)&&(w=w.concat(c.g.get(oi(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)w=w.concat(c[y]);return w}t.set=function(c,y){return yn(this),this.i=null,c=oi(this,c),gr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=Io(this,c),c.length>0?String(c[0]):y):y};function Co(c,y,w){So(c,y),w.length>0&&(c.i=null,c.g.set(oi(c,y),T(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var w=y[A];const U=le(w);w=Io(this,w);for(let W=0;W<w.length;W++){let ee=U;w[W]!==""&&(ee+="="+le(w[W])),c.push(ee)}}return this.i=c.join("&")};function Is(c){const y=new $n;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function oi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function dl(c,y){y&&!c.j&&(yn(c),c.i=null,c.g.forEach(function(w,A){const U=A.toLowerCase();A!=U&&(So(this,A),Co(this,U,w))},c)),c.j=y}function Ao(c,y){const w=new xs;if(a.Image){const A=new Image;A.onload=m(kn,w,"TestLoadImage: loaded",!0,y,A),A.onerror=m(kn,w,"TestLoadImage: error",!1,y,A),A.onabort=m(kn,w,"TestLoadImage: abort",!1,y,A),A.ontimeout=m(kn,w,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Ac(c,y){const w=new xs,A=new AbortController,U=setTimeout(()=>{A.abort(),kn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(W=>{clearTimeout(U),W.ok?kn(w,"TestPingServer: ok",!0,y):kn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),kn(w,"TestPingServer: error",!1,y)})}function kn(c,y,w,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(w)}catch{}}function Gf(){this.g=new pc}function ye(c){this.i=c.Sb||null,this.h=c.ab||!1}g(ye,rl),ye.prototype.g=function(){return new Qt(this.i,this.h)};function Qt(c,y){Pt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Qt,Pt),t=Qt.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Di(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;We(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function We(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?yr(this):Di(this),this.readyState==3&&We(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,yr(this))},t.Na=function(c){this.g&&(this.response=c,yr(this))},t.ga=function(){this.g&&yr(this)};function yr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Di(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=y.next();return c.join(`\r
`)};function Di(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Qt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ko(c){let y="";return ce(c,function(w,A){y+=A,y+=":",y+=w,y+=`\r
`}),y}function Cs(c,y,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=ko(w),typeof c=="string"?w!=null&&le(w):se(c,y,w))}function Fe(c){Pt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Fe,Pt);var fl=/^https?$/i,As=["POST","PUT"];t=Fe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(W){pt(this,W);return}if(c=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)w.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())w.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(As,y,void 0)>=0)||A||U||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ee]of w)this.g.setRequestHeader(W,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(W){pt(this,W)}};function pt(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,ai(c),ks(c)}function ai(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,St(this,"complete"),St(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),Fe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?pl(this):this.Xa())},t.Xa=function(){pl(this)};function pl(c){if(c.h&&typeof o<"u"){if(c.v&&li(c)==4)setTimeout(c.Ca.bind(c),0);else if(St(c,"readystatechange"),li(c)==4){c.h=!1;try{const W=c.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var A;if(A=W===0){let ee=String(c.D).match(mr)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),A=!fl.test(ee?ee.toLowerCase():"")}w=A}if(w)St(c,"complete"),St(c,"success");else{c.o=6;try{var U=li(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",ai(c)}}finally{ks(c)}}}}function ks(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,y||St(c,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function li(c){return c.g?c.g.readyState:0}t.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Bf(y)}};function ml(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gl(c){const y={};c=(c.g&&li(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(D(c[A]))continue;var w=wc(c[A]);const U=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=y[U]||[];y[U]=W,W.push(w)}J(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(c,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||y}function yl(c){this.za=0,this.i=[],this.j=new xs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bs("baseRetryDelayMs",5e3,c),this.Za=bs("retryDelaySeedMs",1e4,c),this.Ta=bs("forwardChannelMaxRetries",2,c),this.va=bs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Pc(c&&c.concurrentRequestLimit),this.Ba=new Gf,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=yl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,w,A){It(0),this.W=c,this.H=y||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=xl(this,null,this.W),ui(this)};function Se(c){if(ln(c),c.I==3){var y=c.V++,w=Kt(c.J);if(se(w,"SID",c.M),se(w,"RID",y),se(w,"TYPE","terminate"),Oi(c,w),y=new Wn(c,c.j,y),y.M=2,y.A=Ge(Kt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.A,w=!0),w||(y.g=Tl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),To(y)}qn(c)}function bo(c){c.g&&(wl(c),c.g.cancel(),c.g=null)}function ln(c){bo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Lo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function ui(c){if(!Sc(c.h)&&!c.m){c.m=!0;var y=c.Ea;q||S(),Z||(q(),Z=!0),N.add(y,c),c.D=0}}function kc(c,y){return Ic(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ws(f(c.Ea,c,y),Lc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new Wn(this,this.j,c);let W=this.o;if(this.U&&(W?(W=te(W),He(W,this.U)):W=this.U),this.u!==null||this.R||(U.J=W,W=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Rc(this,U,y),w=Kt(this.J),se(w,"RID",c),se(w,"CVER",22),this.G&&se(w,"X-HTTP-Session-Id",this.G),Oi(this,w),W&&(this.R?y="headers="+le(ko(W))+"&"+y:this.u&&Cs(w,this.u,W)),Ri(this.h,U),this.Ra&&se(w,"TYPE","init"),this.S?(se(w,"$req",y),se(w,"SID","null"),U.U=!0,xo(U,w,null)):xo(U,w,y),this.I=2}}else this.I==3&&(c?bc(this,c):this.i.length==0||Sc(this.h)||bc(this))};function bc(c,y){var w;y?w=y.l:w=c.V++;const A=Kt(c.J);se(A,"SID",c.M),se(A,"RID",w),se(A,"AID",c.K),Oi(c,A),c.u&&c.o&&Cs(A,c.u,c.o),w=new Wn(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Rc(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ri(c.h,w),xo(w,A,y)}function Oi(c,y){c.H&&ce(c.H,function(w,A){se(y,A,w)}),c.l&&ce({},function(w,A){se(y,A,w)})}function Rc(c,y,w){w=Math.min(c.i.length,w);const A=c.l?f(c.l.Ka,c.l,c):null;e:{var U=c.i;let _e=-1;for(;;){const je=["count="+w];_e==-1?w>0?(_e=U[0].g,je.push("ofs="+_e)):_e=0:je.push("ofs="+_e);let Be=!0;for(let ct=0;ct<w;ct++){var W=U[ct].g;const bn=U[ct].map;if(W-=_e,W<0)_e=Math.max(0,U[ct].g-100),Be=!1;else try{W="req"+W+"_"||"";try{var ee=bn instanceof Map?bn:Object.entries(bn);for(const[Gn,Rn]of ee){let hi=Rn;u(Rn)&&(hi=yo(Rn)),je.push(W+Gn+"="+encodeURIComponent(hi))}}catch(Gn){throw je.push(W+"type="+encodeURIComponent("_badmap")),Gn}}catch{A&&A(bn)}}if(Be){ee=je.join("&");break e}}ee=void 0}return c=c.i.splice(0,w),y.G=c,ee}function _l(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;q||S(),Z||(q(),Z=!0),N.add(y,c),c.A=0}}function vl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ws(f(c.Da,c),Lc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Ro(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ws(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),bo(this),Ro(this))};function wl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Ro(c){c.g=new Wn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Kt(c.na);se(y,"RID","rpc"),se(y,"SID",c.M),se(y,"AID",c.K),se(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&se(y,"TO",c.ia),se(y,"TYPE","xmlhttp"),Oi(c,y),c.u&&c.o&&Cs(y,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=Ge(Kt(y)),w.u=null,w.R=!0,bi(w,c)}t.Va=function(){this.C!=null&&(this.C=null,bo(this),vl(this),It(19))};function Lo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function _n(c,y){var w=null;if(c.g==y){Lo(c),wl(c),c.g=null;var A=2}else if(Ps(c.h,y))w=y.G,cl(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var U=c.D;A=vo(),St(A,new yc(A,w)),ui(c)}else _l(c);else if(U=y.m,U==3||U==0&&y.X>0||!(A==1&&kc(c,y)||A==2&&vl(c)))switch(w&&w.length>0&&(y=c.h,y.i=y.i.concat(w)),U){case 1:ci(c,5);break;case 4:ci(c,10);break;case 3:ci(c,6);break;default:ci(c,2)}}}function Lc(c,y){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*y}function ci(c,y){if(c.j.info("Error code "+y),y==2){var w=f(c.bb,c),A=c.Ua;const U=!A;A=new Ve(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Cn(A,"https"),Ge(A),U?Ao(A.toString(),w):Ac(A.toString(),w)}else It(2);c.I=0,c.l&&c.l.pa(y),qn(c),ln(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function qn(c){if(c.I=0,c.ja=[],c.l){const y=hl(c.h);(y.length!=0||c.i.length!=0)&&(R(c.ja,y),R(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function xl(c,y,w){var A=w instanceof Ve?Kt(w):new Ve(w);if(A.g!="")y&&(A.g=y+"."+A.g),An(A,A.u);else{var U=a.location;A=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const W=new Ve(null);A&&Cn(W,A),y&&(W.g=y),U&&An(W,U),w&&(W.h=w),A=W}return w=c.G,y=c.wa,w&&y&&se(A,w,y),se(A,"VER",c.ka),Oi(c,A),A}function Tl(c,y,w){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Fe(new ye({ab:w})):new Fe(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function No(){}t=No.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mo(){}Mo.prototype.g=function(c,y){return new jt(c,y)};function jt(c,y){Pt.call(this),this.g=new yl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!D(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new _r(this)}g(jt,Pt),jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){Se(this.g)},jt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=yo(c),c=w);y.i.push(new qf(y.Ya++,c)),y.I==3&&ui(y)},jt.prototype.N=function(){this.g.l=null,delete this.j,Se(this.g),delete this.g,jt.Z.N.call(this)};function El(c){vs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const w in y){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(El,vs);function Nc(){_o.call(this),this.status=1}g(Nc,_o);function _r(c){this.g=c}g(_r,No),_r.prototype.ra=function(){St(this.g,"a")},_r.prototype.qa=function(c){St(this.g,new El(c))},_r.prototype.pa=function(c){St(this.g,new Nc)},_r.prototype.oa=function(){St(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,LS=function(){return new Mo},RS=function(){return vo()},bS=ki,wg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wo.NO_ERROR=0,wo.TIMEOUT=8,wo.HTTP_ERROR=6,Nh=wo,_c.COMPLETE="complete",kS=_c,mc.EventType=hr,hr.OPEN="a",hr.CLOSE="b",hr.ERROR="c",hr.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Hl=mc,Fe.prototype.listenOnce=Fe.prototype.K,Fe.prototype.getLastError=Fe.prototype.Ha,Fe.prototype.getLastErrorCode=Fe.prototype.ya,Fe.prototype.getStatus=Fe.prototype.ca,Fe.prototype.getResponseJson=Fe.prototype.La,Fe.prototype.getResponseText=Fe.prototype.la,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Fa,AS=Fe}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const Xw="@firebase/firestore",Yw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new o_("@firebase/firestore");function $o(){return no.logLevel}function re(t,...e){if(no.logLevel<=Ae.DEBUG){const n=e.map(u_);no.debug(`Firestore (${Qa}): ${t}`,...n)}}function rr(t,...e){if(no.logLevel<=Ae.ERROR){const n=e.map(u_);no.error(`Firestore (${Qa}): ${t}`,...n)}}function Va(t,...e){if(no.logLevel<=Ae.WARN){const n=e.map(u_);no.warn(`Firestore (${Qa}): ${t}`,...n)}}function u_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,NS(t,i,n)}function NS(t,e,n){let i=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw rr(i),new Error(i)}function Ue(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||NS(e,r,i)}function xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class aV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lV{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new qs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string",31837,{l:i}),new MS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class uV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new uV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=dV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function ke(t,e){return t<e?-1:t>e?1:0}function xg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return Wp(r)===Wp(o)?ke(r,o):Wp(r)?1:-1}return ke(t.length,e.length)}const fV=55296,pV=57343;function Wp(t){const e=t.charCodeAt(0);return e>=fV&&e<=pV}function ja(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="__name__";class mi{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=mi.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return ke(e.length,n.length)}static compareSegments(e,n){const i=mi.isNumericId(e),r=mi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?mi.extractNumericId(e).compare(mi.extractNumericId(n)):xg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}}class nt extends mi{construct(e,n,i){return new nt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new nt(n)}static emptyPath(){return new nt([])}}const mV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends mi{construct(e,n,i){return new Mt(e,n,i)}static isValidIdentifier(e){return mV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e1}static keyField(){return new Mt([e1])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new he(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new he(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new he(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new he(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(nt.fromString(e))}static fromName(e){return new de(nt.fromString(e).popFirst(5))}static empty(){return new de(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t,e,n){if(!n)throw new he(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yV(t,e,n,i){if(e===!0&&i===!0)throw new he(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t1(t){if(!de.isDocumentKey(t))throw new he(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function h_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function wa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=h_(t);throw new he(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t,e){const n={typeString:t};return e&&(n.value=e),n}function nc(t,e){if(!DS(t))throw new he(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new he(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=-62135596800,i1=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*i1);return new Ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<n1)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i1}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nc(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-n1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:vt("string",Ye._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Ye(0,0))}static max(){return new we(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=-1;function _V(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=we.fromTimestamp(i===1e9?new Ye(n+1,0):new Ye(n,i));return new is(r,de.empty(),e)}function vV(t){return new is(t.readTime,t.key,Ou)}class is{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new is(we.min(),de.empty(),Ou)}static max(){return new is(we.max(),de.empty(),Ou)}}function wV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==xV)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function EV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ya(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=-1;function xf(t){return t==null}function Sd(t){return t===0&&1/t==-1/0}function PV(t){return typeof t=="number"&&Number.isInteger(t)&&!Sd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="";function SV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=r1(e)),e=IV(t.get(n),e);return r1(e)}function IV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case OS:n+="";break;default:n+=o}}return n}function r1(t){return t+OS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Nt.RED,this.left=r??Nt.EMPTY,this.right=o??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Nt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Nt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new o1(this.data.getIterator())}getIteratorFrom(e){return new o1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class o1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new ei([])}unionWith(e){let n=new Et(Mt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jS("Invalid base64 string: "+o):o}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const CV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=CV.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="server_timestamp",FS="__type__",BS="__previous_value__",US="__local_write_time__";function f_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[FS])==null?void 0:i.stringValue)===zS}function Tf(t){const e=t.mapValue.fields[BS];return f_(e)?Tf(e):e}function Vu(t){const e=rs(t.mapValue.fields[US].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Id="(default)";class ju{constructor(e,n){this.projectId=e,this.database=n||Id}static empty(){return new ju("","")}get isDefaultDatabase(){return this.database===Id}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="__type__",kV="__max__",ph={mapValue:{}},WS="__vector__",Cd="value";function os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?f_(t)?4:RV(t)?9007199254740991:bV(t)?10:11:me(28295,{value:t})}function Ii(t,e){if(t===e)return!0;const n=os(t);if(n!==os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vu(t).isEqual(Vu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=rs(r.timestampValue),u=rs(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return ss(r.bytesValue).isEqual(ss(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ht(r.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(r.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ht(r.integerValue)===ht(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ht(r.doubleValue),u=ht(o.doubleValue);return a===u?Sd(a)===Sd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return ja(t.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(s1(a)!==s1(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Ii(a[h],u[h])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function zu(t,e){return(t.values||[]).find(n=>Ii(n,e))!==void 0}function za(t,e){if(t===e)return 0;const n=os(t),i=os(e);if(n!==i)return ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ht(o.integerValue||o.doubleValue),h=ht(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return a1(t.timestampValue,e.timestampValue);case 4:return a1(Vu(t),Vu(e));case 5:return xg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=ss(o),h=ss(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=ke(u[f],h[f]);if(m!==0)return m}return ke(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=ke(ht(o.latitude),ht(a.latitude));return u!==0?u:ke(ht(o.longitude),ht(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return l1(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,T,R,b;const u=o.fields||{},h=a.fields||{},f=(v=u[Cd])==null?void 0:v.arrayValue,m=(T=h[Cd])==null?void 0:T.arrayValue,g=ke(((R=f==null?void 0:f.values)==null?void 0:R.length)||0,((b=m==null?void 0:m.values)==null?void 0:b.length)||0);return g!==0?g:l1(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===ph.mapValue&&a===ph.mapValue)return 0;if(o===ph.mapValue)return 1;if(a===ph.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const v=xg(h[g],m[g]);if(v!==0)return v;const T=za(u[h[g]],f[m[g]]);if(T!==0)return T}return ke(h.length,m.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function a1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=rs(t),i=rs(e),r=ke(n.seconds,i.seconds);return r!==0?r:ke(n.nanos,i.nanos)}function l1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=za(n[r],i[r]);if(o)return o}return ke(n.length,i.length)}function Fa(t){return Tg(t)}function Tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=rs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Tg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Tg(n.fields[a])}`;return r+"}"}(t.mapValue):me(61005,{value:t})}function Mh(t){switch(os(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tf(t);return e?16+Mh(e):16;case 5:return 2*t.stringValue.length;case 6:return ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Mh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return co(i.fields,(o,a)=>{r+=o.length+Mh(a)}),r}(t.mapValue);default:throw me(13486,{value:t})}}function Eg(t){return!!t&&"integerValue"in t}function p_(t){return!!t&&"arrayValue"in t}function u1(t){return!!t&&"nullValue"in t}function c1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dh(t){return!!t&&"mapValue"in t}function bV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[HS])==null?void 0:i.stringValue)===WS}function au(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return co(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=au(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=au(t.arrayValue.values[n]);return e}return{...t}}function RV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(n)}setAll(e){let n=Mt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=au(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Dh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){co(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Vn(au(this.value))}}function $S(t){const e=[];return co(t.fields,(n,i)=>{const r=new Mt([n]);if(Dh(i)){const o=$S(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new ei(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new $t(e,0,we.min(),we.min(),we.min(),Vn.empty(),0)}static newFoundDocument(e,n,i,r){return new $t(e,1,n,we.min(),i,r,0)}static newNoDocument(e,n){return new $t(e,2,n,we.min(),we.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,we.min(),we.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.position=e,this.inclusive=n}}function h1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=de.comparator(de.fromName(a.referenceValue),n.key):i=za(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function d1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n="asc"){this.field=e,this.dir=n}}function LV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{}class xt extends qS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new MV(e,n,i):n==="array-contains"?new VV(e,i):n==="in"?new jV(e,i):n==="not-in"?new zV(e,i):n==="array-contains-any"?new FV(e,i):new xt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new DV(e,i):new OV(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(za(n,this.value)):n!==null&&os(this.value)===os(n)&&this.matchesComparison(za(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends qS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ci(e,n)}matches(e){return GS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GS(t){return t.op==="and"}function ZS(t){return NV(t)&&GS(t)}function NV(t){for(const e of t.filters)if(e instanceof Ci)return!1;return!0}function Pg(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+Fa(t.value);if(ZS(t))return t.filters.map(e=>Pg(e)).join(",");{const e=t.filters.map(n=>Pg(n)).join(",");return`${t.op}(${e})`}}function KS(t,e){return t instanceof xt?function(i,r){return r instanceof xt&&i.op===r.op&&i.field.isEqual(r.field)&&Ii(i.value,r.value)}(t,e):t instanceof Ci?function(i,r){return r instanceof Ci&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&KS(a,r.filters[u]),!0):!1}(t,e):void me(19439)}function QS(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${Fa(n.value)}`}(t):t instanceof Ci?function(n){return n.op.toString()+" {"+n.getFilters().map(QS).join(" ,")+"}"}(t):"Filter"}class MV extends xt{constructor(e,n,i){super(e,n,i),this.key=de.fromName(i.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class DV extends xt{constructor(e,n){super(e,"in",n),this.keys=XS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OV extends xt{constructor(e,n){super(e,"not-in",n),this.keys=XS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>de.fromName(i.referenceValue))}class VV extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return p_(n)&&zu(n.arrayValue,this.value)}}class jV extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zu(this.value.arrayValue,n)}}class zV extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zu(this.value.arrayValue,n)}}class FV extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!p_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>zu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function f1(t,e=null,n=[],i=[],r=null,o=null,a=null){return new BV(t,e,n,i,r,o,a)}function m_(t){const e=xe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Pg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),xf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fa(i)).join(",")),e.Te=n}return e.Te}function g_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d1(t.startAt,e.startAt)&&d1(t.endAt,e.endAt)}function Sg(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function UV(t,e,n,i,r,o,a,u){return new Ef(t,e,n,i,r,o,a,u)}function y_(t){return new Ef(t)}function p1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HV(t){return t.collectionGroup!==null}function lu(t){const e=xe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Et(Mt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new kd(o,i))}),n.has(Mt.keyField().canonicalString())||e.Ie.push(new kd(Mt.keyField(),i))}return e.Ie}function wi(t){const e=xe(t);return e.Ee||(e.Ee=WV(e,lu(t))),e.Ee}function WV(t,e){if(t.limitType==="F")return f1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new kd(r.field,o)});const n=t.endAt?new Ad(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ad(t.startAt.position,t.startAt.inclusive):null;return f1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ig(t,e,n){return new Ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pf(t,e){return g_(wi(t),wi(e))&&t.limitType===e.limitType}function YS(t){return`${m_(wi(t))}|lt:${t.limitType}`}function qo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>QS(r)).join(", ")}]`),xf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Fa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Fa(r)).join(",")),`Target(${i})`}(wi(t))}; limitType=${t.limitType})`}function Sf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):de.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of lu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=h1(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,lu(i),r)||i.endAt&&!function(a,u,h){const f=h1(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,lu(i),r))}(t,e)}function $V(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JS(t){return(e,n)=>{let i=!1;for(const r of lu(t)){const o=qV(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function qV(t,e,n){const i=t.field.isKeyField()?de.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?za(h,f):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return VS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=new ot(de.comparator);function sr(){return GV}const eI=new ot(de.comparator);function Wl(...t){let e=eI;for(const n of t)e=e.insert(n.key,n);return e}function tI(t){let e=eI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Us(){return uu()}function nI(){return uu()}function uu(){return new ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZV=new ot(de.comparator),KV=new Et(de.comparator);function be(...t){let e=KV;for(const n of t)e=e.add(n);return e}const QV=new Et(ke);function XV(){return QV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function iI(t){return{integerValue:""+t}}function YV(t,e){return PV(e)?iI(e):__(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this._=void 0}}function JV(t,e,n){return t instanceof bd?function(r,o){const a={fields:{[FS]:{stringValue:zS},[US]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&f_(o)&&(o=Tf(o)),o&&(a.fields[BS]=o),{mapValue:a}}(n,e):t instanceof Fu?sI(t,e):t instanceof Bu?oI(t,e):function(r,o){const a=rI(r,o),u=m1(a)+m1(r.Ae);return Eg(a)&&Eg(r.Ae)?iI(u):__(r.serializer,u)}(t,e)}function e4(t,e,n){return t instanceof Fu?sI(t,e):t instanceof Bu?oI(t,e):n}function rI(t,e){return t instanceof Rd?function(i){return Eg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class bd extends If{}class Fu extends If{constructor(e){super(),this.elements=e}}function sI(t,e){const n=aI(e);for(const i of t.elements)n.some(r=>Ii(r,i))||n.push(i);return{arrayValue:{values:n}}}class Bu extends If{constructor(e){super(),this.elements=e}}function oI(t,e){let n=aI(e);for(const i of t.elements)n=n.filter(r=>!Ii(r,i));return{arrayValue:{values:n}}}class Rd extends If{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function m1(t){return ht(t.integerValue||t.doubleValue)}function aI(t){return p_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function t4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Fu&&r instanceof Fu||i instanceof Bu&&r instanceof Bu?ja(i.elements,r.elements,Ii):i instanceof Rd&&r instanceof Rd?Ii(i.Ae,r.Ae):i instanceof bd&&r instanceof bd}(t.transform,e.transform)}class n4{constructor(e,n){this.version=e,this.transformResults=n}}class Xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cf{}function lI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cI(t.key,Xi.none()):new ic(t.key,t.data,Xi.none());{const n=t.data,i=Vn.empty();let r=new Et(Mt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new fo(t.key,i,new ei(r.toArray()),Xi.none())}}function i4(t,e,n){t instanceof ic?function(r,o,a){const u=r.value.clone(),h=y1(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof fo?function(r,o,a){if(!Oh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=y1(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(uI(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function cu(t,e,n,i){return t instanceof ic?function(o,a,u,h){if(!Oh(o.precondition,a))return u;const f=o.value.clone(),m=_1(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof fo?function(o,a,u,h){if(!Oh(o.precondition,a))return u;const f=_1(o.fieldTransforms,h,a),m=a.data;return m.setAll(uI(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Oh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function r4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=rI(i.transform,r||null);o!=null&&(n===null&&(n=Vn.empty()),n.set(i.field,o))}return n||null}function g1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ja(i,r,(o,a)=>t4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ic extends Cf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fo extends Cf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function uI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function y1(t,e,n){const i=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,e4(a,u,n[r]))}return i}function _1(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,JV(o,a,e))}return i}class cI extends Cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s4 extends Cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&i4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=cu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=cu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=nI();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=lI(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(we.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,(n,i)=>g1(n,i))&&ja(this.baseMutations,e.baseMutations,(n,i)=>g1(n,i))}}class v_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ue(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return ZV}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new v_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Me;function u4(t){switch(t){case X.OK:return me(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function hI(t){if(t===void 0)return rr("GRPC error has no .code"),X.UNKNOWN;switch(t){case gt.OK:return X.OK;case gt.CANCELLED:return X.CANCELLED;case gt.UNKNOWN:return X.UNKNOWN;case gt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case gt.INTERNAL:return X.INTERNAL;case gt.UNAVAILABLE:return X.UNAVAILABLE;case gt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case gt.NOT_FOUND:return X.NOT_FOUND;case gt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case gt.ABORTED:return X.ABORTED;case gt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case gt.DATA_LOSS:return X.DATA_LOSS;default:return me(39323,{code:t})}}(Me=gt||(gt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new Qr([4294967295,4294967295],0);function v1(t){const e=c4().encode(t),n=new CS;return n.update(e),new Uint8Array(n.digest())}function w1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qr([n,i],0),new Qr([r,o],0)]}class w_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new $l(`Invalid padding: ${n}`);if(i<0)throw new $l(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new $l(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Qr.fromNumber(i)));return r.compare(h4)===1&&(r=new Qr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=v1(e),[i,r]=w1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new w_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=v1(e),[i,r]=w1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Af(we.min(),r,new ot(ke),sr(),be())}}class rc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new rc(i,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class dI{constructor(e,n){this.targetId=e,this.Ce=n}}class fI{constructor(e,n,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class x1{constructor(){this.ve=0,this.Fe=T1(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),n=be(),i=be();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:me(38017,{changeType:o})}}),new rc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=T1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class d4{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=mh(),this.He=mh(),this.Ye=new ot(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Sg(o))if(i===0){const a=new de(o.path);this.et(n,a,$t.newNoDocument(a,we.min()))}else Ue(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=ss(i).toUint8Array()}catch(h){if(h instanceof jS)return Va("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new w_(a,r,o)}catch(h){return Va(h instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Sg(u.target)){const h=new de(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,$t.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=be();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Af(e,n,this.Ye,this.je,i);return this.je=sr(),this.Je=mh(),this.He=mh(),this.Ye=new ot(ke),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new x1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Et(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Et(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new x1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function mh(){return new ot(de.comparator)}function T1(){return new ot(de.comparator)}const f4={asc:"ASCENDING",desc:"DESCENDING"},p4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m4={and:"AND",or:"OR"};class g4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cg(t,e){return t.useProto3Json||xf(e)?e:{value:e}}function Ld(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function y4(t,e){return Ld(t,e.toTimestamp())}function xi(t){return Ue(!!t,49232),we.fromTimestamp(function(n){const i=rs(n);return new Ye(i.seconds,i.nanos)}(t))}function x_(t,e){return Ag(t,e).canonicalString()}function Ag(t,e){const n=function(r){return new nt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mI(t){const e=nt.fromString(t);return Ue(wI(e),10190,{key:e.toString()}),e}function kg(t,e){return x_(t.databaseId,e.path)}function $p(t,e){const n=mI(e);if(n.get(1)!==t.databaseId.projectId)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(yI(n))}function gI(t,e){return x_(t.databaseId,e)}function _4(t){const e=mI(t);return e.length===4?nt.emptyPath():yI(e)}function bg(t){return new nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yI(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function E1(t,e,n){return{name:kg(t,e),fields:n.value.mapValue.fields}}function v4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:me(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Ue(m===void 0||typeof m=="string",58123),Vt.fromBase64String(m||"")):(Ue(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Vt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?X.UNKNOWN:hI(f.code);return new he(m,f.message||"")}(a);n=new fI(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=$p(t,i.document.name),o=xi(i.document.updateTime),a=i.document.createTime?xi(i.document.createTime):we.min(),u=new Vn({mapValue:{fields:i.document.fields}}),h=$t.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Vh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=$p(t,i.document),o=i.readTime?xi(i.readTime):we.min(),a=$t.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Vh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=$p(t,i.document),o=i.removedTargetIds||[];n=new Vh([],o,r,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new l4(r,o),u=i.targetId;n=new dI(u,a)}}return n}function w4(t,e){let n;if(e instanceof ic)n={update:E1(t,e.key,e.value)};else if(e instanceof cI)n={delete:kg(t,e.key)};else if(e instanceof fo)n={update:E1(t,e.key,e.data),updateMask:k4(e.fieldMask)};else{if(!(e instanceof s4))return me(16599,{Vt:e.type});n={verify:kg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof bd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Fu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Bu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Rd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw me(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:y4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)}(t,e.precondition)),n}function x4(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?xi(r.updateTime):xi(o);return a.isEqual(we.min())&&(a=xi(o)),new n4(a,r.transformResults||[])}(n,e))):[]}function T4(t,e){return{documents:[gI(t,e.path)]}}function E4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=gI(t,r);const o=function(f){if(f.length!==0)return vI(Ci.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(v){return{field:Go(v.field),direction:I4(v.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Cg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function P4(t){let e=_4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ue(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const v=_I(g);return v instanceof Ci&&ZS(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(R){return new kd(Zo(R.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(g){let v;return v=typeof g=="object"?g.value:g,xf(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(g){const v=!!g.before,T=g.values||[];return new Ad(T,v)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const v=!g.before,T=g.values||[];return new Ad(T,v)}(n.endAt)),UV(e,r,a,o,u,"F",h,f)}function S4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _I(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Zo(n.unaryFilter.field);return xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Zo(n.unaryFilter.field);return xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zo(n.unaryFilter.field);return xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zo(n.unaryFilter.field);return xt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return xt.create(Zo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ci.create(n.compositeFilter.filters.map(i=>_I(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function I4(t){return f4[t]}function C4(t){return p4[t]}function A4(t){return m4[t]}function Go(t){return{fieldPath:t.canonicalString()}}function Zo(t){return Mt.fromServerFormat(t.fieldPath)}function vI(t){return t instanceof xt?function(n){if(n.op==="=="){if(c1(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(u1(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(c1(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(u1(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:C4(n.op),value:n.value}}}(t):t instanceof Ci?function(n){const i=n.getFilters().map(r=>vI(r));return i.length===1?i[0]:{compositeFilter:{op:A4(n.op),filters:i}}}(t):me(54877,{filter:t})}function k4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,i,r,o=we.min(),a=we.min(),u=Vt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.yt=e}}function R4(t){const e=P4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ig(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.Cn=new N4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(is.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(is.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class N4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Et(nt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Et(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xI=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(xI,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ba(0)}static cr(){return new Ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="LruGarbageCollector",M4=1048576;function I1([t,e],[n,i]){const r=ke(t,n);return r===0?ke(e,i):r}class D4{constructor(e){this.Ir=e,this.buffer=new Et(I1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();I1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class O4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(S1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ya(n)?re(S1,"Ignoring IndexedDB error during garbage collection: ",n):await Xa(n)}await this.Vr(3e5)})}}class V4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(wf.ce);const i=new D4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(P1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),$o()<=Ae.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function j4(t,e){return new V4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.changes=new ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&cu(i.mutation,r,ei.empty(),Ye.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,n,i=be()){const r=Us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Wl();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Us();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,be()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=sr();const a=uu(),u=function(){return uu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof fo)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),cu(m.mutation,f,m.mutation.getFieldMask(),Ye.now())):a.set(f.key,ei.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new F4(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=uu();let r=new ot((a,u)=>a-u),o=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||ei.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||be()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=nI();m.forEach(v=>{if(!o.has(v)){const T=lI(n.get(v),i.get(v));T!==null&&g.set(v,T),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return de.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(Us());let u=Ou,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,be())).next(m=>({batchId:u,changes:tI(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(i=>{let r=Wl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Wl();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,v){return new Ef(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,$t.newInvalidDocument(m)))});let u=Wl();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&cu(m.mutation,f,ei.empty(),Ye.now()),Sf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:xi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:R4(r.bundledQuery),readTime:xi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this.overlays=new ot(de.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Us();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=Us(),o=n.length+1,a=new de(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new ot((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Us(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Us(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new a4(n,i));let o=this.qr.get(n);o===void 0&&(o=be(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.Qr=new Et(At.$r),this.Ur=new Et(At.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new At(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new At(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new de(new nt([])),i=new At(n,e),r=new At(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new de(new nt([])),i=new At(n,e),r=new At(n,e+1);let o=be();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new At(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return de.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Et(At.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new o4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new At(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?d_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new At(n,0),r=new At(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Et(ke);return n.forEach(r=>{const o=new At(r,0),a=new At(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;de.isDocumentKey(o)||(o=o.child(""));const a=new At(new de(o),0);let u=new Et(ke);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new At(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new At(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e){this.ri=e,this.docs=function(){return new ot(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let i=sr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():$t.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=sr();const a=n.path,u=new de(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||wV(vV(m),i)<=0||(r.has(m.key)||Sf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){me(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new G4(this)}getSize(e){return K.resolve(this.size)}}class G4 extends z4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.persistence=e,this.si=new ho(n=>m_(n),g_),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new T_,this.targetCount=0,this.ai=Ba.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ba(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n){this.ui={},this.overlays={},this.ci=new wf(0),this.li=!1,this.li=!0,this.hi=new W4,this.referenceDelegate=e(this),this.Pi=new Z4(this),this.indexManager=new L4,this.remoteDocumentCache=function(r){return new q4(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new b4(n),this.Ii=new U4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new H4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new $4(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new K4(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class K4 extends TV{constructor(e){super(),this.currentSequenceNumber=e}}class E_{constructor(e){this.persistence=e,this.Ri=new T_,this.Vi=null}static mi(e){return new E_(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=de.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Nd{constructor(e,n){this.persistence=e,this.pi=new ho(i=>SV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=j4(this,n)}static mi(e,n){return new Nd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,we.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=be(),r=be();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new P_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return UD()?8:EV(Gt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new Q4;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?($o()<=Ae.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):($o()<=Ae.DEBUG&&re("QueryEngine","Query:",qo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?($o()<=Ae.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wi(n))):K.resolve())}ys(e,n){if(p1(n))return K.resolve(null);let i=wi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ig(n,null,"F"),i=wi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=be(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Ig(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return p1(n)||r.isEqual(we.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):($o()<=Ae.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qo(n)),this.vs(e,a,n,_V(r,Ou)).next(u=>u))})}Ds(e,n){let i=new Et(JS(e));return n.forEach((r,o)=>{Sf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return $o()<=Ae.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",qo(n)),this.ps.getDocumentsMatchingQuery(e,n,is.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="LocalStore",Y4=3e8;class J4{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new ot(ke),this.xs=new ho(o=>m_(o),g_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function e5(t,e,n,i){return new J4(t,e,n,i)}async function EI(t,e){const n=xe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=be();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function t5(t,e){const n=xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,v=g.keys();let T=K.resolve();return v.forEach(R=>{T=T.next(()=>m.getEntry(h,R)).next(b=>{const z=f.docVersions.get(R);Ue(z!==null,48541),b.version.compareTo(z)<0&&(g.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),m.addEntry(b)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=be();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function PI(t){const e=xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function n5(t,e){const n=xe(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const v=r.get(g);if(!v)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Vt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(b,z,C){return b.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Y4?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(v,T,m)&&u.push(n.Pi.updateTargetData(o,T))});let h=sr(),f=be();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(i5(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(we.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function i5(t,e,n){let i=be(),r=be();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=sr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(we.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):re(S_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function r5(t,e){const n=xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=d_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function s5(t,e){const n=xe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Or(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Rg(t,e,n){const i=xe(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Ya(a))throw a;re(S_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function C1(t,e,n){const i=xe(t);let r=we.min(),o=be();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=xe(h),v=g.xs.get(m);return v!==void 0?K.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,m)}(i,a,wi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:we.min(),n?o:be())).next(u=>(o5(i,$V(e),u),{documents:u,Qs:o})))}function o5(t,e,n){let i=t.Os.get(e)||we.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class A1{constructor(){this.activeTargetIds=XV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a5{constructor(){this.Mo=new A1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new A1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="ConnectivityMonitor";class b1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(k1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(k1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh=null;function Lg(){return gh===null?gh=function(){return 268435456+Math.round(2147483648*Math.random())}():gh++,"0x"+gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="RestConnection",u5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Id?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Lg(),u=this.zo(e,n.toUriEncodedString());re(qp,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=Za(f);return this.Jo(e,u,h,i,m).then(g=>(re(qp,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Va(qp,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=u5[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class d5 extends c5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Lg();return new Promise((u,h)=>{const f=new AS;f.setWithCredentials(!0),f.listenOnce(kS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Nh.NO_ERROR:const g=f.getResponseJson();re(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Nh.TIMEOUT:re(Bt,`RPC '${e}' ${a} timed out`),h(new he(X.DEADLINE_EXCEEDED,"Request time out"));break;case Nh.HTTP_ERROR:const v=f.getStatus();if(re(Bt,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T==null?void 0:T.error;if(R&&R.status&&R.message){const b=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(E)>=0?E:X.UNKNOWN}(R.status);h(new he(b,R.message))}else h(new he(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new he(X.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{re(Bt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);re(Bt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Lg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LS(),u=RS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");re(Bt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let v=!1,T=!1;const R=new h5({Yo:z=>{T?re(Bt,`Not sending because RPC '${e}' stream ${r} is closed:`,z):(v||(re(Bt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),v=!0),re(Bt,`RPC '${e}' stream ${r} sending:`,z),g.send(z))},Zo:()=>g.close()}),b=(z,C,E)=>{z.listen(C,I=>{try{E(I)}catch(F){setTimeout(()=>{throw F},0)}})};return b(g,Hl.EventType.OPEN,()=>{T||(re(Bt,`RPC '${e}' stream ${r} transport opened.`),R.o_())}),b(g,Hl.EventType.CLOSE,()=>{T||(T=!0,re(Bt,`RPC '${e}' stream ${r} transport closed`),R.a_(),this.E_(g))}),b(g,Hl.EventType.ERROR,z=>{T||(T=!0,Va(Bt,`RPC '${e}' stream ${r} transport errored. Name:`,z.name,"Message:",z.message),R.a_(new he(X.UNAVAILABLE,"The operation could not be completed")))}),b(g,Hl.EventType.MESSAGE,z=>{var C;if(!T){const E=z.data[0];Ue(!!E,16349);const I=E,F=(I==null?void 0:I.error)||((C=I[0])==null?void 0:C.error);if(F){re(Bt,`RPC '${e}' stream ${r} received error:`,F);const q=F.status;let Z=function(k){const M=gt[k];if(M!==void 0)return hI(M)}(q),N=F.message;Z===void 0&&(Z=X.INTERNAL,N="Unknown error status: "+q+" with message "+F.message),T=!0,R.a_(new he(Z,N)),g.close()}else re(Bt,`RPC '${e}' stream ${r} received:`,E),R.u_(E)}}),b(u,bS.STAT_EVENT,z=>{z.stat===wg.PROXY?re(Bt,`RPC '${e}' stream ${r} detected buffering proxy`):z.stat===wg.NOPROXY&&re(Bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t){return new g4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="PersistentStream";class II{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new he(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(R1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(R1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f5 extends II{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=v4(this.serializer,e),i=function(o){if(!("targetChange"in o))return we.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?we.min():a.readTime?xi(a.readTime):we.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=bg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Sg(h)?{documents:T4(o,h)}:{query:E4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=pI(o,a.resumeToken);const f=Cg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(we.min())>0){u.readTime=Ld(o,a.snapshotVersion.toTimestamp());const f=Cg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=S4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=bg(this.serializer),n.removeTarget=e,this.q_(n)}}class p5 extends II{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=x4(e.writeResults,e.commitTime),i=xi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=bg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>w4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{}class g5 extends m5{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Ag(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Ag(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class y5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="RemoteStore";class _5{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{po(this)&&(re(io,"Restarting streams for network reachability change."),await async function(h){const f=xe(h);f.Ea.add(4),await sc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await bf(f)}(this))})}),this.Ra=new y5(i,r)}}async function bf(t){if(po(t))for(const e of t.da)await e(!0)}async function sc(t){for(const e of t.da)await e(!1)}function CI(t,e){const n=xe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),k_(n)?A_(n):Ja(n).O_()&&C_(n,e))}function I_(t,e){const n=xe(t),i=Ja(n);n.Ia.delete(e),i.O_()&&AI(n,e),n.Ia.size===0&&(i.O_()?i.L_():po(n)&&n.Ra.set("Unknown"))}function C_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ja(t).Y_(e)}function AI(t,e){t.Va.Ue(e),Ja(t).Z_(e)}function A_(t){t.Va=new d4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ja(t).start(),t.Ra.ua()}function k_(t){return po(t)&&!Ja(t).x_()&&t.Ia.size>0}function po(t){return xe(t).Ea.size===0}function kI(t){t.Va=void 0}async function v5(t){t.Ra.set("Online")}async function w5(t){t.Ia.forEach((e,n)=>{C_(t,e)})}async function x5(t,e){kI(t),k_(t)?(t.Ra.ha(e),A_(t)):t.Ra.set("Unknown")}async function T5(t,e,n){if(t.Ra.set("Online"),e instanceof fI&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){re(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Md(t,i)}else if(e instanceof Vh?t.Va.Ze(e):e instanceof dI?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const i=await PI(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Vt.EMPTY_BYTE_STRING,m.snapshotVersion)),AI(o,h);const g=new Or(m.target,h,f,m.sequenceNumber);C_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){re(io,"Failed to raise snapshot:",i),await Md(t,i)}}async function Md(t,e,n){if(!Ya(e))throw e;t.Ea.add(1),await sc(t),t.Ra.set("Offline"),n||(n=()=>PI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(io,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await bf(t)})}function bI(t,e){return e().catch(n=>Md(t,n,e))}async function Rf(t){const e=xe(t),n=as(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:d_;for(;E5(e);)try{const r=await r5(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,P5(e,r)}catch(r){await Md(e,r)}RI(e)&&LI(e)}function E5(t){return po(t)&&t.Ta.length<10}function P5(t,e){t.Ta.push(e);const n=as(t);n.O_()&&n.X_&&n.ea(e.mutations)}function RI(t){return po(t)&&!as(t).x_()&&t.Ta.length>0}function LI(t){as(t).start()}async function S5(t){as(t).ra()}async function I5(t){const e=as(t);for(const n of t.Ta)e.ea(n.mutations)}async function C5(t,e,n){const i=t.Ta.shift(),r=v_.from(i,e,n);await bI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Rf(t)}async function A5(t,e){e&&as(t).X_&&await async function(i,r){if(function(a){return u4(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();as(i).B_(),await bI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Rf(i)}}(t,e),RI(t)&&LI(t)}async function L1(t,e){const n=xe(t);n.asyncQueue.verifyOperationInProgress(),re(io,"RemoteStore received new credentials");const i=po(n);n.Ea.add(3),await sc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await bf(n)}async function k5(t,e){const n=xe(t);e?(n.Ea.delete(2),await bf(n)):e||(n.Ea.add(2),await sc(n),n.Ra.set("Unknown"))}function Ja(t){return t.ma||(t.ma=function(n,i,r){const o=xe(n);return o.sa(),new f5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:v5.bind(null,t),t_:w5.bind(null,t),r_:x5.bind(null,t),H_:T5.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),k_(t)?A_(t):t.Ra.set("Unknown")):(await t.ma.stop(),kI(t))})),t.ma}function as(t){return t.fa||(t.fa=function(n,i,r){const o=xe(n);return o.sa(),new p5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:S5.bind(null,t),r_:A5.bind(null,t),ta:I5.bind(null,t),na:C5.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Rf(t)):(await t.fa.stop(),t.Ta.length>0&&(re(io,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new b_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R_(t,e){if(rr("AsyncQueue",`${e}: ${t}`),Ya(t))return new he(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{static emptySet(e){return new xa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||de.comparator(n.key,i.key):(n,i)=>de.comparator(n.key,i.key),this.keyedMap=Wl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new xa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.ga=new ot(de.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ua{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ua(e,n,xa.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class R5{constructor(){this.queries=M1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=xe(n),o=r.queries;r.queries=M1(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new he(X.ABORTED,"Firestore shutting down"))}}function M1(){return new ho(t=>YS(t),Pf)}async function L5(t,e){const n=xe(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new b5,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=R_(a,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&L_(n)}async function N5(t,e){const n=xe(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function M5(t,e){const n=xe(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&L_(n)}function D5(t,e,n){const i=xe(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function L_(t){t.Ca.forEach(e=>{e.next()})}var Ng,D1;(D1=Ng||(Ng={})).Ma="default",D1.Cache="cache";class O5{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ua(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ng.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.key=e}}class MI{constructor(e){this.key=e}}class V5{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=JS(e),this.tu=new xa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new N1,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const v=r.get(m),T=Sf(this.query,g)?g:null,R=!!v&&this.mutatedKeys.has(v.key),b=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let z=!1;v&&T?v.data.isEqual(T.data)?R!==b&&(i.track({type:3,doc:T}),z=!0):this.su(v,T)||(i.track({type:2,doc:T}),z=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),z=!0):v&&!T&&(i.track({type:1,doc:v}),z=!0,(h||f)&&(u=!0)),z&&(T?(a=a.add(T),o=b?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(T,R){const b=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:z})}};return b(T)-b(R)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new Ua(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new N1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new MI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new NI(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const N_="SyncEngine";class j5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class z5{constructor(e){this.key=e,this.hu=!1}}class F5{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ho(u=>YS(u),Pf),this.Iu=new Map,this.Eu=new Set,this.du=new ot(de.comparator),this.Au=new Map,this.Ru=new T_,this.Vu={},this.mu=new Map,this.fu=Ba.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function B5(t,e,n=!0){const i=FI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await DI(i,e,n,!0),r}async function U5(t,e){const n=FI(t);await DI(n,e,!0,!1)}async function DI(t,e,n,i){const r=await s5(t.localStore,wi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await H5(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&CI(t.remoteStore,r),u}async function H5(t,e,n,i,r){t.pu=(g,v,T)=>async function(b,z,C,E){let I=z.view.ru(C);I.Cs&&(I=await C1(b.localStore,z.query,!1).then(({documents:N})=>z.view.ru(N,I)));const F=E&&E.targetChanges.get(z.targetId),q=E&&E.targetMismatches.get(z.targetId)!=null,Z=z.view.applyChanges(I,b.isPrimaryClient,F,q);return V1(b,z.targetId,Z.au),Z.snapshot}(t,g,v,T);const o=await C1(t.localStore,e,!0),a=new V5(e,o.Qs),u=a.ru(o.documents),h=rc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);V1(t,n,f.au);const m=new j5(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function W5(t,e,n){const i=xe(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Pf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Rg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&I_(i.remoteStore,r.targetId),Mg(i,r.targetId)}).catch(Xa)):(Mg(i,r.targetId),await Rg(i.localStore,r.targetId,!0))}async function $5(t,e){const n=xe(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),I_(n.remoteStore,i.targetId))}async function q5(t,e,n){const i=J5(t);try{const r=await function(a,u){const h=xe(a),f=Ye.now(),m=u.reduce((T,R)=>T.add(R.key),be());let g,v;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let R=sr(),b=be();return h.Ns.getEntries(T,m).next(z=>{R=z,R.forEach((C,E)=>{E.isValidDocument()||(b=b.add(C))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,R)).next(z=>{g=z;const C=[];for(const E of u){const I=r4(E,g.get(E.key).overlayedDocument);I!=null&&C.push(new fo(E.key,I,$S(I.value.mapValue),Xi.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,C,u)}).next(z=>{v=z;const C=z.applyToLocalDocumentSet(g,b);return h.documentOverlayCache.saveOverlays(T,z.batchId,C)})}).then(()=>({batchId:v.batchId,changes:tI(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new ot(ke)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await oc(i,r.changes),await Rf(i.remoteStore)}catch(r){const o=R_(r,"Failed to persist write");n.reject(o)}}async function OI(t,e){const n=xe(t);try{const i=await n5(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Ue(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Ue(a.hu,14607):r.removedDocuments.size>0&&(Ue(a.hu,42227),a.hu=!1))}),await oc(n,i,e)}catch(i){await Xa(i)}}function O1(t,e,n){const i=xe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=xe(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const v of g.Sa)v.va(u)&&(f=!0)}),f&&L_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function G5(t,e,n){const i=xe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new ot(de.comparator);a=a.insert(o,$t.newNoDocument(o,we.min()));const u=be().add(o),h=new Af(we.min(),new Map,new ot(ke),a,u);await OI(i,h),i.du=i.du.remove(o),i.Au.delete(e),M_(i)}else await Rg(i.localStore,e,!1).then(()=>Mg(i,e,n)).catch(Xa)}async function Z5(t,e){const n=xe(t),i=e.batch.batchId;try{const r=await t5(n.localStore,e);jI(n,i,null),VI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await oc(n,r)}catch(r){await Xa(r)}}async function K5(t,e,n){const i=xe(t);try{const r=await function(a,u){const h=xe(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(Ue(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);jI(i,e,n),VI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await oc(i,r)}catch(r){await Xa(r)}}function VI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function jI(t,e,n){const i=xe(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Mg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||zI(t,i)})}function zI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(I_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),M_(t))}function V1(t,e,n){for(const i of n)i instanceof NI?(t.Ru.addReference(i.key,e),Q5(t,i)):i instanceof MI?(re(N_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||zI(t,i.key)):me(19791,{wu:i})}function Q5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(re(N_,"New document in limbo: "+n),t.Eu.add(i),M_(t))}function M_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new de(nt.fromString(e)),i=t.fu.next();t.Au.set(i,new z5(n)),t.du=t.du.insert(n,i),CI(t.remoteStore,new Or(wi(y_(n.path)),i,"TargetPurposeLimboResolution",wf.ce))}}async function oc(t,e,n){const i=xe(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=P_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=xe(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,v=>K.forEach(v.Es,T=>m.persistence.referenceDelegate.addReference(g,v.targetId,T)).next(()=>K.forEach(v.ds,T=>m.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))}catch(g){if(!Ya(g))throw g;re(S_,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const T=m.Ms.get(v),R=T.snapshotVersion,b=T.withLastLimboFreeSnapshotVersion(R);m.Ms=m.Ms.insert(v,b)}}}(i.localStore,o))}async function X5(t,e){const n=xe(t);if(!n.currentUser.isEqual(e)){re(N_,"User change. New user:",e.toKey());const i=await EI(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new he(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await oc(n,i.Ls)}}function Y5(t,e){const n=xe(t),i=n.Au.get(e);if(i&&i.hu)return be().add(i.key);{let r=be();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function FI(t){const e=xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G5.bind(null,e),e.Pu.H_=M5.bind(null,e.eventManager),e.Pu.yu=D5.bind(null,e.eventManager),e}function J5(t){const e=xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K5.bind(null,e),e}class Dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return e5(this.persistence,new X4,e.initialUser,this.serializer)}Cu(e){return new TI(E_.mi,this.serializer)}Du(e){return new a5}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dd.provider={build:()=>new Dd};class e3 extends Dd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof Nd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new O4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new TI(i=>Nd.mi(i,n),this.serializer)}}class Dg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>O1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=X5.bind(null,this.syncEngine),await k5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R5}()}createDatastore(e){const n=kf(e.databaseInfo.databaseId),i=function(o){return new d5(o)}(e.databaseInfo);return function(o,a,u,h){return new g5(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new _5(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>O1(this.syncEngine,n,0),function(){return b1.v()?new b1:new l5}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new F5(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=xe(r);re(io,"RemoteStore shutting down."),o.Ea.add(5),await sc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Dg.provider={build:()=>new Dg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class n3{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ht.UNAUTHENTICATED,this.clientId=c_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{re(ls,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(re(ls,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=R_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Zp(t,e){t.asyncQueue.verifyOperationInProgress(),re(ls,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await EI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function j1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await i3(t);re(ls,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>L1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>L1(e.remoteStore,r)),t._onlineComponents=e}async function i3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(ls,"Using user provided OfflineComponentProvider");try{await Zp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Va("Error using user provided cache. Falling back to memory cache: "+n),await Zp(t,new Dd)}}else re(ls,"Using default OfflineComponentProvider"),await Zp(t,new e3(void 0));return t._offlineComponents}async function BI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(ls,"Using user provided OnlineComponentProvider"),await j1(t,t._uninitializedComponentsProvider._online)):(re(ls,"Using default OnlineComponentProvider"),await j1(t,new Dg))),t._onlineComponents}function r3(t){return BI(t).then(e=>e.syncEngine)}async function z1(t){const e=await BI(t),n=e.eventManager;return n.onListen=B5.bind(null,e.syncEngine),n.onUnlisten=W5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$5.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="firestore.googleapis.com",B1=!0;class U1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HI,this.ssl=B1}else this.host=e.host,this.ssl=e.ssl??B1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M4)throw new he(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class D_{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new oV;switch(i.type){case"firstParty":return new cV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=F1.get(n);i&&(re("ComponentProvider","Removing Datastore"),F1.delete(n),i.terminate())}(this),Promise.resolve()}}function s3(t,e,n,i={}){var f;t=wa(t,D_);const r=Za(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(vS(`https://${u}`),wS("Firestore",!0)),o.host!==HI&&o.host!==u&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!eo(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Ht.MOCK_USER;else{m=ND(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new he(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ht(v)}t._authCredentials=new aV(new MS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lf(this.firestore,e,this._query)}}class bt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(nc(n,bt._jsonSchema))return new bt(e,i||null,new de(nt.fromString(n.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:vt("string",bt._jsonSchemaVersion),referencePath:vt("string")};class Uu extends Lf{constructor(e,n,i){super(e,n,y_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new de(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function Kp(t,e,...n){if(t=Hn(t),arguments.length===1&&(e=c_.newId()),gV("doc","path",e),t instanceof D_){const i=nt.fromString(e,...n);return t1(i),new bt(t,null,new de(i))}{if(!(t instanceof bt||t instanceof Uu))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(nt.fromString(e,...n));return t1(i),new bt(t.firestore,t instanceof Uu?t.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="AsyncQueue";class W1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SI(this,"async_queue_retry"),this._c=()=>{const i=Gp();i&&re(H1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Gp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new qs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ya(e))throw e;re(H1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",$1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=b_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&me(47125,{Pc:$1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Od extends D_{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new W1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W1(e),this._firestoreClient=void 0,await e}}}function o3(t,e){const n=typeof t=="object"?t:PS(),i=typeof t=="string"?t:Id,r=l_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=RD("firestore");o&&s3(r,...o)}return r}function WI(t){if(t._terminated)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||a3(t),t._firestoreClient}function a3(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new AV(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,UI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new n3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Vt.fromBase64String(e))}catch(n){throw new he(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nc(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:vt("string",jn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(nc(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:vt("string",Ti._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nc(e,Ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ei(e.vectorValues);throw new he(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:vt("string",Ei._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=/^__.*__$/;class u3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new ic(e,this.data,n,this.fieldTransforms)}}function qI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class V_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new V_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qI(this.Ac)&&l3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class c3{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||kf(e)}Cc(e,n,i,r=!1){return new V_({Ac:e,methodName:n,Dc:i,path:Mt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function h3(t){const e=t._freezeSettings(),n=kf(t._databaseId);return new c3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function d3(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);QI("Data must be an object, but it was:",a,i);const u=ZI(i,a);let h,f;if(o.merge)h=new ei(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const v=f3(e,g,n);if(!a.contains(v))throw new he(X.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);m3(m,v)||m.push(v)}h=new ei(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new u3(new Vn(u),h,f)}function GI(t,e){if(KI(t=Hn(t)))return QI("Unsupported field value:",e,t),ZI(t,e);if(t instanceof $I)return function(i,r){if(!qI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=GI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Hn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return YV(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ye.fromDate(i);return{timestampValue:Ld(r.serializer,o)}}if(i instanceof Ye){const o=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ld(r.serializer,o)}}if(i instanceof Ti)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jn)return{bytesValue:pI(r.serializer,i._byteString)};if(i instanceof bt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:x_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ei)return function(a,u){return{mapValue:{fields:{[HS]:{stringValue:WS},[Cd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return __(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${h_(i)}`)}(t,e)}function ZI(t,e){const n={};return VS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(i,r)=>{const o=GI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function KI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Ti||t instanceof jn||t instanceof bt||t instanceof $I||t instanceof Ei)}function QI(t,e,n){if(!KI(n)||!DS(n)){const i=h_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function f3(t,e,n){if((e=Hn(e))instanceof O_)return e._internalPath;if(typeof e=="string")return XI(t,e);throw Vd("Field path arguments must be of type string or ",t,!1,void 0,n)}const p3=new RegExp("[~\\*/\\[\\]]");function XI(t,e,n){if(e.search(p3)>=0)throw Vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new O_(...e.split("."))._internalPath}catch{throw Vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new he(X.INVALID_ARGUMENT,u+t+h)}function m3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new g3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(JI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class g3 extends YI{data(){return super.data()}}function JI(t,e){return typeof e=="string"?XI(t,e):e instanceof O_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _3{convertValue(e,n="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return co(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Cd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>ht(a.doubleValue));return new Ei(n)}convertGeoPoint(e){return new Ti(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Tf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){const n=rs(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=nt.fromString(e);Ue(wI(i),9688,{name:e});const r=new ju(i.get(1),i.get(3)),o=new de(i.popFirst(5));return r.isEqual(n)||rr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class ql{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gs extends YI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(JI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gs._jsonSchema={type:vt("string",Gs._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class jh extends Gs{data(e={}){return super.data(e)}}class Ta{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ql(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new jh(this._firestore,this._userDataWriter,i.key,i,new ql(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new jh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ql(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new jh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ql(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:w3(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=c_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:vt("string",Ta._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class eC extends _3{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function G1(t,e,n){t=wa(t,bt);const i=wa(t.firestore,Od),r=v3(t.converter,e,n);return T3(i,[d3(h3(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Xi.none())])}function x3(t,...e){var h,f,m;t=Hn(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||q1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(q1(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof bt)a=wa(t.firestore,Od),u=y_(t._key.path),o={next:g=>{e[i]&&e[i](E3(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=wa(t,Lf);a=wa(g.firestore,Od),u=g._query;const v=new eC(a);o={next:T=>{e[i]&&e[i](new Ta(a,v,g,T))},error:e[i+1],complete:e[i+2]},y3(t._query)}return function(v,T,R,b){const z=new t3(b),C=new O5(T,z,R);return v.asyncQueue.enqueueAndForget(async()=>L5(await z1(v),C)),()=>{z.Nu(),v.asyncQueue.enqueueAndForget(async()=>N5(await z1(v),C))}}(WI(a),u,r,o)}function T3(t,e){return function(i,r){const o=new qs;return i.asyncQueue.enqueueAndForget(async()=>q5(await r3(i),r,o)),o.promise}(WI(t),e)}function E3(t,e,n){const i=n.docs.get(e._key),r=new eC(t);return new Gs(t,r,e._key,i,new ql(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Qa=r})(Ka),Oa(new to("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Od(new lV(i.getProvider("auth-internal")),new hV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new he(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Kr(Xw,Yw,e),Kr(Xw,Yw,"esm2020")})();function tC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P3=tC,nC=new ec("auth","Firebase",tC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new o_("@firebase/auth");function S3(t,...e){jd.logLevel<=Ae.WARN&&jd.warn(`Auth (${Ka}): ${t}`,...e)}function zh(t,...e){jd.logLevel<=Ae.ERROR&&jd.error(`Auth (${Ka}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,...e){throw j_(t,...e)}function Pi(t,...e){return j_(t,...e)}function iC(t,e,n){const i={...P3(),[e]:n};return new ec("auth","Firebase",i).create(e,{appName:t.name})}function Xr(t){return iC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function j_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return nC.create(t,...e)}function ge(t,e,...n){if(!t)throw j_(e,...n)}function qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zh(e),new Error(e)}function ar(t,e){t||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function I3(){return Z1()==="http:"||Z1()==="https:"}function Z1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I3()||zD()||"connection"in navigator)?navigator.onLine:!0}function A3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=OD()||FD()}get(){return C3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R3=new ac(3e4,6e4);function Nf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function el(t,e,n,i,r={}){return sC(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=tc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return jD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Za(t.emulatorConfig.host)&&(f.credentials="include"),rC.fetch()(await aC(t,t.config.apiHost,n,u),f)})}async function sC(t,e,n){t._canInitEmulator=!1;const i={...k3,...e};try{const r=new L3(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw yh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw yh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw yh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw yh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw iC(t,m,f);or(t,m)}}catch(r){if(r instanceof ur)throw r;or(t,"network-request-failed",{message:String(r)})}}async function oC(t,e,n,i,r={}){const o=await el(t,e,n,i,r);return"mfaPendingCredential"in o&&or(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function aC(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?z_(t.config,r):`${t.config.apiScheme}://${r}`;return b3.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class L3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Pi(this.auth,"network-request-failed")),R3.get())})}}function yh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Pi(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N3(t,e){return el(t,"POST","/v1/accounts:delete",e)}async function zd(t,e){return el(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M3(t,e=!1){const n=Hn(t),i=await n.getIdToken(e),r=F_(i);ge(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:hu(Qp(r.auth_time)),issuedAtTime:hu(Qp(r.iat)),expirationTime:hu(Qp(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Qp(t){return Number(t)*1e3}function F_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const r=mS(n);return r?JSON.parse(r):(zh("Failed to decode base64 JWT payload"),null)}catch(r){return zh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function K1(t){const e=F_(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ur&&D3(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function D3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Hu(t,zd(e,{idToken:n}));ge(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?lC(r.providerUserInfo):[],a=j3(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Vg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function V3(t){const e=Hn(t);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function j3(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function lC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(t,e){const n=await sC(t,{},async()=>{const i=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await aC(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&Za(t.emulatorConfig.host)&&(h.credentials="include"),rC.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function F3(t,e){return el(t,"POST","/v2/accounts:revokeToken",Nf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=K1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await z3(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Ea;return i&&(ge(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ge(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ge(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ea,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new O3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Vg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Hu(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return M3(this,e)}reload(){return V3(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Fd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await Hu(this,N3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:T,providerData:R,stsTokenManager:b}=n;ge(g&&b,e,"internal-error");const z=Ea.fromJSON(this.name,b);ge(typeof g=="string",e,"internal-error"),xr(i,e.name),xr(r,e.name),ge(typeof v=="boolean",e,"internal-error"),ge(typeof T=="boolean",e,"internal-error"),xr(o,e.name),xr(a,e.name),xr(u,e.name),xr(h,e.name),xr(f,e.name),xr(m,e.name);const C=new ti({uid:g,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:z,createdAt:f,lastLoginAt:m});return R&&Array.isArray(R)&&(C.providerData=R.map(E=>({...E}))),h&&(C._redirectEventId=h),C}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ea;r.updateFromServerResponse(n);const o=new ti({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Fd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ge(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?lC(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Ea;u.updateFromIdToken(i);const h=new ti({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Vg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new Map;function Gi(t){ar(t instanceof Function,"Expected a class definition");let e=Q1.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Q1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uC.type="NONE";const X1=uC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e,n){return`firebase:${t}:${e}:${n}`}class Pa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Fh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Fh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zd(this.auth,{idToken:e}).catch(()=>{});return n?ti._fromGetAccountInfoResponse(this.auth,n,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Pa(Gi(X1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Gi(X1);const a=Fh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const v=await zd(e,{idToken:m}).catch(()=>{});if(!v)break;g=await ti._fromGetAccountInfoResponse(e,v,m)}else g=ti._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Pa(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Pa(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mC(e))return"Blackberry";if(gC(e))return"Webos";if(hC(e))return"Safari";if((e.includes("chrome/")||dC(e))&&!e.includes("edge/"))return"Chrome";if(pC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function cC(t=Gt()){return/firefox\//i.test(t)}function hC(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dC(t=Gt()){return/crios\//i.test(t)}function fC(t=Gt()){return/iemobile/i.test(t)}function pC(t=Gt()){return/android/i.test(t)}function mC(t=Gt()){return/blackberry/i.test(t)}function gC(t=Gt()){return/webos/i.test(t)}function B_(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function B3(t=Gt()){var e;return B_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function U3(){return BD()&&document.documentMode===10}function yC(t=Gt()){return B_(t)||pC(t)||gC(t)||mC(t)||/windows phone/i.test(t)||fC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e=[]){let n;switch(t){case"Browser":n=Y1(Gt());break;case"Worker":n=`${Y1(Gt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ka}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e={}){return el(t,"GET","/v2/passwordPolicy",Nf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=6;class q3{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J1(this),this.idTokenSubscription=new J1(this),this.beforeStateQueue=new H3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zd(this,{idToken:e}),i=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Jn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(Xr(this));const n=e?Hn(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W3(this),n=new q3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ec("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await F3(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gi(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_C(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&S3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mf(t){return Hn(t)}class J1{constructor(e){this.auth=e,this.observer=null,this.addObserver=KD(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z3(t){U_=t}function K3(t){return U_.loadJS(t)}function Q3(){return U_.gapiScript}function X3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(t,e){const n=l_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(eo(o,e??{}))return r;or(r,"already-initialized")}return n.initialize({options:e})}function J3(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ej(t,e,n){const i=Mf(t);ge(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=vC(e),{host:a,port:u}=tj(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ge(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ge(eo(f,i.config.emulator)&&eo(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Za(a)?(vS(`${o}//${a}${h}`),wS("Auth",!0)):nj()}function vC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tj(t){const e=vC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:ex(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:ex(a)}}}function ex(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(t,e){return oC(t,"POST","/v1/accounts:signInWithIdp",Nf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="http://localhost";class ro extends wC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new ro(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Sa(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Sa(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sa(e,n)}buildRequest(){const e={requestUri:ij,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends xC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends lc{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ro._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return br.credential(n,i)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends lc{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends lc{constructor(){super("twitter.com")}static credential(e,n){return ro._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Lr.credential(n,i)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e){return oC(t,"POST","/v1/accounts:signUp",Nf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await ti._fromIdTokenResponse(e,i,r),a=tx(i);return new us({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=tx(i);return new us({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function tx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(t){var r;if(Jn(t.app))return Promise.reject(Xr(t));const e=Mf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new us({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await rj(e,{returnSecureToken:!0}),i=await us._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends ur{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Bd(e,n,i,r)}}function TC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(t,o,e,i):o})}async function oj(t,e,n=!1){const i=await Hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return us._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(t,e,n=!1){const{auth:i}=t;if(Jn(i.app))return Promise.reject(Xr(i));const r="reauthenticate";try{const o=await Hu(t,TC(i,r,e,t),n);ge(o.idToken,i,"internal-error");const a=F_(o.idToken);ge(a,i,"internal-error");const{sub:u}=a;return ge(t.uid===u,i,"user-mismatch"),us._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&or(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e,n=!1){if(Jn(t.app))return Promise.reject(Xr(t));const i="signIn",r=await TC(t,i,e),o=await us._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function uj(t,e,n,i){return Hn(t).onIdTokenChanged(e,n,i)}function cj(t,e,n){return Hn(t).beforeAuthStateChanged(e,n)}function hj(t,e,n,i){return Hn(t).onAuthStateChanged(e,n,i)}const Ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=1e3,fj=10;class PC extends EC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);U3()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,fj):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},dj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PC.type="LOCAL";const pj=PC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC extends EC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SC.type="SESSION";const IC=SC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Df(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await mj(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=H_("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return window}function yj(t){Si().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){return typeof Si().WorkerGlobalScope<"u"&&typeof Si().importScripts=="function"}async function _j(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function wj(){return CC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="firebaseLocalStorageDb",xj=1,Hd="firebaseLocalStorage",kC="fbase_key";class uc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Of(t,e){return t.transaction([Hd],e?"readwrite":"readonly").objectStore(Hd)}function Tj(){const t=indexedDB.deleteDatabase(AC);return new uc(t).toPromise()}function jg(){const t=indexedDB.open(AC,xj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Hd,{keyPath:kC})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Hd)?e(i):(i.close(),await Tj(),e(await jg()))})})}async function nx(t,e,n){const i=Of(t,!0).put({[kC]:e,value:n});return new uc(i).toPromise()}async function Ej(t,e){const n=Of(t,!1).get(e),i=await new uc(n).toPromise();return i===void 0?null:i.value}function ix(t,e){const n=Of(t,!0).delete(e);return new uc(n).toPromise()}const Pj=800,Sj=3;class bC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Sj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(wj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await _j(),!this.activeServiceWorker)return;this.sender=new gj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jg();return await nx(e,Ud,"1"),await ix(e,Ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>nx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Ej(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ix(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Of(r,!1).getAll();return new uc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Pj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bC.type="LOCAL";const Ij=bC;new ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t,e){return e?Gi(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_ extends wC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Aj(t){return lj(t.auth,new W_(t),t.bypassAuthState)}function kj(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),aj(n,new W_(t),t.bypassAuthState)}async function bj(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),oj(n,new W_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Aj;case"linkViaPopup":case"linkViaRedirect":return bj;case"reauthViaPopup":case"reauthViaRedirect":return kj;default:or(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=new ac(2e3,1e4);class da extends RC{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,da.currentPopupAction&&da.currentPopupAction.cancel(),da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=H_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Rj.get())};e()}}da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="pendingRedirect",Bh=new Map;class Nj extends RC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const i=await Mj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mj(t,e){const n=Vj(e),i=Oj(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Dj(t,e){Bh.set(t._key(),e)}function Oj(t){return Gi(t._redirectPersistence)}function Vj(t){return Fh(Lj,t.config.apiKey,t.name)}async function jj(t,e,n=!1){if(Jn(t.app))return Promise.reject(Xr(t));const i=Mf(t),r=Cj(i,e),a=await new Nj(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=10*60*1e3;class Fj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!LC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Pi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zj&&this.cachedEventUids.clear(),this.cachedEventUids.has(rx(e))}saveEventToCache(e){this.cachedEventUids.add(rx(e)),this.lastProcessedEventTime=Date.now()}}function rx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Bj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e={}){return el(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wj=/^https?/;async function $j(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Uj(t);for(const n of e)try{if(qj(n))return}catch{}or(t,"unauthorized-domain")}function qj(t){const e=Og(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Wj.test(n))return!1;if(Hj.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new ac(3e4,6e4);function sx(){const t=Si().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Zj(t){return new Promise((e,n)=>{var r,o,a;function i(){sx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sx(),n(Pi(t,"network-request-failed"))},timeout:Gj.get()})}if((o=(r=Si().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Si().gapi)!=null&&a.load)i();else{const u=X3("iframefcb");return Si()[u]=()=>{gapi.load?i():n(Pi(t,"network-request-failed"))},K3(`${Q3()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Uh=null,e})}let Uh=null;function Kj(t){return Uh=Uh||Zj(t),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=new ac(5e3,15e3),Xj="__/auth/iframe",Yj="emulator/auth/iframe",Jj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ez=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tz(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?z_(e,Yj):`https://${t.config.authDomain}/${Xj}`,i={apiKey:e.apiKey,appName:t.name,v:Ka},r=ez.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${tc(i).slice(1)}`}async function nz(t){const e=await Kj(t),n=Si().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:tz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jj,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Pi(t,"network-request-failed"),u=Si().setTimeout(()=>{o(a)},Qj.get());function h(){Si().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rz=500,sz=600,oz="_blank",az="http://localhost";class ox{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lz(t,e,n,i=rz,r=sz){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...iz,width:i.toString(),height:r.toString(),top:o,left:a},f=Gt().toLowerCase();n&&(u=dC(f)?oz:n),cC(f)&&(e=e||az,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[T,R])=>`${v}${T}=${R},`,"");if(B3(f)&&u!=="_self")return uz(e||"",u),new ox(null);const g=window.open(e||"",u,m);ge(g,t,"popup-blocked");try{g.focus()}catch{}return new ox(g)}function uz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz="__/auth/handler",hz="emulator/auth/handler",dz=encodeURIComponent("fac");async function ax(t,e,n,i,r,o){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ka,eventId:r};if(e instanceof xC){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",ZD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof lc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${dz}=${encodeURIComponent(h)}`:"";return`${fz(t)}?${tc(u).slice(1)}${f}`}function fz({config:t}){return t.emulator?z_(t,hz):`https://${t.authDomain}/${cz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="webStorageSupport";class pz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IC,this._completeRedirectFn=jj,this._overrideRedirectResult=Dj}async _openPopup(e,n,i,r){var a;ar((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await ax(e,n,i,Og(),r);return lz(e,o,H_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await ax(e,n,i,Og(),r);return yj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(ar(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await nz(e),i=new Fj(e);return n.register("authEvent",r=>(ge(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xp,{type:Xp},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[Xp];o!==void 0&&n(!!o),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$j(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yC()||hC()||B_()}}const mz=pz;var lx="@firebase/auth",ux="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _z(t){Oa(new to("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ge(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_C(t)},f=new G3(i,r,o,h);return J3(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Oa(new to("auth-internal",e=>{const n=Mf(e.getProvider("auth").getImmediate());return(i=>new gz(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(lx,ux,yz(t)),Kr(lx,ux,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz=5*60,wz=_S("authIdTokenMaxAge")||vz;let cx=null;const xz=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>wz)return;const r=n==null?void 0:n.token;cx!==r&&(cx=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Tz(t=PS()){const e=l_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Y3(t,{popupRedirectResolver:mz,persistence:[Ij,pj,IC]}),i=_S("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=xz(o.toString());cj(n,a,()=>a(n.currentUser)),uj(n,u=>a(u))}}const r=gS("auth");return r&&ej(n,`http://${r}`),n}function Ez(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Z3({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Pi("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",Ez().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_z("Browser");var Pz="firebase",Sz="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(Pz,Sz,"app");const Iz={apiKey:"AIzaSyAz0HX_QrTS2uB7hVXw86RUlXoB6jsIReA",authDomain:"skan-2f8d5.firebaseapp.com",projectId:"skan-2f8d5",storageBucket:"skan-2f8d5.firebasestorage.app",messagingSenderId:"839263869032",appId:"1:839263869032:web:35b2bf59f90430075a83dd",measurementId:"G-JZSJKTE4LL"},NC=ES(Iz),Yp=o3(NC),hx=Tz(NC),zg={vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},Cz="vysocany",MC=zg[Cz].center,DC=15,Az=13,kz=18,dx={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},Yr=["red","blue"],bz={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},fx=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],px=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function Vf(t){var e;return((e=bz[t.size])==null?void 0:e.points)||100}function Rz(t,e,n=.001,i=16){const r=[];for(let o=0;o<i;o++){const a=o/i*2*Math.PI;r.push([t+n*Math.cos(a),e+n*1.6*Math.sin(a)])}return r}function Lz(t){if(t.length<3)return t;let e=0;for(let o=1;o<t.length;o++)(t[o][0]<t[e][0]||t[o][0]===t[e][0]&&t[o][1]<t[e][1])&&(e=o);[t[0],t[e]]=[t[e],t[0]];const n=t[0],i=t.slice(1).sort((o,a)=>{const u=Math.atan2(o[1]-n[1],o[0]-n[0]),h=Math.atan2(a[1]-n[1],a[0]-n[0]);return u-h}),r=[n];for(const o of i){for(;r.length>1;){const a=r[r.length-2],u=r[r.length-1];if((u[0]-a[0])*(o[1]-a[1])-(u[1]-a[1])*(o[0]-a[0])<=0)r.pop();else break}r.push(o)}return r}function Nz(t,e){if(t.length<3)return t;const n=t.reduce((r,o)=>r+o[0],0)/t.length,i=t.reduce((r,o)=>r+o[1],0)/t.length;return t.map(r=>{const o=r[0]-n,a=r[1]-i,u=Math.sqrt(o*o+a*a);if(u===0)return r;const h=(u+e)/u;return[n+o*h,i+a*h]})}function Mz(t){const e={};Yr.forEach(i=>e[i]=[]);const n={};return Yr.forEach(i=>n[i]=[]),t.forEach(i=>{i.capturedBy&&n[i.capturedBy]&&n[i.capturedBy].push(i)}),Yr.forEach(i=>{const r=n[i];if(r.length!==0)if(r.length===1){const o=r[0];e[i].push({polygon:Rz(o.location[0],o.location[1],.0015,12),points:r})}else{const o=r.map(h=>h.location),a=Lz([...o]),u=Nz(a,.001);e[i].push({polygon:u,points:r})}}),e}function Ko(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function OC(t){const e={};return Yr.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=Vf(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const VC=j.createContext(null),Tr={player:"streetart-ctf-player",captures:"streetart-ctf-captures"},Jp="captures",Xe={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function em(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function tm(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function Dz({children:t}){const[e,n]=j.useState(null),[i,r]=j.useState(!0),[o,a]=j.useState(()=>em(Tr.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]})),[u,h]=j.useState(()=>{const k=em(Tr.captures,{});return px.map(M=>({...M,capturedBy:k[M.id]||null}))}),[f,m]=j.useState(null),[g,v]=j.useState(!1),[T,R]=j.useState(null);j.useEffect(()=>{const k=hj(hx,M=>{M?(n(M),a(O=>({...O,id:M.uid}))):sj(hx).catch(O=>{console.warn("Firebase auth failed, using offline mode:",O),r(!1)})});return()=>k()},[]),j.useEffect(()=>{if(!e)return;const k=Kp(Yp,Jp,"global"),M=x3(k,O=>{if(O.exists()){const B=O.data();h(D=>D.map(ae=>({...ae,capturedBy:B[ae.id]||null}))),tm(Tr.captures,B)}},O=>{console.warn("Firestore sync error:",O),r(!1)});return()=>M()},[e]),j.useEffect(()=>{tm(Tr.player,o)},[o]);const b=j.useCallback(async k=>{if(!(!e||!i))try{await G1(Kp(Yp,Jp,"global"),k,{merge:!0})}catch(M){console.warn("Failed to sync to Firebase:",M)}},[e,i]),z=OC(u),C=j.useCallback(k=>{Yr.includes(k)&&a(M=>({...M,team:k}))},[]),E=j.useCallback((k,M,O=50)=>{let B=null,D=1/0;return u.forEach(ae=>{const Oe=(ae.location[0]-k)*111e3,Te=(ae.location[1]-M)*111e3*Math.cos(k*Math.PI/180),Re=Math.sqrt(Oe*Oe+Te*Te);Re<D&&Re<=O&&(D=Re,B={...ae,distance:Math.round(Re)})}),B},[u]),I=j.useCallback(k=>{if(!o.team)return{success:!1,message:"Join a team first!"};const M=u.find(ae=>ae.id===k);if(!M)return{success:!1,message:"Art not found"};if(M.capturedBy===o.team)return{success:!1,message:"Already yours!"};if(M.status==="ghost")return{success:!1,message:"This art no longer exists"};const O=Vf(M),B=M.capturedBy;h(ae=>ae.map(Oe=>Oe.id===k?{...Oe,capturedBy:o.team}:Oe)),a(ae=>({...ae,score:ae.score+O,capturedArt:[...ae.capturedArt.filter(Oe=>Oe!==k),k]})),b({[k]:o.team});const D=em(Tr.captures,{});return tm(Tr.captures,{...D,[k]:o.team}),{success:!0,art:M,points:O,previousTeam:B,message:B?`Stolen from ${B}!`:"Captured!"}},[o.team,u,b]),F=j.useCallback(async(k,M)=>{v(!0);const O=E(M.lat,M.lng,100);if(!O){v(!1),m({success:!1,message:"No street art nearby. Get closer!"});return}R({art:O,photo:k,location:M}),v(!1)},[E]),q=j.useCallback(()=>{if(!T)return;const k=I(T.art.id);m(k),R(null)},[T,I]),Z=j.useCallback(()=>{R(null),m(null)},[]),N=j.useCallback(async()=>{if(localStorage.removeItem(Tr.player),localStorage.removeItem(Tr.captures),e&&i)try{await G1(Kp(Yp,Jp,"global"),{})}catch(k){console.warn("Failed to reset Firebase:",k)}a({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),h(px.map(k=>({...k,capturedBy:null}))),m(null),R(null)},[e,i]),S={player:o,artPoints:u,teamScores:z,scanResult:f,isScanning:g,pendingCapture:T,isOnline:i,teams:Yr,joinTeam:C,captureArt:I,startCapture:F,confirmCapture:q,cancelCapture:Z,findNearestArt:E,setScanResult:m,resetAll:N,TEAM_COLORS:Xe};return x.jsx(VC.Provider,{value:S,children:t})}function cc(){const t=j.useContext(VC);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ze=(t,e)=>{const n=j.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>j.createElement("svg",{ref:m,...Oz,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${Vz(t)}`,u].join(" "),...f},[...e.map(([g,v])=>j.createElement(g,v)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=ze("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=ze("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=ze("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=ze("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=ze("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=ze("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=ze("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=ze("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=ze("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=ze("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=ze("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=ze("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=ze("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=ze("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=ze("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=ze("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=ze("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=ze("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=ze("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),yx=[{color:"red",name:"Crimson",icon:""},{color:"blue",name:"Azure",icon:""}];function tF(){var g;const t=FE(),{player:e,joinTeam:n,teamScores:i,artPoints:r,resetAll:o,isOnline:a}=cc(),u=v=>{n(v)},h={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},f={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},m=Object.values(i).reduce((v,T)=>v+T,0);return x.jsxs(ue.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:h,children:[x.jsxs(ue.div,{className:"text-center mb-10",variants:f,children:[x.jsxs(ue.div,{className:"relative inline-block mb-6",animate:{y:[0,-8,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[x.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center mx-auto backdrop-blur-sm border border-white/10",children:x.jsx("span",{className:"text-4xl",children:""})}),x.jsx(ue.div,{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-green-400",animate:{scale:[1,1.2,1],opacity:[1,.7,1]},transition:{duration:2,repeat:1/0}})]}),x.jsx("h1",{className:"text-4xl font-bold gradient-text mb-3",children:"Street Art CTF"}),x.jsx("p",{className:"text-white/50 text-sm max-w-xs mx-auto",children:"Capture the city, one masterpiece at a time"}),x.jsxs("div",{className:`inline-flex items-center gap-1.5 mt-3 px-3 py-1 rounded-full text-xs ${a?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[a?x.jsx(zz,{size:12}):x.jsx(Yz,{size:12}),a?"Synced":"Offline"]})]}),e.team?x.jsxs(ue.div,{className:"mb-8 p-5 rounded-2xl relative overflow-hidden",variants:f,style:{background:`linear-gradient(135deg, ${Xe[e.team].hex}15 0%, transparent 100%)`,border:`1px solid ${Xe[e.team].hex}30`},children:[x.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-20 blur-3xl",style:{backgroundColor:Xe[e.team].hex}}),x.jsxs("div",{className:"relative flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-1",children:"Your Team"}),x.jsx("p",{className:"text-2xl font-bold",style:{color:Xe[e.team].hex},children:(g=yx.find(v=>v.color===e.team))==null?void 0:g.name})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-1",children:"Score"}),x.jsx("p",{className:"text-3xl font-bold text-white",children:e.score})]})]})]}):x.jsxs(ue.div,{variants:f,className:"mb-8",children:[x.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-2xl p-4 mb-6",children:[x.jsx("h3",{className:"font-bold text-white mb-2",children:" Welcome, Street Artist!"}),x.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Explore the city, find street art, and capture it for your team! Get within ",x.jsx("span",{className:"text-purple-400 font-medium",children:"100m"})," of an art piece, take a photo, and claim it."]})]}),x.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[x.jsx(Xz,{size:18,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),x.jsx("div",{className:"grid grid-cols-2 gap-3",children:yx.map(({color:v,name:T,icon:R},b)=>x.jsxs(ue.button,{onClick:()=>u(v),className:"group relative p-5 rounded-2xl text-left overflow-hidden",style:{background:`linear-gradient(135deg, ${Xe[v].hex}15 0%, transparent 100%)`,border:`1px solid ${Xe[v].hex}30`},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05},children:[x.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",style:{background:`radial-gradient(circle at 50% 50%, ${Xe[v].hex}20 0%, transparent 70%)`}}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"text-2xl font-bold",style:{color:Xe[v].hex},children:R}),x.jsx("p",{className:"font-semibold mt-3 text-white",children:T}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsxs("span",{className:"text-xs text-white/40",children:[i[v]," pts"]}),x.jsx("div",{className:"flex-1 h-1 rounded-full bg-white/10 overflow-hidden",children:x.jsx(ue.div,{className:"h-full rounded-full",style:{backgroundColor:Xe[v].hex},initial:{width:0},animate:{width:`${i[v]/m*100}%`},transition:{duration:.8,delay:.3}})})]})]})]},v))})]}),x.jsxs(ue.div,{className:"space-y-3 mb-8",variants:f,children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(UC,{size:18,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Quick Actions"})]}),x.jsxs(ue.button,{onClick:()=>t("/map"),className:"w-full group p-4 rounded-2xl flex items-center gap-4 bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-300",whileTap:{scale:.98},disabled:!e.team,children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20",children:x.jsx(zC,{size:22,className:"text-white"})}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-semibold text-white",children:"Explore Map"}),x.jsx("p",{className:"text-sm text-white/40",children:"View sectors & tram lines"})]}),x.jsx(du,{size:20,className:"text-white/20 group-hover:text-white/40 group-hover:translate-x-1 transition-all"})]}),x.jsxs(ue.button,{onClick:()=>t("/scanner"),className:"w-full group p-4 rounded-2xl flex items-center gap-4 bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-300",whileTap:{scale:.98},disabled:!e.team,children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-lg shadow-emerald-500/20",children:x.jsx(BC,{size:22,className:"text-white"})}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-semibold text-white",children:"Scan Art"}),x.jsx("p",{className:"text-sm text-white/40",children:"Capture for your team"})]}),x.jsx(du,{size:20,className:"text-white/20 group-hover:text-white/40 group-hover:translate-x-1 transition-all"})]}),x.jsxs(ue.button,{onClick:()=>t("/leaderboard"),className:"w-full group p-4 rounded-2xl flex items-center gap-4 bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-300",whileTap:{scale:.98},children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-lg shadow-amber-500/20",children:x.jsx(jf,{size:22,className:"text-white"})}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-semibold text-white",children:"Leaderboard"}),x.jsx("p",{className:"text-sm text-white/40",children:"See team rankings"})]}),x.jsx(du,{size:20,className:"text-white/20 group-hover:text-white/40 group-hover:translate-x-1 transition-all"})]})]}),x.jsxs(ue.div,{variants:f,children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Wd,{size:18,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Game Stats"})]}),x.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:r.length,label:"Art Spots",color:"from-purple-500/20 to-pink-500/20"},{value:r.filter(v=>v.capturedBy).length,label:"Captured",color:"from-green-500/20 to-emerald-500/20"},{value:e.capturedArt.length,label:"Your Claims",color:"from-blue-500/20 to-indigo-500/20"}].map((v,T)=>x.jsxs(ue.div,{className:`p-4 rounded-2xl text-center bg-gradient-to-br ${v.color} border border-white/[0.06]`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4+T*.1},children:[x.jsx("p",{className:"text-2xl font-bold text-white",children:v.value}),x.jsx("p",{className:"text-xs text-white/40 mt-1",children:v.label})]},v.label))})]}),x.jsx(ue.div,{variants:f,className:"mt-6",children:x.jsxs(ue.button,{onClick:o,className:"w-full p-3 rounded-xl flex items-center justify-center gap-2 bg-white/[0.02] border border-white/[0.04] text-white/30 hover:text-white/50 hover:bg-white/[0.04] transition-all text-sm",whileTap:{scale:.98},children:[x.jsx(FC,{size:14}),"Reset Game Data"]})})]})}function nF(t,e){const n=j.useRef(e);j.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function iF(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const rF=1;function sF(t){return Object.freeze({__version:rF,map:t})}function q_(t,e){return Object.freeze({...t,...e})}const $C=j.createContext(null),qC=$C.Provider;function G_(){const t=j.useContext($C);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function oF(t){function e(n,i){const{instance:r,context:o}=t(n).current;return j.useImperativeHandle(i,()=>r),n.children==null?null:Zs.createElement(qC,{value:o},n.children)}return j.forwardRef(e)}function aF(t){function e(n,i){const{instance:r}=t(n).current;return j.useImperativeHandle(i,()=>r),null}return j.forwardRef(e)}function GC(t,e){const n=j.useRef();j.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Z_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Bg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(AA,function(n){var i="1.9.4";function r(s){var l,d,p,_;for(d=1,p=arguments.length;d<p;d++){_=arguments[d];for(l in _)s[l]=_[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,_,P,V;return V=function(){p=!1,_&&(P.apply(d,_),_=!1)},P=function(){p?_=arguments:(s.apply(d,arguments),setTimeout(V,l),p=!0)},P}function m(s,l,d){var p=l[1],_=l[0],P=p-_;return s===p&&d?s:((s-_)%P+P)%P+_}function g(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function R(s){return T(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function z(s,l,d){var p=[];for(var _ in s)p.push(encodeURIComponent(d?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function E(s,l){return s.replace(C,function(d,p){var _=l[p];if(_===void 0)throw new Error("No value provided for variable "+d);return typeof _=="function"&&(_=_(l)),_})}var I=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function F(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var N=0;function S(s){var l=+new Date,d=Math.max(0,16-(l-N));return N=l+d,window.setTimeout(s,d)}var k=window.requestAnimationFrame||Z("RequestAnimationFrame")||S,M=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function O(s,l,d){if(d&&k===S)s.call(l);else return k.call(window,a(s,l))}function B(s){s&&M.call(window,s)}var D={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:v,trim:T,splitWords:R,setOptions:b,getParamString:z,template:E,isArray:I,indexOf:F,emptyImageUrl:q,requestFn:k,cancelFn:M,requestAnimFrame:O,cancelAnimFrame:B};function ae(){}ae.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(l[_]=this[_]);return s.statics&&r(l,s.statics),s.includes&&(Oe(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,V=p._initHooks.length;P<V;P++)p._initHooks[P].call(this)}},l},ae.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ae.mergeOptions=function(s){return r(this.prototype.options,s),this},ae.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Oe(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=I(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Te={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=R(s);for(var _=0,P=s.length;_<P;_++)this._on(s[_],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=R(s);for(var _=arguments.length===1,P=0,V=s.length;P<V;P++)_?this._off(s[P]):this._off(s[P],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var _={fn:l,ctx:d};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,l,d){var p,_,P;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,P=p.length;_<P;_++)p[_].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var V=this._listens(s,l,d);if(V!==!1){var H=p[V];this._firingCount&&(H.fn=g,this._events[s]=p=p.slice()),p.splice(V,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var P=0,V=_.length;P<V;P++){var H=_[P],$=H.fn;H.once&&this.off(s,$,H.ctx),$.call(H.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=l;typeof l!="function"&&(p=!!l,_=void 0,d=void 0);var P=this._events&&this._events[s];if(P&&P.length&&this._listens(s,_,d)!==!1)return!0;if(p){for(var V in this._eventParents)if(this._eventParents[V].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var _=0,P=p.length;_<P;_++)if(p[_].fn===l&&p[_].ctx===d)return _;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=R(s);for(var _=0,P=s.length;_<P;_++)this._on(s[_],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Te.addEventListener=Te.on,Te.removeEventListener=Te.clearAllEventListeners=Te.off,Te.addOneTimeEventListener=Te.once,Te.fireEvent=Te.fire,Te.hasEventListeners=Te.listens;var Re=ae.extend(Te);function G(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function J(s,l,d){return s instanceof G?s:I(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,l,d)}function te(s,l){if(s)for(var d=l?[s,l]:s,p=0,_=d.length;p<_;p++)this.extend(d[p])}te.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=ve(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof G?s=J(s):s=ve(s),s instanceof te?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=ve(s);var l=this.min,d=this.max,p=s.min,_=s.max,P=_.x>=l.x&&p.x<=d.x,V=_.y>=l.y&&p.y<=d.y;return P&&V},overlaps:function(s){s=ve(s);var l=this.min,d=this.max,p=s.min,_=s.max,P=_.x>l.x&&p.x<d.x,V=_.y>l.y&&p.y<d.y;return P&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,_=Math.abs(l.y-d.y)*s;return ve(J(l.x-p,l.y-_),J(d.x+p,d.y+_))},equals:function(s){return s?(s=ve(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ve(s,l){return!s||s instanceof te?s:new te(s,l)}function He(s,l){if(s)for(var d=l?[s,l]:s,p=0,_=d.length;p<_;p++)this.extend(d[p])}He.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,_;if(s instanceof Ee)p=s,_=s;else if(s instanceof He){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(ne(s)||Pe(s)):this;return!l&&!d?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(_.lat,_.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(_.lat,d.lat),d.lng=Math.max(_.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,_=Math.abs(l.lng-d.lng)*s;return new He(new Ee(l.lat-p,l.lng-_),new Ee(d.lat+p,d.lng+_))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ee||"lat"in s?s=ne(s):s=Pe(s);var l=this._southWest,d=this._northEast,p,_;return s instanceof He?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=l.lat&&_.lat<=d.lat&&p.lng>=l.lng&&_.lng<=d.lng},intersects:function(s){s=Pe(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),P=_.lat>=l.lat&&p.lat<=d.lat,V=_.lng>=l.lng&&p.lng<=d.lng;return P&&V},overlaps:function(s){s=Pe(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),P=_.lat>l.lat&&p.lat<d.lat,V=_.lng>l.lng&&p.lng<d.lng;return P&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Pe(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Pe(s,l){return s instanceof He?s:new He(s,l)}function Ee(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Ee.prototype={equals:function(s,l){if(!s)return!1;s=ne(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return qe.distance(this,ne(s))},wrap:function(){return qe.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Pe([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function ne(s,l,d){return s instanceof Ee?s:I(s)&&typeof s[0]!="object"?s.length===3?new Ee(s[0],s[1],s[2]):s.length===2?new Ee(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ee(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ee(s,l,d)}var Le={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),_=this.transformation.transform(l.max,d);return new te(p,_)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ee(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,_=l.lng-d.lng;if(p===0&&_===0)return s;var P=s.getSouthWest(),V=s.getNorthEast(),H=new Ee(P.lat-p,P.lng-_),$=new Ee(V.lat-p,V.lng-_);return new He(H,$)}},qe=r({},Le,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,_=l.lat*d,P=Math.sin((l.lat-s.lat)*d/2),V=Math.sin((l.lng-s.lng)*d/2),H=P*P+Math.cos(p)*Math.cos(_)*V*V,$=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*$}}),rn=6378137,sn={R:rn,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),_=Math.sin(p*l);return new G(this.R*s.lng*l,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=rn*Math.PI;return new te([-s,-s],[s,s])}()};function Zt(s,l,d,p){if(I(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}Zt.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new G((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ai(s,l,d,p){return new Zt(s,l,d,p)}var ms=r({},qe,{code:"EPSG:3857",projection:sn,transformation:function(){var s=.5/(Math.PI*sn.R);return Ai(s,.5,-s,.5)}()}),hc=r({},ms,{code:"EPSG:900913"});function dc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function mo(s,l){var d="",p,_,P,V,H,$;for(p=0,P=s.length;p<P;p++){for(H=s[p],_=0,V=H.length;_<V;_++)$=H[_],d+=(_?"L":"M")+$.x+" "+$.y;d+=l?le.svg?"z":"x":""}return d||"M0 0"}var gs=document.documentElement.style,ys="ActiveXObject"in window,Pt=ys&&!document.addEventListener,St="msLaunchUri"in navigator&&!("documentMode"in document),cr=on("webkit"),fc=on("android"),nl=on("android 2")||on("android 3"),Ff=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_s=fc&&on("Google")&&Ff<537&&!("AudioNode"in window),go=!!window.opera,il=!St&&on("chrome"),yo=on("gecko")&&!cr&&!go&&!ys,Bf=!il&&on("safari"),pc=on("phantom"),rl="OTransition"in gs,mc=navigator.platform.indexOf("Win")===0,hr=ys&&"transition"in gs,vs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nl,_o="MozPerspective"in gs,ki=!window.L_DISABLE_3D&&(hr||vs||_o)&&!rl&&!pc,dr=typeof orientation<"u"||on("mobile"),vo=dr&&cr,gc=dr&&vs,fr=!window.PointerEvent&&window.MSPointerEvent,sl=!!(window.PointerEvent||fr),It="ontouchstart"in window||!!window.TouchEvent,yc=!window.L_NO_TOUCH&&(It||sl),ws=dr&&go,xs=dr&&yo,Uf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Hf=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),pr=function(){return!!document.createElement("canvas").getContext}(),ol=!!(document.createElementNS&&dc("svg").createSVGRect),Wf=!!ol&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),wo=!ol&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),_c=navigator.platform.indexOf("Mac")===0,vc=navigator.platform.indexOf("Linux")===0;function on(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:ys,ielt9:Pt,edge:St,webkit:cr,android:fc,android23:nl,androidStock:_s,opera:go,chrome:il,gecko:yo,safari:Bf,phantom:pc,opera12:rl,win:mc,ie3d:hr,webkit3d:vs,gecko3d:_o,any3d:ki,mobile:dr,mobileWebkit:vo,mobileWebkit3d:gc,msPointer:fr,pointer:sl,touch:yc,touchNative:It,mobileOpera:ws,mobileGecko:xs,retina:Uf,passiveEvents:Hf,canvas:pr,svg:ol,vml:wo,inlineSvg:Wf,mac:_c,linux:vc},wc=le.msPointer?"MSPointerDown":"pointerdown",Wn=le.msPointer?"MSPointerMove":"pointermove",al=le.msPointer?"MSPointerUp":"pointerup",ll=le.msPointer?"MSPointerCancel":"pointercancel",Ts={touchstart:wc,touchmove:Wn,touchend:al,touchcancel:ll},xo={touchstart:ul,touchmove:In,touchend:In,touchcancel:In},bi={},xc=!1;function Tc(s,l,d){return l==="touchstart"&&Es(),xo[l]?(d=xo[l].bind(this,d),s.addEventListener(Ts[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function $f(s,l,d){if(!Ts[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ts[l],d,!1)}function To(s){bi[s.pointerId]=s}function Ec(s){bi[s.pointerId]&&(bi[s.pointerId]=s)}function Eo(s){delete bi[s.pointerId]}function Es(){xc||(document.addEventListener(wc,To,!0),document.addEventListener(Wn,Ec,!0),document.addEventListener(al,Eo,!0),document.addEventListener(ll,Eo,!0),xc=!0)}function In(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in bi)l.touches.push(bi[d]);l.changedTouches=[l],s(l)}}function ul(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&pt(l),In(s,l)}function qf(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Pc=200;function Sc(s,l){s.addEventListener("dblclick",l);var d=0,p;function _(P){if(P.detail!==1){p=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var V=pl(P);if(!(V.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!V.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var H=Date.now();H-d<=Pc?(p++,p===2&&l(qf(P))):p=1,d=H}}}return s.addEventListener("click",_),{dblclick:l,simDblclick:_}}function Ic(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Ps=Po(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ri=Po(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),cl=Ri==="webkitTransition"||Ri==="OTransition"?Ri+"End":"transitionend";function hl(s){return typeof s=="string"?document.getElementById(s):s}function mr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Ne(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function Ve(s){var l=s.parentNode;l&&l.removeChild(s)}function Kt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Cn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function An(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Ss(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=si(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function se(s,l){if(s.classList!==void 0)for(var d=R(l),p=0,_=d.length;p<_;p++)s.classList.add(d[p]);else if(!Ss(s,l)){var P=si(s);Li(s,(P?P+" ":"")+l)}}function Ge(s,l){s.classList!==void 0?s.classList.remove(l):Li(s,T((" "+si(s)+" ").replace(" "+l+" "," ")))}function Li(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function si(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function an(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Cc(s,l)}function Cc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Po(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Ni(s,l,d){var p=l||new G(0,0);s.style[Ps]=(le.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function at(s,l){s._leaflet_pos=l,le.any3d?Ni(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Mi(s){return s._leaflet_pos||new G(0,0)}var $n,yn,So;if("onselectstart"in document)$n=function(){ye(window,"selectstart",pt)},yn=function(){We(window,"selectstart",pt)};else{var gr=Po(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$n=function(){if(gr){var s=document.documentElement.style;So=s[gr],s[gr]="none"}},yn=function(){gr&&(document.documentElement.style[gr]=So,So=void 0)}}function Io(){ye(window,"dragstart",pt)}function Co(){We(window,"dragstart",pt)}var Is,oi;function dl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ao(),Is=s,oi=s.style.outlineStyle,s.style.outlineStyle="none",ye(window,"keydown",Ao))}function Ao(){Is&&(Is.style.outlineStyle=oi,Is=void 0,oi=void 0,We(window,"keydown",Ao))}function Ac(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function kn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Gf={__proto__:null,TRANSFORM:Ps,TRANSITION:Ri,TRANSITION_END:cl,get:hl,getStyle:mr,create:Ne,remove:Ve,empty:Kt,toFront:Cn,toBack:An,hasClass:Ss,addClass:se,removeClass:Ge,setClass:Li,getClass:si,setOpacity:an,testProp:Po,setTransform:Ni,setPosition:at,getPosition:Mi,get disableTextSelection(){return $n},get enableTextSelection(){return yn},disableImageDrag:Io,enableImageDrag:Co,preventOutline:dl,restoreOutline:Ao,getSizedParentNode:Ac,getScale:kn};function ye(s,l,d,p){if(l&&typeof l=="object")for(var _ in l)ko(s,_,l[_],d);else{l=R(l);for(var P=0,V=l.length;P<V;P++)ko(s,l[P],d,p)}return this}var Qt="_leaflet_events";function We(s,l,d,p){if(arguments.length===1)yr(s),delete s[Qt];else if(l&&typeof l=="object")for(var _ in l)Cs(s,_,l[_],d);else if(l=R(l),arguments.length===2)yr(s,function(H){return F(l,H)!==-1});else for(var P=0,V=l.length;P<V;P++)Cs(s,l[P],d,p);return this}function yr(s,l){for(var d in s[Qt]){var p=d.split(/\d/)[0];(!l||l(p))&&Cs(s,p,null,null,d)}}var Di={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ko(s,l,d,p){var _=l+h(d)+(p?"_"+h(p):"");if(s[Qt]&&s[Qt][_])return this;var P=function(H){return d.call(p||s,H||window.event)},V=P;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?P=Tc(s,l,P):le.touch&&l==="dblclick"?P=Sc(s,P):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Di[l]||l,P,le.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(H){H=H||window.event,gl(s,H)&&V(H)},s.addEventListener(Di[l],P,!1)):s.addEventListener(l,V,!1):s.attachEvent("on"+l,P),s[Qt]=s[Qt]||{},s[Qt][_]=P}function Cs(s,l,d,p,_){_=_||l+h(d)+(p?"_"+h(p):"");var P=s[Qt]&&s[Qt][_];if(!P)return this;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?$f(s,l,P):le.touch&&l==="dblclick"?Ic(s,P):"removeEventListener"in s?s.removeEventListener(Di[l]||l,P,!1):s.detachEvent("on"+l,P),s[Qt][_]=null}function Fe(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function fl(s){return ko(s,"wheel",Fe),this}function As(s){return ye(s,"mousedown touchstart dblclick contextmenu",Fe),s._leaflet_disable_click=!0,this}function pt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ai(s){return pt(s),Fe(s),this}function pl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function ks(s,l){if(!l)return new G(s.clientX,s.clientY);var d=kn(l),p=d.boundingClientRect;return new G((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var li=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ml(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/li:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function gl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var bs={__proto__:null,on:ye,off:We,stopPropagation:Fe,disableScrollPropagation:fl,disableClickPropagation:As,preventDefault:pt,stop:ai,getPropagationPath:pl,getMousePosition:ks,getWheelDelta:ml,isExternalTarget:gl,addListener:ye,removeListener:We},yl=Re.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Mi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),at(this._el,d),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Se=Re.extend({options:{crs:ms,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ne(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ri&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,cl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ne(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),_=this.getSize().divideBy(2),P=s instanceof G?s:this.latLngToContainerPoint(s),V=P.subtract(_).multiplyBy(1-1/p),H=this.containerPointToLatLng(_.add(V));return this.setView(H,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Pe(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),_=this.getBoundsZoom(s,!1,d.add(p));if(_=typeof l.maxZoom=="number"?Math.min(l.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var P=p.subtract(d).divideBy(2),V=this.project(s.getSouthWest(),_),H=this.project(s.getNorthEast(),_),$=this.unproject(V.add(H).divideBy(2).add(P),_);return{center:$,zoom:_}},fitBounds:function(s,l){if(s=Pe(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new yl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!le.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),_=this.project(s),P=this.getSize(),V=this._zoom;s=ne(s),l=l===void 0?V:l;var H=Math.max(P.x,P.y),$=H*this.getZoomScale(V,l),Q=_.distanceTo(p)||1,ie=1.42,fe=ie*ie;function Ie(mt){var Wc=mt?-1:1,EA=mt?$:H,PA=$*$-H*H+Wc*fe*fe*Q*Q,SA=2*EA*fe*Q,Yf=PA/SA,_v=Math.sqrt(Yf*Yf+1)-Yf,IA=_v<1e-9?-18:Math.log(_v);return IA}function Xt(mt){return(Math.exp(mt)-Math.exp(-mt))/2}function Ct(mt){return(Math.exp(mt)+Math.exp(-mt))/2}function Ln(mt){return Xt(mt)/Ct(mt)}var un=Ie(0);function Uo(mt){return H*(Ct(un)/Ct(un+ie*mt))}function vA(mt){return H*(Ct(un)*Ln(un+ie*mt)-Xt(un))/fe}function wA(mt){return 1-Math.pow(1-mt,1.5)}var xA=Date.now(),gv=(Ie(1)-un)/ie,TA=d.duration?1e3*d.duration:1e3*gv*.8;function yv(){var mt=(Date.now()-xA)/TA,Wc=wA(mt)*gv;mt<=1?(this._flyToFrame=O(yv,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(vA(Wc)/Q)),V),this.getScaleZoom(H/Uo(Wc),V),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),yv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Pe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Pe(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),_=this.project(this.getCenter()),P=this.project(s),V=this.getPixelBounds(),H=ve([V.min.add(d),V.max.subtract(p)]),$=H.getSize();if(!H.contains(P)){this._enforcingBounds=!0;var Q=P.subtract(H.getCenter()),ie=H.extend(P).getSize().subtract($);_.x+=Q.x<0?-ie.x:ie.x,_.y+=Q.y<0?-ie.y:ie.y,this.panTo(this.unproject(_),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),_=d.divideBy(2).round(),P=p.subtract(_);return!P.x&&!P.y?this:(s.animate&&s.pan?this.panBy(P):(s.pan&&this._rawPanBy(P),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Ee(l,d),_=p.toBounds(s.coords.accuracy*2),P=this._locateOptions;if(P.setView){var V=this.getBoundsZoom(_);this.setView(p,P.maxZoom?Math.min(V,P.maxZoom):V)}var H={latlng:p,bounds:_,timestamp:s.timestamp};for(var $ in s.coords)typeof s.coords[$]=="number"&&(H[$]=s.coords[$]);this.fire("locationfound",H)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ve(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ne("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new He(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Pe(s),d=J(d||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),P=this.getMaxZoom(),V=s.getNorthWest(),H=s.getSouthEast(),$=this.getSize().subtract(d),Q=ve(this.project(H,p),this.project(V,p)).getSize(),ie=le.any3d?this.options.zoomSnap:1,fe=$.x/Q.x,Ie=$.y/Q.y,Xt=l?Math.max(fe,Ie):Math.min(fe,Ie);return p=this.getScaleZoom(Xt,p),ie&&(p=Math.round(p/(ie/100))*(ie/100),p=l?Math.ceil(p/ie)*ie:Math.floor(p/ie)*ie),Math.max(_,Math.min(P,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new te(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ne(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ne(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ne(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Pe(s))},distance:function(s,l){return this.options.crs.distance(ne(s),ne(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ne(s)))},mouseEventToContainerPoint:function(s){return ks(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=hl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,se(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=mr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),at(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(s.markerPane,"leaflet-zoom-hide"),se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){at(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var _=this._zoom!==l;this._moveStart(_,d)._move(s,l)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var _=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((_||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){at(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?We:ye;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,_=l==="mouseout"||l==="mouseover",P=s.target||s.srcElement,V=!1;P;){if(p=this._targets[h(P)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){V=!0;break}if(p&&p.listens(l,!0)&&(_&&!gl(P,s)||(d.push(p),_))||P===this._container)break;P=P.parentNode}return!d.length&&!V&&!_&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&dl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var _=this._findEventTargets(s,l);if(d){for(var P=[],V=0;V<d.length;V++)d[V].listens(l,!0)&&P.push(d[V]);_=P.concat(_)}if(_.length){l==="contextmenu"&&pt(s);var H=_[0],$={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=H.getLatLng&&(!H._radius||H._radius<=10);$.containerPoint=Q?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(s),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Q?H.getLatLng():this.layerPointToLatLng($.layerPoint)}for(V=0;V<_.length;V++)if(_[V].fire(l,$,!0),$.originalEvent._stopped||_[V].options.bubblingMouseEvents===!1&&F(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Mi(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return ve([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),_=this.getSize().divideBy(2),P=new te(p.subtract(_),p.add(_)),V=this._getBoundsOffset(P,d,l);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?s:this.unproject(p.add(V),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new te(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=ve(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),_=p.min.subtract(s.min),P=p.max.subtract(s.max),V=this._rebound(_.x,-P.x),H=this._rebound(_.y,-P.y);return new G(V,H)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=le.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ge(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Ps,p=this._proxy.style[d];Ni(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Ni(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),_=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(_)?!1:(O(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ge(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bo(s,l){return new Se(s,l)}var ln=ae.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return se(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ui=function(s){return new ln(s)};Se.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ne("div",l+"control-container",this._container);function p(_,P){var V=l+_+" "+l+P;s[_+P]=Ne("div",V,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ve(this._controlCorners[s]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var kc=ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){b(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return ln.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ge(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ge(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ne("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),As(l),fl(l);var p=this._section=Ne("section",s+"-list");d&&(this._map.on("click",this.collapse,this),ye(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Ne("a",s+"-toggle",l);_.href="#",_.title="Layers",_.setAttribute("role","button"),ye(_,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){pt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ne("div",s+"-base",p),this._separator=Ne("div",s+"-separator",p),this._overlaysList=Ne("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Kt(this._baseLayersList),Kt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,_=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),ye(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(p),P.appendChild(_);var V=s.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],_=[];this._handlingClick=!0;for(var P=s.length-1;P>=0;P--)l=s[P],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||_.push(d);for(P=0;P<_.length;P++)this._map.hasLayer(_[P])&&this._map.removeLayer(_[P]);for(P=0;P<p.length;P++)this._map.hasLayer(p[P])||this._map.addLayer(p[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),_=s.length-1;_>=0;_--)l=s[_],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ye(s,"click",pt),this.expand();var l=this;setTimeout(function(){We(s,"click",pt),l._preventClick=!1})}}),bc=function(s,l,d){return new kc(s,l,d)},Oi=ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ne("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,_){var P=Ne("a",d,p);return P.innerHTML=s,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),As(P),ye(P,"click",ai),ye(P,"click",_,this),ye(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ge(this._zoomInButton,l),Ge(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(se(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(se(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Se.mergeOptions({zoomControl:!0}),Se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Oi,this.addControl(this.zoomControl))});var Rc=function(s){return new Oi(s)},_l=ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ne("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ne("div",l,d)),s.imperial&&(this._iScale=Ne("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,_;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(_=this._getRoundNum(l),this._updateScale(this._iScale,_+" ft",_/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),vl=function(s){return new _l(s)},wl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ro=ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?wl+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),As(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Se.mergeOptions({attributionControl:!0}),Se.addInitHook(function(){this.options.attributionControl&&new Ro().addTo(this)});var Lo=function(s){return new Ro(s)};ln.Layers=kc,ln.Zoom=Oi,ln.Scale=_l,ln.Attribution=Ro,ui.layers=bc,ui.zoom=Rc,ui.scale=vl,ui.attribution=Lo;var _n=ae.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_n.addTo=function(s,l){return s.addHandler(l,this),this};var Lc={Events:Te},ci=le.touch?"touchstart mousedown":"mousedown",qn=Re.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){b(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(ye(this._dragStartTarget,ci,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qn._dragging===this&&this.finishDrag(!0),We(this._dragStartTarget,ci,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ss(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){qn._dragging===this&&this.finishDrag();return}if(!(qn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(qn._dragging=this,this._preventOutline&&dl(this._element),Io(),$n(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Ac(this._element);this._startPoint=new G(l.clientX,l.clientY),this._startPos=Mi(this._element),this._parentScale=kn(d);var p=s.type==="mousedown";ye(document,p?"mousemove":"touchmove",this._onMove,this),ye(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new G(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,pt(s),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),at(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ge(document.body,"leaflet-dragging"),this._lastTarget&&(Ge(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),We(document,"mousemove touchmove",this._onMove,this),We(document,"mouseup touchend touchcancel",this._onUp,this),Co(),yn();var l=this._moved&&this._moving;this._moving=!1,qn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function xl(s,l,d){var p,_=[1,4,2,8],P,V,H,$,Q,ie,fe,Ie;for(P=0,ie=s.length;P<ie;P++)s[P]._code=W(s[P],l);for(H=0;H<4;H++){for(fe=_[H],p=[],P=0,ie=s.length,V=ie-1;P<ie;V=P++)$=s[P],Q=s[V],$._code&fe?Q._code&fe||(Ie=U(Q,$,fe,l,d),Ie._code=W(Ie,l),p.push(Ie)):(Q._code&fe&&(Ie=U(Q,$,fe,l,d),Ie._code=W(Ie,l),p.push(Ie)),p.push($));s=p}return s}function Tl(s,l){var d,p,_,P,V,H,$,Q,ie;if(!s||s.length===0)throw new Error("latlngs not passed");je(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=ne([0,0]),Ie=Pe(s),Xt=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());Xt<1700&&(fe=No(s));var Ct=s.length,Ln=[];for(d=0;d<Ct;d++){var un=ne(s[d]);Ln.push(l.project(ne([un.lat-fe.lat,un.lng-fe.lng])))}for(H=$=Q=0,d=0,p=Ct-1;d<Ct;p=d++)_=Ln[d],P=Ln[p],V=_.y*P.x-P.y*_.x,$+=(_.x+P.x)*V,Q+=(_.y+P.y)*V,H+=V*3;H===0?ie=Ln[0]:ie=[$/H,Q/H];var Uo=l.unproject(J(ie));return ne([Uo.lat+fe.lat,Uo.lng+fe.lng])}function No(s){for(var l=0,d=0,p=0,_=0;_<s.length;_++){var P=ne(s[_]);l+=P.lat,d+=P.lng,p++}return ne([l/p,d/p])}var Mo={__proto__:null,clipPolygon:xl,polygonCenter:Tl,centroid:No};function jt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=_r(s,d),s}function El(s,l,d){return Math.sqrt(_e(s,l,d,!0))}function Nc(s,l,d){return _e(s,l,d)}function _r(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(d);_[0]=_[d-1]=1,c(s,_,l,0,d-1);var P,V=[];for(P=0;P<d;P++)_[P]&&V.push(s[P]);return V}function c(s,l,d,p,_){var P=0,V,H,$;for(H=p+1;H<=_-1;H++)$=_e(s[H],s[p],s[_],!0),$>P&&(V=H,P=$);P>d&&(l[V]=1,c(s,l,d,p,V),c(s,l,d,V,_))}function y(s,l){for(var d=[s[0]],p=1,_=0,P=s.length;p<P;p++)ee(s[p],s[_])>l&&(d.push(s[p]),_=p);return _<P-1&&d.push(s[P-1]),d}var w;function A(s,l,d,p,_){var P=p?w:W(s,d),V=W(l,d),H,$,Q;for(w=V;;){if(!(P|V))return[s,l];if(P&V)return!1;H=P||V,$=U(s,l,H,d,_),Q=W($,d),H===P?(s=$,P=Q):(l=$,V=Q)}}function U(s,l,d,p,_){var P=l.x-s.x,V=l.y-s.y,H=p.min,$=p.max,Q,ie;return d&8?(Q=s.x+P*($.y-s.y)/V,ie=$.y):d&4?(Q=s.x+P*(H.y-s.y)/V,ie=H.y):d&2?(Q=$.x,ie=s.y+V*($.x-s.x)/P):d&1&&(Q=H.x,ie=s.y+V*(H.x-s.x)/P),new G(Q,ie,_)}function W(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ee(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function _e(s,l,d,p){var _=l.x,P=l.y,V=d.x-_,H=d.y-P,$=V*V+H*H,Q;return $>0&&(Q=((s.x-_)*V+(s.y-P)*H)/$,Q>1?(_=d.x,P=d.y):Q>0&&(_+=V*Q,P+=H*Q)),V=s.x-_,H=s.y-P,p?V*V+H*H:new G(_,P)}function je(s){return!I(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Be(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),je(s)}function ct(s,l){var d,p,_,P,V,H,$,Q;if(!s||s.length===0)throw new Error("latlngs not passed");je(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ie=ne([0,0]),fe=Pe(s),Ie=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Ie<1700&&(ie=No(s));var Xt=s.length,Ct=[];for(d=0;d<Xt;d++){var Ln=ne(s[d]);Ct.push(l.project(ne([Ln.lat-ie.lat,Ln.lng-ie.lng])))}for(d=0,p=0;d<Xt-1;d++)p+=Ct[d].distanceTo(Ct[d+1])/2;if(p===0)Q=Ct[0];else for(d=0,P=0;d<Xt-1;d++)if(V=Ct[d],H=Ct[d+1],_=V.distanceTo(H),P+=_,P>p){$=(P-p)/_,Q=[H.x-$*(H.x-V.x),H.y-$*(H.y-V.y)];break}var un=l.unproject(J(Q));return ne([un.lat+ie.lat,un.lng+ie.lng])}var bn={__proto__:null,simplify:jt,pointToSegmentDistance:El,closestPointOnSegment:Nc,clipSegment:A,_getEdgeIntersection:U,_getBitCode:W,_sqClosestPointOnSegment:_e,isFlat:je,_flat:Be,polylineCenter:ct},Gn={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new Ee(s.y,s.x)},bounds:new te([-180,-90],[180,90])},Rn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,_=this.R_MINOR/d,P=Math.sqrt(1-_*_),V=P*Math.sin(p),H=Math.tan(Math.PI/4-p/2)/Math.pow((1-V)/(1+V),P/2);return p=-d*Math.log(Math.max(H,1e-10)),new G(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,_=Math.sqrt(1-p*p),P=Math.exp(-s.y/d),V=Math.PI/2-2*Math.atan(P),H=0,$=.1,Q;H<15&&Math.abs($)>1e-7;H++)Q=_*Math.sin(V),Q=Math.pow((1-Q)/(1+Q),_/2),$=Math.PI/2-2*Math.atan(P*Q)-V,V+=$;return new Ee(V*l,s.x*l/d)}},hi={__proto__:null,LonLat:Gn,Mercator:Rn,SphericalMercator:sn},Do=r({},qe,{code:"EPSG:3395",projection:Rn,transformation:function(){var s=.5/(Math.PI*Rn.R);return Ai(s,.5,-s,.5)}()}),Oo=r({},qe,{code:"EPSG:4326",projection:Gn,transformation:Ai(1/180,1,-1/180,.5)}),XC=r({},Le,{projection:Gn,transformation:Ai(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Le.Earth=qe,Le.EPSG3395=Do,Le.EPSG3857=ms,Le.EPSG900913=hc,Le.EPSG4326=Oo,Le.Simple=XC;var Zn=Re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Se.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?I(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),l=_.maxZoom===void 0?l:Math.max(l,_.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vo=Zn.extend({initialize:function(s,l){b(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),YC=function(s,l){return new Vo(s,l)},Vi=Vo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Vo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Vo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new He;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),JC=function(s,l){return new Vi(s,l)},jo=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var _=J(p),P=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),P&&(s.style.marginLeft=-P.x+"px",s.style.marginTop=-P.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function eA(s){return new jo(s)}var Pl=jo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Pl.imagePath!="string"&&(Pl.imagePath=this._detectIconPath()),(this.options.imagePath||Pl.imagePath)+jo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,_){var P=p.exec(d);return P&&P[_]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ne("div","leaflet-default-icon-path",document.body),l=mr(s,"background-image")||mr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),X_=_n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new qn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ge(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,P=Mi(l._icon),V=d.getPixelBounds(),H=d.getPixelOrigin(),$=ve(V.min._subtract(H).add(_),V.max._subtract(H).subtract(_));if(!$.contains(P)){var Q=J((Math.max($.max.x,P.x)-$.max.x)/(V.max.x-$.max.x)-(Math.min($.min.x,P.x)-$.min.x)/(V.min.x-$.min.x),(Math.max($.max.y,P.y)-$.max.y)/(V.max.y-$.max.y)-(Math.min($.min.y,P.y)-$.min.y)/(V.min.y-$.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),at(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=O(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Mi(l._icon),_=l._map.layerPointToLatLng(p);d&&at(d,p),l._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Mc=Zn.extend({options:{icon:new Pl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=ne(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ne(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),se(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(d,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),P=!1;_!==this._shadow&&(this._removeShadow(),P=!0),_&&(se(_,l),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&P&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&We(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&at(this._icon,s),this._shadow&&at(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),X_)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new X_(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&an(this._icon,s),this._shadow&&an(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function tA(s,l){return new Mc(s,l)}var vr=Zn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Dc=vr.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=ne(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ne(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return vr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new te(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function nA(s,l){return new Dc(s,l)}var Zf=Dc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),b(this,l),this._latlng=ne(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new He(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:vr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===qe.distance){var _=Math.PI/180,P=this._mRadius/qe.R/_,V=d.project([l+P,s]),H=d.project([l-P,s]),$=V.add(H).divideBy(2),Q=d.unproject($).lat,ie=Math.acos((Math.cos(P*_)-Math.sin(l*_)*Math.sin(Q*_))/(Math.cos(l*_)*Math.cos(Q*_)))/_;(isNaN(ie)||ie===0)&&(ie=P/Math.cos(Math.PI/180*l)),this._point=$.subtract(d.getPixelOrigin()),this._radius=isNaN(ie)?0:$.x-d.project([Q,s-ie]).x,this._radiusY=$.y-V.y}else{var fe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(fe).x}this._updateBounds()}});function iA(s,l,d){return new Zf(s,l,d)}var ji=vr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=_e,_,P,V=0,H=this._parts.length;V<H;V++)for(var $=this._parts[V],Q=1,ie=$.length;Q<ie;Q++){_=$[Q-1],P=$[Q];var fe=p(s,_,P,!0);fe<l&&(l=fe,d=p(s,_,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ct(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ne(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new He,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return je(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=je(s),p=0,_=s.length;p<_;p++)d?(l[p]=ne(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new G(s,s);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Ee,_=s.length,P,V;if(p){for(V=[],P=0;P<_;P++)V[P]=this._map.latLngToLayerPoint(s[P]),d.extend(V[P]);l.push(V)}else for(P=0;P<_;P++)this._projectLatlngs(s[P],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,_,P,V,H,$;for(d=0,_=0,P=this._rings.length;d<P;d++)for($=this._rings[d],p=0,V=$.length;p<V-1;p++)H=A($[p],$[p+1],s,p,!0),H&&(l[_]=l[_]||[],l[_].push(H[0]),(H[1]!==$[p+1]||p===V-2)&&(l[_].push(H[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=jt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,_,P,V,H,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,P=this._parts.length;d<P;d++)for(H=this._parts[d],p=0,V=H.length,_=V-1;p<V;_=p++)if(!(!l&&p===0)&&El(s,H[_],H[p])<=$)return!0;return!1}});function rA(s,l){return new ji(s,l)}ji._flat=Be;var zo=ji.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Tl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=ji.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Ee&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){ji.prototype._setLatLngs.call(this,s),je(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return je(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new G(l,l);if(s=new te(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,P;p<_;p++)P=xl(this._rings[p],s,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,_,P,V,H,$,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(P=0,$=this._parts.length;P<$;P++)for(d=this._parts[P],V=0,Q=d.length,H=Q-1;V<Q;H=V++)p=d[V],_=d[H],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(l=!l);return l||ji.prototype._containsPoint.call(this,s,!0)}});function sA(s,l){return new zo(s,l)}var zi=Vi.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=I(s)?s:s.features,d,p,_;if(l){for(d=0,p=l.length;d<p;d++)_=l[d],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var P=this.options;if(P.filter&&!P.filter(s))return this;var V=Oc(s,P);return V?(V.feature=zc(s),V.defaultOptions=V.options,this.resetStyle(V),P.onEachFeature&&P.onEachFeature(s,V),this.addLayer(V)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Oc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,_=[],P=l&&l.pointToLayer,V=l&&l.coordsToLatLng||Kf,H,$,Q,ie;if(!p&&!d)return null;switch(d.type){case"Point":return H=V(p),Y_(P,s,H,l);case"MultiPoint":for(Q=0,ie=p.length;Q<ie;Q++)H=V(p[Q]),_.push(Y_(P,s,H,l));return new Vi(_);case"LineString":case"MultiLineString":return $=Vc(p,d.type==="LineString"?0:1,V),new ji($,l);case"Polygon":case"MultiPolygon":return $=Vc(p,d.type==="Polygon"?1:2,V),new zo($,l);case"GeometryCollection":for(Q=0,ie=d.geometries.length;Q<ie;Q++){var fe=Oc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);fe&&_.push(fe)}return new Vi(_);case"FeatureCollection":for(Q=0,ie=d.features.length;Q<ie;Q++){var Ie=Oc(d.features[Q],l);Ie&&_.push(Ie)}return new Vi(_);default:throw new Error("Invalid GeoJSON object.")}}function Y_(s,l,d,p){return s?s(l,d):new Mc(d,p&&p.markersInheritOptions&&p)}function Kf(s){return new Ee(s[1],s[0],s[2])}function Vc(s,l,d){for(var p=[],_=0,P=s.length,V;_<P;_++)V=l?Vc(s[_],l-1,d):(d||Kf)(s[_]),p.push(V);return p}function Qf(s,l){return s=ne(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function jc(s,l,d,p){for(var _=[],P=0,V=s.length;P<V;P++)_.push(l?jc(s[P],je(s[P])?0:l-1,d,p):Qf(s[P],p));return!l&&d&&_.length>0&&_.push(_[0].slice()),_}function Fo(s,l){return s.feature?r({},s.feature,{geometry:l}):zc(l)}function zc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Xf={toGeoJSON:function(s){return Fo(this,{type:"Point",coordinates:Qf(this.getLatLng(),s)})}};Mc.include(Xf),Zf.include(Xf),Dc.include(Xf),ji.include({toGeoJSON:function(s){var l=!je(this._latlngs),d=jc(this._latlngs,l?1:0,!1,s);return Fo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),zo.include({toGeoJSON:function(s){var l=!je(this._latlngs),d=l&&!je(this._latlngs[0]),p=jc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Fo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Vo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Fo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var P=_.toGeoJSON(s);if(d)p.push(P.geometry);else{var V=zc(P);V.type==="FeatureCollection"?p.push.apply(p,V.features):p.push(V)}}}),d?Fo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function J_(s,l){return new zi(s,l)}var oA=J_,Fc=Zn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Pe(l),b(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Cn(this._image),this},bringToBack:function(){return this._map&&An(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Pe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ne("img");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ni(this._image,d,l)},_reset:function(){var s=this._image,l=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();at(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){an(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),aA=function(s,l,d){return new Fc(s,l,d)},ev=Fc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ne("video");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],_=0;_<d.length;_++)p.push(d[_].src);this._url=d.length>0?p:[l.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var V=Ne("source");V.src=this._url[P],l.appendChild(V)}}});function lA(s,l,d){return new ev(s,l,d)}var tv=Fc.extend({_initImage:function(){var s=this._image=this._url;se(s,"leaflet-image-layer"),this._zoomAnimated&&se(s,"leaflet-zoom-animated"),this.options.className&&se(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function uA(s,l,d){return new tv(s,l,d)}var di=Zn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ee||I(s))?(this._latlng=ne(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&an(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&an(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(an(this._container,0),this._removeTimeout=setTimeout(a(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(Ge(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ne(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Cn(this._container),this},bringToBack:function(){return this._map&&An(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Vi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?at(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Se.include({_initOverlay:function(s,l,d,p){var _=l;return _ instanceof s||(_=new s(p).setContent(l)),d&&_.setLatLng(d),_}}),Zn.include({_initOverlay:function(s,l,d,p){var _=d;return _ instanceof s?(b(_,p),_._source=this):(_=l&&!p?l:new s(p,this),_.setContent(d)),_}});var Bc=di.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,di.prototype.openOn.call(this,s)},onAdd:function(s){di.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vr||this._source.on("preclick",Fe))},onRemove:function(s){di.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vr||this._source.off("preclick",Fe))},getEvents:function(){var s=di.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ne("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ne("div",s+"-content-wrapper",l);if(this._contentNode=Ne("div",s+"-content",d),As(l),fl(this._contentNode),ye(l,"contextmenu",Fe),this._tipContainer=Ne("div",s+"-tip-container",l),this._tip=Ne("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ne("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ye(p,"click",function(_){pt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,_=this.options.maxHeight,P="leaflet-popup-scrolled";_&&p>_?(l.height=_+"px",se(s,P)):Ge(s,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();at(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(mr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,_=new G(this._containerLeft,-d-this._containerBottom);_._add(Mi(this._container));var P=s.layerPointToContainerPoint(_),V=J(this.options.autoPanPadding),H=J(this.options.autoPanPaddingTopLeft||V),$=J(this.options.autoPanPaddingBottomRight||V),Q=s.getSize(),ie=0,fe=0;P.x+p+$.x>Q.x&&(ie=P.x+p-Q.x+$.x),P.x-ie-H.x<0&&(ie=P.x-H.x),P.y+d+$.y>Q.y&&(fe=P.y+d-Q.y+$.y),P.y-fe-H.y<0&&(fe=P.y-H.y),(ie||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ie,fe]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),cA=function(s,l){return new Bc(s,l)};Se.mergeOptions({closePopupOnClick:!0}),Se.include({openPopup:function(s,l,d){return this._initOverlay(Bc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Zn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Bc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Vi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ai(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof vr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Uc=di.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){di.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){di.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=di.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,_=this._container,P=p.latLngToContainerPoint(p.getCenter()),V=p.layerPointToContainerPoint(s),H=this.options.direction,$=_.offsetWidth,Q=_.offsetHeight,ie=J(this.options.offset),fe=this._getAnchor();H==="top"?(l=$/2,d=Q):H==="bottom"?(l=$/2,d=0):H==="center"?(l=$/2,d=Q/2):H==="right"?(l=0,d=Q/2):H==="left"?(l=$,d=Q/2):V.x<P.x?(H="right",l=0,d=Q/2):(H="left",l=$+(ie.x+fe.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ie).add(fe),Ge(_,"leaflet-tooltip-right"),Ge(_,"leaflet-tooltip-left"),Ge(_,"leaflet-tooltip-top"),Ge(_,"leaflet-tooltip-bottom"),se(_,"leaflet-tooltip-"+H),at(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&an(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),hA=function(s,l){return new Uc(s,l)};Se.include({openTooltip:function(s,l,d){return this._initOverlay(Uc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Zn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Uc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Vi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(ye(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ye(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var nv=jo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Kt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function dA(s){return new nv(s)}jo.Default=Pl;var Sl=Zn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ve(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Cn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(An(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,_=l.length,P;p<_;p++)P=l[p].style.zIndex,l[p]!==this._container&&P&&(d=s(d,+P));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){an(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var P=Math.min(1,(s-_.loaded)/200);an(_.el,P),P<1?l=!0:(_.active?d=!0:this._onOpaqueTile(_),_.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(B(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Ve(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ve(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var _=Math.floor(s/2),P=Math.floor(l/2),V=d-1,H=new G(+_,+P);H.z=+V;var $=this._tileCoordsToKey(H),Q=this._tiles[$];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),V>p?this._retainParent(_,P,V,p):!1)},_retainChildren:function(s,l,d,p){for(var _=2*s;_<2*s+2;_++)for(var P=2*l;P<2*l+2;P++){var V=new G(_,P);V.z=d+1;var H=this._tileCoordsToKey(V),$=this._tiles[H];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);d+1<p&&this._retainChildren(_,P,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var _=Math.round(l);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var P=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||P)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();le.any3d?Ni(s.el,_,p):at(s.el,_)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),_=l.project(s,this._tileZoom).floor(),P=l.getSize().divideBy(p*2);return new te(_.subtract(P),_.add(P))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),P=_.getCenter(),V=[],H=this.options.keepBuffer,$=new te(_.getBottomLeft().subtract([H,-H]),_.getTopRight().add([H,-H]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ie=this._tiles[Q].coords;(ie.z!==this._tileZoom||!$.contains(new G(ie.x,ie.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var fe=_.min.y;fe<=_.max.y;fe++)for(var Ie=_.min.x;Ie<=_.max.x;Ie++){var Xt=new G(Ie,fe);if(Xt.z=this._tileZoom,!!this._isValidTile(Xt)){var Ct=this._tiles[this._tileCoordsToKey(Xt)];Ct?Ct.current=!0:V.push(Xt)}}if(V.sort(function(un,Uo){return un.distanceTo(P)-Uo.distanceTo(P)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ln=document.createDocumentFragment();for(Ie=0;Ie<V.length;Ie++)this._addTile(V[Ie],Ln);this._level.el.appendChild(Ln)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Pe(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),_=p.add(d),P=l.unproject(p,s.z),V=l.unproject(_,s.z);return[P,V]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new He(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new G(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Ve(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){se(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,le.ielt9&&this.options.opacity<1&&an(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&O(a(this._tileReady,this,s,null,_)),at(_,d),this._tiles[p]={el:_,coords:s,current:!0},l.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(an(d.el,0),B(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(se(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new G(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new te(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function fA(s){return new Sl(s)}var Bo=Sl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&le.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return ye(d,"load",a(this._tileOnLoad,this,l,d)),ye(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return E(this._url,r(l,this.options))},_tileOnLoad:function(s,l){le.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=q;var d=this._tiles[s].coords;Ve(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),Sl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===q))return Sl.prototype._tileReady.call(this,s,l,d)}});function iv(s,l){return new Bo(s,l)}var rv=Bo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=b(this,l);var _=l.detectRetina&&le.retina?2:1,P=this.getTileSize();d.width=P.x*_,d.height=P.y*_,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Bo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=ve(d.project(l[0]),d.project(l[1])),_=p.min,P=p.max,V=(this._wmsVersion>=1.3&&this._crs===Oo?[_.y,_.x,P.y,P.x]:[_.x,_.y,P.x,P.y]).join(","),H=Bo.prototype.getTileUrl.call(this,s);return H+z(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function pA(s,l){return new rv(s,l)}Bo.WMS=rv,iv.wms=pA;var Fi=Zn.extend({options:{padding:.1},initialize:function(s){b(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,l),P=p.multiplyBy(-d).add(_).subtract(this._map._getNewPixelOrigin(s,l));le.any3d?Ni(this._container,P,d):at(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new te(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sv=Fi.extend({options:{tolerance:0},getEvents:function(){var s=Fi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ye(s,"mousemove",this._onMouseMove,this),ye(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Ve(this._container),We(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=le.retina?2:1;at(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Fi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,_;for(_=0;_<l.length;_++){if(p=Number(l[_]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,_,P,V=s._parts,H=V.length,$=this._ctx;if(H){for($.beginPath(),d=0;d<H;d++){for(p=0,_=V[d].length;p<_;p++)P=V[d][p],$[p?"lineTo":"moveTo"](P.x,P.y);l&&$.closePath()}this._fillStroke($,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(d.save(),d.scale(1,_)),d.beginPath(),d.arc(l.x,l.y/_,p,0,Math.PI*2,!1),_!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ge(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(se(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function ov(s){return le.canvas?new sv(s):null}var Il=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),mA={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Il("shape");se(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Il("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Ve(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Il("stroke")),_.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=I(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(_.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Il("fill")),_.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(_.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Cn(s._container)},_bringToBack:function(s){An(s._container)}},Hc=le.vml?Il:dc,Cl=Fi.extend({_initContainer:function(){this._container=Hc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Hc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),We(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),at(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Hc("path");s.options.className&&se(l,s.options.className),s.options.interactive&&se(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ve(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,mo(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,_="a"+d+","+p+" 0 1,0 ",P=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+_+d*2+",0 "+_+-d*2+",0 ";this._setPath(s,P)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Cn(s._path)},_bringToBack:function(s){An(s._path)}});le.vml&&Cl.include(mA);function av(s){return le.svg||le.vml?new Cl(s):null}Se.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&ov(s)||av(s)}});var lv=zo.extend({initialize:function(s,l){zo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Pe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function gA(s,l){return new lv(s,l)}Cl.create=Hc,Cl.pointsToPath=mo,zi.geometryToLayer=Oc,zi.coordsToLatLng=Kf,zi.coordsToLatLngs=Vc,zi.latLngToCoords=Qf,zi.latLngsToCoords=jc,zi.getFeature=Fo,zi.asFeature=zc,Se.mergeOptions({boxZoom:!0});var uv=_n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){We(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),$n(),Io(),this._startPoint=this._map.mouseEventToContainerPoint(s),ye(document,{contextmenu:ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new te(this._point,this._startPoint),d=l.getSize();at(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Ve(this._box),Ge(this._container,"leaflet-crosshair")),yn(),Co(),We(document,{contextmenu:ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new He(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Se.addInitHook("addHandler","boxZoom",uv),Se.mergeOptions({doubleClickZoom:!0});var cv=_n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,_=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(_):l.setZoomAround(s.containerPoint,_)}});Se.addInitHook("addHandler","doubleClickZoom",cv),Se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var hv=_n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new qn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ge(this._map._container,"leaflet-grab"),Ge(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Pe(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-l+d)%s+l-d,P=(p+l+d)%s-l-d,V=Math.abs(_+d)<Math.abs(P+d)?_:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,V=d.easeLinearity,H=_.multiplyBy(V/P),$=H.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,$),ie=H.multiplyBy(Q/$),fe=Q/(d.inertiaDeceleration*V),Ie=ie.multiplyBy(-fe/2).round();!Ie.x&&!Ie.y?l.fire("moveend"):(Ie=l._limitOffset(Ie,l.options.maxBounds),O(function(){l.panBy(Ie,{duration:fe,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Se.addInitHook("addHandler","dragging",hv),Se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var dv=_n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ye(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),We(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,_;for(p=0,_=d.left.length;p<_;p++)l[d.left[p]]=[-1*s,0];for(p=0,_=d.right.length;p<_;p++)l[d.right[p]]=[s,0];for(p=0,_=d.down.length;p<_;p++)l[d.down[p]]=[0,s];for(p=0,_=d.up.length;p<_;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,_;for(p=0,_=d.zoomIn.length;p<_;p++)l[d.zoomIn[p]]=s;for(p=0,_=d.zoomOut.length;p<_;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){We(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var _=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(_)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;ai(s)}}});Se.addInitHook("addHandler","keyboard",dv),Se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var fv=_n.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){We(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=ml(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),ai(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,P=d?Math.ceil(_/d)*d:_,V=s._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,V&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+V):s.setZoomAround(this._lastMousePos,l+V))}});Se.addInitHook("addHandler","scrollWheelZoom",fv);var yA=600;Se.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var pv=_n.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){We(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new G(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",pt),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),yA),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){We(document,"touchend",pt),We(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),We(document,"touchend touchcancel contextmenu",this._cancel,this),We(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new G(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Se.addInitHook("addHandler","tapHold",pv),Se.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var mv=_n.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ge(this._map._container,"leaflet-touch-zoom"),We(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),pt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),_=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(_,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&_<1||this._zoom>l.getMaxZoom()&&_>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var P=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var V=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(V,this,!0),pt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),We(document,"touchmove",this._onTouchMove,this),We(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Se.addInitHook("addHandler","touchZoom",mv),Se.BoxZoom=uv,Se.DoubleClickZoom=cv,Se.Drag=hv,Se.Keyboard=dv,Se.ScrollWheelZoom=fv,Se.TapHold=pv,Se.TouchZoom=mv,n.Bounds=te,n.Browser=le,n.CRS=Le,n.Canvas=sv,n.Circle=Zf,n.CircleMarker=Dc,n.Class=ae,n.Control=ln,n.DivIcon=nv,n.DivOverlay=di,n.DomEvent=bs,n.DomUtil=Gf,n.Draggable=qn,n.Evented=Re,n.FeatureGroup=Vi,n.GeoJSON=zi,n.GridLayer=Sl,n.Handler=_n,n.Icon=jo,n.ImageOverlay=Fc,n.LatLng=Ee,n.LatLngBounds=He,n.Layer=Zn,n.LayerGroup=Vo,n.LineUtil=bn,n.Map=Se,n.Marker=Mc,n.Mixin=Lc,n.Path=vr,n.Point=G,n.PolyUtil=Mo,n.Polygon=zo,n.Polyline=ji,n.Popup=Bc,n.PosAnimation=yl,n.Projection=hi,n.Rectangle=lv,n.Renderer=Fi,n.SVG=Cl,n.SVGOverlay=tv,n.TileLayer=Bo,n.Tooltip=Uc,n.Transformation=Zt,n.Util=D,n.VideoOverlay=ev,n.bind=a,n.bounds=ve,n.canvas=ov,n.circle=iA,n.circleMarker=nA,n.control=ui,n.divIcon=dA,n.extend=r,n.featureGroup=JC,n.geoJSON=J_,n.geoJson=oA,n.gridLayer=fA,n.icon=eA,n.imageOverlay=aA,n.latLng=ne,n.latLngBounds=Pe,n.layerGroup=YC,n.map=bo,n.marker=tA,n.point=J,n.polygon=sA,n.polyline=rA,n.popup=cA,n.rectangle=gA,n.setOptions=b,n.stamp=h,n.svg=av,n.svgOverlay=uA,n.tileLayer=iv,n.tooltip=hA,n.transformation=Ai,n.version=i,n.videoOverlay=lA;var _A=window.L;n.noConflict=function(){return window.L=_A,this},window.L=n})})(Bg,Bg.exports);var tl=Bg.exports;const ZC=vx(tl);function zf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function KC(t,e){return e==null?function(i,r){const o=j.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=j.useRef();o.current||(o.current=t(i,r));const a=j.useRef(i),{instance:u}=o.current;return j.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function QC(t,e){j.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function lF(t){return function(n){const i=G_(),r=t(Z_(n,i),i);return nF(i.map,n.attribution),GC(r.current,n.eventHandlers),QC(r.current,i),r}}function uF(t,e){const n=j.useRef();j.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function cF(t){return function(n){const i=G_(),r=t(Z_(n,i),i);return GC(r.current,n.eventHandlers),QC(r.current,i),uF(r.current,n),r}}function K_(t,e){const n=KC(t,e),i=cF(n);return oF(i)}function hF(t,e){const n=KC(t,e),i=lF(n);return aF(i)}function dF(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Q_(){return G_().map}function fF(t){const e=Q_();return j.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const _x=K_(function({center:e,children:n,...i},r){const o=new tl.CircleMarker(e,i);return zf(o,q_(r,{overlayContainer:o}))},iF);function Ug(){return Ug=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ug.apply(this,arguments)}function pF({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[v]=j.useState({className:r,id:o,style:u}),[T,R]=j.useState(null);j.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const b=j.useCallback(C=>{if(C!==null&&T===null){const E=new tl.Map(C,m);n!=null&&f!=null?E.setView(n,f):t!=null&&E.fitBounds(t,e),h!=null&&E.whenReady(h),R(sF(E))}},[]);j.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const z=T?Zs.createElement(qC,{value:T},i):a??null;return Zs.createElement("div",Ug({},v,{ref:b}),z)}const mF=j.forwardRef(pF),gF=K_(function({positions:e,...n},i){const r=new tl.Polygon(e,n);return zf(r,q_(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),yF=K_(function({positions:e,...n},i){const r=new tl.Polyline(e,n);return zf(r,q_(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),_F=hF(function({url:e,...n},i){const r=new tl.TileLayer(e,Z_(n,i));return zf(r,i)},function(e,n,i){dF(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete ZC.Icon.Default.prototype._getIconUrl;ZC.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function vF({devMode:t}){const[e,n]=j.useState(DC),[i,r]=j.useState(MC);return fF({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?x.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:x.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[x.jsxs("div",{children:["zoom: ",e]}),x.jsxs("div",{children:["lat: ",i[0]]}),x.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function wF({hood:t}){const e=Q_();return j.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function xF(){const t=Q_(),[e,n]=j.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return x.jsx(ue.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:x.jsx(ue.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:x.jsx(jC,{size:20,className:"text-white"})})})}function TF({point:t,onClose:e}){const n=t.capturedBy?Ko(t.capturedBy):"#495057",i=Vf(t),r=t.status==="ghost";return x.jsx(ue.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:x.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${n}40`},children:[x.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:x.jsx(Jz,{size:16,className:"text-white/50"})}),x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${n}20`,border:`1px solid ${n}40`},children:r?x.jsx(Hz,{size:20,className:"text-white/30"}):t.capturedBy?x.jsx(UC,{size:20,style:{color:n}}):x.jsx($_,{size:20,style:{color:n}})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),r&&x.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),x.jsx("p",{className:"text-sm text-white/40",children:t.area}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&x.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),x.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[x.jsxs("span",{className:"text-lg font-bold",style:{color:n},children:[i," pts"]}),t.capturedBy?x.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:n},children:["Captured by ",t.capturedBy]}):x.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:r?"Gone":"Unclaimed"})]})]})]})]})})}const nm=[null,...Yr];function EF(){const{player:t,artPoints:e,captureArt:n}=cc(),[i,r]=j.useState(null),[o,a]=j.useState(!1),[u,h]=j.useState(e),[f,m]=j.useState(zg.vysocany);j.useEffect(()=>{h(e)},[e]);const g=C=>{o?h(E=>E.map(I=>{if(I.id===C.id){const q=(nm.indexOf(I.capturedBy)+1)%nm.length;return{...I,capturedBy:nm[q]}}return I})):r(C)},v=()=>{h(e.map(C=>({...C,capturedBy:null})))},T=o?u:e,R=j.useMemo(()=>Mz(T),[T]),b=j.useMemo(()=>OC(T),[T]),z=Object.values(b).reduce((C,E)=>C+E,0)||1;return x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:Object.entries(b).map(([C,E])=>{const I=E/z*100;return x.jsx(ue.div,{className:"h-full",style:{backgroundColor:Ko(C)},initial:{width:0},animate:{width:`${I}%`},transition:{duration:.8}},C)})}),x.jsxs("div",{className:"absolute top-10 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Teams"}),x.jsx("div",{className:"space-y-1.5",children:Yr.map(C=>x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:Ko(C)}}),x.jsx("span",{className:"text-xs text-white/70 capitalize font-medium",children:C}),x.jsxs("span",{className:"text-xs text-white/40 ml-auto",children:[b[C]||0," pts"]})]},C))}),x.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Points"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white/40"}),x.jsx("span",{className:"text-xs text-white/40",children:"Active"})]}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-dashed border-white/20"}),x.jsx("span",{className:"text-xs text-white/30",children:"Ghost"})]})]}),x.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),x.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),x.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(zg).map(C=>x.jsx(ue.button,{onClick:()=>m(C),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f.id===C.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:C.name},C.id))}),x.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[x.jsx(ue.button,{onClick:()=>a(!o),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${o?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:x.jsx(Fz,{size:18})}),o&&x.jsx(ue.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:v,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:x.jsx(FC,{size:18})})]}),x.jsx(va,{children:o&&x.jsx(ue.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:x.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),x.jsxs(mF,{center:MC,zoom:DC,minZoom:Az,maxZoom:kz,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[x.jsx(_F,{url:dx.tileUrl,attribution:dx.attribution}),x.jsx(xF,{}),x.jsx(vF,{devMode:o}),x.jsx(wF,{hood:f}),x.jsx(yF,{positions:fx.map(C=>C.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),fx.map(C=>x.jsx(_x,{center:C.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},C.name)),Object.entries(R).map(([C,E])=>E.map((I,F)=>x.jsx(gF,{positions:I.polygon,pathOptions:{color:Ko(C),fillColor:Ko(C),fillOpacity:.25,weight:2,opacity:.7,interactive:!1}},`${C}-territory-${F}`))),T.map(C=>{const E=C.capturedBy?Ko(C.capturedBy):"#ffffff",I=!!C.capturedBy,F=C.status==="ghost";return x.jsx(_x,{center:C.location,radius:8,pathOptions:{color:o?"#a855f7":F?"#6b7280":E,fillColor:I?E:F?"#374151":"#0a0a0f",fillOpacity:F?.4:I?.8:1,weight:o?3:2,opacity:F?.5:1,dashArray:F?"3, 3":void 0},eventHandlers:{click:q=>{q.originalEvent.stopPropagation(),g(C)}}},C.id)})]}),x.jsx(va,{children:i&&x.jsx(TF,{point:i,onClose:()=>r(null)})})]})}function PF(){return x.jsx(ue.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:x.jsx(EF,{})})}function _h({position:t,isAligned:e}){const n={"top-left":"top-0 left-0 border-t-4 border-l-4 rounded-tl-lg","top-right":"top-0 right-0 border-t-4 border-r-4 rounded-tr-lg","bottom-left":"bottom-0 left-0 border-b-4 border-l-4 rounded-bl-lg","bottom-right":"bottom-0 right-0 border-b-4 border-r-4 rounded-br-lg"};return x.jsx(ue.div,{className:`absolute w-8 h-8 ${n[t]}`,animate:{borderColor:e?"#22c55e":"rgba(255,255,255,0.6)",scale:e?1.1:1},transition:{duration:.2}})}function SF({result:t,photo:e,teamColor:n,onClose:i,onShare:r}){var o,a;return x.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black flex flex-col z-30",children:[x.jsxs("div",{className:"flex-1 relative",children:[x.jsx("img",{src:e,alt:"Captured",className:"w-full h-full object-cover"}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/50"}),x.jsx(ue.div,{className:"absolute top-8 left-1/2 -translate-x-1/2",initial:{scale:0,y:-50},animate:{scale:1,y:0},transition:{type:"spring",delay:.2},children:x.jsxs("div",{className:"bg-emerald-500 px-6 py-2 rounded-full flex items-center gap-2",children:[x.jsx(gx,{size:20,strokeWidth:3}),x.jsx("span",{className:"font-bold",children:"CAPTURED!"})]})}),x.jsx(ue.div,{className:"absolute top-20 left-1/2 -translate-x-1/2",initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.4},children:x.jsxs("div",{className:"px-8 py-3 rounded-2xl text-3xl font-black flex items-center gap-2",style:{backgroundColor:n},children:[x.jsx(eF,{size:28}),"+",t.points]})})]}),x.jsxs(ue.div,{className:"p-6 space-y-4",initial:{y:100},animate:{y:0},transition:{delay:.3},children:[x.jsxs("div",{className:"text-center",children:[x.jsx("h2",{className:"text-2xl font-bold text-white",children:(o=t.art)==null?void 0:o.name}),x.jsxs("p",{className:"text-white/50",children:[(a=t.art)==null?void 0:a.area,"  Added to your gallery"]})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsxs(ue.button,{onClick:r,className:"flex-1 py-4 rounded-2xl font-semibold bg-white/10 border border-white/10 flex items-center justify-center gap-2",whileTap:{scale:.98},children:[x.jsx(Zz,{size:20}),"Share"]}),x.jsxs(ue.button,{onClick:i,className:"flex-1 py-4 rounded-2xl font-semibold text-black bg-white flex items-center justify-center gap-2",whileTap:{scale:.98},children:[x.jsx(gx,{size:20}),"Done"]})]})]})]})}function IF({onClose:t}){return x.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/95 z-40 flex flex-col p-6",children:[x.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[x.jsx(ue.div,{initial:{scale:0},animate:{scale:1},className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mb-8",children:x.jsx(HC,{size:48})}),x.jsx("h1",{className:"text-3xl font-bold mb-4",children:"How to Flash"}),x.jsxs("div",{className:"space-y-6 max-w-xs",children:[x.jsxs("div",{className:"flex items-start gap-4 text-left",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:x.jsx("span",{className:"font-bold",children:"1"})}),x.jsxs("p",{className:"text-white/70",children:["Find street art on the map and get within ",x.jsx("span",{className:"text-emerald-400 font-medium",children:"100m"})]})]}),x.jsxs("div",{className:"flex items-start gap-4 text-left",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:x.jsx("span",{className:"font-bold",children:"2"})}),x.jsxs("p",{className:"text-white/70",children:["Align the artwork inside the ",x.jsx("span",{className:"text-emerald-400 font-medium",children:"viewfinder frame"})]})]}),x.jsxs("div",{className:"flex items-start gap-4 text-left",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:x.jsx("span",{className:"font-bold",children:"3"})}),x.jsxs("p",{className:"text-white/70",children:["Corners turn ",x.jsx("span",{className:"text-emerald-400 font-medium",children:"green"})," when aligned - tap to capture!"]})]})]}),x.jsxs("div",{className:"mt-8 flex gap-4",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 border-2 border-white/30 rounded-lg mb-2 flex items-center justify-center",children:x.jsx("span",{className:"text-3xl",children:""})}),x.jsx("p",{className:"text-xs text-red-400",children:"BAD"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 border-2 border-emerald-500 rounded-lg mb-2 flex items-center justify-center",children:x.jsx("span",{className:"text-3xl",children:""})}),x.jsx("p",{className:"text-xs text-emerald-400",children:"GOOD"})]})]})]}),x.jsx(ue.button,{onClick:t,className:"w-full py-4 rounded-2xl font-bold bg-white text-black",whileTap:{scale:.98},children:"Got it!"})]})}function CF(){const{player:t,pendingCapture:e,scanResult:n,isScanning:i,startCapture:r,confirmCapture:o,cancelCapture:a,setScanResult:u,findNearestArt:h,captureArt:f}=cc(),[m,g]=j.useState(!1),[v,T]=j.useState(null),[R,b]=j.useState(null),[z,C]=j.useState("loading"),[E,I]=j.useState(null),[F,q]=j.useState(!1),[Z,N]=j.useState(!1),[S,k]=j.useState(null),[M,O]=j.useState(null),[B,D]=j.useState(0),ae=j.useRef(null),Oe=j.useRef(null),Te=j.useRef(null),Re=j.useRef(null),G=t.team?Xe[t.team].hex:"#22c55e";j.useEffect(()=>{!localStorage.getItem("scanner-instructions-seen")&&t.team&&N(!0)},[t.team]);const ce=()=>{localStorage.setItem("scanner-instructions-seen","true"),N(!1)};j.useEffect(()=>{if(!navigator.geolocation){C("error");return}const ne=navigator.geolocation.watchPosition(Le=>{const qe={lat:Le.coords.latitude,lng:Le.coords.longitude};b(qe),C("success");const rn=h(qe.lat,qe.lng,200);I(rn)},Le=>{console.error("Location error:",Le),C("error")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3});return()=>navigator.geolocation.clearWatch(ne)},[h]);const J=j.useCallback(async()=>{try{const ne=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});ae.current&&(ae.current.srcObject=ne,Oe.current=ne,g(!0),T(null))}catch(ne){console.error("Camera error:",ne),T("Camera access denied")}},[]),te=j.useCallback(()=>{Oe.current&&(Oe.current.getTracks().forEach(ne=>ne.stop()),Oe.current=null),g(!1)},[]);j.useEffect(()=>(J(),()=>te()),[J,te]);const ve=j.useCallback(()=>{if(!E||Re.current)return;let ne=0;Re.current=setInterval(()=>{if(ne+=5,D(ne),ne>=25&&q(!0),ne>=100){clearInterval(Re.current),Re.current=null;const Le=ae.current,qe=Te.current;if(Le&&qe){qe.width=Le.videoWidth||640,qe.height=Le.videoHeight||480,qe.getContext("2d").drawImage(Le,0,0);const sn=qe.toDataURL("image/jpeg",.9);k(sn);const Zt=f(E.id);O({...Zt,art:E})}D(0),q(!1)}},50)},[E,f]),He=j.useCallback(()=>{Re.current&&(clearInterval(Re.current),Re.current=null),D(0),q(!1)},[]);j.useEffect(()=>()=>{Re.current&&clearInterval(Re.current)},[]);const Pe=()=>{k(null),O(null)},Ee=async()=>{var ne,Le;if(S&&navigator.share)try{const qe=await fetch(S).then(sn=>sn.blob()),rn=new File([qe],"street-art.jpg",{type:"image/jpeg"});await navigator.share({title:`Captured: ${(ne=M==null?void 0:M.art)==null?void 0:ne.name}`,text:`I captured ${(Le=M==null?void 0:M.art)==null?void 0:Le.name} in Street Art CTF!`,files:[rn]})}catch{console.log("Share cancelled")}};return t.team?x.jsxs(ue.div,{className:"flex-1 relative bg-black overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:[x.jsx("canvas",{ref:Te,className:"hidden"}),x.jsx("video",{ref:ae,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}),v&&x.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center bg-black",children:[x.jsx(Fg,{size:48,className:"text-white/20 mb-4"}),x.jsx("p",{className:"text-white/50",children:v})]}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-transparent to-black/70 pointer-events-none"}),!S&&E&&x.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:x.jsxs("div",{className:"relative w-72 h-72",children:[x.jsx(_h,{position:"top-left",isAligned:F}),x.jsx(_h,{position:"top-right",isAligned:F}),x.jsx(_h,{position:"bottom-left",isAligned:F}),x.jsx(_h,{position:"bottom-right",isAligned:F}),x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:x.jsx(ue.div,{animate:{opacity:F?0:.3},className:"w-8 h-8",children:x.jsx(jC,{size:32,className:"text-white"})})}),B>0&&x.jsx("svg",{className:"absolute inset-0 w-full h-full -rotate-90",children:x.jsx("circle",{cx:"144",cy:"144",r:"140",fill:"none",stroke:F?"#22c55e":"rgba(255,255,255,0.3)",strokeWidth:"4",strokeDasharray:`${B/100*879} 879`})})]})}),x.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex items-center justify-between safe-top",children:[x.jsxs("div",{className:"px-4 py-2 rounded-2xl flex items-center gap-2 bg-black/40 backdrop-blur-sm border",style:{borderColor:`${G}40`},children:[x.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:G}}),x.jsx("span",{className:"text-sm font-medium text-white/90 capitalize",children:t.team})]}),x.jsx("div",{className:"flex items-center gap-2",children:x.jsx(ue.button,{onClick:()=>N(!0),className:"w-10 h-10 rounded-xl bg-black/40 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:x.jsx(mx,{size:18,className:"text-white/70"})})})]}),E&&!S&&x.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"absolute top-20 left-4 right-4",children:x.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-4 border border-emerald-500/30",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center",children:x.jsx(HC,{size:18,className:"text-emerald-400"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-semibold text-white text-sm",children:E.name}),x.jsxs("p",{className:"text-xs text-white/40",children:[E.distance,"m  Hold to capture"]})]}),x.jsx("div",{className:"text-right",children:x.jsxs("span",{className:"text-lg font-bold text-emerald-400",children:["+",Vf(E)]})})]})})}),!E&&z==="success"&&!S&&x.jsx("div",{className:"absolute top-20 left-4 right-4",children:x.jsxs("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-4 border border-amber-500/30 text-center",children:[x.jsx($_,{size:24,className:"mx-auto mb-2 text-amber-400"}),x.jsx("p",{className:"text-white/70 text-sm font-medium",children:"No street art nearby"}),x.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Check the map and get within 100m of a spot"})]})}),z==="loading"&&!S&&x.jsx("div",{className:"absolute top-20 left-4 right-4",children:x.jsxs("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-4 border border-white/10 text-center",children:[x.jsx($z,{size:24,className:"mx-auto mb-2 text-white/50 animate-spin"}),x.jsx("p",{className:"text-white/50 text-sm",children:"Getting your location..."})]})}),!S&&x.jsxs("div",{className:"absolute bottom-24 left-0 right-0 flex flex-col items-center gap-4",children:[x.jsxs(ue.button,{onTouchStart:ve,onTouchEnd:He,onMouseDown:ve,onMouseUp:He,onMouseLeave:He,disabled:!E||z!=="success",className:"relative w-24 h-24 rounded-full flex items-center justify-center disabled:opacity-30",whileTap:{scale:.95},children:[x.jsx(ue.div,{className:"absolute inset-0 rounded-full border-4",animate:{borderColor:F?"#22c55e":E?"rgba(255,255,255,0.5)":"rgba(255,255,255,0.2)",scale:F?1.1:1}}),x.jsx(ue.div,{className:"w-20 h-20 rounded-full flex items-center justify-center",animate:{backgroundColor:F?"#22c55e":"#ffffff",scale:B>0?.9:1},children:x.jsx(Fg,{size:32,className:F?"text-white":"text-black"})})]}),x.jsx("p",{className:"text-white/40 text-xs",children:E?"Hold to capture":"Get closer to street art"})]}),x.jsx(va,{children:Z&&x.jsx(IF,{onClose:ce})}),x.jsx(va,{children:S&&(M==null?void 0:M.success)&&x.jsx(SF,{result:M,photo:S,teamColor:G,onClose:Pe,onShare:Ee})}),x.jsx(va,{children:M&&!M.success&&x.jsx(ue.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0},className:"absolute bottom-32 left-4 right-4",children:x.jsxs("div",{className:"bg-red-500/90 backdrop-blur-sm rounded-2xl p-4 text-center",children:[x.jsx("p",{className:"font-semibold text-white",children:M.message}),x.jsx("button",{onClick:()=>O(null),className:"mt-2 text-white/70 text-sm underline",children:"Dismiss"})]})})})]}):x.jsx(ue.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:x.jsx(mx,{size:36,className:"text-amber-500"})}),x.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),x.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start capturing street art"})]})})}const AF=[{id:1,name:"StreetKing",team:"red",score:1250,captures:12},{id:2,name:"ArtHunter",team:"blue",score:980,captures:9},{id:3,name:"SprayQueen",team:"red",score:650,captures:6},{id:4,name:"UrbanExplorer",team:"blue",score:580,captures:5},{id:5,name:"WallWalker",team:"red",score:420,captures:4},{id:6,name:"NightOwl",team:"blue",score:380,captures:3}],kF={red:"Crimson",blue:"Azure"};function bF({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return x.jsxs(ue.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[x.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${Xe[t].hex}15 0%, transparent 60%)`}}),x.jsx(ue.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:Xe[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),x.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${Xe[t].hex}30`},children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?x.jsx(Bz,{size:20,className:"text-white"}):x.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-semibold text-white",children:kF[t]}),x.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[x.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Xe[t].hex}}),x.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-2xl font-bold",style:{color:Xe[t].hex},children:e.toLocaleString()}),x.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function RF({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return x.jsxs(ue.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[x.jsx("div",{className:"w-8 flex justify-center",children:i?x.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:x.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):x.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),x.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${Xe[t.team].hex}20`,color:Xe[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&x.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),x.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),x.jsx("div",{className:"text-right",children:x.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function LF(){var h;const{teamScores:t,player:e}=cc(),i=Object.entries(t).filter(([f])=>Xe[f]).sort((f,m)=>m[1]-f[1]),r=Object.values(t).reduce((f,m)=>f+m,0)||1,o=AF.filter(f=>Xe[f.team]);e.team&&e.score>0&&o.push({id:"current",name:e.name,team:e.team,score:e.score,captures:((h=e.capturedArt)==null?void 0:h.length)||0});const a=o.sort((f,m)=>m.score-f.score),u={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return x.jsxs(ue.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:u,children:[x.jsx(ue.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:x.jsx(jf,{size:20,className:"text-white"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),x.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Qz,{size:16,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),x.jsx("div",{className:"space-y-3",children:i.map(([f,m],g)=>x.jsx(bF,{team:f,score:m,rank:g,totalScore:r},f))})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Uz,{size:16,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),x.jsx("div",{className:"space-y-2",children:a.map((f,m)=>x.jsx(RF,{player:f,rank:m,isCurrentPlayer:f.id==="current"},f.id))})]})]})}function im({icon:t,label:e,value:n,color:i}){return x.jsxs(ue.div,{className:"glass rounded-xl p-4 text-center",whileHover:{scale:1.02},children:[x.jsx(t,{size:24,className:"mx-auto mb-2",style:{color:i}}),x.jsx("p",{className:"text-2xl font-bold",children:n}),x.jsx("p",{className:"text-xs text-gray-400",children:e})]})}function NF({art:t}){var e,n;return x.jsxs(ue.div,{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[x.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${(e=Xe[t.capturedBy])==null?void 0:e.hex}30`},children:x.jsx(Wd,{size:20,style:{color:(n=Xe[t.capturedBy])==null?void 0:n.hex}})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-sm",children:t.name}),x.jsxs("p",{className:"text-xs text-gray-400",children:[t.points," pts"]})]}),x.jsx(du,{size:18,className:"text-gray-500"})]})}function rm({icon:t,label:e,onClick:n}){return x.jsxs(ue.button,{onClick:n,className:"w-full flex items-center gap-3 p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-colors",whileTap:{scale:.98},children:[x.jsx(t,{size:20,className:"text-gray-400"}),x.jsx("span",{className:"flex-1 text-left",children:e}),x.jsx(du,{size:18,className:"text-gray-500"})]})}function MF(){const{player:t,artPoints:e,joinTeam:n,resetAll:i}=cc(),[r,o]=j.useState(!1),[a,u]=j.useState(t.name),h=(e==null?void 0:e.filter(m=>t.capturedArt.includes(m.id)))||[],f=t.team?Xe[t.team].hex:"#64748b";return x.jsxs(ue.div,{className:"flex-1 overflow-y-auto pb-20 px-4 pt-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsxs(ue.div,{className:"relative inline-block",whileHover:{scale:1.05},children:[x.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-3",style:{background:`linear-gradient(135deg, ${f}50, ${f}20)`,border:`3px solid ${f}`},children:x.jsx(WC,{size:40,style:{color:f}})}),x.jsx("button",{className:"absolute bottom-2 right-0 w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:x.jsx(Fg,{size:14})})]}),r?x.jsx("input",{type:"text",value:a,onChange:m=>u(m.target.value),onBlur:()=>o(!1),className:"text-xl font-bold bg-transparent border-b-2 border-white/30 text-center outline-none",autoFocus:!0}):x.jsx("h1",{className:"text-xl font-bold cursor-pointer",onClick:()=>o(!0),children:t.name}),t.team&&x.jsxs("p",{className:"text-sm mt-1",style:{color:f},children:[t.team.charAt(0).toUpperCase()+t.team.slice(1)," Team"]})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[x.jsx(im,{icon:jf,label:"Score",value:t.score,color:"#eab308"}),x.jsx(im,{icon:Wd,label:"Captures",value:h.length,color:"#22c55e"}),x.jsx(im,{icon:$_,label:"Sectors",value:"3",color:"#3b82f6"})]}),h.length>0&&x.jsxs("div",{className:"mb-6",children:[x.jsxs("h2",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[x.jsx(Wd,{size:16})," YOUR CAPTURES"]}),x.jsx("div",{className:"space-y-2",children:h.map(m=>x.jsx(NF,{art:m},m.id))})]}),!t.team&&x.jsxs("div",{className:"mb-6",children:[x.jsx("h2",{className:"text-sm font-medium text-gray-400 mb-3",children:"SELECT YOUR TEAM"}),x.jsx("div",{className:"grid grid-cols-2 gap-2",children:["red","blue"].map(m=>x.jsxs(ue.button,{onClick:()=>n(m),className:"p-4 rounded-xl bg-white/5 text-center",style:{borderColor:Xe[m].hex,borderWidth:2},whileTap:{scale:.95},children:[x.jsx("div",{className:"w-8 h-8 rounded-full mx-auto mb-2",style:{backgroundColor:Xe[m].hex}}),x.jsx("p",{className:"text-sm font-medium capitalize",children:m==="red"?"Crimson":"Azure"})]},m))})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("h2",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[x.jsx(Gz,{size:16})," SETTINGS"]}),x.jsx(rm,{icon:jz,label:"Notifications"}),x.jsx(rm,{icon:Kz,label:"Privacy"}),x.jsx(rm,{icon:qz,label:"Reset Game Data",onClick:i})]}),x.jsx("p",{className:"text-center text-xs text-gray-500 mt-6",children:"Street Art CTF v1.0.0"})]})}const DF=[{path:"/",icon:Wz,label:"Home"},{path:"/map",icon:zC,label:"Map"},{path:"/scanner",icon:BC,label:"Scan"},{path:"/leaderboard",icon:jf,label:"Ranks"},{path:"/profile",icon:WC,label:"You"}];function OF(){return x.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[x.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),x.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:DF.map(({path:t,icon:e,label:n})=>x.jsx(iR,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>x.jsxs(ue.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&x.jsx(ue.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),x.jsx(ue.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:x.jsx(e,{size:20,strokeWidth:i?2.5:2})}),x.jsx(ue.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function VF(){const t=Ga();return x.jsx(Dz,{children:x.jsxs("div",{className:"h-full w-full flex flex-col",children:[x.jsx(va,{mode:"wait",children:x.jsxs($2,{location:t,children:[x.jsx(Wo,{path:"/",element:x.jsx(tF,{})}),x.jsx(Wo,{path:"/map",element:x.jsx(PF,{})}),x.jsx(Wo,{path:"/scanner",element:x.jsx(CF,{})}),x.jsx(Wo,{path:"/leaderboard",element:x.jsx(LF,{})}),x.jsx(Wo,{path:"/profile",element:x.jsx(MF,{})})]},t.pathname)}),x.jsx(OF,{})]})})}sm.createRoot(document.getElementById("root")).render(x.jsx(Zs.StrictMode,{children:x.jsx(J2,{children:x.jsx(VF,{})})}));
