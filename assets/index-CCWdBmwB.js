function GA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var ZA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j1={exports:{}},sf={},F1={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic=Symbol.for("react.element"),KA=Symbol.for("react.portal"),QA=Symbol.for("react.fragment"),YA=Symbol.for("react.strict_mode"),XA=Symbol.for("react.profiler"),JA=Symbol.for("react.provider"),eb=Symbol.for("react.context"),tb=Symbol.for("react.forward_ref"),nb=Symbol.for("react.suspense"),ib=Symbol.for("react.memo"),rb=Symbol.for("react.lazy"),Lv=Symbol.iterator;function sb(t){return t===null||typeof t!="object"?null:(t=Lv&&t[Lv]||t["@@iterator"],typeof t=="function"?t:null)}var z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B1=Object.assign,U1={};function rl(t,e,n){this.props=t,this.context=e,this.refs=U1,this.updater=n||z1}rl.prototype.isReactComponent={};rl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function H1(){}H1.prototype=rl.prototype;function Yg(t,e,n){this.props=t,this.context=e,this.refs=U1,this.updater=n||z1}var Xg=Yg.prototype=new H1;Xg.constructor=Yg;B1(Xg,rl.prototype);Xg.isPureReactComponent=!0;var Mv=Array.isArray,W1=Object.prototype.hasOwnProperty,Jg={current:null},$1={key:!0,ref:!0,__self:!0,__source:!0};function q1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)W1.call(e,i)&&!$1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:ic,type:t,key:o,ref:a,props:r,_owner:Jg.current}}function ob(t,e){return{$$typeof:ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ey(t){return typeof t=="object"&&t!==null&&t.$$typeof===ic}function ab(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ov=/\/+/g;function fp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ab(""+t.key):e.toString(36)}function Nh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ic:case KA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+fp(a,0):i,Mv(r)?(n="",t!=null&&(n=t.replace(Ov,"$&/")+"/"),Nh(r,e,n,"",function(f){return f})):r!=null&&(ey(r)&&(r=ob(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Ov,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Mv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+fp(o,u);a+=Nh(o,e,n,h,r)}else if(h=sb(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+fp(o,u++),a+=Nh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function th(t,e,n){if(t==null)return t;var i=[],r=0;return Nh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function lb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dn={current:null},Lh={transition:null},ub={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:Lh,ReactCurrentOwner:Jg};function G1(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:th,forEach:function(t,e,n){th(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return th(t,function(){e++}),e},toArray:function(t){return th(t,function(e){return e})||[]},only:function(t){if(!ey(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=rl;Ve.Fragment=QA;Ve.Profiler=XA;Ve.PureComponent=Yg;Ve.StrictMode=YA;Ve.Suspense=nb;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ub;Ve.act=G1;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=B1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Jg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)W1.call(e,h)&&!$1.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:ic,type:t.type,key:r,ref:o,props:i,_owner:a}};Ve.createContext=function(t){return t={$$typeof:eb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JA,_context:t},t.Consumer=t};Ve.createElement=q1;Ve.createFactory=function(t){var e=q1.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:tb,render:t}};Ve.isValidElement=ey;Ve.lazy=function(t){return{$$typeof:rb,_payload:{_status:-1,_result:t},_init:lb}};Ve.memo=function(t,e){return{$$typeof:ib,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=Lh.transition;Lh.transition={};try{t()}finally{Lh.transition=e}};Ve.unstable_act=G1;Ve.useCallback=function(t,e){return dn.current.useCallback(t,e)};Ve.useContext=function(t){return dn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return dn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return dn.current.useEffect(t,e)};Ve.useId=function(){return dn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return dn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return dn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return dn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return dn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return dn.current.useReducer(t,e,n)};Ve.useRef=function(t){return dn.current.useRef(t)};Ve.useState=function(t){return dn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return dn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return dn.current.useTransition()};Ve.version="18.3.1";F1.exports=Ve;var O=F1.exports;const uo=V1(O),cb=GA({__proto__:null,default:uo},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb=O,db=Symbol.for("react.element"),fb=Symbol.for("react.fragment"),pb=Object.prototype.hasOwnProperty,mb=hb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gb={key:!0,ref:!0,__self:!0,__source:!0};function Z1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)pb.call(e,i)&&!gb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:db,type:t,key:o,ref:a,props:r,_owner:mb.current}}sf.Fragment=fb;sf.jsx=Z1;sf.jsxs=Z1;j1.exports=sf;var w=j1.exports,pm={},K1={exports:{}},Mn={},Q1={exports:{}},Y1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,ce){var ee=Z.length;Z.push(ce);e:for(;0<ee;){var ne=ee-1>>>1,Ce=Z[ne];if(0<r(Ce,ce))Z[ne]=ce,Z[ee]=Ce,ee=ne;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ce=Z[0],ee=Z.pop();if(ee!==ce){Z[0]=ee;e:for(var ne=0,Ce=Z.length,et=Ce>>>1;ne<et;){var Me=2*(ne+1)-1,Re=Z[Me],fe=Me+1,ht=Z[fe];if(0>r(Re,ee))fe<Ce&&0>r(ht,Re)?(Z[ne]=ht,Z[fe]=ee,ne=fe):(Z[ne]=Re,Z[Me]=ee,ne=Me);else if(fe<Ce&&0>r(ht,ee))Z[ne]=ht,Z[fe]=ee,ne=fe;else break e}}return ce}function r(Z,ce){var ee=Z.sortIndex-ce.sortIndex;return ee!==0?ee:Z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],g=1,m=null,_=3,T=!1,b=!1,R=!1,V=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Z){for(var ce=n(f);ce!==null;){if(ce.callback===null)i(f);else if(ce.startTime<=Z)i(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=n(f)}}function z(Z){if(R=!1,C(Z),!b)if(n(h)!==null)b=!0,pe(G);else{var ce=n(f);ce!==null&&Ze(z,ce.startTime-Z)}}function G(Z,ce){b=!1,R&&(R=!1,k(S),S=-1),T=!0;var ee=_;try{for(C(ce),m=n(h);m!==null&&(!(m.expirationTime>ce)||Z&&!j());){var ne=m.callback;if(typeof ne=="function"){m.callback=null,_=m.priorityLevel;var Ce=ne(m.expirationTime<=ce);ce=t.unstable_now(),typeof Ce=="function"?m.callback=Ce:m===n(h)&&i(h),C(ce)}else i(h);m=n(h)}if(m!==null)var et=!0;else{var Me=n(f);Me!==null&&Ze(z,Me.startTime-ce),et=!1}return et}finally{m=null,_=ee,T=!1}}var B=!1,A=null,S=-1,N=5,D=-1;function j(){return!(t.unstable_now()-D<N)}function U(){if(A!==null){var Z=t.unstable_now();D=Z;var ce=!0;try{ce=A(!0,Z)}finally{ce?M():(B=!1,A=null)}}else B=!1}var M;if(typeof P=="function")M=function(){P(U)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,We=X.port2;X.port1.onmessage=U,M=function(){We.postMessage(null)}}else M=function(){V(U,0)};function pe(Z){A=Z,B||(B=!0,M())}function Ze(Z,ce){S=V(function(){Z(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){b||T||(b=!0,pe(G))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var ce=3;break;default:ce=_}var ee=_;_=ce;try{return Z()}finally{_=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ee=_;_=Z;try{return ce()}finally{_=ee}},t.unstable_scheduleCallback=function(Z,ce,ee){var ne=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,Z){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=ee+Ce,Z={id:g++,callback:ce,priorityLevel:Z,startTime:ee,expirationTime:Ce,sortIndex:-1},ee>ne?(Z.sortIndex=ee,e(f,Z),n(h)===null&&Z===n(f)&&(R?(k(S),S=-1):R=!0,Ze(z,ee-ne))):(Z.sortIndex=Ce,e(h,Z),b||T||(b=!0,pe(G))),Z},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(Z){var ce=_;return function(){var ee=_;_=ce;try{return Z.apply(this,arguments)}finally{_=ee}}}})(Y1);Q1.exports=Y1;var yb=Q1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b=O,Rn=yb;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X1=new Set,Iu={};function xo(t,e){za(t,e),za(t+"Capture",e)}function za(t,e){for(Iu[t]=e,t=0;t<e.length;t++)X1.add(e[t])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mm=Object.prototype.hasOwnProperty,vb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dv={},Vv={};function wb(t){return mm.call(Vv,t)?!0:mm.call(Dv,t)?!1:vb.test(t)?Vv[t]=!0:(Dv[t]=!0,!1)}function xb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tb(t,e,n,i){if(e===null||typeof e>"u"||xb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ty=/[\-:]([a-z])/g;function ny(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ty,ny);qt[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ty,ny);qt[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ty,ny);qt[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function iy(t,e,n,i){var r=qt.hasOwnProperty(e)?qt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tb(e,n,r,i)&&(n=null),i||r===null?wb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Tr=_b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nh=Symbol.for("react.element"),ha=Symbol.for("react.portal"),da=Symbol.for("react.fragment"),ry=Symbol.for("react.strict_mode"),gm=Symbol.for("react.profiler"),J1=Symbol.for("react.provider"),eT=Symbol.for("react.context"),sy=Symbol.for("react.forward_ref"),ym=Symbol.for("react.suspense"),_m=Symbol.for("react.suspense_list"),oy=Symbol.for("react.memo"),jr=Symbol.for("react.lazy"),tT=Symbol.for("react.offscreen"),jv=Symbol.iterator;function zl(t){return t===null||typeof t!="object"?null:(t=jv&&t[jv]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,pp;function Xl(t){if(pp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pp=e&&e[1]||""}return`
`+pp+t}var mp=!1;function gp(t,e){if(!t||mp)return"";mp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{mp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xl(t):""}function Eb(t){switch(t.tag){case 5:return Xl(t.type);case 16:return Xl("Lazy");case 13:return Xl("Suspense");case 19:return Xl("SuspenseList");case 0:case 2:case 15:return t=gp(t.type,!1),t;case 11:return t=gp(t.type.render,!1),t;case 1:return t=gp(t.type,!0),t;default:return""}}function vm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case da:return"Fragment";case ha:return"Portal";case gm:return"Profiler";case ry:return"StrictMode";case ym:return"Suspense";case _m:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eT:return(t.displayName||"Context")+".Consumer";case J1:return(t._context.displayName||"Context")+".Provider";case sy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oy:return e=t.displayName||null,e!==null?e:vm(t.type)||"Memo";case jr:e=t._payload,t=t._init;try{return vm(t(e))}catch{}}return null}function Pb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vm(e);case 8:return e===ry?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Sb(t){var e=nT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ih(t){t._valueTracker||(t._valueTracker=Sb(t))}function iT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=nT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function nd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wm(t,e){var n=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ms(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rT(t,e){e=e.checked,e!=null&&iy(t,"checked",e,!1)}function xm(t,e){rT(t,e);var n=ms(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tm(t,e.type,ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tm(t,e,n){(e!=="number"||nd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jl=Array.isArray;function Aa(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ms(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Em(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Jl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ms(n)}}function sT(t,e){var n=ms(e.value),i=ms(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Uv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rh,aT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rh=rh||document.createElement("div"),rh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Au(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var au={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cb=["Webkit","ms","Moz","O"];Object.keys(au).forEach(function(t){Cb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),au[e]=au[t]})});function lT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||au.hasOwnProperty(t)&&au[t]?(""+e).trim():e+"px"}function uT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=lT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Ib=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sm(t,e){if(e){if(Ib[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Cm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Im=null;function ay(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Am=null,ba=null,ka=null;function Hv(t){if(t=oc(t)){if(typeof Am!="function")throw Error(J(280));var e=t.stateNode;e&&(e=cf(e),Am(t.stateNode,t.type,e))}}function cT(t){ba?ka?ka.push(t):ka=[t]:ba=t}function hT(){if(ba){var t=ba,e=ka;if(ka=ba=null,Hv(t),e)for(t=0;t<e.length;t++)Hv(e[t])}}function dT(t,e){return t(e)}function fT(){}var yp=!1;function pT(t,e,n){if(yp)return t(e,n);yp=!0;try{return dT(t,e,n)}finally{yp=!1,(ba!==null||ka!==null)&&(fT(),hT())}}function bu(t,e){var n=t.stateNode;if(n===null)return null;var i=cf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var bm=!1;if(dr)try{var Bl={};Object.defineProperty(Bl,"passive",{get:function(){bm=!0}}),window.addEventListener("test",Bl,Bl),window.removeEventListener("test",Bl,Bl)}catch{bm=!1}function Ab(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(g){this.onError(g)}}var lu=!1,id=null,rd=!1,km=null,bb={onError:function(t){lu=!0,id=t}};function kb(t,e,n,i,r,o,a,u,h){lu=!1,id=null,Ab.apply(bb,arguments)}function Rb(t,e,n,i,r,o,a,u,h){if(kb.apply(this,arguments),lu){if(lu){var f=id;lu=!1,id=null}else throw Error(J(198));rd||(rd=!0,km=f)}}function To(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wv(t){if(To(t)!==t)throw Error(J(188))}function Nb(t){var e=t.alternate;if(!e){if(e=To(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Wv(r),t;if(o===i)return Wv(r),e;o=o.sibling}throw Error(J(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function gT(t){return t=Nb(t),t!==null?yT(t):null}function yT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yT(t);if(e!==null)return e;t=t.sibling}return null}var _T=Rn.unstable_scheduleCallback,$v=Rn.unstable_cancelCallback,Lb=Rn.unstable_shouldYield,Mb=Rn.unstable_requestPaint,Et=Rn.unstable_now,Ob=Rn.unstable_getCurrentPriorityLevel,ly=Rn.unstable_ImmediatePriority,vT=Rn.unstable_UserBlockingPriority,sd=Rn.unstable_NormalPriority,Db=Rn.unstable_LowPriority,wT=Rn.unstable_IdlePriority,of=null,bi=null;function Vb(t){if(bi&&typeof bi.onCommitFiberRoot=="function")try{bi.onCommitFiberRoot(of,t,void 0,(t.current.flags&128)===128)}catch{}}var fi=Math.clz32?Math.clz32:zb,jb=Math.log,Fb=Math.LN2;function zb(t){return t>>>=0,t===0?32:31-(jb(t)/Fb|0)|0}var sh=64,oh=4194304;function eu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function od(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=eu(u):(o&=a,o!==0&&(i=eu(o)))}else a=n&~r,a!==0?i=eu(a):o!==0&&(i=eu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-fi(e),r=1<<n,i|=t[n],e&=~r;return i}function Bb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ub(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-fi(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=Bb(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Rm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xT(){var t=sh;return sh<<=1,!(sh&4194240)&&(sh=64),t}function _p(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fi(e),t[e]=n}function Hb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-fi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function uy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-fi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Je=0;function TT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ET,cy,PT,ST,CT,Nm=!1,ah=[],Yr=null,Xr=null,Jr=null,ku=new Map,Ru=new Map,Br=[],Wb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qv(t,e){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":ku.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(e.pointerId)}}function Ul(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=oc(e),e!==null&&cy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function $b(t,e,n,i,r){switch(e){case"focusin":return Yr=Ul(Yr,t,e,n,i,r),!0;case"dragenter":return Xr=Ul(Xr,t,e,n,i,r),!0;case"mouseover":return Jr=Ul(Jr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ku.set(o,Ul(ku.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ru.set(o,Ul(Ru.get(o)||null,t,e,n,i,r)),!0}return!1}function IT(t){var e=Js(t.target);if(e!==null){var n=To(e);if(n!==null){if(e=n.tag,e===13){if(e=mT(n),e!==null){t.blockedOn=e,CT(t.priority,function(){PT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Im=i,n.target.dispatchEvent(i),Im=null}else return e=oc(n),e!==null&&cy(e),t.blockedOn=n,!1;e.shift()}return!0}function Gv(t,e,n){Mh(t)&&n.delete(e)}function qb(){Nm=!1,Yr!==null&&Mh(Yr)&&(Yr=null),Xr!==null&&Mh(Xr)&&(Xr=null),Jr!==null&&Mh(Jr)&&(Jr=null),ku.forEach(Gv),Ru.forEach(Gv)}function Hl(t,e){t.blockedOn===e&&(t.blockedOn=null,Nm||(Nm=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,qb)))}function Nu(t){function e(r){return Hl(r,t)}if(0<ah.length){Hl(ah[0],t);for(var n=1;n<ah.length;n++){var i=ah[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Yr!==null&&Hl(Yr,t),Xr!==null&&Hl(Xr,t),Jr!==null&&Hl(Jr,t),ku.forEach(e),Ru.forEach(e),n=0;n<Br.length;n++)i=Br[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Br.length&&(n=Br[0],n.blockedOn===null);)IT(n),n.blockedOn===null&&Br.shift()}var Ra=Tr.ReactCurrentBatchConfig,ad=!0;function Gb(t,e,n,i){var r=Je,o=Ra.transition;Ra.transition=null;try{Je=1,hy(t,e,n,i)}finally{Je=r,Ra.transition=o}}function Zb(t,e,n,i){var r=Je,o=Ra.transition;Ra.transition=null;try{Je=4,hy(t,e,n,i)}finally{Je=r,Ra.transition=o}}function hy(t,e,n,i){if(ad){var r=Lm(t,e,n,i);if(r===null)Ap(t,e,i,ld,n),qv(t,i);else if($b(r,t,e,n,i))i.stopPropagation();else if(qv(t,i),e&4&&-1<Wb.indexOf(t)){for(;r!==null;){var o=oc(r);if(o!==null&&ET(o),o=Lm(t,e,n,i),o===null&&Ap(t,e,i,ld,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Ap(t,e,i,null,n)}}var ld=null;function Lm(t,e,n,i){if(ld=null,t=ay(i),t=Js(t),t!==null)if(e=To(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ld=t,null}function AT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ob()){case ly:return 1;case vT:return 4;case sd:case Db:return 16;case wT:return 536870912;default:return 16}default:return 16}}var Gr=null,dy=null,Oh=null;function bT(){if(Oh)return Oh;var t,e=dy,n=e.length,i,r="value"in Gr?Gr.value:Gr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Oh=r.slice(t,1<i?1-i:void 0)}function Dh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lh(){return!0}function Zv(){return!1}function On(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?lh:Zv,this.isPropagationStopped=Zv,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lh)},persist:function(){},isPersistent:lh}),e}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fy=On(sl),sc=gt({},sl,{view:0,detail:0}),Kb=On(sc),vp,wp,Wl,af=gt({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:py,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wl&&(Wl&&t.type==="mousemove"?(vp=t.screenX-Wl.screenX,wp=t.screenY-Wl.screenY):wp=vp=0,Wl=t),vp)},movementY:function(t){return"movementY"in t?t.movementY:wp}}),Kv=On(af),Qb=gt({},af,{dataTransfer:0}),Yb=On(Qb),Xb=gt({},sc,{relatedTarget:0}),xp=On(Xb),Jb=gt({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),ek=On(Jb),tk=gt({},sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nk=On(tk),ik=gt({},sl,{data:0}),Qv=On(ik),rk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ok={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ak(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ok[t])?!!e[t]:!1}function py(){return ak}var lk=gt({},sc,{key:function(t){if(t.key){var e=rk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:py,charCode:function(t){return t.type==="keypress"?Dh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uk=On(lk),ck=gt({},af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yv=On(ck),hk=gt({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:py}),dk=On(hk),fk=gt({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),pk=On(fk),mk=gt({},af,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gk=On(mk),yk=[9,13,27,32],my=dr&&"CompositionEvent"in window,uu=null;dr&&"documentMode"in document&&(uu=document.documentMode);var _k=dr&&"TextEvent"in window&&!uu,kT=dr&&(!my||uu&&8<uu&&11>=uu),Xv=" ",Jv=!1;function RT(t,e){switch(t){case"keyup":return yk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fa=!1;function vk(t,e){switch(t){case"compositionend":return NT(e);case"keypress":return e.which!==32?null:(Jv=!0,Xv);case"textInput":return t=e.data,t===Xv&&Jv?null:t;default:return null}}function wk(t,e){if(fa)return t==="compositionend"||!my&&RT(t,e)?(t=bT(),Oh=dy=Gr=null,fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kT&&e.locale!=="ko"?null:e.data;default:return null}}var xk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xk[t.type]:e==="textarea"}function LT(t,e,n,i){cT(i),e=ud(e,"onChange"),0<e.length&&(n=new fy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var cu=null,Lu=null;function Tk(t){WT(t,0)}function lf(t){var e=ga(t);if(iT(e))return t}function Ek(t,e){if(t==="change")return e}var MT=!1;if(dr){var Tp;if(dr){var Ep="oninput"in document;if(!Ep){var t0=document.createElement("div");t0.setAttribute("oninput","return;"),Ep=typeof t0.oninput=="function"}Tp=Ep}else Tp=!1;MT=Tp&&(!document.documentMode||9<document.documentMode)}function n0(){cu&&(cu.detachEvent("onpropertychange",OT),Lu=cu=null)}function OT(t){if(t.propertyName==="value"&&lf(Lu)){var e=[];LT(e,Lu,t,ay(t)),pT(Tk,e)}}function Pk(t,e,n){t==="focusin"?(n0(),cu=e,Lu=n,cu.attachEvent("onpropertychange",OT)):t==="focusout"&&n0()}function Sk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lf(Lu)}function Ck(t,e){if(t==="click")return lf(e)}function Ik(t,e){if(t==="input"||t==="change")return lf(e)}function Ak(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mi=typeof Object.is=="function"?Object.is:Ak;function Mu(t,e){if(mi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!mm.call(e,r)||!mi(t[r],e[r]))return!1}return!0}function i0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r0(t,e){var n=i0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i0(n)}}function DT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VT(){for(var t=window,e=nd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nd(t.document)}return e}function gy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bk(t){var e=VT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&DT(n.ownerDocument.documentElement,n)){if(i!==null&&gy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=r0(n,o);var a=r0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kk=dr&&"documentMode"in document&&11>=document.documentMode,pa=null,Mm=null,hu=null,Om=!1;function s0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Om||pa==null||pa!==nd(i)||(i=pa,"selectionStart"in i&&gy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hu&&Mu(hu,i)||(hu=i,i=ud(Mm,"onSelect"),0<i.length&&(e=new fy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=pa)))}function uh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ma={animationend:uh("Animation","AnimationEnd"),animationiteration:uh("Animation","AnimationIteration"),animationstart:uh("Animation","AnimationStart"),transitionend:uh("Transition","TransitionEnd")},Pp={},jT={};dr&&(jT=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function uf(t){if(Pp[t])return Pp[t];if(!ma[t])return t;var e=ma[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jT)return Pp[t]=e[n];return t}var FT=uf("animationend"),zT=uf("animationiteration"),BT=uf("animationstart"),UT=uf("transitionend"),HT=new Map,o0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(t,e){HT.set(t,e),xo(e,[t])}for(var Sp=0;Sp<o0.length;Sp++){var Cp=o0[Sp],Rk=Cp.toLowerCase(),Nk=Cp[0].toUpperCase()+Cp.slice(1);Cs(Rk,"on"+Nk)}Cs(FT,"onAnimationEnd");Cs(zT,"onAnimationIteration");Cs(BT,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(UT,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lk=new Set("cancel close invalid load scroll toggle".split(" ").concat(tu));function a0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Rb(i,e,void 0,t),t.currentTarget=null}function WT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;a0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;a0(r,u,f),o=h}}}if(rd)throw t=km,rd=!1,km=null,t}function rt(t,e){var n=e[zm];n===void 0&&(n=e[zm]=new Set);var i=t+"__bubble";n.has(i)||($T(e,t,2,!1),n.add(i))}function Ip(t,e,n){var i=0;e&&(i|=4),$T(n,t,i,e)}var ch="_reactListening"+Math.random().toString(36).slice(2);function Ou(t){if(!t[ch]){t[ch]=!0,X1.forEach(function(n){n!=="selectionchange"&&(Lk.has(n)||Ip(n,!1,t),Ip(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ch]||(e[ch]=!0,Ip("selectionchange",!1,e))}}function $T(t,e,n,i){switch(AT(e)){case 1:var r=Gb;break;case 4:r=Zb;break;default:r=hy}n=r.bind(null,e,n,t),r=void 0,!bm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ap(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Js(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}pT(function(){var f=o,g=ay(n),m=[];e:{var _=HT.get(t);if(_!==void 0){var T=fy,b=t;switch(t){case"keypress":if(Dh(n)===0)break e;case"keydown":case"keyup":T=uk;break;case"focusin":b="focus",T=xp;break;case"focusout":b="blur",T=xp;break;case"beforeblur":case"afterblur":T=xp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Kv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=dk;break;case FT:case zT:case BT:T=ek;break;case UT:T=pk;break;case"scroll":T=Kb;break;case"wheel":T=gk;break;case"copy":case"cut":case"paste":T=nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Yv}var R=(e&4)!==0,V=!R&&t==="scroll",k=R?_!==null?_+"Capture":null:_;R=[];for(var P=f,C;P!==null;){C=P;var z=C.stateNode;if(C.tag===5&&z!==null&&(C=z,k!==null&&(z=bu(P,k),z!=null&&R.push(Du(P,z,C)))),V)break;P=P.return}0<R.length&&(_=new T(_,b,null,n,g),m.push({event:_,listeners:R}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&n!==Im&&(b=n.relatedTarget||n.fromElement)&&(Js(b)||b[fr]))break e;if((T||_)&&(_=g.window===g?g:(_=g.ownerDocument)?_.defaultView||_.parentWindow:window,T?(b=n.relatedTarget||n.toElement,T=f,b=b?Js(b):null,b!==null&&(V=To(b),b!==V||b.tag!==5&&b.tag!==6)&&(b=null)):(T=null,b=f),T!==b)){if(R=Kv,z="onMouseLeave",k="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(R=Yv,z="onPointerLeave",k="onPointerEnter",P="pointer"),V=T==null?_:ga(T),C=b==null?_:ga(b),_=new R(z,P+"leave",T,n,g),_.target=V,_.relatedTarget=C,z=null,Js(g)===f&&(R=new R(k,P+"enter",b,n,g),R.target=C,R.relatedTarget=V,z=R),V=z,T&&b)t:{for(R=T,k=b,P=0,C=R;C;C=sa(C))P++;for(C=0,z=k;z;z=sa(z))C++;for(;0<P-C;)R=sa(R),P--;for(;0<C-P;)k=sa(k),C--;for(;P--;){if(R===k||k!==null&&R===k.alternate)break t;R=sa(R),k=sa(k)}R=null}else R=null;T!==null&&l0(m,_,T,R,!1),b!==null&&V!==null&&l0(m,V,b,R,!0)}}e:{if(_=f?ga(f):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var G=Ek;else if(e0(_))if(MT)G=Ik;else{G=Sk;var B=Pk}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(G=Ck);if(G&&(G=G(t,f))){LT(m,G,n,g);break e}B&&B(t,_,f),t==="focusout"&&(B=_._wrapperState)&&B.controlled&&_.type==="number"&&Tm(_,"number",_.value)}switch(B=f?ga(f):window,t){case"focusin":(e0(B)||B.contentEditable==="true")&&(pa=B,Mm=f,hu=null);break;case"focusout":hu=Mm=pa=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,s0(m,n,g);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":s0(m,n,g)}var A;if(my)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else fa?RT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(kT&&n.locale!=="ko"&&(fa||S!=="onCompositionStart"?S==="onCompositionEnd"&&fa&&(A=bT()):(Gr=g,dy="value"in Gr?Gr.value:Gr.textContent,fa=!0)),B=ud(f,S),0<B.length&&(S=new Qv(S,t,null,n,g),m.push({event:S,listeners:B}),A?S.data=A:(A=NT(n),A!==null&&(S.data=A)))),(A=_k?vk(t,n):wk(t,n))&&(f=ud(f,"onBeforeInput"),0<f.length&&(g=new Qv("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:f}),g.data=A))}WT(m,e)})}function Du(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ud(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=bu(t,n),o!=null&&i.unshift(Du(t,o,r)),o=bu(t,e),o!=null&&i.push(Du(t,o,r))),t=t.return}return i}function sa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=bu(n,o),h!=null&&a.unshift(Du(n,h,u))):r||(h=bu(n,o),h!=null&&a.push(Du(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Mk=/\r\n?/g,Ok=/\u0000|\uFFFD/g;function u0(t){return(typeof t=="string"?t:""+t).replace(Mk,`
`).replace(Ok,"")}function hh(t,e,n){if(e=u0(e),u0(t)!==e&&n)throw Error(J(425))}function cd(){}var Dm=null,Vm=null;function jm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fm=typeof setTimeout=="function"?setTimeout:void 0,Dk=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,Vk=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(t){return c0.resolve(null).then(t).catch(jk)}:Fm;function jk(t){setTimeout(function(){throw t})}function bp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Nu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Nu(e)}function es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ol=Math.random().toString(36).slice(2),Ii="__reactFiber$"+ol,Vu="__reactProps$"+ol,fr="__reactContainer$"+ol,zm="__reactEvents$"+ol,Fk="__reactListeners$"+ol,zk="__reactHandles$"+ol;function Js(t){var e=t[Ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[Ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h0(t);t!==null;){if(n=t[Ii])return n;t=h0(t)}return e}t=n,n=t.parentNode}return null}function oc(t){return t=t[Ii]||t[fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ga(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function cf(t){return t[Vu]||null}var Bm=[],ya=-1;function Is(t){return{current:t}}function lt(t){0>ya||(t.current=Bm[ya],Bm[ya]=null,ya--)}function nt(t,e){ya++,Bm[ya]=t.current,t.current=e}var gs={},nn=Is(gs),xn=Is(!1),co=gs;function Ba(t,e){var n=t.type.contextTypes;if(!n)return gs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Tn(t){return t=t.childContextTypes,t!=null}function hd(){lt(xn),lt(nn)}function d0(t,e,n){if(nn.current!==gs)throw Error(J(168));nt(nn,e),nt(xn,n)}function qT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(J(108,Pb(t)||"Unknown",r));return gt({},n,i)}function dd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gs,co=nn.current,nt(nn,t),nt(xn,xn.current),!0}function f0(t,e,n){var i=t.stateNode;if(!i)throw Error(J(169));n?(t=qT(t,e,co),i.__reactInternalMemoizedMergedChildContext=t,lt(xn),lt(nn),nt(nn,t)):lt(xn),nt(xn,n)}var tr=null,hf=!1,kp=!1;function GT(t){tr===null?tr=[t]:tr.push(t)}function Bk(t){hf=!0,GT(t)}function As(){if(!kp&&tr!==null){kp=!0;var t=0,e=Je;try{var n=tr;for(Je=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}tr=null,hf=!1}catch(r){throw tr!==null&&(tr=tr.slice(t+1)),_T(ly,As),r}finally{Je=e,kp=!1}}return null}var _a=[],va=0,fd=null,pd=0,qn=[],Gn=0,ho=null,ir=1,rr="";function qs(t,e){_a[va++]=pd,_a[va++]=fd,fd=t,pd=e}function ZT(t,e,n){qn[Gn++]=ir,qn[Gn++]=rr,qn[Gn++]=ho,ho=t;var i=ir;t=rr;var r=32-fi(i)-1;i&=~(1<<r),n+=1;var o=32-fi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,ir=1<<32-fi(e)+r|n<<r|i,rr=o+t}else ir=1<<o|n<<r|i,rr=t}function yy(t){t.return!==null&&(qs(t,1),ZT(t,1,0))}function _y(t){for(;t===fd;)fd=_a[--va],_a[va]=null,pd=_a[--va],_a[va]=null;for(;t===ho;)ho=qn[--Gn],qn[Gn]=null,rr=qn[--Gn],qn[Gn]=null,ir=qn[--Gn],qn[Gn]=null}var kn=null,bn=null,ct=!1,ui=null;function KT(t,e){var n=Qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,bn=es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ho!==null?{id:ir,overflow:rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,bn=null,!0):!1;default:return!1}}function Um(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hm(t){if(ct){var e=bn;if(e){var n=e;if(!p0(t,e)){if(Um(t))throw Error(J(418));e=es(n.nextSibling);var i=kn;e&&p0(t,e)?KT(i,n):(t.flags=t.flags&-4097|2,ct=!1,kn=t)}}else{if(Um(t))throw Error(J(418));t.flags=t.flags&-4097|2,ct=!1,kn=t}}}function m0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function dh(t){if(t!==kn)return!1;if(!ct)return m0(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jm(t.type,t.memoizedProps)),e&&(e=bn)){if(Um(t))throw QT(),Error(J(418));for(;e;)KT(t,e),e=es(e.nextSibling)}if(m0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=kn?es(t.stateNode.nextSibling):null;return!0}function QT(){for(var t=bn;t;)t=es(t.nextSibling)}function Ua(){bn=kn=null,ct=!1}function vy(t){ui===null?ui=[t]:ui.push(t)}var Uk=Tr.ReactCurrentBatchConfig;function $l(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var i=n.stateNode}if(!i)throw Error(J(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function fh(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g0(t){var e=t._init;return e(t._payload)}function YT(t){function e(k,P){if(t){var C=k.deletions;C===null?(k.deletions=[P],k.flags|=16):C.push(P)}}function n(k,P){if(!t)return null;for(;P!==null;)e(k,P),P=P.sibling;return null}function i(k,P){for(k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function r(k,P){return k=rs(k,P),k.index=0,k.sibling=null,k}function o(k,P,C){return k.index=C,t?(C=k.alternate,C!==null?(C=C.index,C<P?(k.flags|=2,P):C):(k.flags|=2,P)):(k.flags|=1048576,P)}function a(k){return t&&k.alternate===null&&(k.flags|=2),k}function u(k,P,C,z){return P===null||P.tag!==6?(P=Vp(C,k.mode,z),P.return=k,P):(P=r(P,C),P.return=k,P)}function h(k,P,C,z){var G=C.type;return G===da?g(k,P,C.props.children,z,C.key):P!==null&&(P.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===jr&&g0(G)===P.type)?(z=r(P,C.props),z.ref=$l(k,P,C),z.return=k,z):(z=Hh(C.type,C.key,C.props,null,k.mode,z),z.ref=$l(k,P,C),z.return=k,z)}function f(k,P,C,z){return P===null||P.tag!==4||P.stateNode.containerInfo!==C.containerInfo||P.stateNode.implementation!==C.implementation?(P=jp(C,k.mode,z),P.return=k,P):(P=r(P,C.children||[]),P.return=k,P)}function g(k,P,C,z,G){return P===null||P.tag!==7?(P=so(C,k.mode,z,G),P.return=k,P):(P=r(P,C),P.return=k,P)}function m(k,P,C){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Vp(""+P,k.mode,C),P.return=k,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case nh:return C=Hh(P.type,P.key,P.props,null,k.mode,C),C.ref=$l(k,null,P),C.return=k,C;case ha:return P=jp(P,k.mode,C),P.return=k,P;case jr:var z=P._init;return m(k,z(P._payload),C)}if(Jl(P)||zl(P))return P=so(P,k.mode,C,null),P.return=k,P;fh(k,P)}return null}function _(k,P,C,z){var G=P!==null?P.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return G!==null?null:u(k,P,""+C,z);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case nh:return C.key===G?h(k,P,C,z):null;case ha:return C.key===G?f(k,P,C,z):null;case jr:return G=C._init,_(k,P,G(C._payload),z)}if(Jl(C)||zl(C))return G!==null?null:g(k,P,C,z,null);fh(k,C)}return null}function T(k,P,C,z,G){if(typeof z=="string"&&z!==""||typeof z=="number")return k=k.get(C)||null,u(P,k,""+z,G);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case nh:return k=k.get(z.key===null?C:z.key)||null,h(P,k,z,G);case ha:return k=k.get(z.key===null?C:z.key)||null,f(P,k,z,G);case jr:var B=z._init;return T(k,P,C,B(z._payload),G)}if(Jl(z)||zl(z))return k=k.get(C)||null,g(P,k,z,G,null);fh(P,z)}return null}function b(k,P,C,z){for(var G=null,B=null,A=P,S=P=0,N=null;A!==null&&S<C.length;S++){A.index>S?(N=A,A=null):N=A.sibling;var D=_(k,A,C[S],z);if(D===null){A===null&&(A=N);break}t&&A&&D.alternate===null&&e(k,A),P=o(D,P,S),B===null?G=D:B.sibling=D,B=D,A=N}if(S===C.length)return n(k,A),ct&&qs(k,S),G;if(A===null){for(;S<C.length;S++)A=m(k,C[S],z),A!==null&&(P=o(A,P,S),B===null?G=A:B.sibling=A,B=A);return ct&&qs(k,S),G}for(A=i(k,A);S<C.length;S++)N=T(A,k,S,C[S],z),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?S:N.key),P=o(N,P,S),B===null?G=N:B.sibling=N,B=N);return t&&A.forEach(function(j){return e(k,j)}),ct&&qs(k,S),G}function R(k,P,C,z){var G=zl(C);if(typeof G!="function")throw Error(J(150));if(C=G.call(C),C==null)throw Error(J(151));for(var B=G=null,A=P,S=P=0,N=null,D=C.next();A!==null&&!D.done;S++,D=C.next()){A.index>S?(N=A,A=null):N=A.sibling;var j=_(k,A,D.value,z);if(j===null){A===null&&(A=N);break}t&&A&&j.alternate===null&&e(k,A),P=o(j,P,S),B===null?G=j:B.sibling=j,B=j,A=N}if(D.done)return n(k,A),ct&&qs(k,S),G;if(A===null){for(;!D.done;S++,D=C.next())D=m(k,D.value,z),D!==null&&(P=o(D,P,S),B===null?G=D:B.sibling=D,B=D);return ct&&qs(k,S),G}for(A=i(k,A);!D.done;S++,D=C.next())D=T(A,k,S,D.value,z),D!==null&&(t&&D.alternate!==null&&A.delete(D.key===null?S:D.key),P=o(D,P,S),B===null?G=D:B.sibling=D,B=D);return t&&A.forEach(function(U){return e(k,U)}),ct&&qs(k,S),G}function V(k,P,C,z){if(typeof C=="object"&&C!==null&&C.type===da&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case nh:e:{for(var G=C.key,B=P;B!==null;){if(B.key===G){if(G=C.type,G===da){if(B.tag===7){n(k,B.sibling),P=r(B,C.props.children),P.return=k,k=P;break e}}else if(B.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===jr&&g0(G)===B.type){n(k,B.sibling),P=r(B,C.props),P.ref=$l(k,B,C),P.return=k,k=P;break e}n(k,B);break}else e(k,B);B=B.sibling}C.type===da?(P=so(C.props.children,k.mode,z,C.key),P.return=k,k=P):(z=Hh(C.type,C.key,C.props,null,k.mode,z),z.ref=$l(k,P,C),z.return=k,k=z)}return a(k);case ha:e:{for(B=C.key;P!==null;){if(P.key===B)if(P.tag===4&&P.stateNode.containerInfo===C.containerInfo&&P.stateNode.implementation===C.implementation){n(k,P.sibling),P=r(P,C.children||[]),P.return=k,k=P;break e}else{n(k,P);break}else e(k,P);P=P.sibling}P=jp(C,k.mode,z),P.return=k,k=P}return a(k);case jr:return B=C._init,V(k,P,B(C._payload),z)}if(Jl(C))return b(k,P,C,z);if(zl(C))return R(k,P,C,z);fh(k,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,P!==null&&P.tag===6?(n(k,P.sibling),P=r(P,C),P.return=k,k=P):(n(k,P),P=Vp(C,k.mode,z),P.return=k,k=P),a(k)):n(k,P)}return V}var Ha=YT(!0),XT=YT(!1),md=Is(null),gd=null,wa=null,wy=null;function xy(){wy=wa=gd=null}function Ty(t){var e=md.current;lt(md),t._currentValue=e}function Wm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Na(t,e){gd=t,wy=wa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(wy!==t)if(t={context:t,memoizedValue:e,next:null},wa===null){if(gd===null)throw Error(J(308));wa=t,gd.dependencies={lanes:0,firstContext:t}}else wa=wa.next=t;return e}var eo=null;function Ey(t){eo===null?eo=[t]:eo.push(t)}function JT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ey(e)):(n.next=r.next,r.next=n),e.interleaved=n,pr(t,i)}function pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fr=!1;function Py(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ts(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,$e&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,pr(t,n)}return r=i.interleaved,r===null?(e.next=e,Ey(i)):(e.next=r.next,r.next=e),i.interleaved=e,pr(t,n)}function Vh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,uy(t,n)}}function y0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yd(t,e,n,i){var r=t.updateQueue;Fr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==a&&(u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=h))}if(o!==null){var m=r.baseState;a=0,g=f=h=null,u=o;do{var _=u.lane,T=u.eventTime;if((i&_)===_){g!==null&&(g=g.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var b=t,R=u;switch(_=e,T=n,R.tag){case 1:if(b=R.payload,typeof b=="function"){m=b.call(T,m,_);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=R.payload,_=typeof b=="function"?b.call(T,m,_):b,_==null)break e;m=gt({},m,_);break e;case 2:Fr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else T={eventTime:T,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(f=g=T,h=m):g=g.next=T,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(g===null&&(h=m),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);po|=a,t.lanes=a,t.memoizedState=m}}function _0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(J(191,r));r.call(i)}}}var ac={},ki=Is(ac),ju=Is(ac),Fu=Is(ac);function to(t){if(t===ac)throw Error(J(174));return t}function Sy(t,e){switch(nt(Fu,e),nt(ju,t),nt(ki,ac),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pm(e,t)}lt(ki),nt(ki,e)}function Wa(){lt(ki),lt(ju),lt(Fu)}function tE(t){to(Fu.current);var e=to(ki.current),n=Pm(e,t.type);e!==n&&(nt(ju,t),nt(ki,n))}function Cy(t){ju.current===t&&(lt(ki),lt(ju))}var dt=Is(0);function _d(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rp=[];function Iy(){for(var t=0;t<Rp.length;t++)Rp[t]._workInProgressVersionPrimary=null;Rp.length=0}var jh=Tr.ReactCurrentDispatcher,Np=Tr.ReactCurrentBatchConfig,fo=0,pt=null,Nt=null,zt=null,vd=!1,du=!1,zu=0,Hk=0;function Kt(){throw Error(J(321))}function Ay(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mi(t[n],e[n]))return!1;return!0}function by(t,e,n,i,r,o){if(fo=o,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jh.current=t===null||t.memoizedState===null?Gk:Zk,t=n(i,r),du){o=0;do{if(du=!1,zu=0,25<=o)throw Error(J(301));o+=1,zt=Nt=null,e.updateQueue=null,jh.current=Kk,t=n(i,r)}while(du)}if(jh.current=wd,e=Nt!==null&&Nt.next!==null,fo=0,zt=Nt=pt=null,vd=!1,e)throw Error(J(300));return t}function ky(){var t=zu!==0;return zu=0,t}function Si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?pt.memoizedState=zt=t:zt=zt.next=t,zt}function Jn(){if(Nt===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=zt===null?pt.memoizedState:zt.next;if(e!==null)zt=e,Nt=t;else{if(t===null)throw Error(J(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},zt===null?pt.memoizedState=zt=t:zt=zt.next=t}return zt}function Bu(t,e){return typeof e=="function"?e(t):e}function Lp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=Nt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var g=f.lane;if((fo&g)===g)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var m={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=m,a=i):h=h.next=m,pt.lanes|=g,po|=g}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,mi(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,pt.lanes|=o,po|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);mi(o,e.memoizedState)||(wn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function nE(){}function iE(t,e){var n=pt,i=Jn(),r=e(),o=!mi(i.memoizedState,r);if(o&&(i.memoizedState=r,wn=!0),i=i.queue,Ry(oE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,Uu(9,sE.bind(null,n,i,r,e),void 0,null),Bt===null)throw Error(J(349));fo&30||rE(n,e,r)}return r}function rE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sE(t,e,n,i){e.value=n,e.getSnapshot=i,aE(e)&&lE(t)}function oE(t,e,n){return n(function(){aE(e)&&lE(t)})}function aE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mi(t,n)}catch{return!0}}function lE(t){var e=pr(t,1);e!==null&&pi(e,t,1,-1)}function v0(t){var e=Si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:t},e.queue=t,t=t.dispatch=qk.bind(null,pt,t),[e.memoizedState,t]}function Uu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function uE(){return Jn().memoizedState}function Fh(t,e,n,i){var r=Si();pt.flags|=t,r.memoizedState=Uu(1|e,n,void 0,i===void 0?null:i)}function df(t,e,n,i){var r=Jn();i=i===void 0?null:i;var o=void 0;if(Nt!==null){var a=Nt.memoizedState;if(o=a.destroy,i!==null&&Ay(i,a.deps)){r.memoizedState=Uu(e,n,o,i);return}}pt.flags|=t,r.memoizedState=Uu(1|e,n,o,i)}function w0(t,e){return Fh(8390656,8,t,e)}function Ry(t,e){return df(2048,8,t,e)}function cE(t,e){return df(4,2,t,e)}function hE(t,e){return df(4,4,t,e)}function dE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fE(t,e,n){return n=n!=null?n.concat([t]):null,df(4,4,dE.bind(null,e,t),n)}function Ny(){}function pE(t,e){var n=Jn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ay(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function mE(t,e){var n=Jn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ay(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function gE(t,e,n){return fo&21?(mi(n,e)||(n=xT(),pt.lanes|=n,po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function Wk(t,e){var n=Je;Je=n!==0&&4>n?n:4,t(!0);var i=Np.transition;Np.transition={};try{t(!1),e()}finally{Je=n,Np.transition=i}}function yE(){return Jn().memoizedState}function $k(t,e,n){var i=is(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},_E(t))vE(e,n);else if(n=JT(t,e,n,i),n!==null){var r=hn();pi(n,t,i,r),wE(n,e,i)}}function qk(t,e,n){var i=is(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(_E(t))vE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,mi(u,a)){var h=e.interleaved;h===null?(r.next=r,Ey(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=JT(t,e,r,i),n!==null&&(r=hn(),pi(n,t,i,r),wE(n,e,i))}}function _E(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function vE(t,e){du=vd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,uy(t,n)}}var wd={readContext:Xn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},Gk={readContext:Xn,useCallback:function(t,e){return Si().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:w0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fh(4194308,4,dE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fh(4,2,t,e)},useMemo:function(t,e){var n=Si();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Si();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=$k.bind(null,pt,t),[i.memoizedState,t]},useRef:function(t){var e=Si();return t={current:t},e.memoizedState=t},useState:v0,useDebugValue:Ny,useDeferredValue:function(t){return Si().memoizedState=t},useTransition:function(){var t=v0(!1),e=t[0];return t=Wk.bind(null,t[1]),Si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=pt,r=Si();if(ct){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Bt===null)throw Error(J(349));fo&30||rE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,w0(oE.bind(null,i,o,t),[t]),i.flags|=2048,Uu(9,sE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Si(),e=Bt.identifierPrefix;if(ct){var n=rr,i=ir;n=(i&~(1<<32-fi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Zk={readContext:Xn,useCallback:pE,useContext:Xn,useEffect:Ry,useImperativeHandle:fE,useInsertionEffect:cE,useLayoutEffect:hE,useMemo:mE,useReducer:Lp,useRef:uE,useState:function(){return Lp(Bu)},useDebugValue:Ny,useDeferredValue:function(t){var e=Jn();return gE(e,Nt.memoizedState,t)},useTransition:function(){var t=Lp(Bu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:nE,useSyncExternalStore:iE,useId:yE,unstable_isNewReconciler:!1},Kk={readContext:Xn,useCallback:pE,useContext:Xn,useEffect:Ry,useImperativeHandle:fE,useInsertionEffect:cE,useLayoutEffect:hE,useMemo:mE,useReducer:Mp,useRef:uE,useState:function(){return Mp(Bu)},useDebugValue:Ny,useDeferredValue:function(t){var e=Jn();return Nt===null?e.memoizedState=t:gE(e,Nt.memoizedState,t)},useTransition:function(){var t=Mp(Bu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:nE,useSyncExternalStore:iE,useId:yE,unstable_isNewReconciler:!1};function ai(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $m(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ff={isMounted:function(t){return(t=t._reactInternals)?To(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=hn(),r=is(t),o=lr(i,r);o.payload=e,n!=null&&(o.callback=n),e=ts(t,o,r),e!==null&&(pi(e,t,r,i),Vh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=hn(),r=is(t),o=lr(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ts(t,o,r),e!==null&&(pi(e,t,r,i),Vh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),i=is(t),r=lr(n,i);r.tag=2,e!=null&&(r.callback=e),e=ts(t,r,i),e!==null&&(pi(e,t,i,n),Vh(e,t,i))}};function x0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Mu(n,i)||!Mu(r,o):!0}function xE(t,e,n){var i=!1,r=gs,o=e.contextType;return typeof o=="object"&&o!==null?o=Xn(o):(r=Tn(e)?co:nn.current,i=e.contextTypes,o=(i=i!=null)?Ba(t,r):gs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ff,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function T0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ff.enqueueReplaceState(e,e.state,null)}function qm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Py(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Xn(o):(o=Tn(e)?co:nn.current,r.context=Ba(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&($m(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ff.enqueueReplaceState(r,r.state,null),yd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function $a(t,e){try{var n="",i=e;do n+=Eb(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Op(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qk=typeof WeakMap=="function"?WeakMap:Map;function TE(t,e,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Td||(Td=!0,ig=i),Gm(t,e)},n}function EE(t,e,n){n=lr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Gm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Gm(t,e),typeof i!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function E0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Qk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=c2.bind(null,t,e,n),e.then(t,t))}function P0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function S0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lr(-1,1),e.tag=2,ts(n,e,1))),n.lanes|=1),t)}var Yk=Tr.ReactCurrentOwner,wn=!1;function un(t,e,n,i){e.child=t===null?XT(e,null,n,i):Ha(e,t.child,n,i)}function C0(t,e,n,i,r){n=n.render;var o=e.ref;return Na(e,r),i=by(t,e,n,i,o,r),n=ky(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,mr(t,e,r)):(ct&&n&&yy(e),e.flags|=1,un(t,e,i,r),e.child)}function I0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!zy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,PE(t,e,o,i,r)):(t=Hh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Mu,n(a,i)&&t.ref===e.ref)return mr(t,e,r)}return e.flags|=1,t=rs(o,i),t.ref=e.ref,t.return=e,e.child=t}function PE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Mu(o,i)&&t.ref===e.ref)if(wn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,mr(t,e,r)}return Zm(t,e,n,i,r)}function SE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Ta,An),An|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(Ta,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,nt(Ta,An),An|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,nt(Ta,An),An|=i;return un(t,e,r,n),e.child}function CE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zm(t,e,n,i,r){var o=Tn(n)?co:nn.current;return o=Ba(e,o),Na(e,r),n=by(t,e,n,i,o,r),i=ky(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,mr(t,e,r)):(ct&&i&&yy(e),e.flags|=1,un(t,e,n,r),e.child)}function A0(t,e,n,i,r){if(Tn(n)){var o=!0;dd(e)}else o=!1;if(Na(e,r),e.stateNode===null)zh(t,e),xE(e,n,i),qm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Xn(f):(f=Tn(n)?co:nn.current,f=Ba(e,f));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&T0(e,a,i,f),Fr=!1;var _=e.memoizedState;a.state=_,yd(e,i,a,r),h=e.memoizedState,u!==i||_!==h||xn.current||Fr?(typeof g=="function"&&($m(e,n,g,i),h=e.memoizedState),(u=Fr||x0(e,n,u,i,_,h,f))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,eE(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ai(e.type,u),a.props=f,m=e.pendingProps,_=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Xn(h):(h=Tn(n)?co:nn.current,h=Ba(e,h));var T=n.getDerivedStateFromProps;(g=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==m||_!==h)&&T0(e,a,i,h),Fr=!1,_=e.memoizedState,a.state=_,yd(e,i,a,r);var b=e.memoizedState;u!==m||_!==b||xn.current||Fr?(typeof T=="function"&&($m(e,n,T,i),b=e.memoizedState),(f=Fr||x0(e,n,f,i,_,b,h)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,b,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,b,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),a.props=i,a.state=b,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Km(t,e,n,i,o,r)}function Km(t,e,n,i,r,o){CE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&f0(e,n,!1),mr(t,e,o);i=e.stateNode,Yk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ha(e,t.child,null,o),e.child=Ha(e,null,u,o)):un(t,e,u,o),e.memoizedState=i.state,r&&f0(e,n,!0),e.child}function IE(t){var e=t.stateNode;e.pendingContext?d0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&d0(t,e.context,!1),Sy(t,e.containerInfo)}function b0(t,e,n,i,r){return Ua(),vy(r),e.flags|=256,un(t,e,n,i),e.child}var Qm={dehydrated:null,treeContext:null,retryLane:0};function Ym(t){return{baseLanes:t,cachePool:null,transitions:null}}function AE(t,e,n){var i=e.pendingProps,r=dt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),nt(dt,r&1),t===null)return Hm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=gf(a,i,0,null),t=so(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ym(n),e.memoizedState=Qm,t):Ly(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Xk(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=rs(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=rs(u,o):(o=so(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Ym(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Qm,i}return o=t.child,t=o.sibling,i=rs(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ly(t,e){return e=gf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ph(t,e,n,i){return i!==null&&vy(i),Ha(e,t.child,null,n),t=Ly(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xk(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Op(Error(J(422))),ph(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=gf({mode:"visible",children:i.children},r,0,null),o=so(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ha(e,t.child,null,a),e.child.memoizedState=Ym(a),e.memoizedState=Qm,o);if(!(e.mode&1))return ph(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(J(419)),i=Op(o,i,void 0),ph(t,e,a,i)}if(u=(a&t.childLanes)!==0,wn||u){if(i=Bt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,pr(t,r),pi(i,t,r,-1))}return Fy(),i=Op(Error(J(421))),ph(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=h2.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,bn=es(r.nextSibling),kn=e,ct=!0,ui=null,t!==null&&(qn[Gn++]=ir,qn[Gn++]=rr,qn[Gn++]=ho,ir=t.id,rr=t.overflow,ho=e),e=Ly(e,i.children),e.flags|=4096,e)}function k0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Wm(t.return,e,n)}function Dp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function bE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(un(t,e,i.children,n),i=dt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k0(t,n,e);else if(t.tag===19)k0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(nt(dt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&_d(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Dp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&_d(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Dp(e,!0,n,null,o);break;case"together":Dp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jk(t,e,n){switch(e.tag){case 3:IE(e),Ua();break;case 5:tE(e);break;case 1:Tn(e.type)&&dd(e);break;case 4:Sy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;nt(md,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(nt(dt,dt.current&1),e.flags|=128,null):n&e.child.childLanes?AE(t,e,n):(nt(dt,dt.current&1),t=mr(t,e,n),t!==null?t.sibling:null);nt(dt,dt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return bE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),nt(dt,dt.current),i)break;return null;case 22:case 23:return e.lanes=0,SE(t,e,n)}return mr(t,e,n)}var kE,Xm,RE,NE;kE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xm=function(){};RE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,to(ki.current);var o=null;switch(n){case"input":r=wm(t,r),i=wm(t,i),o=[];break;case"select":r=gt({},r,{value:void 0}),i=gt({},i,{value:void 0}),o=[];break;case"textarea":r=Em(t,r),i=Em(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=cd)}Sm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Iu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Iu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&rt("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};NE=function(t,e,n,i){n!==i&&(e.flags|=4)};function ql(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function e2(t,e,n){var i=e.pendingProps;switch(_y(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Tn(e.type)&&hd(),Qt(e),null;case 3:return i=e.stateNode,Wa(),lt(xn),lt(nn),Iy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(dh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ui!==null&&(og(ui),ui=null))),Xm(t,e),Qt(e),null;case 5:Cy(e);var r=to(Fu.current);if(n=e.type,t!==null&&e.stateNode!=null)RE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(J(166));return Qt(e),null}if(t=to(ki.current),dh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Ii]=e,i[Vu]=o,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",i),rt("close",i);break;case"iframe":case"object":case"embed":rt("load",i);break;case"video":case"audio":for(r=0;r<tu.length;r++)rt(tu[r],i);break;case"source":rt("error",i);break;case"img":case"image":case"link":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"input":Fv(i,o),rt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},rt("invalid",i);break;case"textarea":Bv(i,o),rt("invalid",i)}Sm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&hh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&hh(i.textContent,u,t),r=["children",""+u]):Iu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&rt("scroll",i)}switch(n){case"input":ih(i),zv(i,o,!0);break;case"textarea":ih(i),Uv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=cd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Ii]=e,t[Vu]=i,kE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Cm(n,i),n){case"dialog":rt("cancel",t),rt("close",t),r=i;break;case"iframe":case"object":case"embed":rt("load",t),r=i;break;case"video":case"audio":for(r=0;r<tu.length;r++)rt(tu[r],t);r=i;break;case"source":rt("error",t),r=i;break;case"img":case"image":case"link":rt("error",t),rt("load",t),r=i;break;case"details":rt("toggle",t),r=i;break;case"input":Fv(t,i),r=wm(t,i),rt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=gt({},i,{value:void 0}),rt("invalid",t);break;case"textarea":Bv(t,i),r=Em(t,i),rt("invalid",t);break;default:r=i}Sm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?uT(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&aT(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Au(t,h):typeof h=="number"&&Au(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Iu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&rt("scroll",t):h!=null&&iy(t,o,h,a))}switch(n){case"input":ih(t),zv(t,i,!1);break;case"textarea":ih(t),Uv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ms(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Aa(t,!!i.multiple,o,!1):i.defaultValue!=null&&Aa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=cd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)NE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(J(166));if(n=to(Fu.current),to(ki.current),dh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ii]=e,(o=i.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:hh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ii]=e,e.stateNode=i}return Qt(e),null;case 13:if(lt(dt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&bn!==null&&e.mode&1&&!(e.flags&128))QT(),Ua(),e.flags|=98560,o=!1;else if(o=dh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[Ii]=e}else Ua(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),o=!1}else ui!==null&&(og(ui),ui=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Mt===0&&(Mt=3):Fy())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return Wa(),Xm(t,e),t===null&&Ou(e.stateNode.containerInfo),Qt(e),null;case 10:return Ty(e.type._context),Qt(e),null;case 17:return Tn(e.type)&&hd(),Qt(e),null;case 19:if(lt(dt),o=e.memoizedState,o===null)return Qt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)ql(o,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=_d(t),a!==null){for(e.flags|=128,ql(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(dt,dt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Et()>qa&&(e.flags|=128,i=!0,ql(o,!1),e.lanes=4194304)}else{if(!i)if(t=_d(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ql(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ct)return Qt(e),null}else 2*Et()-o.renderingStartTime>qa&&n!==1073741824&&(e.flags|=128,i=!0,ql(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Et(),e.sibling=null,n=dt.current,nt(dt,i?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return jy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?An&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function t2(t,e){switch(_y(e),e.tag){case 1:return Tn(e.type)&&hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wa(),lt(xn),lt(nn),Iy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cy(e),null;case 13:if(lt(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Ua()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(dt),null;case 4:return Wa(),null;case 10:return Ty(e.type._context),null;case 22:case 23:return jy(),null;case 24:return null;default:return null}}var mh=!1,en=!1,n2=typeof WeakSet=="function"?WeakSet:Set,le=null;function xa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){wt(t,e,i)}else n.current=null}function Jm(t,e,n){try{n()}catch(i){wt(t,e,i)}}var R0=!1;function i2(t,e){if(Dm=ad,t=VT(),gy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,g=0,m=t,_=null;t:for(;;){for(var T;m!==n||r!==0&&m.nodeType!==3||(u=a+r),m!==o||i!==0&&m.nodeType!==3||(h=a+i),m.nodeType===3&&(a+=m.nodeValue.length),(T=m.firstChild)!==null;)_=m,m=T;for(;;){if(m===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++g===i&&(h=a),(T=m.nextSibling)!==null)break;m=_,_=m.parentNode}m=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vm={focusedElem:t,selectionRange:n},ad=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var R=b.memoizedProps,V=b.memoizedState,k=e.stateNode,P=k.getSnapshotBeforeUpdate(e.elementType===e.type?R:ai(e.type,R),V);k.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(z){wt(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return b=R0,R0=!1,b}function fu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Jm(e,n,o)}r=r.next}while(r!==i)}}function pf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function eg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LE(t){var e=t.alternate;e!==null&&(t.alternate=null,LE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ii],delete e[Vu],delete e[zm],delete e[Fk],delete e[zk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ME(t){return t.tag===5||t.tag===3||t.tag===4}function N0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ME(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cd));else if(i!==4&&(t=t.child,t!==null))for(tg(t,e,n),t=t.sibling;t!==null;)tg(t,e,n),t=t.sibling}function ng(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ng(t,e,n),t=t.sibling;t!==null;)ng(t,e,n),t=t.sibling}var Ut=null,li=!1;function Mr(t,e,n){for(n=n.child;n!==null;)OE(t,e,n),n=n.sibling}function OE(t,e,n){if(bi&&typeof bi.onCommitFiberUnmount=="function")try{bi.onCommitFiberUnmount(of,n)}catch{}switch(n.tag){case 5:en||xa(n,e);case 6:var i=Ut,r=li;Ut=null,Mr(t,e,n),Ut=i,li=r,Ut!==null&&(li?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(li?(t=Ut,n=n.stateNode,t.nodeType===8?bp(t.parentNode,n):t.nodeType===1&&bp(t,n),Nu(t)):bp(Ut,n.stateNode));break;case 4:i=Ut,r=li,Ut=n.stateNode.containerInfo,li=!0,Mr(t,e,n),Ut=i,li=r;break;case 0:case 11:case 14:case 15:if(!en&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Jm(n,e,a),r=r.next}while(r!==i)}Mr(t,e,n);break;case 1:if(!en&&(xa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){wt(n,e,u)}Mr(t,e,n);break;case 21:Mr(t,e,n);break;case 22:n.mode&1?(en=(i=en)||n.memoizedState!==null,Mr(t,e,n),en=i):Mr(t,e,n);break;default:Mr(t,e,n)}}function L0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new n2),e.forEach(function(i){var r=d2.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function oi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ut=u.stateNode,li=!1;break e;case 3:Ut=u.stateNode.containerInfo,li=!0;break e;case 4:Ut=u.stateNode.containerInfo,li=!0;break e}u=u.return}if(Ut===null)throw Error(J(160));OE(o,a,r),Ut=null,li=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){wt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DE(e,t),e=e.sibling}function DE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oi(e,t),Pi(t),i&4){try{fu(3,t,t.return),pf(3,t)}catch(R){wt(t,t.return,R)}try{fu(5,t,t.return)}catch(R){wt(t,t.return,R)}}break;case 1:oi(e,t),Pi(t),i&512&&n!==null&&xa(n,n.return);break;case 5:if(oi(e,t),Pi(t),i&512&&n!==null&&xa(n,n.return),t.flags&32){var r=t.stateNode;try{Au(r,"")}catch(R){wt(t,t.return,R)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&rT(r,o),Cm(u,a);var f=Cm(u,o);for(a=0;a<h.length;a+=2){var g=h[a],m=h[a+1];g==="style"?uT(r,m):g==="dangerouslySetInnerHTML"?aT(r,m):g==="children"?Au(r,m):iy(r,g,m,f)}switch(u){case"input":xm(r,o);break;case"textarea":sT(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Aa(r,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?Aa(r,!!o.multiple,o.defaultValue,!0):Aa(r,!!o.multiple,o.multiple?[]:"",!1))}r[Vu]=o}catch(R){wt(t,t.return,R)}}break;case 6:if(oi(e,t),Pi(t),i&4){if(t.stateNode===null)throw Error(J(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(R){wt(t,t.return,R)}}break;case 3:if(oi(e,t),Pi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Nu(e.containerInfo)}catch(R){wt(t,t.return,R)}break;case 4:oi(e,t),Pi(t);break;case 13:oi(e,t),Pi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Dy=Et())),i&4&&L0(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(en=(f=en)||g,oi(e,t),en=f):oi(e,t),Pi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!g&&t.mode&1)for(le=t,g=t.child;g!==null;){for(m=le=g;le!==null;){switch(_=le,T=_.child,_.tag){case 0:case 11:case 14:case 15:fu(4,_,_.return);break;case 1:xa(_,_.return);var b=_.stateNode;if(typeof b.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(R){wt(i,n,R)}}break;case 5:xa(_,_.return);break;case 22:if(_.memoizedState!==null){O0(m);continue}}T!==null?(T.return=_,le=T):O0(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{r=m.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=m.stateNode,h=m.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=lT("display",a))}catch(R){wt(t,t.return,R)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(R){wt(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:oi(e,t),Pi(t),i&4&&L0(t);break;case 21:break;default:oi(e,t),Pi(t)}}function Pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ME(n)){var i=n;break e}n=n.return}throw Error(J(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Au(r,""),i.flags&=-33);var o=N0(t);ng(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=N0(t);tg(t,u,a);break;default:throw Error(J(161))}}catch(h){wt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function r2(t,e,n){le=t,VE(t)}function VE(t,e,n){for(var i=(t.mode&1)!==0;le!==null;){var r=le,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||mh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||en;u=mh;var f=en;if(mh=a,(en=h)&&!f)for(le=r;le!==null;)a=le,h=a.child,a.tag===22&&a.memoizedState!==null?D0(r):h!==null?(h.return=a,le=h):D0(r);for(;o!==null;)le=o,VE(o),o=o.sibling;le=r,mh=u,en=f}M0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,le=o):M0(t)}}function M0(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||pf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!en)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ai(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&_0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&Nu(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}en||e.flags&512&&eg(e)}catch(_){wt(e,e.return,_)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function O0(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function D0(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pf(4,e)}catch(h){wt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){wt(e,r,h)}}var o=e.return;try{eg(e)}catch(h){wt(e,o,h)}break;case 5:var a=e.return;try{eg(e)}catch(h){wt(e,a,h)}}}catch(h){wt(e,e.return,h)}if(e===t){le=null;break}var u=e.sibling;if(u!==null){u.return=e.return,le=u;break}le=e.return}}var s2=Math.ceil,xd=Tr.ReactCurrentDispatcher,My=Tr.ReactCurrentOwner,Yn=Tr.ReactCurrentBatchConfig,$e=0,Bt=null,kt=null,$t=0,An=0,Ta=Is(0),Mt=0,Hu=null,po=0,mf=0,Oy=0,pu=null,vn=null,Dy=0,qa=1/0,er=null,Td=!1,ig=null,ns=null,gh=!1,Zr=null,Ed=0,mu=0,rg=null,Bh=-1,Uh=0;function hn(){return $e&6?Et():Bh!==-1?Bh:Bh=Et()}function is(t){return t.mode&1?$e&2&&$t!==0?$t&-$t:Uk.transition!==null?(Uh===0&&(Uh=xT()),Uh):(t=Je,t!==0||(t=window.event,t=t===void 0?16:AT(t.type)),t):1}function pi(t,e,n,i){if(50<mu)throw mu=0,rg=null,Error(J(185));rc(t,n,i),(!($e&2)||t!==Bt)&&(t===Bt&&(!($e&2)&&(mf|=n),Mt===4&&Ur(t,$t)),En(t,i),n===1&&$e===0&&!(e.mode&1)&&(qa=Et()+500,hf&&As()))}function En(t,e){var n=t.callbackNode;Ub(t,e);var i=od(t,t===Bt?$t:0);if(i===0)n!==null&&$v(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&$v(n),e===1)t.tag===0?Bk(V0.bind(null,t)):GT(V0.bind(null,t)),Vk(function(){!($e&6)&&As()}),n=null;else{switch(TT(i)){case 1:n=ly;break;case 4:n=vT;break;case 16:n=sd;break;case 536870912:n=wT;break;default:n=sd}n=$E(n,jE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jE(t,e){if(Bh=-1,Uh=0,$e&6)throw Error(J(327));var n=t.callbackNode;if(La()&&t.callbackNode!==n)return null;var i=od(t,t===Bt?$t:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Pd(t,i);else{e=i;var r=$e;$e|=2;var o=zE();(Bt!==t||$t!==e)&&(er=null,qa=Et()+500,ro(t,e));do try{l2();break}catch(u){FE(t,u)}while(!0);xy(),xd.current=o,$e=r,kt!==null?e=0:(Bt=null,$t=0,e=Mt)}if(e!==0){if(e===2&&(r=Rm(t),r!==0&&(i=r,e=sg(t,r))),e===1)throw n=Hu,ro(t,0),Ur(t,i),En(t,Et()),n;if(e===6)Ur(t,i);else{if(r=t.current.alternate,!(i&30)&&!o2(r)&&(e=Pd(t,i),e===2&&(o=Rm(t),o!==0&&(i=o,e=sg(t,o))),e===1))throw n=Hu,ro(t,0),Ur(t,i),En(t,Et()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(J(345));case 2:Gs(t,vn,er);break;case 3:if(Ur(t,i),(i&130023424)===i&&(e=Dy+500-Et(),10<e)){if(od(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){hn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Fm(Gs.bind(null,t,vn,er),e);break}Gs(t,vn,er);break;case 4:if(Ur(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-fi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=Et()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*s2(i/1960))-i,10<i){t.timeoutHandle=Fm(Gs.bind(null,t,vn,er),i);break}Gs(t,vn,er);break;case 5:Gs(t,vn,er);break;default:throw Error(J(329))}}}return En(t,Et()),t.callbackNode===n?jE.bind(null,t):null}function sg(t,e){var n=pu;return t.current.memoizedState.isDehydrated&&(ro(t,e).flags|=256),t=Pd(t,e),t!==2&&(e=vn,vn=n,e!==null&&og(e)),t}function og(t){vn===null?vn=t:vn.push.apply(vn,t)}function o2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!mi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ur(t,e){for(e&=~Oy,e&=~mf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fi(e),i=1<<n;t[n]=-1,e&=~i}}function V0(t){if($e&6)throw Error(J(327));La();var e=od(t,0);if(!(e&1))return En(t,Et()),null;var n=Pd(t,e);if(t.tag!==0&&n===2){var i=Rm(t);i!==0&&(e=i,n=sg(t,i))}if(n===1)throw n=Hu,ro(t,0),Ur(t,e),En(t,Et()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,vn,er),En(t,Et()),null}function Vy(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(qa=Et()+500,hf&&As())}}function mo(t){Zr!==null&&Zr.tag===0&&!($e&6)&&La();var e=$e;$e|=1;var n=Yn.transition,i=Je;try{if(Yn.transition=null,Je=1,t)return t()}finally{Je=i,Yn.transition=n,$e=e,!($e&6)&&As()}}function jy(){An=Ta.current,lt(Ta)}function ro(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Dk(n)),kt!==null)for(n=kt.return;n!==null;){var i=n;switch(_y(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&hd();break;case 3:Wa(),lt(xn),lt(nn),Iy();break;case 5:Cy(i);break;case 4:Wa();break;case 13:lt(dt);break;case 19:lt(dt);break;case 10:Ty(i.type._context);break;case 22:case 23:jy()}n=n.return}if(Bt=t,kt=t=rs(t.current,null),$t=An=e,Mt=0,Hu=null,Oy=mf=po=0,vn=pu=null,eo!==null){for(e=0;e<eo.length;e++)if(n=eo[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}eo=null}return t}function FE(t,e){do{var n=kt;try{if(xy(),jh.current=wd,vd){for(var i=pt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}vd=!1}if(fo=0,zt=Nt=pt=null,du=!1,zu=0,My.current=null,n===null||n.return===null){Mt=1,Hu=e,kt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=$t,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,g=u,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var _=g.alternate;_?(g.updateQueue=_.updateQueue,g.memoizedState=_.memoizedState,g.lanes=_.lanes):(g.updateQueue=null,g.memoizedState=null)}var T=P0(a);if(T!==null){T.flags&=-257,S0(T,a,u,o,e),T.mode&1&&E0(o,f,e),e=T,h=f;var b=e.updateQueue;if(b===null){var R=new Set;R.add(h),e.updateQueue=R}else b.add(h);break e}else{if(!(e&1)){E0(o,f,e),Fy();break e}h=Error(J(426))}}else if(ct&&u.mode&1){var V=P0(a);if(V!==null){!(V.flags&65536)&&(V.flags|=256),S0(V,a,u,o,e),vy($a(h,u));break e}}o=h=$a(h,u),Mt!==4&&(Mt=2),pu===null?pu=[o]:pu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=TE(o,h,e);y0(o,k);break e;case 1:u=h;var P=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ns===null||!ns.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var z=EE(o,u,e);y0(o,z);break e}}o=o.return}while(o!==null)}UE(n)}catch(G){e=G,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function zE(){var t=xd.current;return xd.current=wd,t===null?wd:t}function Fy(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Bt===null||!(po&268435455)&&!(mf&268435455)||Ur(Bt,$t)}function Pd(t,e){var n=$e;$e|=2;var i=zE();(Bt!==t||$t!==e)&&(er=null,ro(t,e));do try{a2();break}catch(r){FE(t,r)}while(!0);if(xy(),$e=n,xd.current=i,kt!==null)throw Error(J(261));return Bt=null,$t=0,Mt}function a2(){for(;kt!==null;)BE(kt)}function l2(){for(;kt!==null&&!Lb();)BE(kt)}function BE(t){var e=WE(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?UE(t):kt=e,My.current=null}function UE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=t2(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,kt=null;return}}else if(n=e2(n,e,An),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Mt===0&&(Mt=5)}function Gs(t,e,n){var i=Je,r=Yn.transition;try{Yn.transition=null,Je=1,u2(t,e,n,i)}finally{Yn.transition=r,Je=i}return null}function u2(t,e,n,i){do La();while(Zr!==null);if($e&6)throw Error(J(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Hb(t,o),t===Bt&&(kt=Bt=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gh||(gh=!0,$E(sd,function(){return La(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Yn.transition,Yn.transition=null;var a=Je;Je=1;var u=$e;$e|=4,My.current=null,i2(t,n),DE(n,t),bk(Vm),ad=!!Dm,Vm=Dm=null,t.current=n,r2(n),Mb(),$e=u,Je=a,Yn.transition=o}else t.current=n;if(gh&&(gh=!1,Zr=t,Ed=r),o=t.pendingLanes,o===0&&(ns=null),Vb(n.stateNode),En(t,Et()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Td)throw Td=!1,t=ig,ig=null,t;return Ed&1&&t.tag!==0&&La(),o=t.pendingLanes,o&1?t===rg?mu++:(mu=0,rg=t):mu=0,As(),null}function La(){if(Zr!==null){var t=TT(Ed),e=Yn.transition,n=Je;try{if(Yn.transition=null,Je=16>t?16:t,Zr===null)var i=!1;else{if(t=Zr,Zr=null,Ed=0,$e&6)throw Error(J(331));var r=$e;for($e|=4,le=t.current;le!==null;){var o=le,a=o.child;if(le.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(le=f;le!==null;){var g=le;switch(g.tag){case 0:case 11:case 15:fu(8,g,o)}var m=g.child;if(m!==null)m.return=g,le=m;else for(;le!==null;){g=le;var _=g.sibling,T=g.return;if(LE(g),g===f){le=null;break}if(_!==null){_.return=T,le=_;break}le=T}}}var b=o.alternate;if(b!==null){var R=b.child;if(R!==null){b.child=null;do{var V=R.sibling;R.sibling=null,R=V}while(R!==null)}}le=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,le=a;else e:for(;le!==null;){if(o=le,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fu(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,le=k;break e}le=o.return}}var P=t.current;for(le=P;le!==null;){a=le;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,le=C;else e:for(a=P;le!==null;){if(u=le,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:pf(9,u)}}catch(G){wt(u,u.return,G)}if(u===a){le=null;break e}var z=u.sibling;if(z!==null){z.return=u.return,le=z;break e}le=u.return}}if($e=r,As(),bi&&typeof bi.onPostCommitFiberRoot=="function")try{bi.onPostCommitFiberRoot(of,t)}catch{}i=!0}return i}finally{Je=n,Yn.transition=e}}return!1}function j0(t,e,n){e=$a(n,e),e=TE(t,e,1),t=ts(t,e,1),e=hn(),t!==null&&(rc(t,1,e),En(t,e))}function wt(t,e,n){if(t.tag===3)j0(t,t,n);else for(;e!==null;){if(e.tag===3){j0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ns===null||!ns.has(i))){t=$a(n,t),t=EE(e,t,1),e=ts(e,t,1),t=hn(),e!==null&&(rc(e,1,t),En(e,t));break}}e=e.return}}function c2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&($t&n)===n&&(Mt===4||Mt===3&&($t&130023424)===$t&&500>Et()-Dy?ro(t,0):Oy|=n),En(t,e)}function HE(t,e){e===0&&(t.mode&1?(e=oh,oh<<=1,!(oh&130023424)&&(oh=4194304)):e=1);var n=hn();t=pr(t,e),t!==null&&(rc(t,e,n),En(t,n))}function h2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),HE(t,n)}function d2(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(J(314))}i!==null&&i.delete(e),HE(t,n)}var WE;WE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,Jk(t,e,n);wn=!!(t.flags&131072)}else wn=!1,ct&&e.flags&1048576&&ZT(e,pd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;zh(t,e),t=e.pendingProps;var r=Ba(e,nn.current);Na(e,n),r=by(null,e,i,t,r,n);var o=ky();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(i)?(o=!0,dd(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Py(e),r.updater=ff,e.stateNode=r,r._reactInternals=e,qm(e,i,t,n),e=Km(null,e,i,!0,o,n)):(e.tag=0,ct&&o&&yy(e),un(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(zh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=p2(i),t=ai(i,t),r){case 0:e=Zm(null,e,i,t,n);break e;case 1:e=A0(null,e,i,t,n);break e;case 11:e=C0(null,e,i,t,n);break e;case 14:e=I0(null,e,i,ai(i.type,t),n);break e}throw Error(J(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),Zm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),A0(t,e,i,r,n);case 3:e:{if(IE(e),t===null)throw Error(J(387));i=e.pendingProps,o=e.memoizedState,r=o.element,eE(t,e),yd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=$a(Error(J(423)),e),e=b0(t,e,i,n,r);break e}else if(i!==r){r=$a(Error(J(424)),e),e=b0(t,e,i,n,r);break e}else for(bn=es(e.stateNode.containerInfo.firstChild),kn=e,ct=!0,ui=null,n=XT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ua(),i===r){e=mr(t,e,n);break e}un(t,e,i,n)}e=e.child}return e;case 5:return tE(e),t===null&&Hm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,jm(i,r)?a=null:o!==null&&jm(i,o)&&(e.flags|=32),CE(t,e),un(t,e,a,n),e.child;case 6:return t===null&&Hm(e),null;case 13:return AE(t,e,n);case 4:return Sy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ha(e,null,i,n):un(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),C0(t,e,i,r,n);case 7:return un(t,e,e.pendingProps,n),e.child;case 8:return un(t,e,e.pendingProps.children,n),e.child;case 12:return un(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,nt(md,i._currentValue),i._currentValue=a,o!==null)if(mi(o.value,a)){if(o.children===r.children&&!xn.current){e=mr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=lr(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?h.next=h:(h.next=g.next,g.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Wm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(J(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Wm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}un(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Na(e,n),r=Xn(r),i=i(r),e.flags|=1,un(t,e,i,n),e.child;case 14:return i=e.type,r=ai(i,e.pendingProps),r=ai(i.type,r),I0(t,e,i,r,n);case 15:return PE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),zh(t,e),e.tag=1,Tn(i)?(t=!0,dd(e)):t=!1,Na(e,n),xE(e,i,r),qm(e,i,r,n),Km(null,e,i,!0,t,n);case 19:return bE(t,e,n);case 22:return SE(t,e,n)}throw Error(J(156,e.tag))};function $E(t,e){return _T(t,e)}function f2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,e,n,i){return new f2(t,e,n,i)}function zy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function p2(t){if(typeof t=="function")return zy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sy)return 11;if(t===oy)return 14}return 2}function rs(t,e){var n=t.alternate;return n===null?(n=Qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")zy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case da:return so(n.children,r,o,e);case ry:a=8,r|=8;break;case gm:return t=Qn(12,n,e,r|2),t.elementType=gm,t.lanes=o,t;case ym:return t=Qn(13,n,e,r),t.elementType=ym,t.lanes=o,t;case _m:return t=Qn(19,n,e,r),t.elementType=_m,t.lanes=o,t;case tT:return gf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J1:a=10;break e;case eT:a=9;break e;case sy:a=11;break e;case oy:a=14;break e;case jr:a=16,i=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Qn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function so(t,e,n,i){return t=Qn(7,t,i,e),t.lanes=n,t}function gf(t,e,n,i){return t=Qn(22,t,i,e),t.elementType=tT,t.lanes=n,t.stateNode={isHidden:!1},t}function Vp(t,e,n){return t=Qn(6,t,null,e),t.lanes=n,t}function jp(t,e,n){return e=Qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function m2(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_p(0),this.expirationTimes=_p(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_p(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function By(t,e,n,i,r,o,a,u,h){return t=new m2(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Qn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Py(o),t}function g2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ha,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function qE(t){if(!t)return gs;t=t._reactInternals;e:{if(To(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Tn(n))return qT(t,n,e)}return e}function GE(t,e,n,i,r,o,a,u,h){return t=By(n,i,!0,t,r,o,a,u,h),t.context=qE(null),n=t.current,i=hn(),r=is(n),o=lr(i,r),o.callback=e??null,ts(n,o,r),t.current.lanes=r,rc(t,r,i),En(t,i),t}function yf(t,e,n,i){var r=e.current,o=hn(),a=is(r);return n=qE(n),e.context===null?e.context=n:e.pendingContext=n,e=lr(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ts(r,e,a),t!==null&&(pi(t,r,a,o),Vh(t,r,a)),a}function Sd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function F0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uy(t,e){F0(t,e),(t=t.alternate)&&F0(t,e)}function y2(){return null}var ZE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hy(t){this._internalRoot=t}_f.prototype.render=Hy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));yf(t,e,null,null)};_f.prototype.unmount=Hy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mo(function(){yf(null,t,null,null)}),e[fr]=null}};function _f(t){this._internalRoot=t}_f.prototype.unstable_scheduleHydration=function(t){if(t){var e=ST();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Br.length&&e!==0&&e<Br[n].priority;n++);Br.splice(n,0,t),n===0&&IT(t)}};function Wy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function z0(){}function _2(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Sd(a);o.call(f)}}var a=GE(e,i,t,0,null,!1,!1,"",z0);return t._reactRootContainer=a,t[fr]=a.current,Ou(t.nodeType===8?t.parentNode:t),mo(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Sd(h);u.call(f)}}var h=By(t,0,!1,null,null,!1,!1,"",z0);return t._reactRootContainer=h,t[fr]=h.current,Ou(t.nodeType===8?t.parentNode:t),mo(function(){yf(e,h,n,i)}),h}function wf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=Sd(a);u.call(h)}}yf(e,a,t,r)}else a=_2(n,e,t,r,i);return Sd(a)}ET=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=eu(e.pendingLanes);n!==0&&(uy(e,n|1),En(e,Et()),!($e&6)&&(qa=Et()+500,As()))}break;case 13:mo(function(){var i=pr(t,1);if(i!==null){var r=hn();pi(i,t,1,r)}}),Uy(t,1)}};cy=function(t){if(t.tag===13){var e=pr(t,134217728);if(e!==null){var n=hn();pi(e,t,134217728,n)}Uy(t,134217728)}};PT=function(t){if(t.tag===13){var e=is(t),n=pr(t,e);if(n!==null){var i=hn();pi(n,t,e,i)}Uy(t,e)}};ST=function(){return Je};CT=function(t,e){var n=Je;try{return Je=t,e()}finally{Je=n}};Am=function(t,e,n){switch(e){case"input":if(xm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=cf(i);if(!r)throw Error(J(90));iT(i),xm(i,r)}}}break;case"textarea":sT(t,n);break;case"select":e=n.value,e!=null&&Aa(t,!!n.multiple,e,!1)}};dT=Vy;fT=mo;var v2={usingClientEntryPoint:!1,Events:[oc,ga,cf,cT,hT,Vy]},Gl={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w2={bundleType:Gl.bundleType,version:Gl.version,rendererPackageName:Gl.rendererPackageName,rendererConfig:Gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gT(t),t===null?null:t.stateNode},findFiberByHostInstance:Gl.findFiberByHostInstance||y2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{of=yh.inject(w2),bi=yh}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v2;Mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wy(e))throw Error(J(200));return g2(t,e,null,n)};Mn.createRoot=function(t,e){if(!Wy(t))throw Error(J(299));var n=!1,i="",r=ZE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=By(t,1,!1,null,null,n,!1,i,r),t[fr]=e.current,Ou(t.nodeType===8?t.parentNode:t),new Hy(e)};Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=gT(e),t=t===null?null:t.stateNode,t};Mn.flushSync=function(t){return mo(t)};Mn.hydrate=function(t,e,n){if(!vf(e))throw Error(J(200));return wf(null,t,e,!0,n)};Mn.hydrateRoot=function(t,e,n){if(!Wy(t))throw Error(J(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=ZE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=GE(e,null,t,1,n??null,r,!1,o,a),t[fr]=e.current,Ou(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new _f(e)};Mn.render=function(t,e,n){if(!vf(e))throw Error(J(200));return wf(null,t,e,!1,n)};Mn.unmountComponentAtNode=function(t){if(!vf(t))throw Error(J(40));return t._reactRootContainer?(mo(function(){wf(null,null,t,!1,function(){t._reactRootContainer=null,t[fr]=null})}),!0):!1};Mn.unstable_batchedUpdates=Vy;Mn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!vf(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return wf(t,e,n,!1,i)};Mn.version="18.3.1-next-f1338f8080-20240426";function KE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KE)}catch(t){console.error(t)}}KE(),K1.exports=Mn;var x2=K1.exports,B0=x2;pm.createRoot=B0.createRoot,pm.hydrateRoot=B0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wu.apply(this,arguments)}var Kr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Kr||(Kr={}));const U0="popstate";function T2(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=Eo(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),ag("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:Cd(o))}function i(r,o){xf(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return P2(e,n,i,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E2(){return Math.random().toString(36).substr(2,8)}function H0(t,e){return{usr:t.state,key:t.key,idx:e}}function ag(t,e,n,i){return n===void 0&&(n=null),Wu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Eo(e):e,{state:n,key:e&&e.key||i||E2()})}function Cd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function P2(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Kr.Pop,h=null,f=g();f==null&&(f=0,a.replaceState(Wu({},a.state,{idx:f}),""));function g(){return(a.state||{idx:null}).idx}function m(){u=Kr.Pop;let V=g(),k=V==null?null:V-f;f=V,h&&h({action:u,location:R.location,delta:k})}function _(V,k){u=Kr.Push;let P=ag(R.location,V,k);n&&n(P,V),f=g()+1;let C=H0(P,f),z=R.createHref(P);try{a.pushState(C,"",z)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(z)}o&&h&&h({action:u,location:R.location,delta:1})}function T(V,k){u=Kr.Replace;let P=ag(R.location,V,k);n&&n(P,V),f=g();let C=H0(P,f),z=R.createHref(P);a.replaceState(C,"",z),o&&h&&h({action:u,location:R.location,delta:0})}function b(V){let k=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof V=="string"?V:Cd(V);return P=P.replace(/ $/,"%20"),mt(k,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,k)}let R={get action(){return u},get location(){return t(r,a)},listen(V){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(U0,m),h=V,()=>{r.removeEventListener(U0,m),h=null}},createHref(V){return e(r,V)},createURL:b,encodeLocation(V){let k=b(V);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:T,go(V){return a.go(V)}};return R}var W0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(W0||(W0={}));function S2(t,e,n){return n===void 0&&(n="/"),C2(t,e,n)}function C2(t,e,n,i){let r=typeof e=="string"?Eo(e):e,o=Ga(r.pathname||"/",n);if(o==null)return null;let a=QE(t);I2(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=j2(o);u=D2(a[h],f)}return u}function QE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(mt(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=ss([i,h.relativePath]),g=n.concat(h);o.children&&o.children.length>0&&(mt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),QE(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:M2(f,o.index),routesMeta:g})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of YE(o.path))r(o,a,h)}),e}function YE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=YE(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function I2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:O2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const A2=/^:[\w-]+$/,b2=3,k2=2,R2=1,N2=10,L2=-2,$0=t=>t==="*";function M2(t,e){let n=t.split("/"),i=n.length;return n.some($0)&&(i+=L2),e&&(i+=k2),n.filter(r=>!$0(r)).reduce((r,o)=>r+(A2.test(o)?b2:o===""?R2:N2),i)}function O2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function D2(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",m=lg({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),_=h.route;if(!m)return null;Object.assign(r,m.params),a.push({params:r,pathname:ss([o,m.pathname]),pathnameBase:H2(ss([o,m.pathnameBase])),route:_}),m.pathnameBase!=="/"&&(o=ss([o,m.pathnameBase]))}return a}function lg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=V2(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,g,m)=>{let{paramName:_,isOptional:T}=g;if(_==="*"){let R=u[m]||"";a=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const b=u[m];return T&&!b?f[_]=void 0:f[_]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function V2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function j2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ga(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const F2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z2=t=>F2.test(t);function B2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Eo(t):t,o;if(n)if(z2(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),xf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=q0(n.substring(1),"/"):o=q0(n,e)}else o=e;return{pathname:o,search:W2(i),hash:$2(r)}}function q0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Fp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function U2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $y(t,e){let n=U2(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function qy(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Eo(t):(r=Wu({},t),mt(!r.pathname||!r.pathname.includes("?"),Fp("?","pathname","search",r)),mt(!r.pathname||!r.pathname.includes("#"),Fp("#","pathname","hash",r)),mt(!r.search||!r.search.includes("#"),Fp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let m=e.length-1;if(!i&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),m-=1;r.pathname=_.join("/")}u=m>=0?e[m]:"/"}let h=B2(r,u),f=a&&a!=="/"&&a.endsWith("/"),g=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}const ss=t=>t.join("/").replace(/\/\/+/g,"/"),H2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),W2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function q2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const XE=["post","put","patch","delete"];new Set(XE);const G2=["get",...XE];new Set(G2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $u(){return $u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$u.apply(this,arguments)}const Tf=O.createContext(null),JE=O.createContext(null),Er=O.createContext(null),Ef=O.createContext(null),bs=O.createContext({outlet:null,matches:[],isDataRoute:!1}),eP=O.createContext(null);function Z2(t,e){let{relative:n}=e===void 0?{}:e;al()||mt(!1);let{basename:i,navigator:r}=O.useContext(Er),{hash:o,pathname:a,search:u}=Sf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:ss([i,a])),r.createHref({pathname:h,search:u,hash:o})}function al(){return O.useContext(Ef)!=null}function Po(){return al()||mt(!1),O.useContext(Ef).location}function tP(t){O.useContext(Er).static||O.useLayoutEffect(t)}function Pf(){let{isDataRoute:t}=O.useContext(bs);return t?aR():K2()}function K2(){al()||mt(!1);let t=O.useContext(Tf),{basename:e,future:n,navigator:i}=O.useContext(Er),{matches:r}=O.useContext(bs),{pathname:o}=Po(),a=JSON.stringify($y(r,n.v7_relativeSplatPath)),u=O.useRef(!1);return tP(()=>{u.current=!0}),O.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let m=qy(f,JSON.parse(a),o,g.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ss([e,m.pathname])),(g.replace?i.replace:i.push)(m,g.state,g)},[e,i,a,o,t])}function Sf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(Er),{matches:r}=O.useContext(bs),{pathname:o}=Po(),a=JSON.stringify($y(r,i.v7_relativeSplatPath));return O.useMemo(()=>qy(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function Q2(t,e){return Y2(t,e)}function Y2(t,e,n,i){al()||mt(!1);let{navigator:r}=O.useContext(Er),{matches:o}=O.useContext(bs),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=Po(),g;if(e){var m;let V=typeof e=="string"?Eo(e):e;h==="/"||(m=V.pathname)!=null&&m.startsWith(h)||mt(!1),g=V}else g=f;let _=g.pathname||"/",T=_;if(h!=="/"){let V=h.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(V.length).join("/")}let b=S2(t,{pathname:T}),R=nR(b&&b.map(V=>Object.assign({},V,{params:Object.assign({},u,V.params),pathname:ss([h,r.encodeLocation?r.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?h:ss([h,r.encodeLocation?r.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,n,i);return e&&R?O.createElement(Ef.Provider,{value:{location:$u({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Kr.Pop}},R):R}function X2(){let t=oR(),e=q2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const J2=O.createElement(X2,null);class eR extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(bs.Provider,{value:this.props.routeContext},O.createElement(eP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tR(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(Tf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(bs.Provider,{value:e},i)}function nR(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let g=a.findIndex(m=>m.route.id&&(u==null?void 0:u[m.route.id])!==void 0);g>=0||mt(!1),a=a.slice(0,Math.min(a.length,g+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let g=0;g<a.length;g++){let m=a[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=g),m.route.id){let{loaderData:_,errors:T}=n,b=m.route.loader&&_[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||b){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((g,m,_)=>{let T,b=!1,R=null,V=null;n&&(T=u&&m.route.id?u[m.route.id]:void 0,R=m.route.errorElement||J2,h&&(f<0&&_===0?(lR("route-fallback"),b=!0,V=null):f===_&&(b=!0,V=m.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,_+1)),P=()=>{let C;return T?C=R:b?C=V:m.route.Component?C=O.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=g,O.createElement(tR,{match:m,routeContext:{outlet:g,matches:k,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?O.createElement(eR,{location:n.location,revalidation:n.revalidation,component:R,error:T,children:P(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):P()},null)}var nP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nP||{}),iP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(iP||{});function iR(t){let e=O.useContext(Tf);return e||mt(!1),e}function rR(t){let e=O.useContext(JE);return e||mt(!1),e}function sR(t){let e=O.useContext(bs);return e||mt(!1),e}function rP(t){let e=sR(),n=e.matches[e.matches.length-1];return n.route.id||mt(!1),n.route.id}function oR(){var t;let e=O.useContext(eP),n=rR(),i=rP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function aR(){let{router:t}=iR(nP.UseNavigateStable),e=rP(iP.UseNavigateStable),n=O.useRef(!1);return tP(()=>{n.current=!0}),O.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,$u({fromRouteId:e},o)))},[t,e])}const G0={};function lR(t,e,n){G0[t]||(G0[t]=!0)}function uR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function sP(t){let{to:e,replace:n,state:i,relative:r}=t;al()||mt(!1);let{future:o,static:a}=O.useContext(Er),{matches:u}=O.useContext(bs),{pathname:h}=Po(),f=Pf(),g=qy(e,$y(u,o.v7_relativeSplatPath),h,r==="path"),m=JSON.stringify(g);return O.useEffect(()=>f(JSON.parse(m),{replace:n,state:i,relative:r}),[f,m,r,n,i]),null}function Dr(t){mt(!1)}function cR(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Kr.Pop,navigator:o,static:a=!1,future:u}=t;al()&&mt(!1);let h=e.replace(/^\/*/,"/"),f=O.useMemo(()=>({basename:h,navigator:o,static:a,future:$u({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=Eo(i));let{pathname:g="/",search:m="",hash:_="",state:T=null,key:b="default"}=i,R=O.useMemo(()=>{let V=Ga(g,h);return V==null?null:{location:{pathname:V,search:m,hash:_,state:T,key:b},navigationType:r}},[h,g,m,_,T,b,r]);return R==null?null:O.createElement(Er.Provider,{value:f},O.createElement(Ef.Provider,{children:n,value:R}))}function hR(t){let{children:e,location:n}=t;return Q2(ug(e),n)}new Promise(()=>{});function ug(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let o=[...e,r];if(i.type===O.Fragment){n.push.apply(n,ug(i.props.children,o));return}i.type!==Dr&&mt(!1),!i.props.index||!i.props.children||mt(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=ug(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Id(){return Id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Id.apply(this,arguments)}function oP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function dR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fR(t,e){return t.button===0&&(!e||e==="_self")&&!dR(t)}const pR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],gR="6";try{window.__reactRouterVersion=gR}catch{}const yR=O.createContext({isTransitioning:!1}),_R="startTransition",Z0=cb[_R];function vR(t){let{basename:e,children:n,future:i,window:r}=t,o=O.useRef();o.current==null&&(o.current=T2({window:r,v5Compat:!0}));let a=o.current,[u,h]=O.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},g=O.useCallback(m=>{f&&Z0?Z0(()=>h(m)):h(m)},[h,f]);return O.useLayoutEffect(()=>a.listen(g),[a,g]),O.useEffect(()=>uR(i),[i]),O.createElement(cR,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const wR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TR=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:g,viewTransition:m}=e,_=oP(e,pR),{basename:T}=O.useContext(Er),b,R=!1;if(typeof f=="string"&&xR.test(f)&&(b=f,wR))try{let C=new URL(window.location.href),z=f.startsWith("//")?new URL(C.protocol+f):new URL(f),G=Ga(z.pathname,T);z.origin===C.origin&&G!=null?f=G+z.search+z.hash:R=!0}catch{}let V=Z2(f,{relative:r}),k=SR(f,{replace:a,state:u,target:h,preventScrollReset:g,relative:r,viewTransition:m});function P(C){i&&i(C),C.defaultPrevented||k(C)}return O.createElement("a",Id({},_,{href:b||V,onClick:R||o?i:P,ref:n,target:h}))}),ER=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:g}=e,m=oP(e,mR),_=Sf(h,{relative:m.relative}),T=Po(),b=O.useContext(JE),{navigator:R,basename:V}=O.useContext(Er),k=b!=null&&CR(_)&&f===!0,P=R.encodeLocation?R.encodeLocation(_).pathname:_.pathname,C=T.pathname,z=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(C=C.toLowerCase(),z=z?z.toLowerCase():null,P=P.toLowerCase()),z&&V&&(z=Ga(z,V)||z);const G=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let B=C===P||!a&&C.startsWith(P)&&C.charAt(G)==="/",A=z!=null&&(z===P||!a&&z.startsWith(P)&&z.charAt(P.length)==="/"),S={isActive:B,isPending:A,isTransitioning:k},N=B?i:void 0,D;typeof o=="function"?D=o(S):D=[o,B?"active":null,A?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(S):u;return O.createElement(TR,Id({},m,{"aria-current":N,className:D,ref:n,style:j,to:h,viewTransition:f}),typeof g=="function"?g(S):g)});var cg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cg||(cg={}));var K0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(K0||(K0={}));function PR(t){let e=O.useContext(Tf);return e||mt(!1),e}function SR(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=Pf(),f=Po(),g=Sf(t,{relative:a});return O.useCallback(m=>{if(fR(m,n)){m.preventDefault();let _=i!==void 0?i:Cd(f)===Cd(g);h(t,{replace:_,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,g,i,r,n,t,o,a,u])}function CR(t,e){e===void 0&&(e={});let n=O.useContext(yR);n==null&&mt(!1);let{basename:i}=PR(cg.useViewTransitionState),r=Sf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ga(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Ga(n.nextLocation.pathname,i)||n.nextLocation.pathname;return lg(r.pathname,a)!=null||lg(r.pathname,o)!=null}const aP=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Cf=O.createContext({}),If=O.createContext(null),Af=typeof document<"u",Gy=Af?O.useLayoutEffect:O.useEffect,lP=O.createContext({strict:!1}),Zy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),IR="framerAppearId",uP="data-"+Zy(IR);function AR(t,e,n,i){const{visualElement:r}=O.useContext(Cf),o=O.useContext(lP),a=O.useContext(If),u=O.useContext(aP).reducedMotion,h=O.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;O.useInsertionEffect(()=>{f&&f.update(n,a)});const g=O.useRef(!!(n[uP]&&!window.HandoffComplete));return Gy(()=>{f&&(f.render(),g.current&&f.animationState&&f.animationState.animateChanges())}),O.useEffect(()=>{f&&(f.updateFeatures(),!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(g.current=!1,window.HandoffComplete=!0))}),f}function Ea(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function bR(t,e,n){return O.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Ea(n)&&(n.current=i))},[e])}function qu(t){return typeof t=="string"||Array.isArray(t)}function bf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ky=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Qy=["initial",...Ky];function kf(t){return bf(t.animate)||Qy.some(e=>qu(t[e]))}function cP(t){return!!(kf(t)||t.variants)}function kR(t,e){if(kf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||qu(n)?n:void 0,animate:qu(i)?i:void 0}}return t.inherit!==!1?e:{}}function RR(t){const{initial:e,animate:n}=kR(t,O.useContext(Cf));return O.useMemo(()=>({initial:e,animate:n}),[Q0(e),Q0(n)])}function Q0(t){return Array.isArray(t)?t.join(" "):t}const Y0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Gu={};for(const t in Y0)Gu[t]={isEnabled:e=>Y0[t].some(n=>!!e[n])};function NR(t){for(const e in t)Gu[e]={...Gu[e],...t[e]}}const Yy=O.createContext({}),hP=O.createContext({}),LR=Symbol.for("motionComponentSymbol");function MR({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&NR(t);function o(u,h){let f;const g={...O.useContext(aP),...u,layoutId:OR(u)},{isStatic:m}=g,_=RR(u),T=i(u,m);if(!m&&Af){_.visualElement=AR(r,T,g,e);const b=O.useContext(hP),R=O.useContext(lP).strict;_.visualElement&&(f=_.visualElement.loadFeatures(g,R,t,b))}return O.createElement(Cf.Provider,{value:_},f&&_.visualElement?O.createElement(f,{visualElement:_.visualElement,...g}):null,n(r,u,bR(T,_.visualElement,h),T,m,_.visualElement))}const a=O.forwardRef(o);return a[LR]=r,a}function OR({layoutId:t}){const e=O.useContext(Yy).id;return e&&t!==void 0?e+"-"+t:t}function DR(t){function e(i,r={}){return MR(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const VR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xy(t){return typeof t!="string"||t.includes("-")?!1:!!(VR.indexOf(t)>-1||/[A-Z]/.test(t))}const Ad={};function jR(t){Object.assign(Ad,t)}const lc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],So=new Set(lc);function dP(t,{layout:e,layoutId:n}){return So.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ad[t]||t==="opacity")}const Pn=t=>!!(t&&t.getVelocity),FR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zR=lc.length;function BR(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<zR;a++){const u=lc[a];if(t[u]!==void 0){const h=FR[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const fP=t=>e=>typeof e=="string"&&e.startsWith(t),pP=fP("--"),hg=fP("var(--"),UR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,HR=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ys=(t,e,n)=>Math.min(Math.max(n,t),e),Co={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gu={...Co,transform:t=>ys(0,1,t)},_h={...Co,default:1},yu=t=>Math.round(t*1e5)/1e5,Rf=/(-)?([\d]*\.?[\d])+/g,mP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,WR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function uc(t){return typeof t=="string"}const cc=t=>({test:e=>uc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Vr=cc("deg"),Ri=cc("%"),we=cc("px"),$R=cc("vh"),qR=cc("vw"),X0={...Ri,parse:t=>Ri.parse(t)/100,transform:t=>Ri.transform(t*100)},J0={...Co,transform:Math.round},gP={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,size:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,rotate:Vr,rotateX:Vr,rotateY:Vr,rotateZ:Vr,scale:_h,scaleX:_h,scaleY:_h,scaleZ:_h,skew:Vr,skewX:Vr,skewY:Vr,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:gu,originX:X0,originY:X0,originZ:we,zIndex:J0,fillOpacity:gu,strokeOpacity:gu,numOctaves:J0};function Jy(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,g=!0;for(const m in e){const _=e[m];if(pP(m)){o[m]=_;continue}const T=gP[m],b=HR(_,T);if(So.has(m)){if(h=!0,a[m]=b,!g)continue;_!==(T.default||0)&&(g=!1)}else m.startsWith("origin")?(f=!0,u[m]=b):r[m]=b}if(e.transform||(h||i?r.transform=BR(t.transform,n,g,i):r.transform&&(r.transform="none")),f){const{originX:m="50%",originY:_="50%",originZ:T=0}=u;r.transformOrigin=`${m} ${_} ${T}`}}const e_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yP(t,e,n){for(const i in e)!Pn(e[i])&&!dP(i,n)&&(t[i]=e[i])}function GR({transformTemplate:t},e,n){return O.useMemo(()=>{const i=e_();return Jy(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function ZR(t,e,n){const i=t.style||{},r={};return yP(r,i,t),Object.assign(r,GR(t,e,n)),t.transformValues?t.transformValues(r):r}function KR(t,e,n){const i={},r=ZR(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const QR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||QR.has(t)}let _P=t=>!bd(t);function YR(t){t&&(_P=e=>e.startsWith("on")?!bd(e):t(e))}try{YR(require("@emotion/is-prop-valid").default)}catch{}function XR(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(_P(r)||n===!0&&bd(r)||!e&&!bd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function ew(t,e,n){return typeof t=="string"?t:we.transform(e+n*t)}function JR(t,e,n){const i=ew(e,t.x,t.width),r=ew(n,t.y,t.height);return`${i} ${r}`}const eN={offset:"stroke-dashoffset",array:"stroke-dasharray"},tN={offset:"strokeDashoffset",array:"strokeDasharray"};function nN(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?eN:tN;t[o.offset]=we.transform(-i);const a=we.transform(e),u=we.transform(n);t[o.array]=`${a} ${u}`}function t_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},g,m,_){if(Jy(t,f,g,_),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:b,dimensions:R}=t;T.transform&&(R&&(b.transform=T.transform),delete T.transform),R&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=JR(R,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&nN(T,a,u,h,!1)}const vP=()=>({...e_(),attrs:{}}),n_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iN(t,e,n,i){const r=O.useMemo(()=>{const o=vP();return t_(o,e,{enableHardwareAcceleration:!1},n_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};yP(o,t.style,t),r.style={...o,...r.style}}return r}function rN(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Xy(n)?iN:KR)(i,o,a,n),g={...XR(i,typeof n=="string",t),...h,ref:r},{children:m}=i,_=O.useMemo(()=>Pn(m)?m.get():m,[m]);return O.createElement(n,{...g,children:_})}}function wP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const xP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TP(t,e,n,i){wP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(xP.has(r)?r:Zy(r),e.attrs[r])}function i_(t,e){const{style:n}=t,i={};for(const r in n)(Pn(n[r])||e.style&&Pn(e.style[r])||dP(r,t))&&(i[r]=n[r]);return i}function EP(t,e){const n=i_(t,e);for(const i in t)if(Pn(t[i])||Pn(e[i])){const r=lc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function r_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function PP(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const kd=t=>Array.isArray(t),sN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),oN=t=>kd(t)?t[t.length-1]||0:t;function Wh(t){const e=Pn(t)?t.get():t;return sN(e)?e.toValue():e}function aN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:lN(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const SP=t=>(e,n)=>{const i=O.useContext(Cf),r=O.useContext(If),o=()=>aN(t,e,i,r);return n?o():PP(o)};function lN(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Wh(o[_]);let{initial:a,animate:u}=t;const h=kf(t),f=cP(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||a===!1;const m=g?u:a;return m&&typeof m!="boolean"&&!bf(m)&&(Array.isArray(m)?m:[m]).forEach(T=>{const b=r_(t,T);if(!b)return;const{transitionEnd:R,transition:V,...k}=b;for(const P in k){let C=k[P];if(Array.isArray(C)){const z=g?C.length-1:0;C=C[z]}C!==null&&(r[P]=C)}for(const P in R)r[P]=R[P]}),r}const Pt=t=>t;class tw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function uN(t){let e=new tw,n=new tw,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,g=!1)=>{const m=g&&r,_=m?e:n;return f&&a.add(h),_.add(h)&&m&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const g=e.order[f];g(h),a.has(g)&&(u.schedule(g),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const vh=["prepare","read","update","preRender","render","postRender"],cN=40;function hN(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=vh.reduce((m,_)=>(m[_]=uN(()=>n=!0),m),{}),a=m=>o[m].process(r),u=()=>{const m=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(m-r.timestamp,cN),1),r.timestamp=m,r.isProcessing=!0,vh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:vh.reduce((m,_)=>{const T=o[_];return m[_]=(b,R=!1,V=!1)=>(n||h(),T.schedule(b,R,V)),m},{}),cancel:m=>vh.forEach(_=>o[_].cancel(m)),state:r,steps:o}}const{schedule:it,cancel:gr,state:Xt,steps:zp}=hN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pt,!0),dN={useVisualState:SP({scrapeMotionValuesFromProps:EP,createRenderState:vP,onMount:(t,e,{renderState:n,latestValues:i})=>{it.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),it.render(()=>{t_(n,i,{enableHardwareAcceleration:!1},n_(e.tagName),t.transformTemplate),TP(e,n)})}})},fN={useVisualState:SP({scrapeMotionValuesFromProps:i_,createRenderState:e_})};function pN(t,{forwardMotionProps:e=!1},n,i){return{...Xy(t)?dN:fN,preloadedFeatures:n,useRender:rN(e),createVisualElement:i,Component:t}}function sr(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const CP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Nf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const mN=t=>e=>CP(e)&&t(e,Nf(e));function ur(t,e,n,i){return sr(t,e,mN(n),i)}const gN=(t,e)=>n=>e(t(n)),os=(...t)=>t.reduce(gN);function IP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const nw=IP("dragHorizontal"),iw=IP("dragVertical");function AP(t){let e=!1;if(t==="y")e=iw();else if(t==="x")e=nw();else{const n=nw(),i=iw();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function bP(){const t=AP(!0);return t?(t(),!1):!0}class ks{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rw(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||bP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&it.update(()=>u[i](o,a))};return ur(t.current,n,r,{passive:!t.getProps()[i]})}class yN extends ks{mount(){this.unmount=os(rw(this.node,!0),rw(this.node,!1))}unmount(){}}class _N extends ks{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=os(sr(this.node.current,"focus",()=>this.onFocus()),sr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const kP=(t,e)=>e?t===e?!0:kP(t,e.parentElement):!1;function Bp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Nf(n))}class vN extends ks{constructor(){super(...arguments),this.removeStartListeners=Pt,this.removeEndListeners=Pt,this.removeAccessibleListeners=Pt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=ur(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:g,globalTapTarget:m}=this.node.getProps();it.update(()=>{!m&&!kP(this.node.current,u.target)?g&&g(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=ur(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=os(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Bp("up",(h,f)=>{const{onTap:g}=this.node.getProps();g&&it.update(()=>g(h,f))})};this.removeEndListeners(),this.removeEndListeners=sr(this.node.current,"keyup",a),Bp("down",(u,h)=>{this.startPress(u,h)})},n=sr(this.node.current,"keydown",e),i=()=>{this.isPressing&&Bp("cancel",(o,a)=>this.cancelPress(o,a))},r=sr(this.node.current,"blur",i);this.removeAccessibleListeners=os(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&it.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!bP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&it.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=ur(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=sr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=os(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const dg=new WeakMap,Up=new WeakMap,wN=t=>{const e=dg.get(t.target);e&&e(t)},xN=t=>{t.forEach(wN)};function TN({root:t,...e}){const n=t||document;Up.has(n)||Up.set(n,{});const i=Up.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(xN,{root:t,...e})),i[r]}function EN(t,e,n){const i=TN(e);return dg.set(t,n),i.observe(t),()=>{dg.delete(t),i.unobserve(t)}}const PN={some:0,all:1};class SN extends ks{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:PN[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:m}=this.node.getProps(),_=f?g:m;_&&_(h)};return EN(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(CN(e,n))&&this.startObserver()}unmount(){}}function CN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const IN={inView:{Feature:SN},tap:{Feature:vN},focus:{Feature:_N},hover:{Feature:yN}};function RP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function AN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function bN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Lf(t,e,n){const i=t.getProps();return r_(i,e,n!==void 0?n:i.custom,AN(t),bN(t))}let s_=Pt;const oo=t=>t*1e3,cr=t=>t/1e3,kN={current:!1},NP=t=>Array.isArray(t)&&typeof t[0]=="number";function LP(t){return!!(!t||typeof t=="string"&&MP[t]||NP(t)||Array.isArray(t)&&t.every(LP))}const nu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,MP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nu([0,.65,.55,1]),circOut:nu([.55,0,1,.45]),backIn:nu([.31,.01,.66,-.59]),backOut:nu([.33,1.53,.69,.99])};function OP(t){if(t)return NP(t)?nu(t):Array.isArray(t)?t.map(OP):MP[t]}function RN(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const g=OP(u);return Array.isArray(g)&&(f.easing=g),t.animate(f,{delay:i,duration:r,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function NN(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const DP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,LN=1e-7,MN=12;function ON(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=DP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>LN&&++u<MN);return a}function hc(t,e,n,i){if(t===e&&n===i)return Pt;const r=o=>ON(o,0,1,t,n);return o=>o===0||o===1?o:DP(r(o),e,i)}const DN=hc(.42,0,1,1),VN=hc(0,0,.58,1),VP=hc(.42,0,.58,1),jN=t=>Array.isArray(t)&&typeof t[0]!="number",jP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,FP=t=>e=>1-t(1-e),o_=t=>1-Math.sin(Math.acos(t)),zP=FP(o_),FN=jP(o_),BP=hc(.33,1.53,.69,.99),a_=FP(BP),zN=jP(a_),BN=t=>(t*=2)<1?.5*a_(t):.5*(2-Math.pow(2,-10*(t-1))),UN={linear:Pt,easeIn:DN,easeInOut:VP,easeOut:VN,circIn:o_,circInOut:FN,circOut:zP,backIn:a_,backInOut:zN,backOut:BP,anticipate:BN},sw=t=>{if(Array.isArray(t)){s_(t.length===4);const[e,n,i,r]=t;return hc(e,n,i,r)}else if(typeof t=="string")return UN[t];return t},l_=(t,e)=>n=>!!(uc(n)&&WR.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),UP=(t,e,n)=>i=>{if(!uc(i))return i;const[r,o,a,u]=i.match(Rf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},HN=t=>ys(0,255,t),Hp={...Co,transform:t=>Math.round(HN(t))},no={test:l_("rgb","red"),parse:UP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Hp.transform(t)+", "+Hp.transform(e)+", "+Hp.transform(n)+", "+yu(gu.transform(i))+")"};function WN(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const fg={test:l_("#"),parse:WN,transform:no.transform},Pa={test:l_("hsl","hue"),parse:UP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ri.transform(yu(e))+", "+Ri.transform(yu(n))+", "+yu(gu.transform(i))+")"},ln={test:t=>no.test(t)||fg.test(t)||Pa.test(t),parse:t=>no.test(t)?no.parse(t):Pa.test(t)?Pa.parse(t):fg.parse(t),transform:t=>uc(t)?t:t.hasOwnProperty("red")?no.transform(t):Pa.transform(t)},ft=(t,e,n)=>-n*t+n*e+t;function Wp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $N({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=Wp(h,u,t+1/3),o=Wp(h,u,t),a=Wp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const $p=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},qN=[fg,no,Pa],GN=t=>qN.find(e=>e.test(t));function ow(t){const e=GN(t);let n=e.parse(t);return e===Pa&&(n=$N(n)),n}const HP=(t,e)=>{const n=ow(t),i=ow(e),r={...n};return o=>(r.red=$p(n.red,i.red,o),r.green=$p(n.green,i.green,o),r.blue=$p(n.blue,i.blue,o),r.alpha=ft(n.alpha,i.alpha,o),no.transform(r))};function ZN(t){var e,n;return isNaN(t)&&uc(t)&&(((e=t.match(Rf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(mP))===null||n===void 0?void 0:n.length)||0)>0}const WP={regex:UR,countKey:"Vars",token:"${v}",parse:Pt},$P={regex:mP,countKey:"Colors",token:"${c}",parse:ln.parse},qP={regex:Rf,countKey:"Numbers",token:"${n}",parse:Co.parse};function qp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Rd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&qp(n,WP),qp(n,$P),qp(n,qP),n}function GP(t){return Rd(t).values}function ZP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Rd(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(WP.token,a[h]):h<i+n?u=u.replace($P.token,ln.transform(a[h])):u=u.replace(qP.token,yu(a[h]));return u}}const KN=t=>typeof t=="number"?0:t;function QN(t){const e=GP(t);return ZP(t)(e.map(KN))}const _s={test:ZN,parse:GP,createTransformer:ZP,getAnimatableNone:QN},KP=(t,e)=>n=>`${n>0?e:t}`;function QP(t,e){return typeof t=="number"?n=>ft(t,e,n):ln.test(t)?HP(t,e):t.startsWith("var(")?KP(t,e):XP(t,e)}const YP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>QP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},YN=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=QP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},XP=(t,e)=>{const n=_s.createTransformer(e),i=Rd(t),r=Rd(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?os(YP(i.values,r.values),n):KP(t,e)},Zu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},aw=(t,e)=>n=>ft(t,e,n);function XN(t){return typeof t=="number"?aw:typeof t=="string"?ln.test(t)?HP:XP:Array.isArray(t)?YP:typeof t=="object"?YN:aw}function JN(t,e,n){const i=[],r=n||XN(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||Pt:e;u=os(h,u)}i.push(u)}return i}function JP(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(s_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=JN(e,i,r),u=a.length,h=f=>{let g=0;if(u>1)for(;g<t.length-2&&!(f<t[g+1]);g++);const m=Zu(t[g],t[g+1],f);return a[g](m)};return n?f=>h(ys(t[0],t[o-1],f)):h}function eL(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Zu(0,e,i);t.push(ft(n,1,r))}}function tL(t){const e=[0];return eL(e,t.length-1),e}function nL(t,e){return t.map(n=>n*e)}function iL(t,e){return t.map(()=>e||VP).splice(0,t.length-1)}function Nd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=jN(i)?i.map(sw):sw(i),o={done:!1,value:e[0]},a=nL(n&&n.length===e.length?n:tL(e),t),u=JP(a,e,{ease:Array.isArray(r)?r:iL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function eS(t,e){return e?t*(1e3/e):0}const rL=5;function tS(t,e,n){const i=Math.max(e-rL,0);return eS(n-t(i),e-i)}const Gp=.001,sL=.01,oL=10,aL=.05,lL=1;function uL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=ys(aL,lL,a),t=ys(sL,oL,cr(t)),a<1?(r=f=>{const g=f*a,m=g*t,_=g-n,T=pg(f,a),b=Math.exp(-m);return Gp-_/T*b},o=f=>{const m=f*a*t,_=m*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,b=Math.exp(-m),R=pg(Math.pow(f,2),a);return(-r(f)+Gp>0?-1:1)*((_-T)*b)/R}):(r=f=>{const g=Math.exp(-f*t),m=(f-n)*t+1;return-Gp+g*m},o=f=>{const g=Math.exp(-f*t),m=(n-f)*(t*t);return g*m});const u=5/t,h=hL(r,o,u);if(t=oo(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const cL=12;function hL(t,e,n){let i=n;for(let r=1;r<cL;r++)i=i-t(i)/e(i);return i}function pg(t,e){return t*Math.sqrt(1-e*e)}const dL=["duration","bounce"],fL=["stiffness","damping","mass"];function lw(t,e){return e.some(n=>t[n]!==void 0)}function pL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!lw(t,fL)&&lw(t,dL)){const n=uL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function nS({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:g,velocity:m,isResolvedFromDuration:_}=pL({...i,velocity:-cr(i.velocity||0)}),T=m||0,b=h/(2*Math.sqrt(u*f)),R=o-r,V=cr(Math.sqrt(u/f)),k=Math.abs(R)<5;n||(n=k?.01:2),e||(e=k?.005:.5);let P;if(b<1){const C=pg(V,b);P=z=>{const G=Math.exp(-b*V*z);return o-G*((T+b*V*R)/C*Math.sin(C*z)+R*Math.cos(C*z))}}else if(b===1)P=C=>o-Math.exp(-V*C)*(R+(T+V*R)*C);else{const C=V*Math.sqrt(b*b-1);P=z=>{const G=Math.exp(-b*V*z),B=Math.min(C*z,300);return o-G*((T+b*V*R)*Math.sinh(B)+C*R*Math.cosh(B))/C}}return{calculatedDuration:_&&g||null,next:C=>{const z=P(C);if(_)a.done=C>=g;else{let G=T;C!==0&&(b<1?G=tS(P,C,z):G=0);const B=Math.abs(G)<=n,A=Math.abs(o-z)<=e;a.done=B&&A}return a.value=a.done?o:z,a}}}function uw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:g}){const m=t[0],_={done:!1,value:m},T=S=>u!==void 0&&S<u||h!==void 0&&S>h,b=S=>u===void 0?h:h===void 0||Math.abs(u-S)<Math.abs(h-S)?u:h;let R=n*e;const V=m+R,k=a===void 0?V:a(V);k!==V&&(R=k-m);const P=S=>-R*Math.exp(-S/i),C=S=>k+P(S),z=S=>{const N=P(S),D=C(S);_.done=Math.abs(N)<=f,_.value=_.done?k:D};let G,B;const A=S=>{T(_.value)&&(G=S,B=nS({keyframes:[_.value,b(_.value)],velocity:tS(C,S,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:g}))};return A(0),{calculatedDuration:null,next:S=>{let N=!1;return!B&&G===void 0&&(N=!0,z(S),A(S)),G!==void 0&&S>G?B.next(S-G):(!N&&z(S),_)}}}const mL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>it.update(e,!0),stop:()=>gr(e),now:()=>Xt.isProcessing?Xt.timestamp:performance.now()}},cw=2e4;function hw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<cw;)e+=n,i=t.next(e);return e>=cw?1/0:e}const gL={decay:uw,inertia:uw,tween:Nd,keyframes:Nd,spring:nS};function Ld({autoplay:t=!0,delay:e=0,driver:n=mL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:g,onUpdate:m,..._}){let T=1,b=!1,R,V;const k=()=>{V=new Promise(ne=>{R=ne})};k();let P;const C=gL[r]||Nd;let z;C!==Nd&&typeof i[0]!="number"&&(z=JP([0,100],i,{clamp:!1}),i=[0,100]);const G=C({..._,keyframes:i});let B;u==="mirror"&&(B=C({..._,keyframes:[...i].reverse(),velocity:-(_.velocity||0)}));let A="idle",S=null,N=null,D=null;G.calculatedDuration===null&&o&&(G.calculatedDuration=hw(G));const{calculatedDuration:j}=G;let U=1/0,M=1/0;j!==null&&(U=j+a,M=U*(o+1)-a);let X=0;const We=ne=>{if(N===null)return;T>0&&(N=Math.min(N,ne)),T<0&&(N=Math.min(ne-M/T,N)),S!==null?X=S:X=Math.round(ne-N)*T;const Ce=X-e*(T>=0?1:-1),et=T>=0?Ce<0:Ce>M;X=Math.max(Ce,0),A==="finished"&&S===null&&(X=M);let Me=X,Re=G;if(o){const he=Math.min(X,M)/U;let _e=Math.floor(he),Ie=he%1;!Ie&&he>=1&&(Ie=1),Ie===1&&_e--,_e=Math.min(_e,o+1),!!(_e%2)&&(u==="reverse"?(Ie=1-Ie,a&&(Ie-=a/U)):u==="mirror"&&(Re=B)),Me=ys(0,1,Ie)*U}const fe=et?{done:!1,value:i[0]}:Re.next(Me);z&&(fe.value=z(fe.value));let{done:ht}=fe;!et&&j!==null&&(ht=T>=0?X>=M:X<=0);const ie=S===null&&(A==="finished"||A==="running"&&ht);return m&&m(fe.value),ie&&Z(),fe},pe=()=>{P&&P.stop(),P=void 0},Ze=()=>{A="idle",pe(),R(),k(),N=D=null},Z=()=>{A="finished",g&&g(),pe(),R()},ce=()=>{if(b)return;P||(P=n(We));const ne=P.now();h&&h(),S!==null?N=ne-S:(!N||A==="finished")&&(N=ne),A==="finished"&&k(),D=N,S=null,A="running",P.start()};t&&ce();const ee={then(ne,Ce){return V.then(ne,Ce)},get time(){return cr(X)},set time(ne){ne=oo(ne),X=ne,S!==null||!P||T===0?S=ne:N=P.now()-ne/T},get duration(){const ne=G.calculatedDuration===null?hw(G):G.calculatedDuration;return cr(ne)},get speed(){return T},set speed(ne){ne===T||!P||(T=ne,ee.time=cr(X))},get state(){return A},play:ce,pause:()=>{A="paused",S=X},stop:()=>{b=!0,A!=="idle"&&(A="idle",f&&f(),Ze())},cancel:()=>{D!==null&&We(D),Ze()},complete:()=>{A="finished"},sample:ne=>(N=0,We(ne))};return ee}function yL(t){let e;return()=>(e===void 0&&(e=t()),e)}const _L=yL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),vL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),wh=10,wL=2e4,xL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!LP(e.ease);function TL(t,e,{onUpdate:n,onComplete:i,...r}){if(!(_L()&&vL.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const g=()=>{h=new Promise(C=>{u=C})};g();let{keyframes:m,duration:_=300,ease:T,times:b}=r;if(xL(e,r)){const C=Ld({...r,repeat:0,delay:0});let z={done:!1,value:m[0]};const G=[];let B=0;for(;!z.done&&B<wL;)z=C.sample(B),G.push(z.value),B+=wh;b=void 0,m=G,_=B-wh,T="linear"}const R=RN(t.owner.current,e,m,{...r,duration:_,ease:T,times:b}),V=()=>{f=!1,R.cancel()},k=()=>{f=!0,it.update(V),u(),g()};return R.onfinish=()=>{f||(t.set(NN(m,r)),i&&i(),k())},{then(C,z){return h.then(C,z)},attachTimeline(C){return R.timeline=C,R.onfinish=null,Pt},get time(){return cr(R.currentTime||0)},set time(C){R.currentTime=oo(C)},get speed(){return R.playbackRate},set speed(C){R.playbackRate=C},get duration(){return cr(_)},play:()=>{a||(R.play(),gr(V))},pause:()=>R.pause(),stop:()=>{if(a=!0,R.playState==="idle")return;const{currentTime:C}=R;if(C){const z=Ld({...r,autoplay:!1});t.setWithVelocity(z.sample(C-wh).value,z.sample(C).value,wh)}k()},complete:()=>{f||R.finish()},cancel:k}}function EL({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Pt,pause:Pt,stop:Pt,then:o=>(o(),Promise.resolve()),cancel:Pt,complete:Pt});return e?Ld({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const PL={type:"spring",stiffness:500,damping:25,restSpeed:10},SL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CL={type:"keyframes",duration:.8},IL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},AL=(t,{keyframes:e})=>e.length>2?CL:So.has(t)?t.startsWith("scale")?SL(e[1]):PL:IL,mg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_s.test(e)||e==="0")&&!e.startsWith("url(")),bL=new Set(["brightness","contrast","saturate","opacity"]);function kL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Rf)||[];if(!i)return t;const r=n.replace(i,"");let o=bL.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const RL=/([a-z-]*)\(.*?\)/g,gg={..._s,getAnimatableNone:t=>{const e=t.match(RL);return e?e.map(kL).join(" "):t}},NL={...gP,color:ln,backgroundColor:ln,outlineColor:ln,fill:ln,stroke:ln,borderColor:ln,borderTopColor:ln,borderRightColor:ln,borderBottomColor:ln,borderLeftColor:ln,filter:gg,WebkitFilter:gg},u_=t=>NL[t];function iS(t,e){let n=u_(t);return n!==gg&&(n=_s),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const rS=t=>/^0[^.\s]+$/.test(t);function LL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||rS(t)}function ML(t,e,n,i){const r=mg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),LL(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const g=h[f];o[g]=iS(e,u)}return o}function OL({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...g}){return!!Object.keys(g).length}function c_(t,e){return t[e]||t.default||t}const DL={skipAnimations:!1},h_=(t,e,n,i={})=>r=>{const o=c_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-oo(a);const h=ML(e,t,n,o),f=h[0],g=h[h.length-1],m=mg(t,f),_=mg(t,g);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:b=>{e.set(b),o.onUpdate&&o.onUpdate(b)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(OL(o)||(T={...T,...AL(t,T)}),T.duration&&(T.duration=oo(T.duration)),T.repeatDelay&&(T.repeatDelay=oo(T.repeatDelay)),!m||!_||kN.current||o.type===!1||DL.skipAnimations)return EL(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=TL(e,t,T);if(b)return b}return Ld(T)};function Md(t){return!!(Pn(t)&&t.add)}const sS=t=>/^\-?\d*\.?\d+$/.test(t);function d_(t,e){t.indexOf(e)===-1&&t.push(e)}function f_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class p_{constructor(){this.subscriptions=[]}add(e){return d_(this.subscriptions,e),()=>f_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const VL=t=>!isNaN(parseFloat(t));class jL{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Xt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,it.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>it.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=VL(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new p_);const i=this.events[e].add(n);return e==="change"?()=>{i(),it.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?eS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Za(t,e){return new jL(t,e)}const oS=t=>e=>e.test(t),FL={test:t=>t==="auto",parse:t=>t},aS=[Co,we,Ri,Vr,qR,$R,FL],Zl=t=>aS.find(oS(t)),zL=[...aS,ln,_s],BL=t=>zL.find(oS(t));function UL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Za(n))}function HL(t,e){const n=Lf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=oN(o[a]);UL(t,a,u)}}function WL(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let g=null;Array.isArray(f)&&(g=f[0]),g===null&&(g=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),g!=null&&(typeof g=="string"&&(sS(g)||rS(g))?g=parseFloat(g):!BL(g)&&_s.test(f)&&(g=iS(h,f)),t.addValue(h,Za(g,{owner:t})),n[h]===void 0&&(n[h]=g),g!==null&&t.setBaseTarget(h,g))}}function $L(t,e){return e?(e[t]||e.default||e).from:void 0}function qL(t,e,n){const i={};for(const r in t){const o=$L(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function GL({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function ZL(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function lS(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],g=r&&t.animationState&&t.animationState.getState()[r];for(const m in u){const _=t.getValue(m),T=u[m];if(!_||T===void 0||g&&GL(g,m))continue;const b={delay:n,elapsed:0,...c_(o||{},m)};if(window.HandoffAppearAnimations){const k=t.getProps()[uP];if(k){const P=window.HandoffAppearAnimations(k,m,_,it);P!==null&&(b.elapsed=P,b.isHandoff=!0)}}let R=!b.isHandoff&&!ZL(_,T);if(b.type==="spring"&&(_.getVelocity()||b.velocity)&&(R=!1),_.animation&&(R=!1),R)continue;_.start(h_(m,_,T,t.shouldReduceMotion&&So.has(m)?{type:!1}:b));const V=_.animation;Md(h)&&(h.add(m),V.then(()=>h.remove(m))),f.push(V)}return a&&Promise.all(f).then(()=>{a&&HL(t,a)}),f}function yg(t,e,n={}){const i=Lf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(lS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:m}=r;return KL(t,e,f+h,g,m,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function KL(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(QL).forEach((f,g)=>{f.notify("AnimationStart",e),a.push(yg(f,e,{...o,delay:n+h(g)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function QL(t,e){return t.sortNodePosition(e)}function YL(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>yg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=yg(t,e,n);else{const r=typeof e=="function"?Lf(t,e,n.custom):e;i=Promise.all(lS(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const XL=[...Ky].reverse(),JL=Ky.length;function eM(t){return e=>Promise.all(e.map(({animation:n,options:i})=>YL(t,n,i)))}function tM(t){let e=eM(t);const n=iM();let i=!0;const r=(h,f)=>{const g=Lf(t,f);if(g){const{transition:m,transitionEnd:_,...T}=g;h={...h,...T,..._}}return h};function o(h){e=h(t)}function a(h,f){const g=t.getProps(),m=t.getVariantContext(!0)||{},_=[],T=new Set;let b={},R=1/0;for(let k=0;k<JL;k++){const P=XL[k],C=n[P],z=g[P]!==void 0?g[P]:m[P],G=qu(z),B=P===f?C.isActive:null;B===!1&&(R=k);let A=z===m[P]&&z!==g[P]&&G;if(A&&i&&t.manuallyAnimateOnMount&&(A=!1),C.protectedKeys={...b},!C.isActive&&B===null||!z&&!C.prevProp||bf(z)||typeof z=="boolean")continue;let N=nM(C.prevProp,z)||P===f&&C.isActive&&!A&&G||k>R&&G,D=!1;const j=Array.isArray(z)?z:[z];let U=j.reduce(r,{});B===!1&&(U={});const{prevResolvedValues:M={}}=C,X={...M,...U},We=pe=>{N=!0,T.has(pe)&&(D=!0,T.delete(pe)),C.needsAnimating[pe]=!0};for(const pe in X){const Ze=U[pe],Z=M[pe];if(b.hasOwnProperty(pe))continue;let ce=!1;kd(Ze)&&kd(Z)?ce=!RP(Ze,Z):ce=Ze!==Z,ce?Ze!==void 0?We(pe):T.add(pe):Ze!==void 0&&T.has(pe)?We(pe):C.protectedKeys[pe]=!0}C.prevProp=z,C.prevResolvedValues=U,C.isActive&&(b={...b,...U}),i&&t.blockInitialAnimation&&(N=!1),N&&(!A||D)&&_.push(...j.map(pe=>({animation:pe,options:{type:P,...h}})))}if(T.size){const k={};T.forEach(P=>{const C=t.getBaseTarget(P);C!==void 0&&(k[P]=C)}),_.push({animation:k})}let V=!!_.length;return i&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(V=!1),i=!1,V?e(_):Promise.resolve()}function u(h,f,g){var m;if(n[h].isActive===f)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(T=>{var b;return(b=T.animationState)===null||b===void 0?void 0:b.setActive(h,f)}),n[h].isActive=f;const _=a(g,h);for(const T in n)n[T].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function nM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!RP(e,t):!1}function $s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iM(){return{animate:$s(!0),whileInView:$s(),whileHover:$s(),whileTap:$s(),whileDrag:$s(),whileFocus:$s(),exit:$s()}}class rM extends ks{constructor(e){super(e),e.animationState||(e.animationState=tM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),bf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let sM=0;class oM extends ks{constructor(){super(...arguments),this.id=sM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const aM={animation:{Feature:rM},exit:{Feature:oM}},dw=(t,e)=>Math.abs(t-e);function lM(t,e){const n=dw(t.x,e.x),i=dw(t.y,e.y);return Math.sqrt(n**2+i**2)}class uS{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Kp(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,T=lM(m.offset,{x:0,y:0})>=3;if(!_&&!T)return;const{point:b}=m,{timestamp:R}=Xt;this.history.push({...b,timestamp:R});const{onStart:V,onMove:k}=this.handlers;_||(V&&V(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,m)},this.handlePointerMove=(m,_)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Zp(_,this.transformPagePoint),it.update(this.updatePoint,!0)},this.handlePointerUp=(m,_)=>{this.end();const{onEnd:T,onSessionEnd:b,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=Kp(m.type==="pointercancel"?this.lastMoveEventInfo:Zp(_,this.transformPagePoint),this.history);this.startEvent&&T&&T(m,V),b&&b(m,V)},!CP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Nf(e),u=Zp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Xt;this.history=[{...h,timestamp:f}];const{onSessionStart:g}=n;g&&g(e,Kp(u,this.history)),this.removeListeners=os(ur(this.contextWindow,"pointermove",this.handlePointerMove),ur(this.contextWindow,"pointerup",this.handlePointerUp),ur(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gr(this.updatePoint)}}function Zp(t,e){return e?{point:e(t.point)}:t}function fw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Kp({point:t},e){return{point:t,delta:fw(t,cS(e)),offset:fw(t,uM(e)),velocity:cM(e,.1)}}function uM(t){return t[0]}function cS(t){return t[t.length-1]}function cM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=cS(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>oo(e)));)n--;if(!i)return{x:0,y:0};const o=cr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Nn(t){return t.max-t.min}function _g(t,e=0,n=.01){return Math.abs(t-e)<=n}function pw(t,e,n,i=.5){t.origin=i,t.originPoint=ft(e.min,e.max,t.origin),t.scale=Nn(n)/Nn(e),(_g(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ft(n.min,n.max,t.origin)-t.originPoint,(_g(t.translate)||isNaN(t.translate))&&(t.translate=0)}function _u(t,e,n,i){pw(t.x,e.x,n.x,i?i.originX:void 0),pw(t.y,e.y,n.y,i?i.originY:void 0)}function mw(t,e,n){t.min=n.min+e.min,t.max=t.min+Nn(e)}function hM(t,e,n){mw(t.x,e.x,n.x),mw(t.y,e.y,n.y)}function gw(t,e,n){t.min=e.min-n.min,t.max=t.min+Nn(e)}function vu(t,e,n){gw(t.x,e.x,n.x),gw(t.y,e.y,n.y)}function dM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?ft(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?ft(n,t,i.max):Math.min(t,n)),t}function yw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function fM(t,{top:e,left:n,bottom:i,right:r}){return{x:yw(t.x,n,r),y:yw(t.y,e,i)}}function _w(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function pM(t,e){return{x:_w(t.x,e.x),y:_w(t.y,e.y)}}function mM(t,e){let n=.5;const i=Nn(t),r=Nn(e);return r>i?n=Zu(e.min,e.max-i,t.min):i>r&&(n=Zu(t.min,t.max-r,e.min)),ys(0,1,n)}function gM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const vg=.35;function yM(t=vg){return t===!1?t=0:t===!0&&(t=vg),{x:vw(t,"left","right"),y:vw(t,"top","bottom")}}function vw(t,e,n){return{min:ww(t,e),max:ww(t,n)}}function ww(t,e){return typeof t=="number"?t:t[e]||0}const xw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sa=()=>({x:xw(),y:xw()}),Tw=()=>({min:0,max:0}),bt=()=>({x:Tw(),y:Tw()});function $n(t){return[t("x"),t("y")]}function hS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function _M({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function vM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Qp(t){return t===void 0||t===1}function wg({scale:t,scaleX:e,scaleY:n}){return!Qp(t)||!Qp(e)||!Qp(n)}function Zs(t){return wg(t)||dS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function dS(t){return Ew(t.x)||Ew(t.y)}function Ew(t){return t&&t!=="0%"}function Od(t,e,n){const i=t-n,r=e*i;return n+r}function Pw(t,e,n,i,r){return r!==void 0&&(t=Od(t,r,i)),Od(t,n,i)+e}function xg(t,e=0,n=1,i,r){t.min=Pw(t.min,e,n,i,r),t.max=Pw(t.max,e,n,i,r)}function fS(t,{x:e,y:n}){xg(t.x,e.translate,e.scale,e.originPoint),xg(t.y,n.translate,n.scale,n.originPoint)}function wM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ca(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,fS(t,a)),i&&Zs(o.latestValues)&&Ca(t,o.latestValues))}e.x=Sw(e.x),e.y=Sw(e.y)}function Sw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function zr(t,e){t.min=t.min+e,t.max=t.max+e}function Cw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=ft(t.min,t.max,o);xg(t,e[n],e[i],a,e.scale)}const xM=["x","scaleX","originX"],TM=["y","scaleY","originY"];function Ca(t,e){Cw(t.x,e,xM),Cw(t.y,e,TM)}function pS(t,e){return hS(vM(t.getBoundingClientRect(),e))}function EM(t,e,n){const i=pS(t,n),{scroll:r}=e;return r&&(zr(i.x,r.offset.x),zr(i.y,r.offset.y)),i}const mS=({current:t})=>t?t.ownerDocument.defaultView:null,PM=new WeakMap;class SM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Nf(g,"page").point)},o=(g,m)=>{const{drag:_,dragPropagation:T,onDragStart:b}=this.getProps();if(_&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=AP(_),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$n(V=>{let k=this.getAxisMotionValue(V).get()||0;if(Ri.test(k)){const{projection:P}=this.visualElement;if(P&&P.layout){const C=P.layout.layoutBox[V];C&&(k=Nn(C)*(parseFloat(k)/100))}}this.originPoint[V]=k}),b&&it.update(()=>b(g,m),!1,!0);const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},a=(g,m)=>{const{dragPropagation:_,dragDirectionLock:T,onDirectionLock:b,onDrag:R}=this.getProps();if(!_&&!this.openGlobalLock)return;const{offset:V}=m;if(T&&this.currentDirection===null){this.currentDirection=CM(V),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,V),this.updateAxis("y",m.point,V),this.visualElement.render(),R&&R(g,m)},u=(g,m)=>this.stop(g,m),h=()=>$n(g=>{var m;return this.getAnimationState(g)==="paused"&&((m=this.getAxisMotionValue(g).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new uS(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:mS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&it.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!xh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=dM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Ea(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=fM(r.layoutBox,n):this.constraints=!1,this.elastic=yM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$n(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=gM(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ea(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=EM(i,r.root,this.visualElement.getTransformPagePoint());let a=pM(r.layout.layoutBox,o);if(n){const u=n(_M(a));this.hasMutatedConstraints=!!u,u&&(a=hS(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=$n(g=>{if(!xh(g,n,this.currentDirection))return;let m=h&&h[g]||{};a&&(m={min:0,max:0});const _=r?200:1e6,T=r?40:1e7,b={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(g,b)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(h_(e,i,0,n))}stopAnimation(){$n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$n(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){$n(n=>{const{drag:i}=this.getProps();if(!xh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-ft(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ea(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};$n(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=mM({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),$n(a=>{if(!xh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(ft(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;PM.set(this.visualElement,this);const e=this.visualElement.current,n=ur(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Ea(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=sr(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&($n(g=>{const m=this.getAxisMotionValue(g);m&&(this.originPoint[g]+=h[g].translate,m.set(m.get()+h[g].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=vg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function xh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function CM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class IM extends ks{constructor(e){super(e),this.removeGroupControls=Pt,this.removeListeners=Pt,this.controls=new SM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Iw=t=>(e,n)=>{t&&it.update(()=>t(e,n))};class AM extends ks{constructor(){super(...arguments),this.removePointerDownListener=Pt}onPointerDown(e){this.session=new uS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Iw(e),onStart:Iw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&it.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=ur(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function bM(){const t=O.useContext(If);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=O.useId();return O.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const $h={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Aw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Kl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(we.test(t))t=parseFloat(t);else return t;const n=Aw(t,e.target.x),i=Aw(t,e.target.y);return`${n}% ${i}%`}},kM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=_s.parse(t);if(r.length>5)return i;const o=_s.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=ft(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class RM extends uo.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;jR(NM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),$h.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||it.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gS(t){const[e,n]=bM(),i=O.useContext(Yy);return uo.createElement(RM,{...t,layoutGroup:i,switchLayoutGroup:O.useContext(hP),isPresent:e,safeToRemove:n})}const NM={borderRadius:{...Kl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kl,borderTopRightRadius:Kl,borderBottomLeftRadius:Kl,borderBottomRightRadius:Kl,boxShadow:kM},yS=["TopLeft","TopRight","BottomLeft","BottomRight"],LM=yS.length,bw=t=>typeof t=="string"?parseFloat(t):t,kw=t=>typeof t=="number"||we.test(t);function MM(t,e,n,i,r,o){r?(t.opacity=ft(0,n.opacity!==void 0?n.opacity:1,OM(i)),t.opacityExit=ft(e.opacity!==void 0?e.opacity:1,0,DM(i))):o&&(t.opacity=ft(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<LM;a++){const u=`border${yS[a]}Radius`;let h=Rw(e,u),f=Rw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||kw(h)===kw(f)?(t[u]=Math.max(ft(bw(h),bw(f),i),0),(Ri.test(f)||Ri.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=ft(e.rotate||0,n.rotate||0,i))}function Rw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const OM=_S(0,.5,zP),DM=_S(.5,.95,Pt);function _S(t,e,n){return i=>i<t?0:i>e?1:n(Zu(t,e,i))}function Nw(t,e){t.min=e.min,t.max=e.max}function Hn(t,e){Nw(t.x,e.x),Nw(t.y,e.y)}function Lw(t,e,n,i,r){return t-=e,t=Od(t,1/n,i),r!==void 0&&(t=Od(t,1/r,i)),t}function VM(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ri.test(e)&&(e=parseFloat(e),e=ft(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=ft(o.min,o.max,i);t===o&&(u-=e),t.min=Lw(t.min,e,n,u,r),t.max=Lw(t.max,e,n,u,r)}function Mw(t,e,[n,i,r],o,a){VM(t,e[n],e[i],e[r],e.scale,o,a)}const jM=["x","scaleX","originX"],FM=["y","scaleY","originY"];function Ow(t,e,n,i){Mw(t.x,e,jM,n?n.x:void 0,i?i.x:void 0),Mw(t.y,e,FM,n?n.y:void 0,i?i.y:void 0)}function Dw(t){return t.translate===0&&t.scale===1}function vS(t){return Dw(t.x)&&Dw(t.y)}function zM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function wS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Vw(t){return Nn(t.x)/Nn(t.y)}class BM{constructor(){this.members=[]}add(e){d_(this.members,e),e.scheduleRender()}remove(e){if(f_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:g}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),g&&(i+=`rotateY(${g}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const UM=(t,e)=>t.depth-e.depth;class HM{constructor(){this.children=[],this.isDirty=!1}add(e){d_(this.children,e),this.isDirty=!0}remove(e){f_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(UM),this.isDirty=!1,this.children.forEach(e)}}function WM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(gr(i),t(o-e))};return it.read(i,!0),()=>gr(i)}function $M(t){window.MotionDebug&&window.MotionDebug.record(t)}function qM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function GM(t,e,n){const i=Pn(t)?t:Za(t);return i.start(h_("",i,e,n)),i.animation}const Fw=["","X","Y","Z"],ZM={visibility:"hidden"},zw=1e3;let KM=0;const Ks={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function xS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=KM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ks.totalNodes=Ks.resolvedTargetDeltas=Ks.recalculatedProjection=0,this.nodes.forEach(XM),this.nodes.forEach(iO),this.nodes.forEach(rO),this.nodes.forEach(JM),$M(Ks)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new HM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new p_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=qM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let m;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=WM(_,250),$h.hasAnimatedSinceResize&&($h.hasAnimatedSinceResize=!1,this.nodes.forEach(Uw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:_,hasRelativeTargetChanged:T,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||g.getDefaultTransition()||uO,{onLayoutAnimationStart:V,onLayoutAnimationComplete:k}=g.getProps(),P=!this.targetLayout||!wS(this.targetLayout,b)||T,C=!_&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||_&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,C);const z={...c_(R,"layout"),onPlay:V,onComplete:k};(g.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else _||Uw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const m=this.path[g];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Bw);return}this.isUpdating||this.nodes.forEach(tO),this.isUpdating=!1,this.nodes.forEach(nO),this.nodes.forEach(QM),this.nodes.forEach(YM),this.clearAllSnapshots();const u=performance.now();Xt.delta=ys(0,1e3/60,u-Xt.timestamp),Xt.timestamp=u,Xt.isProcessing=!0,zp.update.process(Xt),zp.preRender.process(Xt),zp.render.process(Xt),Xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(eO),this.sharedNodes.forEach(oO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,it.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){it.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!vS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;a&&(u||Zs(this.latestValues)||g)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),cO(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return bt();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(zr(u.x,h.offset.x),zr(u.y,h.offset.y)),u}removeElementScroll(a){const u=bt();Hn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:g,options:m}=f;if(f!==this.root&&g&&m.layoutScroll){if(g.isRoot){Hn(u,a);const{scroll:_}=this.root;_&&(zr(u.x,-_.offset.x),zr(u.y,-_.offset.y))}zr(u.x,g.offset.x),zr(u.y,g.offset.y)}}return u}applyTransform(a,u=!1){const h=bt();Hn(h,a);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ca(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Zs(g.latestValues)&&Ca(h,g.latestValues)}return Zs(this.latestValues)&&Ca(h,this.latestValues),h}removeTransform(a){const u=bt();Hn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Zs(f.latestValues))continue;wg(f.latestValues)&&f.updateSnapshot();const g=bt(),m=f.measurePageBox();Hn(g,m),Ow(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Zs(this.latestValues)&&Ow(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:_}=this.options;if(!(!this.layout||!(m||_))){if(this.resolvedRelativeTargetAt=Xt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bt(),this.relativeTargetOrigin=bt(),vu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=bt(),this.targetWithTransforms=bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hn(this.target,this.layout.layoutBox),fS(this.target,this.targetDelta)):Hn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bt(),this.relativeTargetOrigin=bt(),vu(this.relativeTargetOrigin,this.target,T.target),Hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ks.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||wg(this.parent.latestValues)||dS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Xt.timestamp&&(f=!1),f)return;const{layout:g,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||m))return;Hn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,T=this.treeScale.y;wM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:b}=u;if(!b){this.projectionTransform&&(this.projectionDelta=Sa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Sa(),this.projectionDeltaWithTransform=Sa());const R=this.projectionTransform;_u(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=jw(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==_||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Ks.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},m=Sa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=bt(),T=h?h.source:void 0,b=this.layout?this.layout.source:void 0,R=T!==b,V=this.getStack(),k=!V||V.members.length<=1,P=!!(R&&!k&&this.options.crossfade===!0&&!this.path.some(lO));this.animationProgress=0;let C;this.mixTargetDelta=z=>{const G=z/1e3;Hw(m.x,a.x,G),Hw(m.y,a.y,G),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aO(this.relativeTarget,this.relativeTargetOrigin,_,G),C&&zM(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=bt()),Hn(C,this.relativeTarget)),R&&(this.animationValues=g,MM(g,f,this.latestValues,G,P,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=it.update(()=>{$h.hasAnimatedSinceResize=!0,this.currentAnimation=GM(0,zw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:g}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&TS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||bt();const m=Nn(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+m;const _=Nn(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+_}Hn(u,h),Ca(u,g),_u(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new BM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let g=0;g<Fw.length;g++){const m="rotate"+Fw[g];h[m]&&(f[m]=h[m],a.setStaticValue(m,0))}a.render();for(const g in f)a.setStaticValue(g,f[g]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZM;const f={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Wh(a==null?void 0:a.pointerEvents)||"",f.transform=g?g(this.latestValues,""):"none",f;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=Wh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Zs(this.latestValues)&&(R.transform=g?g({},""):"none",this.hasProjected=!1),R}const _=m.animationValues||m.latestValues;this.applyTransformsToTarget(),f.transform=jw(this.projectionDeltaWithTransform,this.treeScale,_),g&&(f.transform=g(_,f.transform));const{x:T,y:b}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${b.origin*100}% 0`,m.animationValues?f.opacity=m===this?(h=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=m===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const R in Ad){if(_[R]===void 0)continue;const{correct:V,applyTo:k}=Ad[R],P=f.transform==="none"?_[R]:V(_[R],m);if(k){const C=k.length;for(let z=0;z<C;z++)f[k[z]]=P}else f[R]=P}return this.options.layoutId&&(f.pointerEvents=m===this?Wh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Bw),this.root.sharedNodes.clear()}}}function QM(t){t.updateLayout()}function YM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?$n(m=>{const _=a?n.measuredBox[m]:n.layoutBox[m],T=Nn(_);_.min=i[m].min,_.max=_.min+T}):TS(o,n.layoutBox,i)&&$n(m=>{const _=a?n.measuredBox[m]:n.layoutBox[m],T=Nn(i[m]);_.max=_.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+T)});const u=Sa();_u(u,i,n.layoutBox);const h=Sa();a?_u(h,t.applyTransform(r,!0),n.measuredBox):_u(h,i,n.layoutBox);const f=!vS(u);let g=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:_,layout:T}=m;if(_&&T){const b=bt();vu(b,n.layoutBox,_.layoutBox);const R=bt();vu(R,i,T.layoutBox),wS(b,R)||(g=!0),m.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=b,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:g})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function XM(t){Ks.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function JM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function eO(t){t.clearSnapshot()}function Bw(t){t.clearMeasurements()}function tO(t){t.isLayoutDirty=!1}function nO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Uw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iO(t){t.resolveTargetDelta()}function rO(t){t.calcProjection()}function sO(t){t.resetRotation()}function oO(t){t.removeLeadSnapshot()}function Hw(t,e,n){t.translate=ft(e.translate,0,n),t.scale=ft(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ww(t,e,n,i){t.min=ft(e.min,n.min,i),t.max=ft(e.max,n.max,i)}function aO(t,e,n,i){Ww(t.x,e.x,n.x,i),Ww(t.y,e.y,n.y,i)}function lO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uO={duration:.45,ease:[.4,0,.1,1]},$w=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),qw=$w("applewebkit/")&&!$w("chrome/")?Math.round:Pt;function Gw(t){t.min=qw(t.min),t.max=qw(t.max)}function cO(t){Gw(t.x),Gw(t.y)}function TS(t,e,n){return t==="position"||t==="preserve-aspect"&&!_g(Vw(e),Vw(n),.2)}const hO=xS({attachResizeListener:(t,e)=>sr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yp={current:void 0},ES=xS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yp.current){const t=new hO({});t.mount(window),t.setOptions({layoutScroll:!0}),Yp.current=t}return Yp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),dO={pan:{Feature:AM},drag:{Feature:IM,ProjectionNode:ES,MeasureLayout:gS}},fO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function pO(t){const e=fO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Tg(t,e,n=1){const[i,r]=pO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return sS(a)?parseFloat(a):a}else return hg(r)?Tg(r,e,n+1):r}function mO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!hg(o))return;const a=Tg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!hg(o))continue;const a=Tg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const gO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),PS=t=>gO.has(t),yO=t=>Object.keys(t).some(PS),Zw=t=>t===Co||t===we,Kw=(t,e)=>parseFloat(t.split(", ")[e]),Qw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Kw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Kw(o[1],t):0}},_O=new Set(["x","y","z"]),vO=lc.filter(t=>!_O.has(t));function wO(t){const e=[];return vO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ka={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Qw(4,13),y:Qw(5,14)};Ka.translateX=Ka.x;Ka.translateY=Ka.y;const xO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Ka[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const g=e.getValue(f);g&&g.jump(u[f]),t[f]=Ka[f](h,o)}),t},TO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(PS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let g=n[h],m=Zl(g);const _=e[h];let T;if(kd(_)){const b=_.length,R=_[0]===null?1:0;g=_[R],m=Zl(g);for(let V=R;V<b&&_[V]!==null;V++)T?s_(Zl(_[V])===T):T=Zl(_[V])}else T=Zl(_);if(m!==T)if(Zw(m)&&Zw(T)){const b=f.get();typeof b=="string"&&f.set(parseFloat(b)),typeof _=="string"?e[h]=parseFloat(_):Array.isArray(_)&&T===we&&(e[h]=_.map(parseFloat))}else m!=null&&m.transform&&(T!=null&&T.transform)&&(g===0||_===0)?g===0?f.set(T.transform(g)):e[h]=m.transform(_):(a||(o=wO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(_))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=xO(e,t,u);return o.length&&o.forEach(([g,m])=>{t.getValue(g).set(m)}),t.render(),Af&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function EO(t,e,n,i){return yO(e)?TO(t,e,n,i):{target:e,transitionEnd:i}}const PO=(t,e,n,i)=>{const r=mO(t,e,i);return e=r.target,i=r.transitionEnd,EO(t,e,n,i)},Eg={current:null},SS={current:!1};function SO(){if(SS.current=!0,!!Af)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Eg.current=t.matches;t.addListener(e),e()}else Eg.current=!1}function CO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(Pn(o))t.addValue(r,o),Md(i)&&i.add(r);else if(Pn(a))t.addValue(r,Za(o,{owner:t})),Md(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Za(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Yw=new WeakMap,CS=Object.keys(Gu),IO=CS.length,Xw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],AO=Qy.length;class bO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>it.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=kf(n),this.isVariantNode=cP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...g}=this.scrapeMotionValuesFromProps(n,{});for(const m in g){const _=g[m];u[m]!==void 0&&Pn(_)&&(_.set(u[m],!1),Md(f)&&f.add(m))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Yw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),SS.current||SO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Eg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Yw.delete(this.current),this.projection&&this.projection.unmount(),gr(this.notifyUpdate),gr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=So.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&it.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<IO;h++){const f=CS[h],{isEnabled:g,Feature:m,ProjectionNode:_,MeasureLayout:T}=Gu[f];_&&(a=_),g(n)&&(!this.features[f]&&m&&(this.features[f]=new m(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:g,dragConstraints:m,layoutScroll:_,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!g||m&&Ea(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:_,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Xw.length;i++){const r=Xw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=CO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<AO;i++){const r=Qy[i],o=this.props[r];(qu(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Za(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=r_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Pn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new p_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class IS extends bO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=qL(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){WL(this,i,a);const u=PO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function kO(t){return window.getComputedStyle(t)}class RO extends IS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(So.has(n)){const i=u_(n);return i&&i.default||0}else{const i=kO(e),r=(pP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pS(e,n)}build(e,n,i,r){Jy(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return i_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){wP(e,n,i,r)}}class NO extends IS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(So.has(n)){const i=u_(n);return i&&i.default||0}return n=xP.has(n)?n:Zy(n),e.getAttribute(n)}measureInstanceViewportBox(){return bt()}scrapeMotionValuesFromProps(e,n){return EP(e,n)}build(e,n,i,r){t_(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){TP(e,n,i,r)}mount(e){this.isSVGTag=n_(e.tagName),super.mount(e)}}const LO=(t,e)=>Xy(t)?new NO(e,{enableHardwareAcceleration:!1}):new RO(e,{enableHardwareAcceleration:!0}),MO={layout:{ProjectionNode:ES,MeasureLayout:gS}},OO={...aM,...IN,...dO,...MO},re=DR((t,e)=>pN(t,e,OO,LO));function AS(){const t=O.useRef(!1);return Gy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function DO(){const t=AS(),[e,n]=O.useState(0),i=O.useCallback(()=>{t.current&&n(e+1)},[e]);return[O.useCallback(()=>it.postRender(i),[i]),e]}class VO extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function jO({children:t,isPresent:e}){const n=O.useId(),i=O.useRef(null),r=O.useRef({width:0,height:0,top:0,left:0});return O.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),O.createElement(VO,{isPresent:e,childRef:i,sizeRef:r},O.cloneElement(t,{ref:i}))}const Xp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=PP(FO),h=O.useId(),f=O.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:g=>{u.set(g,!0);for(const m of u.values())if(!m)return;i&&i()},register:g=>(u.set(g,!1),()=>u.delete(g))}),o?void 0:[n]);return O.useMemo(()=>{u.forEach((g,m)=>u.set(m,!1))},[n]),O.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=O.createElement(jO,{isPresent:n},t)),O.createElement(If.Provider,{value:f},t)};function FO(){return new Map}function zO(t){return O.useEffect(()=>()=>t(),[])}const Qs=t=>t.key||"";function BO(t,e){t.forEach(n=>{const i=Qs(n);e.set(i,n)})}function UO(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const Ma=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=O.useContext(Yy).forceRender||DO()[0],h=AS(),f=UO(t);let g=f;const m=O.useRef(new Map).current,_=O.useRef(g),T=O.useRef(new Map).current,b=O.useRef(!0);if(Gy(()=>{b.current=!1,BO(f,T),_.current=g}),zO(()=>{b.current=!0,T.clear(),m.clear()}),b.current)return O.createElement(O.Fragment,null,g.map(P=>O.createElement(Xp,{key:Qs(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},P)));g=[...g];const R=_.current.map(Qs),V=f.map(Qs),k=R.length;for(let P=0;P<k;P++){const C=R[P];V.indexOf(C)===-1&&!m.has(C)&&m.set(C,void 0)}return a==="wait"&&m.size&&(g=[]),m.forEach((P,C)=>{if(V.indexOf(C)!==-1)return;const z=T.get(C);if(!z)return;const G=R.indexOf(C);let B=P;if(!B){const A=()=>{m.delete(C);const S=Array.from(T.keys()).filter(N=>!V.includes(N));if(S.forEach(N=>T.delete(N)),_.current=f.filter(N=>{const D=Qs(N);return D===C||S.includes(D)}),!m.size){if(h.current===!1)return;u(),i&&i()}};B=O.createElement(Xp,{key:Qs(z),isPresent:!1,onExitComplete:A,custom:e,presenceAffectsLayout:o,mode:a},z),m.set(C,B)}g.splice(G,0,B)}),g=g.map(P=>{const C=P.key;return m.has(C)?P:O.createElement(Xp,{key:Qs(P),isPresent:!0,presenceAffectsLayout:o,mode:a},P)}),O.createElement(O.Fragment,null,m.size?g:g.map(P=>O.cloneElement(P)))},HO=()=>{};var Jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},WO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,g=o>>2,m=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(_=64)),i.push(n[g],n[m],n[_],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||m==null)throw new $O;const _=o<<2|u>>4;if(i.push(_),f!==64){const T=u<<4&240|f>>2;if(i.push(T),m!==64){const b=f<<6&192|m;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $O extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qO=function(t){const e=bS(t);return kS.encodeByteArray(e,!0)},Dd=function(t){return qO(t).replace(/\./g,"")},RS=function(t){try{return kS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=()=>GO().__FIREBASE_DEFAULTS__,KO=()=>{if(typeof process>"u"||typeof Jw>"u")return;const t=Jw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RS(t[1]);return e&&JSON.parse(e)},Mf=()=>{try{return HO()||ZO()||KO()||QO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NS=t=>{var e,n;return(n=(e=Mf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},YO=t=>{const e=NS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},LS=()=>{var t;return(t=Mf())==null?void 0:t.config},MS=t=>{var e;return(e=Mf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function OS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Dd(JSON.stringify(n)),Dd(JSON.stringify(a)),""].join(".")}const wu={};function eD(){const t={prod:[],emulator:[]};for(const e of Object.keys(wu))wu[e]?t.emulator.push(e):t.prod.push(e);return t}function tD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ex=!1;function DS(t,e){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||wu[t]===e||wu[t]||ex)return;wu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=eD().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{ex=!0,a()},_}function g(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function m(){const _=tD(i),T=n("text"),b=document.getElementById(T)||document.createElement("span"),R=n("learnmore"),V=document.getElementById(R)||document.createElement("a"),k=n("preprendIcon"),P=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const C=_.element;u(C),g(V,R);const z=f();h(P,k),C.append(P,b,V,z),document.body.appendChild(C)}o?(b.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function iD(){var e;const t=(e=Mf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aD(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lD(){return!iD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uD(){try{return typeof indexedDB=="object"}catch{return!1}}function cD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="FirebaseError";class Pr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=hD,Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dc.prototype.create)}}class dc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?dD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Pr(r,u,i)}}function dD(t,e){return t.replace(fD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const fD=/\{\$([^}]+)}/g;function pD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function go(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(tx(o)&&tx(a)){if(!go(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function tx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function mD(t,e){const n=new gD(t,e);return n.subscribe.bind(n)}class gD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");yD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Jp),r.error===void 0&&(r.error=Jp),r.complete===void 0&&(r.complete=Jp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t){return t&&t._delegate?t._delegate:t}class yo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new XO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wD(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:vD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vD(t){return t===Ys?void 0:t}function wD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _D(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const TD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},ED=je.INFO,PD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},SD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=PD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m_{constructor(e){this.name=e,this._logLevel=ED,this._logHandler=SD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const CD=(t,e)=>e.some(n=>t instanceof n);let nx,ix;function ID(){return nx||(nx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AD(){return ix||(ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VS=new WeakMap,Pg=new WeakMap,jS=new WeakMap,em=new WeakMap,g_=new WeakMap;function bD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(as(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&VS.set(n,t)}).catch(()=>{}),g_.set(e,t),e}function kD(t){if(Pg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Pg.set(t,e)}let Sg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return as(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RD(t){Sg=t(Sg)}function ND(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(tm(this),e,...n);return jS.set(i,e.sort?e.sort():[e]),as(i)}:AD().includes(t)?function(...e){return t.apply(tm(this),e),as(VS.get(this))}:function(...e){return as(t.apply(tm(this),e))}}function LD(t){return typeof t=="function"?ND(t):(t instanceof IDBTransaction&&kD(t),CD(t,ID())?new Proxy(t,Sg):t)}function as(t){if(t instanceof IDBRequest)return bD(t);if(em.has(t))return em.get(t);const e=LD(t);return e!==t&&(em.set(t,e),g_.set(e,t)),e}const tm=t=>g_.get(t);function MD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=as(a);return i&&a.addEventListener("upgradeneeded",h=>{i(as(a.result),h.oldVersion,h.newVersion,as(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const OD=["get","getKey","getAll","getAllKeys","count"],DD=["put","add","delete","clear"],nm=new Map;function rx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nm.get(e))return nm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=DD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||OD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return nm.set(e,o),o}RD(t=>({...t,get:(e,n,i)=>rx(e,n)||t.get(e,n,i),has:(e,n)=>!!rx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function jD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cg="@firebase/app",sx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new m_("@firebase/app"),FD="@firebase/app-compat",zD="@firebase/analytics-compat",BD="@firebase/analytics",UD="@firebase/app-check-compat",HD="@firebase/app-check",WD="@firebase/auth",$D="@firebase/auth-compat",qD="@firebase/database",GD="@firebase/data-connect",ZD="@firebase/database-compat",KD="@firebase/functions",QD="@firebase/functions-compat",YD="@firebase/installations",XD="@firebase/installations-compat",JD="@firebase/messaging",eV="@firebase/messaging-compat",tV="@firebase/performance",nV="@firebase/performance-compat",iV="@firebase/remote-config",rV="@firebase/remote-config-compat",sV="@firebase/storage",oV="@firebase/storage-compat",aV="@firebase/firestore",lV="@firebase/ai",uV="@firebase/firestore-compat",cV="firebase",hV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="[DEFAULT]",dV={[Cg]:"fire-core",[FD]:"fire-core-compat",[BD]:"fire-analytics",[zD]:"fire-analytics-compat",[HD]:"fire-app-check",[UD]:"fire-app-check-compat",[WD]:"fire-auth",[$D]:"fire-auth-compat",[qD]:"fire-rtdb",[GD]:"fire-data-connect",[ZD]:"fire-rtdb-compat",[KD]:"fire-fn",[QD]:"fire-fn-compat",[YD]:"fire-iid",[XD]:"fire-iid-compat",[JD]:"fire-fcm",[eV]:"fire-fcm-compat",[tV]:"fire-perf",[nV]:"fire-perf-compat",[iV]:"fire-rc",[rV]:"fire-rc-compat",[sV]:"fire-gcs",[oV]:"fire-gcs-compat",[aV]:"fire-fst",[uV]:"fire-fst-compat",[lV]:"fire-vertex","fire-js":"fire-js",[cV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new Map,fV=new Map,Ag=new Map;function ox(t,e){try{t.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qa(t){const e=t.name;if(Ag.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;Ag.set(e,t);for(const n of Vd.values())ox(n,t);for(const n of fV.values())ox(n,t);return!0}function y_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ci(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new dc("app","Firebase",pV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=hV;function FS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Ig,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw ls.create("bad-app-name",{appName:String(r)});if(n||(n=LS()),!n)throw ls.create("no-options");const o=Vd.get(r);if(o){if(go(n,o.options)&&go(i,o.config))return o;throw ls.create("duplicate-app",{appName:r})}const a=new xD(r);for(const h of Ag.values())a.addComponent(h);const u=new mV(n,i,a);return Vd.set(r,u),u}function zS(t=Ig){const e=Vd.get(t);if(!e&&t===Ig&&LS())return FS();if(!e)throw ls.create("no-app",{appName:t});return e}function us(t,e,n){let i=dV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(a.join(" "));return}Qa(new yo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="firebase-heartbeat-database",yV=1,Ku="firebase-heartbeat-store";let im=null;function BS(){return im||(im=MD(gV,yV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ku)}catch(n){console.warn(n)}}}}).catch(t=>{throw ls.create("idb-open",{originalErrorMessage:t.message})})),im}async function _V(t){try{const n=(await BS()).transaction(Ku),i=await n.objectStore(Ku).get(US(t));return await n.done,i}catch(e){if(e instanceof Pr)yr.warn(e.message);else{const n=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yr.warn(n.message)}}}async function ax(t,e){try{const i=(await BS()).transaction(Ku,"readwrite");await i.objectStore(Ku).put(e,US(t)),await i.done}catch(n){if(n instanceof Pr)yr.warn(n.message);else{const i=ls.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yr.warn(i.message)}}}function US(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=1024,wV=30;class xV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>wV){const a=PV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){yr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lx(),{heartbeatsToSend:i,unsentEntries:r}=TV(this._heartbeatsCache.heartbeats),o=Dd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return yr.warn(n),""}}}function lx(){return new Date().toISOString().substring(0,10)}function TV(t,e=vV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),ux(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ux(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class EV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uD()?cD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _V(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ax(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ax(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ux(t){return Dd(JSON.stringify({version:2,heartbeats:t})).length}function PV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){Qa(new yo("platform-logger",e=>new VD(e),"PRIVATE")),Qa(new yo("heartbeat",e=>new xV(e),"PRIVATE")),us(Cg,sx,t),us(Cg,sx,"esm2020"),us("fire-js","")}SV("");var cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,HS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function N(){}N.prototype=S.prototype,A.F=S.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(D,j,U){for(var M=Array(arguments.length-2),X=2;X<arguments.length;X++)M[X-2]=arguments[X];return S.prototype[j].apply(D,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,S,N){N||(N=0);const D=Array(16);if(typeof S=="string")for(var j=0;j<16;++j)D[j]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(j=0;j<16;++j)D[j]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=A.g[0],N=A.g[1],j=A.g[2];let U=A.g[3],M;M=S+(U^N&(j^U))+D[0]+3614090360&4294967295,S=N+(M<<7&4294967295|M>>>25),M=U+(j^S&(N^j))+D[1]+3905402710&4294967295,U=S+(M<<12&4294967295|M>>>20),M=j+(N^U&(S^N))+D[2]+606105819&4294967295,j=U+(M<<17&4294967295|M>>>15),M=N+(S^j&(U^S))+D[3]+3250441966&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(U^N&(j^U))+D[4]+4118548399&4294967295,S=N+(M<<7&4294967295|M>>>25),M=U+(j^S&(N^j))+D[5]+1200080426&4294967295,U=S+(M<<12&4294967295|M>>>20),M=j+(N^U&(S^N))+D[6]+2821735955&4294967295,j=U+(M<<17&4294967295|M>>>15),M=N+(S^j&(U^S))+D[7]+4249261313&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(U^N&(j^U))+D[8]+1770035416&4294967295,S=N+(M<<7&4294967295|M>>>25),M=U+(j^S&(N^j))+D[9]+2336552879&4294967295,U=S+(M<<12&4294967295|M>>>20),M=j+(N^U&(S^N))+D[10]+4294925233&4294967295,j=U+(M<<17&4294967295|M>>>15),M=N+(S^j&(U^S))+D[11]+2304563134&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(U^N&(j^U))+D[12]+1804603682&4294967295,S=N+(M<<7&4294967295|M>>>25),M=U+(j^S&(N^j))+D[13]+4254626195&4294967295,U=S+(M<<12&4294967295|M>>>20),M=j+(N^U&(S^N))+D[14]+2792965006&4294967295,j=U+(M<<17&4294967295|M>>>15),M=N+(S^j&(U^S))+D[15]+1236535329&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(j^U&(N^j))+D[1]+4129170786&4294967295,S=N+(M<<5&4294967295|M>>>27),M=U+(N^j&(S^N))+D[6]+3225465664&4294967295,U=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(U^S))+D[11]+643717713&4294967295,j=U+(M<<14&4294967295|M>>>18),M=N+(U^S&(j^U))+D[0]+3921069994&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(j^U&(N^j))+D[5]+3593408605&4294967295,S=N+(M<<5&4294967295|M>>>27),M=U+(N^j&(S^N))+D[10]+38016083&4294967295,U=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(U^S))+D[15]+3634488961&4294967295,j=U+(M<<14&4294967295|M>>>18),M=N+(U^S&(j^U))+D[4]+3889429448&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(j^U&(N^j))+D[9]+568446438&4294967295,S=N+(M<<5&4294967295|M>>>27),M=U+(N^j&(S^N))+D[14]+3275163606&4294967295,U=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(U^S))+D[3]+4107603335&4294967295,j=U+(M<<14&4294967295|M>>>18),M=N+(U^S&(j^U))+D[8]+1163531501&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(j^U&(N^j))+D[13]+2850285829&4294967295,S=N+(M<<5&4294967295|M>>>27),M=U+(N^j&(S^N))+D[2]+4243563512&4294967295,U=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(U^S))+D[7]+1735328473&4294967295,j=U+(M<<14&4294967295|M>>>18),M=N+(U^S&(j^U))+D[12]+2368359562&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(N^j^U)+D[5]+4294588738&4294967295,S=N+(M<<4&4294967295|M>>>28),M=U+(S^N^j)+D[8]+2272392833&4294967295,U=S+(M<<11&4294967295|M>>>21),M=j+(U^S^N)+D[11]+1839030562&4294967295,j=U+(M<<16&4294967295|M>>>16),M=N+(j^U^S)+D[14]+4259657740&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(N^j^U)+D[1]+2763975236&4294967295,S=N+(M<<4&4294967295|M>>>28),M=U+(S^N^j)+D[4]+1272893353&4294967295,U=S+(M<<11&4294967295|M>>>21),M=j+(U^S^N)+D[7]+4139469664&4294967295,j=U+(M<<16&4294967295|M>>>16),M=N+(j^U^S)+D[10]+3200236656&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(N^j^U)+D[13]+681279174&4294967295,S=N+(M<<4&4294967295|M>>>28),M=U+(S^N^j)+D[0]+3936430074&4294967295,U=S+(M<<11&4294967295|M>>>21),M=j+(U^S^N)+D[3]+3572445317&4294967295,j=U+(M<<16&4294967295|M>>>16),M=N+(j^U^S)+D[6]+76029189&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(N^j^U)+D[9]+3654602809&4294967295,S=N+(M<<4&4294967295|M>>>28),M=U+(S^N^j)+D[12]+3873151461&4294967295,U=S+(M<<11&4294967295|M>>>21),M=j+(U^S^N)+D[15]+530742520&4294967295,j=U+(M<<16&4294967295|M>>>16),M=N+(j^U^S)+D[2]+3299628645&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(j^(N|~U))+D[0]+4096336452&4294967295,S=N+(M<<6&4294967295|M>>>26),M=U+(N^(S|~j))+D[7]+1126891415&4294967295,U=S+(M<<10&4294967295|M>>>22),M=j+(S^(U|~N))+D[14]+2878612391&4294967295,j=U+(M<<15&4294967295|M>>>17),M=N+(U^(j|~S))+D[5]+4237533241&4294967295,N=j+(M<<21&4294967295|M>>>11),M=S+(j^(N|~U))+D[12]+1700485571&4294967295,S=N+(M<<6&4294967295|M>>>26),M=U+(N^(S|~j))+D[3]+2399980690&4294967295,U=S+(M<<10&4294967295|M>>>22),M=j+(S^(U|~N))+D[10]+4293915773&4294967295,j=U+(M<<15&4294967295|M>>>17),M=N+(U^(j|~S))+D[1]+2240044497&4294967295,N=j+(M<<21&4294967295|M>>>11),M=S+(j^(N|~U))+D[8]+1873313359&4294967295,S=N+(M<<6&4294967295|M>>>26),M=U+(N^(S|~j))+D[15]+4264355552&4294967295,U=S+(M<<10&4294967295|M>>>22),M=j+(S^(U|~N))+D[6]+2734768916&4294967295,j=U+(M<<15&4294967295|M>>>17),M=N+(U^(j|~S))+D[13]+1309151649&4294967295,N=j+(M<<21&4294967295|M>>>11),M=S+(j^(N|~U))+D[4]+4149444226&4294967295,S=N+(M<<6&4294967295|M>>>26),M=U+(N^(S|~j))+D[11]+3174756917&4294967295,U=S+(M<<10&4294967295|M>>>22),M=j+(S^(U|~N))+D[2]+718787259&4294967295,j=U+(M<<15&4294967295|M>>>17),M=N+(U^(j|~S))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,A.g[2]=A.g[2]+j&4294967295,A.g[3]=A.g[3]+U&4294967295}i.prototype.v=function(A,S){S===void 0&&(S=A.length);const N=S-this.blockSize,D=this.C;let j=this.h,U=0;for(;U<S;){if(j==0)for(;U<=N;)r(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<S;)if(D[j++]=A.charCodeAt(U++),j==this.blockSize){r(this,D),j=0;break}}else for(;U<S;)if(D[j++]=A[U++],j==this.blockSize){r(this,D),j=0;break}}this.h=j,this.o+=S},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,N=0;N<4;++N)for(let D=0;D<32;D+=8)A[S++]=this.g[N]>>>D&255;return A};function o(A,S){var N=u;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=S(A)}function a(A,S){this.h=S;const N=[];let D=!0;for(let j=A.length-1;j>=0;j--){const U=A[j]|0;D&&U==S||(N[j]=U,D=!1)}this.g=N}var u={};function h(A){return-128<=A&&A<128?o(A,function(S){return new a([S|0],S<0?-1:0)}):new a([A|0],A<0?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return m;if(A<0)return V(f(-A));const S=[];let N=1;for(let D=0;A>=N;D++)S[D]=A/N|0,N*=4294967296;return new a(S,0)}function g(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return V(g(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(S,8));let D=m;for(let U=0;U<A.length;U+=8){var j=Math.min(8,A.length-U);const M=parseInt(A.substring(U,U+j),S);j<8?(j=f(Math.pow(S,j)),D=D.j(j).add(f(M))):(D=D.j(N),D=D.add(f(M)))}return D}var m=h(0),_=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(R(this))return-V(this).m();let A=0,S=1;for(let N=0;N<this.g.length;N++){const D=this.i(N);A+=(D>=0?D:4294967296+D)*S,S*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(b(this))return"0";if(R(this))return"-"+V(this).toString(A);const S=f(Math.pow(A,6));var N=this;let D="";for(;;){const j=z(N,S).g;N=k(N,j.j(S));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=j,b(N))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function b(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function R(A){return A.h==-1}t.l=function(A){return A=k(this,A),R(A)?-1:b(A)?0:1};function V(A){const S=A.g.length,N=[];for(let D=0;D<S;D++)N[D]=~A.g[D];return new a(N,~A.h).add(_)}t.abs=function(){return R(this)?V(this):this},t.add=function(A){const S=Math.max(this.g.length,A.g.length),N=[];let D=0;for(let j=0;j<=S;j++){let U=D+(this.i(j)&65535)+(A.i(j)&65535),M=(U>>>16)+(this.i(j)>>>16)+(A.i(j)>>>16);D=M>>>16,U&=65535,M&=65535,N[j]=M<<16|U}return new a(N,N[N.length-1]&-2147483648?-1:0)};function k(A,S){return A.add(V(S))}t.j=function(A){if(b(this)||b(A))return m;if(R(this))return R(A)?V(this).j(V(A)):V(V(this).j(A));if(R(A))return V(this.j(V(A)));if(this.l(T)<0&&A.l(T)<0)return f(this.m()*A.m());const S=this.g.length+A.g.length,N=[];for(var D=0;D<2*S;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(let j=0;j<A.g.length;j++){const U=this.i(D)>>>16,M=this.i(D)&65535,X=A.i(j)>>>16,We=A.i(j)&65535;N[2*D+2*j]+=M*We,P(N,2*D+2*j),N[2*D+2*j+1]+=U*We,P(N,2*D+2*j+1),N[2*D+2*j+1]+=M*X,P(N,2*D+2*j+1),N[2*D+2*j+2]+=U*X,P(N,2*D+2*j+2)}for(A=0;A<S;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=S;A<2*S;A++)N[A]=0;return new a(N,0)};function P(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function C(A,S){this.g=A,this.h=S}function z(A,S){if(b(S))throw Error("division by zero");if(b(A))return new C(m,m);if(R(A))return S=z(V(A),S),new C(V(S.g),V(S.h));if(R(S))return S=z(A,V(S)),new C(V(S.g),S.h);if(A.g.length>30){if(R(A)||R(S))throw Error("slowDivide_ only works with positive integers.");for(var N=_,D=S;D.l(A)<=0;)N=G(N),D=G(D);var j=B(N,1),U=B(D,1);for(D=B(D,2),N=B(N,2);!b(D);){var M=U.add(D);M.l(A)<=0&&(j=j.add(N),U=M),D=B(D,1),N=B(N,1)}return S=k(A,j.j(S)),new C(j,S)}for(j=m;A.l(S)>=0;){for(N=Math.max(1,Math.floor(A.m()/S.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=f(N),M=U.j(S);R(M)||M.l(A)>0;)N-=D,U=f(N),M=U.j(S);b(U)&&(U=_),j=j.add(U),A=k(A,M)}return new C(j,A)}t.B=function(A){return z(this,A).h},t.and=function(A){const S=Math.max(this.g.length,A.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)&A.i(D);return new a(N,this.h&A.h)},t.or=function(A){const S=Math.max(this.g.length,A.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)|A.i(D);return new a(N,this.h|A.h)},t.xor=function(A){const S=Math.max(this.g.length,A.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)^A.i(D);return new a(N,this.h^A.h)};function G(A){const S=A.g.length+1,N=[];for(let D=0;D<S;D++)N[D]=A.i(D)<<1|A.i(D-1)>>>31;return new a(N,A.h)}function B(A,S){const N=S>>5;S%=32;const D=A.g.length-N,j=[];for(let U=0;U<D;U++)j[U]=S>0?A.i(U+N)>>>S|A.i(U+N+1)<<32-S:A.i(U+N);return new a(j,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,HS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,cs=a}).apply(typeof cx<"u"?cx:typeof self<"u"?self:typeof window<"u"?window:{});var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WS,iu,$S,qh,bg,qS,GS,ZS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var x=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var H=c[I];if(!(H in x))break e;x=x[H]}c=c[c.length-1],I=x[c],y=y(I),y!=I&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var x=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&x.push([I,y[I]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,x){return c.call.apply(c.bind,arguments)}function f(c,y,x){return f=h,f.apply(null,arguments)}function g(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function m(c,y){function x(){}x.prototype=y.prototype,c.Z=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Ob=function(I,H,$){for(var te=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)te[Pe-2]=arguments[Pe];return y.prototype[H].apply(I,te)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const x=Array(y);for(let I=0;I<y;I++)x[I]=c[I];return x}return[]}function b(c,y){for(let I=1;I<arguments.length;I++){const H=arguments[I];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=c.length||0;const $=H.length||0;c.length=x+$;for(let te=0;te<$;te++)c[x+te]=H[te]}else c.push(H)}}class R{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(c){a.setTimeout(()=>{throw c},0)}function k(){var c=A;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class P{constructor(){this.h=this.g=null}add(y,x){const I=C.get();I.set(y,x),this.h?this.h.next=I:this.g=I,this.h=I}}var C=new R(()=>new z,c=>c.reset());class z{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let G,B=!1,A=new P,S=()=>{const c=Promise.resolve(void 0);G=()=>{c.then(N)}};function N(){for(var c;c=k();){try{c.h.call(c.g)}catch(x){V(x)}var y=C;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}B=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};a.addEventListener("test",x,y),a.removeEventListener("test",x,y)}catch{}return c}();function M(c){return/^[\s\xa0]*$/.test(c)}function X(c,y){j.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}m(X,j),X.prototype.init=function(c,y){const x=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),pe=0;function Ze(c,y,x,I,H){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!I,this.ha=H,this.key=++pe,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ce(c,y,x){for(const I in c)y.call(x,c[I],I,c)}function ee(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function ne(c){const y={};for(const x in c)y[x]=c[x];return y}const Ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(c,y){let x,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(x in I)c[x]=I[x];for(let $=0;$<Ce.length;$++)x=Ce[$],Object.prototype.hasOwnProperty.call(I,x)&&(c[x]=I[x])}}function Me(c){this.src=c,this.g={},this.h=0}Me.prototype.add=function(c,y,x,I,H){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const te=fe(c,y,I,H);return te>-1?(y=c[te],x||(y.fa=!1)):(y=new Ze(y,this.src,$,!!I,H),y.fa=x,c.push(y)),y};function Re(c,y){const x=y.type;if(x in c.g){var I=c.g[x],H=Array.prototype.indexOf.call(I,y,void 0),$;($=H>=0)&&Array.prototype.splice.call(I,H,1),$&&(Z(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function fe(c,y,x,I){for(let H=0;H<c.length;++H){const $=c[H];if(!$.da&&$.listener==y&&$.capture==!!x&&$.ha==I)return H}return-1}var ht="closure_lm_"+(Math.random()*1e6|0),ie={};function he(c,y,x,I,H){if(Array.isArray(y)){for(let $=0;$<y.length;$++)he(c,y[$],x,I,H);return null}return x=ut(x),c&&c[We]?c.J(y,x,u(I)?!!I.capture:!1,H):_e(c,y,x,!1,I,H)}function _e(c,y,x,I,H,$){if(!y)throw Error("Invalid event type");const te=u(H)?!!H.capture:!!H;let Pe=ye(c);if(Pe||(c[ht]=Pe=new Me(c)),x=Pe.add(y,x,I,te,$),x.proxy)return x;if(I=Ie(),x.proxy=I,I.src=c,I.listener=x,c.addEventListener)U||(H=te),H===void 0&&(H=!1),c.addEventListener(y.toString(),I,H);else if(c.attachEvent)c.attachEvent(St(y.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ie(){function c(x){return y.call(c.src,c.listener,x)}const y=_t;return c}function me(c,y,x,I,H){if(Array.isArray(y))for(var $=0;$<y.length;$++)me(c,y[$],x,I,H);else I=u(I)?!!I.capture:!!I,x=ut(x),c&&c[We]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],x=fe(y,x,I,H),x>-1&&(Z(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=ye(c))&&(y=c.g[y.toString()],c=-1,y&&(c=fe(y,x,I,H)),(x=c>-1?y[c]:null)&&be(x))}function be(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[We])Re(y.i,c);else{var x=c.type,I=c.proxy;y.removeEventListener?y.removeEventListener(x,I,c.capture):y.detachEvent?y.detachEvent(St(x),I):y.addListener&&y.removeListener&&y.removeListener(I),(x=ye(y))?(Re(x,c),x.h==0&&(x.src=null,y[ht]=null)):Z(c)}}}function St(c){return c in ie?ie[c]:ie[c]="on"+c}function _t(c,y){if(c.da)c=!0;else{y=new X(y,this);const x=c.listener,I=c.ha||c.src;c.fa&&be(c),c=x.call(I,y)}return c}function ye(c){return c=c[ht],c instanceof Me?c:null}var ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function ut(c){return typeof c=="function"?c:(c[ke]||(c[ke]=function(y){return c.handleEvent(y)}),c[ke])}function Le(){D.call(this),this.i=new Me(this),this.M=this,this.G=null}m(Le,D),Le.prototype[We]=!0,Le.prototype.removeEventListener=function(c,y,x,I){me(this,c,y,x,I)};function Be(c,y){var x,I=c.G;if(I)for(x=[];I;I=I.G)x.push(I);if(c=c.M,I=y.type||y,typeof y=="string")y=new j(y,c);else if(y instanceof j)y.target=y.target||c;else{var H=y;y=new j(I,c),et(y,H)}H=!0;let $,te;if(x)for(te=x.length-1;te>=0;te--)$=y.g=x[te],H=Sn($,I,!0,y)&&H;if($=y.g=c,H=Sn($,I,!0,y)&&H,H=Sn($,I,!1,y)&&H,x)for(te=0;te<x.length;te++)$=y.g=x[te],H=Sn($,I,!1,y)&&H}Le.prototype.N=function(){if(Le.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const x=c.g[y];for(let I=0;I<x.length;I++)Z(x[I]);delete c.g[y],c.h--}}this.G=null},Le.prototype.J=function(c,y,x,I){return this.i.add(String(c),y,!1,x,I)},Le.prototype.K=function(c,y,x,I){return this.i.add(String(c),y,!0,x,I)};function Sn(c,y,x,I){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let $=0;$<y.length;++$){const te=y[$];if(te&&!te.da&&te.capture==x){const Pe=te.listener,Ge=te.ha||te.src;te.fa&&Re(c.i,te),H=Pe.call(Ge,I)!==!1&&H}}return H&&!I.defaultPrevented}function ei(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function Rs(c){c.g=ei(()=>{c.g=null,c.i&&(c.i=!1,Rs(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class ep extends D{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Rs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(c){D.call(this),this.h=c,this.g={}}m(Ns,D);var No=[];function ml(c){ce(c.g,function(y,x){this.g.hasOwnProperty(x)&&be(y)},c),c.g={}}Ns.prototype.N=function(){Ns.Z.N.call(this),ml(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lo=a.JSON.stringify,tp=a.JSON.parse,Pc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function gl(){}function Sc(){}var Sr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ls(){j.call(this,"d")}m(Ls,j);function Mo(){j.call(this,"c")}m(Mo,j);var Ui={},Cr=null;function Oo(){return Cr=Cr||new Le}Ui.Ia="serverreachability";function Cc(c){j.call(this,Ui.Ia,c)}m(Cc,j);function Ir(c){const y=Oo();Be(y,new Cc(y))}Ui.STAT_EVENT="statevent";function yl(c,y){j.call(this,Ui.STAT_EVENT,c),this.stat=y}m(yl,j);function Vt(c){const y=Oo();Be(y,new yl(y,c))}Ui.Ja="timingevent";function Ic(c,y){j.call(this,Ui.Ja,c),this.size=y}m(Ic,j);function Ms(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Os(){this.g=!0}Os.prototype.ua=function(){this.g=!1};function np(c,y,x,I,H,$){c.info(function(){if(c.g)if($){var te="",Pe=$.split("&");for(let Qe=0;Qe<Pe.length;Qe++){var Ge=Pe[Qe].split("=");if(Ge.length>1){const xt=Ge[0];Ge=Ge[1];const zn=xt.split("_");te=zn.length>=2&&zn[1]=="type"?te+(xt+"="+Ge+"&"):te+(xt+"=redacted&")}}}else te=null;else te=$;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+y+`
`+x+`
`+te})}function ip(c,y,x,I,H,$,te){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+y+`
`+x+`
`+$+" "+te})}function Ar(c,y,x,I){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+rp(c,x)+(I?" "+I:"")})}function _l(c,y){c.info(function(){return"TIMEOUT: "+y})}Os.prototype.info=function(){};function rp(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var x=$[c];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var H=I[0];if(H!="noop"&&H!="stop"&&H!="close")for(let te=1;te<I.length;te++)I[te]=""}}}}return Lo($)}catch{return y}}var Do={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ac={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bc;function pn(){}m(pn,gl),pn.prototype.g=function(){return new XMLHttpRequest},bc=new pn;function ue(c){return encodeURIComponent(String(c))}function kc(c){var y=1;c=c.split(":");const x=[];for(;y>0&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function ti(c,y,x,I){this.j=c,this.i=y,this.l=x,this.S=I||1,this.V=new Ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vl}function vl(){this.i=null,this.g="",this.h=!1}var wl={},Ds={};function Vo(c,y,x){c.M=1,c.A=tt(sn(y)),c.u=x,c.R=!0,Hi(c,null)}function Hi(c,y){c.F=Date.now(),jo(c),c.B=sn(c.A);var x=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Ho(x.i,"t",I),c.C=0,x=c.j.L,c.h=new vl,c.g=Ml(c.j,x?y:null,!c.u),c.P>0&&(c.O=new ep(f(c.Y,c,c.g),c.P)),y=c.V,x=c.g,I=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(No[0]=H.toString()),H=No);for(let $=0;$<H.length;$++){const te=he(x,H[$],I||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=c.J?ne(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Ir(),np(c.i,c.v,c.B,c.l,c.S,c.u)}ti.prototype.ba=function(c){c=c.target;const y=this.O;y&&vi(c)==3?y.j():this.Y(c)},ti.prototype.Y=function(c){try{if(c==this.g)e:{const Pe=vi(this.g),Ge=this.g.ya(),Qe=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Il(this.g)))){this.K||Pe!=4||Ge==7||(Ge==8||Qe<=0?Ir(3):Ir(2)),Fo(this);var y=this.g.ca();this.X=y;var x=Rc(this);if(this.o=y==200,ip(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,H=this.g;if((I=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(I)){var $=I;break t}}$=null}if(c=$)Ar(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xl(this,c);else{this.o=!1,this.m=3,Vt(12),Dn(this),Vs(this);break e}}if(this.R){c=!0;let xt;for(;!this.K&&this.C<x.length;)if(xt=sp(this,x),xt==Ds){Pe==4&&(this.m=4,Vt(14),c=!1),Ar(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==wl){this.m=4,Vt(15),Ar(this.i,this.l,x,"[Invalid Chunk]"),c=!1;break}else Ar(this.i,this.l,xt,null),xl(this,xt);if(Nc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||x.length!=0||this.h.h||(this.m=1,Vt(16),c=!1),this.o=this.o&&c,!c)Ar(this.i,this.l,x,"[Invalid Chunked Response]"),Dn(this),Vs(this);else if(x.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Nl(te),te.P=!0,Vt(11))}}else Ar(this.i,this.l,x,null),xl(this,x);Pe==4&&Dn(this),this.o&&!this.K&&(Pe==4?In(this.j,this):(this.o=!1,jo(this)))}else Al(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Dn(this),Vs(this)}}}catch{}finally{}};function Rc(c){if(!Nc(c))return c.g.la();const y=Il(c.g);if(y==="")return"";let x="";const I=y.length,H=vi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Dn(c),Vs(c),"";c.h.i=new a.TextDecoder}for(let $=0;$<I;$++)c.h.h=!0,x+=c.h.i.decode(y[$],{stream:!(H&&$==I-1)});return y.length=0,c.h.g+=x,c.C=0,c.h.g}function Nc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function sp(c,y){var x=c.C,I=y.indexOf(`
`,x);return I==-1?Ds:(x=Number(y.substring(x,I)),isNaN(x)?wl:(I+=1,I+x>y.length?Ds:(y=y.slice(I,I+x),c.C=I+x,y)))}ti.prototype.cancel=function(){this.K=!0,Dn(this)};function jo(c){c.T=Date.now()+c.H,Lc(c,c.H)}function Lc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ms(f(c.aa,c),y)}function Fo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}ti.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(_l(this.i,this.B),this.M!=2&&(Ir(),Vt(17)),Dn(this),this.m=2,Vs(this)):Lc(this,this.T-c)};function Vs(c){c.j.I==0||c.K||In(c.j,c)}function Dn(c){Fo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,ml(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function xl(c,y){try{var x=c.j;if(x.I!=0&&(x.g==c||js(x.h,c))){if(!c.L&&js(x.h,c)&&x.I==3){try{var I=x.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<c.F)Zo(x),qo(x);else break e;Rl(x),Vt(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Ms(f(x.Va,x),6e3));Dc(x.h)<=1&&x.ta&&(x.ta=void 0)}else xi(x,11)}else if((c.L||x.g==c)&&Zo(x),!M(y))for(H=x.Ba.g.parse(y),y=0;y<H.length;y++){let Qe=H[y];const xt=Qe[0];if(!(xt<=x.K))if(x.K=xt,Qe=Qe[1],x.I==2)if(Qe[0]=="c"){x.M=Qe[1],x.ba=Qe[2];const zn=Qe[3];zn!=null&&(x.ka=zn,x.j.info("VER="+x.ka));const ri=Qe[4];ri!=null&&(x.za=ri,x.j.info("SVER="+x.za));const Bn=Qe[5];Bn!=null&&typeof Bn=="number"&&Bn>0&&(I=1.5*Bn,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Ti=c.g;if(Ti){const Yo=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yo){var $=I.h;$.g||Yo.indexOf("spdy")==-1&&Yo.indexOf("quic")==-1&&Yo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Wi($,$.h),$.h=null))}if(I.G){const Xo=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Xo&&(I.wa=Xo,ae(I.J,I.G,Xo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-c.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var te=c;if(I.na=Ll(I,I.L?I.ba:null,I.W),te.L){Tl(I.h,te);var Pe=te,Ge=I.O;Ge&&(Pe.H=Ge),Pe.D&&(Fo(Pe),jo(Pe)),I.g=te}else kl(I);x.i.length>0&&wi(x)}else Qe[0]!="stop"&&Qe[0]!="close"||xi(x,7);else x.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?xi(x,7):Oe(x):Qe[0]!="noop"&&x.l&&x.l.qa(Qe),x.A=0)}}Ir(4)}catch{}}var op=class{constructor(c,y){this.g=c,this.map=y}};function Mc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Dc(c){return c.h?1:c.g?c.g.size:0}function js(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Wi(c,y){c.g?c.g.add(y):c.h=y}function Tl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Mc.prototype.cancel=function(){if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function El(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.G);return y}return T(c.i)}var br=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ue(c,y){if(c){c=c.split("&");for(let x=0;x<c.length;x++){const I=c[x].indexOf("=");let H,$=null;I>=0?(H=c[x].substring(0,I),$=c[x].substring(I+1)):H=c[x],y(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function qe(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof qe?(this.l=c.l,Vn(this,c.j),this.o=c.o,this.g=c.g,jn(this,c.u),this.h=c.h,Fs(this,zs(c.i)),this.m=c.m):c&&(y=String(c).match(br))?(this.l=!1,Vn(this,y[1]||"",!0),this.o=$i(y[2]||""),this.g=$i(y[3]||"",!0),jn(this,y[4]),this.h=$i(y[5]||"",!0),Fs(this,y[6]||"",!0),this.m=$i(y[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}qe.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(gi(y,Vc,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(gi(y,Vc,!0),"@"),c.push(ue(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&c.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(gi(x,x.charAt(0)=="/"?qi:zo,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",gi(x,Gi)),c.join("")},qe.prototype.resolve=function(c){const y=sn(this);let x=!!c.j;x?Vn(y,c.j):x=!!c.o,x?y.o=c.o:x=!!c.g,x?y.g=c.g:x=c.u!=null;var I=c.h;if(x)jn(y,c.u);else if(x=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var H=y.h.lastIndexOf("/");H!=-1&&(I=y.h.slice(0,H+1)+I)}if(H=I,H==".."||H==".")I="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){I=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let te=0;te<H.length;){const Pe=H[te++];Pe=="."?I&&te==H.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),I&&te==H.length&&$.push("")):($.push(Pe),I=!0)}I=$.join("/")}else I=H}return x?y.h=I:x=c.i.toString()!=="",x?Fs(y,zs(c.i)):x=!!c.m,x&&(y.m=c.m),y};function sn(c){return new qe(c)}function Vn(c,y,x){c.j=x?$i(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function jn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Fs(c,y,x){y instanceof ni?(c.i=y,Pl(c.i,c.l)):(x||(y=gi(y,vt)),c.i=new ni(y,c.l))}function ae(c,y,x){c.i.set(y,x)}function tt(c){return ae(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function $i(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function gi(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,mn),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function mn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Vc=/[#\/\?@]/g,zo=/[#\?:]/g,qi=/[#\?]/g,vt=/[#\?@]/g,Gi=/#/g;function ni(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Cn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ue(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=ni.prototype,t.add=function(c,y){Cn(this),this.i=null,c=yi(this,c);let x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function Bo(c,y){Cn(c),y=yi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function kr(c,y){return Cn(c),y=yi(c,y),c.g.has(y)}t.forEach=function(c,y){Cn(this),this.g.forEach(function(x,I){x.forEach(function(H){c.call(y,H,I,this)},this)},this)};function Uo(c,y){Cn(c);let x=[];if(typeof y=="string")kr(c,y)&&(x=x.concat(c.g.get(yi(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)x=x.concat(c[y]);return x}t.set=function(c,y){return Cn(this),this.i=null,c=yi(this,c),kr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=Uo(this,c),c.length>0?String(c[0]):y):y};function Ho(c,y,x){Bo(c,y),x.length>0&&(c.i=null,c.g.set(yi(c,y),T(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var x=y[I];const H=ue(x);x=Uo(this,x);for(let $=0;$<x.length;$++){let te=H;x[$]!==""&&(te+="="+ue(x[$])),c.push(te)}}return this.i=c.join("&")};function zs(c){const y=new ni;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function yi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Pl(c,y){y&&!c.j&&(Cn(c),c.i=null,c.g.forEach(function(x,I){const H=I.toLowerCase();I!=H&&(Bo(this,I),Ho(this,H,x))},c)),c.j=y}function Wo(c,y){const x=new Os;if(a.Image){const I=new Image;I.onload=g(Fn,x,"TestLoadImage: loaded",!0,y,I),I.onerror=g(Fn,x,"TestLoadImage: error",!1,y,I),I.onabort=g(Fn,x,"TestLoadImage: abort",!1,y,I),I.ontimeout=g(Fn,x,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else y(!1)}function jc(c,y){const x=new Os,I=new AbortController,H=setTimeout(()=>{I.abort(),Fn(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:I.signal}).then($=>{clearTimeout(H),$.ok?Fn(x,"TestPingServer: ok",!0,y):Fn(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Fn(x,"TestPingServer: error",!1,y)})}function Fn(c,y,x,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(x)}catch{}}function ap(){this.g=new Pc}function Ee(c){this.i=c.Sb||null,this.h=c.ab||!1}m(Ee,gl),Ee.prototype.g=function(){return new on(this.i,this.h)};function on(c,y){Le.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(on,Le),t=on.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Zi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xe(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xe(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Rr(this):Zi(this),this.readyState==3&&Xe(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Rr(this))},t.Na=function(c){this.g&&(this.response=c,Rr(this))},t.ga=function(){this.g&&Rr(this)};function Rr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Zi(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function Zi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(on.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $o(c){let y="";return ce(c,function(x,I){y+=I,y+=":",y+=x,y+=`\r
`}),y}function Bs(c,y,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=$o(x),typeof c=="string"?x!=null&&ue(x):ae(c,y,x))}function Ke(c){Le.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ke,Le);var Sl=/^https?$/i,Us=["POST","PUT"];t=Ke.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){Ct(this,$);return}if(c=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)x.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())x.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find($=>$.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Us,y,void 0)>=0)||I||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,te]of x)this.g.setRequestHeader($,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){Ct(this,$)}};function Ct(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,_i(c),Hs(c)}function _i(c){c.A||(c.A=!0,Be(c,"complete"),Be(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Be(this,"complete"),Be(this,"abort"),Hs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Cl(this):this.Xa())},t.Xa=function(){Cl(this)};function Cl(c){if(c.h&&typeof o<"u"){if(c.v&&vi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Be(c,"readystatechange"),vi(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var I;if(I=$===0){let te=String(c.D).match(br)[1]||null;!te&&a.self&&a.self.location&&(te=a.self.location.protocol.slice(0,-1)),I=!Sl.test(te?te.toLowerCase():"")}x=I}if(x)Be(c,"complete"),Be(c,"success");else{c.o=6;try{var H=vi(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",_i(c)}}finally{Hs(c)}}}}function Hs(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const x=c.g;c.g=null,y||Be(c,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function vi(c){return c.g?c.g.readyState:0}t.ca=function(){try{return vi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),tp(y)}};function Il(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Al(c){const y={};c=(c.g&&vi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(M(c[I]))continue;var x=kc(c[I]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const $=y[H]||[];y[H]=$,$.push(x)}ee(y,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function bl(c){this.za=0,this.i=[],this.j=new Os,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ws("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ws("baseRetryDelayMs",5e3,c),this.Za=Ws("retryDelaySeedMs",1e4,c),this.Ta=Ws("forwardChannelMaxRetries",2,c),this.va=Ws("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Mc(c&&c.concurrentRequestLimit),this.Ba=new ap,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=bl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,x,I){Vt(0),this.W=c,this.H=y||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=Ll(this,null,this.W),wi(this)};function Oe(c){if(gn(c),c.I==3){var y=c.V++,x=sn(c.J);if(ae(x,"SID",c.M),ae(x,"RID",y),ae(x,"TYPE","terminate"),Ki(c,x),y=new ti(c,c.j,y),y.M=2,y.A=tt(sn(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=y.A,x=!0),x||(y.g=Ml(y.j,null),y.g.ea(y.A)),y.F=Date.now(),jo(y)}ii(c)}function qo(c){c.g&&(Nl(c),c.g.cancel(),c.g=null)}function gn(c){qo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Zo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function wi(c){if(!Oc(c.h)&&!c.m){c.m=!0;var y=c.Ea;G||S(),B||(G(),B=!0),A.add(y,c),c.D=0}}function Fc(c,y){return Dc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ms(f(c.Ea,c,y),Uc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new ti(this,this.j,c);let $=this.o;if(this.U&&($?($=ne($),et($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Bc(this,H,y),x=sn(this.J),ae(x,"RID",c),ae(x,"CVER",22),this.G&&ae(x,"X-HTTP-Session-Id",this.G),Ki(this,x),$&&(this.R?y="headers="+ue($o($))+"&"+y:this.u&&Bs(x,this.u,$)),Wi(this.h,H),this.Ra&&ae(x,"TYPE","init"),this.S?(ae(x,"$req",y),ae(x,"SID","null"),H.U=!0,Vo(H,x,null)):Vo(H,x,y),this.I=2}}else this.I==3&&(c?zc(this,c):this.i.length==0||Oc(this.h)||zc(this))};function zc(c,y){var x;y?x=y.l:x=c.V++;const I=sn(c.J);ae(I,"SID",c.M),ae(I,"RID",x),ae(I,"AID",c.K),Ki(c,I),c.u&&c.o&&Bs(I,c.u,c.o),x=new ti(c,c.j,x,c.D+1),c.u===null&&(x.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Bc(c,x,1e3),x.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Wi(c.h,x),Vo(x,I,y)}function Ki(c,y){c.H&&ce(c.H,function(x,I){ae(y,I,x)}),c.l&&ce({},function(x,I){ae(y,I,x)})}function Bc(c,y,x){x=Math.min(c.i.length,x);const I=c.l?f(c.l.Ka,c.l,c):null;e:{var H=c.i;let Pe=-1;for(;;){const Ge=["count="+x];Pe==-1?x>0?(Pe=H[0].g,Ge.push("ofs="+Pe)):Pe=0:Ge.push("ofs="+Pe);let Qe=!0;for(let xt=0;xt<x;xt++){var $=H[xt].g;const zn=H[xt].map;if($-=Pe,$<0)Pe=Math.max(0,H[xt].g-100),Qe=!1;else try{$="req"+$+"_"||"";try{var te=zn instanceof Map?zn:Object.entries(zn);for(const[ri,Bn]of te){let Ti=Bn;u(Bn)&&(Ti=Lo(Bn)),Ge.push($+ri+"="+encodeURIComponent(Ti))}}catch(ri){throw Ge.push($+"type="+encodeURIComponent("_badmap")),ri}}catch{I&&I(zn)}}if(Qe){te=Ge.join("&");break e}}te=void 0}return c=c.i.splice(0,x),y.G=c,te}function kl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;G||S(),B||(G(),B=!0),A.add(y,c),c.A=0}}function Rl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ms(f(c.Da,c),Uc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Go(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ms(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),qo(this),Go(this))};function Nl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Go(c){c.g=new ti(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=sn(c.na);ae(y,"RID","rpc"),ae(y,"SID",c.M),ae(y,"AID",c.K),ae(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&ae(y,"TO",c.ia),ae(y,"TYPE","xmlhttp"),Ki(c,y),c.u&&c.o&&Bs(y,c.u,c.o),c.O&&(c.g.H=c.O);var x=c.g;c=c.ba,x.M=1,x.A=tt(sn(y)),x.u=null,x.R=!0,Hi(x,c)}t.Va=function(){this.C!=null&&(this.C=null,qo(this),Rl(this),Vt(19))};function Zo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function In(c,y){var x=null;if(c.g==y){Zo(c),Nl(c),c.g=null;var I=2}else if(js(c.h,y))x=y.G,Tl(c.h,y),I=1;else return;if(c.I!=0){if(y.o)if(I==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;I=Oo(),Be(I,new Ic(I,x)),wi(c)}else kl(c);else if(H=y.m,H==3||H==0&&y.X>0||!(I==1&&Fc(c,y)||I==2&&Rl(c)))switch(x&&x.length>0&&(y=c.h,y.i=y.i.concat(x)),H){case 1:xi(c,5);break;case 4:xi(c,10);break;case 3:xi(c,6);break;default:xi(c,2)}}}function Uc(c,y){let x=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(x*=2),x*y}function xi(c,y){if(c.j.info("Error code "+y),y==2){var x=f(c.bb,c),I=c.Ua;const H=!I;I=new qe(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vn(I,"https"),tt(I),H?Wo(I.toString(),x):jc(I.toString(),x)}else Vt(2);c.I=0,c.l&&c.l.pa(y),ii(c),gn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function ii(c){if(c.I=0,c.ja=[],c.l){const y=El(c.h);(y.length!=0||c.i.length!=0)&&(b(c.ja,y),b(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function Ll(c,y,x){var I=x instanceof qe?sn(x):new qe(x);if(I.g!="")y&&(I.g=y+"."+I.g),jn(I,I.u);else{var H=a.location;I=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const $=new qe(null);I&&Vn($,I),y&&($.g=y),H&&jn($,H),x&&($.h=x),I=$}return x=c.G,y=c.wa,x&&y&&ae(I,x,y),ae(I,"VER",c.ka),Ki(c,I),I}function Ml(c,y,x){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ke(new Ee({ab:x})):new Ke(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ko(){}t=Ko.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Qo(){}Qo.prototype.g=function(c,y){return new Zt(c,y)};function Zt(c,y){Le.call(this),this.g=new bl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!M(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Nr(this)}m(Zt,Le),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Oe(this.g)},Zt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.v&&(x={},x.__data__=Lo(c),c=x);y.i.push(new op(y.Ya++,c)),y.I==3&&wi(y)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Oe(this.g),delete this.g,Zt.Z.N.call(this)};function Ol(c){Ls.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}m(Ol,Ls);function Hc(){Mo.call(this),this.status=1}m(Hc,Mo);function Nr(c){this.g=c}m(Nr,Ko),Nr.prototype.ra=function(){Be(this.g,"a")},Nr.prototype.qa=function(c){Be(this.g,new Ol(c))},Nr.prototype.pa=function(c){Be(this.g,new Hc)},Nr.prototype.oa=function(){Be(this.g,"b")},Qo.prototype.createWebChannel=Qo.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,ZS=function(){return new Qo},GS=function(){return Oo()},qS=Ui,bg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Do.NO_ERROR=0,Do.TIMEOUT=8,Do.HTTP_ERROR=6,qh=Do,Ac.COMPLETE="complete",$S=Ac,Sc.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",Le.prototype.listen=Le.prototype.J,iu=Sc,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,WS=Ke}).apply(typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{});const hx="@firebase/firestore",dx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new m_("@firebase/firestore");function oa(){return _o.logLevel}function oe(t,...e){if(_o.logLevel<=je.DEBUG){const n=e.map(__);_o.debug(`Firestore (${cl}): ${t}`,...n)}}function _r(t,...e){if(_o.logLevel<=je.ERROR){const n=e.map(__);_o.error(`Firestore (${cl}): ${t}`,...n)}}function Ya(t,...e){if(_o.logLevel<=je.WARN){const n=e.map(__);_o.warn(`Firestore (${cl}): ${t}`,...n)}}function __(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,KS(t,i,n)}function KS(t,e,n){let i=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw _r(i),new Error(i)}function Ye(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||KS(e,r,i)}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class IV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AV{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ye(typeof i.accessToken=="string",31837,{l:i}),new QS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class bV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new bV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const i=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=NV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Fe(t,e){return t<e?-1:t>e?1:0}function kg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return rm(r)===rm(o)?Fe(r,o):rm(r)?1:-1}return Fe(t.length,e.length)}const LV=55296,MV=57343;function rm(t){const e=t.charCodeAt(0);return e>=LV&&e<=MV}function Xa(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="__name__";class Ci{constructor(e,n,i){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&xe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ci.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Ci.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Fe(e.length,n.length)}static compareSegments(e,n){const i=Ci.isNumericId(e),r=Ci.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Ci.extractNumericId(e).compare(Ci.extractNumericId(n)):kg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class ot extends Ci{construct(e,n,i){return new ot(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const OV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Ci{construct(e,n,i){return new Wt(e,n,i)}static isValidIdentifier(e){return OV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===px}static keyField(){return new Wt([px])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new de(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new de(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new de(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new de(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ot.fromString(e))}static fromName(e){return new ge(ot.fromString(e).popFirst(5))}static empty(){return new ge(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t,e,n){if(!n)throw new de(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DV(t,e,n,i){if(e===!0&&i===!0)throw new de(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mx(t){if(!ge.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gx(t){if(ge.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function XS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function w_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=w_(t);throw new de(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function pc(t,e){if(!XS(t))throw new de(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new de(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=-62135596800,_x=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*_x);return new at(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yx)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_x}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pc(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Rt("string",at._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new at(0,0))}static max(){return new Se(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=-1;function VV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new at(n+1,0):new at(n,i));return new vs(r,ge.empty(),e)}function jV(t){return new vs(t.readTime,t.key,Qu)}class vs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new vs(Se.min(),ge.empty(),Qu)}static max(){return new vs(Se.max(),ge.empty(),Qu)}}function FV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==zV)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(g=>{a[f]=g,++u,u===o&&i(a)},g=>r(g))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function UV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Of.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=-1;function Df(t){return t==null}function jd(t){return t===0&&1/t==-1/0}function HV(t){return typeof t=="number"&&Number.isInteger(t)&&!jd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="";function WV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vx(e)),e=$V(t.get(n),e);return vx(e)}function $V(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case JS:n+="";break;default:n+=o}}return n}function vx(t){return t+JS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Io(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eh(this.root,e,this.comparator,!0)}}class Eh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ht.RED,this.left=r??Ht.EMPTY,this.right=o??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ht(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xx(this.data.getIterator())}getIteratorFrom(e){return new xx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class xx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Dt(Wt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new tC("Invalid base64 string: "+o):o}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const qV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(t){if(Ye(!!t,39018),typeof t=="string"){let e=0;const n=qV.exec(t);if(Ye(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xs(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="server_timestamp",iC="__type__",rC="__previous_value__",sC="__local_write_time__";function T_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[iC])==null?void 0:i.stringValue)===nC}function Vf(t){const e=t.mapValue.fields[rC];return T_(e)?Vf(e):e}function Yu(t){const e=ws(t.mapValue.fields[sC].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n,i,r,o,a,u,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const Fd="(default)";class Xu{constructor(e,n){this.projectId=e,this.database=n||Fd}static empty(){return new Xu("","")}get isDefaultDatabase(){return this.database===Fd}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="__type__",ZV="__max__",Ph={mapValue:{}},aC="__vector__",zd="value";function Ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?T_(t)?4:QV(t)?9007199254740991:KV(t)?10:11:xe(28295,{value:t})}function Fi(t,e){if(t===e)return!0;const n=Ts(t);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yu(t).isEqual(Yu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=ws(r.timestampValue),u=ws(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return xs(r.bytesValue).isEqual(xs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Tt(r.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Tt(r.integerValue)===Tt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=Tt(r.doubleValue),u=Tt(o.doubleValue);return a===u?jd(a)===jd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Xa(t.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(wx(a)!==wx(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Fi(a[h],u[h])))return!1;return!0}(t,e);default:return xe(52216,{left:t})}}function Ju(t,e){return(t.values||[]).find(n=>Fi(n,e))!==void 0}function Ja(t,e){if(t===e)return 0;const n=Ts(t),i=Ts(e);if(n!==i)return Fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=Tt(o.integerValue||o.doubleValue),h=Tt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Tx(t.timestampValue,e.timestampValue);case 4:return Tx(Yu(t),Yu(e));case 5:return kg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=xs(o),h=xs(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=Fe(u[f],h[f]);if(g!==0)return g}return Fe(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Fe(Tt(o.latitude),Tt(a.latitude));return u!==0?u:Fe(Tt(o.longitude),Tt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ex(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,T,b,R;const u=o.fields||{},h=a.fields||{},f=(_=u[zd])==null?void 0:_.arrayValue,g=(T=h[zd])==null?void 0:T.arrayValue,m=Fe(((b=f==null?void 0:f.values)==null?void 0:b.length)||0,((R=g==null?void 0:g.values)==null?void 0:R.length)||0);return m!==0?m:Ex(f,g)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ph.mapValue&&a===Ph.mapValue)return 0;if(o===Ph.mapValue)return 1;if(a===Ph.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let m=0;m<h.length&&m<g.length;++m){const _=kg(h[m],g[m]);if(_!==0)return _;const T=Ja(u[h[m]],f[g[m]]);if(T!==0)return T}return Fe(h.length,g.length)}(t.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function Tx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=ws(t),i=ws(e),r=Fe(n.seconds,i.seconds);return r!==0?r:Fe(n.nanos,i.nanos)}function Ex(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ja(n[r],i[r]);if(o)return o}return Fe(n.length,i.length)}function el(t){return Rg(t)}function Rg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ws(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Rg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Rg(n.fields[a])}`;return r+"}"}(t.mapValue):xe(61005,{value:t})}function Gh(t){switch(Ts(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vf(t);return e?16+Gh(e):16;case 5:return 2*t.stringValue.length;case 6:return xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Gh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Io(i.fields,(o,a)=>{r+=o.length+Gh(a)}),r}(t.mapValue);default:throw xe(13486,{value:t})}}function Ng(t){return!!t&&"integerValue"in t}function E_(t){return!!t&&"arrayValue"in t}function Px(t){return!!t&&"nullValue"in t}function Sx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zh(t){return!!t&&"mapValue"in t}function KV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oC])==null?void 0:i.stringValue)===aC}function xu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Io(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=xu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xu(t.arrayValue.values[n]);return e}return{...t}}function QV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ZV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xu(n)}setAll(e){let n=Wt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=xu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Zh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Io(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Zn(xu(this.value))}}function lC(t){const e=[];return Io(t.fields,(n,i)=>{const r=new Wt([n]);if(Zh(i)){const o=lC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new tn(e,0,Se.min(),Se.min(),Se.min(),Zn.empty(),0)}static newFoundDocument(e,n,i,r){return new tn(e,1,n,Se.min(),i,r,0)}static newNoDocument(e,n){return new tn(e,2,n,Se.min(),Se.min(),Zn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,Se.min(),Se.min(),Zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n){this.position=e,this.inclusive=n}}function Cx(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ge.comparator(ge.fromName(a.referenceValue),n.key):i=Ja(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ix(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n="asc"){this.field=e,this.dir=n}}function YV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{}class Lt extends uC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new JV(e,n,i):n==="array-contains"?new n4(e,i):n==="in"?new i4(e,i):n==="not-in"?new r4(e,i):n==="array-contains-any"?new s4(e,i):new Lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new e4(e,i):new t4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ja(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(Ja(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends uC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new zi(e,n)}matches(e){return cC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cC(t){return t.op==="and"}function hC(t){return XV(t)&&cC(t)}function XV(t){for(const e of t.filters)if(e instanceof zi)return!1;return!0}function Lg(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+el(t.value);if(hC(t))return t.filters.map(e=>Lg(e)).join(",");{const e=t.filters.map(n=>Lg(n)).join(",");return`${t.op}(${e})`}}function dC(t,e){return t instanceof Lt?function(i,r){return r instanceof Lt&&i.op===r.op&&i.field.isEqual(r.field)&&Fi(i.value,r.value)}(t,e):t instanceof zi?function(i,r){return r instanceof zi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&dC(a,r.filters[u]),!0):!1}(t,e):void xe(19439)}function fC(t){return t instanceof Lt?function(n){return`${n.field.canonicalString()} ${n.op} ${el(n.value)}`}(t):t instanceof zi?function(n){return n.op.toString()+" {"+n.getFilters().map(fC).join(" ,")+"}"}(t):"Filter"}class JV extends Lt{constructor(e,n,i){super(e,n,i),this.key=ge.fromName(i.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class e4 extends Lt{constructor(e,n){super(e,"in",n),this.keys=pC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class t4 extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=pC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ge.fromName(i.referenceValue))}class n4 extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return E_(n)&&Ju(n.arrayValue,this.value)}}class i4 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ju(this.value.arrayValue,n)}}class r4 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ju(this.value.arrayValue,n)}}class s4 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!E_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ju(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function Ax(t,e=null,n=[],i=[],r=null,o=null,a=null){return new o4(t,e,n,i,r,o,a)}function P_(t){const e=Ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Lg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>el(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>el(i)).join(",")),e.Te=n}return e.Te}function S_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ix(t.startAt,e.startAt)&&Ix(t.endAt,e.endAt)}function Mg(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function a4(t,e,n,i,r,o,a,u){return new jf(t,e,n,i,r,o,a,u)}function C_(t){return new jf(t)}function bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function l4(t){return t.collectionGroup!==null}function Tu(t){const e=Ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Dt(Wt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ud(o,i))}),n.has(Wt.keyField().canonicalString())||e.Ie.push(new Ud(Wt.keyField(),i))}return e.Ie}function Ni(t){const e=Ae(t);return e.Ee||(e.Ee=u4(e,Tu(t))),e.Ee}function u4(t,e){if(t.limitType==="F")return Ax(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Ud(r.field,o)});const n=t.endAt?new Bd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Bd(t.startAt.position,t.startAt.inclusive):null;return Ax(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Og(t,e,n){return new jf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ff(t,e){return S_(Ni(t),Ni(e))&&t.limitType===e.limitType}function mC(t){return`${P_(Ni(t))}|lt:${t.limitType}`}function aa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>fC(r)).join(", ")}]`),Df(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>el(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>el(r)).join(",")),`Target(${i})`}(Ni(t))}; limitType=${t.limitType})`}function zf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ge.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Tu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=Cx(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,Tu(i),r)||i.endAt&&!function(a,u,h){const f=Cx(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,Tu(i),r))}(t,e)}function c4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gC(t){return(e,n)=>{let i=!1;for(const r of Tu(t)){const o=h4(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function h4(t,e,n){const i=t.field.isKeyField()?ge.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Ja(h,f):xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return eC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new yt(ge.comparator);function vr(){return d4}const yC=new yt(ge.comparator);function ru(...t){let e=yC;for(const n of t)e=e.insert(n.key,n);return e}function _C(t){let e=yC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function io(){return Eu()}function vC(){return Eu()}function Eu(){return new Ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const f4=new yt(ge.comparator),p4=new Dt(ge.comparator);function ze(...t){let e=p4;for(const n of t)e=e.add(n);return e}const m4=new Dt(Fe);function g4(){return m4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function wC(t){return{integerValue:""+t}}function y4(t,e){return HV(e)?wC(e):I_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this._=void 0}}function _4(t,e,n){return t instanceof Hd?function(r,o){const a={fields:{[iC]:{stringValue:nC},[sC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&T_(o)&&(o=Vf(o)),o&&(a.fields[rC]=o),{mapValue:a}}(n,e):t instanceof ec?TC(t,e):t instanceof tc?EC(t,e):function(r,o){const a=xC(r,o),u=kx(a)+kx(r.Ae);return Ng(a)&&Ng(r.Ae)?wC(u):I_(r.serializer,u)}(t,e)}function v4(t,e,n){return t instanceof ec?TC(t,e):t instanceof tc?EC(t,e):n}function xC(t,e){return t instanceof Wd?function(i){return Ng(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Hd extends Bf{}class ec extends Bf{constructor(e){super(),this.elements=e}}function TC(t,e){const n=PC(e);for(const i of t.elements)n.some(r=>Fi(r,i))||n.push(i);return{arrayValue:{values:n}}}class tc extends Bf{constructor(e){super(),this.elements=e}}function EC(t,e){let n=PC(e);for(const i of t.elements)n=n.filter(r=>!Fi(r,i));return{arrayValue:{values:n}}}class Wd extends Bf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function kx(t){return Tt(t.integerValue||t.doubleValue)}function PC(t){return E_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function w4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ec&&r instanceof ec||i instanceof tc&&r instanceof tc?Xa(i.elements,r.elements,Fi):i instanceof Wd&&r instanceof Wd?Fi(i.Ae,r.Ae):i instanceof Hd&&r instanceof Hd}(t.transform,e.transform)}class x4{constructor(e,n){this.version=e,this.transformResults=n}}class Li{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Li}static exists(e){return new Li(void 0,e)}static updateTime(e){return new Li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uf{}function SC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new A_(t.key,Li.none()):new mc(t.key,t.data,Li.none());{const n=t.data,i=Zn.empty();let r=new Dt(Wt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new bo(t.key,i,new hi(r.toArray()),Li.none())}}function T4(t,e,n){t instanceof mc?function(r,o,a){const u=r.value.clone(),h=Nx(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof bo?function(r,o,a){if(!Kh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Nx(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(CC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Pu(t,e,n,i){return t instanceof mc?function(o,a,u,h){if(!Kh(o.precondition,a))return u;const f=o.value.clone(),g=Lx(o.fieldTransforms,h,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof bo?function(o,a,u,h){if(!Kh(o.precondition,a))return u;const f=Lx(o.fieldTransforms,h,a),g=a.data;return g.setAll(CC(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(o,a,u){return Kh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function E4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=xC(i.transform,r||null);o!=null&&(n===null&&(n=Zn.empty()),n.set(i.field,o))}return n||null}function Rx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Xa(i,r,(o,a)=>w4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mc extends Uf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bo extends Uf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function CC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Nx(t,e,n){const i=new Map;Ye(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,v4(a,u,n[r]))}return i}function Lx(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,_4(o,a,e))}return i}class A_ extends Uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P4 extends Uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&T4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Pu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Pu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=vC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=SC(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(n,i)=>Rx(n,i))&&Xa(this.baseMutations,e.baseMutations,(n,i)=>Rx(n,i))}}class b_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ye(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return f4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new b_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,He;function A4(t){switch(t){case Y.OK:return xe(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return xe(15467,{code:t})}}function IC(t){if(t===void 0)return _r("GRPC error has no .code"),Y.UNKNOWN;switch(t){case At.OK:return Y.OK;case At.CANCELLED:return Y.CANCELLED;case At.UNKNOWN:return Y.UNKNOWN;case At.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case At.INTERNAL:return Y.INTERNAL;case At.UNAVAILABLE:return Y.UNAVAILABLE;case At.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case At.NOT_FOUND:return Y.NOT_FOUND;case At.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case At.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case At.ABORTED:return Y.ABORTED;case At.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case At.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case At.DATA_LOSS:return Y.DATA_LOSS;default:return xe(39323,{code:t})}}(He=At||(At={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=new cs([4294967295,4294967295],0);function Mx(t){const e=b4().encode(t),n=new HS;return n.update(e),new Uint8Array(n.digest())}function Ox(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new cs([n,i],0),new cs([r,o],0)]}class k_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new su(`Invalid padding: ${n}`);if(i<0)throw new su(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new su(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=cs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(cs.fromNumber(i)));return r.compare(k4)===1&&(r=new cs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Mx(e),[i,r]=Ox(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new k_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Mx(e),[i,r]=Ox(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,gc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Hf(Se.min(),r,new yt(Fe),vr(),ze())}}class gc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new gc(i,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class AC{constructor(e,n){this.targetId=e,this.Ce=n}}class bC{constructor(e,n,i=Gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Dx{constructor(){this.ve=0,this.Fe=Vx(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),i=ze();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:xe(38017,{changeType:o})}}),new gc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Vx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R4{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.Je=Sh(),this.He=Sh(),this.Ye=new yt(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Mg(o))if(i===0){const a=new ge(o.path);this.et(n,a,tn.newNoDocument(a,Se.min()))}else Ye(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=xs(i).toUint8Array()}catch(h){if(h instanceof tC)return Ya("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new k_(a,r,o)}catch(h){return Ya(h instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Mg(u.target)){const h=new ge(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,tn.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=ze();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Hf(e,n,this.Ye,this.je,i);return this.je=vr(),this.Je=Sh(),this.He=Sh(),this.Ye=new yt(Fe),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Dx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Dt(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Dt(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Sh(){return new yt(ge.comparator)}function Vx(){return new yt(ge.comparator)}const N4={asc:"ASCENDING",desc:"DESCENDING"},L4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M4={and:"AND",or:"OR"};class O4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dg(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function $d(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function D4(t,e){return $d(t,e.toTimestamp())}function Mi(t){return Ye(!!t,49232),Se.fromTimestamp(function(n){const i=ws(n);return new at(i.seconds,i.nanos)}(t))}function R_(t,e){return Vg(t,e).canonicalString()}function Vg(t,e){const n=function(r){return new ot(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RC(t){const e=ot.fromString(t);return Ye(DC(e),10190,{key:e.toString()}),e}function jg(t,e){return R_(t.databaseId,e.path)}function sm(t,e){const n=RC(e);if(n.get(1)!==t.databaseId.projectId)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(LC(n))}function NC(t,e){return R_(t.databaseId,e)}function V4(t){const e=RC(t);return e.length===4?ot.emptyPath():LC(e)}function Fg(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LC(t){return Ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jx(t,e,n){return{name:jg(t,e),fields:n.value.mapValue.fields}}function j4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:xe(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(Ye(g===void 0||typeof g=="string",58123),Gt.fromBase64String(g||"")):(Ye(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Gt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const g=f.code===void 0?Y.UNKNOWN:IC(f.code);return new de(g,f.message||"")}(a);n=new bC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=sm(t,i.document.name),o=Mi(i.document.updateTime),a=i.document.createTime?Mi(i.document.createTime):Se.min(),u=new Zn({mapValue:{fields:i.document.fields}}),h=tn.newFoundDocument(r,o,a,u),f=i.targetIds||[],g=i.removedTargetIds||[];n=new Qh(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=sm(t,i.document),o=i.readTime?Mi(i.readTime):Se.min(),a=tn.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Qh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=sm(t,i.document),o=i.removedTargetIds||[];n=new Qh([],o,r,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new I4(r,o),u=i.targetId;n=new AC(u,a)}}return n}function F4(t,e){let n;if(e instanceof mc)n={update:jx(t,e.key,e.value)};else if(e instanceof A_)n={delete:jg(t,e.key)};else if(e instanceof bo)n={update:jx(t,e.key,e.data),updateMask:Z4(e.fieldMask)};else{if(!(e instanceof P4))return xe(16599,{Vt:e.type});n={verify:jg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Hd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ec)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof tc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Wd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw xe(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:D4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:xe(27497)}(t,e.precondition)),n}function z4(t,e){return t&&t.length>0?(Ye(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Mi(r.updateTime):Mi(o);return a.isEqual(Se.min())&&(a=Mi(o)),new x4(a,r.transformResults||[])}(n,e))):[]}function B4(t,e){return{documents:[NC(t,e.path)]}}function U4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=NC(t,r);const o=function(f){if(f.length!==0)return OC(zi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(g=>function(_){return{field:la(_.field),direction:$4(_.dir)}}(g))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Dg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function H4(t){let e=V4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ye(i===1,65062);const g=n.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(m){const _=MC(m);return _ instanceof zi&&hC(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(_=>function(b){return new Ud(ua(b.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(m){let _;return _=typeof m=="object"?m.value:m,Df(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(m){const _=!!m.before,T=m.values||[];return new Bd(T,_)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const _=!m.before,T=m.values||[];return new Bd(T,_)}(n.endAt)),a4(e,r,a,o,u,"F",h,f)}function W4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ua(n.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ua(n.unaryFilter.field);return Lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ua(n.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ua(n.unaryFilter.field);return Lt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Lt.create(ua(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zi.create(n.compositeFilter.filters.map(i=>MC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(t):xe(30097,{filter:t})}function $4(t){return N4[t]}function q4(t){return L4[t]}function G4(t){return M4[t]}function la(t){return{fieldPath:t.canonicalString()}}function ua(t){return Wt.fromServerFormat(t.fieldPath)}function OC(t){return t instanceof Lt?function(n){if(n.op==="=="){if(Sx(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NAN"}};if(Px(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sx(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NOT_NAN"}};if(Px(n.value))return{unaryFilter:{field:la(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:la(n.field),op:q4(n.op),value:n.value}}}(t):t instanceof zi?function(n){const i=n.getFilters().map(r=>OC(r));return i.length===1?i[0]:{compositeFilter:{op:G4(n.op),filters:i}}}(t):xe(54877,{filter:t})}function Z4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,i,r,o=Se.min(),a=Se.min(),u=Gt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.yt=e}}function Q4(t){const e=H4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Og(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.Cn=new X4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(vs.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class X4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Dt(ot.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Dt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VC=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(VC,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="LruGarbageCollector",J4=1048576;function Bx([t,e],[n,i]){const r=Fe(t,n);return r===0?Fe(e,i):r}class e3{constructor(e){this.Ir=e,this.buffer=new Dt(Bx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Bx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class t3{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(zx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){dl(n)?oe(zx,"Ignoring IndexedDB error during garbage collection: ",n):await hl(n)}await this.Vr(3e5)})}}class n3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Of.ce);const i=new e3(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Fx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,a=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(i=m,u=Date.now(),this.removeTargets(e,i,n))).next(m=>(o=m,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(f=Date.now(),oa()<=je.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${m} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:m})))}}function i3(t,e){return new n3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(){this.changes=new Ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Pu(i.mutation,r,hi.empty(),at.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ze()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ze()){const r=io();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=ru();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=io();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ze()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=vr();const a=Eu(),u=function(){return Eu()}();return n.forEach((h,f)=>{const g=i.get(f.key);r.has(f.key)&&(g===void 0||g.mutation instanceof bo)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),Pu(g.mutation,f,g.mutation.getFieldMask(),at.now())):a.set(f.key,hi.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,g)=>a.set(f,g)),n.forEach((f,g)=>u.set(f,new s3(g,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=Eu();let r=new yt((a,u)=>a-u),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let g=i.get(h)||hi.empty();g=u.applyToLocalView(f,g),i.set(h,g);const m=(r.get(u.batchId)||ze()).add(h);r=r.insert(u.batchId,m)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,m=vC();g.forEach(_=>{if(!o.has(_)){const T=SC(n.get(_),i.get(_));T!==null&&m.set(_,T),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,m))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ge.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):l4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(io());let u=Qu,h=o;return a.next(f=>K.forEach(f,(g,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),o.get(g)?K.resolve():this.remoteDocumentCache.getEntry(e,g).next(_=>{h=h.insert(g,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,ze())).next(g=>({batchId:u,changes:_C(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(i=>{let r=ru();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=ru();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(m,_){return new jf(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(g=>{g.forEach((m,_)=>{a=a.insert(m,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const g=f.getKey();a.get(g)===null&&(a=a.insert(g,tn.newInvalidDocument(g)))});let u=ru();return a.forEach((h,f)=>{const g=o.get(h);g!==void 0&&Pu(g.mutation,f,hi.empty(),at.now()),zf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Mi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:Q4(r.bundledQuery),readTime:Mi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.overlays=new yt(ge.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=io();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=io(),o=n.length+1,a=new ge(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new yt((f,g)=>f-g);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=io(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=io(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new C4(n,i));let o=this.qr.get(n);o===void 0&&(o=ze(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.Qr=new Dt(Ft.$r),this.Ur=new Dt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Ft(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ge(new ot([])),i=new Ft(n,e),r=new Ft(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ge(new ot([])),i=new Ft(n,e),r=new Ft(n,e+1);let o=ze();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Ft(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ge.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Dt(Ft.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new S4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new Ft(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?x_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ft(n,0),r=new Ft(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Dt(Fe);return n.forEach(r=>{const o=new Ft(r,0),a=new Ft(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ge.isDocumentKey(o)||(o=o.child(""));const a=new Ft(new ge(o),0);let u=new Dt(Fe);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new Ft(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Ft(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.ri=e,this.docs=function(){return new yt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let i=vr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():tn.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=vr();const a=n.path,u=new ge(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||FV(jV(g),i)<=0||(r.has(g.key)||zf(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){xe(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new d3(this)}getSize(e){return K.resolve(this.size)}}class d3 extends r3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.persistence=e,this.si=new Ao(n=>P_(n),S_),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new N_,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Of(0),this.li=!1,this.li=!0,this.hi=new u3,this.referenceDelegate=e(this),this.Pi=new f3(this),this.indexManager=new Y4,this.remoteDocumentCache=function(r){return new h3(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new K4(n),this.Ii=new a3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new l3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new c3(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){oe("MemoryPersistence","Starting transaction:",e);const r=new p3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class p3 extends BV{constructor(e){super(),this.currentSequenceNumber=e}}class L_{constructor(e){this.persistence=e,this.Ri=new N_,this.Vi=null}static mi(e){return new L_(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=ge.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class qd{constructor(e,n){this.persistence=e,this.pi=new Ao(i=>WV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=i3(this,n)}static mi(e,n){return new qd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Se.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=ze(),r=ze();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new M_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lD()?8:UV(rn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new m3;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(oa()<=je.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",aa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(oa()<=je.DEBUG&&oe("QueryEngine","Query:",aa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(oa()<=je.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",aa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(n))):K.resolve())}ys(e,n){if(bx(n))return K.resolve(null);let i=Ni(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Og(n,null,"F"),i=Ni(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ze(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Og(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return bx(n)||r.isEqual(Se.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(oa()<=je.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),aa(n)),this.vs(e,a,n,VV(r,Qu)).next(u=>u))})}Ds(e,n){let i=new Dt(gC(e));return n.forEach((r,o)=>{zf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return oa()<=je.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",aa(n)),this.ps.getDocumentsMatchingQuery(e,n,vs.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="LocalStore",y3=3e8;class _3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new yt(Fe),this.xs=new Ao(o=>P_(o),S_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function v3(t,e,n,i){return new _3(t,e,n,i)}async function FC(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=ze();for(const f of r){a.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function w3(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,g){const m=f.batch,_=m.keys();let T=K.resolve();return _.forEach(b=>{T=T.next(()=>g.getEntry(h,b)).next(R=>{const V=f.docVersions.get(b);Ye(V!==null,48541),R.version.compareTo(V)<0&&(m.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),g.addEntry(R)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,m))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function zC(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function x3(t,e){const n=Ae(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((g,m)=>{const _=r.get(m);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(o,g.addedDocuments,m)));let T=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(Gt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,i)),r=r.insert(m,T),function(R,V,k){return R.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=y3?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(_,T,g)&&u.push(n.Pi.updateTargetData(o,T))});let h=vr(),f=ze();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(T3(o,a,e.documentUpdates).next(g=>{h=g.ks,f=g.qs})),!i.isEqual(Se.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next(m=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(g)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function T3(t,e,n){let i=ze(),r=ze();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=vr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Se.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):oe(O_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function E3(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=x_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function P3(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Qr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function zg(t,e,n){const i=Ae(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!dl(a))throw a;oe(O_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Ux(t,e,n){const i=Ae(t);let r=Se.min(),o=ze();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,g){const m=Ae(h),_=m.xs.get(g);return _!==void 0?K.resolve(m.Ms.get(_)):m.Pi.getTargetData(f,g)}(i,a,Ni(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Se.min(),n?o:ze())).next(u=>(S3(i,c4(e),u),{documents:u,Qs:o})))}function S3(t,e,n){let i=t.Os.get(e)||Se.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Hx{constructor(){this.activeTargetIds=g4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class C3{constructor(){this.Mo=new Hx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="ConnectivityMonitor";class $x{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(Wx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(Wx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function Bg(){return Ch===null?Ch=function(){return 268435456+Math.round(2147483648*Math.random())}():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="RestConnection",A3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Fd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Bg(),u=this.zo(e,n.toUriEncodedString());oe(om,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),g=ll(f);return this.Jo(e,u,h,i,g).then(m=>(oe(om,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Ya(om,`RPC '${e}' ${a} failed with error: `,m,"url: ",u,"request:",i),m})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=A3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class R3 extends b3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Bg();return new Promise((u,h)=>{const f=new WS;f.setWithCredentials(!0),f.listenOnce($S.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case qh.NO_ERROR:const m=f.getResponseJson();oe(Yt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),u(m);break;case qh.TIMEOUT:oe(Yt,`RPC '${e}' ${a} timed out`),h(new de(Y.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:const _=f.getStatus();if(oe(Yt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const b=T==null?void 0:T.error;if(b&&b.status&&b.message){const R=function(k){const P=k.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(P)>=0?P:Y.UNKNOWN}(b.status);h(new de(R,b.message))}else h(new de(Y.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new de(Y.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{oe(Yt,`RPC '${e}' ${a} completed.`)}});const g=JSON.stringify(r);oe(Yt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",g,i,15)})}T_(e,n,i){const r=Bg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ZS(),u=GS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const g=o.join("");oe(Yt,`Creating RPC '${e}' stream ${r}: ${g}`,h);const m=a.createWebChannel(g,h);this.I_(m);let _=!1,T=!1;const b=new k3({Yo:V=>{T?oe(Yt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(_||(oe(Yt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),_=!0),oe(Yt,`RPC '${e}' stream ${r} sending:`,V),m.send(V))},Zo:()=>m.close()}),R=(V,k,P)=>{V.listen(k,C=>{try{P(C)}catch(z){setTimeout(()=>{throw z},0)}})};return R(m,iu.EventType.OPEN,()=>{T||(oe(Yt,`RPC '${e}' stream ${r} transport opened.`),b.o_())}),R(m,iu.EventType.CLOSE,()=>{T||(T=!0,oe(Yt,`RPC '${e}' stream ${r} transport closed`),b.a_(),this.E_(m))}),R(m,iu.EventType.ERROR,V=>{T||(T=!0,Ya(Yt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),b.a_(new de(Y.UNAVAILABLE,"The operation could not be completed")))}),R(m,iu.EventType.MESSAGE,V=>{var k;if(!T){const P=V.data[0];Ye(!!P,16349);const C=P,z=(C==null?void 0:C.error)||((k=C[0])==null?void 0:k.error);if(z){oe(Yt,`RPC '${e}' stream ${r} received error:`,z);const G=z.status;let B=function(N){const D=At[N];if(D!==void 0)return IC(D)}(G),A=z.message;B===void 0&&(B=Y.INTERNAL,A="Unknown error status: "+G+" with message "+z.message),T=!0,b.a_(new de(B,A)),m.close()}else oe(Yt,`RPC '${e}' stream ${r} received:`,P),b.u_(P)}}),R(u,qS.STAT_EVENT,V=>{V.stat===bg.PROXY?oe(Yt,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===bg.NOPROXY&&oe(Yt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t){return new O4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="PersistentStream";class UC{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new de(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(qx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(qx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N3 extends UC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=j4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?Mi(a.readTime):Se.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Fg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Mg(h)?{documents:B4(o,h)}:{query:U4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=kC(o,a.resumeToken);const f=Dg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=$d(o,a.snapshotVersion.toTimestamp());const f=Dg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=W4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Fg(this.serializer),n.removeTarget=e,this.q_(n)}}class L3 extends UC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=z4(e.writeResults,e.commitTime),i=Mi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Fg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>F4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{}class O3 extends M3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Vg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Y.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Vg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(Y.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class D3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_r(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="RemoteStore";class V3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{ko(this)&&(oe(vo,"Restarting streams for network reachability change."),await async function(h){const f=Ae(h);f.Ea.add(4),await yc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await $f(f)}(this))})}),this.Ra=new D3(i,r)}}async function $f(t){if(ko(t))for(const e of t.da)await e(!0)}async function yc(t){for(const e of t.da)await e(!1)}function HC(t,e){const n=Ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),F_(n)?j_(n):fl(n).O_()&&V_(n,e))}function D_(t,e){const n=Ae(t),i=fl(n);n.Ia.delete(e),i.O_()&&WC(n,e),n.Ia.size===0&&(i.O_()?i.L_():ko(n)&&n.Ra.set("Unknown"))}function V_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fl(t).Y_(e)}function WC(t,e){t.Va.Ue(e),fl(t).Z_(e)}function j_(t){t.Va=new R4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fl(t).start(),t.Ra.ua()}function F_(t){return ko(t)&&!fl(t).x_()&&t.Ia.size>0}function ko(t){return Ae(t).Ea.size===0}function $C(t){t.Va=void 0}async function j3(t){t.Ra.set("Online")}async function F3(t){t.Ia.forEach((e,n)=>{V_(t,e)})}async function z3(t,e){$C(t),F_(t)?(t.Ra.ha(e),j_(t)):t.Ra.set("Unknown")}async function B3(t,e,n){if(t.Ra.set("Online"),e instanceof bC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){oe(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gd(t,i)}else if(e instanceof Qh?t.Va.Ze(e):e instanceof AC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const i=await zC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(Gt.EMPTY_BYTE_STRING,g.snapshotVersion)),WC(o,h);const m=new Qr(g.target,h,f,g.sequenceNumber);V_(o,m)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){oe(vo,"Failed to raise snapshot:",i),await Gd(t,i)}}async function Gd(t,e,n){if(!dl(e))throw e;t.Ea.add(1),await yc(t),t.Ra.set("Offline"),n||(n=()=>zC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(vo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $f(t)})}function qC(t,e){return e().catch(n=>Gd(t,n,e))}async function qf(t){const e=Ae(t),n=Es(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:x_;for(;U3(e);)try{const r=await E3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,H3(e,r)}catch(r){await Gd(e,r)}GC(e)&&ZC(e)}function U3(t){return ko(t)&&t.Ta.length<10}function H3(t,e){t.Ta.push(e);const n=Es(t);n.O_()&&n.X_&&n.ea(e.mutations)}function GC(t){return ko(t)&&!Es(t).x_()&&t.Ta.length>0}function ZC(t){Es(t).start()}async function W3(t){Es(t).ra()}async function $3(t){const e=Es(t);for(const n of t.Ta)e.ea(n.mutations)}async function q3(t,e,n){const i=t.Ta.shift(),r=b_.from(i,e,n);await qC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await qf(t)}async function G3(t,e){e&&Es(t).X_&&await async function(i,r){if(function(a){return A4(a)&&a!==Y.ABORTED}(r.code)){const o=i.Ta.shift();Es(i).B_(),await qC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await qf(i)}}(t,e),GC(t)&&ZC(t)}async function Gx(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),oe(vo,"RemoteStore received new credentials");const i=ko(n);n.Ea.add(3),await yc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $f(n)}async function Z3(t,e){const n=Ae(t);e?(n.Ea.delete(2),await $f(n)):e||(n.Ea.add(2),await yc(n),n.Ra.set("Unknown"))}function fl(t){return t.ma||(t.ma=function(n,i,r){const o=Ae(n);return o.sa(),new N3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:j3.bind(null,t),t_:F3.bind(null,t),r_:z3.bind(null,t),H_:B3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),F_(t)?j_(t):t.Ra.set("Unknown")):(await t.ma.stop(),$C(t))})),t.ma}function Es(t){return t.fa||(t.fa=function(n,i,r){const o=Ae(n);return o.sa(),new L3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:W3.bind(null,t),r_:G3.bind(null,t),ta:$3.bind(null,t),na:q3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await qf(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(vo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new z_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B_(t,e){if(_r("AsyncQueue",`${e}: ${t}`),dl(t))return new de(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{static emptySet(e){return new Oa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ge.comparator(n.key,i.key):(n,i)=>ge.comparator(n.key,i.key),this.keyedMap=ru(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Oa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.ga=new yt(ge.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class nl{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new nl(e,n,Oa.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Q3{constructor(){this.queries=Kx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ae(n),o=r.queries;r.queries=Kx(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new de(Y.ABORTED,"Firestore shutting down"))}}function Kx(){return new Ao(t=>mC(t),Ff)}async function KC(t,e){const n=Ae(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new K3,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=B_(a,`Initialization of query '${aa(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&U_(n)}async function QC(t,e){const n=Ae(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Y3(t,e){const n=Ae(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&U_(n)}function X3(t,e,n){const i=Ae(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function U_(t){t.Ca.forEach(e=>{e.next()})}var Ug,Qx;(Qx=Ug||(Ug={})).Ma="default",Qx.Cache="cache";class YC{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new nl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ug.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.key=e}}class JC{constructor(e){this.key=e}}class J3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=gC(e),this.tu=new Oa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Zx,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,m)=>{const _=r.get(g),T=zf(this.query,m)?m:null,b=!!_&&this.mutatedKeys.has(_.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let V=!1;_&&T?_.data.isEqual(T.data)?b!==R&&(i.track({type:3,doc:T}),V=!0):this.su(_,T)||(i.track({type:2,doc:T}),V=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!_&&T?(i.track({type:0,doc:T}),V=!0):_&&!T&&(i.track({type:1,doc:_}),V=!0,(h||f)&&(u=!0)),V&&(T?(a=a.add(T),o=R?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((g,m)=>function(T,b){const R=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:V})}};return R(T)-R(b)}(g.type,m.type)||this.eu(g.doc,m.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new nl(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new JC(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new XC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const H_="SyncEngine";class e5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class t5{constructor(e){this.key=e,this.hu=!1}}class n5{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ao(u=>mC(u),Ff),this.Iu=new Map,this.Eu=new Set,this.du=new yt(ge.comparator),this.Au=new Map,this.Ru=new N_,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function i5(t,e,n=!0){const i=sI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await eI(i,e,n,!0),r}async function r5(t,e){const n=sI(t);await eI(n,e,!0,!1)}async function eI(t,e,n,i){const r=await P3(t.localStore,Ni(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await s5(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&HC(t.remoteStore,r),u}async function s5(t,e,n,i,r){t.pu=(m,_,T)=>async function(R,V,k,P){let C=V.view.ru(k);C.Cs&&(C=await Ux(R.localStore,V.query,!1).then(({documents:A})=>V.view.ru(A,C)));const z=P&&P.targetChanges.get(V.targetId),G=P&&P.targetMismatches.get(V.targetId)!=null,B=V.view.applyChanges(C,R.isPrimaryClient,z,G);return Xx(R,V.targetId,B.au),B.snapshot}(t,m,_,T);const o=await Ux(t.localStore,e,!0),a=new J3(e,o.Qs),u=a.ru(o.documents),h=gc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);Xx(t,n,f.au);const g=new e5(e,n,a);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function o5(t,e,n){const i=Ae(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Ff(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await zg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&D_(i.remoteStore,r.targetId),Hg(i,r.targetId)}).catch(hl)):(Hg(i,r.targetId),await zg(i.localStore,r.targetId,!0))}async function a5(t,e){const n=Ae(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),D_(n.remoteStore,i.targetId))}async function l5(t,e,n){const i=m5(t);try{const r=await function(a,u){const h=Ae(a),f=at.now(),g=u.reduce((T,b)=>T.add(b.key),ze());let m,_;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let b=vr(),R=ze();return h.Ns.getEntries(T,g).next(V=>{b=V,b.forEach((k,P)=>{P.isValidDocument()||(R=R.add(k))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,b)).next(V=>{m=V;const k=[];for(const P of u){const C=E4(P,m.get(P.key).overlayedDocument);C!=null&&k.push(new bo(P.key,C,lC(C.value.mapValue),Li.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,k,u)}).next(V=>{_=V;const k=V.applyToLocalDocumentSet(m,R);return h.documentOverlayCache.saveOverlays(T,V.batchId,k)})}).then(()=>({batchId:_.batchId,changes:_C(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new yt(Fe)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await _c(i,r.changes),await qf(i.remoteStore)}catch(r){const o=B_(r,"Failed to persist write");n.reject(o)}}async function tI(t,e){const n=Ae(t);try{const i=await x3(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Ye(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Ye(a.hu,14607):r.removedDocuments.size>0&&(Ye(a.hu,42227),a.hu=!1))}),await _c(n,i,e)}catch(i){await hl(i)}}function Yx(t,e,n){const i=Ae(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Ae(a);h.onlineState=u;let f=!1;h.queries.forEach((g,m)=>{for(const _ of m.Sa)_.va(u)&&(f=!0)}),f&&U_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function u5(t,e,n){const i=Ae(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new yt(ge.comparator);a=a.insert(o,tn.newNoDocument(o,Se.min()));const u=ze().add(o),h=new Hf(Se.min(),new Map,new yt(Fe),a,u);await tI(i,h),i.du=i.du.remove(o),i.Au.delete(e),W_(i)}else await zg(i.localStore,e,!1).then(()=>Hg(i,e,n)).catch(hl)}async function c5(t,e){const n=Ae(t),i=e.batch.batchId;try{const r=await w3(n.localStore,e);iI(n,i,null),nI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await _c(n,r)}catch(r){await hl(r)}}async function h5(t,e,n){const i=Ae(t);try{const r=await function(a,u){const h=Ae(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next(m=>(Ye(m!==null,37113),g=m.keys(),h.mutationQueue.removeMutationBatch(f,m))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>h.localDocuments.getDocuments(f,g))})}(i.localStore,e);iI(i,e,n),nI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await _c(i,r)}catch(r){await hl(r)}}function nI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function iI(t,e,n){const i=Ae(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Hg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||rI(t,i)})}function rI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(D_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),W_(t))}function Xx(t,e,n){for(const i of n)i instanceof XC?(t.Ru.addReference(i.key,e),d5(t,i)):i instanceof JC?(oe(H_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||rI(t,i.key)):xe(19791,{wu:i})}function d5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(oe(H_,"New document in limbo: "+n),t.Eu.add(i),W_(t))}function W_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ge(ot.fromString(e)),i=t.fu.next();t.Au.set(i,new t5(n)),t.du=t.du.insert(n,i),HC(t.remoteStore,new Qr(Ni(C_(n.path)),i,"TargetPurposeLimboResolution",Of.ce))}}async function _c(t,e,n){const i=Ae(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var g;if((f||n)&&i.isPrimaryClient){const m=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:g.current;i.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(f){r.push(f);const m=M_.As(h.targetId,f);o.push(m)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const g=Ae(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>K.forEach(f,_=>K.forEach(_.Es,T=>g.persistence.referenceDelegate.addReference(m,_.targetId,T)).next(()=>K.forEach(_.ds,T=>g.persistence.referenceDelegate.removeReference(m,_.targetId,T)))))}catch(m){if(!dl(m))throw m;oe(O_,"Failed to update sequence numbers: "+m)}for(const m of f){const _=m.targetId;if(!m.fromCache){const T=g.Ms.get(_),b=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(b);g.Ms=g.Ms.insert(_,R)}}}(i.localStore,o))}async function f5(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){oe(H_,"User change. New user:",e.toKey());const i=await FC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new de(Y.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await _c(n,i.Ls)}}function p5(t,e){const n=Ae(t),i=n.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let r=ze();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function sI(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u5.bind(null,e),e.Pu.H_=Y3.bind(null,e.eventManager),e.Pu.yu=X3.bind(null,e.eventManager),e}function m5(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=h5.bind(null,e),e}class Zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return v3(this.persistence,new g3,e.initialUser,this.serializer)}Cu(e){return new jC(L_.mi,this.serializer)}Du(e){return new C3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zd.provider={build:()=>new Zd};class g5 extends Zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof qd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new t3(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new jC(i=>qd.mi(i,n),this.serializer)}}class Wg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=f5.bind(null,this.syncEngine),await Z3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q3}()}createDatastore(e){const n=Wf(e.databaseInfo.databaseId),i=function(o){return new R3(o)}(e.databaseInfo);return function(o,a,u,h){return new O3(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new V3(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Yx(this.syncEngine,n,0),function(){return $x.v()?new $x:new I3}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,g){const m=new n5(r,o,a,u,h,f);return g&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ae(r);oe(vo,"RemoteStore shutting down."),o.Ea.add(5),await yc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Wg.provider={build:()=>new Wg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class y5{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Jt.UNAUTHENTICATED,this.clientId=v_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{oe(Ps,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(oe(Ps,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=B_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function lm(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await FC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _5(t);oe(Ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Gx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Gx(e.remoteStore,r)),t._onlineComponents=e}async function _5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Ps,"Using user provided OfflineComponentProvider");try{await lm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ya("Error using user provided cache. Falling back to memory cache: "+n),await lm(t,new Zd)}}else oe(Ps,"Using default OfflineComponentProvider"),await lm(t,new g5(void 0));return t._offlineComponents}async function aI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Ps,"Using user provided OnlineComponentProvider"),await Jx(t,t._uninitializedComponentsProvider._online)):(oe(Ps,"Using default OnlineComponentProvider"),await Jx(t,new Wg))),t._onlineComponents}function v5(t){return aI(t).then(e=>e.syncEngine)}async function $g(t){const e=await aI(t),n=e.eventManager;return n.onListen=i5.bind(null,e.syncEngine),n.onUnlisten=o5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=r5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=a5.bind(null,e.syncEngine),n}function w5(t,e,n={}){const i=new hs;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const g=new oI({next:_=>{g.Nu(),a.enqueueAndForget(()=>QC(o,m)),_.fromCache&&h.source==="server"?f.reject(new de(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),m=new YC(u,g,{includeMetadataChanges:!0,qa:!0});return KC(o,m)}(await $g(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="firestore.googleapis.com",t1=!0;class n1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uI,this.ssl=t1}else this.host=e.host,this.ssl=e.ssl??t1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<J4)throw new de(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new CV;switch(i.type){case"firstParty":return new kV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=e1.get(n);i&&(oe("ComponentProvider","Removing Datastore"),e1.delete(n),i.terminate())}(this),Promise.resolve()}}function x5(t,e,n,i={}){var f;t=hr(t,Gf);const r=ll(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(OS(`https://${u}`),DS("Firestore",!0)),o.host!==uI&&o.host!==u&&Ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!go(h,a)&&(t._setSettings(h),i.mockUserToken)){let g,m;if(typeof i.mockUserToken=="string")g=i.mockUserToken,m=Jt.MOCK_USER;else{g=JO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new de(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Jt(_)}t._authCredentials=new IV(new QS(g,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new vc(this.firestore,e,this._query)}}class Ot{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(pc(n,Ot._jsonSchema))return new Ot(e,i||null,new ge(ot.fromString(n.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Rt("string",Ot._jsonSchemaVersion),referencePath:Rt("string")};class ds extends vc{constructor(e,n,i){super(e,n,C_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new ge(e))}withConverter(e){return new ds(this.firestore,e,this._path)}}function Su(t,e,...n){if(t=Ln(t),YS("collection","path",e),t instanceof Gf){const i=ot.fromString(e,...n);return gx(i),new ds(t,null,i)}{if(!(t instanceof Ot||t instanceof ds))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ot.fromString(e,...n));return gx(i),new ds(t.firestore,null,i)}}function Ai(t,e,...n){if(t=Ln(t),arguments.length===1&&(e=v_.newId()),YS("doc","path",e),t instanceof Gf){const i=ot.fromString(e,...n);return mx(i),new Ot(t,null,new ge(i))}{if(!(t instanceof Ot||t instanceof ds))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ot.fromString(e,...n));return mx(i),new Ot(t.firestore,t instanceof ds?t.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="AsyncQueue";class r1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BC(this,"async_queue_retry"),this._c=()=>{const i=am();i&&oe(i1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new hs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dl(e))throw e;oe(i1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,_r("INTERNAL UNHANDLED ERROR: ",s1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=z_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&xe(47125,{Pc:s1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function s1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class il extends Gf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new r1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r1(e),this._firestoreClient=void 0,await e}}}function T5(t,e){const n=typeof t=="object"?t:zS(),i=typeof t=="string"?t:Fd,r=y_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=YO("firestore");o&&x5(r,...o)}return r}function $_(t){if(t._terminated)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||E5(t),t._firestoreClient}function E5(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,g){return new GV(u,h,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,lI(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new y5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Gt.fromBase64String(e))}catch(n){throw new de(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pc(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Rt("string",Kn._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(pc(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:Rt("string",Oi._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pc(e,Di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Di(e.vectorValues);throw new de(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:Rt("string",Di._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=/^__.*__$/;class S5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,n,this.fieldTransforms):new mc(e,this.data,n,this.fieldTransforms)}}function hI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:t})}}class G_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new G_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hI(this.Ac)&&P5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class C5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Wf(e)}Cc(e,n,i,r=!1){return new G_({Ac:e,methodName:n,Dc:i,path:Wt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function I5(t){const e=t._freezeSettings(),n=Wf(t._databaseId);return new C5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function A5(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);mI("Data must be an object, but it was:",a,i);const u=fI(i,a);let h,f;if(o.merge)h=new hi(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const g=[];for(const m of o.mergeFields){const _=b5(e,m,n);if(!a.contains(_))throw new de(Y.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);R5(g,_)||g.push(_)}h=new hi(g),f=a.fieldTransforms.filter(m=>h.covers(m.field))}else h=null,f=a.fieldTransforms;return new S5(new Zn(u),h,f)}function dI(t,e){if(pI(t=Ln(t)))return mI("Unsupported field value:",e,t),fI(t,e);if(t instanceof cI)return function(i,r){if(!hI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=dI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Ln(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return y4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=at.fromDate(i);return{timestampValue:$d(r.serializer,o)}}if(i instanceof at){const o=new at(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$d(r.serializer,o)}}if(i instanceof Oi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kn)return{bytesValue:kC(r.serializer,i._byteString)};if(i instanceof Ot){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:R_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Di)return function(a,u){return{mapValue:{fields:{[oC]:{stringValue:aC},[zd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return I_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${w_(i)}`)}(t,e)}function fI(t,e){const n={};return eC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(t,(i,r)=>{const o=dI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function pI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof Oi||t instanceof Kn||t instanceof Ot||t instanceof cI||t instanceof Di)}function mI(t,e,n){if(!pI(n)||!XS(n)){const i=w_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function b5(t,e,n){if((e=Ln(e))instanceof q_)return e._internalPath;if(typeof e=="string")return gI(t,e);throw Kd("Field path arguments must be of type string or ",t,!1,void 0,n)}const k5=new RegExp("[~\\*/\\[\\]]");function gI(t,e,n){if(e.search(k5)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new q_(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new de(Y.INVALID_ARGUMENT,u+t+h)}function R5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_I("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N5 extends yI{data(){return super.data()}}function _I(t,e){return typeof e=="string"?gI(t,e):e instanceof q_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L5{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Io(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[zd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>Tt(a.doubleValue));return new Di(n)}convertGeoPoint(e){return new Oi(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Vf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){const n=ws(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ot.fromString(e);Ye(DC(i),9688,{name:e});const r=new Xu(i.get(1),i.get(3)),o=new ge(i.popFirst(5));return r.isEqual(n)||_r(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class ou{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ao extends yI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(_I("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ao._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",ao._jsonSchema={type:Rt("string",ao._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Yh extends ao{data(e={}){return super.data(e)}}class lo{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ou(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Yh(this._firestore,this._userDataWriter,i.key,i,new ou(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new Yh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ou(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Yh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ou(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,g=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:O5(u.type),doc:h,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=v_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function O5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:t})}}lo._jsonSchemaVersion="firestore/querySnapshot/1.0",lo._jsonSchema={type:Rt("string",lo._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Z_ extends L5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function a1(t){t=hr(t,vc);const e=hr(t.firestore,il),n=$_(e),i=new Z_(e);return vI(t._query),w5(n,t._query).then(r=>new lo(e,i,t,r))}function nr(t,e,n){t=hr(t,Ot);const i=hr(t.firestore,il),r=M5(t.converter,e,n);return wI(i,[A5(I5(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Li.none())])}function um(t){return wI(hr(t.firestore,il),[new A_(t._key,Li.none())])}function cm(t,...e){var h,f,g;t=Ln(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||o1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(o1(e[i])){const m=e[i];e[i]=(h=m.next)==null?void 0:h.bind(m),e[i+1]=(f=m.error)==null?void 0:f.bind(m),e[i+2]=(g=m.complete)==null?void 0:g.bind(m)}let o,a,u;if(t instanceof Ot)a=hr(t.firestore,il),u=C_(t._key.path),o={next:m=>{e[i]&&e[i](D5(a,t,m))},error:e[i+1],complete:e[i+2]};else{const m=hr(t,vc);a=hr(m.firestore,il),u=m._query;const _=new Z_(a);o={next:T=>{e[i]&&e[i](new lo(a,_,m,T))},error:e[i+1],complete:e[i+2]},vI(t._query)}return function(_,T,b,R){const V=new oI(R),k=new YC(T,V,b);return _.asyncQueue.enqueueAndForget(async()=>KC(await $g(_),k)),()=>{V.Nu(),_.asyncQueue.enqueueAndForget(async()=>QC(await $g(_),k))}}($_(a),u,r,o)}function wI(t,e){return function(i,r){const o=new hs;return i.asyncQueue.enqueueAndForget(async()=>l5(await v5(i),r,o)),o.promise}($_(t),e)}function D5(t,e,n){const i=n.docs.get(e._key),r=new Z_(t);return new ao(t,r,e._key,i,new ou(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){cl=r})(ul),Qa(new yo("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new il(new AV(i.getProvider("auth-internal")),new RV(a,i.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(f.options.projectId,g)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),us(hx,dx,e),us(hx,dx,"esm2020")})();function xI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V5=xI,TI=new dc("auth","Firebase",xI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new m_("@firebase/auth");function j5(t,...e){Qd.logLevel<=je.WARN&&Qd.warn(`Auth (${ul}): ${t}`,...e)}function Xh(t,...e){Qd.logLevel<=je.ERROR&&Qd.error(`Auth (${ul}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,...e){throw K_(t,...e)}function Vi(t,...e){return K_(t,...e)}function EI(t,e,n){const i={...V5(),[e]:n};return new dc("auth","Firebase",i).create(e,{appName:t.name})}function fs(t){return EI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return TI.create(t,...e)}function Te(t,e,...n){if(!t)throw K_(e,...n)}function or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xh(e),new Error(e)}function xr(t,e){t||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function F5(){return l1()==="http:"||l1()==="https:"}function l1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F5()||sD()||"connection"in navigator)?navigator.onLine:!0}function B5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,xr(n>e,"Short delay should be less than long delay!"),this.isMobile=nD()||oD()}get(){return z5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e){xr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],W5=new wc(3e4,6e4);function Zf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function pl(t,e,n,i,r={}){return SI(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=fc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return rD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ll(t.emulatorConfig.host)&&(f.credentials="include"),PI.fetch()(await II(t,t.config.apiHost,n,u),f)})}async function SI(t,e,n){t._canInitEmulator=!1;const i={...U5,...e};try{const r=new $5(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Ih(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Ih(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Ih(t,"user-disabled",a);const g=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw EI(t,g,f);wr(t,g)}}catch(r){if(r instanceof Pr)throw r;wr(t,"network-request-failed",{message:String(r)})}}async function CI(t,e,n,i,r={}){const o=await pl(t,e,n,i,r);return"mfaPendingCredential"in o&&wr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function II(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?Q_(t.config,r):`${t.config.apiScheme}://${r}`;return H5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class $5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Vi(this.auth,"network-request-failed")),W5.get())})}}function Ih(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Vi(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(t,e){return pl(t,"POST","/v1/accounts:delete",e)}async function Yd(t,e){return pl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G5(t,e=!1){const n=Ln(t),i=await n.getIdToken(e),r=Y_(i);Te(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Cu(hm(r.auth_time)),issuedAtTime:Cu(hm(r.iat)),expirationTime:Cu(hm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function hm(t){return Number(t)*1e3}function Y_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const r=RS(n);return r?JSON.parse(r):(Xh("Failed to decode base64 JWT payload"),null)}catch(r){return Xh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function u1(t){const e=Y_(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Pr&&Z5(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Z5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(t){var m;const e=t.auth,n=await t.getIdToken(),i=await nc(t,Yd(e,{idToken:n}));Te(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(m=r.providerUserInfo)!=null&&m.length?AI(r.providerUserInfo):[],a=Y5(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Gg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function Q5(t){const e=Ln(t);await Xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y5(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function AI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t,e){const n=await SI(t,{},async()=>{const i=fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await II(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&ll(t.emulatorConfig.host)&&(h.credentials="include"),PI.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J5(t,e){return pl(t,"POST","/v2/accounts:revokeToken",Zf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=u1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await X5(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Da;return i&&(Te(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Te(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(Te(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class di{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new K5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Gg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await nc(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return G5(this,e)}reload(){return Q5(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new di({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Xd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(fs(this.auth));const e=await this.getIdToken();return await nc(this,q5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:m,emailVerified:_,isAnonymous:T,providerData:b,stsTokenManager:R}=n;Te(m&&R,e,"internal-error");const V=Da.fromJSON(this.name,R);Te(typeof m=="string",e,"internal-error"),Or(i,e.name),Or(r,e.name),Te(typeof _=="boolean",e,"internal-error"),Te(typeof T=="boolean",e,"internal-error"),Or(o,e.name),Or(a,e.name),Or(u,e.name),Or(h,e.name),Or(f,e.name),Or(g,e.name);const k=new di({uid:m,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:V,createdAt:f,lastLoginAt:g});return b&&Array.isArray(b)&&(k.providerData=b.map(P=>({...P}))),h&&(k._redirectEventId=h),k}static async _fromIdTokenResponse(e,n,i=!1){const r=new Da;r.updateFromServerResponse(n);const o=new di({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Xd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Te(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?AI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Da;u.updateFromIdToken(i);const h=new di({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Gg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;function ar(t){xr(t instanceof Function,"Expected a class definition");let e=c1.get(t);return e?(xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,c1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bI.type="NONE";const h1=bI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t,e,n){return`firebase:${t}:${e}:${n}`}class Va{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Jh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Jh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Yd(this.auth,{idToken:e}).catch(()=>{});return n?di._fromGetAccountInfoResponse(this.auth,n,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Va(ar(h1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||ar(h1);const a=Jh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(a);if(g){let m;if(typeof g=="string"){const _=await Yd(e,{idToken:g}).catch(()=>{});if(!_)break;m=await di._fromGetAccountInfoResponse(e,_,g)}else m=di._fromJSON(e,g);f!==o&&(u=m),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Va(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Va(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OI(e))return"Blackberry";if(DI(e))return"Webos";if(RI(e))return"Safari";if((e.includes("chrome/")||NI(e))&&!e.includes("edge/"))return"Chrome";if(MI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function kI(t=rn()){return/firefox\//i.test(t)}function RI(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NI(t=rn()){return/crios\//i.test(t)}function LI(t=rn()){return/iemobile/i.test(t)}function MI(t=rn()){return/android/i.test(t)}function OI(t=rn()){return/blackberry/i.test(t)}function DI(t=rn()){return/webos/i.test(t)}function X_(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ej(t=rn()){var e;return X_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function tj(){return aD()&&document.documentMode===10}function VI(t=rn()){return X_(t)||MI(t)||DI(t)||OI(t)||/windows phone/i.test(t)||LI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t,e=[]){let n;switch(t){case"Browser":n=d1(rn());break;case"Worker":n=`${d1(rn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ul}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(t,e={}){return pl(t,"GET","/v2/passwordPolicy",Zf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=6;class sj{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f1(this),this.idTokenSubscription=new f1(this),this.beforeStateQueue=new nj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Va.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Yd(this,{idToken:e}),i=await di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ci(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(fs(this));const n=e?Ln(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ij(this),n=new sj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await J5(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ar(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Va.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&j5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Kf(t){return Ln(t)}class f1{constructor(e){this.auth=e,this.observer=null,this.addObserver=mD(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aj(t){J_=t}function lj(t){return J_.loadJS(t)}function uj(){return J_.gapiScript}function cj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t,e){const n=y_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(go(o,e??{}))return r;wr(r,"already-initialized")}return n.initialize({options:e})}function dj(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function fj(t,e,n){const i=Kf(t);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=FI(e),{host:a,port:u}=pj(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},g=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(go(f,i.config.emulator)&&go(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,ll(a)?(OS(`${o}//${a}${h}`),DS("Auth",!0)):mj()}function FI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pj(t){const e=FI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:p1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:p1(a)}}}function p1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t,e){return CI(t,"POST","/v1/accounts:signInWithIdp",Zf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="http://localhost";class wo extends zI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new wo(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ja(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ja(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ja(e,n)}buildRequest(){const e={requestUri:gj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends BI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends xc{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wo._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Wr.credential(n,i)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends xc{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.GITHUB_SIGN_IN_METHOD="github.com";$r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends xc{constructor(){super("twitter.com")}static credential(e,n){return wo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return qr.credential(n,i)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t,e){return CI(t,"POST","/v1/accounts:signUp",Zf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await di._fromIdTokenResponse(e,i,r),a=m1(i);return new Ss({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=m1(i);return new Ss({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function m1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(t){var r;if(ci(t.app))return Promise.reject(fs(t));const e=Kf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new Ss({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await yj(e,{returnSecureToken:!0}),i=await Ss._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends Pr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Jd(e,n,i,r)}}function UI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(t,o,e,i):o})}async function vj(t,e,n=!1){const i=await nc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ss._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(t,e,n=!1){const{auth:i}=t;if(ci(i.app))return Promise.reject(fs(i));const r="reauthenticate";try{const o=await nc(t,UI(i,r,e,t),n);Te(o.idToken,i,"internal-error");const a=Y_(o.idToken);Te(a,i,"internal-error");const{sub:u}=a;return Te(t.uid===u,i,"user-mismatch"),Ss._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&wr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e,n=!1){if(ci(t.app))return Promise.reject(fs(t));const i="signIn",r=await UI(t,i,e),o=await Ss._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function Tj(t,e,n,i){return Ln(t).onIdTokenChanged(e,n,i)}function Ej(t,e,n){return Ln(t).beforeAuthStateChanged(e,n)}function Pj(t,e,n,i){return Ln(t).onAuthStateChanged(e,n,i)}const ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=1e3,Cj=10;class WI extends HI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);tj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Cj):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Sj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WI.type="LOCAL";const Ij=WI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I extends HI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$I.type="SESSION";const qI=$I;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Qf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await Aj(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=ev("",20);r.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(m){const _=m;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(){return window}function kj(t){ji().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function Rj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Lj(){return GI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firebaseLocalStorageDb",Mj=1,tf="firebaseLocalStorage",KI="fbase_key";class Tc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yf(t,e){return t.transaction([tf],e?"readwrite":"readonly").objectStore(tf)}function Oj(){const t=indexedDB.deleteDatabase(ZI);return new Tc(t).toPromise()}function Zg(){const t=indexedDB.open(ZI,Mj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(tf,{keyPath:KI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(tf)?e(i):(i.close(),await Oj(),e(await Zg()))})})}async function g1(t,e,n){const i=Yf(t,!0).put({[KI]:e,value:n});return new Tc(i).toPromise()}async function Dj(t,e){const n=Yf(t,!1).get(e),i=await new Tc(n).toPromise();return i===void 0?null:i.value}function y1(t,e){const n=Yf(t,!0).delete(e);return new Tc(n).toPromise()}const Vj=800,jj=3;class QI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>jj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(Lj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Rj(),!this.activeServiceWorker)return;this.sender=new bj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await g1(e,ef,"1"),await y1(e,ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>g1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Dj(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>y1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Yf(r,!1).getAll();return new Tc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QI.type="LOCAL";const Fj=QI;new wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t,e){return e?ar(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends zI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ja(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ja(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Bj(t){return xj(t.auth,new tv(t),t.bypassAuthState)}function Uj(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),wj(n,new tv(t),t.bypassAuthState)}async function Hj(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),vj(n,new tv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bj;case"linkViaPopup":case"linkViaRedirect":return Hj;case"reauthViaPopup":case"reauthViaRedirect":return Uj;default:wr(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=new wc(2e3,1e4);class Ia extends YI{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Ia.currentPopupAction&&Ia.currentPopupAction.cancel(),Ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wj.get())};e()}}Ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="pendingRedirect",ed=new Map;class qj extends YI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ed.get(this.auth._key());if(!e){try{const i=await Gj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ed.set(this.auth._key(),e)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Gj(t,e){const n=Qj(e),i=Kj(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Zj(t,e){ed.set(t._key(),e)}function Kj(t){return ar(t._redirectPersistence)}function Qj(t){return Jh($j,t.config.apiKey,t.name)}async function Yj(t,e,n=!1){if(ci(t.app))return Promise.reject(fs(t));const i=Kf(t),r=zj(i,e),a=await new qj(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=10*60*1e3;class Jj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!XI(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Vi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Xj&&this.cachedEventUids.clear(),this.cachedEventUids.has(_1(e))}saveEventToCache(e){this.cachedEventUids.add(_1(e)),this.lastProcessedEventTime=Date.now()}}function _1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e={}){return pl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i6=/^https?/;async function r6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t6(t);for(const n of e)try{if(s6(n))return}catch{}wr(t,"unauthorized-domain")}function s6(t){const e=qg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!i6.test(n))return!1;if(n6.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=new wc(3e4,6e4);function v1(){const t=ji().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function a6(t){return new Promise((e,n)=>{var r,o,a;function i(){v1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v1(),n(Vi(t,"network-request-failed"))},timeout:o6.get()})}if((o=(r=ji().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=ji().gapi)!=null&&a.load)i();else{const u=cj("iframefcb");return ji()[u]=()=>{gapi.load?i():n(Vi(t,"network-request-failed"))},lj(`${uj()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw td=null,e})}let td=null;function l6(t){return td=td||a6(t),td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=new wc(5e3,15e3),c6="__/auth/iframe",h6="emulator/auth/iframe",d6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p6(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Q_(e,h6):`https://${t.config.authDomain}/${c6}`,i={apiKey:e.apiKey,appName:t.name,v:ul},r=f6.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${fc(i).slice(1)}`}async function m6(t){const e=await l6(t),n=ji().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:p6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d6,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Vi(t,"network-request-failed"),u=ji().setTimeout(()=>{o(a)},u6.get());function h(){ji().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y6=500,_6=600,v6="_blank",w6="http://localhost";class w1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x6(t,e,n,i=y6,r=_6){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...g6,width:i.toString(),height:r.toString(),top:o,left:a},f=rn().toLowerCase();n&&(u=NI(f)?v6:n),kI(f)&&(e=e||w6,h.scrollbars="yes");const g=Object.entries(h).reduce((_,[T,b])=>`${_}${T}=${b},`,"");if(ej(f)&&u!=="_self")return T6(e||"",u),new w1(null);const m=window.open(e||"",u,g);Te(m,t,"popup-blocked");try{m.focus()}catch{}return new w1(m)}function T6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="__/auth/handler",P6="emulator/auth/handler",S6=encodeURIComponent("fac");async function x1(t,e,n,i,r,o){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ul,eventId:r};if(e instanceof BI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",pD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,m]of Object.entries({}))a[g]=m}if(e instanceof xc){const g=e.getScopes().filter(m=>m!=="");g.length>0&&(a.scopes=g.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await t._getAppCheckToken(),f=h?`#${S6}=${encodeURIComponent(h)}`:"";return`${C6(t)}?${fc(u).slice(1)}${f}`}function C6({config:t}){return t.emulator?Q_(t,P6):`https://${t.authDomain}/${E6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="webStorageSupport";class I6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qI,this._completeRedirectFn=Yj,this._overrideRedirectResult=Zj}async _openPopup(e,n,i,r){var a;xr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await x1(e,n,i,qg(),r);return x6(e,o,ev())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await x1(e,n,i,qg(),r);return kj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(xr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await m6(e),i=new Jj(e);return n.register("authEvent",r=>(Te(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dm,{type:dm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[dm];o!==void 0&&n(!!o),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VI()||RI()||X_()}}const A6=I6;var T1="@firebase/auth",E1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R6(t){Qa(new yo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;Te(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jI(t)},f=new oj(i,r,o,h);return dj(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Qa(new yo("auth-internal",e=>{const n=Kf(e.getProvider("auth").getImmediate());return(i=>new b6(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),us(T1,E1,k6(t)),us(T1,E1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=5*60,L6=MS("authIdTokenMaxAge")||N6;let P1=null;const M6=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>L6)return;const r=n==null?void 0:n.token;P1!==r&&(P1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function O6(t=zS()){const e=y_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hj(t,{popupRedirectResolver:A6,persistence:[Fj,Ij,qI]}),i=MS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=M6(o.toString());Ej(n,a,()=>a(n.currentUser)),Tj(n,u=>a(u))}}const r=NS("auth");return r&&fj(n,`http://${r}`),n}function D6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}aj({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Vi("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",D6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R6("Browser");var V6="firebase",j6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(V6,j6,"app");const F6={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},JI=FS(F6),cn=T5(JI),S1=O6(JI),nf={palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},z6="vysocany",eA=nf[z6].center,tA=15,B6=13,U6=18,C1={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},ps=["red","blue"],nA={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},I1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],Xs=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function Fa(t){var e;return((e=nA[t.size])==null?void 0:e.points)||100}function H6(t,e=.008){const n={};ps.forEach(r=>n[r]=[]);const i={};return ps.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),ps.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],g=o[h],m=`${f.id}-${g.id}`,_=f.location[0]-g.location[0],T=(f.location[1]-g.location[1])*1.6,b=Math.sqrt(_*_+T*T);b<=e&&!a.has(m)&&(a.add(m),n[r].push({from:f.location,to:g.location,distance:b}))}}),n}function ca(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function iA(t){const e={};return ps.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=Fa(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const rA=O.createContext(null),Wn={player:"streetart-ctf-player",captures:"streetart-ctf-captures",discoveries:"streetart-discoveries",gameMode:"streetart-game-mode"},Ah={SOLO:"solo",TEAM:"team"},bh="streetart-captures",A1="streetart-players",W6="streetart-teams",st={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function Ql(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function Yl(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function $6({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0),[o,a]=O.useState(()=>Ql(Wn.gameMode,Ah.SOLO)),[u,h]=O.useState(()=>Ql(Wn.discoveries,{})),[f,g]=O.useState(()=>Ql(Wn.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,totalDistance:0,lastCaptureTime:null,lastCaptureLocation:null,captureCount:0,recaptureCount:0,firstCaptureCount:0,discoveryCount:0,uniqueAreasVisited:[]})),[m,_]=O.useState(()=>{const ie=Ql(Wn.captures,{});return Xs.map(he=>({...he,capturedBy:ie[he.id]||null}))}),[T,b]=O.useState(null),[R,V]=O.useState(!1),[k,P]=O.useState(null);O.useEffect(()=>{const ie=Pj(S1,he=>{he?(n(he),g(_e=>({..._e,id:he.uid}))):_j(S1).catch(_e=>{console.log("Auth not available, using local mode")})});return()=>ie()},[]);const[C,z]=O.useState(null),[G,B]=O.useState([]),A=O.useRef({});O.useEffect(()=>{let ie=!0;const he=Su(cn,bh),_e=cm(he,Ie=>{const me={},be={},St=[];Ie.forEach(ye=>{var ut,Le,Be,Sn;const ke=ye.data();if(ke.status&&(be[ye.id]=ke.status),ke.capturedBy){me[ye.id]={team:ke.capturedBy,playerName:ke.playerName||"Unknown",capturedAt:((Le=(ut=ke.capturedAt)==null?void 0:ut.toDate)==null?void 0:Le.call(ut))||null};const ei=Xs.find(Rs=>Rs.id===ye.id);St.push({id:ye.id,artName:(ei==null?void 0:ei.name)||ye.id,area:(ei==null?void 0:ei.area)||"Unknown",team:ke.capturedBy,playerName:ke.playerName||"Unknown",capturedAt:((Sn=(Be=ke.capturedAt)==null?void 0:Be.toDate)==null?void 0:Sn.call(Be))||new Date,points:ke.points||100,isRecapture:ke.isRecapture||!1})}});const _t=St.sort((ye,ke)=>ke.capturedAt-ye.capturedAt).slice(0,10);B(_t),ie||Ie.docChanges().forEach(ye=>{var ke;if(ye.type==="added"||ye.type==="modified"){const ut=ye.doc.data(),Le=(ke=A.current[ye.doc.id])==null?void 0:ke.team;if(ut.capturedBy&&Le!==ut.capturedBy){const Be=Xs.find(Sn=>Sn.id===ye.doc.id);Be&&(z({artName:Be.name,team:ut.capturedBy,playerName:ut.playerName||"Someone",points:ut.points||Fa(Be),streak:ut.streak||0,isRecapture:ut.isRecapture||!!Le,timestamp:Date.now()}),setTimeout(()=>z(null),4e3))}}}),ie=!1,A.current=me,_(Xs.map(ye=>{const ke=me[ye.id];return{...ye,capturedBy:(ke==null?void 0:ke.team)||null,capturedByPlayer:(ke==null?void 0:ke.playerName)||null,capturedAt:(ke==null?void 0:ke.capturedAt)||null,status:be[ye.id]||ye.status}})),Yl(Wn.captures,me),r(!0),console.log("Firebase: Synced",Object.keys(me).length,"captures")},Ie=>{console.warn("Firestore sync error:",Ie),r(!1)});return()=>_e()},[]);const[S,N]=O.useState({red:0,blue:0});O.useEffect(()=>{const ie=Su(cn,W6),he=cm(ie,_e=>{const Ie={red:0,blue:0};_e.forEach(me=>{const be=me.data();(me.id==="red"||me.id==="blue")&&(Ie[me.id]=be.score||0)}),N(Ie),console.log("Team scores:",Ie)});return()=>he()},[]);const[D,j]=O.useState([]);O.useEffect(()=>{const ie=Su(cn,A1),he=cm(ie,_e=>{const Ie=[];_e.forEach(me=>{const be=me.data();be.name&&be.team&&Ie.push({id:me.id,name:be.name,team:be.team,score:be.score||0,captures:be.captures||0})}),j(Ie.sort((me,be)=>be.score-me.score)),console.log("Players loaded:",Ie.length)});return()=>he()},[]),O.useEffect(()=>{Yl(Wn.player,f)},[f]);const U=O.useCallback(async(ie,he)=>{if(i)try{await nr(Ai(cn,bh,ie),{artId:ie,capturedBy:he.team,capturedAt:new Date,playerId:f.id,playerName:f.name,points:he.points,streak:he.streak,isFirstCapture:he.isFirstCapture,isRecapture:he.isRecapture})}catch(_e){console.warn("Failed to sync capture to Firebase:",_e)}},[i,f.id,f.name]);O.useCallback(async ie=>{if(i)try{await nr(Ai(cn,bh,"global"),ie,{merge:!0})}catch(he){console.warn("Failed to sync to Firebase:",he)}},[i]);const M=iA(m),X={red:Math.max(S.red,M.red),blue:Math.max(S.blue,M.blue)},We=O.useCallback(async ie=>{if(ps.includes(ie)&&(g(he=>({...he,team:ie})),i&&f.id))try{await nr(Ai(cn,A1,f.id),{name:f.name,team:ie,score:f.score||0,captures:f.captureCount||0,joinedAt:new Date},{merge:!0})}catch(he){console.warn("Failed to sync player to Firebase:",he)}},[i,f.id,f.name,f.score,f.captureCount]),pe=O.useCallback(ie=>{g(he=>({...he,name:ie}))},[]),Ze=O.useCallback((ie,he,_e=50)=>{let Ie=null,me=1/0;return m.forEach(be=>{const St=(be.location[0]-ie)*111e3,_t=(be.location[1]-he)*111e3*Math.cos(ie*Math.PI/180),ye=Math.sqrt(St*St+_t*_t);ye<me&&ye<=_e&&(me=ye,Ie={...be,distance:Math.round(ye)})}),Ie},[m]),Z=O.useCallback((ie,he,_e,Ie)=>{const me=(_e-ie)*111e3,be=(Ie-he)*111e3*Math.cos(ie*Math.PI/180);return Math.sqrt(me*me+be*be)},[]),ce=O.useCallback((ie,he,_e=null)=>{const Ie=Fa(ie),me=[];let be=Ie;const St=ie.capturedBy&&ie.capturedBy!==he.team,_t=!ie.capturedBy,ye=Date.now(),ke=he.lastCaptureTime?(ye-he.lastCaptureTime)/1e3/60:1/0,ut=he.streak||0;if(ut>0){const Le=Math.min(ut*.1,1),Be=Math.round(Ie*Le);Be>0&&(be+=Be,me.push({type:"streak",label:` ${ut}x Streak`,points:Be}))}if(St){const Le=Math.round(Ie*.5);be+=Le,me.push({type:"recapture",label:" Recapture",points:Le})}if(_t){const Le=Math.round(Ie*.25);be+=Le,me.push({type:"first",label:" First Capture",points:Le})}if(ke<5){const Le=Math.round(Ie*.2);be+=Le,me.push({type:"speed",label:" Speed Bonus",points:Le})}if(_e&&he.lastCaptureLocation){const Le=Z(he.lastCaptureLocation[0],he.lastCaptureLocation[1],_e[0],_e[1]);if(Le>50){const Be=Math.min(Math.round(Le/100)*5,50);Be>0&&(be+=Be,me.push({type:"distance",label:` ${Math.round(Le)}m walked`,points:Be}))}}return{basePoints:Ie,totalPoints:be,bonuses:me,isRecapture:St,isFirstCapture:_t}},[Z]),ee=O.useCallback((ie,he=null)=>{if(!f.team)return{success:!1,message:"Join a team first!"};const _e=m.find(ye=>ye.id===ie);if(!_e)return{success:!1,message:"Art not found"};if(_e.capturedBy===f.team)return{success:!1,message:"Already yours!"};if(_e.status==="ghost")return{success:!1,message:"This art no longer exists"};const Ie=he||_e.location,me=ce(_e,f,Ie),be=_e.capturedBy;_(ye=>ye.map(ke=>ke.id===ie?{...ke,capturedBy:f.team}:ke));const St=f.streak+1;g(ye=>({...ye,score:ye.score+me.totalPoints,capturedArt:[...ye.capturedArt.filter(ke=>ke!==ie),ie],streak:St,maxStreak:Math.max(ye.maxStreak,St),lastCaptureTime:Date.now(),lastCaptureLocation:Ie,captureCount:ye.captureCount+1,recaptureCount:me.isRecapture?ye.recaptureCount+1:ye.recaptureCount,firstCaptureCount:me.isFirstCapture?ye.firstCaptureCount+1:ye.firstCaptureCount,totalDistance:ye.totalDistance+(he&&ye.lastCaptureLocation?Z(ye.lastCaptureLocation[0],ye.lastCaptureLocation[1],he[0],he[1]):0)})),U(ie,{team:f.team,points:me.totalPoints,streak:St,isFirstCapture:me.isFirstCapture,isRecapture:me.isRecapture});const _t=Ql(Wn.captures,{});return Yl(Wn.captures,{..._t,[ie]:f.team}),{success:!0,art:_e,points:me.totalPoints,basePoints:me.basePoints,bonuses:me.bonuses,streak:St,previousTeam:be,message:be?`Stolen from ${be}!`:"Captured!"}},[f,m,U,ce,Z]),ne=O.useCallback(async(ie,he)=>{V(!0);const _e=Ze(he.lat,he.lng,100);if(!_e){V(!1),b({success:!1,message:"No street art nearby. Get closer!"});return}P({art:_e,photo:ie,location:he}),V(!1)},[Ze]),Ce=O.useCallback(()=>{if(!k)return;const ie=ee(k.art.id);b(ie),P(null)},[k,ee]),et=O.useCallback(()=>{P(null),b(null)},[]),Me=O.useCallback(ie=>{(ie===Ah.SOLO||ie===Ah.TEAM)&&(a(ie),Yl(Wn.gameMode,ie))},[]),Re=O.useCallback(async(ie,he=null)=>{const _e=m.find(_t=>_t.id===ie);if(!_e)return{success:!1,message:"Art not found"};if(u[ie])return{success:!1,message:"Already discovered!",alreadyDiscovered:!0};const Ie=new Date,me={artId:ie,artName:_e.name,area:_e.area,size:_e.size,points:Fa(_e),discoveredAt:Ie.toISOString(),location:he||_e.location},be={...u,[ie]:me};h(be),Yl(Wn.discoveries,be);const St=new Set([...f.uniqueAreasVisited,_e.area]);if(g(_t=>({..._t,score:_t.score+me.points,discoveryCount:_t.discoveryCount+1,uniqueAreasVisited:[...St],lastCaptureTime:Ie.getTime(),lastCaptureLocation:he||_e.location})),i&&f.id)try{await nr(Ai(cn,"streetart-discoveries",`${f.id}_${ie}`),{...me,playerId:f.id,playerName:f.name})}catch(_t){console.warn("Failed to sync discovery to Firebase:",_t)}return{success:!0,message:"Discovered!",discovery:me}},[m,u,f,i]),fe=O.useCallback(async()=>{if(localStorage.removeItem(Wn.player),localStorage.removeItem(Wn.captures),e&&i)try{await nr(Ai(cn,bh,"global"),{})}catch(ie){console.warn("Failed to reset Firebase:",ie)}g({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),_(Xs.map(ie=>({...ie,capturedBy:null}))),b(null),P(null)},[e,i]),ht={player:f,artPoints:m,teamScores:X,globalTeamScores:S,allPlayers:D,recentCaptures:G,captureNotification:C,scanResult:T,isScanning:R,pendingCapture:k,isOnline:i,teams:ps,gameMode:o,discoveries:u,discoveryCount:Object.keys(u).length,setGameMode:Me,joinTeam:We,setPlayerName:pe,captureArt:ee,discoverArt:Re,startCapture:ne,confirmCapture:Ce,cancelCapture:et,findNearestArt:Ze,setScanResult:b,resetAll:fe,TEAM_COLORS:st,GAME_MODES:Ah};return w.jsx(rA.Provider,{value:ht,children:t})}function Bi(){const t=O.useContext(rA);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ne=(t,e)=>{const n=O.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},g)=>O.createElement("svg",{ref:g,...q6,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${G6(t)}`,u].join(" "),...f},[...e.map(([m,_])=>O.createElement(m,_)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=Ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=Ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=Ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=Ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=Ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=Ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=Ne("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=Ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=Ne("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=Ne("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=Ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=Ne("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Ne("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=Ne("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=Ne("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=Ne("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=Ne("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=Ne("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Ne("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=Ne("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=Ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=Ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=Ne("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=Ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=Ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Ne("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=Ne("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=Ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=Ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=Ne("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=Ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=Ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=Ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=Ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=Ne("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=Ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=Ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Ne("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),wF=51,xF=24;function uA({size:t=120,className:e=""}){const[n,i]=O.useState(0);O.useEffect(()=>{const a=setInterval(()=>{i(u=>(u+1)%wF)},1e3/xF);return()=>clearInterval(a)},[]);const r=String(n).padStart(5,"0");return w.jsx("img",{src:`/street-art-ctf/animation/frame_${r}.png`,alt:"Loading",width:t,height:t,className:e,style:{imageRendering:"pixelated",objectFit:"contain"}})}const L1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],M1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function O1(){const t=L1[Math.floor(Math.random()*L1.length)],e=M1[Math.floor(Math.random()*M1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function TF(){const t=Pf(),{player:e,joinTeam:n,setPlayerName:i,allPlayers:r}=Bi(),[o,a]=O.useState(0),[u,h]=O.useState(()=>e.name&&e.name!=="Street Artist"?e.name:O1()),[f,g]=O.useState(null);O.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]),O.useEffect(()=>{const V=r.filter(C=>C.team==="red").length,k=r.filter(C=>C.team==="blue").length,P=V<k?"red":k<V?"blue":Math.random()<.5?"red":"blue";g(P)},[r]);const m=()=>{h(O1())},_=()=>{if(o===1&&u.trim()&&(i(u.trim()),f&&n(f)),o===3){t("/map");return}a(o+1)},T=()=>o===1?u.trim().length>=2&&f:!0,b=f==="red"?"#ff6b6b":"#4dabf7",R=f==="red"?"Red":"Blue";return w.jsxs("div",{className:"h-screen bg-[#0a0a0f] flex flex-col overflow-hidden",children:[w.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:[0,1,2,3].map(V=>w.jsx("div",{className:`h-1.5 rounded-sm transition-all duration-300 ${V===o?"bg-white w-8":V<o?"bg-white/60 w-1.5":"bg-white/20 w-1.5"}`},V))}),w.jsxs(Ma,{mode:"wait",children:[o===0&&w.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx(re.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},className:"mb-6",children:w.jsx(uA,{size:140})}),w.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Street Art CTF"}),w.jsx("p",{className:"text-white/40 max-w-xs mb-8",children:"Scan real street art to capture territory for your team. The city is your battlefield."}),w.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(b1,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Scan Art"}),w.jsx("div",{className:"text-xs text-white/40",children:"Find and capture street art"})]})]}),w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(oA,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Control Territory"}),w.jsx("div",{className:"text-xs text-white/40",children:"Expand your team's area"})]})]}),w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(rf,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Win Together"}),w.jsx("div",{className:"text-xs text-white/40",children:"Lead your team to victory"})]})]})]})]},"intro"),o===1&&w.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"What's your name?"}),w.jsx("p",{className:"text-white/40 mb-8",children:"This is how others will see you"}),w.jsx("div",{className:"w-full max-w-xs mb-4",children:w.jsx("input",{type:"text",value:u,onChange:V=>h(V.target.value),placeholder:"Enter your name...",maxLength:20,className:"w-full px-4 py-4 rounded-lg bg-white/5 border border-white/10 text-center text-xl font-medium placeholder:text-white/30 focus:outline-none focus:border-white/30"})}),w.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white/50 hover:bg-white/10 transition-colors",children:[w.jsx(lA,{size:16}),"Generate random name"]})]},"name"),o===2&&w.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative overflow-hidden",children:[w.jsx(re.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:.15},transition:{delay:.3,duration:.8},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:w.jsx("div",{className:"w-[600px] h-[600px] rounded-full blur-3xl",style:{backgroundColor:b}})}),w.jsxs(re.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:200},className:"relative z-10",children:[w.jsxs(re.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-white/50 text-lg mb-2",children:["Welcome, ",u,"!"]}),w.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-white/40 text-sm mb-6",children:"You've been assigned to"}),w.jsx(re.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.8,type:"spring",stiffness:200},children:w.jsxs("h1",{className:"text-6xl font-bold mb-4",style:{color:b},children:["Team ",R]})}),w.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"text-white/30 text-sm",children:f==="red"?"The Flames ":"The Waves "})]})]},"team-reveal"),o===3&&w.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"How to Play"}),w.jsx("p",{className:"text-white/40 mb-8 text-sm",children:"Explore, discover, and compete!"}),w.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[w.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(b1,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Find & Scan"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Explore Prague to find street art. Point your camera at it to capture."})]})]}),w.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500/30 to-emerald-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(dF,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Build Your Collection"}),w.jsxs("p",{className:"text-sm text-white/50 leading-relaxed",children:["Every discovery is ",w.jsx("strong",{className:"text-white/70",children:"yours forever"}),". Build a personal portfolio."]})]})]}),w.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500/30 to-orange-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(sv,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Compete for Territory"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Capture points for your team. Territory can change hands - keep exploring!"})]})]})]})]},"tutorial")]}),w.jsx("div",{className:"p-4 pb-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:w.jsxs(re.button,{whileTap:{scale:.98},onClick:_,disabled:!T(),className:`w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition-all ${T()?"bg-white text-black":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:[o===3?"Let's Go!":"Continue",w.jsx(Q6,{size:20})]})})]})}const EF="/street-art-ctf/chumper.png",PF=[{color:"red",name:"Red Team"},{color:"blue",name:"Blue Team"}];function SF(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"just now";const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const i=Math.floor(n/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function CF(){const{player:t,joinTeam:e,teamScores:n,recentCaptures:i,isOnline:r}=Bi(),o=f=>{e(f)},a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},u={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},h=Object.values(n).reduce((f,g)=>f+g,0);return w.jsxs(re.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:a,children:[w.jsxs(re.div,{className:"text-center mb-6",variants:u,children:[w.jsx(re.div,{className:"relative inline-block mb-3",animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:w.jsx(uA,{size:70})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Street Art CTF"}),w.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] ${r?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[r?w.jsx(J6,{size:10}):w.jsx(yF,{size:10}),r?"Live":"Offline"]})]}),w.jsxs(re.div,{variants:u,className:"mb-6",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("span",{className:"text-xs text-white/40",children:"Red Team"}),w.jsx("span",{className:"text-xs text-white/40",children:"Blue Team"})]}),w.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-white/10",children:[w.jsx(re.div,{className:"h-full",style:{backgroundColor:st.red.hex},initial:{width:"50%"},animate:{width:h>0?`${n.red/h*100}%`:"50%"},transition:{duration:.8}}),w.jsx(re.div,{className:"h-full",style:{backgroundColor:st.blue.hex},initial:{width:"50%"},animate:{width:h>0?`${n.blue/h*100}%`:"50%"},transition:{duration:.8}})]}),w.jsxs("div",{className:"flex items-center justify-between mt-2",children:[w.jsxs("span",{className:"text-sm font-bold",style:{color:st.red.hex},children:[n.red," pts"]}),w.jsxs("span",{className:"text-sm font-bold",style:{color:st.blue.hex},children:[n.blue," pts"]})]})]}),t.team?w.jsx(re.div,{className:"mb-6 p-4 rounded-xl border-2",variants:u,style:{borderColor:st[t.team].hex+"50",backgroundColor:st[t.team].hex+"10"},children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:st[t.team].hex+"30"},children:w.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:st[t.team].hex}})}),w.jsxs("div",{children:[w.jsx("p",{className:"font-bold text-white",children:t.name}),w.jsx("p",{className:"text-xs",style:{color:st[t.team].hex},children:t.team==="red"?"Red Team":"Blue Team"})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),w.jsx("p",{className:"text-[10px] text-white/40",children:"points"})]})]})}):w.jsxs(re.div,{variants:u,className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(rf,{size:14,className:"text-white/40"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),w.jsx("div",{className:"grid grid-cols-2 gap-3",children:PF.map(({color:f,name:g})=>w.jsxs(re.button,{onClick:()=>o(f),className:"p-4 rounded-xl text-center border-2 transition-all",style:{borderColor:st[f].hex+"50",backgroundColor:st[f].hex+"10"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[w.jsx("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:st[f].hex+"30"},children:w.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:st[f].hex}})}),w.jsx("p",{className:"font-semibold text-white",children:g})]},f))})]}),w.jsxs(re.div,{variants:u,children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(X6,{size:14,className:"text-white/40"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Live Activity"})]}),i.length===0?w.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:"No captures yet. Be the first!"}):w.jsx("div",{className:"space-y-2",children:i.map((f,g)=>{var _;const m=((_=st[f.team])==null?void 0:_.hex)||"#888";return w.jsxs(re.div,{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.05},children:[w.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${m}20`},children:w.jsx("img",{src:EF,alt:"",className:"w-5 h-5",style:{filter:f.team==="red"?"hue-rotate(160deg) saturate(1.5)":"none"}})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm font-medium text-white truncate",children:f.artName}),w.jsxs("p",{className:"text-[10px] text-white/40",children:[w.jsx("span",{style:{color:m},children:f.playerName}),"  ",f.area]})]}),w.jsxs("div",{className:"text-right flex-shrink-0",children:[w.jsxs("p",{className:"text-xs font-semibold",style:{color:m},children:["+",f.points]}),w.jsx("p",{className:"text-[10px] text-white/30",children:SF(f.capturedAt)})]})]},f.id)})})]})]})}function IF(t,e){const n=O.useRef(e);O.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function AF(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const bF=1;function kF(t){return Object.freeze({__version:bF,map:t})}function Xf(t,e){return Object.freeze({...t,...e})}const cA=O.createContext(null),hA=cA.Provider;function ov(){const t=O.useContext(cA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function dA(t){function e(n,i){const{instance:r,context:o}=t(n).current;return O.useImperativeHandle(i,()=>r),n.children==null?null:uo.createElement(hA,{value:o},n.children)}return O.forwardRef(e)}function RF(t){function e(n,i){const{instance:r}=t(n).current;return O.useImperativeHandle(i,()=>r),null}return O.forwardRef(e)}function fA(t,e){const n=O.useRef();O.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function av(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Kg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(ZA,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,E,F;return F=function(){p=!1,v&&(E.apply(d,v),v=!1)},E=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(F,l),p=!0)},E}function g(s,l,d){var p=l[1],v=l[0],E=p-v;return s===p&&d?s:((s-v)%E+E)%E+v}function m(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function b(s){return T(s).split(/\s+/)}function R(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function V(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function P(s,l){return s.replace(k,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function z(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var A=0;function S(s){var l=+new Date,d=Math.max(0,16-(l-A));return A=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||B("RequestAnimationFrame")||S,D=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function j(s,l,d){if(d&&N===S)s.call(l);else return N.call(window,a(s,l))}function U(s){s&&D.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:g,falseFn:m,formatNum:_,trim:T,splitWords:b,setOptions:R,getParamString:V,template:P,isArray:C,indexOf:z,emptyImageUrl:G,requestFn:N,cancelFn:D,requestAnimFrame:j,cancelAnimFrame:U};function X(){}X.extend=function(s){var l=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(We(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,F=p._initHooks.length;E<F;E++)p._initHooks[E].call(this)}},l},X.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},X.mergeOptions=function(s){return r(this.prototype.options,s),this},X.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function We(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var pe={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=b(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=b(s);for(var v=arguments.length===1,E=0,F=s.length;E<F;E++)v?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,E=p.length;v<E;v++)p[v].fn=m;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var F=this._listens(s,l,d);if(F!==!1){var W=p[F];this._firingCount&&(W.fn=m,this._events[s]=p=p.slice()),p.splice(F,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var E=0,F=v.length;E<F;E++){var W=v[E],q=W.fn;W.once&&this.off(s,q,W.ctx),q.call(W.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var F in this._eventParents)if(this._eventParents[F].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,E=p.length;v<E;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=b(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};pe.addEventListener=pe.on,pe.removeEventListener=pe.clearAllEventListeners=pe.off,pe.addOneTimeEventListener=pe.once,pe.fireEvent=pe.fire,pe.hasEventListeners=pe.listens;var Ze=X.extend(pe);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(ee(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ee(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=ee(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=ee(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ee(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function ee(s,l,d){return s instanceof Z?s:C(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function ne(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}ne.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=ee(s);else if(s=Ce(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=ee(s):s=Ce(s),s instanceof ne?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Ce(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>=l.x&&p.x<=d.x,F=v.y>=l.y&&p.y<=d.y;return E&&F},overlaps:function(s){s=Ce(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>l.x&&p.x<d.x,F=v.y>l.y&&p.y<d.y;return E&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return Ce(ee(l.x-p,l.y-v),ee(d.x+p,d.y+v))},equals:function(s){return s?(s=Ce(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Ce(s,l){return!s||s instanceof ne?s:new ne(s,l)}function et(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}et.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof Re)p=s,v=s;else if(s instanceof et){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(fe(s)||Me(s)):this;return!l&&!d?(this._southWest=new Re(p.lat,p.lng),this._northEast=new Re(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new et(new Re(l.lat-p,l.lng-v),new Re(d.lat+p,d.lng+v))},getCenter:function(){return new Re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Re(this.getNorth(),this.getWest())},getSouthEast:function(){return new Re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Re||"lat"in s?s=fe(s):s=Me(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof et?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=Me(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>=l.lat&&p.lat<=d.lat,F=v.lng>=l.lng&&p.lng<=d.lng;return E&&F},overlaps:function(s){s=Me(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>l.lat&&p.lat<d.lat,F=v.lng>l.lng&&p.lng<d.lng;return E&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Me(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Me(s,l){return s instanceof et?s:new et(s,l)}function Re(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Re.prototype={equals:function(s,l){if(!s)return!1;s=fe(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return ie.distance(this,fe(s))},wrap:function(){return ie.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Me([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Re(this.lat,this.lng,this.alt)}};function fe(s,l,d){return s instanceof Re?s:C(s)&&typeof s[0]!="object"?s.length===3?new Re(s[0],s[1],s[2]):s.length===2?new Re(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Re(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Re(s,l,d)}var ht={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new ne(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Re(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var E=s.getSouthWest(),F=s.getNorthEast(),W=new Re(E.lat-p,E.lng-v),q=new Re(F.lat-p,F.lng-v);return new et(W,q)}},ie=r({},ht,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),F=Math.sin((l.lng-s.lng)*d/2),W=E*E+Math.cos(p)*Math.cos(v)*F*F,q=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*q}}),he=6378137,_e={R:he,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new Re((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=he*Math.PI;return new ne([-s,-s],[s,s])}()};function Ie(s,l,d,p){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}Ie.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function me(s,l,d,p){return new Ie(s,l,d,p)}var be=r({},ie,{code:"EPSG:3857",projection:_e,transformation:function(){var s=.5/(Math.PI*_e.R);return me(s,.5,-s,.5)}()}),St=r({},be,{code:"EPSG:900913"});function _t(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ye(s,l){var d="",p,v,E,F,W,q;for(p=0,E=s.length;p<E;p++){for(W=s[p],v=0,F=W.length;v<F;v++)q=W[v],d+=(v?"L":"M")+q.x+" "+q.y;d+=l?ue.svg?"z":"x":""}return d||"M0 0"}var ke=document.documentElement.style,ut="ActiveXObject"in window,Le=ut&&!document.addEventListener,Be="msLaunchUri"in navigator&&!("documentMode"in document),Sn=pn("webkit"),ei=pn("android"),Rs=pn("android 2")||pn("android 3"),ep=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ns=ei&&pn("Google")&&ep<537&&!("AudioNode"in window),No=!!window.opera,ml=!Be&&pn("chrome"),Lo=pn("gecko")&&!Sn&&!No&&!ut,tp=!ml&&pn("safari"),Pc=pn("phantom"),gl="OTransition"in ke,Sc=navigator.platform.indexOf("Win")===0,Sr=ut&&"transition"in ke,Ls="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Rs,Mo="MozPerspective"in ke,Ui=!window.L_DISABLE_3D&&(Sr||Ls||Mo)&&!gl&&!Pc,Cr=typeof orientation<"u"||pn("mobile"),Oo=Cr&&Sn,Cc=Cr&&Ls,Ir=!window.PointerEvent&&window.MSPointerEvent,yl=!!(window.PointerEvent||Ir),Vt="ontouchstart"in window||!!window.TouchEvent,Ic=!window.L_NO_TOUCH&&(Vt||yl),Ms=Cr&&No,Os=Cr&&Lo,np=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ip=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",m,l),window.removeEventListener("testPassiveEventSupport",m,l)}catch{}return s}(),Ar=function(){return!!document.createElement("canvas").getContext}(),_l=!!(document.createElementNS&&_t("svg").createSVGRect),rp=!!_l&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Do=!_l&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Ac=navigator.platform.indexOf("Mac")===0,bc=navigator.platform.indexOf("Linux")===0;function pn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ue={ie:ut,ielt9:Le,edge:Be,webkit:Sn,android:ei,android23:Rs,androidStock:Ns,opera:No,chrome:ml,gecko:Lo,safari:tp,phantom:Pc,opera12:gl,win:Sc,ie3d:Sr,webkit3d:Ls,gecko3d:Mo,any3d:Ui,mobile:Cr,mobileWebkit:Oo,mobileWebkit3d:Cc,msPointer:Ir,pointer:yl,touch:Ic,touchNative:Vt,mobileOpera:Ms,mobileGecko:Os,retina:np,passiveEvents:ip,canvas:Ar,svg:_l,vml:Do,inlineSvg:rp,mac:Ac,linux:bc},kc=ue.msPointer?"MSPointerDown":"pointerdown",ti=ue.msPointer?"MSPointerMove":"pointermove",vl=ue.msPointer?"MSPointerUp":"pointerup",wl=ue.msPointer?"MSPointerCancel":"pointercancel",Ds={touchstart:kc,touchmove:ti,touchend:vl,touchcancel:wl},Vo={touchstart:xl,touchmove:Dn,touchend:Dn,touchcancel:Dn},Hi={},Rc=!1;function Nc(s,l,d){return l==="touchstart"&&Vs(),Vo[l]?(d=Vo[l].bind(this,d),s.addEventListener(Ds[l],d,!1),d):(console.warn("wrong event specified:",l),m)}function sp(s,l,d){if(!Ds[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ds[l],d,!1)}function jo(s){Hi[s.pointerId]=s}function Lc(s){Hi[s.pointerId]&&(Hi[s.pointerId]=s)}function Fo(s){delete Hi[s.pointerId]}function Vs(){Rc||(document.addEventListener(kc,jo,!0),document.addEventListener(ti,Lc,!0),document.addEventListener(vl,Fo,!0),document.addEventListener(wl,Fo,!0),Rc=!0)}function Dn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Hi)l.touches.push(Hi[d]);l.changedTouches=[l],s(l)}}function xl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ct(l),Dn(s,l)}function op(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Mc=200;function Oc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var F=Cl(E);if(!(F.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!F.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var W=Date.now();W-d<=Mc?(p++,p===2&&l(op(E))):p=1,d=W}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Dc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var js=zo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Wi=zo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Tl=Wi==="webkitTransition"||Wi==="OTransition"?Wi+"End":"transitionend";function El(s){return typeof s=="string"?document.getElementById(s):s}function br(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Ue(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function qe(s){var l=s.parentNode;l&&l.removeChild(s)}function sn(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Vn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function jn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Fs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=gi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function ae(s,l){if(s.classList!==void 0)for(var d=b(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Fs(s,l)){var E=gi(s);$i(s,(E?E+" ":"")+l)}}function tt(s,l){s.classList!==void 0?s.classList.remove(l):$i(s,T((" "+gi(s)+" ").replace(" "+l+" "," ")))}function $i(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function gi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function mn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Vc(s,l)}function Vc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function zo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function qi(s,l,d){var p=l||new Z(0,0);s.style[js]=(ue.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function vt(s,l){s._leaflet_pos=l,ue.any3d?qi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Gi(s){return s._leaflet_pos||new Z(0,0)}var ni,Cn,Bo;if("onselectstart"in document)ni=function(){Ee(window,"selectstart",Ct)},Cn=function(){Xe(window,"selectstart",Ct)};else{var kr=zo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ni=function(){if(kr){var s=document.documentElement.style;Bo=s[kr],s[kr]="none"}},Cn=function(){kr&&(document.documentElement.style[kr]=Bo,Bo=void 0)}}function Uo(){Ee(window,"dragstart",Ct)}function Ho(){Xe(window,"dragstart",Ct)}var zs,yi;function Pl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Wo(),zs=s,yi=s.style.outlineStyle,s.style.outlineStyle="none",Ee(window,"keydown",Wo))}function Wo(){zs&&(zs.style.outlineStyle=yi,zs=void 0,yi=void 0,Xe(window,"keydown",Wo))}function jc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Fn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var ap={__proto__:null,TRANSFORM:js,TRANSITION:Wi,TRANSITION_END:Tl,get:El,getStyle:br,create:Ue,remove:qe,empty:sn,toFront:Vn,toBack:jn,hasClass:Fs,addClass:ae,removeClass:tt,setClass:$i,getClass:gi,setOpacity:mn,testProp:zo,setTransform:qi,setPosition:vt,getPosition:Gi,get disableTextSelection(){return ni},get enableTextSelection(){return Cn},disableImageDrag:Uo,enableImageDrag:Ho,preventOutline:Pl,restoreOutline:Wo,getSizedParentNode:jc,getScale:Fn};function Ee(s,l,d,p){if(l&&typeof l=="object")for(var v in l)$o(s,v,l[v],d);else{l=b(l);for(var E=0,F=l.length;E<F;E++)$o(s,l[E],d,p)}return this}var on="_leaflet_events";function Xe(s,l,d,p){if(arguments.length===1)Rr(s),delete s[on];else if(l&&typeof l=="object")for(var v in l)Bs(s,v,l[v],d);else if(l=b(l),arguments.length===2)Rr(s,function(W){return z(l,W)!==-1});else for(var E=0,F=l.length;E<F;E++)Bs(s,l[E],d,p);return this}function Rr(s,l){for(var d in s[on]){var p=d.split(/\d/)[0];(!l||l(p))&&Bs(s,p,null,null,d)}}var Zi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $o(s,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(s[on]&&s[on][v])return this;var E=function(W){return d.call(p||s,W||window.event)},F=E;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?E=Nc(s,l,E):ue.touch&&l==="dblclick"?E=Oc(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Zi[l]||l,E,ue.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(W){W=W||window.event,Al(s,W)&&F(W)},s.addEventListener(Zi[l],E,!1)):s.addEventListener(l,F,!1):s.attachEvent("on"+l,E),s[on]=s[on]||{},s[on][v]=E}function Bs(s,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var E=s[on]&&s[on][v];if(!E)return this;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?sp(s,l,E):ue.touch&&l==="dblclick"?Dc(s,E):"removeEventListener"in s?s.removeEventListener(Zi[l]||l,E,!1):s.detachEvent("on"+l,E),s[on][v]=null}function Ke(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Sl(s){return $o(s,"wheel",Ke),this}function Us(s){return Ee(s,"mousedown touchstart dblclick contextmenu",Ke),s._leaflet_disable_click=!0,this}function Ct(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function _i(s){return Ct(s),Ke(s),this}function Cl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Hs(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=Fn(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var vi=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Il(s){return ue.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/vi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Al(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Ws={__proto__:null,on:Ee,off:Xe,stopPropagation:Ke,disableScrollPropagation:Sl,disableClickPropagation:Us,preventDefault:Ct,stop:_i,getPropagationPath:Cl,getMousePosition:Hs,getWheelDelta:Il,isExternalTarget:Al,addListener:Ee,removeListener:Xe},bl=Ze.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Gi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),vt(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Oe=Ze.extend({options:{crs:be,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=R(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(fe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Wi&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,Tl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(fe(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),E=s instanceof Z?s:this.latLngToContainerPoint(s),F=E.subtract(v).multiplyBy(1-1/p),W=this.containerPointToLatLng(v.add(F));return this.setView(W,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Me(s);var d=ee(l.paddingTopLeft||l.padding||[0,0]),p=ee(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var E=p.subtract(d).divideBy(2),F=this.project(s.getSouthWest(),v),W=this.project(s.getNorthEast(),v),q=this.unproject(F.add(W).divideBy(2).add(E),v);return{center:q,zoom:v}},fitBounds:function(s,l){if(s=Me(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=ee(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ae(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!ue.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),E=this.getSize(),F=this._zoom;s=fe(s),l=l===void 0?F:l;var W=Math.max(E.x,E.y),q=W*this.getZoomScale(F,l),Q=v.distanceTo(p)||1,se=1.42,ve=se*se;function De(It){var eh=It?-1:1,HA=It?q:W,WA=q*q-W*W+eh*ve*ve*Q*Q,$A=2*HA*ve*Q,dp=WA/$A,Nv=Math.sqrt(dp*dp+1)-dp,qA=Nv<1e-9?-18:Math.log(Nv);return qA}function an(It){return(Math.exp(It)-Math.exp(-It))/2}function jt(It){return(Math.exp(It)+Math.exp(-It))/2}function Un(It){return an(It)/jt(It)}var yn=De(0);function ra(It){return W*(jt(yn)/jt(yn+se*It))}function FA(It){return W*(jt(yn)*Un(yn+se*It)-an(yn))/ve}function zA(It){return 1-Math.pow(1-It,1.5)}var BA=Date.now(),kv=(De(1)-yn)/se,UA=d.duration?1e3*d.duration:1e3*kv*.8;function Rv(){var It=(Date.now()-BA)/UA,eh=zA(It)*kv;It<=1?(this._flyToFrame=j(Rv,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(FA(eh)/Q)),F),this.getScaleZoom(W/ra(eh),F),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Rv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Me(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Me(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=ee(l.paddingTopLeft||l.padding||[0,0]),p=ee(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),E=this.project(s),F=this.getPixelBounds(),W=Ce([F.min.add(d),F.max.subtract(p)]),q=W.getSize();if(!W.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(W.getCenter()),se=W.extend(E).getSize().subtract(q);v.x+=Q.x<0?-se.x:se.x,v.y+=Q.y<0?-se.y:se.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),E=p.subtract(v);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Re(l,d),v=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var F=this.getBoundsZoom(v);this.setView(p,E.maxZoom?Math.min(F,E.maxZoom):F)}var W={latlng:p,bounds:v,timestamp:s.timestamp};for(var q in s.coords)typeof s.coords[q]=="number"&&(W[q]=s.coords[q]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)qe(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ue("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new et(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Me(s),d=ee(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),E=this.getMaxZoom(),F=s.getNorthWest(),W=s.getSouthEast(),q=this.getSize().subtract(d),Q=Ce(this.project(W,p),this.project(F,p)).getSize(),se=ue.any3d?this.options.zoomSnap:1,ve=q.x/Q.x,De=q.y/Q.y,an=l?Math.max(ve,De):Math.min(ve,De);return p=this.getScaleZoom(an,p),se&&(p=Math.round(p/(se/100))*(se/100),p=l?Math.ceil(p/se)*se:Math.floor(p/se)*se),Math.max(v,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new ne(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(fe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ee(s),l)},layerPointToLatLng:function(s){var l=ee(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(fe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(fe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Me(s))},distance:function(s,l){return this.options.crs.distance(fe(s),fe(l))},containerPointToLayerPoint:function(s){return ee(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ee(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(ee(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(s)))},mouseEventToContainerPoint:function(s){return Hs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=El(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,ae(s,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=br(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),vt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ae(s.markerPane,"leaflet-zoom-hide"),ae(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){vt(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){vt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Xe:Ee;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,F=!1;E;){if(p=this._targets[h(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){F=!0;break}if(p&&p.listens(l,!0)&&(v&&!Al(E,s)||(d.push(p),v))||E===this._container)break;E=E.parentNode}return!d.length&&!F&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Pl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var E=[],F=0;F<d.length;F++)d[F].listens(l,!0)&&E.push(d[F]);v=E.concat(v)}if(v.length){l==="contextmenu"&&Ct(s);var W=v[0],q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);q.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Q?W.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(F=0;F<v.length;F++)if(v[F].fire(l,q,!0),q.originalEvent._stopped||v[F].options.bubblingMouseEvents===!1&&z(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Gi(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Ce([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),E=new ne(p.subtract(v),p.add(v)),F=this._getBoundsOffset(E,d,l);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?s:this.unproject(p.add(F),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new ne(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Ce(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),E=p.max.subtract(s.max),F=this._rebound(v.x,-E.x),W=this._rebound(v.y,-E.y);return new Z(F,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ue.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=js,p=this._proxy.style[d];qi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();qi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(j(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function qo(s,l){return new Oe(s,l)}var gn=X.extend({options:{position:"topright"},initialize:function(s){R(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return ae(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),wi=function(s){return new gn(s)};Oe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ue("div",l+"control-container",this._container);function p(v,E){var F=l+v+" "+l+E;s[v+E]=Ue("div",F,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)qe(this._controlCorners[s]);qe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fc=gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){R(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return gn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ue("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Us(l),Sl(l);var p=this._section=Ue("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Ee(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Ue("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ee(v,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Ct(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ue("div",s+"-base",p),this._separator=Ue("div",s+"-separator",p),this._overlaysList=Ue("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;sn(this._baseLayersList),sn(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),Ee(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(v);var F=s.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(E=0;E<v.length;E++)this._map.hasLayer(v[E])&&this._map.removeLayer(v[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ee(s,"click",Ct),this.expand();var l=this;setTimeout(function(){Xe(s,"click",Ct),l._preventClick=!1})}}),zc=function(s,l,d){return new Fc(s,l,d)},Ki=gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ue("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var E=Ue("a",d,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Us(E),Ee(E,"click",_i),Ee(E,"click",v,this),Ee(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";tt(this._zoomInButton,l),tt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ae(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ae(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oe.mergeOptions({zoomControl:!0}),Oe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ki,this.addControl(this.zoomControl))});var Bc=function(s){return new Ki(s)},kl=gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ue("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ue("div",l,d)),s.imperial&&(this._iScale=Ue("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Rl=function(s){return new kl(s)},Nl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Go=gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Nl+" ":"")+"Leaflet</a>"},initialize:function(s){R(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ue("div","leaflet-control-attribution"),Us(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Oe.mergeOptions({attributionControl:!0}),Oe.addInitHook(function(){this.options.attributionControl&&new Go().addTo(this)});var Zo=function(s){return new Go(s)};gn.Layers=Fc,gn.Zoom=Ki,gn.Scale=kl,gn.Attribution=Go,wi.layers=zc,wi.zoom=Bc,wi.scale=Rl,wi.attribution=Zo;var In=X.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(s,l){return s.addHandler(l,this),this};var Uc={Events:pe},xi=ue.touch?"touchstart mousedown":"mousedown",ii=Ze.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){R(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Ee(this._dragStartTarget,xi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ii._dragging===this&&this.finishDrag(!0),Xe(this._dragStartTarget,xi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Fs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ii._dragging===this&&this.finishDrag();return}if(!(ii._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ii._dragging=this,this._preventOutline&&Pl(this._element),Uo(),ni(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=jc(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Gi(this._element),this._parentScale=Fn(d);var p=s.type==="mousedown";Ee(document,p?"mousemove":"touchmove",this._onMove,this),Ee(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Ct(s),this._moved||(this.fire("dragstart"),this._moved=!0,ae(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),vt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xe(document,"mousemove touchmove",this._onMove,this),Xe(document,"mouseup touchend touchcancel",this._onUp,this),Ho(),Cn();var l=this._moved&&this._moving;this._moving=!1,ii._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ll(s,l,d){var p,v=[1,4,2,8],E,F,W,q,Q,se,ve,De;for(E=0,se=s.length;E<se;E++)s[E]._code=$(s[E],l);for(W=0;W<4;W++){for(ve=v[W],p=[],E=0,se=s.length,F=se-1;E<se;F=E++)q=s[E],Q=s[F],q._code&ve?Q._code&ve||(De=H(Q,q,ve,l,d),De._code=$(De,l),p.push(De)):(Q._code&ve&&(De=H(Q,q,ve,l,d),De._code=$(De,l),p.push(De)),p.push(q));s=p}return s}function Ml(s,l){var d,p,v,E,F,W,q,Q,se;if(!s||s.length===0)throw new Error("latlngs not passed");Ge(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ve=fe([0,0]),De=Me(s),an=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());an<1700&&(ve=Ko(s));var jt=s.length,Un=[];for(d=0;d<jt;d++){var yn=fe(s[d]);Un.push(l.project(fe([yn.lat-ve.lat,yn.lng-ve.lng])))}for(W=q=Q=0,d=0,p=jt-1;d<jt;p=d++)v=Un[d],E=Un[p],F=v.y*E.x-E.y*v.x,q+=(v.x+E.x)*F,Q+=(v.y+E.y)*F,W+=F*3;W===0?se=Un[0]:se=[q/W,Q/W];var ra=l.unproject(ee(se));return fe([ra.lat+ve.lat,ra.lng+ve.lng])}function Ko(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var E=fe(s[v]);l+=E.lat,d+=E.lng,p++}return fe([l/p,d/p])}var Qo={__proto__:null,clipPolygon:Ll,polygonCenter:Ml,centroid:Ko};function Zt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Nr(s,d),s}function Ol(s,l,d){return Math.sqrt(Pe(s,l,d,!0))}function Hc(s,l,d){return Pe(s,l,d)}function Nr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,c(s,v,l,0,d-1);var E,F=[];for(E=0;E<d;E++)v[E]&&F.push(s[E]);return F}function c(s,l,d,p,v){var E=0,F,W,q;for(W=p+1;W<=v-1;W++)q=Pe(s[W],s[p],s[v],!0),q>E&&(F=W,E=q);E>d&&(l[F]=1,c(s,l,d,p,F),c(s,l,d,F,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,E=s.length;p<E;p++)te(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<E-1&&d.push(s[E-1]),d}var x;function I(s,l,d,p,v){var E=p?x:$(s,d),F=$(l,d),W,q,Q;for(x=F;;){if(!(E|F))return[s,l];if(E&F)return!1;W=E||F,q=H(s,l,W,d,v),Q=$(q,d),W===E?(s=q,E=Q):(l=q,F=Q)}}function H(s,l,d,p,v){var E=l.x-s.x,F=l.y-s.y,W=p.min,q=p.max,Q,se;return d&8?(Q=s.x+E*(q.y-s.y)/F,se=q.y):d&4?(Q=s.x+E*(W.y-s.y)/F,se=W.y):d&2?(Q=q.x,se=s.y+F*(q.x-s.x)/E):d&1&&(Q=W.x,se=s.y+F*(W.x-s.x)/E),new Z(Q,se,v)}function $(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function te(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Pe(s,l,d,p){var v=l.x,E=l.y,F=d.x-v,W=d.y-E,q=F*F+W*W,Q;return q>0&&(Q=((s.x-v)*F+(s.y-E)*W)/q,Q>1?(v=d.x,E=d.y):Q>0&&(v+=F*Q,E+=W*Q)),F=s.x-v,W=s.y-E,p?F*F+W*W:new Z(v,E)}function Ge(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Qe(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ge(s)}function xt(s,l){var d,p,v,E,F,W,q,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Ge(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=fe([0,0]),ve=Me(s),De=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());De<1700&&(se=Ko(s));var an=s.length,jt=[];for(d=0;d<an;d++){var Un=fe(s[d]);jt.push(l.project(fe([Un.lat-se.lat,Un.lng-se.lng])))}for(d=0,p=0;d<an-1;d++)p+=jt[d].distanceTo(jt[d+1])/2;if(p===0)Q=jt[0];else for(d=0,E=0;d<an-1;d++)if(F=jt[d],W=jt[d+1],v=F.distanceTo(W),E+=v,E>p){q=(E-p)/v,Q=[W.x-q*(W.x-F.x),W.y-q*(W.y-F.y)];break}var yn=l.unproject(ee(Q));return fe([yn.lat+se.lat,yn.lng+se.lng])}var zn={__proto__:null,simplify:Zt,pointToSegmentDistance:Ol,closestPointOnSegment:Hc,clipSegment:I,_getEdgeIntersection:H,_getBitCode:$,_sqClosestPointOnSegment:Pe,isFlat:Ge,_flat:Qe,polylineCenter:xt},ri={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new Re(s.y,s.x)},bounds:new ne([-180,-90],[180,90])},Bn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ne([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,E=Math.sqrt(1-v*v),F=E*Math.sin(p),W=Math.tan(Math.PI/4-p/2)/Math.pow((1-F)/(1+F),E/2);return p=-d*Math.log(Math.max(W,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),E=Math.exp(-s.y/d),F=Math.PI/2-2*Math.atan(E),W=0,q=.1,Q;W<15&&Math.abs(q)>1e-7;W++)Q=v*Math.sin(F),Q=Math.pow((1-Q)/(1+Q),v/2),q=Math.PI/2-2*Math.atan(E*Q)-F,F+=q;return new Re(F*l,s.x*l/d)}},Ti={__proto__:null,LonLat:ri,Mercator:Bn,SphericalMercator:_e},Yo=r({},ie,{code:"EPSG:3395",projection:Bn,transformation:function(){var s=.5/(Math.PI*Bn.R);return me(s,.5,-s,.5)}()}),Xo=r({},ie,{code:"EPSG:4326",projection:ri,transformation:me(1/180,1,-1/180,.5)}),yA=r({},ht,{projection:ri,transformation:me(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});ht.Earth=ie,ht.EPSG3395=Yo,ht.EPSG3857=be,ht.EPSG900913=St,ht.EPSG4326=Xo,ht.Simple=yA;var si=Ze.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Oe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Jo=si.extend({initialize:function(s,l){R(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),_A=function(s,l){return new Jo(s,l)},Qi=Jo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Jo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Jo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new et;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),vA=function(s,l){return new Qi(s,l)},ea=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){R(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=ee(p),E=ee(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ue.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function wA(s){return new ea(s)}var Dl=ea.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Dl.imagePath!="string"&&(Dl.imagePath=this._detectIconPath()),(this.options.imagePath||Dl.imagePath)+ea.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var E=p.exec(d);return E&&E[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ue("div","leaflet-default-icon-path",document.body),l=br(s,"background-image")||br(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),hv=In.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ii(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ae(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,E=Gi(l._icon),F=d.getPixelBounds(),W=d.getPixelOrigin(),q=Ce(F.min._subtract(W).add(v),F.max._subtract(W).subtract(v));if(!q.contains(E)){var Q=ee((Math.max(q.max.x,E.x)-q.max.x)/(F.max.x-q.max.x)-(Math.min(q.min.x,E.x)-q.min.x)/(F.min.x-q.min.x),(Math.max(q.max.y,E.y)-q.max.y)/(F.max.y-q.max.y)-(Math.min(q.min.y,E.y)-q.min.y)/(F.min.y-q.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),vt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=j(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Gi(l._icon),v=l._map.layerPointToLatLng(p);d&&vt(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Wc=si.extend({options:{icon:new Dl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){R(this,l),this._latlng=fe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),ae(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),E=!1;v!==this._shadow&&(this._removeShadow(),E=!0),v&&(ae(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(this._icon,"focus",this._panOnFocus,this),qe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qe(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&vt(this._icon,s),this._shadow&&vt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&mn(this._icon,s),this._shadow&&mn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?ee(l.iconSize):ee(0,0),p=l.iconAnchor?ee(l.iconAnchor):ee(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xA(s,l){return new Wc(s,l)}var Lr=si.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return R(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),$c=Lr.extend({options:{fill:!0,radius:10},initialize:function(s,l){R(this,l),this._latlng=fe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Lr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new ne(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function TA(s,l){return new $c(s,l)}var lp=$c.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),R(this,l),this._latlng=fe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new et(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Lr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===ie.distance){var v=Math.PI/180,E=this._mRadius/ie.R/v,F=d.project([l+E,s]),W=d.project([l-E,s]),q=F.add(W).divideBy(2),Q=d.unproject(q).lat,se=Math.acos((Math.cos(E*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(se)||se===0)&&(se=E/Math.cos(Math.PI/180*l)),this._point=q.subtract(d.getPixelOrigin()),this._radius=isNaN(se)?0:q.x-d.project([Q,s-se]).x,this._radiusY=q.y-F.y}else{var ve=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ve).x}this._updateBounds()}});function EA(s,l,d){return new lp(s,l,d)}var Yi=Lr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){R(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Pe,v,E,F=0,W=this._parts.length;F<W;F++)for(var q=this._parts[F],Q=1,se=q.length;Q<se;Q++){v=q[Q-1],E=q[Q];var ve=p(s,v,E,!0);ve<l&&(l=ve,d=p(s,v,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=fe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new et,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ge(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Ge(s),p=0,v=s.length;p<v;p++)d?(l[p]=fe(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new ne;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new ne([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Re,v=s.length,E,F;if(p){for(F=[],E=0;E<v;E++)F[E]=this._map.latLngToLayerPoint(s[E]),d.extend(F[E]);l.push(F)}else for(E=0;E<v;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,E,F,W,q;for(d=0,v=0,E=this._rings.length;d<E;d++)for(q=this._rings[d],p=0,F=q.length;p<F-1;p++)W=I(q[p],q[p+1],s,p,!0),W&&(l[v]=l[v]||[],l[v].push(W[0]),(W[1]!==q[p+1]||p===F-2)&&(l[v].push(W[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Zt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,E,F,W,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for(W=this._parts[d],p=0,F=W.length,v=F-1;p<F;v=p++)if(!(!l&&p===0)&&Ol(s,W[v],W[p])<=q)return!0;return!1}});function PA(s,l){return new Yi(s,l)}Yi._flat=Qe;var ta=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ml(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Yi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Re&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Yi.prototype._setLatLngs.call(this,s),Ge(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ge(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new ne(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,E;p<v;p++)E=Ll(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,E,F,W,q,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,q=this._parts.length;E<q;E++)for(d=this._parts[E],F=0,Q=d.length,W=Q-1;F<Q;W=F++)p=d[F],v=d[W],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Yi.prototype._containsPoint.call(this,s,!0)}});function SA(s,l){return new ta(s,l)}var Xi=Qi.extend({initialize:function(s,l){R(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var F=qc(s,E);return F?(F.feature=Kc(s),F.defaultOptions=F.options,this.resetStyle(F),E.onEachFeature&&E.onEachFeature(s,F),this.addLayer(F)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function qc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],E=l&&l.pointToLayer,F=l&&l.coordsToLatLng||up,W,q,Q,se;if(!p&&!d)return null;switch(d.type){case"Point":return W=F(p),dv(E,s,W,l);case"MultiPoint":for(Q=0,se=p.length;Q<se;Q++)W=F(p[Q]),v.push(dv(E,s,W,l));return new Qi(v);case"LineString":case"MultiLineString":return q=Gc(p,d.type==="LineString"?0:1,F),new Yi(q,l);case"Polygon":case"MultiPolygon":return q=Gc(p,d.type==="Polygon"?1:2,F),new ta(q,l);case"GeometryCollection":for(Q=0,se=d.geometries.length;Q<se;Q++){var ve=qc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);ve&&v.push(ve)}return new Qi(v);case"FeatureCollection":for(Q=0,se=d.features.length;Q<se;Q++){var De=qc(d.features[Q],l);De&&v.push(De)}return new Qi(v);default:throw new Error("Invalid GeoJSON object.")}}function dv(s,l,d,p){return s?s(l,d):new Wc(d,p&&p.markersInheritOptions&&p)}function up(s){return new Re(s[1],s[0],s[2])}function Gc(s,l,d){for(var p=[],v=0,E=s.length,F;v<E;v++)F=l?Gc(s[v],l-1,d):(d||up)(s[v]),p.push(F);return p}function cp(s,l){return s=fe(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function Zc(s,l,d,p){for(var v=[],E=0,F=s.length;E<F;E++)v.push(l?Zc(s[E],Ge(s[E])?0:l-1,d,p):cp(s[E],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function na(s,l){return s.feature?r({},s.feature,{geometry:l}):Kc(l)}function Kc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var hp={toGeoJSON:function(s){return na(this,{type:"Point",coordinates:cp(this.getLatLng(),s)})}};Wc.include(hp),lp.include(hp),$c.include(hp),Yi.include({toGeoJSON:function(s){var l=!Ge(this._latlngs),d=Zc(this._latlngs,l?1:0,!1,s);return na(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ta.include({toGeoJSON:function(s){var l=!Ge(this._latlngs),d=l&&!Ge(this._latlngs[0]),p=Zc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),na(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Jo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),na(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var E=v.toGeoJSON(s);if(d)p.push(E.geometry);else{var F=Kc(E);F.type==="FeatureCollection"?p.push.apply(p,F.features):p.push(F)}}}),d?na(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function fv(s,l){return new Xi(s,l)}var CA=fv,Qc=si.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Me(l),R(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Vn(this._image),this},bringToBack:function(){return this._map&&jn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Me(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ue("img");if(ae(l,"leaflet-image-layer"),this._zoomAnimated&&ae(l,"leaflet-zoom-animated"),this.options.className&&ae(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;qi(this._image,d,l)},_reset:function(){var s=this._image,l=new ne(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();vt(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),IA=function(s,l,d){return new Qc(s,l,d)},pv=Qc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ue("video");if(ae(l,"leaflet-image-layer"),this._zoomAnimated&&ae(l,"leaflet-zoom-animated"),this.options.className&&ae(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var F=Ue("source");F.src=this._url[E],l.appendChild(F)}}});function AA(s,l,d){return new pv(s,l,d)}var mv=Qc.extend({_initImage:function(){var s=this._image=this._url;ae(s,"leaflet-image-layer"),this._zoomAnimated&&ae(s,"leaflet-zoom-animated"),this.options.className&&ae(s,this.options.className),s.onselectstart=m,s.onmousemove=m}});function bA(s,l,d){return new mv(s,l,d)}var Ei=si.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Re||C(s))?(this._latlng=fe(s),R(this,l)):(R(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&mn(this._container,1),this.bringToFront(),this.options.interactive&&(ae(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(mn(this._container,0),this._removeTimeout=setTimeout(a(qe,void 0,this._container),200)):qe(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=fe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Vn(this._container),this},bringToBack:function(){return this._map&&jn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Qi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=ee(this.options.offset),d=this._getAnchor();this._zoomAnimated?vt(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Oe.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),si.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(R(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var Yc=Ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ei.prototype.openOn.call(this,s)},onAdd:function(s){Ei.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Lr||this._source.on("preclick",Ke))},onRemove:function(s){Ei.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Lr||this._source.off("preclick",Ke))},getEvents:function(){var s=Ei.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ue("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ue("div",s+"-content-wrapper",l);if(this._contentNode=Ue("div",s+"-content",d),Us(l),Sl(this._contentNode),Ee(l,"contextmenu",Ke),this._tipContainer=Ue("div",s+"-tip-container",l),this._tip=Ue("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ue("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(p,"click",function(v){Ct(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,E="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",ae(s,E)):tt(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();vt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(br(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new Z(this._containerLeft,-d-this._containerBottom);v._add(Gi(this._container));var E=s.layerPointToContainerPoint(v),F=ee(this.options.autoPanPadding),W=ee(this.options.autoPanPaddingTopLeft||F),q=ee(this.options.autoPanPaddingBottomRight||F),Q=s.getSize(),se=0,ve=0;E.x+p+q.x>Q.x&&(se=E.x+p-Q.x+q.x),E.x-se-W.x<0&&(se=E.x-W.x),E.y+d+q.y>Q.y&&(ve=E.y+d-Q.y+q.y),E.y-ve-W.y<0&&(ve=E.y-W.y),(se||ve)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,ve]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kA=function(s,l){return new Yc(s,l)};Oe.mergeOptions({closePopupOnClick:!0}),Oe.include({openPopup:function(s,l,d){return this._initOverlay(Yc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),si.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Yc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Qi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){_i(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Lr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Xc=Ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ei.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ei.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ei.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ue("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,E=p.latLngToContainerPoint(p.getCenter()),F=p.layerPointToContainerPoint(s),W=this.options.direction,q=v.offsetWidth,Q=v.offsetHeight,se=ee(this.options.offset),ve=this._getAnchor();W==="top"?(l=q/2,d=Q):W==="bottom"?(l=q/2,d=0):W==="center"?(l=q/2,d=Q/2):W==="right"?(l=0,d=Q/2):W==="left"?(l=q,d=Q/2):F.x<E.x?(W="right",l=0,d=Q/2):(W="left",l=q+(se.x+ve.x)*2,d=Q/2),s=s.subtract(ee(l,d,!0)).add(se).add(ve),tt(v,"leaflet-tooltip-right"),tt(v,"leaflet-tooltip-left"),tt(v,"leaflet-tooltip-top"),tt(v,"leaflet-tooltip-bottom"),ae(v,"leaflet-tooltip-"+W),vt(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&mn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),RA=function(s,l){return new Xc(s,l)};Oe.include({openTooltip:function(s,l,d){return this._initOverlay(Xc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),si.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Qi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Ee(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ee(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var gv=ea.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(sn(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=ee(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function NA(s){return new gv(s)}ea.Default=Dl;var Vl=si.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){R(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),qe(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Vn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,E;p<v;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){mn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var E=Math.min(1,(s-v.loaded)/200);mn(v.el,E),E<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(qe(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),m(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)qe(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),E=Math.floor(l/2),F=d-1,W=new Z(+v,+E);W.z=+F;var q=this._tileCoordsToKey(W),Q=this._tiles[q];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),F>p?this._retainParent(v,E,F,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var E=2*l;E<2*l+2;E++){var F=new Z(v,E);F.z=d+1;var W=this._tileCoordsToKey(F),q=this._tiles[W];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);d+1<p&&this._retainChildren(v,E,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var E=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||E)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ue.any3d?qi(s.el,v,p):vt(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new ne(v.subtract(E),v.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),E=v.getCenter(),F=[],W=this.options.keepBuffer,q=new ne(v.getBottomLeft().subtract([W,-W]),v.getTopRight().add([W,-W]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var se=this._tiles[Q].coords;(se.z!==this._tileZoom||!q.contains(new Z(se.x,se.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var ve=v.min.y;ve<=v.max.y;ve++)for(var De=v.min.x;De<=v.max.x;De++){var an=new Z(De,ve);if(an.z=this._tileZoom,!!this._isValidTile(an)){var jt=this._tiles[this._tileCoordsToKey(an)];jt?jt.current=!0:F.push(an)}}if(F.sort(function(yn,ra){return yn.distanceTo(E)-ra.distanceTo(E)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Un=document.createDocumentFragment();for(De=0;De<F.length;De++)this._addTile(F[De],Un);this._level.el.appendChild(Un)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Me(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),E=l.unproject(p,s.z),F=l.unproject(v,s.z);return[E,F]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new et(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(qe(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ae(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=m,s.onmousemove=m,ue.ielt9&&this.options.opacity<1&&mn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&j(a(this._tileReady,this,s,null,v)),vt(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(mn(d.el,0),U(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(ae(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ne(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function LA(s){return new Vl(s)}var ia=Vl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=R(this,l),l.detectRetina&&ue.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Ee(d,"load",a(this._tileOnLoad,this,l,d)),Ee(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:ue.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ue.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=m,l.onerror=m,!l.complete)){l.src=G;var d=this._tiles[s].coords;qe(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",G),Vl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return Vl.prototype._tileReady.call(this,s,l,d)}});function yv(s,l){return new ia(s,l)}var _v=ia.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=R(this,l);var v=l.detectRetina&&ue.retina?2:1,E=this.getTileSize();d.width=E.x*v,d.height=E.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ia.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Ce(d.project(l[0]),d.project(l[1])),v=p.min,E=p.max,F=(this._wmsVersion>=1.3&&this._crs===Xo?[v.y,v.x,E.y,E.x]:[v.x,v.y,E.x,E.y]).join(","),W=ia.prototype.getTileUrl.call(this,s);return W+V(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function MA(s,l){return new _v(s,l)}ia.WMS=_v,yv.wms=MA;var Ji=si.extend({options:{padding:.1},initialize:function(s){R(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),E=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));ue.any3d?qi(this._container,E,d):vt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ne(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vv=Ji.extend({options:{tolerance:0},getEvents:function(){var s=Ji.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ji.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ee(s,"mousemove",this._onMouseMove,this),Ee(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,qe(this._container),Xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ji.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=ue.retina?2:1;vt(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ji.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ne,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,E,F=s._parts,W=F.length,q=this._ctx;if(W){for(q.beginPath(),d=0;d<W;d++){for(p=0,v=F[d].length;p<v;p++)E=F[d][p],q[p?"lineTo":"moveTo"](E.x,E.y);l&&q.closePath()}this._fillStroke(q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(tt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(ae(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function wv(s){return ue.canvas?new vv(s):null}var jl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),OA={_initContainer:function(){this._container=Ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ji.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=jl("shape");ae(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=jl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;qe(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=jl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=C(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=jl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Vn(s._container)},_bringToBack:function(s){jn(s._container)}},Jc=ue.vml?jl:_t,Fl=Ji.extend({_initContainer:function(){this._container=Jc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Jc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qe(this._container),Xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ji.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),vt(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Jc("path");s.options.className&&ae(l,s.options.className),s.options.interactive&&ae(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){qe(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,ye(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Vn(s._path)},_bringToBack:function(s){jn(s._path)}});ue.vml&&Fl.include(OA);function xv(s){return ue.svg||ue.vml?new Fl(s):null}Oe.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&wv(s)||xv(s)}});var Tv=ta.extend({initialize:function(s,l){ta.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Me(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function DA(s,l){return new Tv(s,l)}Fl.create=Jc,Fl.pointsToPath=ye,Xi.geometryToLayer=qc,Xi.coordsToLatLng=up,Xi.coordsToLatLngs=Gc,Xi.latLngToCoords=cp,Xi.latLngsToCoords=Zc,Xi.getFeature=na,Xi.asFeature=Kc,Oe.mergeOptions({boxZoom:!0});var Ev=In.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ni(),Uo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ee(document,{contextmenu:_i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ue("div","leaflet-zoom-box",this._container),ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ne(this._point,this._startPoint),d=l.getSize();vt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(qe(this._box),tt(this._container,"leaflet-crosshair")),Cn(),Ho(),Xe(document,{contextmenu:_i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oe.addInitHook("addHandler","boxZoom",Ev),Oe.mergeOptions({doubleClickZoom:!0});var Pv=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Oe.addInitHook("addHandler","doubleClickZoom",Pv),Oe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Sv=In.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ii(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Me(this._map.options.maxBounds);this._offsetLimit=Ce(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,E=(p+l+d)%s-l-d,F=Math.abs(v+d)<Math.abs(E+d)?v:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,F=d.easeLinearity,W=v.multiplyBy(F/E),q=W.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,q),se=W.multiplyBy(Q/q),ve=Q/(d.inertiaDeceleration*F),De=se.multiplyBy(-ve/2).round();!De.x&&!De.y?l.fire("moveend"):(De=l._limitOffset(De,l.options.maxBounds),j(function(){l.panBy(De,{duration:ve,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Oe.addInitHook("addHandler","dragging",Sv),Oe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Cv=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ee(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=ee(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(ee(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;_i(s)}}});Oe.addInitHook("addHandler","keyboard",Cv),Oe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Iv=In.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Il(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),_i(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=d?Math.ceil(v/d)*d:v,F=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,F&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+F):s.setZoomAround(this._lastMousePos,l+F))}});Oe.addInitHook("addHandler","scrollWheelZoom",Iv);var VA=600;Oe.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var Av=In.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",Ct),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),VA),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Xe(document,"touchend",Ct),Xe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Oe.addInitHook("addHandler","tapHold",Av),Oe.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var bv=In.extend({addHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),Ct(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var E=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var F=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(F,this,!0),Ct(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Oe.addInitHook("addHandler","touchZoom",bv),Oe.BoxZoom=Ev,Oe.DoubleClickZoom=Pv,Oe.Drag=Sv,Oe.Keyboard=Cv,Oe.ScrollWheelZoom=Iv,Oe.TapHold=Av,Oe.TouchZoom=bv,n.Bounds=ne,n.Browser=ue,n.CRS=ht,n.Canvas=vv,n.Circle=lp,n.CircleMarker=$c,n.Class=X,n.Control=gn,n.DivIcon=gv,n.DivOverlay=Ei,n.DomEvent=Ws,n.DomUtil=ap,n.Draggable=ii,n.Evented=Ze,n.FeatureGroup=Qi,n.GeoJSON=Xi,n.GridLayer=Vl,n.Handler=In,n.Icon=ea,n.ImageOverlay=Qc,n.LatLng=Re,n.LatLngBounds=et,n.Layer=si,n.LayerGroup=Jo,n.LineUtil=zn,n.Map=Oe,n.Marker=Wc,n.Mixin=Uc,n.Path=Lr,n.Point=Z,n.PolyUtil=Qo,n.Polygon=ta,n.Polyline=Yi,n.Popup=Yc,n.PosAnimation=bl,n.Projection=Ti,n.Rectangle=Tv,n.Renderer=Ji,n.SVG=Fl,n.SVGOverlay=mv,n.TileLayer=ia,n.Tooltip=Xc,n.Transformation=Ie,n.Util=M,n.VideoOverlay=pv,n.bind=a,n.bounds=Ce,n.canvas=wv,n.circle=EA,n.circleMarker=TA,n.control=wi,n.divIcon=NA,n.extend=r,n.featureGroup=vA,n.geoJSON=fv,n.geoJson=CA,n.gridLayer=LA,n.icon=wA,n.imageOverlay=IA,n.latLng=fe,n.latLngBounds=Me,n.layerGroup=_A,n.map=qo,n.marker=xA,n.point=ee,n.polygon=SA,n.polyline=PA,n.popup=kA,n.rectangle=DA,n.setOptions=R,n.stamp=h,n.svg=xv,n.svgOverlay=bA,n.tileLayer=yv,n.tooltip=RA,n.transformation=me,n.version=i,n.videoOverlay=AA;var jA=window.L;n.noConflict=function(){return window.L=jA,this},window.L=n})})(Kg,Kg.exports);var Ro=Kg.exports;const lv=V1(Ro);function Ec(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function uv(t,e){return e==null?function(i,r){const o=O.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=O.useRef();o.current||(o.current=t(i,r));const a=O.useRef(i),{instance:u}=o.current;return O.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function pA(t,e){O.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function mA(t){return function(n){const i=ov(),r=t(av(n,i),i);return IF(i.map,n.attribution),fA(r.current,n.eventHandlers),pA(r.current,i),r}}function NF(t,e){const n=O.useRef();O.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function LF(t){return function(n){const i=ov(),r=t(av(n,i),i);return fA(r.current,n.eventHandlers),pA(r.current,i),NF(r.current,n),r}}function MF(t,e){const n=uv(t,e),i=mA(n);return dA(i)}function cv(t,e){const n=uv(t,e),i=LF(n);return dA(i)}function OF(t,e){const n=uv(t,e),i=mA(n);return RF(i)}function DF(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Jf(){return ov().map}function VF(t){const e=Jf();return O.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const gA=cv(function({center:e,children:n,...i},r){const o=new Ro.CircleMarker(e,i);return Ec(o,Xf(r,{overlayContainer:o}))},AF);function Qg(){return Qg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qg.apply(this,arguments)}function jF({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...g},m){const[_]=O.useState({className:r,id:o,style:u}),[T,b]=O.useState(null);O.useImperativeHandle(m,()=>(T==null?void 0:T.map)??null,[T]);const R=O.useCallback(k=>{if(k!==null&&T===null){const P=new Ro.Map(k,g);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),b(kF(P))}},[]);O.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const V=T?uo.createElement(hA,{value:T},i):a??null;return uo.createElement("div",Qg({},_,{ref:R}),V)}const FF=O.forwardRef(jF),zF=MF(function({position:e,...n},i){const r=new Ro.Marker(e,n);return Ec(r,Xf(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),BF=cv(function({positions:e,...n},i){const r=new Ro.Polygon(e,n);return Ec(r,Xf(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),D1=cv(function({positions:e,...n},i){const r=new Ro.Polyline(e,n);return Ec(r,Xf(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),UF=OF(function({url:e,...n},i){const r=new Ro.TileLayer(e,av(n,i));return Ec(r,i)},function(e,n,i){DF(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete lv.Icon.Default.prototype._getIconUrl;lv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const HF="/street-art-ctf/chumper.png",WF=(t,e=!1,n=!1)=>{let i="";e?i="grayscale(100%) opacity(0.5)":t?t==="red"&&(i="hue-rotate(160deg) saturate(1.5)"):i="grayscale(100%)";const r=n?'<div style="position:absolute;inset:-4px;border:2px solid #a855f7;border-radius:50%;"></div>':"";return lv.divIcon({html:`<div style="position:relative;">${r}<img src="${HF}" style="width: 32px; height: 32px; filter: ${i};" /></div>`,className:"chumper-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})};function $F({devMode:t}){const[e,n]=O.useState(tA),[i,r]=O.useState(eA);return VF({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?w.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:w.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[w.jsxs("div",{children:["zoom: ",e]}),w.jsxs("div",{children:["lat: ",i[0]]}),w.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function qF({hood:t}){const e=Jf();return O.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function GF({onShow:t}){const e=Jf(),[n,i]=O.useState(null);if(O.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o){const a=JSON.parse(o);i(a),localStorage.removeItem("streetart-ctf-lastCapture"),a.location&&setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500)}},[e,t]),!n)return null;const r=n.team==="red"?"#ff6b6b":"#4dabf7";return w.jsx(gA,{center:n.location,radius:30,pathOptions:{color:r,fillColor:r,fillOpacity:.3,weight:3,className:"capture-pulse"}})}function ZF(){const t=Jf(),[e,n]=O.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return w.jsx(re.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:w.jsx(re.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:w.jsx(tF,{size:20,className:"text-white"})})})}function KF({point:t,onClose:e,isDiscovered:n,isSoloView:i}){const r=t.capturedBy?ca(t.capturedBy):"#495057",o=i?n?"#a855f7":"#495057":r,a=Fa(t),u=t.status==="ghost";return w.jsx(re.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:w.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${o}40`},children:[w.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:w.jsx(vF,{size:16,className:"text-white/50"})}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${o}20`,border:`1px solid ${o}40`},children:u?w.jsx(sA,{size:20,className:"text-white/30"}):i?n?w.jsx(N1,{size:20,style:{color:o}}):w.jsx(k1,{size:20,style:{color:o}}):t.capturedBy?w.jsx(N1,{size:20,style:{color:o}}):w.jsx(k1,{size:20,style:{color:o}})}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),u&&w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),w.jsx("p",{className:"text-sm text-white/40",children:t.area}),w.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&w.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),w.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[w.jsxs("span",{className:"text-lg font-bold",style:{color:o},children:[a," pts"]}),i?n?w.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-500/20 text-purple-400",children:" Discovered"}):w.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:u?"Gone":"Not found yet"}):t.capturedBy?w.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${r}20`,color:r},children:["Team ",t.capturedBy]}):w.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:u?"Gone":"Unclaimed"})]}),!i&&t.capturedByPlayer&&w.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[w.jsx("p",{className:"text-xs text-white/40",children:"Last captured by"}),w.jsx("p",{className:"text-sm font-medium text-white mt-0.5",children:t.capturedByPlayer})]})]})]})]})})}const fm=[null,...ps],QF=[{id:"off",label:"Off",icon:lF},{id:"circles",label:"Circles",icon:Y6},{id:"squares",label:"Squares",icon:hF},{id:"hexagons",label:"Hexagons",icon:sF}],YF=(t,e)=>{if(e==="off")return[];const n=t.filter(r=>r.capturedBy&&r.status!=="ghost"),i=[];return n.forEach(r=>{const[o,a]=r.location,u=.002,h=r.capturedBy;if(e==="circles"){const g=[];for(let m=0;m<32;m++){const _=m/32*2*Math.PI;g.push([o+u*Math.cos(_),a+u*Math.sin(_)*1.5])}i.push({team:h,coords:g,pointId:r.id})}else if(e==="squares"){const f=u*.8;i.push({team:h,coords:[[o-f,a-f*1.5],[o-f,a+f*1.5],[o+f,a+f*1.5],[o+f,a-f*1.5]],pointId:r.id})}else if(e==="hexagons"){const f=u*.9,g=[];for(let m=0;m<6;m++){const _=m/6*2*Math.PI+Math.PI/6;g.push([o+f*Math.cos(_),a+f*Math.sin(_)*1.5])}i.push({team:h,coords:g,pointId:r.id})}}),i};function XF(){const{player:t,artPoints:e,captureArt:n,discoveries:i}=Bi(),[r,o]=O.useState(null),[a,u]=O.useState(!1),[h,f]=O.useState(e),[g,m]=O.useState(nf.vysocany),[_,T]=O.useState("solo"),[b,R]=O.useState(!1),[V,k]=O.useState(!0),[P,C]=O.useState("off");O.useEffect(()=>{f(e)},[e]);const z=X=>{a?f(We=>We.map(pe=>{if(pe.id===X.id){const Z=(fm.indexOf(pe.capturedBy)+1)%fm.length;return{...pe,capturedBy:fm[Z]}}return pe})):o(X)},G=()=>{f(e.map(X=>({...X,capturedBy:null})))},B=a?h:e,A=O.useMemo(()=>H6(B),[B]),S=O.useMemo(()=>YF(B,P),[B,P]),N=O.useMemo(()=>iA(B),[B]),D=Object.values(N).reduce((X,We)=>X+We,0)||1,j=Object.keys(i).length,U=Xs.length,M=_==="solo";return w.jsxs("div",{className:"relative w-full h-full",children:[w.jsxs("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex items-center gap-3",children:[w.jsxs("div",{className:"flex bg-black/60 backdrop-blur-sm rounded-lg p-1 border border-white/10",children:[w.jsx("button",{onClick:()=>T("solo"),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-all ${M?"bg-purple-500 text-white":"text-white/50 hover:text-white/70"}`,children:"My Collection"}),w.jsx("button",{onClick:()=>T("multi"),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-all ${M?"text-white/50 hover:text-white/70":"bg-gradient-to-r from-red-500 to-blue-500 text-white"}`,children:"Team Battle"})]}),w.jsx("div",{className:"flex-1 flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:M?w.jsx(re.div,{className:"h-full bg-purple-500",initial:{width:0},animate:{width:`${j/U*100}%`},transition:{duration:.8}}):Object.entries(N).map(([X,We])=>{const pe=We/D*100;return w.jsx(re.div,{className:"h-full",style:{backgroundColor:ca(X)},initial:{width:0},animate:{width:`${pe}%`},transition:{duration:.8}},X)})})]}),w.jsxs("div",{className:"absolute top-14 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[M?w.jsxs(w.Fragment,{children:[w.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Your Collection"}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-3 h-3 rounded bg-purple-500"}),w.jsx("span",{className:"text-xs text-white/70",children:"Discovered"}),w.jsx("span",{className:"text-xs text-purple-400 ml-auto font-medium",children:j})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-3 h-3 rounded bg-white/20"}),w.jsx("span",{className:"text-xs text-white/50",children:"Not found"}),w.jsx("span",{className:"text-xs text-white/30 ml-auto",children:U-j})]})]})]}):w.jsxs(w.Fragment,{children:[w.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Team Battle"}),w.jsx("div",{className:"space-y-1.5",children:ps.map(X=>w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:ca(X)}}),w.jsxs("span",{className:`text-xs capitalize font-medium ${X===t.team?"text-white":"text-white/70"}`,children:[X," ",X===t.team&&"(you)"]}),w.jsx("span",{className:"text-xs text-white/40 ml-auto",children:N[X]||0})]},X))})]}),w.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[w.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),w.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),w.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(nf).map(X=>w.jsx(re.button,{onClick:()=>m(X),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${g.id===X.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:X.name},X.id))}),w.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[w.jsx(re.button,{onClick:()=>R(!b),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${b?"bg-white/20 border-white/30 text-white":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Map Settings",children:w.jsx(cF,{size:18})}),w.jsx(re.button,{onClick:()=>u(!a),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${a?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:w.jsx(eF,{size:18})}),a&&w.jsx(re.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:G,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:w.jsx(aA,{size:18})})]}),w.jsx(Ma,{children:b&&w.jsxs(re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"absolute top-24 right-4 z-[1000] w-48 bg-black/90 backdrop-blur-xl rounded-xl border border-white/10 overflow-hidden",children:[w.jsx("div",{className:"p-3 border-b border-white/10",children:w.jsx("h3",{className:"text-xs font-bold text-white/60 uppercase tracking-wider",children:"Display"})}),w.jsx("div",{className:"p-3 border-b border-white/5",children:w.jsxs("button",{onClick:()=>k(!V),className:"w-full flex items-center justify-between",children:[w.jsx("span",{className:"text-sm text-white/70",children:"Show Lines"}),w.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${V?"bg-blue-500":"bg-white/20"}`,children:w.jsx(re.div,{className:"w-4 h-4 bg-white rounded-full mt-0.5",animate:{x:V?22:2},transition:{type:"spring",stiffness:500,damping:30}})})]})}),w.jsxs("div",{className:"p-3",children:[w.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Territory Style"}),w.jsx("div",{className:"grid grid-cols-2 gap-1",children:QF.map(X=>{const We=X.icon;return w.jsxs("button",{onClick:()=>C(X.id),className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs transition-colors ${P===X.id?"bg-white/20 text-white":"bg-white/5 text-white/50 hover:bg-white/10"}`,children:[w.jsx(We,{size:12}),X.label]},X.id)})})]})]})}),w.jsx(Ma,{children:a&&w.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:w.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),w.jsxs(FF,{center:eA,zoom:tA,minZoom:B6,maxZoom:U6,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[w.jsx(UF,{url:C1.tileUrl,attribution:C1.attribution}),w.jsx(ZF,{}),w.jsx($F,{devMode:a}),w.jsx(qF,{hood:g}),w.jsx(GF,{}),w.jsx(D1,{positions:I1.map(X=>X.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),I1.map(X=>w.jsx(gA,{center:X.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},X.name)),!M&&S.map((X,We)=>w.jsx(BF,{positions:X.coords,pathOptions:{color:ca(X.team),fillColor:ca(X.team),fillOpacity:.15,weight:1,opacity:.4}},`territory-${X.pointId}`)),!M&&V&&Object.entries(A).map(([X,We])=>We.map((pe,Ze)=>w.jsx(D1,{positions:[pe.from,pe.to],pathOptions:{color:ca(X),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${X}-line-${Ze}`))),B.map(X=>{const We=X.status==="ghost",pe=i[X.id],Ze=M?pe?t.team:null:X.capturedBy,Z=WF(Ze,We,pe&&!M);return w.jsx(zF,{position:X.location,icon:Z,eventHandlers:{click:ce=>{ce.originalEvent.stopPropagation(),z(X)}}},`${X.id}-${Ze||"none"}-${pe?"d":""}`)})]}),w.jsx(Ma,{children:r&&w.jsx(KF,{point:r,onClose:()=>o(null),isDiscovered:i[r.id],isSoloView:M})})]})}function JF(){return w.jsx(re.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:w.jsx(XF,{})})}function ez(){const{player:t}=Bi(),[e,n]=O.useState(!1);return O.useEffect(()=>{if(t.team&&!e){n(!0);const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"}},[t.team,e]),t.team?w.jsx(re.div,{className:"flex-1 flex items-center justify-center p-8 bg-black",initial:{opacity:0},animate:{opacity:1},children:w.jsxs("div",{className:"text-center",children:[w.jsx(re.div,{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:w.jsx(iv,{size:48,className:"text-white"})}),w.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Opening AR Scanner"}),w.jsx("p",{className:"text-white/40 text-sm mb-4",children:"Point your camera at street art to capture it"}),w.jsx(aF,{className:"w-6 h-6 animate-spin mx-auto text-purple-400"})]})}):w.jsx(re.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:w.jsx(Z6,{size:36,className:"text-amber-500"})}),w.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),w.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start scanning street art"})]})})}const tz={red:"Red Team",blue:"Blue Team"};function nz({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return w.jsxs(re.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[w.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${st[t].hex}15 0%, transparent 60%)`}}),w.jsx(re.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:st[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),w.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${st[t].hex}30`},children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?w.jsx(nF,{size:20,className:"text-white"}):w.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),w.jsxs("div",{className:"flex-1",children:[w.jsx("p",{className:"font-semibold text-white",children:tz[t]}),w.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[w.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:st[t].hex}}),w.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-2xl font-bold",style:{color:st[t].hex},children:e.toLocaleString()}),w.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function iz({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return w.jsxs(re.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[w.jsx("div",{className:"w-8 flex justify-center",children:i?w.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:w.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):w.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),w.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${st[t.team].hex}20`,color:st[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&w.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),w.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),w.jsx("div",{className:"text-right",children:w.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function rz(){var g;const{teamScores:t,player:e,allPlayers:n}=Bi(),r=Object.entries(t).filter(([m])=>st[m]).sort((m,_)=>_[1]-m[1]),o=Object.values(t).reduce((m,_)=>m+_,0)||1,a=[...n];!a.find(m=>m.name===e.name)&&e.team&&e.name&&a.push({id:"current",name:e.name,team:e.team,score:e.score||0,captures:((g=e.capturedArt)==null?void 0:g.length)||0});const h=a.sort((m,_)=>_.score-m.score),f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return w.jsxs(re.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:f,children:[w.jsx(re.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:w.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[w.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:w.jsx(rv,{size:20,className:"text-white"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),w.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),w.jsxs("div",{className:"mb-8",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(mF,{size:16,className:"text-white/40"}),w.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),w.jsx("div",{className:"space-y-3",children:r.map(([m,_],T)=>w.jsx(nz,{team:m,score:_,rank:T,totalScore:o},m))})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(nv,{size:16,className:"text-white/40"}),w.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),w.jsx("div",{className:"space-y-2",children:h.map((m,_)=>w.jsx(iz,{player:m,rank:_,isCurrentPlayer:m.id==="current"},m.id))})]})]})}function sz(){var f,g;const{player:t,artPoints:e,resetAll:n}=Bi(),[i,r]=O.useState(!1),o=(e==null?void 0:e.filter(m=>t.capturedArt.includes(m.id)))||[],a=t.team?st[t.team].hex:"#64748b",u=t.team==="red"?"Red Team":"Blue Team",h=async()=>{if(!i){r(!0);try{const m=["red","blue"];let _=0,T=0;for(const b of Xs){const R=m[Math.floor(Math.random()*m.length)],V=Fa(b);R==="red"?_+=V:T+=V,await nr(Ai(cn,"streetart-captures",b.id),{artId:b.id,capturedBy:R,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:V,isFirstCapture:!0,isRecapture:!1})}await nr(Ai(cn,"streetart-teams","red"),{score:_},{merge:!0}),await nr(Ai(cn,"streetart-teams","blue"),{score:T},{merge:!0})}catch(m){console.error("Failed to randomize:",m)}r(!1)}};return w.jsxs(re.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx(re.div,{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${a}, ${a}50)`},whileHover:{scale:1.05},children:w.jsx("span",{className:"text-3xl font-black text-white",children:((g=(f=t.name)==null?void 0:f.charAt(0))==null?void 0:g.toUpperCase())||"?"})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:t.name}),w.jsx("p",{className:"text-sm",style:{color:a},children:u})]}),w.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[w.jsxs(re.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#eab30815",border:"1px solid #eab30830"},whileHover:{scale:1.02},children:[w.jsx(rv,{size:24,className:"mx-auto mb-2 text-yellow-500"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),w.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Score"})]}),w.jsxs(re.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#22c55e15",border:"1px solid #22c55e30"},whileHover:{scale:1.02},children:[w.jsx(iv,{size:24,className:"mx-auto mb-2 text-green-500"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:t.captureCount||o.length}),w.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Captures"})]}),w.jsxs(re.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#f9731615",border:"1px solid #f9731630"},whileHover:{scale:1.02},children:[w.jsx(nv,{size:24,className:"mx-auto mb-2 text-orange-500"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:t.maxStreak||0}),w.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Best Streak"})]})]}),w.jsxs("div",{className:"mb-8",children:[w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Lifetime Stats"}),w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-bold text-white",children:t.recaptureCount||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Recaptures"})]})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-bold text-white",children:t.firstCaptureCount||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"First Captures"})]})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsxs("p",{className:"text-lg font-bold text-white",children:[t.totalDistance?(t.totalDistance/1e3).toFixed(1):"0","km"]}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Distance Walked"})]})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-bold text-white",children:t.streak||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Current Streak"})]})]})]})]}),o.length>0&&w.jsxs("div",{className:"mb-8",children:[w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Your Captures"}),w.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.slice(0,8).map((m,_)=>w.jsx(re.div,{className:"aspect-square rounded-xl flex items-center justify-center",style:{backgroundColor:`${a}20`,border:`1px solid ${a}30`},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:_*.05},children:w.jsx("span",{className:"text-lg",children:""})},m.id)),o.length>8&&w.jsx("div",{className:"aspect-square rounded-xl flex items-center justify-center bg-white/5",children:w.jsxs("span",{className:"text-xs text-white/40",children:["+",o.length-8]})})]})]}),w.jsxs("div",{className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(sv,{size:14,className:"text-purple-400"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Game Master"})]}),w.jsxs(re.button,{onClick:h,disabled:i,className:"w-full p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 flex items-center gap-3 disabled:opacity-50",whileTap:{scale:.98},children:[w.jsx(lA,{size:20,className:"text-purple-400"}),w.jsx("span",{className:"text-sm text-purple-300",children:i?"Randomizing...":"Randomize All Territories"})]})]}),w.jsxs(re.button,{onClick:n,className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center gap-2 text-white/40 hover:text-white/60 transition-colors",whileTap:{scale:.98},children:[w.jsx(aA,{size:14}),w.jsx("span",{className:"text-xs",children:"Reset Game Data"})]}),w.jsx("p",{className:"text-center text-[10px] text-white/20 mt-6",children:"Street Art CTF v1.2.0"})]})}const oz="123";function az(){const t=Pf(),{artPoints:e,allPlayers:n,teamScores:i}=Bi(),[r,o]=O.useState(!1),[a,u]=O.useState(""),[h,f]=O.useState("all"),[g,m]=O.useState({}),[_,T]=O.useState(null);O.useEffect(()=>{sessionStorage.getItem("admin-auth")==="true"&&o(!0)},[]);const b=B=>{B.preventDefault(),a===oz?(o(!0),sessionStorage.setItem("admin-auth","true")):(T({type:"error",text:"Wrong password"}),setTimeout(()=>T(null),2e3))},R=(B,A)=>{T({type:B,text:A}),setTimeout(()=>T(null),3e3)},V=async(B,A)=>{m(S=>({...S,[B]:!0}));try{const S=A==="ghost"?"active":"ghost";await nr(Ai(cn,"streetart-captures",B),{status:S,statusUpdatedAt:new Date},{merge:!0}),R("success",`Point ${B} set to ${S}`)}catch(S){R("error","Failed to update: "+S.message),console.error(S)}m(S=>({...S,[B]:!1}))},k=async B=>{m(A=>({...A,[`reset-${B}`]:!0}));try{await um(Ai(cn,"streetart-captures",B)),R("success",`Ownership reset for ${B}`)}catch(A){R("error","Failed to reset ownership"),console.error(A)}m(A=>({...A,[`reset-${B}`]:!1}))},P=async()=>{if(confirm("Are you sure? This will reset ALL captures!")){m(B=>({...B,resetAll:!0}));try{const A=(await a1(Su(cn,"streetart-captures"))).docs.map(S=>um(S.ref));await Promise.all(A),R("success","All captures reset!")}catch(B){R("error","Failed to reset all captures"),console.error(B)}m(B=>({...B,resetAll:!1}))}},C=async()=>{if(confirm("Are you sure? This will delete ALL player data!")){m(B=>({...B,resetPlayers:!0}));try{const A=(await a1(Su(cn,"streetart-players"))).docs.map(S=>um(S.ref));await Promise.all(A),R("success","All players reset!")}catch(B){R("error","Failed to reset players"),console.error(B)}m(B=>({...B,resetPlayers:!1}))}},z=h==="all"?e:e.filter(B=>B.hood===h),G={total:e.length,captured:e.filter(B=>B.capturedBy).length,red:e.filter(B=>B.capturedBy==="red").length,blue:e.filter(B=>B.capturedBy==="blue").length,ghost:e.filter(B=>B.status==="ghost").length,players:n.length};return r?w.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] pb-24 overflow-y-auto",children:[w.jsx("div",{className:"sticky top-0 z-50 bg-[#0a0a0f]/90 backdrop-blur-xl border-b border-white/10 px-4 py-3",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2",children:w.jsx(K6,{size:24,className:"text-white/70"})}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(R1,{size:18,className:"text-purple-400"}),w.jsx("span",{className:"font-bold",children:"God Mode"})]}),w.jsx("div",{className:"w-10"})]})}),_&&w.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:`fixed top-16 left-4 right-4 z-50 p-3 rounded-xl text-center text-sm font-medium ${_.type==="error"?"bg-red-500/90":"bg-green-500/90"}`,children:_.text}),w.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.total}),w.jsx("div",{className:"text-xs text-white/40",children:"Points"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-red-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-red-400",children:G.red}),w.jsx("div",{className:"text-xs text-red-400/60",children:"Red"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-blue-400",children:G.blue}),w.jsx("div",{className:"text-xs text-blue-400/60",children:"Blue"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-white/60",children:G.ghost}),w.jsx("div",{className:"text-xs text-white/40",children:"Ghost"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.players}),w.jsx("div",{className:"text-xs text-white/40",children:"Players"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.captured}),w.jsx("div",{className:"text-xs text-white/40",children:"Captured"})]})]}),w.jsxs("div",{className:"px-4 mb-6",children:[w.jsxs("h2",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[w.jsx(sv,{size:14}),"Danger Zone"]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("button",{onClick:P,disabled:g.resetAll,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[g.resetAll?w.jsx(kh,{size:16,className:"animate-spin"}):w.jsx(pF,{size:16}),"Reset Captures"]}),w.jsxs("button",{onClick:C,disabled:g.resetPlayers,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[g.resetPlayers?w.jsx(kh,{size:16,className:"animate-spin"}):w.jsx(rf,{size:16}),"Reset Players"]})]})]}),w.jsx("div",{className:"px-4 mb-4",children:w.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[w.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h==="all"?"bg-white text-black":"bg-white/10 text-white/60"}`,children:"All"}),Object.values(nf).map(B=>w.jsx("button",{onClick:()=>f(B.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h===B.id?"bg-white text-black":"bg-white/10 text-white/60"}`,children:B.name},B.id))]})}),w.jsxs("div",{className:"px-4 space-y-2",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2",children:["Art Points (",z.length,")"]}),z.map(B=>{var S;const A=B.status==="ghost";return w.jsxs("div",{className:`p-4 rounded-xl border ${A?"bg-white/5 border-white/10 opacity-60":"bg-white/5 border-white/10"}`,children:[w.jsxs("div",{className:"flex items-start justify-between mb-2",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-medium",children:B.name}),A&&w.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-white/10 text-white/40",children:"GHOST"})]}),w.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[B.id,"  ",B.area,"  ",B.size,"  ",(S=nA[B.size])==null?void 0:S.points,"pts"]})]}),B.capturedBy&&w.jsx("div",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:B.capturedBy==="red"?"#ff6b6b20":"#4dabf720",color:B.capturedBy==="red"?"#ff6b6b":"#4dabf7"},children:B.capturedBy.toUpperCase()})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>V(B.id,B.status),disabled:g[B.id],className:`flex-1 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-1.5 ${A?"bg-green-500/20 text-green-400":"bg-white/10 text-white/60"}`,children:g[B.id]?w.jsx(kh,{size:14,className:"animate-spin"}):A?w.jsxs(w.Fragment,{children:[w.jsx(iF,{size:14})," Make Active"]}):w.jsxs(w.Fragment,{children:[w.jsx(sA,{size:14})," Make Ghost"]})}),B.capturedBy&&w.jsx("button",{onClick:()=>k(B.id),disabled:g[`reset-${B.id}`],className:"py-2 px-3 rounded-lg bg-white/10 text-white/60 text-xs font-medium flex items-center gap-1.5",children:g[`reset-${B.id}`]?w.jsx(kh,{size:14,className:"animate-spin"}):w.jsxs(w.Fragment,{children:[w.jsx(_F,{size:14})," Reset"]})})]})]},B.id)})]}),w.jsxs("div",{className:"px-4 mt-8",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2 flex items-center gap-2",children:[w.jsx(rf,{size:14}),"Players (",n.length,")"]}),w.jsx("div",{className:"space-y-2",children:n.map(B=>w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("div",{className:"font-medium",children:B.name}),w.jsxs("div",{className:"text-xs text-white/40",children:[B.captures||0," captures"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-sm font-bold",children:B.score||0}),w.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:B.team==="red"?"#ff6b6b":"#4dabf7"}})]})]},B.id))})]})]}):w.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-6",children:w.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-purple-500/20 flex items-center justify-center",children:w.jsx(R1,{size:32,className:"text-purple-400"})}),w.jsx("h1",{className:"text-2xl font-bold",children:"Admin Access"}),w.jsx("p",{className:"text-white/40 text-sm mt-1",children:"God Mode Panel"})]}),w.jsxs("form",{onSubmit:b,className:"space-y-4",children:[w.jsx("input",{type:"password",value:a,onChange:B=>u(B.target.value),placeholder:"Enter password...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-center focus:outline-none focus:border-purple-500/50"}),w.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-purple-500 text-white font-bold",children:"Enter"})]}),_&&w.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 p-3 rounded-lg text-center text-sm ${_.type==="error"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:_.text}),w.jsx("button",{onClick:()=>t(-1),className:"mt-6 w-full py-2 text-white/40 text-sm",children:" Back"})]})})}const lz=[{path:"/",icon:oF,label:"Home"},{path:"/map",icon:oA,label:"Map"},{path:"/scanner",icon:uF,label:"Scan"},{path:"/leaderboard",icon:rv,label:"Ranks"},{path:"/profile",icon:gF,label:"You"}];function uz(){return w.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[w.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),w.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:lz.map(({path:t,icon:e,label:n})=>w.jsx(ER,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>w.jsxs(re.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&w.jsx(re.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),w.jsx(re.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:w.jsx(e,{size:20,strokeWidth:i?2.5:2})}),w.jsx(re.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function cz({color:t}){const e=Array.from({length:12},(n,i)=>({id:i,angle:i/12*360,delay:i*.02}));return w.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.map(n=>w.jsx(re.div,{className:"absolute left-1/2 top-1/2 w-3 h-3 rounded-full",style:{backgroundColor:t},initial:{x:0,y:0,opacity:1,scale:1},animate:{x:Math.cos(n.angle*Math.PI/180)*150,y:Math.sin(n.angle*Math.PI/180)*150,opacity:0,scale:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"}},n.id))})}function hz(){var o;const{captureNotification:t}=Bi();if(!t)return null;const e=((o=st[t.team])==null?void 0:o.hex)||"#888",n=t.team==="red"?"RED":"BLUE",i=t.points||100,r=t.streak||0;return w.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden",children:[w.jsx(re.div,{className:"absolute inset-0",style:{backgroundColor:e},initial:{opacity:.3},animate:{opacity:[.3,.15,.2]},transition:{duration:.5}}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Array.from({length:8}).map((a,u)=>w.jsx(re.div,{className:"absolute w-1 origin-bottom",style:{backgroundColor:e,height:"50vh",transform:`rotate(${u*45}deg)`,opacity:.2},initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.3,delay:u*.02}},u))}),w.jsxs(re.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},exit:{scale:.5,opacity:0},transition:{type:"spring",damping:12,stiffness:200},className:"relative text-center p-8",children:[w.jsx(cz,{color:e}),w.jsxs(re.div,{className:"relative w-28 h-28 mx-auto mb-4",animate:{scale:[1,1.1,1]},transition:{duration:.5,repeat:2},children:[w.jsx("div",{className:"absolute inset-0 rounded-full blur-xl",style:{backgroundColor:e,opacity:.5}}),w.jsx("div",{className:"relative w-full h-full rounded-full flex items-center justify-center",style:{backgroundColor:e},children:t.isRecapture?w.jsx(fF,{size:56,className:"text-white"}):w.jsx(rF,{size:56,className:"text-white"})})]}),w.jsxs(re.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[w.jsx("h1",{className:"text-4xl font-black text-white tracking-tight mb-1",children:t.isRecapture?"STOLEN!":"CAPTURED!"}),w.jsx("p",{className:"text-lg font-semibold text-white/80",children:t.artName})]}),w.jsxs(re.div,{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"rgba(0,0,0,0.4)"},initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:[w.jsx(iv,{size:20,className:"text-white"}),w.jsxs("span",{className:"text-2xl font-black text-white",children:["+",i]}),r>1&&w.jsxs("span",{className:"flex items-center gap-1 text-orange-400 font-bold",children:[w.jsx(nv,{size:18}),r,"x"]})]}),w.jsxs(re.div,{className:"mt-4 flex items-center justify-center gap-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[w.jsx("span",{className:"text-white/60 text-sm",children:"by"}),w.jsx("span",{className:"font-bold text-white",children:t.playerName}),w.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-black",style:{backgroundColor:e},children:n})]})]})]})}function Rh({children:t}){const{player:e}=Bi();return e.team&&e.name&&e.name!=="Street Artist"?t:w.jsx(sP,{to:"/onboarding",replace:!0})}function dz(){const t=Po(),{player:e}=Bi(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding"||t.pathname==="/admin";return w.jsxs("div",{className:"h-full w-full flex flex-col",children:[w.jsx(Ma,{children:w.jsx(hz,{})}),w.jsx(Ma,{mode:"wait",children:w.jsxs(hR,{location:t,children:[w.jsx(Dr,{path:"/onboarding",element:w.jsx(TF,{})}),w.jsx(Dr,{path:"/",element:n?w.jsx(CF,{}):w.jsx(sP,{to:"/onboarding",replace:!0})}),w.jsx(Dr,{path:"/map",element:w.jsx(Rh,{children:w.jsx(JF,{})})}),w.jsx(Dr,{path:"/scanner",element:w.jsx(Rh,{children:w.jsx(ez,{})})}),w.jsx(Dr,{path:"/leaderboard",element:w.jsx(Rh,{children:w.jsx(rz,{})})}),w.jsx(Dr,{path:"/profile",element:w.jsx(Rh,{children:w.jsx(sz,{})})}),w.jsx(Dr,{path:"/admin",element:w.jsx(az,{})})]},t.pathname)}),!i&&n&&w.jsx(uz,{})]})}function fz(){return w.jsx($6,{children:w.jsx(dz,{})})}pm.createRoot(document.getElementById("root")).render(w.jsx(uo.StrictMode,{children:w.jsx(vR,{children:w.jsx(fz,{})})}));
