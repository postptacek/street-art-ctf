function MA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var OA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ST(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var IT={exports:{}},Qd={},CT={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=Symbol.for("react.element"),DA=Symbol.for("react.portal"),VA=Symbol.for("react.fragment"),jA=Symbol.for("react.strict_mode"),zA=Symbol.for("react.profiler"),FA=Symbol.for("react.provider"),BA=Symbol.for("react.context"),UA=Symbol.for("react.forward_ref"),HA=Symbol.for("react.suspense"),WA=Symbol.for("react.memo"),$A=Symbol.for("react.lazy"),Cv=Symbol.iterator;function qA(t){return t===null||typeof t!="object"?null:(t=Cv&&t[Cv]||t["@@iterator"],typeof t=="function"?t:null)}var AT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kT=Object.assign,bT={};function Za(t,e,n){this.props=t,this.context=e,this.refs=bT,this.updater=n||AT}Za.prototype.isReactComponent={};Za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RT(){}RT.prototype=Za.prototype;function Xg(t,e,n){this.props=t,this.context=e,this.refs=bT,this.updater=n||AT}var Jg=Xg.prototype=new RT;Jg.constructor=Xg;kT(Jg,Za.prototype);Jg.isPureReactComponent=!0;var Av=Array.isArray,LT=Object.prototype.hasOwnProperty,ey={current:null},NT={key:!0,ref:!0,__self:!0,__source:!0};function MT(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)LT.call(e,i)&&!NT.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Qu,type:t,key:o,ref:a,props:r,_owner:ey.current}}function GA(t,e){return{$$typeof:Qu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ty(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qu}function ZA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kv=/\/+/g;function ap(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZA(""+t.key):e.toString(36)}function Eh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Qu:case DA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+ap(a,0):i,Av(r)?(n="",t!=null&&(n=t.replace(kv,"$&/")+"/"),Eh(r,e,n,"",function(f){return f})):r!=null&&(ty(r)&&(r=GA(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(kv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Av(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+ap(o,u);a+=Eh(o,e,n,h,r)}else if(h=qA(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+ap(o,u++),a+=Eh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Kc(t,e,n){if(t==null)return t;var i=[],r=0;return Eh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function KA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Ph={transition:null},QA={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Ph,ReactCurrentOwner:ey};function OT(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Kc,forEach:function(t,e,n){Kc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kc(t,function(){e++}),e},toArray:function(t){return Kc(t,function(e){return e})||[]},only:function(t){if(!ty(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=Za;Ae.Fragment=VA;Ae.Profiler=zA;Ae.PureComponent=Xg;Ae.StrictMode=jA;Ae.Suspense=HA;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QA;Ae.act=OT;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=kT({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=ey.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)LT.call(e,h)&&!NT.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Qu,type:t.type,key:r,ref:o,props:i,_owner:a}};Ae.createContext=function(t){return t={$$typeof:BA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FA,_context:t},t.Consumer=t};Ae.createElement=MT;Ae.createFactory=function(t){var e=MT.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:UA,render:t}};Ae.isValidElement=ty;Ae.lazy=function(t){return{$$typeof:$A,_payload:{_status:-1,_result:t},_init:KA}};Ae.memo=function(t,e){return{$$typeof:WA,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=Ph.transition;Ph.transition={};try{t()}finally{Ph.transition=e}};Ae.unstable_act=OT;Ae.useCallback=function(t,e){return en.current.useCallback(t,e)};Ae.useContext=function(t){return en.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return en.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return en.current.useEffect(t,e)};Ae.useId=function(){return en.current.useId()};Ae.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return en.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};Ae.useRef=function(t){return en.current.useRef(t)};Ae.useState=function(t){return en.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return en.current.useTransition()};Ae.version="18.3.1";CT.exports=Ae;var j=CT.exports;const Xs=ST(j),YA=MA({__proto__:null,default:Xs},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA=j,JA=Symbol.for("react.element"),ek=Symbol.for("react.fragment"),tk=Object.prototype.hasOwnProperty,nk=XA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ik={key:!0,ref:!0,__self:!0,__source:!0};function DT(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)tk.call(e,i)&&!ik.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:JA,type:t,key:o,ref:a,props:r,_owner:nk.current}}Qd.Fragment=ek;Qd.jsx=DT;Qd.jsxs=DT;IT.exports=Qd;var x=IT.exports,fm={},VT={exports:{}},En={},jT={exports:{}},zT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,te){var Q=W.length;W.push(te);e:for(;0<Q;){var ee=Q-1>>>1,ae=W[ee];if(0<r(ae,te))W[ee]=te,W[Q]=ae,Q=ee;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var te=W[0],Q=W.pop();if(Q!==te){W[0]=Q;e:for(var ee=0,ae=W.length,me=ae>>>1;ee<me;){var ce=2*(ee+1)-1,pe=W[ce],ue=ce+1,Qe=W[ue];if(0>r(pe,Q))ue<ae&&0>r(Qe,pe)?(W[ee]=Qe,W[ue]=Q,ee=ue):(W[ee]=pe,W[ce]=Q,ee=ce);else if(ue<ae&&0>r(Qe,Q))W[ee]=Qe,W[ue]=Q,ee=ue;else break e}}return te}function r(W,te){var Q=W.sortIndex-te.sortIndex;return Q!==0?Q:W.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,_=3,T=!1,k=!1,b=!1,z=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(W){for(var te=n(f);te!==null;){if(te.callback===null)i(f);else if(te.startTime<=W)i(f),te.sortIndex=te.expirationTime,e(h,te);else break;te=n(f)}}function F(W){if(b=!1,S(W),!k)if(n(h)!==null)k=!0,Se(G);else{var te=n(f);te!==null&&rt(F,te.startTime-W)}}function G(W,te){k=!1,b&&(b=!1,C(I),I=-1),T=!0;var Q=_;try{for(S(te),g=n(h);g!==null&&(!(g.expirationTime>te)||W&&!D());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,_=g.priorityLevel;var ae=ee(g.expirationTime<=te);te=t.unstable_now(),typeof ae=="function"?g.callback=ae:g===n(h)&&i(h),S(te)}else i(h);g=n(h)}if(g!==null)var me=!0;else{var ce=n(f);ce!==null&&rt(F,ce.startTime-te),me=!1}return me}finally{g=null,_=Q,T=!1}}var Z=!1,R=null,I=-1,N=5,O=-1;function D(){return!(t.unstable_now()-O<N)}function B(){if(R!==null){var W=t.unstable_now();O=W;var te=!0;try{te=R(!0,W)}finally{te?M():(Z=!1,R=null)}}else Z=!1}var M;if(typeof P=="function")M=function(){P(B)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,dt=xe.port2;xe.port1.onmessage=B,M=function(){dt.postMessage(null)}}else M=function(){z(B,0)};function Se(W){R=W,Z||(Z=!0,M())}function rt(W,te){I=z(function(){W(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){k||T||(k=!0,Se(G))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(W){switch(_){case 1:case 2:case 3:var te=3;break;default:te=_}var Q=_;_=te;try{return W()}finally{_=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,te){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=_;_=W;try{return te()}finally{_=Q}},t.unstable_scheduleCallback=function(W,te,Q){var ee=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ee+Q:ee):Q=ee,W){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,W={id:m++,callback:te,priorityLevel:W,startTime:Q,expirationTime:ae,sortIndex:-1},Q>ee?(W.sortIndex=Q,e(f,W),n(h)===null&&W===n(f)&&(b?(C(I),I=-1):b=!0,rt(F,Q-ee))):(W.sortIndex=ae,e(h,W),k||T||(k=!0,Se(G))),W},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(W){var te=_;return function(){var Q=_;_=te;try{return W.apply(this,arguments)}finally{_=Q}}}})(zT);jT.exports=zT;var rk=jT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk=j,wn=rk;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FT=new Set,vu={};function uo(t,e){ba(t,e),ba(t+"Capture",e)}function ba(t,e){for(vu[t]=e,t=0;t<e.length;t++)FT.add(e[t])}var Xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pm=Object.prototype.hasOwnProperty,ok=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bv={},Rv={};function ak(t){return pm.call(Rv,t)?!0:pm.call(bv,t)?!1:ok.test(t)?Rv[t]=!0:(bv[t]=!0,!1)}function lk(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uk(t,e,n,i){if(e===null||typeof e>"u"||lk(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ny=/[\-:]([a-z])/g;function iy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ny,iy);Ot[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ny,iy);Ot[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ny,iy);Ot[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ry(t,e,n,i){var r=Ot.hasOwnProperty(e)?Ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uk(e,n,r,i)&&(n=null),i||r===null?ak(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var lr=sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qc=Symbol.for("react.element"),ea=Symbol.for("react.portal"),ta=Symbol.for("react.fragment"),sy=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),UT=Symbol.for("react.context"),oy=Symbol.for("react.forward_ref"),gm=Symbol.for("react.suspense"),ym=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),HT=Symbol.for("react.offscreen"),Lv=Symbol.iterator;function Ll(t){return t===null||typeof t!="object"?null:(t=Lv&&t[Lv]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,lp;function Ul(t){if(lp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lp=e&&e[1]||""}return`
`+lp+t}var up=!1;function cp(t,e){if(!t||up)return"";up=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{up=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ul(t):""}function ck(t){switch(t.tag){case 5:return Ul(t.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return t=cp(t.type,!1),t;case 11:return t=cp(t.type.render,!1),t;case 1:return t=cp(t.type,!0),t;default:return""}}function _m(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ta:return"Fragment";case ea:return"Portal";case mm:return"Profiler";case sy:return"StrictMode";case gm:return"Suspense";case ym:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case UT:return(t.displayName||"Context")+".Consumer";case BT:return(t._context.displayName||"Context")+".Provider";case oy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ay:return e=t.displayName||null,e!==null?e:_m(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return _m(t(e))}catch{}}return null}function hk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _m(e);case 8:return e===sy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ns(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dk(t){var e=WT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yc(t){t._valueTracker||(t._valueTracker=dk(t))}function $T(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=WT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Gh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vm(t,e){var n=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ns(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qT(t,e){e=e.checked,e!=null&&ry(t,"checked",e,!1)}function wm(t,e){qT(t,e);var n=ns(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tm(t,e.type,ns(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tm(t,e,n){(e!=="number"||Gh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hl=Array.isArray;function ya(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ns(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ov(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Hl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ns(n)}}function GT(t,e){var n=ns(e.value),i=ns(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Dv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xc,KT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xc=Xc||document.createElement("div"),Xc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fk=["Webkit","ms","Moz","O"];Object.keys(Xl).forEach(function(t){fk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xl[e]=Xl[t]})});function QT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xl.hasOwnProperty(t)&&Xl[t]?(""+e).trim():e+"px"}function YT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=QT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var pk=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pm(t,e){if(e){if(pk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Im=null;function ly(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cm=null,_a=null,va=null;function Vv(t){if(t=Ju(t)){if(typeof Cm!="function")throw Error(J(280));var e=t.stateNode;e&&(e=tf(e),Cm(t.stateNode,t.type,e))}}function XT(t){_a?va?va.push(t):va=[t]:_a=t}function JT(){if(_a){var t=_a,e=va;if(va=_a=null,Vv(t),e)for(t=0;t<e.length;t++)Vv(e[t])}}function ex(t,e){return t(e)}function tx(){}var hp=!1;function nx(t,e,n){if(hp)return t(e,n);hp=!0;try{return ex(t,e,n)}finally{hp=!1,(_a!==null||va!==null)&&(tx(),JT())}}function Tu(t,e){var n=t.stateNode;if(n===null)return null;var i=tf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Am=!1;if(Xi)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){Am=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Am=!1}function mk(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var Jl=!1,Zh=null,Kh=!1,km=null,gk={onError:function(t){Jl=!0,Zh=t}};function yk(t,e,n,i,r,o,a,u,h){Jl=!1,Zh=null,mk.apply(gk,arguments)}function _k(t,e,n,i,r,o,a,u,h){if(yk.apply(this,arguments),Jl){if(Jl){var f=Zh;Jl=!1,Zh=null}else throw Error(J(198));Kh||(Kh=!0,km=f)}}function co(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ix(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jv(t){if(co(t)!==t)throw Error(J(188))}function vk(t){var e=t.alternate;if(!e){if(e=co(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return jv(r),t;if(o===i)return jv(r),e;o=o.sibling}throw Error(J(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function rx(t){return t=vk(t),t!==null?sx(t):null}function sx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sx(t);if(e!==null)return e;t=t.sibling}return null}var ox=wn.unstable_scheduleCallback,zv=wn.unstable_cancelCallback,wk=wn.unstable_shouldYield,Tk=wn.unstable_requestPaint,ut=wn.unstable_now,xk=wn.unstable_getCurrentPriorityLevel,uy=wn.unstable_ImmediatePriority,ax=wn.unstable_UserBlockingPriority,Qh=wn.unstable_NormalPriority,Ek=wn.unstable_LowPriority,lx=wn.unstable_IdlePriority,Yd=null,gi=null;function Pk(t){if(gi&&typeof gi.onCommitFiberRoot=="function")try{gi.onCommitFiberRoot(Yd,t,void 0,(t.current.flags&128)===128)}catch{}}var ei=Math.clz32?Math.clz32:Ck,Sk=Math.log,Ik=Math.LN2;function Ck(t){return t>>>=0,t===0?32:31-(Sk(t)/Ik|0)|0}var Jc=64,eh=4194304;function Wl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Wl(u):(o&=a,o!==0&&(i=Wl(o)))}else a=n&~r,a!==0?i=Wl(a):o!==0&&(i=Wl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ei(e),r=1<<n,i|=t[n],e&=~r;return i}function Ak(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ei(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=Ak(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function bm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ux(){var t=Jc;return Jc<<=1,!(Jc&4194240)&&(Jc=64),t}function dp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ei(e),t[e]=n}function bk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ei(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function cy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ei(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ue=0;function cx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hx,hy,dx,fx,px,Rm=!1,th=[],Fr=null,Br=null,Ur=null,xu=new Map,Eu=new Map,kr=[],Rk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fv(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":xu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(e.pointerId)}}function Ml(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Ju(e),e!==null&&hy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Lk(t,e,n,i,r){switch(e){case"focusin":return Fr=Ml(Fr,t,e,n,i,r),!0;case"dragenter":return Br=Ml(Br,t,e,n,i,r),!0;case"mouseover":return Ur=Ml(Ur,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return xu.set(o,Ml(xu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Eu.set(o,Ml(Eu.get(o)||null,t,e,n,i,r)),!0}return!1}function mx(t){var e=Us(t.target);if(e!==null){var n=co(e);if(n!==null){if(e=n.tag,e===13){if(e=ix(n),e!==null){t.blockedOn=e,px(t.priority,function(){dx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Im=i,n.target.dispatchEvent(i),Im=null}else return e=Ju(n),e!==null&&hy(e),t.blockedOn=n,!1;e.shift()}return!0}function Bv(t,e,n){Sh(t)&&n.delete(e)}function Nk(){Rm=!1,Fr!==null&&Sh(Fr)&&(Fr=null),Br!==null&&Sh(Br)&&(Br=null),Ur!==null&&Sh(Ur)&&(Ur=null),xu.forEach(Bv),Eu.forEach(Bv)}function Ol(t,e){t.blockedOn===e&&(t.blockedOn=null,Rm||(Rm=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,Nk)))}function Pu(t){function e(r){return Ol(r,t)}if(0<th.length){Ol(th[0],t);for(var n=1;n<th.length;n++){var i=th[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fr!==null&&Ol(Fr,t),Br!==null&&Ol(Br,t),Ur!==null&&Ol(Ur,t),xu.forEach(e),Eu.forEach(e),n=0;n<kr.length;n++)i=kr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<kr.length&&(n=kr[0],n.blockedOn===null);)mx(n),n.blockedOn===null&&kr.shift()}var wa=lr.ReactCurrentBatchConfig,Xh=!0;function Mk(t,e,n,i){var r=Ue,o=wa.transition;wa.transition=null;try{Ue=1,dy(t,e,n,i)}finally{Ue=r,wa.transition=o}}function Ok(t,e,n,i){var r=Ue,o=wa.transition;wa.transition=null;try{Ue=4,dy(t,e,n,i)}finally{Ue=r,wa.transition=o}}function dy(t,e,n,i){if(Xh){var r=Lm(t,e,n,i);if(r===null)xp(t,e,i,Jh,n),Fv(t,i);else if(Lk(r,t,e,n,i))i.stopPropagation();else if(Fv(t,i),e&4&&-1<Rk.indexOf(t)){for(;r!==null;){var o=Ju(r);if(o!==null&&hx(o),o=Lm(t,e,n,i),o===null&&xp(t,e,i,Jh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else xp(t,e,i,null,n)}}var Jh=null;function Lm(t,e,n,i){if(Jh=null,t=ly(i),t=Us(t),t!==null)if(e=co(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ix(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jh=t,null}function gx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xk()){case uy:return 1;case ax:return 4;case Qh:case Ek:return 16;case lx:return 536870912;default:return 16}default:return 16}}var Dr=null,fy=null,Ih=null;function yx(){if(Ih)return Ih;var t,e=fy,n=e.length,i,r="value"in Dr?Dr.value:Dr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Ih=r.slice(t,1<i?1-i:void 0)}function Ch(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nh(){return!0}function Uv(){return!1}function Pn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?nh:Uv,this.isPropagationStopped=Uv,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nh)},persist:function(){},isPersistent:nh}),e}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},py=Pn(Ka),Xu=nt({},Ka,{view:0,detail:0}),Dk=Pn(Xu),fp,pp,Dl,Xd=nt({},Xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:my,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dl&&(Dl&&t.type==="mousemove"?(fp=t.screenX-Dl.screenX,pp=t.screenY-Dl.screenY):pp=fp=0,Dl=t),fp)},movementY:function(t){return"movementY"in t?t.movementY:pp}}),Hv=Pn(Xd),Vk=nt({},Xd,{dataTransfer:0}),jk=Pn(Vk),zk=nt({},Xu,{relatedTarget:0}),mp=Pn(zk),Fk=nt({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Bk=Pn(Fk),Uk=nt({},Ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hk=Pn(Uk),Wk=nt({},Ka,{data:0}),Wv=Pn(Wk),$k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gk[t])?!!e[t]:!1}function my(){return Zk}var Kk=nt({},Xu,{key:function(t){if(t.key){var e=$k[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ch(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:my,charCode:function(t){return t.type==="keypress"?Ch(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ch(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qk=Pn(Kk),Yk=nt({},Xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$v=Pn(Yk),Xk=nt({},Xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:my}),Jk=Pn(Xk),eb=nt({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),tb=Pn(eb),nb=nt({},Xd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ib=Pn(nb),rb=[9,13,27,32],gy=Xi&&"CompositionEvent"in window,eu=null;Xi&&"documentMode"in document&&(eu=document.documentMode);var sb=Xi&&"TextEvent"in window&&!eu,_x=Xi&&(!gy||eu&&8<eu&&11>=eu),qv=" ",Gv=!1;function vx(t,e){switch(t){case"keyup":return rb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var na=!1;function ob(t,e){switch(t){case"compositionend":return wx(e);case"keypress":return e.which!==32?null:(Gv=!0,qv);case"textInput":return t=e.data,t===qv&&Gv?null:t;default:return null}}function ab(t,e){if(na)return t==="compositionend"||!gy&&vx(t,e)?(t=yx(),Ih=fy=Dr=null,na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _x&&e.locale!=="ko"?null:e.data;default:return null}}var lb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lb[t.type]:e==="textarea"}function Tx(t,e,n,i){XT(i),e=ed(e,"onChange"),0<e.length&&(n=new py("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var tu=null,Su=null;function ub(t){Lx(t,0)}function Jd(t){var e=sa(t);if($T(e))return t}function cb(t,e){if(t==="change")return e}var xx=!1;if(Xi){var gp;if(Xi){var yp="oninput"in document;if(!yp){var Kv=document.createElement("div");Kv.setAttribute("oninput","return;"),yp=typeof Kv.oninput=="function"}gp=yp}else gp=!1;xx=gp&&(!document.documentMode||9<document.documentMode)}function Qv(){tu&&(tu.detachEvent("onpropertychange",Ex),Su=tu=null)}function Ex(t){if(t.propertyName==="value"&&Jd(Su)){var e=[];Tx(e,Su,t,ly(t)),nx(ub,e)}}function hb(t,e,n){t==="focusin"?(Qv(),tu=e,Su=n,tu.attachEvent("onpropertychange",Ex)):t==="focusout"&&Qv()}function db(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jd(Su)}function fb(t,e){if(t==="click")return Jd(e)}function pb(t,e){if(t==="input"||t==="change")return Jd(e)}function mb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ni=typeof Object.is=="function"?Object.is:mb;function Iu(t,e){if(ni(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!pm.call(e,r)||!ni(t[r],e[r]))return!1}return!0}function Yv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xv(t,e){var n=Yv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yv(n)}}function Px(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Px(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sx(){for(var t=window,e=Gh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gh(t.document)}return e}function yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gb(t){var e=Sx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Px(n.ownerDocument.documentElement,n)){if(i!==null&&yy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Xv(n,o);var a=Xv(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yb=Xi&&"documentMode"in document&&11>=document.documentMode,ia=null,Nm=null,nu=null,Mm=!1;function Jv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mm||ia==null||ia!==Gh(i)||(i=ia,"selectionStart"in i&&yy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nu&&Iu(nu,i)||(nu=i,i=ed(Nm,"onSelect"),0<i.length&&(e=new py("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ia)))}function ih(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ra={animationend:ih("Animation","AnimationEnd"),animationiteration:ih("Animation","AnimationIteration"),animationstart:ih("Animation","AnimationStart"),transitionend:ih("Transition","TransitionEnd")},_p={},Ix={};Xi&&(Ix=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function ef(t){if(_p[t])return _p[t];if(!ra[t])return t;var e=ra[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ix)return _p[t]=e[n];return t}var Cx=ef("animationend"),Ax=ef("animationiteration"),kx=ef("animationstart"),bx=ef("transitionend"),Rx=new Map,e0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(t,e){Rx.set(t,e),uo(e,[t])}for(var vp=0;vp<e0.length;vp++){var wp=e0[vp],_b=wp.toLowerCase(),vb=wp[0].toUpperCase()+wp.slice(1);fs(_b,"on"+vb)}fs(Cx,"onAnimationEnd");fs(Ax,"onAnimationIteration");fs(kx,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(bx,"onTransitionEnd");ba("onMouseEnter",["mouseout","mouseover"]);ba("onMouseLeave",["mouseout","mouseover"]);ba("onPointerEnter",["pointerout","pointerover"]);ba("onPointerLeave",["pointerout","pointerover"]);uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wb=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function t0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,_k(i,e,void 0,t),t.currentTarget=null}function Lx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;t0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;t0(r,u,f),o=h}}}if(Kh)throw t=km,Kh=!1,km=null,t}function qe(t,e){var n=e[zm];n===void 0&&(n=e[zm]=new Set);var i=t+"__bubble";n.has(i)||(Nx(e,t,2,!1),n.add(i))}function Tp(t,e,n){var i=0;e&&(i|=4),Nx(n,t,i,e)}var rh="_reactListening"+Math.random().toString(36).slice(2);function Cu(t){if(!t[rh]){t[rh]=!0,FT.forEach(function(n){n!=="selectionchange"&&(wb.has(n)||Tp(n,!1,t),Tp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rh]||(e[rh]=!0,Tp("selectionchange",!1,e))}}function Nx(t,e,n,i){switch(gx(e)){case 1:var r=Mk;break;case 4:r=Ok;break;default:r=dy}n=r.bind(null,e,n,t),r=void 0,!Am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function xp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Us(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}nx(function(){var f=o,m=ly(n),g=[];e:{var _=Rx.get(t);if(_!==void 0){var T=py,k=t;switch(t){case"keypress":if(Ch(n)===0)break e;case"keydown":case"keyup":T=Qk;break;case"focusin":k="focus",T=mp;break;case"focusout":k="blur",T=mp;break;case"beforeblur":case"afterblur":T=mp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Hv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=jk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Jk;break;case Cx:case Ax:case kx:T=Bk;break;case bx:T=tb;break;case"scroll":T=Dk;break;case"wheel":T=ib;break;case"copy":case"cut":case"paste":T=Hk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=$v}var b=(e&4)!==0,z=!b&&t==="scroll",C=b?_!==null?_+"Capture":null:_;b=[];for(var P=f,S;P!==null;){S=P;var F=S.stateNode;if(S.tag===5&&F!==null&&(S=F,C!==null&&(F=Tu(P,C),F!=null&&b.push(Au(P,F,S)))),z)break;P=P.return}0<b.length&&(_=new T(_,k,null,n,m),g.push({event:_,listeners:b}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&n!==Im&&(k=n.relatedTarget||n.fromElement)&&(Us(k)||k[Ji]))break e;if((T||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,T?(k=n.relatedTarget||n.toElement,T=f,k=k?Us(k):null,k!==null&&(z=co(k),k!==z||k.tag!==5&&k.tag!==6)&&(k=null)):(T=null,k=f),T!==k)){if(b=Hv,F="onMouseLeave",C="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(b=$v,F="onPointerLeave",C="onPointerEnter",P="pointer"),z=T==null?_:sa(T),S=k==null?_:sa(k),_=new b(F,P+"leave",T,n,m),_.target=z,_.relatedTarget=S,F=null,Us(m)===f&&(b=new b(C,P+"enter",k,n,m),b.target=S,b.relatedTarget=z,F=b),z=F,T&&k)t:{for(b=T,C=k,P=0,S=b;S;S=Zo(S))P++;for(S=0,F=C;F;F=Zo(F))S++;for(;0<P-S;)b=Zo(b),P--;for(;0<S-P;)C=Zo(C),S--;for(;P--;){if(b===C||C!==null&&b===C.alternate)break t;b=Zo(b),C=Zo(C)}b=null}else b=null;T!==null&&n0(g,_,T,b,!1),k!==null&&z!==null&&n0(g,z,k,b,!0)}}e:{if(_=f?sa(f):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var G=cb;else if(Zv(_))if(xx)G=pb;else{G=db;var Z=hb}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(G=fb);if(G&&(G=G(t,f))){Tx(g,G,n,m);break e}Z&&Z(t,_,f),t==="focusout"&&(Z=_._wrapperState)&&Z.controlled&&_.type==="number"&&Tm(_,"number",_.value)}switch(Z=f?sa(f):window,t){case"focusin":(Zv(Z)||Z.contentEditable==="true")&&(ia=Z,Nm=f,nu=null);break;case"focusout":nu=Nm=ia=null;break;case"mousedown":Mm=!0;break;case"contextmenu":case"mouseup":case"dragend":Mm=!1,Jv(g,n,m);break;case"selectionchange":if(yb)break;case"keydown":case"keyup":Jv(g,n,m)}var R;if(gy)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else na?vx(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(_x&&n.locale!=="ko"&&(na||I!=="onCompositionStart"?I==="onCompositionEnd"&&na&&(R=yx()):(Dr=m,fy="value"in Dr?Dr.value:Dr.textContent,na=!0)),Z=ed(f,I),0<Z.length&&(I=new Wv(I,t,null,n,m),g.push({event:I,listeners:Z}),R?I.data=R:(R=wx(n),R!==null&&(I.data=R)))),(R=sb?ob(t,n):ab(t,n))&&(f=ed(f,"onBeforeInput"),0<f.length&&(m=new Wv("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=R))}Lx(g,e)})}function Au(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ed(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Tu(t,n),o!=null&&i.unshift(Au(t,o,r)),o=Tu(t,e),o!=null&&i.push(Au(t,o,r))),t=t.return}return i}function Zo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function n0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=Tu(n,o),h!=null&&a.unshift(Au(n,h,u))):r||(h=Tu(n,o),h!=null&&a.push(Au(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Tb=/\r\n?/g,xb=/\u0000|\uFFFD/g;function i0(t){return(typeof t=="string"?t:""+t).replace(Tb,`
`).replace(xb,"")}function sh(t,e,n){if(e=i0(e),i0(t)!==e&&n)throw Error(J(425))}function td(){}var Om=null,Dm=null;function Vm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jm=typeof setTimeout=="function"?setTimeout:void 0,Eb=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,Pb=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(t){return r0.resolve(null).then(t).catch(Sb)}:jm;function Sb(t){setTimeout(function(){throw t})}function Ep(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Pu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Pu(e)}function Hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),mi="__reactFiber$"+Qa,ku="__reactProps$"+Qa,Ji="__reactContainer$"+Qa,zm="__reactEvents$"+Qa,Ib="__reactListeners$"+Qa,Cb="__reactHandles$"+Qa;function Us(t){var e=t[mi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ji]||n[mi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s0(t);t!==null;){if(n=t[mi])return n;t=s0(t)}return e}t=n,n=t.parentNode}return null}function Ju(t){return t=t[mi]||t[Ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function tf(t){return t[ku]||null}var Fm=[],oa=-1;function ps(t){return{current:t}}function Ke(t){0>oa||(t.current=Fm[oa],Fm[oa]=null,oa--)}function We(t,e){oa++,Fm[oa]=t.current,t.current=e}var is={},qt=ps(is),cn=ps(!1),Js=is;function Ra(t,e){var n=t.type.contextTypes;if(!n)return is;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function hn(t){return t=t.childContextTypes,t!=null}function nd(){Ke(cn),Ke(qt)}function o0(t,e,n){if(qt.current!==is)throw Error(J(168));We(qt,e),We(cn,n)}function Mx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(J(108,hk(t)||"Unknown",r));return nt({},n,i)}function id(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||is,Js=qt.current,We(qt,t),We(cn,cn.current),!0}function a0(t,e,n){var i=t.stateNode;if(!i)throw Error(J(169));n?(t=Mx(t,e,Js),i.__reactInternalMemoizedMergedChildContext=t,Ke(cn),Ke(qt),We(qt,t)):Ke(cn),We(cn,n)}var Ui=null,nf=!1,Pp=!1;function Ox(t){Ui===null?Ui=[t]:Ui.push(t)}function Ab(t){nf=!0,Ox(t)}function ms(){if(!Pp&&Ui!==null){Pp=!0;var t=0,e=Ue;try{var n=Ui;for(Ue=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ui=null,nf=!1}catch(r){throw Ui!==null&&(Ui=Ui.slice(t+1)),ox(uy,ms),r}finally{Ue=e,Pp=!1}}return null}var aa=[],la=0,rd=null,sd=0,Mn=[],On=0,eo=null,Hi=1,Wi="";function Os(t,e){aa[la++]=sd,aa[la++]=rd,rd=t,sd=e}function Dx(t,e,n){Mn[On++]=Hi,Mn[On++]=Wi,Mn[On++]=eo,eo=t;var i=Hi;t=Wi;var r=32-ei(i)-1;i&=~(1<<r),n+=1;var o=32-ei(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Hi=1<<32-ei(e)+r|n<<r|i,Wi=o+t}else Hi=1<<o|n<<r|i,Wi=t}function _y(t){t.return!==null&&(Os(t,1),Dx(t,1,0))}function vy(t){for(;t===rd;)rd=aa[--la],aa[la]=null,sd=aa[--la],aa[la]=null;for(;t===eo;)eo=Mn[--On],Mn[On]=null,Wi=Mn[--On],Mn[On]=null,Hi=Mn[--On],Mn[On]=null}var vn=null,_n=null,Ye=!1,Qn=null;function Vx(t,e){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function l0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,_n=Hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=eo!==null?{id:Hi,overflow:Wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,_n=null,!0):!1;default:return!1}}function Bm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Um(t){if(Ye){var e=_n;if(e){var n=e;if(!l0(t,e)){if(Bm(t))throw Error(J(418));e=Hr(n.nextSibling);var i=vn;e&&l0(t,e)?Vx(i,n):(t.flags=t.flags&-4097|2,Ye=!1,vn=t)}}else{if(Bm(t))throw Error(J(418));t.flags=t.flags&-4097|2,Ye=!1,vn=t}}}function u0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function oh(t){if(t!==vn)return!1;if(!Ye)return u0(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vm(t.type,t.memoizedProps)),e&&(e=_n)){if(Bm(t))throw jx(),Error(J(418));for(;e;)Vx(t,e),e=Hr(e.nextSibling)}if(u0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=Hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=vn?Hr(t.stateNode.nextSibling):null;return!0}function jx(){for(var t=_n;t;)t=Hr(t.nextSibling)}function La(){_n=vn=null,Ye=!1}function wy(t){Qn===null?Qn=[t]:Qn.push(t)}var kb=lr.ReactCurrentBatchConfig;function Vl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var i=n.stateNode}if(!i)throw Error(J(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function ah(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c0(t){var e=t._init;return e(t._payload)}function zx(t){function e(C,P){if(t){var S=C.deletions;S===null?(C.deletions=[P],C.flags|=16):S.push(P)}}function n(C,P){if(!t)return null;for(;P!==null;)e(C,P),P=P.sibling;return null}function i(C,P){for(C=new Map;P!==null;)P.key!==null?C.set(P.key,P):C.set(P.index,P),P=P.sibling;return C}function r(C,P){return C=Gr(C,P),C.index=0,C.sibling=null,C}function o(C,P,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<P?(C.flags|=2,P):S):(C.flags|=2,P)):(C.flags|=1048576,P)}function a(C){return t&&C.alternate===null&&(C.flags|=2),C}function u(C,P,S,F){return P===null||P.tag!==6?(P=Rp(S,C.mode,F),P.return=C,P):(P=r(P,S),P.return=C,P)}function h(C,P,S,F){var G=S.type;return G===ta?m(C,P,S.props.children,F,S.key):P!==null&&(P.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Ir&&c0(G)===P.type)?(F=r(P,S.props),F.ref=Vl(C,P,S),F.return=C,F):(F=Mh(S.type,S.key,S.props,null,C.mode,F),F.ref=Vl(C,P,S),F.return=C,F)}function f(C,P,S,F){return P===null||P.tag!==4||P.stateNode.containerInfo!==S.containerInfo||P.stateNode.implementation!==S.implementation?(P=Lp(S,C.mode,F),P.return=C,P):(P=r(P,S.children||[]),P.return=C,P)}function m(C,P,S,F,G){return P===null||P.tag!==7?(P=Zs(S,C.mode,F,G),P.return=C,P):(P=r(P,S),P.return=C,P)}function g(C,P,S){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Rp(""+P,C.mode,S),P.return=C,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Qc:return S=Mh(P.type,P.key,P.props,null,C.mode,S),S.ref=Vl(C,null,P),S.return=C,S;case ea:return P=Lp(P,C.mode,S),P.return=C,P;case Ir:var F=P._init;return g(C,F(P._payload),S)}if(Hl(P)||Ll(P))return P=Zs(P,C.mode,S,null),P.return=C,P;ah(C,P)}return null}function _(C,P,S,F){var G=P!==null?P.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return G!==null?null:u(C,P,""+S,F);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Qc:return S.key===G?h(C,P,S,F):null;case ea:return S.key===G?f(C,P,S,F):null;case Ir:return G=S._init,_(C,P,G(S._payload),F)}if(Hl(S)||Ll(S))return G!==null?null:m(C,P,S,F,null);ah(C,S)}return null}function T(C,P,S,F,G){if(typeof F=="string"&&F!==""||typeof F=="number")return C=C.get(S)||null,u(P,C,""+F,G);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Qc:return C=C.get(F.key===null?S:F.key)||null,h(P,C,F,G);case ea:return C=C.get(F.key===null?S:F.key)||null,f(P,C,F,G);case Ir:var Z=F._init;return T(C,P,S,Z(F._payload),G)}if(Hl(F)||Ll(F))return C=C.get(S)||null,m(P,C,F,G,null);ah(P,F)}return null}function k(C,P,S,F){for(var G=null,Z=null,R=P,I=P=0,N=null;R!==null&&I<S.length;I++){R.index>I?(N=R,R=null):N=R.sibling;var O=_(C,R,S[I],F);if(O===null){R===null&&(R=N);break}t&&R&&O.alternate===null&&e(C,R),P=o(O,P,I),Z===null?G=O:Z.sibling=O,Z=O,R=N}if(I===S.length)return n(C,R),Ye&&Os(C,I),G;if(R===null){for(;I<S.length;I++)R=g(C,S[I],F),R!==null&&(P=o(R,P,I),Z===null?G=R:Z.sibling=R,Z=R);return Ye&&Os(C,I),G}for(R=i(C,R);I<S.length;I++)N=T(R,C,I,S[I],F),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?I:N.key),P=o(N,P,I),Z===null?G=N:Z.sibling=N,Z=N);return t&&R.forEach(function(D){return e(C,D)}),Ye&&Os(C,I),G}function b(C,P,S,F){var G=Ll(S);if(typeof G!="function")throw Error(J(150));if(S=G.call(S),S==null)throw Error(J(151));for(var Z=G=null,R=P,I=P=0,N=null,O=S.next();R!==null&&!O.done;I++,O=S.next()){R.index>I?(N=R,R=null):N=R.sibling;var D=_(C,R,O.value,F);if(D===null){R===null&&(R=N);break}t&&R&&D.alternate===null&&e(C,R),P=o(D,P,I),Z===null?G=D:Z.sibling=D,Z=D,R=N}if(O.done)return n(C,R),Ye&&Os(C,I),G;if(R===null){for(;!O.done;I++,O=S.next())O=g(C,O.value,F),O!==null&&(P=o(O,P,I),Z===null?G=O:Z.sibling=O,Z=O);return Ye&&Os(C,I),G}for(R=i(C,R);!O.done;I++,O=S.next())O=T(R,C,I,O.value,F),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?I:O.key),P=o(O,P,I),Z===null?G=O:Z.sibling=O,Z=O);return t&&R.forEach(function(B){return e(C,B)}),Ye&&Os(C,I),G}function z(C,P,S,F){if(typeof S=="object"&&S!==null&&S.type===ta&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Qc:e:{for(var G=S.key,Z=P;Z!==null;){if(Z.key===G){if(G=S.type,G===ta){if(Z.tag===7){n(C,Z.sibling),P=r(Z,S.props.children),P.return=C,C=P;break e}}else if(Z.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Ir&&c0(G)===Z.type){n(C,Z.sibling),P=r(Z,S.props),P.ref=Vl(C,Z,S),P.return=C,C=P;break e}n(C,Z);break}else e(C,Z);Z=Z.sibling}S.type===ta?(P=Zs(S.props.children,C.mode,F,S.key),P.return=C,C=P):(F=Mh(S.type,S.key,S.props,null,C.mode,F),F.ref=Vl(C,P,S),F.return=C,C=F)}return a(C);case ea:e:{for(Z=S.key;P!==null;){if(P.key===Z)if(P.tag===4&&P.stateNode.containerInfo===S.containerInfo&&P.stateNode.implementation===S.implementation){n(C,P.sibling),P=r(P,S.children||[]),P.return=C,C=P;break e}else{n(C,P);break}else e(C,P);P=P.sibling}P=Lp(S,C.mode,F),P.return=C,C=P}return a(C);case Ir:return Z=S._init,z(C,P,Z(S._payload),F)}if(Hl(S))return k(C,P,S,F);if(Ll(S))return b(C,P,S,F);ah(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,P!==null&&P.tag===6?(n(C,P.sibling),P=r(P,S),P.return=C,C=P):(n(C,P),P=Rp(S,C.mode,F),P.return=C,C=P),a(C)):n(C,P)}return z}var Na=zx(!0),Fx=zx(!1),od=ps(null),ad=null,ua=null,Ty=null;function xy(){Ty=ua=ad=null}function Ey(t){var e=od.current;Ke(od),t._currentValue=e}function Hm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ta(t,e){ad=t,Ty=ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(Ty!==t)if(t={context:t,memoizedValue:e,next:null},ua===null){if(ad===null)throw Error(J(308));ua=t,ad.dependencies={lanes:0,firstContext:t}}else ua=ua.next=t;return e}var Hs=null;function Py(t){Hs===null?Hs=[t]:Hs.push(t)}function Bx(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Py(e)):(n.next=r.next,r.next=n),e.interleaved=n,er(t,i)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cr=!1;function Sy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ux(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,er(t,n)}return r=i.interleaved,r===null?(e.next=e,Py(i)):(e.next=r.next,r.next=e),i.interleaved=e,er(t,n)}function Ah(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cy(t,n)}}function h0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ld(t,e,n,i){var r=t.updateQueue;Cr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var _=u.lane,T=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,b=u;switch(_=e,T=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){g=k.call(T,g,_);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,_=typeof k=="function"?k.call(T,g,_):k,_==null)break e;g=nt({},g,_);break e;case 2:Cr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else T={eventTime:T,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,h=g):m=m.next=T,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);no|=a,t.lanes=a,t.memoizedState=g}}function d0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(J(191,r));r.call(i)}}}var ec={},yi=ps(ec),bu=ps(ec),Ru=ps(ec);function Ws(t){if(t===ec)throw Error(J(174));return t}function Iy(t,e){switch(We(Ru,e),We(bu,t),We(yi,ec),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Em(e,t)}Ke(yi),We(yi,e)}function Ma(){Ke(yi),Ke(bu),Ke(Ru)}function Hx(t){Ws(Ru.current);var e=Ws(yi.current),n=Em(e,t.type);e!==n&&(We(bu,t),We(yi,n))}function Cy(t){bu.current===t&&(Ke(yi),Ke(bu))}var Xe=ps(0);function ud(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sp=[];function Ay(){for(var t=0;t<Sp.length;t++)Sp[t]._workInProgressVersionPrimary=null;Sp.length=0}var kh=lr.ReactCurrentDispatcher,Ip=lr.ReactCurrentBatchConfig,to=0,et=null,vt=null,kt=null,cd=!1,iu=!1,Lu=0,bb=0;function zt(){throw Error(J(321))}function ky(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ni(t[n],e[n]))return!1;return!0}function by(t,e,n,i,r,o){if(to=o,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kh.current=t===null||t.memoizedState===null?Mb:Ob,t=n(i,r),iu){o=0;do{if(iu=!1,Lu=0,25<=o)throw Error(J(301));o+=1,kt=vt=null,e.updateQueue=null,kh.current=Db,t=n(i,r)}while(iu)}if(kh.current=hd,e=vt!==null&&vt.next!==null,to=0,kt=vt=et=null,cd=!1,e)throw Error(J(300));return t}function Ry(){var t=Lu!==0;return Lu=0,t}function fi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?et.memoizedState=kt=t:kt=kt.next=t,kt}function Bn(){if(vt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=kt===null?et.memoizedState:kt.next;if(e!==null)kt=e,vt=t;else{if(t===null)throw Error(J(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},kt===null?et.memoizedState=kt=t:kt=kt.next=t}return kt}function Nu(t,e){return typeof e=="function"?e(t):e}function Cp(t){var e=Bn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=vt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((to&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,et.lanes|=m,no|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,ni(i,e.memoizedState)||(un=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,et.lanes|=o,no|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ap(t){var e=Bn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);ni(o,e.memoizedState)||(un=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Wx(){}function $x(t,e){var n=et,i=Bn(),r=e(),o=!ni(i.memoizedState,r);if(o&&(i.memoizedState=r,un=!0),i=i.queue,Ly(Zx.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,Mu(9,Gx.bind(null,n,i,r,e),void 0,null),bt===null)throw Error(J(349));to&30||qx(n,e,r)}return r}function qx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gx(t,e,n,i){e.value=n,e.getSnapshot=i,Kx(e)&&Qx(t)}function Zx(t,e,n){return n(function(){Kx(e)&&Qx(t)})}function Kx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ni(t,n)}catch{return!0}}function Qx(t){var e=er(t,1);e!==null&&ti(e,t,1,-1)}function f0(t){var e=fi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:t},e.queue=t,t=t.dispatch=Nb.bind(null,et,t),[e.memoizedState,t]}function Mu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Yx(){return Bn().memoizedState}function bh(t,e,n,i){var r=fi();et.flags|=t,r.memoizedState=Mu(1|e,n,void 0,i===void 0?null:i)}function rf(t,e,n,i){var r=Bn();i=i===void 0?null:i;var o=void 0;if(vt!==null){var a=vt.memoizedState;if(o=a.destroy,i!==null&&ky(i,a.deps)){r.memoizedState=Mu(e,n,o,i);return}}et.flags|=t,r.memoizedState=Mu(1|e,n,o,i)}function p0(t,e){return bh(8390656,8,t,e)}function Ly(t,e){return rf(2048,8,t,e)}function Xx(t,e){return rf(4,2,t,e)}function Jx(t,e){return rf(4,4,t,e)}function eE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tE(t,e,n){return n=n!=null?n.concat([t]):null,rf(4,4,eE.bind(null,e,t),n)}function Ny(){}function nE(t,e){var n=Bn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ky(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function iE(t,e){var n=Bn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ky(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function rE(t,e,n){return to&21?(ni(n,e)||(n=ux(),et.lanes|=n,no|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function Rb(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var i=Ip.transition;Ip.transition={};try{t(!1),e()}finally{Ue=n,Ip.transition=i}}function sE(){return Bn().memoizedState}function Lb(t,e,n){var i=qr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},oE(t))aE(e,n);else if(n=Bx(t,e,n,i),n!==null){var r=Jt();ti(n,t,i,r),lE(n,e,i)}}function Nb(t,e,n){var i=qr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(oE(t))aE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,ni(u,a)){var h=e.interleaved;h===null?(r.next=r,Py(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=Bx(t,e,r,i),n!==null&&(r=Jt(),ti(n,t,i,r),lE(n,e,i))}}function oE(t){var e=t.alternate;return t===et||e!==null&&e===et}function aE(t,e){iu=cd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cy(t,n)}}var hd={readContext:Fn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},Mb={readContext:Fn,useCallback:function(t,e){return fi().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:p0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bh(4194308,4,eE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return bh(4,2,t,e)},useMemo:function(t,e){var n=fi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=fi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Lb.bind(null,et,t),[i.memoizedState,t]},useRef:function(t){var e=fi();return t={current:t},e.memoizedState=t},useState:f0,useDebugValue:Ny,useDeferredValue:function(t){return fi().memoizedState=t},useTransition:function(){var t=f0(!1),e=t[0];return t=Rb.bind(null,t[1]),fi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=et,r=fi();if(Ye){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),bt===null)throw Error(J(349));to&30||qx(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,p0(Zx.bind(null,i,o,t),[t]),i.flags|=2048,Mu(9,Gx.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=fi(),e=bt.identifierPrefix;if(Ye){var n=Wi,i=Hi;n=(i&~(1<<32-ei(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ob={readContext:Fn,useCallback:nE,useContext:Fn,useEffect:Ly,useImperativeHandle:tE,useInsertionEffect:Xx,useLayoutEffect:Jx,useMemo:iE,useReducer:Cp,useRef:Yx,useState:function(){return Cp(Nu)},useDebugValue:Ny,useDeferredValue:function(t){var e=Bn();return rE(e,vt.memoizedState,t)},useTransition:function(){var t=Cp(Nu)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:Wx,useSyncExternalStore:$x,useId:sE,unstable_isNewReconciler:!1},Db={readContext:Fn,useCallback:nE,useContext:Fn,useEffect:Ly,useImperativeHandle:tE,useInsertionEffect:Xx,useLayoutEffect:Jx,useMemo:iE,useReducer:Ap,useRef:Yx,useState:function(){return Ap(Nu)},useDebugValue:Ny,useDeferredValue:function(t){var e=Bn();return vt===null?e.memoizedState=t:rE(e,vt.memoizedState,t)},useTransition:function(){var t=Ap(Nu)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:Wx,useSyncExternalStore:$x,useId:sE,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sf={isMounted:function(t){return(t=t._reactInternals)?co(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=qr(t),o=Zi(i,r);o.payload=e,n!=null&&(o.callback=n),e=Wr(t,o,r),e!==null&&(ti(e,t,r,i),Ah(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=qr(t),o=Zi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Wr(t,o,r),e!==null&&(ti(e,t,r,i),Ah(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=qr(t),r=Zi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Wr(t,r,i),e!==null&&(ti(e,t,i,n),Ah(e,t,i))}};function m0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Iu(n,i)||!Iu(r,o):!0}function uE(t,e,n){var i=!1,r=is,o=e.contextType;return typeof o=="object"&&o!==null?o=Fn(o):(r=hn(e)?Js:qt.current,i=e.contextTypes,o=(i=i!=null)?Ra(t,r):is),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function g0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&sf.enqueueReplaceState(e,e.state,null)}function $m(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Sy(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Fn(o):(o=hn(e)?Js:qt.current,r.context=Ra(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Wm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&sf.enqueueReplaceState(r,r.state,null),ld(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Oa(t,e){try{var n="",i=e;do n+=ck(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function kp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Vb=typeof WeakMap=="function"?WeakMap:Map;function cE(t,e,n){n=Zi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){fd||(fd=!0,ng=i),qm(t,e)},n}function hE(t,e,n){n=Zi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){qm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){qm(t,e),typeof i!="function"&&($r===null?$r=new Set([this]):$r.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function y0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Vb;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Yb.bind(null,t,e,n),e.then(t,t))}function _0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zi(-1,1),e.tag=2,Wr(n,e,1))),n.lanes|=1),t)}var jb=lr.ReactCurrentOwner,un=!1;function Xt(t,e,n,i){e.child=t===null?Fx(e,null,n,i):Na(e,t.child,n,i)}function w0(t,e,n,i,r){n=n.render;var o=e.ref;return Ta(e,r),i=by(t,e,n,i,o,r),n=Ry(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,tr(t,e,r)):(Ye&&n&&_y(e),e.flags|=1,Xt(t,e,i,r),e.child)}function T0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!By(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,dE(t,e,o,i,r)):(t=Mh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Iu,n(a,i)&&t.ref===e.ref)return tr(t,e,r)}return e.flags|=1,t=Gr(o,i),t.ref=e.ref,t.return=e,e.child=t}function dE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Iu(o,i)&&t.ref===e.ref)if(un=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,tr(t,e,r)}return Gm(t,e,n,i,r)}function fE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(ha,yn),yn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(ha,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,We(ha,yn),yn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,We(ha,yn),yn|=i;return Xt(t,e,r,n),e.child}function pE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gm(t,e,n,i,r){var o=hn(n)?Js:qt.current;return o=Ra(e,o),Ta(e,r),n=by(t,e,n,i,o,r),i=Ry(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,tr(t,e,r)):(Ye&&i&&_y(e),e.flags|=1,Xt(t,e,n,r),e.child)}function x0(t,e,n,i,r){if(hn(n)){var o=!0;id(e)}else o=!1;if(Ta(e,r),e.stateNode===null)Rh(t,e),uE(e,n,i),$m(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Fn(f):(f=hn(n)?Js:qt.current,f=Ra(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&g0(e,a,i,f),Cr=!1;var _=e.memoizedState;a.state=_,ld(e,i,a,r),h=e.memoizedState,u!==i||_!==h||cn.current||Cr?(typeof m=="function"&&(Wm(e,n,m,i),h=e.memoizedState),(u=Cr||m0(e,n,u,i,_,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Ux(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Zn(e.type,u),a.props=f,g=e.pendingProps,_=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Fn(h):(h=hn(n)?Js:qt.current,h=Ra(e,h));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==h)&&g0(e,a,i,h),Cr=!1,_=e.memoizedState,a.state=_,ld(e,i,a,r);var k=e.memoizedState;u!==g||_!==k||cn.current||Cr?(typeof T=="function"&&(Wm(e,n,T,i),k=e.memoizedState),(f=Cr||m0(e,n,f,i,_,k,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Zm(t,e,n,i,o,r)}function Zm(t,e,n,i,r,o){pE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&a0(e,n,!1),tr(t,e,o);i=e.stateNode,jb.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Na(e,t.child,null,o),e.child=Na(e,null,u,o)):Xt(t,e,u,o),e.memoizedState=i.state,r&&a0(e,n,!0),e.child}function mE(t){var e=t.stateNode;e.pendingContext?o0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&o0(t,e.context,!1),Iy(t,e.containerInfo)}function E0(t,e,n,i,r){return La(),wy(r),e.flags|=256,Xt(t,e,n,i),e.child}var Km={dehydrated:null,treeContext:null,retryLane:0};function Qm(t){return{baseLanes:t,cachePool:null,transitions:null}}function gE(t,e,n){var i=e.pendingProps,r=Xe.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),We(Xe,r&1),t===null)return Um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=lf(a,i,0,null),t=Zs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Qm(n),e.memoizedState=Km,t):My(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return zb(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Gr(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Gr(u,o):(o=Zs(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Qm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Km,i}return o=t.child,t=o.sibling,i=Gr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function My(t,e){return e=lf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lh(t,e,n,i){return i!==null&&wy(i),Na(e,t.child,null,n),t=My(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zb(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=kp(Error(J(422))),lh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=lf({mode:"visible",children:i.children},r,0,null),o=Zs(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Na(e,t.child,null,a),e.child.memoizedState=Qm(a),e.memoizedState=Km,o);if(!(e.mode&1))return lh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(J(419)),i=kp(o,i,void 0),lh(t,e,a,i)}if(u=(a&t.childLanes)!==0,un||u){if(i=bt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,er(t,r),ti(i,t,r,-1))}return Fy(),i=kp(Error(J(421))),lh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Xb.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,_n=Hr(r.nextSibling),vn=e,Ye=!0,Qn=null,t!==null&&(Mn[On++]=Hi,Mn[On++]=Wi,Mn[On++]=eo,Hi=t.id,Wi=t.overflow,eo=e),e=My(e,i.children),e.flags|=4096,e)}function P0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Hm(t.return,e,n)}function bp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function yE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Xt(t,e,i.children,n),i=Xe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&P0(t,n,e);else if(t.tag===19)P0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(We(Xe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ud(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),bp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ud(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}bp(e,!0,n,null,o);break;case"together":bp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),no|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Fb(t,e,n){switch(e.tag){case 3:mE(e),La();break;case 5:Hx(e);break;case 1:hn(e.type)&&id(e);break;case 4:Iy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;We(od,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(We(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?gE(t,e,n):(We(Xe,Xe.current&1),t=tr(t,e,n),t!==null?t.sibling:null);We(Xe,Xe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return yE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),We(Xe,Xe.current),i)break;return null;case 22:case 23:return e.lanes=0,fE(t,e,n)}return tr(t,e,n)}var _E,Ym,vE,wE;_E=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ym=function(){};vE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ws(yi.current);var o=null;switch(n){case"input":r=vm(t,r),i=vm(t,i),o=[];break;case"select":r=nt({},r,{value:void 0}),i=nt({},i,{value:void 0}),o=[];break;case"textarea":r=xm(t,r),i=xm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=td)}Pm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(vu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(vu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&qe("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};wE=function(t,e,n,i){n!==i&&(e.flags|=4)};function jl(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Bb(t,e,n){var i=e.pendingProps;switch(vy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return hn(e.type)&&nd(),Ft(e),null;case 3:return i=e.stateNode,Ma(),Ke(cn),Ke(qt),Ay(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(oh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(sg(Qn),Qn=null))),Ym(t,e),Ft(e),null;case 5:Cy(e);var r=Ws(Ru.current);if(n=e.type,t!==null&&e.stateNode!=null)vE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(J(166));return Ft(e),null}if(t=Ws(yi.current),oh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[mi]=e,i[ku]=o,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(r=0;r<$l.length;r++)qe($l[r],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":Nv(i,o),qe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},qe("invalid",i);break;case"textarea":Ov(i,o),qe("invalid",i)}Pm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&sh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&sh(i.textContent,u,t),r=["children",""+u]):vu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&qe("scroll",i)}switch(n){case"input":Yc(i),Mv(i,o,!0);break;case"textarea":Yc(i),Dv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=td)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[mi]=e,t[ku]=i,_E(t,e,!1,!1),e.stateNode=t;e:{switch(a=Sm(n,i),n){case"dialog":qe("cancel",t),qe("close",t),r=i;break;case"iframe":case"object":case"embed":qe("load",t),r=i;break;case"video":case"audio":for(r=0;r<$l.length;r++)qe($l[r],t);r=i;break;case"source":qe("error",t),r=i;break;case"img":case"image":case"link":qe("error",t),qe("load",t),r=i;break;case"details":qe("toggle",t),r=i;break;case"input":Nv(t,i),r=vm(t,i),qe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=nt({},i,{value:void 0}),qe("invalid",t);break;case"textarea":Ov(t,i),r=xm(t,i),qe("invalid",t);break;default:r=i}Pm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?YT(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&KT(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&wu(t,h):typeof h=="number"&&wu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&qe("scroll",t):h!=null&&ry(t,o,h,a))}switch(n){case"input":Yc(t),Mv(t,i,!1);break;case"textarea":Yc(t),Dv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ns(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ya(t,!!i.multiple,o,!1):i.defaultValue!=null&&ya(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=td)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)wE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(J(166));if(n=Ws(Ru.current),Ws(yi.current),oh(e)){if(i=e.stateNode,n=e.memoizedProps,i[mi]=e,(o=i.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:sh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[mi]=e,e.stateNode=i}return Ft(e),null;case 13:if(Ke(Xe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&_n!==null&&e.mode&1&&!(e.flags&128))jx(),La(),e.flags|=98560,o=!1;else if(o=oh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[mi]=e}else La(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),o=!1}else Qn!==null&&(sg(Qn),Qn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?Tt===0&&(Tt=3):Fy())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return Ma(),Ym(t,e),t===null&&Cu(e.stateNode.containerInfo),Ft(e),null;case 10:return Ey(e.type._context),Ft(e),null;case 17:return hn(e.type)&&nd(),Ft(e),null;case 19:if(Ke(Xe),o=e.memoizedState,o===null)return Ft(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)jl(o,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ud(t),a!==null){for(e.flags|=128,jl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(Xe,Xe.current&1|2),e.child}t=t.sibling}o.tail!==null&&ut()>Da&&(e.flags|=128,i=!0,jl(o,!1),e.lanes=4194304)}else{if(!i)if(t=ud(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ye)return Ft(e),null}else 2*ut()-o.renderingStartTime>Da&&n!==1073741824&&(e.flags|=128,i=!0,jl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ut(),e.sibling=null,n=Xe.current,We(Xe,i?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return zy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function Ub(t,e){switch(vy(e),e.tag){case 1:return hn(e.type)&&nd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ma(),Ke(cn),Ke(qt),Ay(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cy(e),null;case 13:if(Ke(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));La()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ke(Xe),null;case 4:return Ma(),null;case 10:return Ey(e.type._context),null;case 22:case 23:return zy(),null;case 24:return null;default:return null}}var uh=!1,Wt=!1,Hb=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ot(t,e,i)}else n.current=null}function Xm(t,e,n){try{n()}catch(i){ot(t,e,i)}}var S0=!1;function Wb(t,e){if(Om=Xh,t=Sx(),yy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)_=g,g=T;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(h=a),(T=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dm={focusedElem:t,selectionRange:n},Xh=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,z=k.memoizedState,C=e.stateNode,P=C.getSnapshotBeforeUpdate(e.elementType===e.type?b:Zn(e.type,b),z);C.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(F){ot(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return k=S0,S0=!1,k}function ru(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Xm(e,n,o)}r=r.next}while(r!==i)}}function of(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function TE(t){var e=t.alternate;e!==null&&(t.alternate=null,TE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mi],delete e[ku],delete e[zm],delete e[Ib],delete e[Cb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xE(t){return t.tag===5||t.tag===3||t.tag===4}function I0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=td));else if(i!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}function tg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(tg(t,e,n),t=t.sibling;t!==null;)tg(t,e,n),t=t.sibling}var Rt=null,Kn=!1;function xr(t,e,n){for(n=n.child;n!==null;)EE(t,e,n),n=n.sibling}function EE(t,e,n){if(gi&&typeof gi.onCommitFiberUnmount=="function")try{gi.onCommitFiberUnmount(Yd,n)}catch{}switch(n.tag){case 5:Wt||ca(n,e);case 6:var i=Rt,r=Kn;Rt=null,xr(t,e,n),Rt=i,Kn=r,Rt!==null&&(Kn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Kn?(t=Rt,n=n.stateNode,t.nodeType===8?Ep(t.parentNode,n):t.nodeType===1&&Ep(t,n),Pu(t)):Ep(Rt,n.stateNode));break;case 4:i=Rt,r=Kn,Rt=n.stateNode.containerInfo,Kn=!0,xr(t,e,n),Rt=i,Kn=r;break;case 0:case 11:case 14:case 15:if(!Wt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Xm(n,e,a),r=r.next}while(r!==i)}xr(t,e,n);break;case 1:if(!Wt&&(ca(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){ot(n,e,u)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(Wt=(i=Wt)||n.memoizedState!==null,xr(t,e,n),Wt=i):xr(t,e,n);break;default:xr(t,e,n)}}function C0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Hb),e.forEach(function(i){var r=Jb.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Gn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Rt=u.stateNode,Kn=!1;break e;case 3:Rt=u.stateNode.containerInfo,Kn=!0;break e;case 4:Rt=u.stateNode.containerInfo,Kn=!0;break e}u=u.return}if(Rt===null)throw Error(J(160));EE(o,a,r),Rt=null,Kn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){ot(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PE(e,t),e=e.sibling}function PE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),di(t),i&4){try{ru(3,t,t.return),of(3,t)}catch(b){ot(t,t.return,b)}try{ru(5,t,t.return)}catch(b){ot(t,t.return,b)}}break;case 1:Gn(e,t),di(t),i&512&&n!==null&&ca(n,n.return);break;case 5:if(Gn(e,t),di(t),i&512&&n!==null&&ca(n,n.return),t.flags&32){var r=t.stateNode;try{wu(r,"")}catch(b){ot(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&qT(r,o),Sm(u,a);var f=Sm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?YT(r,g):m==="dangerouslySetInnerHTML"?KT(r,g):m==="children"?wu(r,g):ry(r,m,g,f)}switch(u){case"input":wm(r,o);break;case"textarea":GT(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?ya(r,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?ya(r,!!o.multiple,o.defaultValue,!0):ya(r,!!o.multiple,o.multiple?[]:"",!1))}r[ku]=o}catch(b){ot(t,t.return,b)}}break;case 6:if(Gn(e,t),di(t),i&4){if(t.stateNode===null)throw Error(J(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){ot(t,t.return,b)}}break;case 3:if(Gn(e,t),di(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Pu(e.containerInfo)}catch(b){ot(t,t.return,b)}break;case 4:Gn(e,t),di(t);break;case 13:Gn(e,t),di(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Vy=ut())),i&4&&C0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(f=Wt)||m,Gn(e,t),Wt=f):Gn(e,t),di(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(oe=t,m=t.child;m!==null;){for(g=oe=m;oe!==null;){switch(_=oe,T=_.child,_.tag){case 0:case 11:case 14:case 15:ru(4,_,_.return);break;case 1:ca(_,_.return);var k=_.stateNode;if(typeof k.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(b){ot(i,n,b)}}break;case 5:ca(_,_.return);break;case 22:if(_.memoizedState!==null){k0(g);continue}}T!==null?(T.return=_,oe=T):k0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=QT("display",a))}catch(b){ot(t,t.return,b)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(b){ot(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Gn(e,t),di(t),i&4&&C0(t);break;case 21:break;default:Gn(e,t),di(t)}}function di(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xE(n)){var i=n;break e}n=n.return}throw Error(J(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(wu(r,""),i.flags&=-33);var o=I0(t);tg(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=I0(t);eg(t,u,a);break;default:throw Error(J(161))}}catch(h){ot(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $b(t,e,n){oe=t,SE(t)}function SE(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||uh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Wt;u=uh;var f=Wt;if(uh=a,(Wt=h)&&!f)for(oe=r;oe!==null;)a=oe,h=a.child,a.tag===22&&a.memoizedState!==null?b0(r):h!==null?(h.return=a,oe=h):b0(r);for(;o!==null;)oe=o,SE(o),o=o.sibling;oe=r,uh=u,Wt=f}A0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):A0(t)}}function A0(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||of(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Wt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&d0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Pu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Wt||e.flags&512&&Jm(e)}catch(_){ot(e,e.return,_)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function k0(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function b0(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{of(4,e)}catch(h){ot(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){ot(e,r,h)}}var o=e.return;try{Jm(e)}catch(h){ot(e,o,h)}break;case 5:var a=e.return;try{Jm(e)}catch(h){ot(e,a,h)}}}catch(h){ot(e,e.return,h)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var qb=Math.ceil,dd=lr.ReactCurrentDispatcher,Oy=lr.ReactCurrentOwner,zn=lr.ReactCurrentBatchConfig,Me=0,bt=null,yt=null,Mt=0,yn=0,ha=ps(0),Tt=0,Ou=null,no=0,af=0,Dy=0,su=null,ln=null,Vy=0,Da=1/0,Bi=null,fd=!1,ng=null,$r=null,ch=!1,Vr=null,pd=0,ou=0,ig=null,Lh=-1,Nh=0;function Jt(){return Me&6?ut():Lh!==-1?Lh:Lh=ut()}function qr(t){return t.mode&1?Me&2&&Mt!==0?Mt&-Mt:kb.transition!==null?(Nh===0&&(Nh=ux()),Nh):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:gx(t.type)),t):1}function ti(t,e,n,i){if(50<ou)throw ou=0,ig=null,Error(J(185));Yu(t,n,i),(!(Me&2)||t!==bt)&&(t===bt&&(!(Me&2)&&(af|=n),Tt===4&&br(t,Mt)),dn(t,i),n===1&&Me===0&&!(e.mode&1)&&(Da=ut()+500,nf&&ms()))}function dn(t,e){var n=t.callbackNode;kk(t,e);var i=Yh(t,t===bt?Mt:0);if(i===0)n!==null&&zv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&zv(n),e===1)t.tag===0?Ab(R0.bind(null,t)):Ox(R0.bind(null,t)),Pb(function(){!(Me&6)&&ms()}),n=null;else{switch(cx(i)){case 1:n=uy;break;case 4:n=ax;break;case 16:n=Qh;break;case 536870912:n=lx;break;default:n=Qh}n=NE(n,IE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IE(t,e){if(Lh=-1,Nh=0,Me&6)throw Error(J(327));var n=t.callbackNode;if(xa()&&t.callbackNode!==n)return null;var i=Yh(t,t===bt?Mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=md(t,i);else{e=i;var r=Me;Me|=2;var o=AE();(bt!==t||Mt!==e)&&(Bi=null,Da=ut()+500,Gs(t,e));do try{Kb();break}catch(u){CE(t,u)}while(!0);xy(),dd.current=o,Me=r,yt!==null?e=0:(bt=null,Mt=0,e=Tt)}if(e!==0){if(e===2&&(r=bm(t),r!==0&&(i=r,e=rg(t,r))),e===1)throw n=Ou,Gs(t,0),br(t,i),dn(t,ut()),n;if(e===6)br(t,i);else{if(r=t.current.alternate,!(i&30)&&!Gb(r)&&(e=md(t,i),e===2&&(o=bm(t),o!==0&&(i=o,e=rg(t,o))),e===1))throw n=Ou,Gs(t,0),br(t,i),dn(t,ut()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(J(345));case 2:Ds(t,ln,Bi);break;case 3:if(br(t,i),(i&130023424)===i&&(e=Vy+500-ut(),10<e)){if(Yh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=jm(Ds.bind(null,t,ln,Bi),e);break}Ds(t,ln,Bi);break;case 4:if(br(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ei(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ut()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*qb(i/1960))-i,10<i){t.timeoutHandle=jm(Ds.bind(null,t,ln,Bi),i);break}Ds(t,ln,Bi);break;case 5:Ds(t,ln,Bi);break;default:throw Error(J(329))}}}return dn(t,ut()),t.callbackNode===n?IE.bind(null,t):null}function rg(t,e){var n=su;return t.current.memoizedState.isDehydrated&&(Gs(t,e).flags|=256),t=md(t,e),t!==2&&(e=ln,ln=n,e!==null&&sg(e)),t}function sg(t){ln===null?ln=t:ln.push.apply(ln,t)}function Gb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ni(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~Dy,e&=~af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ei(e),i=1<<n;t[n]=-1,e&=~i}}function R0(t){if(Me&6)throw Error(J(327));xa();var e=Yh(t,0);if(!(e&1))return dn(t,ut()),null;var n=md(t,e);if(t.tag!==0&&n===2){var i=bm(t);i!==0&&(e=i,n=rg(t,i))}if(n===1)throw n=Ou,Gs(t,0),br(t,e),dn(t,ut()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ds(t,ln,Bi),dn(t,ut()),null}function jy(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(Da=ut()+500,nf&&ms())}}function io(t){Vr!==null&&Vr.tag===0&&!(Me&6)&&xa();var e=Me;Me|=1;var n=zn.transition,i=Ue;try{if(zn.transition=null,Ue=1,t)return t()}finally{Ue=i,zn.transition=n,Me=e,!(Me&6)&&ms()}}function zy(){yn=ha.current,Ke(ha)}function Gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Eb(n)),yt!==null)for(n=yt.return;n!==null;){var i=n;switch(vy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&nd();break;case 3:Ma(),Ke(cn),Ke(qt),Ay();break;case 5:Cy(i);break;case 4:Ma();break;case 13:Ke(Xe);break;case 19:Ke(Xe);break;case 10:Ey(i.type._context);break;case 22:case 23:zy()}n=n.return}if(bt=t,yt=t=Gr(t.current,null),Mt=yn=e,Tt=0,Ou=null,Dy=af=no=0,ln=su=null,Hs!==null){for(e=0;e<Hs.length;e++)if(n=Hs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Hs=null}return t}function CE(t,e){do{var n=yt;try{if(xy(),kh.current=hd,cd){for(var i=et.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}cd=!1}if(to=0,kt=vt=et=null,iu=!1,Lu=0,Oy.current=null,n===null||n.return===null){Tt=1,Ou=e,yt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Mt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=_0(a);if(T!==null){T.flags&=-257,v0(T,a,u,o,e),T.mode&1&&y0(o,f,e),e=T,h=f;var k=e.updateQueue;if(k===null){var b=new Set;b.add(h),e.updateQueue=b}else k.add(h);break e}else{if(!(e&1)){y0(o,f,e),Fy();break e}h=Error(J(426))}}else if(Ye&&u.mode&1){var z=_0(a);if(z!==null){!(z.flags&65536)&&(z.flags|=256),v0(z,a,u,o,e),wy(Oa(h,u));break e}}o=h=Oa(h,u),Tt!==4&&(Tt=2),su===null?su=[o]:su.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=cE(o,h,e);h0(o,C);break e;case 1:u=h;var P=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($r===null||!$r.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=hE(o,u,e);h0(o,F);break e}}o=o.return}while(o!==null)}bE(n)}catch(G){e=G,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function AE(){var t=dd.current;return dd.current=hd,t===null?hd:t}function Fy(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),bt===null||!(no&268435455)&&!(af&268435455)||br(bt,Mt)}function md(t,e){var n=Me;Me|=2;var i=AE();(bt!==t||Mt!==e)&&(Bi=null,Gs(t,e));do try{Zb();break}catch(r){CE(t,r)}while(!0);if(xy(),Me=n,dd.current=i,yt!==null)throw Error(J(261));return bt=null,Mt=0,Tt}function Zb(){for(;yt!==null;)kE(yt)}function Kb(){for(;yt!==null&&!wk();)kE(yt)}function kE(t){var e=LE(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?bE(t):yt=e,Oy.current=null}function bE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ub(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,yt=null;return}}else if(n=Bb(n,e,yn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);Tt===0&&(Tt=5)}function Ds(t,e,n){var i=Ue,r=zn.transition;try{zn.transition=null,Ue=1,Qb(t,e,n,i)}finally{zn.transition=r,Ue=i}return null}function Qb(t,e,n,i){do xa();while(Vr!==null);if(Me&6)throw Error(J(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(bk(t,o),t===bt&&(yt=bt=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ch||(ch=!0,NE(Qh,function(){return xa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=zn.transition,zn.transition=null;var a=Ue;Ue=1;var u=Me;Me|=4,Oy.current=null,Wb(t,n),PE(n,t),gb(Dm),Xh=!!Om,Dm=Om=null,t.current=n,$b(n),Tk(),Me=u,Ue=a,zn.transition=o}else t.current=n;if(ch&&(ch=!1,Vr=t,pd=r),o=t.pendingLanes,o===0&&($r=null),Pk(n.stateNode),dn(t,ut()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(fd)throw fd=!1,t=ng,ng=null,t;return pd&1&&t.tag!==0&&xa(),o=t.pendingLanes,o&1?t===ig?ou++:(ou=0,ig=t):ou=0,ms(),null}function xa(){if(Vr!==null){var t=cx(pd),e=zn.transition,n=Ue;try{if(zn.transition=null,Ue=16>t?16:t,Vr===null)var i=!1;else{if(t=Vr,Vr=null,pd=0,Me&6)throw Error(J(331));var r=Me;for(Me|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(oe=f;oe!==null;){var m=oe;switch(m.tag){case 0:case 11:case 15:ru(8,m,o)}var g=m.child;if(g!==null)g.return=m,oe=g;else for(;oe!==null;){m=oe;var _=m.sibling,T=m.return;if(TE(m),m===f){oe=null;break}if(_!==null){_.return=T,oe=_;break}oe=T}}}var k=o.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var z=b.sibling;b.sibling=null,b=z}while(b!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,oe=C;break e}oe=o.return}}var P=t.current;for(oe=P;oe!==null;){a=oe;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,oe=S;else e:for(a=P;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:of(9,u)}}catch(G){ot(u,u.return,G)}if(u===a){oe=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,oe=F;break e}oe=u.return}}if(Me=r,ms(),gi&&typeof gi.onPostCommitFiberRoot=="function")try{gi.onPostCommitFiberRoot(Yd,t)}catch{}i=!0}return i}finally{Ue=n,zn.transition=e}}return!1}function L0(t,e,n){e=Oa(n,e),e=cE(t,e,1),t=Wr(t,e,1),e=Jt(),t!==null&&(Yu(t,1,e),dn(t,e))}function ot(t,e,n){if(t.tag===3)L0(t,t,n);else for(;e!==null;){if(e.tag===3){L0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($r===null||!$r.has(i))){t=Oa(n,t),t=hE(e,t,1),e=Wr(e,t,1),t=Jt(),e!==null&&(Yu(e,1,t),dn(e,t));break}}e=e.return}}function Yb(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Mt&n)===n&&(Tt===4||Tt===3&&(Mt&130023424)===Mt&&500>ut()-Vy?Gs(t,0):Dy|=n),dn(t,e)}function RE(t,e){e===0&&(t.mode&1?(e=eh,eh<<=1,!(eh&130023424)&&(eh=4194304)):e=1);var n=Jt();t=er(t,e),t!==null&&(Yu(t,e,n),dn(t,n))}function Xb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),RE(t,n)}function Jb(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(J(314))}i!==null&&i.delete(e),RE(t,n)}var LE;LE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,Fb(t,e,n);un=!!(t.flags&131072)}else un=!1,Ye&&e.flags&1048576&&Dx(e,sd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Rh(t,e),t=e.pendingProps;var r=Ra(e,qt.current);Ta(e,n),r=by(null,e,i,t,r,n);var o=Ry();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(i)?(o=!0,id(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Sy(e),r.updater=sf,e.stateNode=r,r._reactInternals=e,$m(e,i,t,n),e=Zm(null,e,i,!0,o,n)):(e.tag=0,Ye&&o&&_y(e),Xt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Rh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=t2(i),t=Zn(i,t),r){case 0:e=Gm(null,e,i,t,n);break e;case 1:e=x0(null,e,i,t,n);break e;case 11:e=w0(null,e,i,t,n);break e;case 14:e=T0(null,e,i,Zn(i.type,t),n);break e}throw Error(J(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zn(i,r),Gm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zn(i,r),x0(t,e,i,r,n);case 3:e:{if(mE(e),t===null)throw Error(J(387));i=e.pendingProps,o=e.memoizedState,r=o.element,Ux(t,e),ld(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Oa(Error(J(423)),e),e=E0(t,e,i,n,r);break e}else if(i!==r){r=Oa(Error(J(424)),e),e=E0(t,e,i,n,r);break e}else for(_n=Hr(e.stateNode.containerInfo.firstChild),vn=e,Ye=!0,Qn=null,n=Fx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(La(),i===r){e=tr(t,e,n);break e}Xt(t,e,i,n)}e=e.child}return e;case 5:return Hx(e),t===null&&Um(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Vm(i,r)?a=null:o!==null&&Vm(i,o)&&(e.flags|=32),pE(t,e),Xt(t,e,a,n),e.child;case 6:return t===null&&Um(e),null;case 13:return gE(t,e,n);case 4:return Iy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Na(e,null,i,n):Xt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zn(i,r),w0(t,e,i,r,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,We(od,i._currentValue),i._currentValue=a,o!==null)if(ni(o.value,a)){if(o.children===r.children&&!cn.current){e=tr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=Zi(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Hm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(J(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Hm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Xt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ta(e,n),r=Fn(r),i=i(r),e.flags|=1,Xt(t,e,i,n),e.child;case 14:return i=e.type,r=Zn(i,e.pendingProps),r=Zn(i.type,r),T0(t,e,i,r,n);case 15:return dE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zn(i,r),Rh(t,e),e.tag=1,hn(i)?(t=!0,id(e)):t=!1,Ta(e,n),uE(e,i,r),$m(e,i,r,n),Zm(null,e,i,!0,t,n);case 19:return yE(t,e,n);case 22:return fE(t,e,n)}throw Error(J(156,e.tag))};function NE(t,e){return ox(t,e)}function e2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,e,n,i){return new e2(t,e,n,i)}function By(t){return t=t.prototype,!(!t||!t.isReactComponent)}function t2(t){if(typeof t=="function")return By(t)?1:0;if(t!=null){if(t=t.$$typeof,t===oy)return 11;if(t===ay)return 14}return 2}function Gr(t,e){var n=t.alternate;return n===null?(n=jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")By(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ta:return Zs(n.children,r,o,e);case sy:a=8,r|=8;break;case mm:return t=jn(12,n,e,r|2),t.elementType=mm,t.lanes=o,t;case gm:return t=jn(13,n,e,r),t.elementType=gm,t.lanes=o,t;case ym:return t=jn(19,n,e,r),t.elementType=ym,t.lanes=o,t;case HT:return lf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BT:a=10;break e;case UT:a=9;break e;case oy:a=11;break e;case ay:a=14;break e;case Ir:a=16,i=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=jn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Zs(t,e,n,i){return t=jn(7,t,i,e),t.lanes=n,t}function lf(t,e,n,i){return t=jn(22,t,i,e),t.elementType=HT,t.lanes=n,t.stateNode={isHidden:!1},t}function Rp(t,e,n){return t=jn(6,t,null,e),t.lanes=n,t}function Lp(t,e,n){return e=jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function n2(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dp(0),this.expirationTimes=dp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uy(t,e,n,i,r,o,a,u,h){return t=new n2(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=jn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sy(o),t}function i2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ea,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ME(t){if(!t)return is;t=t._reactInternals;e:{if(co(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(hn(n))return Mx(t,n,e)}return e}function OE(t,e,n,i,r,o,a,u,h){return t=Uy(n,i,!0,t,r,o,a,u,h),t.context=ME(null),n=t.current,i=Jt(),r=qr(n),o=Zi(i,r),o.callback=e??null,Wr(n,o,r),t.current.lanes=r,Yu(t,r,i),dn(t,i),t}function uf(t,e,n,i){var r=e.current,o=Jt(),a=qr(r);return n=ME(n),e.context===null?e.context=n:e.pendingContext=n,e=Zi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Wr(r,e,a),t!==null&&(ti(t,r,a,o),Ah(t,r,a)),a}function gd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hy(t,e){N0(t,e),(t=t.alternate)&&N0(t,e)}function r2(){return null}var DE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wy(t){this._internalRoot=t}cf.prototype.render=Wy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));uf(t,e,null,null)};cf.prototype.unmount=Wy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;io(function(){uf(null,t,null,null)}),e[Ji]=null}};function cf(t){this._internalRoot=t}cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=fx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kr.length&&e!==0&&e<kr[n].priority;n++);kr.splice(n,0,t),n===0&&mx(t)}};function $y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M0(){}function s2(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=gd(a);o.call(f)}}var a=OE(e,i,t,0,null,!1,!1,"",M0);return t._reactRootContainer=a,t[Ji]=a.current,Cu(t.nodeType===8?t.parentNode:t),io(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=gd(h);u.call(f)}}var h=Uy(t,0,!1,null,null,!1,!1,"",M0);return t._reactRootContainer=h,t[Ji]=h.current,Cu(t.nodeType===8?t.parentNode:t),io(function(){uf(e,h,n,i)}),h}function df(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=gd(a);u.call(h)}}uf(e,a,t,r)}else a=s2(n,e,t,r,i);return gd(a)}hx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wl(e.pendingLanes);n!==0&&(cy(e,n|1),dn(e,ut()),!(Me&6)&&(Da=ut()+500,ms()))}break;case 13:io(function(){var i=er(t,1);if(i!==null){var r=Jt();ti(i,t,1,r)}}),Hy(t,1)}};hy=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=Jt();ti(e,t,134217728,n)}Hy(t,134217728)}};dx=function(t){if(t.tag===13){var e=qr(t),n=er(t,e);if(n!==null){var i=Jt();ti(n,t,e,i)}Hy(t,e)}};fx=function(){return Ue};px=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};Cm=function(t,e,n){switch(e){case"input":if(wm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=tf(i);if(!r)throw Error(J(90));$T(i),wm(i,r)}}}break;case"textarea":GT(t,n);break;case"select":e=n.value,e!=null&&ya(t,!!n.multiple,e,!1)}};ex=jy;tx=io;var o2={usingClientEntryPoint:!1,Events:[Ju,sa,tf,XT,JT,jy]},zl={findFiberByHostInstance:Us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a2={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rx(t),t===null?null:t.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||r2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{Yd=hh.inject(a2),gi=hh}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o2;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$y(e))throw Error(J(200));return i2(t,e,null,n)};En.createRoot=function(t,e){if(!$y(t))throw Error(J(299));var n=!1,i="",r=DE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Uy(t,1,!1,null,null,n,!1,i,r),t[Ji]=e.current,Cu(t.nodeType===8?t.parentNode:t),new Wy(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=rx(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return io(t)};En.hydrate=function(t,e,n){if(!hf(e))throw Error(J(200));return df(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!$y(t))throw Error(J(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=DE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=OE(e,null,t,1,n??null,r,!1,o,a),t[Ji]=e.current,Cu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new cf(e)};En.render=function(t,e,n){if(!hf(e))throw Error(J(200));return df(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!hf(t))throw Error(J(40));return t._reactRootContainer?(io(function(){df(null,null,t,!1,function(){t._reactRootContainer=null,t[Ji]=null})}),!0):!1};En.unstable_batchedUpdates=jy;En.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!hf(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return df(t,e,n,!1,i)};En.version="18.3.1-next-f1338f8080-20240426";function VE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VE)}catch(t){console.error(t)}}VE(),VT.exports=En;var l2=VT.exports,O0=l2;fm.createRoot=O0.createRoot,fm.hydrateRoot=O0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Du.apply(this,arguments)}var jr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jr||(jr={}));const D0="popstate";function u2(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=ho(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),og("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:yd(o))}function i(r,o){ff(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return h2(e,n,i,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ff(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function c2(){return Math.random().toString(36).substr(2,8)}function V0(t,e){return{usr:t.state,key:t.key,idx:e}}function og(t,e,n,i){return n===void 0&&(n=null),Du({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ho(e):e,{state:n,key:e&&e.key||i||c2()})}function yd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ho(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function h2(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=jr.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(Du({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=jr.Pop;let z=m(),C=z==null?null:z-f;f=z,h&&h({action:u,location:b.location,delta:C})}function _(z,C){u=jr.Push;let P=og(b.location,z,C);n&&n(P,z),f=m()+1;let S=V0(P,f),F=b.createHref(P);try{a.pushState(S,"",F)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(F)}o&&h&&h({action:u,location:b.location,delta:1})}function T(z,C){u=jr.Replace;let P=og(b.location,z,C);n&&n(P,z),f=m();let S=V0(P,f),F=b.createHref(P);a.replaceState(S,"",F),o&&h&&h({action:u,location:b.location,delta:0})}function k(z){let C=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof z=="string"?z:yd(z);return P=P.replace(/ $/,"%20"),tt(C,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,C)}let b={get action(){return u},get location(){return t(r,a)},listen(z){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(D0,g),h=z,()=>{r.removeEventListener(D0,g),h=null}},createHref(z){return e(r,z)},createURL:k,encodeLocation(z){let C=k(z);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:_,replace:T,go(z){return a.go(z)}};return b}var j0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(j0||(j0={}));function d2(t,e,n){return n===void 0&&(n="/"),f2(t,e,n)}function f2(t,e,n,i){let r=typeof e=="string"?ho(e):e,o=Va(r.pathname||"/",n);if(o==null)return null;let a=jE(t);p2(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=S2(o);u=E2(a[h],f)}return u}function jE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(tt(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=Zr([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(tt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),jE(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:T2(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of zE(o.path))r(o,a,h)}),e}function zE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=zE(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function p2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:x2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const m2=/^:[\w-]+$/,g2=3,y2=2,_2=1,v2=10,w2=-2,z0=t=>t==="*";function T2(t,e){let n=t.split("/"),i=n.length;return n.some(z0)&&(i+=w2),e&&(i+=y2),n.filter(r=>!z0(r)).reduce((r,o)=>r+(m2.test(o)?g2:o===""?_2:v2),i)}function x2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function E2(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=ag({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),_=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:Zr([o,g.pathname]),pathnameBase:b2(Zr([o,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(o=Zr([o,g.pathnameBase]))}return a}function ag(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=P2(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:_,isOptional:T}=m;if(_==="*"){let b=u[g]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const k=u[g];return T&&!k?f[_]=void 0:f[_]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function P2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ff(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function S2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ff(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Va(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const I2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C2=t=>I2.test(t);function A2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ho(t):t,o;if(n)if(C2(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),ff(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=F0(n.substring(1),"/"):o=F0(n,e)}else o=e;return{pathname:o,search:R2(i),hash:L2(r)}}function F0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Np(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qy(t,e){let n=k2(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Gy(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=ho(t):(r=Du({},t),tt(!r.pathname||!r.pathname.includes("?"),Np("?","pathname","search",r)),tt(!r.pathname||!r.pathname.includes("#"),Np("#","pathname","hash",r)),tt(!r.search||!r.search.includes("#"),Np("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}u=g>=0?e[g]:"/"}let h=A2(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const Zr=t=>t.join("/").replace(/\/\/+/g,"/"),b2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,L2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function N2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const FE=["post","put","patch","delete"];new Set(FE);const M2=["get",...FE];new Set(M2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vu(){return Vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vu.apply(this,arguments)}const pf=j.createContext(null),BE=j.createContext(null),ur=j.createContext(null),mf=j.createContext(null),gs=j.createContext({outlet:null,matches:[],isDataRoute:!1}),UE=j.createContext(null);function O2(t,e){let{relative:n}=e===void 0?{}:e;Ya()||tt(!1);let{basename:i,navigator:r}=j.useContext(ur),{hash:o,pathname:a,search:u}=yf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:Zr([i,a])),r.createHref({pathname:h,search:u,hash:o})}function Ya(){return j.useContext(mf)!=null}function fo(){return Ya()||tt(!1),j.useContext(mf).location}function HE(t){j.useContext(ur).static||j.useLayoutEffect(t)}function gf(){let{isDataRoute:t}=j.useContext(gs);return t?Z2():D2()}function D2(){Ya()||tt(!1);let t=j.useContext(pf),{basename:e,future:n,navigator:i}=j.useContext(ur),{matches:r}=j.useContext(gs),{pathname:o}=fo(),a=JSON.stringify(qy(r,n.v7_relativeSplatPath)),u=j.useRef(!1);return HE(()=>{u.current=!0}),j.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=Gy(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Zr([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function yf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=j.useContext(ur),{matches:r}=j.useContext(gs),{pathname:o}=fo(),a=JSON.stringify(qy(r,i.v7_relativeSplatPath));return j.useMemo(()=>Gy(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function V2(t,e){return j2(t,e)}function j2(t,e,n,i){Ya()||tt(!1);let{navigator:r}=j.useContext(ur),{matches:o}=j.useContext(gs),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=fo(),m;if(e){var g;let z=typeof e=="string"?ho(e):e;h==="/"||(g=z.pathname)!=null&&g.startsWith(h)||tt(!1),m=z}else m=f;let _=m.pathname||"/",T=_;if(h!=="/"){let z=h.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(z.length).join("/")}let k=d2(t,{pathname:T}),b=H2(k&&k.map(z=>Object.assign({},z,{params:Object.assign({},u,z.params),pathname:Zr([h,r.encodeLocation?r.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?h:Zr([h,r.encodeLocation?r.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,n,i);return e&&b?j.createElement(mf.Provider,{value:{location:Vu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:jr.Pop}},b):b}function z2(){let t=G2(),e=N2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:r},n):null,null)}const F2=j.createElement(z2,null);class B2 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(gs.Provider,{value:this.props.routeContext},j.createElement(UE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function U2(t){let{routeContext:e,match:n,children:i}=t,r=j.useContext(pf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(gs.Provider,{value:e},i)}function H2(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||tt(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:_,errors:T}=n,k=g.route.loader&&_[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||k){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let T,k=!1,b=null,z=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,b=g.route.errorElement||F2,h&&(f<0&&_===0?(K2("route-fallback"),k=!0,z=null):f===_&&(k=!0,z=g.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,_+1)),P=()=>{let S;return T?S=b:k?S=z:g.route.Component?S=j.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=m,j.createElement(U2,{match:g,routeContext:{outlet:m,matches:C,isDataRoute:n!=null},children:S})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?j.createElement(B2,{location:n.location,revalidation:n.revalidation,component:b,error:T,children:P(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):P()},null)}var WE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(WE||{}),$E=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($E||{});function W2(t){let e=j.useContext(pf);return e||tt(!1),e}function $2(t){let e=j.useContext(BE);return e||tt(!1),e}function q2(t){let e=j.useContext(gs);return e||tt(!1),e}function qE(t){let e=q2(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function G2(){var t;let e=j.useContext(UE),n=$2(),i=qE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function Z2(){let{router:t}=W2(WE.UseNavigateStable),e=qE($E.UseNavigateStable),n=j.useRef(!1);return HE(()=>{n.current=!0}),j.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Vu({fromRouteId:e},o)))},[t,e])}const B0={};function K2(t,e,n){B0[t]||(B0[t]=!0)}function Q2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function GE(t){let{to:e,replace:n,state:i,relative:r}=t;Ya()||tt(!1);let{future:o,static:a}=j.useContext(ur),{matches:u}=j.useContext(gs),{pathname:h}=fo(),f=gf(),m=Gy(e,qy(u,o.v7_relativeSplatPath),h,r==="path"),g=JSON.stringify(m);return j.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function Vs(t){tt(!1)}function Y2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=jr.Pop,navigator:o,static:a=!1,future:u}=t;Ya()&&tt(!1);let h=e.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:h,navigator:o,static:a,future:Vu({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=ho(i));let{pathname:m="/",search:g="",hash:_="",state:T=null,key:k="default"}=i,b=j.useMemo(()=>{let z=Va(m,h);return z==null?null:{location:{pathname:z,search:g,hash:_,state:T,key:k},navigationType:r}},[h,m,g,_,T,k,r]);return b==null?null:j.createElement(ur.Provider,{value:f},j.createElement(mf.Provider,{children:n,value:b}))}function X2(t){let{children:e,location:n}=t;return V2(lg(e),n)}new Promise(()=>{});function lg(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(i,r)=>{if(!j.isValidElement(i))return;let o=[...e,r];if(i.type===j.Fragment){n.push.apply(n,lg(i.props.children,o));return}i.type!==Vs&&tt(!1),!i.props.index||!i.props.children||tt(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=lg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_d.apply(this,arguments)}function ZE(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function J2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eR(t,e){return t.button===0&&(!e||e==="_self")&&!J2(t)}const tR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],iR="6";try{window.__reactRouterVersion=iR}catch{}const rR=j.createContext({isTransitioning:!1}),sR="startTransition",U0=YA[sR];function oR(t){let{basename:e,children:n,future:i,window:r}=t,o=j.useRef();o.current==null&&(o.current=u2({window:r,v5Compat:!0}));let a=o.current,[u,h]=j.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=j.useCallback(g=>{f&&U0?U0(()=>h(g)):h(g)},[h,f]);return j.useLayoutEffect(()=>a.listen(m),[a,m]),j.useEffect(()=>Q2(i),[i]),j.createElement(Y2,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const aR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uR=j.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,_=ZE(e,tR),{basename:T}=j.useContext(ur),k,b=!1;if(typeof f=="string"&&lR.test(f)&&(k=f,aR))try{let S=new URL(window.location.href),F=f.startsWith("//")?new URL(S.protocol+f):new URL(f),G=Va(F.pathname,T);F.origin===S.origin&&G!=null?f=G+F.search+F.hash:b=!0}catch{}let z=O2(f,{relative:r}),C=dR(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function P(S){i&&i(S),S.defaultPrevented||C(S)}return j.createElement("a",_d({},_,{href:k||z,onClick:b||o?i:P,ref:n,target:h}))}),cR=j.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=ZE(e,nR),_=yf(h,{relative:g.relative}),T=fo(),k=j.useContext(BE),{navigator:b,basename:z}=j.useContext(ur),C=k!=null&&fR(_)&&f===!0,P=b.encodeLocation?b.encodeLocation(_).pathname:_.pathname,S=T.pathname,F=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;r||(S=S.toLowerCase(),F=F?F.toLowerCase():null,P=P.toLowerCase()),F&&z&&(F=Va(F,z)||F);const G=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let Z=S===P||!a&&S.startsWith(P)&&S.charAt(G)==="/",R=F!=null&&(F===P||!a&&F.startsWith(P)&&F.charAt(P.length)==="/"),I={isActive:Z,isPending:R,isTransitioning:C},N=Z?i:void 0,O;typeof o=="function"?O=o(I):O=[o,Z?"active":null,R?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(I):u;return j.createElement(uR,_d({},g,{"aria-current":N,className:O,ref:n,style:D,to:h,viewTransition:f}),typeof m=="function"?m(I):m)});var ug;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ug||(ug={}));var H0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(H0||(H0={}));function hR(t){let e=j.useContext(pf);return e||tt(!1),e}function dR(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=gf(),f=fo(),m=yf(t,{relative:a});return j.useCallback(g=>{if(eR(g,n)){g.preventDefault();let _=i!==void 0?i:yd(f)===yd(m);h(t,{replace:_,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function fR(t,e){e===void 0&&(e={});let n=j.useContext(rR);n==null&&tt(!1);let{basename:i}=hR(ug.useViewTransitionState),r=yf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Va(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Va(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ag(r.pathname,a)!=null||ag(r.pathname,o)!=null}const KE=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),_f=j.createContext({}),vf=j.createContext(null),wf=typeof document<"u",Zy=wf?j.useLayoutEffect:j.useEffect,QE=j.createContext({strict:!1}),Ky=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),pR="framerAppearId",YE="data-"+Ky(pR);function mR(t,e,n,i){const{visualElement:r}=j.useContext(_f),o=j.useContext(QE),a=j.useContext(vf),u=j.useContext(KE).reducedMotion,h=j.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;j.useInsertionEffect(()=>{f&&f.update(n,a)});const m=j.useRef(!!(n[YE]&&!window.HandoffComplete));return Zy(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),j.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function da(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function gR(t,e,n){return j.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):da(n)&&(n.current=i))},[e])}function ju(t){return typeof t=="string"||Array.isArray(t)}function Tf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Qy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yy=["initial",...Qy];function xf(t){return Tf(t.animate)||Yy.some(e=>ju(t[e]))}function XE(t){return!!(xf(t)||t.variants)}function yR(t,e){if(xf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||ju(n)?n:void 0,animate:ju(i)?i:void 0}}return t.inherit!==!1?e:{}}function _R(t){const{initial:e,animate:n}=yR(t,j.useContext(_f));return j.useMemo(()=>({initial:e,animate:n}),[W0(e),W0(n)])}function W0(t){return Array.isArray(t)?t.join(" "):t}const $0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zu={};for(const t in $0)zu[t]={isEnabled:e=>$0[t].some(n=>!!e[n])};function vR(t){for(const e in t)zu[e]={...zu[e],...t[e]}}const Xy=j.createContext({}),JE=j.createContext({}),wR=Symbol.for("motionComponentSymbol");function TR({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&vR(t);function o(u,h){let f;const m={...j.useContext(KE),...u,layoutId:xR(u)},{isStatic:g}=m,_=_R(u),T=i(u,g);if(!g&&wf){_.visualElement=mR(r,T,m,e);const k=j.useContext(JE),b=j.useContext(QE).strict;_.visualElement&&(f=_.visualElement.loadFeatures(m,b,t,k))}return j.createElement(_f.Provider,{value:_},f&&_.visualElement?j.createElement(f,{visualElement:_.visualElement,...m}):null,n(r,u,gR(T,_.visualElement,h),T,g,_.visualElement))}const a=j.forwardRef(o);return a[wR]=r,a}function xR({layoutId:t}){const e=j.useContext(Xy).id;return e&&t!==void 0?e+"-"+t:t}function ER(t){function e(i,r={}){return TR(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const PR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jy(t){return typeof t!="string"||t.includes("-")?!1:!!(PR.indexOf(t)>-1||/[A-Z]/.test(t))}const vd={};function SR(t){Object.assign(vd,t)}const tc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],po=new Set(tc);function eP(t,{layout:e,layoutId:n}){return po.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vd[t]||t==="opacity")}const fn=t=>!!(t&&t.getVelocity),IR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},CR=tc.length;function AR(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<CR;a++){const u=tc[a];if(t[u]!==void 0){const h=IR[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const tP=t=>e=>typeof e=="string"&&e.startsWith(t),nP=tP("--"),cg=tP("var(--"),kR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,bR=(t,e)=>e&&typeof t=="number"?e.transform(t):t,rs=(t,e,n)=>Math.min(Math.max(n,t),e),mo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},au={...mo,transform:t=>rs(0,1,t)},dh={...mo,default:1},lu=t=>Math.round(t*1e5)/1e5,Ef=/(-)?([\d]*\.?[\d])+/g,iP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,RR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function nc(t){return typeof t=="string"}const ic=t=>({test:e=>nc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Sr=ic("deg"),_i=ic("%"),ye=ic("px"),LR=ic("vh"),NR=ic("vw"),q0={..._i,parse:t=>_i.parse(t)/100,transform:t=>_i.transform(t*100)},G0={...mo,transform:Math.round},rP={borderWidth:ye,borderTopWidth:ye,borderRightWidth:ye,borderBottomWidth:ye,borderLeftWidth:ye,borderRadius:ye,radius:ye,borderTopLeftRadius:ye,borderTopRightRadius:ye,borderBottomRightRadius:ye,borderBottomLeftRadius:ye,width:ye,maxWidth:ye,height:ye,maxHeight:ye,size:ye,top:ye,right:ye,bottom:ye,left:ye,padding:ye,paddingTop:ye,paddingRight:ye,paddingBottom:ye,paddingLeft:ye,margin:ye,marginTop:ye,marginRight:ye,marginBottom:ye,marginLeft:ye,rotate:Sr,rotateX:Sr,rotateY:Sr,rotateZ:Sr,scale:dh,scaleX:dh,scaleY:dh,scaleZ:dh,skew:Sr,skewX:Sr,skewY:Sr,distance:ye,translateX:ye,translateY:ye,translateZ:ye,x:ye,y:ye,z:ye,perspective:ye,transformPerspective:ye,opacity:au,originX:q0,originY:q0,originZ:ye,zIndex:G0,fillOpacity:au,strokeOpacity:au,numOctaves:G0};function e_(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const _=e[g];if(nP(g)){o[g]=_;continue}const T=rP[g],k=bR(_,T);if(po.has(g)){if(h=!0,a[g]=k,!m)continue;_!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=k):r[g]=k}if(e.transform||(h||i?r.transform=AR(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:_="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${_} ${T}`}}const t_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function sP(t,e,n){for(const i in e)!fn(e[i])&&!eP(i,n)&&(t[i]=e[i])}function MR({transformTemplate:t},e,n){return j.useMemo(()=>{const i=t_();return e_(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function OR(t,e,n){const i=t.style||{},r={};return sP(r,i,t),Object.assign(r,MR(t,e,n)),t.transformValues?t.transformValues(r):r}function DR(t,e,n){const i={},r=OR(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const VR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||VR.has(t)}let oP=t=>!wd(t);function jR(t){t&&(oP=e=>e.startsWith("on")?!wd(e):t(e))}try{jR(require("@emotion/is-prop-valid").default)}catch{}function zR(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(oP(r)||n===!0&&wd(r)||!e&&!wd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function Z0(t,e,n){return typeof t=="string"?t:ye.transform(e+n*t)}function FR(t,e,n){const i=Z0(e,t.x,t.width),r=Z0(n,t.y,t.height);return`${i} ${r}`}const BR={offset:"stroke-dashoffset",array:"stroke-dasharray"},UR={offset:"strokeDashoffset",array:"strokeDasharray"};function HR(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?BR:UR;t[o.offset]=ye.transform(-i);const a=ye.transform(e),u=ye.transform(n);t[o.array]=`${a} ${u}`}function n_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,_){if(e_(t,f,m,_),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:k,dimensions:b}=t;T.transform&&(b&&(k.transform=T.transform),delete T.transform),b&&(r!==void 0||o!==void 0||k.transform)&&(k.transformOrigin=FR(b,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&HR(T,a,u,h,!1)}const aP=()=>({...t_(),attrs:{}}),i_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function WR(t,e,n,i){const r=j.useMemo(()=>{const o=aP();return n_(o,e,{enableHardwareAcceleration:!1},i_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};sP(o,t.style,t),r.style={...o,...r.style}}return r}function $R(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Jy(n)?WR:DR)(i,o,a,n),m={...zR(i,typeof n=="string",t),...h,ref:r},{children:g}=i,_=j.useMemo(()=>fn(g)?g.get():g,[g]);return j.createElement(n,{...m,children:_})}}function lP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const uP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cP(t,e,n,i){lP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(uP.has(r)?r:Ky(r),e.attrs[r])}function r_(t,e){const{style:n}=t,i={};for(const r in n)(fn(n[r])||e.style&&fn(e.style[r])||eP(r,t))&&(i[r]=n[r]);return i}function hP(t,e){const n=r_(t,e);for(const i in t)if(fn(t[i])||fn(e[i])){const r=tc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function s_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function dP(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const Td=t=>Array.isArray(t),qR=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),GR=t=>Td(t)?t[t.length-1]||0:t;function Oh(t){const e=fn(t)?t.get():t;return qR(e)?e.toValue():e}function ZR({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:KR(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const fP=t=>(e,n)=>{const i=j.useContext(_f),r=j.useContext(vf),o=()=>ZR(t,e,i,r);return n?o():dP(o)};function KR(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Oh(o[_]);let{initial:a,animate:u}=t;const h=xf(t),f=XE(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Tf(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const k=s_(t,T);if(!k)return;const{transitionEnd:b,transition:z,...C}=k;for(const P in C){let S=C[P];if(Array.isArray(S)){const F=m?S.length-1:0;S=S[F]}S!==null&&(r[P]=S)}for(const P in b)r[P]=b[P]}),r}const ht=t=>t;class K0{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function QR(t){let e=new K0,n=new K0,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,_=g?e:n;return f&&a.add(h),_.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const fh=["prepare","read","update","preRender","render","postRender"],YR=40;function XR(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=fh.reduce((g,_)=>(g[_]=QR(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,YR),1),r.timestamp=g,r.isProcessing=!0,fh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:fh.reduce((g,_)=>{const T=o[_];return g[_]=(k,b=!1,z=!1)=>(n||h(),T.schedule(k,b,z)),g},{}),cancel:g=>fh.forEach(_=>o[_].cancel(g)),state:r,steps:o}}const{schedule:$e,cancel:nr,state:Ut,steps:Mp}=XR(typeof requestAnimationFrame<"u"?requestAnimationFrame:ht,!0),JR={useVisualState:fP({scrapeMotionValuesFromProps:hP,createRenderState:aP,onMount:(t,e,{renderState:n,latestValues:i})=>{$e.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),$e.render(()=>{n_(n,i,{enableHardwareAcceleration:!1},i_(e.tagName),t.transformTemplate),cP(e,n)})}})},eL={useVisualState:fP({scrapeMotionValuesFromProps:r_,createRenderState:t_})};function tL(t,{forwardMotionProps:e=!1},n,i){return{...Jy(t)?JR:eL,preloadedFeatures:n,useRender:$R(e),createVisualElement:i,Component:t}}function $i(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const pP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Pf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const nL=t=>e=>pP(e)&&t(e,Pf(e));function Ki(t,e,n,i){return $i(t,e,nL(n),i)}const iL=(t,e)=>n=>e(t(n)),Kr=(...t)=>t.reduce(iL);function mP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Q0=mP("dragHorizontal"),Y0=mP("dragVertical");function gP(t){let e=!1;if(t==="y")e=Y0();else if(t==="x")e=Q0();else{const n=Q0(),i=Y0();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function yP(){const t=gP(!0);return t?(t(),!1):!0}class ys{constructor(e){this.isMounted=!1,this.node=e}update(){}}function X0(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||yP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&$e.update(()=>u[i](o,a))};return Ki(t.current,n,r,{passive:!t.getProps()[i]})}class rL extends ys{mount(){this.unmount=Kr(X0(this.node,!0),X0(this.node,!1))}unmount(){}}class sL extends ys{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kr($i(this.node.current,"focus",()=>this.onFocus()),$i(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _P=(t,e)=>e?t===e?!0:_P(t,e.parentElement):!1;function Op(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Pf(n))}class oL extends ys{constructor(){super(...arguments),this.removeStartListeners=ht,this.removeEndListeners=ht,this.removeAccessibleListeners=ht,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=Ki(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();$e.update(()=>{!g&&!_P(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=Ki(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Kr(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Op("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&$e.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=$i(this.node.current,"keyup",a),Op("down",(u,h)=>{this.startPress(u,h)})},n=$i(this.node.current,"keydown",e),i=()=>{this.isPressing&&Op("cancel",(o,a)=>this.cancelPress(o,a))},r=$i(this.node.current,"blur",i);this.removeAccessibleListeners=Kr(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&$e.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!yP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&$e.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Ki(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=$i(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Kr(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const hg=new WeakMap,Dp=new WeakMap,aL=t=>{const e=hg.get(t.target);e&&e(t)},lL=t=>{t.forEach(aL)};function uL({root:t,...e}){const n=t||document;Dp.has(n)||Dp.set(n,{});const i=Dp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(lL,{root:t,...e})),i[r]}function cL(t,e,n){const i=uL(e);return hg.set(t,n),i.observe(t),()=>{hg.delete(t),i.unobserve(t)}}const hL={some:0,all:1};class dL extends ys{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:hL[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(h)};return cL(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(fL(e,n))&&this.startObserver()}unmount(){}}function fL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const pL={inView:{Feature:dL},tap:{Feature:oL},focus:{Feature:sL},hover:{Feature:rL}};function vP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function mL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function gL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Sf(t,e,n){const i=t.getProps();return s_(i,e,n!==void 0?n:i.custom,mL(t),gL(t))}let o_=ht;const Ks=t=>t*1e3,Qi=t=>t/1e3,yL={current:!1},wP=t=>Array.isArray(t)&&typeof t[0]=="number";function TP(t){return!!(!t||typeof t=="string"&&xP[t]||wP(t)||Array.isArray(t)&&t.every(TP))}const ql=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,xP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ql([0,.65,.55,1]),circOut:ql([.55,0,1,.45]),backIn:ql([.31,.01,.66,-.59]),backOut:ql([.33,1.53,.69,.99])};function EP(t){if(t)return wP(t)?ql(t):Array.isArray(t)?t.map(EP):xP[t]}function _L(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=EP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function vL(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const PP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,wL=1e-7,TL=12;function xL(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=PP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>wL&&++u<TL);return a}function rc(t,e,n,i){if(t===e&&n===i)return ht;const r=o=>xL(o,0,1,t,n);return o=>o===0||o===1?o:PP(r(o),e,i)}const EL=rc(.42,0,1,1),PL=rc(0,0,.58,1),SP=rc(.42,0,.58,1),SL=t=>Array.isArray(t)&&typeof t[0]!="number",IP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,CP=t=>e=>1-t(1-e),a_=t=>1-Math.sin(Math.acos(t)),AP=CP(a_),IL=IP(a_),kP=rc(.33,1.53,.69,.99),l_=CP(kP),CL=IP(l_),AL=t=>(t*=2)<1?.5*l_(t):.5*(2-Math.pow(2,-10*(t-1))),kL={linear:ht,easeIn:EL,easeInOut:SP,easeOut:PL,circIn:a_,circInOut:IL,circOut:AP,backIn:l_,backInOut:CL,backOut:kP,anticipate:AL},J0=t=>{if(Array.isArray(t)){o_(t.length===4);const[e,n,i,r]=t;return rc(e,n,i,r)}else if(typeof t=="string")return kL[t];return t},u_=(t,e)=>n=>!!(nc(n)&&RR.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),bP=(t,e,n)=>i=>{if(!nc(i))return i;const[r,o,a,u]=i.match(Ef);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},bL=t=>rs(0,255,t),Vp={...mo,transform:t=>Math.round(bL(t))},$s={test:u_("rgb","red"),parse:bP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Vp.transform(t)+", "+Vp.transform(e)+", "+Vp.transform(n)+", "+lu(au.transform(i))+")"};function RL(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const dg={test:u_("#"),parse:RL,transform:$s.transform},fa={test:u_("hsl","hue"),parse:bP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+_i.transform(lu(e))+", "+_i.transform(lu(n))+", "+lu(au.transform(i))+")"},Yt={test:t=>$s.test(t)||dg.test(t)||fa.test(t),parse:t=>$s.test(t)?$s.parse(t):fa.test(t)?fa.parse(t):dg.parse(t),transform:t=>nc(t)?t:t.hasOwnProperty("red")?$s.transform(t):fa.transform(t)},Je=(t,e,n)=>-n*t+n*e+t;function jp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function LL({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=jp(h,u,t+1/3),o=jp(h,u,t),a=jp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const zp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},NL=[dg,$s,fa],ML=t=>NL.find(e=>e.test(t));function ew(t){const e=ML(t);let n=e.parse(t);return e===fa&&(n=LL(n)),n}const RP=(t,e)=>{const n=ew(t),i=ew(e),r={...n};return o=>(r.red=zp(n.red,i.red,o),r.green=zp(n.green,i.green,o),r.blue=zp(n.blue,i.blue,o),r.alpha=Je(n.alpha,i.alpha,o),$s.transform(r))};function OL(t){var e,n;return isNaN(t)&&nc(t)&&(((e=t.match(Ef))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(iP))===null||n===void 0?void 0:n.length)||0)>0}const LP={regex:kR,countKey:"Vars",token:"${v}",parse:ht},NP={regex:iP,countKey:"Colors",token:"${c}",parse:Yt.parse},MP={regex:Ef,countKey:"Numbers",token:"${n}",parse:mo.parse};function Fp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function xd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Fp(n,LP),Fp(n,NP),Fp(n,MP),n}function OP(t){return xd(t).values}function DP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=xd(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(LP.token,a[h]):h<i+n?u=u.replace(NP.token,Yt.transform(a[h])):u=u.replace(MP.token,lu(a[h]));return u}}const DL=t=>typeof t=="number"?0:t;function VL(t){const e=OP(t);return DP(t)(e.map(DL))}const ss={test:OL,parse:OP,createTransformer:DP,getAnimatableNone:VL},VP=(t,e)=>n=>`${n>0?e:t}`;function jP(t,e){return typeof t=="number"?n=>Je(t,e,n):Yt.test(t)?RP(t,e):t.startsWith("var(")?VP(t,e):FP(t,e)}const zP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>jP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},jL=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=jP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},FP=(t,e)=>{const n=ss.createTransformer(e),i=xd(t),r=xd(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Kr(zP(i.values,r.values),n):VP(t,e)},Fu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},tw=(t,e)=>n=>Je(t,e,n);function zL(t){return typeof t=="number"?tw:typeof t=="string"?Yt.test(t)?RP:FP:Array.isArray(t)?zP:typeof t=="object"?jL:tw}function FL(t,e,n){const i=[],r=n||zL(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||ht:e;u=Kr(h,u)}i.push(u)}return i}function BP(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(o_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=FL(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Fu(t[m],t[m+1],f);return a[m](g)};return n?f=>h(rs(t[0],t[o-1],f)):h}function BL(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Fu(0,e,i);t.push(Je(n,1,r))}}function UL(t){const e=[0];return BL(e,t.length-1),e}function HL(t,e){return t.map(n=>n*e)}function WL(t,e){return t.map(()=>e||SP).splice(0,t.length-1)}function Ed({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=SL(i)?i.map(J0):J0(i),o={done:!1,value:e[0]},a=HL(n&&n.length===e.length?n:UL(e),t),u=BP(a,e,{ease:Array.isArray(r)?r:WL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function UP(t,e){return e?t*(1e3/e):0}const $L=5;function HP(t,e,n){const i=Math.max(e-$L,0);return UP(n-t(i),e-i)}const Bp=.001,qL=.01,GL=10,ZL=.05,KL=1;function QL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=rs(ZL,KL,a),t=rs(qL,GL,Qi(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,T=fg(f,a),k=Math.exp(-g);return Bp-_/T*k},o=f=>{const g=f*a*t,_=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-g),b=fg(Math.pow(f,2),a);return(-r(f)+Bp>0?-1:1)*((_-T)*k)/b}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Bp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=XL(r,o,u);if(t=Ks(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const YL=12;function XL(t,e,n){let i=n;for(let r=1;r<YL;r++)i=i-t(i)/e(i);return i}function fg(t,e){return t*Math.sqrt(1-e*e)}const JL=["duration","bounce"],eN=["stiffness","damping","mass"];function nw(t,e){return e.some(n=>t[n]!==void 0)}function tN(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!nw(t,eN)&&nw(t,JL)){const n=QL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function WP({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:_}=tN({...i,velocity:-Qi(i.velocity||0)}),T=g||0,k=h/(2*Math.sqrt(u*f)),b=o-r,z=Qi(Math.sqrt(u/f)),C=Math.abs(b)<5;n||(n=C?.01:2),e||(e=C?.005:.5);let P;if(k<1){const S=fg(z,k);P=F=>{const G=Math.exp(-k*z*F);return o-G*((T+k*z*b)/S*Math.sin(S*F)+b*Math.cos(S*F))}}else if(k===1)P=S=>o-Math.exp(-z*S)*(b+(T+z*b)*S);else{const S=z*Math.sqrt(k*k-1);P=F=>{const G=Math.exp(-k*z*F),Z=Math.min(S*F,300);return o-G*((T+k*z*b)*Math.sinh(Z)+S*b*Math.cosh(Z))/S}}return{calculatedDuration:_&&m||null,next:S=>{const F=P(S);if(_)a.done=S>=m;else{let G=T;S!==0&&(k<1?G=HP(P,S,F):G=0);const Z=Math.abs(G)<=n,R=Math.abs(o-F)<=e;a.done=Z&&R}return a.value=a.done?o:F,a}}}function iw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},T=I=>u!==void 0&&I<u||h!==void 0&&I>h,k=I=>u===void 0?h:h===void 0||Math.abs(u-I)<Math.abs(h-I)?u:h;let b=n*e;const z=g+b,C=a===void 0?z:a(z);C!==z&&(b=C-g);const P=I=>-b*Math.exp(-I/i),S=I=>C+P(I),F=I=>{const N=P(I),O=S(I);_.done=Math.abs(N)<=f,_.value=_.done?C:O};let G,Z;const R=I=>{T(_.value)&&(G=I,Z=WP({keyframes:[_.value,k(_.value)],velocity:HP(S,I,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:I=>{let N=!1;return!Z&&G===void 0&&(N=!0,F(I),R(I)),G!==void 0&&I>G?Z.next(I-G):(!N&&F(I),_)}}}const nN=t=>{const e=({timestamp:n})=>t(n);return{start:()=>$e.update(e,!0),stop:()=>nr(e),now:()=>Ut.isProcessing?Ut.timestamp:performance.now()}},rw=2e4;function sw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<rw;)e+=n,i=t.next(e);return e>=rw?1/0:e}const iN={decay:iw,inertia:iw,tween:Ed,keyframes:Ed,spring:WP};function Pd({autoplay:t=!0,delay:e=0,driver:n=nN,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,..._}){let T=1,k=!1,b,z;const C=()=>{z=new Promise(ee=>{b=ee})};C();let P;const S=iN[r]||Ed;let F;S!==Ed&&typeof i[0]!="number"&&(F=BP([0,100],i,{clamp:!1}),i=[0,100]);const G=S({..._,keyframes:i});let Z;u==="mirror"&&(Z=S({..._,keyframes:[...i].reverse(),velocity:-(_.velocity||0)}));let R="idle",I=null,N=null,O=null;G.calculatedDuration===null&&o&&(G.calculatedDuration=sw(G));const{calculatedDuration:D}=G;let B=1/0,M=1/0;D!==null&&(B=D+a,M=B*(o+1)-a);let xe=0;const dt=ee=>{if(N===null)return;T>0&&(N=Math.min(N,ee)),T<0&&(N=Math.min(ee-M/T,N)),I!==null?xe=I:xe=Math.round(ee-N)*T;const ae=xe-e*(T>=0?1:-1),me=T>=0?ae<0:ae>M;xe=Math.max(ae,0),R==="finished"&&I===null&&(xe=M);let ce=xe,pe=G;if(o){const Ci=Math.min(xe,M)/B;let ii=Math.floor(Ci),pn=Ci%1;!pn&&Ci>=1&&(pn=1),pn===1&&ii--,ii=Math.min(ii,o+1),!!(ii%2)&&(u==="reverse"?(pn=1-pn,a&&(pn-=a/B)):u==="mirror"&&(pe=Z)),ce=rs(0,1,pn)*B}const ue=me?{done:!1,value:i[0]}:pe.next(ce);F&&(ue.value=F(ue.value));let{done:Qe}=ue;!me&&D!==null&&(Qe=T>=0?xe>=M:xe<=0);const Vt=I===null&&(R==="finished"||R==="running"&&Qe);return g&&g(ue.value),Vt&&W(),ue},Se=()=>{P&&P.stop(),P=void 0},rt=()=>{R="idle",Se(),b(),C(),N=O=null},W=()=>{R="finished",m&&m(),Se(),b()},te=()=>{if(k)return;P||(P=n(dt));const ee=P.now();h&&h(),I!==null?N=ee-I:(!N||R==="finished")&&(N=ee),R==="finished"&&C(),O=N,I=null,R="running",P.start()};t&&te();const Q={then(ee,ae){return z.then(ee,ae)},get time(){return Qi(xe)},set time(ee){ee=Ks(ee),xe=ee,I!==null||!P||T===0?I=ee:N=P.now()-ee/T},get duration(){const ee=G.calculatedDuration===null?sw(G):G.calculatedDuration;return Qi(ee)},get speed(){return T},set speed(ee){ee===T||!P||(T=ee,Q.time=Qi(xe))},get state(){return R},play:te,pause:()=>{R="paused",I=xe},stop:()=>{k=!0,R!=="idle"&&(R="idle",f&&f(),rt())},cancel:()=>{O!==null&&dt(O),rt()},complete:()=>{R="finished"},sample:ee=>(N=0,dt(ee))};return Q}function rN(t){let e;return()=>(e===void 0&&(e=t()),e)}const sN=rN(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),oN=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ph=10,aN=2e4,lN=(t,e)=>e.type==="spring"||t==="backgroundColor"||!TP(e.ease);function uN(t,e,{onUpdate:n,onComplete:i,...r}){if(!(sN()&&oN.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(S=>{u=S})};m();let{keyframes:g,duration:_=300,ease:T,times:k}=r;if(lN(e,r)){const S=Pd({...r,repeat:0,delay:0});let F={done:!1,value:g[0]};const G=[];let Z=0;for(;!F.done&&Z<aN;)F=S.sample(Z),G.push(F.value),Z+=ph;k=void 0,g=G,_=Z-ph,T="linear"}const b=_L(t.owner.current,e,g,{...r,duration:_,ease:T,times:k}),z=()=>{f=!1,b.cancel()},C=()=>{f=!0,$e.update(z),u(),m()};return b.onfinish=()=>{f||(t.set(vL(g,r)),i&&i(),C())},{then(S,F){return h.then(S,F)},attachTimeline(S){return b.timeline=S,b.onfinish=null,ht},get time(){return Qi(b.currentTime||0)},set time(S){b.currentTime=Ks(S)},get speed(){return b.playbackRate},set speed(S){b.playbackRate=S},get duration(){return Qi(_)},play:()=>{a||(b.play(),nr(z))},pause:()=>b.pause(),stop:()=>{if(a=!0,b.playState==="idle")return;const{currentTime:S}=b;if(S){const F=Pd({...r,autoplay:!1});t.setWithVelocity(F.sample(S-ph).value,F.sample(S).value,ph)}C()},complete:()=>{f||b.finish()},cancel:C}}function cN({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:ht,pause:ht,stop:ht,then:o=>(o(),Promise.resolve()),cancel:ht,complete:ht});return e?Pd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const hN={type:"spring",stiffness:500,damping:25,restSpeed:10},dN=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fN={type:"keyframes",duration:.8},pN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mN=(t,{keyframes:e})=>e.length>2?fN:po.has(t)?t.startsWith("scale")?dN(e[1]):hN:pN,pg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ss.test(e)||e==="0")&&!e.startsWith("url(")),gN=new Set(["brightness","contrast","saturate","opacity"]);function yN(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Ef)||[];if(!i)return t;const r=n.replace(i,"");let o=gN.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const _N=/([a-z-]*)\(.*?\)/g,mg={...ss,getAnimatableNone:t=>{const e=t.match(_N);return e?e.map(yN).join(" "):t}},vN={...rP,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:mg,WebkitFilter:mg},c_=t=>vN[t];function $P(t,e){let n=c_(t);return n!==mg&&(n=ss),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const qP=t=>/^0[^.\s]+$/.test(t);function wN(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||qP(t)}function TN(t,e,n,i){const r=pg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),wN(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=$P(e,u)}return o}function xN({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function h_(t,e){return t[e]||t.default||t}const EN={skipAnimations:!1},d_=(t,e,n,i={})=>r=>{const o=h_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Ks(a);const h=TN(e,t,n,o),f=h[0],m=h[h.length-1],g=pg(t,f),_=pg(t,m);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:k=>{e.set(k),o.onUpdate&&o.onUpdate(k)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(xN(o)||(T={...T,...mN(t,T)}),T.duration&&(T.duration=Ks(T.duration)),T.repeatDelay&&(T.repeatDelay=Ks(T.repeatDelay)),!g||!_||yL.current||o.type===!1||EN.skipAnimations)return cN(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const k=uN(e,t,T);if(k)return k}return Pd(T)};function Sd(t){return!!(fn(t)&&t.add)}const GP=t=>/^\-?\d*\.?\d+$/.test(t);function f_(t,e){t.indexOf(e)===-1&&t.push(e)}function p_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class m_{constructor(){this.subscriptions=[]}add(e){return f_(this.subscriptions,e),()=>p_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const PN=t=>!isNaN(parseFloat(t));class SN{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Ut;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,$e.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>$e.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=PN(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new m_);const i=this.events[e].add(n);return e==="change"?()=>{i(),$e.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?UP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ja(t,e){return new SN(t,e)}const ZP=t=>e=>e.test(t),IN={test:t=>t==="auto",parse:t=>t},KP=[mo,ye,_i,Sr,NR,LR,IN],Fl=t=>KP.find(ZP(t)),CN=[...KP,Yt,ss],AN=t=>CN.find(ZP(t));function kN(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ja(n))}function bN(t,e){const n=Sf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=GR(o[a]);kN(t,a,u)}}function RN(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(GP(m)||qP(m))?m=parseFloat(m):!AN(m)&&ss.test(f)&&(m=$P(h,f)),t.addValue(h,ja(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function LN(t,e){return e?(e[t]||e.default||e).from:void 0}function NN(t,e,n){const i={};for(const r in t){const o=LN(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function MN({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function ON(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function QP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const _=t.getValue(g),T=u[g];if(!_||T===void 0||m&&MN(m,g))continue;const k={delay:n,elapsed:0,...h_(o||{},g)};if(window.HandoffAppearAnimations){const C=t.getProps()[YE];if(C){const P=window.HandoffAppearAnimations(C,g,_,$e);P!==null&&(k.elapsed=P,k.isHandoff=!0)}}let b=!k.isHandoff&&!ON(_,T);if(k.type==="spring"&&(_.getVelocity()||k.velocity)&&(b=!1),_.animation&&(b=!1),b)continue;_.start(d_(g,_,T,t.shouldReduceMotion&&po.has(g)?{type:!1}:k));const z=_.animation;Sd(h)&&(h.add(g),z.then(()=>h.remove(g))),f.push(z)}return a&&Promise.all(f).then(()=>{a&&bN(t,a)}),f}function gg(t,e,n={}){const i=Sf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(QP(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return DN(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function DN(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(VN).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(gg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function VN(t,e){return t.sortNodePosition(e)}function jN(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>gg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=gg(t,e,n);else{const r=typeof e=="function"?Sf(t,e,n.custom):e;i=Promise.all(QP(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const zN=[...Qy].reverse(),FN=Qy.length;function BN(t){return e=>Promise.all(e.map(({animation:n,options:i})=>jN(t,n,i)))}function UN(t){let e=BN(t);const n=WN();let i=!0;const r=(h,f)=>{const m=Sf(t,f);if(m){const{transition:g,transitionEnd:_,...T}=m;h={...h,...T,..._}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},_=[],T=new Set;let k={},b=1/0;for(let C=0;C<FN;C++){const P=zN[C],S=n[P],F=m[P]!==void 0?m[P]:g[P],G=ju(F),Z=P===f?S.isActive:null;Z===!1&&(b=C);let R=F===g[P]&&F!==m[P]&&G;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),S.protectedKeys={...k},!S.isActive&&Z===null||!F&&!S.prevProp||Tf(F)||typeof F=="boolean")continue;let N=HN(S.prevProp,F)||P===f&&S.isActive&&!R&&G||C>b&&G,O=!1;const D=Array.isArray(F)?F:[F];let B=D.reduce(r,{});Z===!1&&(B={});const{prevResolvedValues:M={}}=S,xe={...M,...B},dt=Se=>{N=!0,T.has(Se)&&(O=!0,T.delete(Se)),S.needsAnimating[Se]=!0};for(const Se in xe){const rt=B[Se],W=M[Se];if(k.hasOwnProperty(Se))continue;let te=!1;Td(rt)&&Td(W)?te=!vP(rt,W):te=rt!==W,te?rt!==void 0?dt(Se):T.add(Se):rt!==void 0&&T.has(Se)?dt(Se):S.protectedKeys[Se]=!0}S.prevProp=F,S.prevResolvedValues=B,S.isActive&&(k={...k,...B}),i&&t.blockInitialAnimation&&(N=!1),N&&(!R||O)&&_.push(...D.map(Se=>({animation:Se,options:{type:P,...h}})))}if(T.size){const C={};T.forEach(P=>{const S=t.getBaseTarget(P);S!==void 0&&(C[P]=S)}),_.push({animation:C})}let z=!!_.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(z=!1),i=!1,z?e(_):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var k;return(k=T.animationState)===null||k===void 0?void 0:k.setActive(h,f)}),n[h].isActive=f;const _=a(m,h);for(const T in n)n[T].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function HN(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!vP(e,t):!1}function Ms(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WN(){return{animate:Ms(!0),whileInView:Ms(),whileHover:Ms(),whileTap:Ms(),whileDrag:Ms(),whileFocus:Ms(),exit:Ms()}}class $N extends ys{constructor(e){super(e),e.animationState||(e.animationState=UN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Tf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let qN=0;class GN extends ys{constructor(){super(...arguments),this.id=qN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const ZN={animation:{Feature:$N},exit:{Feature:GN}},ow=(t,e)=>Math.abs(t-e);function KN(t,e){const n=ow(t.x,e.x),i=ow(t.y,e.y);return Math.sqrt(n**2+i**2)}class YP{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Hp(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,T=KN(g.offset,{x:0,y:0})>=3;if(!_&&!T)return;const{point:k}=g,{timestamp:b}=Ut;this.history.push({...k,timestamp:b});const{onStart:z,onMove:C}=this.handlers;_||(z&&z(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Up(_,this.transformPagePoint),$e.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:T,onSessionEnd:k,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=Hp(g.type==="pointercancel"?this.lastMoveEventInfo:Up(_,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,z),k&&k(g,z)},!pP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Pf(e),u=Up(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Ut;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,Hp(u,this.history)),this.removeListeners=Kr(Ki(this.contextWindow,"pointermove",this.handlePointerMove),Ki(this.contextWindow,"pointerup",this.handlePointerUp),Ki(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),nr(this.updatePoint)}}function Up(t,e){return e?{point:e(t.point)}:t}function aw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Hp({point:t},e){return{point:t,delta:aw(t,XP(e)),offset:aw(t,QN(e)),velocity:YN(e,.1)}}function QN(t){return t[0]}function XP(t){return t[t.length-1]}function YN(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=XP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ks(e)));)n--;if(!i)return{x:0,y:0};const o=Qi(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Tn(t){return t.max-t.min}function yg(t,e=0,n=.01){return Math.abs(t-e)<=n}function lw(t,e,n,i=.5){t.origin=i,t.originPoint=Je(e.min,e.max,t.origin),t.scale=Tn(n)/Tn(e),(yg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Je(n.min,n.max,t.origin)-t.originPoint,(yg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function uu(t,e,n,i){lw(t.x,e.x,n.x,i?i.originX:void 0),lw(t.y,e.y,n.y,i?i.originY:void 0)}function uw(t,e,n){t.min=n.min+e.min,t.max=t.min+Tn(e)}function XN(t,e,n){uw(t.x,e.x,n.x),uw(t.y,e.y,n.y)}function cw(t,e,n){t.min=e.min-n.min,t.max=t.min+Tn(e)}function cu(t,e,n){cw(t.x,e.x,n.x),cw(t.y,e.y,n.y)}function JN(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Je(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Je(n,t,i.max):Math.min(t,n)),t}function hw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function eM(t,{top:e,left:n,bottom:i,right:r}){return{x:hw(t.x,n,r),y:hw(t.y,e,i)}}function dw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function tM(t,e){return{x:dw(t.x,e.x),y:dw(t.y,e.y)}}function nM(t,e){let n=.5;const i=Tn(t),r=Tn(e);return r>i?n=Fu(e.min,e.max-i,t.min):i>r&&(n=Fu(t.min,t.max-r,e.min)),rs(0,1,n)}function iM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const _g=.35;function rM(t=_g){return t===!1?t=0:t===!0&&(t=_g),{x:fw(t,"left","right"),y:fw(t,"top","bottom")}}function fw(t,e,n){return{min:pw(t,e),max:pw(t,n)}}function pw(t,e){return typeof t=="number"?t:t[e]||0}const mw=()=>({translate:0,scale:1,origin:0,originPoint:0}),pa=()=>({x:mw(),y:mw()}),gw=()=>({min:0,max:0}),gt=()=>({x:gw(),y:gw()});function Nn(t){return[t("x"),t("y")]}function JP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function sM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function oM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Wp(t){return t===void 0||t===1}function vg({scale:t,scaleX:e,scaleY:n}){return!Wp(t)||!Wp(e)||!Wp(n)}function js(t){return vg(t)||eS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function eS(t){return yw(t.x)||yw(t.y)}function yw(t){return t&&t!=="0%"}function Id(t,e,n){const i=t-n,r=e*i;return n+r}function _w(t,e,n,i,r){return r!==void 0&&(t=Id(t,r,i)),Id(t,n,i)+e}function wg(t,e=0,n=1,i,r){t.min=_w(t.min,e,n,i,r),t.max=_w(t.max,e,n,i,r)}function tS(t,{x:e,y:n}){wg(t.x,e.translate,e.scale,e.originPoint),wg(t.y,n.translate,n.scale,n.originPoint)}function aM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ma(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,tS(t,a)),i&&js(o.latestValues)&&ma(t,o.latestValues))}e.x=vw(e.x),e.y=vw(e.y)}function vw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ar(t,e){t.min=t.min+e,t.max=t.max+e}function ww(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=Je(t.min,t.max,o);wg(t,e[n],e[i],a,e.scale)}const lM=["x","scaleX","originX"],uM=["y","scaleY","originY"];function ma(t,e){ww(t.x,e,lM),ww(t.y,e,uM)}function nS(t,e){return JP(oM(t.getBoundingClientRect(),e))}function cM(t,e,n){const i=nS(t,n),{scroll:r}=e;return r&&(Ar(i.x,r.offset.x),Ar(i.y,r.offset.y)),i}const iS=({current:t})=>t?t.ownerDocument.defaultView:null,hM=new WeakMap;class dM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Pf(m,"page").point)},o=(m,g)=>{const{drag:_,dragPropagation:T,onDragStart:k}=this.getProps();if(_&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=gP(_),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nn(z=>{let C=this.getAxisMotionValue(z).get()||0;if(_i.test(C)){const{projection:P}=this.visualElement;if(P&&P.layout){const S=P.layout.layoutBox[z];S&&(C=Tn(S)*(parseFloat(C)/100))}}this.originPoint[z]=C}),k&&$e.update(()=>k(m,g),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:T,onDirectionLock:k,onDrag:b}=this.getProps();if(!_&&!this.openGlobalLock)return;const{offset:z}=g;if(T&&this.currentDirection===null){this.currentDirection=fM(z),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",g.point,z),this.updateAxis("y",g.point,z),this.visualElement.render(),b&&b(m,g)},u=(m,g)=>this.stop(m,g),h=()=>Nn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new YP(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:iS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&$e.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!mh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=JN(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&da(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=eM(r.layoutBox,n):this.constraints=!1,this.elastic=rM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Nn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=iM(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!da(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=cM(i,r.root,this.visualElement.getTransformPagePoint());let a=tM(r.layout.layoutBox,o);if(n){const u=n(sM(a));this.hasMutatedConstraints=!!u,u&&(a=JP(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Nn(m=>{if(!mh(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,T=r?40:1e7,k={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(d_(e,i,0,n))}stopAnimation(){Nn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Nn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Nn(n=>{const{drag:i}=this.getProps();if(!mh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-Je(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!da(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Nn(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=nM({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Nn(a=>{if(!mh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(Je(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;hM.set(this.visualElement,this);const e=this.visualElement.current,n=Ki(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();da(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=$i(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Nn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=_g,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function mh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function fM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class pM extends ys{constructor(e){super(e),this.removeGroupControls=ht,this.removeListeners=ht,this.controls=new dM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ht}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tw=t=>(e,n)=>{t&&$e.update(()=>t(e,n))};class mM extends ys{constructor(){super(...arguments),this.removePointerDownListener=ht}onPointerDown(e){this.session=new YP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:iS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Tw(e),onStart:Tw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&$e.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=Ki(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function gM(){const t=j.useContext(vf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=j.useId();return j.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Dh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ye.test(t))t=parseFloat(t);else return t;const n=xw(t,e.target.x),i=xw(t,e.target.y);return`${n}% ${i}%`}},yM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ss.parse(t);if(r.length>5)return i;const o=ss.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=Je(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class _M extends Xs.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;SR(vM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Dh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||$e.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function rS(t){const[e,n]=gM(),i=j.useContext(Xy);return Xs.createElement(_M,{...t,layoutGroup:i,switchLayoutGroup:j.useContext(JE),isPresent:e,safeToRemove:n})}const vM={borderRadius:{...Bl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bl,borderTopRightRadius:Bl,borderBottomLeftRadius:Bl,borderBottomRightRadius:Bl,boxShadow:yM},sS=["TopLeft","TopRight","BottomLeft","BottomRight"],wM=sS.length,Ew=t=>typeof t=="string"?parseFloat(t):t,Pw=t=>typeof t=="number"||ye.test(t);function TM(t,e,n,i,r,o){r?(t.opacity=Je(0,n.opacity!==void 0?n.opacity:1,xM(i)),t.opacityExit=Je(e.opacity!==void 0?e.opacity:1,0,EM(i))):o&&(t.opacity=Je(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<wM;a++){const u=`border${sS[a]}Radius`;let h=Sw(e,u),f=Sw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Pw(h)===Pw(f)?(t[u]=Math.max(Je(Ew(h),Ew(f),i),0),(_i.test(f)||_i.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=Je(e.rotate||0,n.rotate||0,i))}function Sw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const xM=oS(0,.5,AP),EM=oS(.5,.95,ht);function oS(t,e,n){return i=>i<t?0:i>e?1:n(Fu(t,e,i))}function Iw(t,e){t.min=e.min,t.max=e.max}function Ln(t,e){Iw(t.x,e.x),Iw(t.y,e.y)}function Cw(t,e,n,i,r){return t-=e,t=Id(t,1/n,i),r!==void 0&&(t=Id(t,1/r,i)),t}function PM(t,e=0,n=1,i=.5,r,o=t,a=t){if(_i.test(e)&&(e=parseFloat(e),e=Je(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Je(o.min,o.max,i);t===o&&(u-=e),t.min=Cw(t.min,e,n,u,r),t.max=Cw(t.max,e,n,u,r)}function Aw(t,e,[n,i,r],o,a){PM(t,e[n],e[i],e[r],e.scale,o,a)}const SM=["x","scaleX","originX"],IM=["y","scaleY","originY"];function kw(t,e,n,i){Aw(t.x,e,SM,n?n.x:void 0,i?i.x:void 0),Aw(t.y,e,IM,n?n.y:void 0,i?i.y:void 0)}function bw(t){return t.translate===0&&t.scale===1}function aS(t){return bw(t.x)&&bw(t.y)}function CM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function lS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Rw(t){return Tn(t.x)/Tn(t.y)}class AM{constructor(){this.members=[]}add(e){f_(this.members,e),e.scheduleRender()}remove(e){if(p_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Lw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const kM=(t,e)=>t.depth-e.depth;class bM{constructor(){this.children=[],this.isDirty=!1}add(e){f_(this.children,e),this.isDirty=!0}remove(e){p_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kM),this.isDirty=!1,this.children.forEach(e)}}function RM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(nr(i),t(o-e))};return $e.read(i,!0),()=>nr(i)}function LM(t){window.MotionDebug&&window.MotionDebug.record(t)}function NM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function MM(t,e,n){const i=fn(t)?t:ja(t);return i.start(d_("",i,e,n)),i.animation}const Nw=["","X","Y","Z"],OM={visibility:"hidden"},Mw=1e3;let DM=0;const zs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function uS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=DM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zs.totalNodes=zs.resolvedTargetDeltas=zs.recalculatedProjection=0,this.nodes.forEach(zM),this.nodes.forEach(WM),this.nodes.forEach($M),this.nodes.forEach(FM),LM(zs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new bM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new m_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=NM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=RM(_,250),Dh.hasAnimatedSinceResize&&(Dh.hasAnimatedSinceResize=!1,this.nodes.forEach(Dw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:T,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||QM,{onLayoutAnimationStart:z,onLayoutAnimationComplete:C}=m.getProps(),P=!this.targetLayout||!lS(this.targetLayout,k)||T,S=!_&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||_&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,S);const F={...h_(b,"layout"),onPlay:z,onComplete:C};(m.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else _||Dw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qM),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ow);return}this.isUpdating||this.nodes.forEach(UM),this.isUpdating=!1,this.nodes.forEach(HM),this.nodes.forEach(VM),this.nodes.forEach(jM),this.clearAllSnapshots();const u=performance.now();Ut.delta=rs(0,1e3/60,u-Ut.timestamp),Ut.timestamp=u,Ut.isProcessing=!0,Mp.update.process(Ut),Mp.preRender.process(Ut),Mp.render.process(Ut),Ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(BM),this.sharedNodes.forEach(GM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!aS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||js(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),YM(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return gt();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Ar(u.x,h.offset.x),Ar(u.y,h.offset.y)),u}removeElementScroll(a){const u=gt();Ln(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){Ln(u,a);const{scroll:_}=this.root;_&&(Ar(u.x,-_.offset.x),Ar(u.y,-_.offset.y))}Ar(u.x,m.offset.x),Ar(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=gt();Ln(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ma(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),js(m.latestValues)&&ma(h,m.latestValues)}return js(this.latestValues)&&ma(h,this.latestValues),h}removeTransform(a){const u=gt();Ln(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!js(f.latestValues))continue;vg(f.latestValues)&&f.updateSnapshot();const m=gt(),g=f.measurePageBox();Ln(m,g),kw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return js(this.latestValues)&&kw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Ut.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gt(),this.relativeTargetOrigin=gt(),cu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=gt(),this.targetWithTransforms=gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ln(this.target,this.layout.layoutBox),tS(this.target,this.targetDelta)):Ln(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gt(),this.relativeTargetOrigin=gt(),cu(this.relativeTargetOrigin,this.target,T.target),Ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}zs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||vg(this.parent.latestValues)||eS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Ut.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Ln(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,T=this.treeScale.y;aM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:k}=u;if(!k){this.projectionTransform&&(this.projectionDelta=pa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=pa(),this.projectionDeltaWithTransform=pa());const b=this.projectionTransform;uu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),this.projectionTransform=Lw(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==_||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),zs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=pa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=gt(),T=h?h.source:void 0,k=this.layout?this.layout.source:void 0,b=T!==k,z=this.getStack(),C=!z||z.members.length<=1,P=!!(b&&!C&&this.options.crossfade===!0&&!this.path.some(KM));this.animationProgress=0;let S;this.mixTargetDelta=F=>{const G=F/1e3;Vw(g.x,a.x,G),Vw(g.y,a.y,G),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ZM(this.relativeTarget,this.relativeTargetOrigin,_,G),S&&CM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=gt()),Ln(S,this.relativeTarget)),b&&(this.animationValues=m,TM(m,f,this.latestValues,G,P,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$e.update(()=>{Dh.hasAnimatedSinceResize=!0,this.currentAnimation=MM(0,Mw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&cS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||gt();const g=Tn(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const _=Tn(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+_}Ln(u,h),ma(u,m),uu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new AM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<Nw.length;m++){const g="rotate"+Nw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return OM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Oh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Oh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!js(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=Lw(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x:T,y:k}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${k.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const b in vd){if(_[b]===void 0)continue;const{correct:z,applyTo:C}=vd[b],P=f.transform==="none"?_[b]:z(_[b],g);if(C){const S=C.length;for(let F=0;F<S;F++)f[C[F]]=P}else f[b]=P}return this.options.layoutId&&(f.pointerEvents=g===this?Oh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Ow),this.root.sharedNodes.clear()}}}function VM(t){t.updateLayout()}function jM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Nn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],T=Tn(_);_.min=i[g].min,_.max=_.min+T}):cS(o,n.layoutBox,i)&&Nn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],T=Tn(i[g]);_.max=_.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=pa();uu(u,i,n.layoutBox);const h=pa();a?uu(h,t.applyTransform(r,!0),n.measuredBox):uu(h,i,n.layoutBox);const f=!aS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:T}=g;if(_&&T){const k=gt();cu(k,n.layoutBox,_.layoutBox);const b=gt();cu(b,i,T.layoutBox),lS(k,b)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=k,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function zM(t){zs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function FM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function BM(t){t.clearSnapshot()}function Ow(t){t.clearMeasurements()}function UM(t){t.isLayoutDirty=!1}function HM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Dw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function WM(t){t.resolveTargetDelta()}function $M(t){t.calcProjection()}function qM(t){t.resetRotation()}function GM(t){t.removeLeadSnapshot()}function Vw(t,e,n){t.translate=Je(e.translate,0,n),t.scale=Je(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function jw(t,e,n,i){t.min=Je(e.min,n.min,i),t.max=Je(e.max,n.max,i)}function ZM(t,e,n,i){jw(t.x,e.x,n.x,i),jw(t.y,e.y,n.y,i)}function KM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const QM={duration:.45,ease:[.4,0,.1,1]},zw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Fw=zw("applewebkit/")&&!zw("chrome/")?Math.round:ht;function Bw(t){t.min=Fw(t.min),t.max=Fw(t.max)}function YM(t){Bw(t.x),Bw(t.y)}function cS(t,e,n){return t==="position"||t==="preserve-aspect"&&!yg(Rw(e),Rw(n),.2)}const XM=uS({attachResizeListener:(t,e)=>$i(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$p={current:void 0},hS=uS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!$p.current){const t=new XM({});t.mount(window),t.setOptions({layoutScroll:!0}),$p.current=t}return $p.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),JM={pan:{Feature:mM},drag:{Feature:pM,ProjectionNode:hS,MeasureLayout:rS}},eO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function tO(t){const e=eO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Tg(t,e,n=1){const[i,r]=tO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return GP(a)?parseFloat(a):a}else return cg(r)?Tg(r,e,n+1):r}function nO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!cg(o))return;const a=Tg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!cg(o))continue;const a=Tg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const iO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),dS=t=>iO.has(t),rO=t=>Object.keys(t).some(dS),Uw=t=>t===mo||t===ye,Hw=(t,e)=>parseFloat(t.split(", ")[e]),Ww=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Hw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Hw(o[1],t):0}},sO=new Set(["x","y","z"]),oO=tc.filter(t=>!sO.has(t));function aO(t){const e=[];return oO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const za={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Ww(4,13),y:Ww(5,14)};za.translateX=za.x;za.translateY=za.y;const lO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=za[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=za[f](h,o)}),t},uO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(dS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=Fl(m);const _=e[h];let T;if(Td(_)){const k=_.length,b=_[0]===null?1:0;m=_[b],g=Fl(m);for(let z=b;z<k&&_[z]!==null;z++)T?o_(Fl(_[z])===T):T=Fl(_[z])}else T=Fl(_);if(g!==T)if(Uw(g)&&Uw(T)){const k=f.get();typeof k=="string"&&f.set(parseFloat(k)),typeof _=="string"?e[h]=parseFloat(_):Array.isArray(_)&&T===ye&&(e[h]=_.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||_===0)?m===0?f.set(T.transform(m)):e[h]=g.transform(_):(a||(o=aO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(_))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=lO(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),wf&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function cO(t,e,n,i){return rO(e)?uO(t,e,n,i):{target:e,transitionEnd:i}}const hO=(t,e,n,i)=>{const r=nO(t,e,i);return e=r.target,i=r.transitionEnd,cO(t,e,n,i)},xg={current:null},fS={current:!1};function dO(){if(fS.current=!0,!!wf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xg.current=t.matches;t.addListener(e),e()}else xg.current=!1}function fO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(fn(o))t.addValue(r,o),Sd(i)&&i.add(r);else if(fn(a))t.addValue(r,ja(o,{owner:t})),Sd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,ja(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const $w=new WeakMap,pS=Object.keys(zu),pO=pS.length,qw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],mO=Yy.length;class gO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>$e.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=xf(n),this.isVariantNode=XE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const _=m[g];u[g]!==void 0&&fn(_)&&(_.set(u[g],!1),Sd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,$w.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),fS.current||dO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$w.delete(this.current),this.projection&&this.projection.unmount(),nr(this.notifyUpdate),nr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=po.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&$e.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<pO;h++){const f=pS[h],{isEnabled:m,Feature:g,ProjectionNode:_,MeasureLayout:T}=zu[f];_&&(a=_),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:_,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&da(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:_,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<qw.length;i++){const r=qw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=fO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<mO;i++){const r=Yy[i],o=this.props[r];(ju(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=ja(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=s_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!fn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new m_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class mS extends gO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=NN(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){RN(this,i,a);const u=hO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function yO(t){return window.getComputedStyle(t)}class _O extends mS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(po.has(n)){const i=c_(n);return i&&i.default||0}else{const i=yO(e),r=(nP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return nS(e,n)}build(e,n,i,r){e_(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return r_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){lP(e,n,i,r)}}class vO extends mS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(po.has(n)){const i=c_(n);return i&&i.default||0}return n=uP.has(n)?n:Ky(n),e.getAttribute(n)}measureInstanceViewportBox(){return gt()}scrapeMotionValuesFromProps(e,n){return hP(e,n)}build(e,n,i,r){n_(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){cP(e,n,i,r)}mount(e){this.isSVGTag=i_(e.tagName),super.mount(e)}}const wO=(t,e)=>Jy(t)?new vO(e,{enableHardwareAcceleration:!1}):new _O(e,{enableHardwareAcceleration:!0}),TO={layout:{ProjectionNode:hS,MeasureLayout:rS}},xO={...ZN,...pL,...JM,...TO},de=ER((t,e)=>tL(t,e,xO,wO));function gS(){const t=j.useRef(!1);return Zy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function EO(){const t=gS(),[e,n]=j.useState(0),i=j.useCallback(()=>{t.current&&n(e+1)},[e]);return[j.useCallback(()=>$e.postRender(i),[i]),e]}class PO extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function SO({children:t,isPresent:e}){const n=j.useId(),i=j.useRef(null),r=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),j.createElement(PO,{isPresent:e,childRef:i,sizeRef:r},j.cloneElement(t,{ref:i}))}const qp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=dP(IO),h=j.useId(),f=j.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return j.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),j.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=j.createElement(SO,{isPresent:n},t)),j.createElement(vf.Provider,{value:f},t)};function IO(){return new Map}function CO(t){return j.useEffect(()=>()=>t(),[])}const Fs=t=>t.key||"";function AO(t,e){t.forEach(n=>{const i=Fs(n);e.set(i,n)})}function kO(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const Bu=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=j.useContext(Xy).forceRender||EO()[0],h=gS(),f=kO(t);let m=f;const g=j.useRef(new Map).current,_=j.useRef(m),T=j.useRef(new Map).current,k=j.useRef(!0);if(Zy(()=>{k.current=!1,AO(f,T),_.current=m}),CO(()=>{k.current=!0,T.clear(),g.clear()}),k.current)return j.createElement(j.Fragment,null,m.map(P=>j.createElement(qp,{key:Fs(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},P)));m=[...m];const b=_.current.map(Fs),z=f.map(Fs),C=b.length;for(let P=0;P<C;P++){const S=b[P];z.indexOf(S)===-1&&!g.has(S)&&g.set(S,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((P,S)=>{if(z.indexOf(S)!==-1)return;const F=T.get(S);if(!F)return;const G=b.indexOf(S);let Z=P;if(!Z){const R=()=>{g.delete(S);const I=Array.from(T.keys()).filter(N=>!z.includes(N));if(I.forEach(N=>T.delete(N)),_.current=f.filter(N=>{const O=Fs(N);return O===S||I.includes(O)}),!g.size){if(h.current===!1)return;u(),i&&i()}};Z=j.createElement(qp,{key:Fs(F),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:o,mode:a},F),g.set(S,Z)}m.splice(G,0,Z)}),m=m.map(P=>{const S=P.key;return g.has(S)?P:j.createElement(qp,{key:Fs(P),isPresent:!0,presenceAffectsLayout:o,mode:a},P)}),j.createElement(j.Fragment,null,g.size?m:m.map(P=>j.cloneElement(P)))},bO=()=>{};var Gw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},RO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},_S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(_=64)),i.push(n[m],n[g],n[_],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new LO;const _=o<<2|u>>4;if(i.push(_),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const k=f<<6&192|g;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class LO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NO=function(t){const e=yS(t);return _S.encodeByteArray(e,!0)},Cd=function(t){return NO(t).replace(/\./g,"")},vS=function(t){try{return _S.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=()=>MO().__FIREBASE_DEFAULTS__,DO=()=>{if(typeof process>"u"||typeof Gw>"u")return;const t=Gw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vS(t[1]);return e&&JSON.parse(e)},If=()=>{try{return bO()||OO()||DO()||VO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wS=t=>{var e,n;return(n=(e=If())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},jO=t=>{const e=wS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},TS=()=>{var t;return(t=If())==null?void 0:t.config},xS=t=>{var e;return(e=If())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ES(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Cd(JSON.stringify(n)),Cd(JSON.stringify(a)),""].join(".")}const hu={};function BO(){const t={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?t.emulator.push(e):t.prod.push(e);return t}function UO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zw=!1;function PS(t,e){if(typeof window>"u"||typeof document>"u"||!Xa(window.location.host)||hu[t]===e||hu[t]||Zw)return;hu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=BO().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Zw=!0,a()},_}function m(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=UO(i),T=n("text"),k=document.getElementById(T)||document.createElement("span"),b=n("learnmore"),z=document.getElementById(b)||document.createElement("a"),C=n("preprendIcon"),P=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const S=_.element;u(S),m(z,b);const F=f();h(P,C),S.append(P,k,z,F),document.body.appendChild(S)}o?(k.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function WO(){var e;const t=(e=If())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $O(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZO(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KO(){return!WO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QO(){try{return typeof indexedDB=="object"}catch{return!1}}function YO(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="FirebaseError";class cr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=XO,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sc.prototype.create)}}class sc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?JO(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new cr(r,u,i)}}function JO(t,e){return t.replace(eD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const eD=/\{\$([^}]+)}/g;function tD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ro(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Kw(o)&&Kw(a)){if(!ro(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Kw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nD(t,e){const n=new iD(t,e);return n.subscribe.bind(n)}class iD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");rD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Gp),r.error===void 0&&(r.error=Gp),r.complete===void 0&&(r.complete=Gp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class so{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new zO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aD(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:oD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oD(t){return t===Bs?void 0:t}function aD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const uD={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},cD=ke.INFO,hD={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},dD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=hD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g_{constructor(e){this.name=e,this._logLevel=cD,this._logHandler=dD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const fD=(t,e)=>e.some(n=>t instanceof n);let Qw,Yw;function pD(){return Qw||(Qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mD(){return Yw||(Yw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SS=new WeakMap,Eg=new WeakMap,IS=new WeakMap,Zp=new WeakMap,y_=new WeakMap;function gD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Qr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&SS.set(n,t)}).catch(()=>{}),y_.set(e,t),e}function yD(t){if(Eg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Eg.set(t,e)}let Pg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Eg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _D(t){Pg=t(Pg)}function vD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Kp(this),e,...n);return IS.set(i,e.sort?e.sort():[e]),Qr(i)}:mD().includes(t)?function(...e){return t.apply(Kp(this),e),Qr(SS.get(this))}:function(...e){return Qr(t.apply(Kp(this),e))}}function wD(t){return typeof t=="function"?vD(t):(t instanceof IDBTransaction&&yD(t),fD(t,pD())?new Proxy(t,Pg):t)}function Qr(t){if(t instanceof IDBRequest)return gD(t);if(Zp.has(t))return Zp.get(t);const e=wD(t);return e!==t&&(Zp.set(t,e),y_.set(e,t)),e}const Kp=t=>y_.get(t);function TD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Qr(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Qr(a.result),h.oldVersion,h.newVersion,Qr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const xD=["get","getKey","getAll","getAllKeys","count"],ED=["put","add","delete","clear"],Qp=new Map;function Xw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=ED.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||xD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return Qp.set(e,o),o}_D(t=>({...t,get:(e,n,i)=>Xw(e,n)||t.get(e,n,i),has:(e,n)=>!!Xw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function SD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sg="@firebase/app",Jw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new g_("@firebase/app"),ID="@firebase/app-compat",CD="@firebase/analytics-compat",AD="@firebase/analytics",kD="@firebase/app-check-compat",bD="@firebase/app-check",RD="@firebase/auth",LD="@firebase/auth-compat",ND="@firebase/database",MD="@firebase/data-connect",OD="@firebase/database-compat",DD="@firebase/functions",VD="@firebase/functions-compat",jD="@firebase/installations",zD="@firebase/installations-compat",FD="@firebase/messaging",BD="@firebase/messaging-compat",UD="@firebase/performance",HD="@firebase/performance-compat",WD="@firebase/remote-config",$D="@firebase/remote-config-compat",qD="@firebase/storage",GD="@firebase/storage-compat",ZD="@firebase/firestore",KD="@firebase/ai",QD="@firebase/firestore-compat",YD="firebase",XD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="[DEFAULT]",JD={[Sg]:"fire-core",[ID]:"fire-core-compat",[AD]:"fire-analytics",[CD]:"fire-analytics-compat",[bD]:"fire-app-check",[kD]:"fire-app-check-compat",[RD]:"fire-auth",[LD]:"fire-auth-compat",[ND]:"fire-rtdb",[MD]:"fire-data-connect",[OD]:"fire-rtdb-compat",[DD]:"fire-fn",[VD]:"fire-fn-compat",[jD]:"fire-iid",[zD]:"fire-iid-compat",[FD]:"fire-fcm",[BD]:"fire-fcm-compat",[UD]:"fire-perf",[HD]:"fire-perf-compat",[WD]:"fire-rc",[$D]:"fire-rc-compat",[qD]:"fire-gcs",[GD]:"fire-gcs-compat",[ZD]:"fire-fst",[QD]:"fire-fst-compat",[KD]:"fire-vertex","fire-js":"fire-js",[YD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new Map,eV=new Map,Cg=new Map;function e1(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fa(t){const e=t.name;if(Cg.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;Cg.set(e,t);for(const n of Ad.values())e1(n,t);for(const n of eV.values())e1(n,t);return!0}function __(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new sc("app","Firebase",tV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new so("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=XD;function CS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Ig,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Yr.create("bad-app-name",{appName:String(r)});if(n||(n=TS()),!n)throw Yr.create("no-options");const o=Ad.get(r);if(o){if(ro(n,o.options)&&ro(i,o.config))return o;throw Yr.create("duplicate-app",{appName:r})}const a=new lD(r);for(const h of Cg.values())a.addComponent(h);const u=new nV(n,i,a);return Ad.set(r,u),u}function AS(t=Ig){const e=Ad.get(t);if(!e&&t===Ig&&TS())return CS();if(!e)throw Yr.create("no-app",{appName:t});return e}function Xr(t,e,n){let i=JD[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(a.join(" "));return}Fa(new so(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV="firebase-heartbeat-database",rV=1,Uu="firebase-heartbeat-store";let Yp=null;function kS(){return Yp||(Yp=TD(iV,rV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),Yp}async function sV(t){try{const n=(await kS()).transaction(Uu),i=await n.objectStore(Uu).get(bS(t));return await n.done,i}catch(e){if(e instanceof cr)ir.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function t1(t,e){try{const i=(await kS()).transaction(Uu,"readwrite");await i.objectStore(Uu).put(e,bS(t)),await i.done}catch(n){if(n instanceof cr)ir.warn(n.message);else{const i=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(i.message)}}}function bS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=1024,aV=30;class lV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=n1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>aV){const a=hV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ir.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=n1(),{heartbeatsToSend:i,unsentEntries:r}=uV(this._heartbeatsCache.heartbeats),o=Cd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ir.warn(n),""}}}function n1(){return new Date().toISOString().substring(0,10)}function uV(t,e=oV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),i1(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),i1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class cV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QO()?YO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return t1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return t1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function i1(t){return Cd(JSON.stringify({version:2,heartbeats:t})).length}function hV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){Fa(new so("platform-logger",e=>new PD(e),"PRIVATE")),Fa(new so("heartbeat",e=>new lV(e),"PRIVATE")),Xr(Sg,Jw,t),Xr(Sg,Jw,"esm2020"),Xr("fire-js","")}dV("");var r1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,RS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function N(){}N.prototype=I.prototype,R.F=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(O,D,B){for(var M=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)M[xe-2]=arguments[xe];return I.prototype[D].apply(O,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,N){N||(N=0);const O=Array(16);if(typeof I=="string")for(var D=0;D<16;++D)O[D]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(D=0;D<16;++D)O[D]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],D=R.g[2];let B=R.g[3],M;M=I+(B^N&(D^B))+O[0]+3614090360&4294967295,I=N+(M<<7&4294967295|M>>>25),M=B+(D^I&(N^D))+O[1]+3905402710&4294967295,B=I+(M<<12&4294967295|M>>>20),M=D+(N^B&(I^N))+O[2]+606105819&4294967295,D=B+(M<<17&4294967295|M>>>15),M=N+(I^D&(B^I))+O[3]+3250441966&4294967295,N=D+(M<<22&4294967295|M>>>10),M=I+(B^N&(D^B))+O[4]+4118548399&4294967295,I=N+(M<<7&4294967295|M>>>25),M=B+(D^I&(N^D))+O[5]+1200080426&4294967295,B=I+(M<<12&4294967295|M>>>20),M=D+(N^B&(I^N))+O[6]+2821735955&4294967295,D=B+(M<<17&4294967295|M>>>15),M=N+(I^D&(B^I))+O[7]+4249261313&4294967295,N=D+(M<<22&4294967295|M>>>10),M=I+(B^N&(D^B))+O[8]+1770035416&4294967295,I=N+(M<<7&4294967295|M>>>25),M=B+(D^I&(N^D))+O[9]+2336552879&4294967295,B=I+(M<<12&4294967295|M>>>20),M=D+(N^B&(I^N))+O[10]+4294925233&4294967295,D=B+(M<<17&4294967295|M>>>15),M=N+(I^D&(B^I))+O[11]+2304563134&4294967295,N=D+(M<<22&4294967295|M>>>10),M=I+(B^N&(D^B))+O[12]+1804603682&4294967295,I=N+(M<<7&4294967295|M>>>25),M=B+(D^I&(N^D))+O[13]+4254626195&4294967295,B=I+(M<<12&4294967295|M>>>20),M=D+(N^B&(I^N))+O[14]+2792965006&4294967295,D=B+(M<<17&4294967295|M>>>15),M=N+(I^D&(B^I))+O[15]+1236535329&4294967295,N=D+(M<<22&4294967295|M>>>10),M=I+(D^B&(N^D))+O[1]+4129170786&4294967295,I=N+(M<<5&4294967295|M>>>27),M=B+(N^D&(I^N))+O[6]+3225465664&4294967295,B=I+(M<<9&4294967295|M>>>23),M=D+(I^N&(B^I))+O[11]+643717713&4294967295,D=B+(M<<14&4294967295|M>>>18),M=N+(B^I&(D^B))+O[0]+3921069994&4294967295,N=D+(M<<20&4294967295|M>>>12),M=I+(D^B&(N^D))+O[5]+3593408605&4294967295,I=N+(M<<5&4294967295|M>>>27),M=B+(N^D&(I^N))+O[10]+38016083&4294967295,B=I+(M<<9&4294967295|M>>>23),M=D+(I^N&(B^I))+O[15]+3634488961&4294967295,D=B+(M<<14&4294967295|M>>>18),M=N+(B^I&(D^B))+O[4]+3889429448&4294967295,N=D+(M<<20&4294967295|M>>>12),M=I+(D^B&(N^D))+O[9]+568446438&4294967295,I=N+(M<<5&4294967295|M>>>27),M=B+(N^D&(I^N))+O[14]+3275163606&4294967295,B=I+(M<<9&4294967295|M>>>23),M=D+(I^N&(B^I))+O[3]+4107603335&4294967295,D=B+(M<<14&4294967295|M>>>18),M=N+(B^I&(D^B))+O[8]+1163531501&4294967295,N=D+(M<<20&4294967295|M>>>12),M=I+(D^B&(N^D))+O[13]+2850285829&4294967295,I=N+(M<<5&4294967295|M>>>27),M=B+(N^D&(I^N))+O[2]+4243563512&4294967295,B=I+(M<<9&4294967295|M>>>23),M=D+(I^N&(B^I))+O[7]+1735328473&4294967295,D=B+(M<<14&4294967295|M>>>18),M=N+(B^I&(D^B))+O[12]+2368359562&4294967295,N=D+(M<<20&4294967295|M>>>12),M=I+(N^D^B)+O[5]+4294588738&4294967295,I=N+(M<<4&4294967295|M>>>28),M=B+(I^N^D)+O[8]+2272392833&4294967295,B=I+(M<<11&4294967295|M>>>21),M=D+(B^I^N)+O[11]+1839030562&4294967295,D=B+(M<<16&4294967295|M>>>16),M=N+(D^B^I)+O[14]+4259657740&4294967295,N=D+(M<<23&4294967295|M>>>9),M=I+(N^D^B)+O[1]+2763975236&4294967295,I=N+(M<<4&4294967295|M>>>28),M=B+(I^N^D)+O[4]+1272893353&4294967295,B=I+(M<<11&4294967295|M>>>21),M=D+(B^I^N)+O[7]+4139469664&4294967295,D=B+(M<<16&4294967295|M>>>16),M=N+(D^B^I)+O[10]+3200236656&4294967295,N=D+(M<<23&4294967295|M>>>9),M=I+(N^D^B)+O[13]+681279174&4294967295,I=N+(M<<4&4294967295|M>>>28),M=B+(I^N^D)+O[0]+3936430074&4294967295,B=I+(M<<11&4294967295|M>>>21),M=D+(B^I^N)+O[3]+3572445317&4294967295,D=B+(M<<16&4294967295|M>>>16),M=N+(D^B^I)+O[6]+76029189&4294967295,N=D+(M<<23&4294967295|M>>>9),M=I+(N^D^B)+O[9]+3654602809&4294967295,I=N+(M<<4&4294967295|M>>>28),M=B+(I^N^D)+O[12]+3873151461&4294967295,B=I+(M<<11&4294967295|M>>>21),M=D+(B^I^N)+O[15]+530742520&4294967295,D=B+(M<<16&4294967295|M>>>16),M=N+(D^B^I)+O[2]+3299628645&4294967295,N=D+(M<<23&4294967295|M>>>9),M=I+(D^(N|~B))+O[0]+4096336452&4294967295,I=N+(M<<6&4294967295|M>>>26),M=B+(N^(I|~D))+O[7]+1126891415&4294967295,B=I+(M<<10&4294967295|M>>>22),M=D+(I^(B|~N))+O[14]+2878612391&4294967295,D=B+(M<<15&4294967295|M>>>17),M=N+(B^(D|~I))+O[5]+4237533241&4294967295,N=D+(M<<21&4294967295|M>>>11),M=I+(D^(N|~B))+O[12]+1700485571&4294967295,I=N+(M<<6&4294967295|M>>>26),M=B+(N^(I|~D))+O[3]+2399980690&4294967295,B=I+(M<<10&4294967295|M>>>22),M=D+(I^(B|~N))+O[10]+4293915773&4294967295,D=B+(M<<15&4294967295|M>>>17),M=N+(B^(D|~I))+O[1]+2240044497&4294967295,N=D+(M<<21&4294967295|M>>>11),M=I+(D^(N|~B))+O[8]+1873313359&4294967295,I=N+(M<<6&4294967295|M>>>26),M=B+(N^(I|~D))+O[15]+4264355552&4294967295,B=I+(M<<10&4294967295|M>>>22),M=D+(I^(B|~N))+O[6]+2734768916&4294967295,D=B+(M<<15&4294967295|M>>>17),M=N+(B^(D|~I))+O[13]+1309151649&4294967295,N=D+(M<<21&4294967295|M>>>11),M=I+(D^(N|~B))+O[4]+4149444226&4294967295,I=N+(M<<6&4294967295|M>>>26),M=B+(N^(I|~D))+O[11]+3174756917&4294967295,B=I+(M<<10&4294967295|M>>>22),M=D+(I^(B|~N))+O[2]+718787259&4294967295,D=B+(M<<15&4294967295|M>>>17),M=N+(B^(D|~I))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+B&4294967295}i.prototype.v=function(R,I){I===void 0&&(I=R.length);const N=I-this.blockSize,O=this.C;let D=this.h,B=0;for(;B<I;){if(D==0)for(;B<=N;)r(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<I;)if(O[D++]=R.charCodeAt(B++),D==this.blockSize){r(this,O),D=0;break}}else for(;B<I;)if(O[D++]=R[B++],D==this.blockSize){r(this,O),D=0;break}}this.h=D,this.o+=I},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)R[I++]=this.g[N]>>>O&255;return R};function o(R,I){var N=u;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function a(R,I){this.h=I;const N=[];let O=!0;for(let D=R.length-1;D>=0;D--){const B=R[D]|0;O&&B==I||(N[D]=B,O=!1)}this.g=N}var u={};function h(R){return-128<=R&&R<128?o(R,function(I){return new a([I|0],I<0?-1:0)}):new a([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return z(f(-R));const I=[];let N=1;for(let O=0;R>=N;O++)I[O]=R/N|0,N*=4294967296;return new a(I,0)}function m(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return z(m(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(I,8));let O=g;for(let B=0;B<R.length;B+=8){var D=Math.min(8,R.length-B);const M=parseInt(R.substring(B,B+D),I);D<8?(D=f(Math.pow(I,D)),O=O.j(D).add(f(M))):(O=O.j(N),O=O.add(f(M)))}return O}var g=h(0),_=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(b(this))return-z(this).m();let R=0,I=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);R+=(O>=0?O:4294967296+O)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(b(this))return"-"+z(this).toString(R);const I=f(Math.pow(R,6));var N=this;let O="";for(;;){const D=F(N,I).g;N=C(N,D.j(I));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=D,k(N))return B+O;for(;B.length<6;)B="0"+B;O=B+O}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=C(this,R),b(R)?-1:k(R)?0:1};function z(R){const I=R.g.length,N=[];for(let O=0;O<I;O++)N[O]=~R.g[O];return new a(N,~R.h).add(_)}t.abs=function(){return b(this)?z(this):this},t.add=function(R){const I=Math.max(this.g.length,R.g.length),N=[];let O=0;for(let D=0;D<=I;D++){let B=O+(this.i(D)&65535)+(R.i(D)&65535),M=(B>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);O=M>>>16,B&=65535,M&=65535,N[D]=M<<16|B}return new a(N,N[N.length-1]&-2147483648?-1:0)};function C(R,I){return R.add(z(I))}t.j=function(R){if(k(this)||k(R))return g;if(b(this))return b(R)?z(this).j(z(R)):z(z(this).j(R));if(b(R))return z(this.j(z(R)));if(this.l(T)<0&&R.l(T)<0)return f(this.m()*R.m());const I=this.g.length+R.g.length,N=[];for(var O=0;O<2*I;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<R.g.length;D++){const B=this.i(O)>>>16,M=this.i(O)&65535,xe=R.i(D)>>>16,dt=R.i(D)&65535;N[2*O+2*D]+=M*dt,P(N,2*O+2*D),N[2*O+2*D+1]+=B*dt,P(N,2*O+2*D+1),N[2*O+2*D+1]+=M*xe,P(N,2*O+2*D+1),N[2*O+2*D+2]+=B*xe,P(N,2*O+2*D+2)}for(R=0;R<I;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=I;R<2*I;R++)N[R]=0;return new a(N,0)};function P(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function S(R,I){this.g=R,this.h=I}function F(R,I){if(k(I))throw Error("division by zero");if(k(R))return new S(g,g);if(b(R))return I=F(z(R),I),new S(z(I.g),z(I.h));if(b(I))return I=F(R,z(I)),new S(z(I.g),I.h);if(R.g.length>30){if(b(R)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var N=_,O=I;O.l(R)<=0;)N=G(N),O=G(O);var D=Z(N,1),B=Z(O,1);for(O=Z(O,2),N=Z(N,2);!k(O);){var M=B.add(O);M.l(R)<=0&&(D=D.add(N),B=M),O=Z(O,1),N=Z(N,1)}return I=C(R,D.j(I)),new S(D,I)}for(D=g;R.l(I)>=0;){for(N=Math.max(1,Math.floor(R.m()/I.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),B=f(N),M=B.j(I);b(M)||M.l(R)>0;)N-=O,B=f(N),M=B.j(I);k(B)&&(B=_),D=D.add(B),R=C(R,M)}return new S(D,R)}t.B=function(R){return F(this,R).h},t.and=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)&R.i(O);return new a(N,this.h&R.h)},t.or=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)|R.i(O);return new a(N,this.h|R.h)},t.xor=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)^R.i(O);return new a(N,this.h^R.h)};function G(R){const I=R.g.length+1,N=[];for(let O=0;O<I;O++)N[O]=R.i(O)<<1|R.i(O-1)>>>31;return new a(N,R.h)}function Z(R,I){const N=I>>5;I%=32;const O=R.g.length-N,D=[];for(let B=0;B<O;B++)D[B]=I>0?R.i(B+N)>>>I|R.i(B+N+1)<<32-I:R.i(B+N);return new a(D,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,RS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Jr=a}).apply(typeof r1<"u"?r1:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LS,Gl,NS,Vh,Ag,MS,OS,DS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var y=0;y<c.length;++y){var w=c[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var w=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in w))break e;w=w[U]}c=c[c.length-1],A=w[c],y=y(A),y!=A&&y!=null&&e(w,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var w=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&w.push([A,y[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,w){return c.call.apply(c.bind,arguments)}function f(c,y,w){return f=h,f.apply(null,arguments)}function m(c,y){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function g(c,y){function w(){}w.prototype=y.prototype,c.Z=y.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(A,U,$){for(var ne=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)ne[Te-2]=arguments[Te];return y.prototype[U].apply(A,ne)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const w=Array(y);for(let A=0;A<y;A++)w[A]=c[A];return w}return[]}function k(c,y){for(let A=1;A<arguments.length;A++){const U=arguments[A];var w=typeof U;if(w=w!="object"?w:U?Array.isArray(U)?"array":w:"null",w=="array"||w=="object"&&typeof U.length=="number"){w=c.length||0;const $=U.length||0;c.length=w+$;for(let ne=0;ne<$;ne++)c[w+ne]=U[ne]}else c.push(U)}}class b{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(c){a.setTimeout(()=>{throw c},0)}function C(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class P{constructor(){this.h=this.g=null}add(y,w){const A=S.get();A.set(y,w),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new b(()=>new F,c=>c.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Z=!1,R=new P,I=()=>{const c=Promise.resolve(void 0);G=()=>{c.then(N)}};function N(){for(var c;c=C();){try{c.h.call(c.g)}catch(w){z(w)}var y=S;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}Z=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return c}();function M(c){return/^[\s\xa0]*$/.test(c)}function xe(c,y){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(xe,D),xe.prototype.init=function(c,y){const w=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(w=="mouseover"?y=c.fromElement:w=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),Se=0;function rt(c,y,w,A,U){this.listener=c,this.proxy=null,this.src=y,this.type=w,this.capture=!!A,this.ha=U,this.key=++Se,this.da=this.fa=!1}function W(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function te(c,y,w){for(const A in c)y.call(w,c[A],A,c)}function Q(c,y){for(const w in c)y.call(void 0,c[w],w,c)}function ee(c){const y={};for(const w in c)y[w]=c[w];return y}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(c,y){let w,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(w in A)c[w]=A[w];for(let $=0;$<ae.length;$++)w=ae[$],Object.prototype.hasOwnProperty.call(A,w)&&(c[w]=A[w])}}function ce(c){this.src=c,this.g={},this.h=0}ce.prototype.add=function(c,y,w,A,U){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const ne=ue(c,y,A,U);return ne>-1?(y=c[ne],w||(y.fa=!1)):(y=new rt(y,this.src,$,!!A,U),y.fa=w,c.push(y)),y};function pe(c,y){const w=y.type;if(w in c.g){var A=c.g[w],U=Array.prototype.indexOf.call(A,y,void 0),$;($=U>=0)&&Array.prototype.splice.call(A,U,1),$&&(W(y),c.g[w].length==0&&(delete c.g[w],c.h--))}}function ue(c,y,w,A){for(let U=0;U<c.length;++U){const $=c[U];if(!$.da&&$.listener==y&&$.capture==!!w&&$.ha==A)return U}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),Vt={};function Ci(c,y,w,A,U){if(Array.isArray(y)){for(let $=0;$<y.length;$++)Ci(c,y[$],w,A,U);return null}return w=ws(w),c&&c[dt]?c.J(y,w,u(A)?!!A.capture:!1,U):ii(c,y,w,!1,A,U)}function ii(c,y,w,A,U,$){if(!y)throw Error("Invalid event type");const ne=u(U)?!!U.capture:!!U;let Te=wo(c);if(Te||(c[Qe]=Te=new ce(c)),w=Te.add(y,w,A,ne,$),w.proxy)return w;if(A=pn(),w.proxy=A,A.src=c,A.listener=w,c.addEventListener)B||(U=ne),U===void 0&&(U=!1),c.addEventListener(y.toString(),A,U);else if(c.attachEvent)c.attachEvent(mc(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function pn(){function c(w){return y.call(c.src,c.listener,w)}const y=gc;return c}function Ai(c,y,w,A,U){if(Array.isArray(y))for(var $=0;$<y.length;$++)Ai(c,y[$],w,A,U);else A=u(A)?!!A.capture:!!A,w=ws(w),c&&c[dt]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],w=ue(y,w,A,U),w>-1&&(W(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=wo(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ue(y,w,A,U)),(w=c>-1?y[c]:null)&&_s(w))}function _s(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[dt])pe(y.i,c);else{var w=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(w,A,c.capture):y.detachEvent?y.detachEvent(mc(w),A):y.addListener&&y.removeListener&&y.removeListener(A),(w=wo(y))?(pe(w,c),w.h==0&&(w.src=null,y[Qe]=null)):W(c)}}}function mc(c){return c in Vt?Vt[c]:Vt[c]="on"+c}function gc(c,y){if(c.da)c=!0;else{y=new xe(y,this);const w=c.listener,A=c.ha||c.src;c.fa&&_s(c),c=w.call(A,y)}return c}function wo(c){return c=c[Qe],c instanceof ce?c:null}var vs="__closure_events_fn_"+(Math.random()*1e9>>>0);function ws(c){return typeof c=="function"?c:(c[vs]||(c[vs]=function(y){return c.handleEvent(y)}),c[vs])}function Pt(){O.call(this),this.i=new ce(this),this.M=this,this.G=null}g(Pt,O),Pt.prototype[dt]=!0,Pt.prototype.removeEventListener=function(c,y,w,A){Ai(this,c,y,w,A)};function St(c,y){var w,A=c.G;if(A)for(w=[];A;A=A.G)w.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new D(y,c);else if(y instanceof D)y.target=y.target||c;else{var U=y;y=new D(A,c),me(y,U)}U=!0;let $,ne;if(w)for(ne=w.length-1;ne>=0;ne--)$=y.g=w[ne],U=dr($,A,!0,y)&&U;if($=y.g=c,U=dr($,A,!0,y)&&U,U=dr($,A,!1,y)&&U,w)for(ne=0;ne<w.length;ne++)$=y.g=w[ne],U=dr($,A,!1,y)&&U}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const w=c.g[y];for(let A=0;A<w.length;A++)W(w[A]);delete c.g[y],c.h--}}this.G=null},Pt.prototype.J=function(c,y,w,A){return this.i.add(String(c),y,!1,w,A)},Pt.prototype.K=function(c,y,w,A){return this.i.add(String(c),y,!0,w,A)};function dr(c,y,w,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let $=0;$<y.length;++$){const ne=y[$];if(ne&&!ne.da&&ne.capture==w){const Te=ne.listener,De=ne.ha||ne.src;ne.fa&&pe(c.i,ne),U=Te.call(De,A)!==!1&&U}}return U&&!A.defaultPrevented}function yc(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function ol(c){c.g=yc(()=>{c.g=null,c.i&&(c.i=!1,ol(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Zf extends O{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ol(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(c){O.call(this),this.h=c,this.g={}}g(Ts,O);var To=[];function al(c){te(c.g,function(y,w){this.g.hasOwnProperty(w)&&_s(y)},c),c.g={}}Ts.prototype.N=function(){Ts.Z.N.call(this),al(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xo=a.JSON.stringify,Kf=a.JSON.parse,_c=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ll(){}function vc(){}var fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xs(){D.call(this,"d")}g(xs,D);function Eo(){D.call(this,"c")}g(Eo,D);var ki={},pr=null;function Po(){return pr=pr||new Pt}ki.Ia="serverreachability";function wc(c){D.call(this,ki.Ia,c)}g(wc,D);function mr(c){const y=Po();St(y,new wc(y))}ki.STAT_EVENT="statevent";function ul(c,y){D.call(this,ki.STAT_EVENT,c),this.stat=y}g(ul,D);function It(c){const y=Po();St(y,new ul(y,c))}ki.Ja="timingevent";function Tc(c,y){D.call(this,ki.Ja,c),this.size=y}g(Tc,D);function Es(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Ps(){this.g=!0}Ps.prototype.ua=function(){this.g=!1};function Qf(c,y,w,A,U,$){c.info(function(){if(c.g)if($){var ne="",Te=$.split("&");for(let ze=0;ze<Te.length;ze++){var De=Te[ze].split("=");if(De.length>1){const at=De[0];De=De[1];const kn=at.split("_");ne=kn.length>=2&&kn[1]=="type"?ne+(at+"="+De+"&"):ne+(at+"=redacted&")}}}else ne=null;else ne=$;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+y+`
`+w+`
`+ne})}function Yf(c,y,w,A,U,$,ne){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+y+`
`+w+`
`+$+" "+ne})}function gr(c,y,w,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Xf(c,w)+(A?" "+A:"")})}function cl(c,y){c.info(function(){return"TIMEOUT: "+y})}Ps.prototype.info=function(){};function Xf(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var w=$[c];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ne=1;ne<A.length;ne++)A[ne]=""}}}}return xo($)}catch{return y}}var So={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ec;function nn(){}g(nn,ll),nn.prototype.g=function(){return new XMLHttpRequest},Ec=new nn;function le(c){return encodeURIComponent(String(c))}function Pc(c){var y=1;c=c.split(":");const w=[];for(;y>0&&c.length;)w.push(c.shift()),y--;return c.length&&w.push(c.join(":")),w}function Un(c,y,w,A){this.j=c,this.i=y,this.l=w,this.S=A||1,this.V=new Ts(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hl}function hl(){this.i=null,this.g="",this.h=!1}var dl={},Ss={};function Io(c,y,w){c.M=1,c.A=He(Zt(y)),c.u=w,c.R=!0,bi(c,null)}function bi(c,y){c.F=Date.now(),Co(c),c.B=Zt(c.A);var w=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Lo(w.i,"t",A),c.C=0,w=c.j.L,c.h=new hl,c.g=Il(c.j,w?y:null,!c.u),c.P>0&&(c.O=new Zf(f(c.Y,c,c.g),c.P)),y=c.V,w=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(To[0]=U.toString()),U=To);for(let $=0;$<U.length;$++){const ne=Ci(w,U[$],A||y.handleEvent,!1,y.h||y);if(!ne)break;y.g[ne.key]=ne}y=c.J?ee(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),mr(),Qf(c.i,c.v,c.B,c.l,c.S,c.u)}Un.prototype.ba=function(c){c=c.target;const y=this.O;y&&ai(c)==3?y.j():this.Y(c)},Un.prototype.Y=function(c){try{if(c==this.g)e:{const Te=ai(this.g),De=this.g.ya(),ze=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||vl(this.g)))){this.K||Te!=4||De==7||(De==8||ze<=0?mr(3):mr(2)),Ao(this);var y=this.g.ca();this.X=y;var w=Sc(this);if(this.o=y==200,Yf(this.i,this.v,this.B,this.l,this.S,Te,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(A)){var $=A;break t}}$=null}if(c=$)gr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fl(this,c);else{this.o=!1,this.m=3,It(12),Sn(this),Is(this);break e}}if(this.R){c=!0;let at;for(;!this.K&&this.C<w.length;)if(at=Jf(this,w),at==Ss){Te==4&&(this.m=4,It(14),c=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(at==dl){this.m=4,It(15),gr(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else gr(this.i,this.l,at,null),fl(this,at);if(Ic(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||w.length!=0||this.h.h||(this.m=1,It(16),c=!1),this.o=this.o&&c,!c)gr(this.i,this.l,w,"[Invalid Chunked Response]"),Sn(this),Is(this);else if(w.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Pl(ne),ne.P=!0,It(11))}}else gr(this.i,this.l,w,null),fl(this,w);Te==4&&Sn(this),this.o&&!this.K&&(Te==4?gn(this.j,this):(this.o=!1,Co(this)))}else wl(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Sn(this),Is(this)}}}catch{}finally{}};function Sc(c){if(!Ic(c))return c.g.la();const y=vl(c.g);if(y==="")return"";let w="";const A=y.length,U=ai(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Sn(c),Is(c),"";c.h.i=new a.TextDecoder}for(let $=0;$<A;$++)c.h.h=!0,w+=c.h.i.decode(y[$],{stream:!(U&&$==A-1)});return y.length=0,c.h.g+=w,c.C=0,c.h.g}function Ic(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Jf(c,y){var w=c.C,A=y.indexOf(`
`,w);return A==-1?Ss:(w=Number(y.substring(w,A)),isNaN(w)?dl:(A+=1,A+w>y.length?Ss:(y=y.slice(A,A+w),c.C=A+w,y)))}Un.prototype.cancel=function(){this.K=!0,Sn(this)};function Co(c){c.T=Date.now()+c.H,Cc(c,c.H)}function Cc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Es(f(c.aa,c),y)}function Ao(c){c.D&&(a.clearTimeout(c.D),c.D=null)}Un.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(cl(this.i,this.B),this.M!=2&&(mr(),It(17)),Sn(this),this.m=2,Is(this)):Cc(this,this.T-c)};function Is(c){c.j.I==0||c.K||gn(c.j,c)}function Sn(c){Ao(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,al(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function fl(c,y){try{var w=c.j;if(w.I!=0&&(w.g==c||Cs(w.h,c))){if(!c.L&&Cs(w.h,c)&&w.I==3){try{var A=w.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Vo(w),Oo(w);else break e;El(w),It(18)}}else w.xa=U[1],0<w.xa-w.K&&U[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Es(f(w.Va,w),6e3));bc(w.h)<=1&&w.ta&&(w.ta=void 0)}else ui(w,11)}else if((c.L||w.g==c)&&Vo(w),!M(y))for(U=w.Ba.g.parse(y),y=0;y<U.length;y++){let ze=U[y];const at=ze[0];if(!(at<=w.K))if(w.K=at,ze=ze[1],w.I==2)if(ze[0]=="c"){w.M=ze[1],w.ba=ze[2];const kn=ze[3];kn!=null&&(w.ka=kn,w.j.info("VER="+w.ka));const $n=ze[4];$n!=null&&(w.za=$n,w.j.info("SVER="+w.za));const bn=ze[5];bn!=null&&typeof bn=="number"&&bn>0&&(A=1.5*bn,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const ci=c.g;if(ci){const Fo=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var $=A.h;$.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ri($,$.h),$.h=null))}if(A.G){const Bo=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(A.wa=Bo,se(A.J,A.G,Bo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var ne=c;if(A.na=Sl(A,A.L?A.ba:null,A.W),ne.L){pl(A.h,ne);var Te=ne,De=A.O;De&&(Te.H=De),Te.D&&(Ao(Te),Co(Te)),A.g=ne}else xl(A);w.i.length>0&&li(w)}else ze[0]!="stop"&&ze[0]!="close"||ui(w,7);else w.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ui(w,7):Ie(w):ze[0]!="noop"&&w.l&&w.l.qa(ze),w.A=0)}}mr(4)}catch{}}var ep=class{constructor(c,y){this.g=c,this.map=y}};function Ac(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function bc(c){return c.h?1:c.g?c.g.size:0}function Cs(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ri(c,y){c.g?c.g.add(y):c.h=y}function pl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ac.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ml(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const w of c.g.values())y=y.concat(w.G);return y}return T(c.i)}var yr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Le(c,y){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const A=c[w].indexOf("=");let U,$=null;A>=0?(U=c[w].substring(0,A),$=c[w].substring(A+1)):U=c[w],y(U,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Oe(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Oe?(this.l=c.l,In(this,c.j),this.o=c.o,this.g=c.g,Cn(this,c.u),this.h=c.h,As(this,ks(c.i)),this.m=c.m):c&&(y=String(c).match(yr))?(this.l=!1,In(this,y[1]||"",!0),this.o=Li(y[2]||""),this.g=Li(y[3]||"",!0),Cn(this,y[4]),this.h=Li(y[5]||"",!0),As(this,y[6]||"",!0),this.m=Li(y[7]||"")):(this.l=!1,this.i=new Hn(null,this.l))}Oe.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ri(y,Rc,!0),":");var w=this.g;return(w||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ri(y,Rc,!0),"@"),c.push(le(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(ri(w,w.charAt(0)=="/"?Ni:ko,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",ri(w,Mi)),c.join("")},Oe.prototype.resolve=function(c){const y=Zt(this);let w=!!c.j;w?In(y,c.j):w=!!c.o,w?y.o=c.o:w=!!c.g,w?y.g=c.g:w=c.u!=null;var A=c.h;if(w)Cn(y,c.u);else if(w=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=y.h.lastIndexOf("/");U!=-1&&(A=y.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const $=[];for(let ne=0;ne<U.length;){const Te=U[ne++];Te=="."?A&&ne==U.length&&$.push(""):Te==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),A&&ne==U.length&&$.push("")):($.push(Te),A=!0)}A=$.join("/")}else A=U}return w?y.h=A:w=c.i.toString()!=="",w?As(y,ks(c.i)):w=!!c.m,w&&(y.m=c.m),y};function Zt(c){return new Oe(c)}function In(c,y,w){c.j=w?Li(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Cn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function As(c,y,w){y instanceof Hn?(c.i=y,gl(c.i,c.l)):(w||(y=ri(y,st)),c.i=new Hn(y,c.l))}function se(c,y,w){c.i.set(y,w)}function He(c){return se(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Li(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ri(c,y,w){return typeof c=="string"?(c=encodeURI(c).replace(y,rn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Rc=/[#\/\?@]/g,ko=/[#\?:]/g,Ni=/[#\?]/g,st=/[#\?@]/g,Mi=/#/g;function Hn(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function mn(c){c.g||(c.g=new Map,c.h=0,c.i&&Le(c.i,function(y,w){c.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=Hn.prototype,t.add=function(c,y){mn(this),this.i=null,c=si(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(y),this.h+=1,this};function bo(c,y){mn(c),y=si(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function _r(c,y){return mn(c),y=si(c,y),c.g.has(y)}t.forEach=function(c,y){mn(this),this.g.forEach(function(w,A){w.forEach(function(U){c.call(y,U,A,this)},this)},this)};function Ro(c,y){mn(c);let w=[];if(typeof y=="string")_r(c,y)&&(w=w.concat(c.g.get(si(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)w=w.concat(c[y]);return w}t.set=function(c,y){return mn(this),this.i=null,c=si(this,c),_r(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=Ro(this,c),c.length>0?String(c[0]):y):y};function Lo(c,y,w){bo(c,y),w.length>0&&(c.i=null,c.g.set(si(c,y),T(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var w=y[A];const U=le(w);w=Ro(this,w);for(let $=0;$<w.length;$++){let ne=U;w[$]!==""&&(ne+="="+le(w[$])),c.push(ne)}}return this.i=c.join("&")};function ks(c){const y=new Hn;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function si(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function gl(c,y){y&&!c.j&&(mn(c),c.i=null,c.g.forEach(function(w,A){const U=A.toLowerCase();A!=U&&(bo(this,A),Lo(this,U,w))},c)),c.j=y}function No(c,y){const w=new Ps;if(a.Image){const A=new Image;A.onload=m(An,w,"TestLoadImage: loaded",!0,y,A),A.onerror=m(An,w,"TestLoadImage: error",!1,y,A),A.onabort=m(An,w,"TestLoadImage: abort",!1,y,A),A.ontimeout=m(An,w,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Lc(c,y){const w=new Ps,A=new AbortController,U=setTimeout(()=>{A.abort(),An(w,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then($=>{clearTimeout(U),$.ok?An(w,"TestPingServer: ok",!0,y):An(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),An(w,"TestPingServer: error",!1,y)})}function An(c,y,w,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(w)}catch{}}function tp(){this.g=new _c}function we(c){this.i=c.Sb||null,this.h=c.ab||!1}g(we,ll),we.prototype.g=function(){return new Kt(this.i,this.h)};function Kt(c,y){Pt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Kt,Pt),t=Kt.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Oi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Be(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Be(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?vr(this):Oi(this),this.readyState==3&&Be(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,vr(this))},t.Na=function(c){this.g&&(this.response=c,vr(this))},t.ga=function(){this.g&&vr(this)};function vr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Oi(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=y.next();return c.join(`\r
`)};function Oi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Kt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mo(c){let y="";return te(c,function(w,A){y+=A,y+=":",y+=w,y+=`\r
`}),y}function bs(c,y,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Mo(w),typeof c=="string"?w!=null&&le(w):se(c,y,w))}function je(c){Pt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(je,Pt);var yl=/^https?$/i,Rs=["POST","PUT"];t=je.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ec.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){ft(this,$);return}if(c=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)w.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())w.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find($=>$.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Rs,y,void 0)>=0)||A||U||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of w)this.g.setRequestHeader($,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){ft(this,$)}};function ft(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,oi(c),Ls(c)}function oi(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,St(this,"complete"),St(this,"abort"),Ls(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ls(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?_l(this):this.Xa())},t.Xa=function(){_l(this)};function _l(c){if(c.h&&typeof o<"u"){if(c.v&&ai(c)==4)setTimeout(c.Ca.bind(c),0);else if(St(c,"readystatechange"),ai(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var A;if(A=$===0){let ne=String(c.D).match(yr)[1]||null;!ne&&a.self&&a.self.location&&(ne=a.self.location.protocol.slice(0,-1)),A=!yl.test(ne?ne.toLowerCase():"")}w=A}if(w)St(c,"complete"),St(c,"success");else{c.o=6;try{var U=ai(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",oi(c)}}finally{Ls(c)}}}}function Ls(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,y||St(c,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ai(c){return c.g?c.g.readyState:0}t.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Kf(y)}};function vl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wl(c){const y={};c=(c.g&&ai(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(M(c[A]))continue;var w=Pc(c[A]);const U=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const $=y[U]||[];y[U]=$,$.push(w)}Q(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ns(c,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||y}function Tl(c){this.za=0,this.i=[],this.j=new Ps,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ns("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ns("baseRetryDelayMs",5e3,c),this.Za=Ns("retryDelaySeedMs",1e4,c),this.Ta=Ns("forwardChannelMaxRetries",2,c),this.va=Ns("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ac(c&&c.concurrentRequestLimit),this.Ba=new tp,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Tl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,w,A){It(0),this.W=c,this.H=y||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=Sl(this,null,this.W),li(this)};function Ie(c){if(sn(c),c.I==3){var y=c.V++,w=Zt(c.J);if(se(w,"SID",c.M),se(w,"RID",y),se(w,"TYPE","terminate"),Di(c,w),y=new Un(c,c.j,y),y.M=2,y.A=He(Zt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.A,w=!0),w||(y.g=Il(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Co(y)}Wn(c)}function Oo(c){c.g&&(Pl(c),c.g.cancel(),c.g=null)}function sn(c){Oo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Vo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function li(c){if(!kc(c.h)&&!c.m){c.m=!0;var y=c.Ea;G||I(),Z||(G(),Z=!0),R.add(y,c),c.D=0}}function Nc(c,y){return bc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Es(f(c.Ea,c,y),Dc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new Un(this,this.j,c);let $=this.o;if(this.U&&($?($=ee($),me($,this.U)):$=this.U),this.u!==null||this.R||(U.J=$,$=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Oc(this,U,y),w=Zt(this.J),se(w,"RID",c),se(w,"CVER",22),this.G&&se(w,"X-HTTP-Session-Id",this.G),Di(this,w),$&&(this.R?y="headers="+le(Mo($))+"&"+y:this.u&&bs(w,this.u,$)),Ri(this.h,U),this.Ra&&se(w,"TYPE","init"),this.S?(se(w,"$req",y),se(w,"SID","null"),U.U=!0,Io(U,w,null)):Io(U,w,y),this.I=2}}else this.I==3&&(c?Mc(this,c):this.i.length==0||kc(this.h)||Mc(this))};function Mc(c,y){var w;y?w=y.l:w=c.V++;const A=Zt(c.J);se(A,"SID",c.M),se(A,"RID",w),se(A,"AID",c.K),Di(c,A),c.u&&c.o&&bs(A,c.u,c.o),w=new Un(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Oc(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ri(c.h,w),Io(w,A,y)}function Di(c,y){c.H&&te(c.H,function(w,A){se(y,A,w)}),c.l&&te({},function(w,A){se(y,A,w)})}function Oc(c,y,w){w=Math.min(c.i.length,w);const A=c.l?f(c.l.Ka,c.l,c):null;e:{var U=c.i;let Te=-1;for(;;){const De=["count="+w];Te==-1?w>0?(Te=U[0].g,De.push("ofs="+Te)):Te=0:De.push("ofs="+Te);let ze=!0;for(let at=0;at<w;at++){var $=U[at].g;const kn=U[at].map;if($-=Te,$<0)Te=Math.max(0,U[at].g-100),ze=!1;else try{$="req"+$+"_"||"";try{var ne=kn instanceof Map?kn:Object.entries(kn);for(const[$n,bn]of ne){let ci=bn;u(bn)&&(ci=xo(bn)),De.push($+$n+"="+encodeURIComponent(ci))}}catch($n){throw De.push($+"type="+encodeURIComponent("_badmap")),$n}}catch{A&&A(kn)}}if(ze){ne=De.join("&");break e}}ne=void 0}return c=c.i.splice(0,w),y.G=c,ne}function xl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;G||I(),Z||(G(),Z=!0),R.add(y,c),c.A=0}}function El(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Es(f(c.Da,c),Dc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Do(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Es(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Oo(this),Do(this))};function Pl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Do(c){c.g=new Un(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Zt(c.na);se(y,"RID","rpc"),se(y,"SID",c.M),se(y,"AID",c.K),se(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&se(y,"TO",c.ia),se(y,"TYPE","xmlhttp"),Di(c,y),c.u&&c.o&&bs(y,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=He(Zt(y)),w.u=null,w.R=!0,bi(w,c)}t.Va=function(){this.C!=null&&(this.C=null,Oo(this),El(this),It(19))};function Vo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function gn(c,y){var w=null;if(c.g==y){Vo(c),Pl(c),c.g=null;var A=2}else if(Cs(c.h,y))w=y.G,pl(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var U=c.D;A=Po(),St(A,new Tc(A,w)),li(c)}else xl(c);else if(U=y.m,U==3||U==0&&y.X>0||!(A==1&&Nc(c,y)||A==2&&El(c)))switch(w&&w.length>0&&(y=c.h,y.i=y.i.concat(w)),U){case 1:ui(c,5);break;case 4:ui(c,10);break;case 3:ui(c,6);break;default:ui(c,2)}}}function Dc(c,y){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*y}function ui(c,y){if(c.j.info("Error code "+y),y==2){var w=f(c.bb,c),A=c.Ua;const U=!A;A=new Oe(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||In(A,"https"),He(A),U?No(A.toString(),w):Lc(A.toString(),w)}else It(2);c.I=0,c.l&&c.l.pa(y),Wn(c),sn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Wn(c){if(c.I=0,c.ja=[],c.l){const y=ml(c.h);(y.length!=0||c.i.length!=0)&&(k(c.ja,y),k(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function Sl(c,y,w){var A=w instanceof Oe?Zt(w):new Oe(w);if(A.g!="")y&&(A.g=y+"."+A.g),Cn(A,A.u);else{var U=a.location;A=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const $=new Oe(null);A&&In($,A),y&&($.g=y),U&&Cn($,U),w&&($.h=w),A=$}return w=c.G,y=c.wa,w&&y&&se(A,w,y),se(A,"VER",c.ka),Di(c,A),A}function Il(c,y,w){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new je(new we({ab:w})):new je(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jo(){}t=jo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function zo(){}zo.prototype.g=function(c,y){return new jt(c,y)};function jt(c,y){Pt.call(this),this.g=new Tl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!M(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new wr(this)}g(jt,Pt),jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){Ie(this.g)},jt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=xo(c),c=w);y.i.push(new ep(y.Ya++,c)),y.I==3&&li(y)},jt.prototype.N=function(){this.g.l=null,delete this.j,Ie(this.g),delete this.g,jt.Z.N.call(this)};function Cl(c){xs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const w in y){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(Cl,xs);function Vc(){Eo.call(this),this.status=1}g(Vc,Eo);function wr(c){this.g=c}g(wr,jo),wr.prototype.ra=function(){St(this.g,"a")},wr.prototype.qa=function(c){St(this.g,new Cl(c))},wr.prototype.pa=function(c){St(this.g,new Vc)},wr.prototype.oa=function(){St(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,DS=function(){return new zo},OS=function(){return Po()},MS=ki,Ag={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},So.NO_ERROR=0,So.TIMEOUT=8,So.HTTP_ERROR=6,Vh=So,xc.COMPLETE="complete",NS=xc,vc.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Gl=vc,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,LS=je}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});const s1="@firebase/firestore",o1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new g_("@firebase/firestore");function Ko(){return oo.logLevel}function re(t,...e){if(oo.logLevel<=ke.DEBUG){const n=e.map(v_);oo.debug(`Firestore (${el}): ${t}`,...n)}}function rr(t,...e){if(oo.logLevel<=ke.ERROR){const n=e.map(v_);oo.error(`Firestore (${el}): ${t}`,...n)}}function Ba(t,...e){if(oo.logLevel<=ke.WARN){const n=e.map(v_);oo.warn(`Firestore (${el}): ${t}`,...n)}}function v_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,VS(t,i,n)}function VS(t,e,n){let i=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw rr(i),new Error(i)}function Fe(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||VS(e,r,i)}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class pV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mV{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new Qs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string",31837,{l:i}),new jS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class gV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new gV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _V{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new a1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new a1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=vV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function be(t,e){return t<e?-1:t>e?1:0}function kg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return Xp(r)===Xp(o)?be(r,o):Xp(r)?1:-1}return be(t.length,e.length)}const wV=55296,TV=57343;function Xp(t){const e=t.charCodeAt(0);return e>=wV&&e<=TV}function Ua(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="__name__";class pi{constructor(e,n,i){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&_e(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return pi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=pi.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return be(e.length,n.length)}static compareSegments(e,n){const i=pi.isNumericId(e),r=pi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?pi.extractNumericId(e).compare(pi.extractNumericId(n)):kg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class Ge extends pi{construct(e,n,i){return new Ge(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const xV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends pi{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return xV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l1}static keyField(){return new Nt([l1])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new he(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new he(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new he(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new he(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Ge.fromString(e))}static fromName(e){return new fe(Ge.fromString(e).popFirst(5))}static empty(){return new fe(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e,n){if(!n)throw new he(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EV(t,e,n,i){if(e===!0&&i===!0)throw new he(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function u1(t){if(!fe.isDocumentKey(t))throw new he(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function c1(t){if(fe.isDocumentKey(t))throw new he(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function FS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function T_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function Ea(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=T_(t);throw new he(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t,e){const n={typeString:t};return e&&(n.value=e),n}function ac(t,e){if(!FS(t))throw new he(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new he(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=-62135596800,d1=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*d1);return new Ze(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<h1)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d1}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ac(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-h1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:_t("string",Ze._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ze(0,0))}static max(){return new Ee(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=-1;function PV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ee.fromTimestamp(i===1e9?new Ze(n+1,0):new Ze(n,i));return new os(r,fe.empty(),e)}function SV(t){return new os(t.readTime,t.key,Hu)}class os{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new os(Ee.min(),fe.empty(),Hu)}static max(){return new os(Ee.max(),fe.empty(),Hu)}}function IV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==CV)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function kV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=-1;function Af(t){return t==null}function kd(t){return t===0&&1/t==-1/0}function bV(t){return typeof t=="number"&&Number.isInteger(t)&&!kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="";function RV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=f1(e)),e=LV(t.get(n),e);return f1(e)}function LV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case BS:n+="";break;default:n+=o}}return n}function f1(t){return t+BS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function US(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yh(this.root,e,this.comparator,!0)}}class yh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Lt.RED,this.left=r??Lt.EMPTY,this.right=o??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Lt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Lt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new m1(this.data.getIterator())}getIteratorFrom(e){return new m1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class m1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new Et(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new HS("Invalid base64 string: "+o):o}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const NV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=NV.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="server_timestamp",$S="__type__",qS="__previous_value__",GS="__local_write_time__";function E_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[$S])==null?void 0:i.stringValue)===WS}function kf(t){const e=t.mapValue.fields[qS];return E_(e)?kf(e):e}function Wu(t){const e=as(t.mapValue.fields[GS].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const bd="(default)";class $u{constructor(e,n){this.projectId=e,this.database=n||bd}static empty(){return new $u("","")}get isDefaultDatabase(){return this.database===bd}isEqual(e){return e instanceof $u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="__type__",OV="__max__",_h={mapValue:{}},KS="__vector__",Rd="value";function us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?E_(t)?4:VV(t)?9007199254740991:DV(t)?10:11:_e(28295,{value:t})}function Si(t,e){if(t===e)return!0;const n=us(t);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=as(r.timestampValue),u=as(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return ls(r.bytesValue).isEqual(ls(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return lt(r.geoPointValue.latitude)===lt(o.geoPointValue.latitude)&&lt(r.geoPointValue.longitude)===lt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return lt(r.integerValue)===lt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=lt(r.doubleValue),u=lt(o.doubleValue);return a===u?kd(a)===kd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ua(t.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(p1(a)!==p1(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Si(a[h],u[h])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function qu(t,e){return(t.values||[]).find(n=>Si(n,e))!==void 0}function Ha(t,e){if(t===e)return 0;const n=us(t),i=us(e);if(n!==i)return be(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=lt(o.integerValue||o.doubleValue),h=lt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return g1(t.timestampValue,e.timestampValue);case 4:return g1(Wu(t),Wu(e));case 5:return kg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=ls(o),h=ls(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=be(u[f],h[f]);if(m!==0)return m}return be(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=be(lt(o.latitude),lt(a.latitude));return u!==0?u:be(lt(o.longitude),lt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return y1(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,T,k,b;const u=o.fields||{},h=a.fields||{},f=(_=u[Rd])==null?void 0:_.arrayValue,m=(T=h[Rd])==null?void 0:T.arrayValue,g=be(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((b=m==null?void 0:m.values)==null?void 0:b.length)||0);return g!==0?g:y1(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===_h.mapValue&&a===_h.mapValue)return 0;if(o===_h.mapValue)return 1;if(a===_h.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const _=kg(h[g],m[g]);if(_!==0)return _;const T=Ha(u[h[g]],f[m[g]]);if(T!==0)return T}return be(h.length,m.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function g1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=as(t),i=as(e),r=be(n.seconds,i.seconds);return r!==0?r:be(n.nanos,i.nanos)}function y1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ha(n[r],i[r]);if(o)return o}return be(n.length,i.length)}function Wa(t){return bg(t)}function bg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=as(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=bg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${bg(n.fields[a])}`;return r+"}"}(t.mapValue):_e(61005,{value:t})}function jh(t){switch(us(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(t);return e?16+jh(e):16;case 5:return 2*t.stringValue.length;case 6:return ls(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+jh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return go(i.fields,(o,a)=>{r+=o.length+jh(a)}),r}(t.mapValue);default:throw _e(13486,{value:t})}}function Rg(t){return!!t&&"integerValue"in t}function P_(t){return!!t&&"arrayValue"in t}function _1(t){return!!t&&"nullValue"in t}function v1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zh(t){return!!t&&"mapValue"in t}function DV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ZS])==null?void 0:i.stringValue)===KS}function du(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=du(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=du(t.arrayValue.values[n]);return e}return{...t}}function VV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===OV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=du(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];zh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){go(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Dn(du(this.value))}}function QS(t){const e=[];return go(t.fields,(n,i)=>{const r=new Nt([n]);if(zh(i)){const o=QS(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new $t(e,0,Ee.min(),Ee.min(),Ee.min(),Dn.empty(),0)}static newFoundDocument(e,n,i,r){return new $t(e,1,n,Ee.min(),i,r,0)}static newNoDocument(e,n){return new $t(e,2,n,Ee.min(),Ee.min(),Dn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Ee.min(),Ee.min(),Dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.position=e,this.inclusive=n}}function w1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=fe.comparator(fe.fromName(a.referenceValue),n.key):i=Ha(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function T1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n="asc"){this.field=e,this.dir=n}}function jV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{}class wt extends YS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new FV(e,n,i):n==="array-contains"?new HV(e,i):n==="in"?new WV(e,i):n==="not-in"?new $V(e,i):n==="array-contains-any"?new qV(e,i):new wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new BV(e,i):new UV(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ha(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(Ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends YS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ii(e,n)}matches(e){return XS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XS(t){return t.op==="and"}function JS(t){return zV(t)&&XS(t)}function zV(t){for(const e of t.filters)if(e instanceof Ii)return!1;return!0}function Lg(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Wa(t.value);if(JS(t))return t.filters.map(e=>Lg(e)).join(",");{const e=t.filters.map(n=>Lg(n)).join(",");return`${t.op}(${e})`}}function eI(t,e){return t instanceof wt?function(i,r){return r instanceof wt&&i.op===r.op&&i.field.isEqual(r.field)&&Si(i.value,r.value)}(t,e):t instanceof Ii?function(i,r){return r instanceof Ii&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&eI(a,r.filters[u]),!0):!1}(t,e):void _e(19439)}function tI(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Wa(n.value)}`}(t):t instanceof Ii?function(n){return n.op.toString()+" {"+n.getFilters().map(tI).join(" ,")+"}"}(t):"Filter"}class FV extends wt{constructor(e,n,i){super(e,n,i),this.key=fe.fromName(i.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class BV extends wt{constructor(e,n){super(e,"in",n),this.keys=nI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UV extends wt{constructor(e,n){super(e,"not-in",n),this.keys=nI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>fe.fromName(i.referenceValue))}class HV extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return P_(n)&&qu(n.arrayValue,this.value)}}class WV extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qu(this.value.arrayValue,n)}}class $V extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qu(this.value.arrayValue,n)}}class qV extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!P_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>qu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function x1(t,e=null,n=[],i=[],r=null,o=null,a=null){return new GV(t,e,n,i,r,o,a)}function S_(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Lg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Af(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Wa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Wa(i)).join(",")),e.Te=n}return e.Te}function I_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!eI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!T1(t.startAt,e.startAt)&&T1(t.endAt,e.endAt)}function Ng(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZV(t,e,n,i,r,o,a,u){return new bf(t,e,n,i,r,o,a,u)}function C_(t){return new bf(t)}function E1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KV(t){return t.collectionGroup!==null}function fu(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Et(Nt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Nd(o,i))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new Nd(Nt.keyField(),i))}return e.Ie}function vi(t){const e=Pe(t);return e.Ee||(e.Ee=QV(e,fu(t))),e.Ee}function QV(t,e){if(t.limitType==="F")return x1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Nd(r.field,o)});const n=t.endAt?new Ld(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ld(t.startAt.position,t.startAt.inclusive):null;return x1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Mg(t,e,n){return new bf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rf(t,e){return I_(vi(t),vi(e))&&t.limitType===e.limitType}function iI(t){return`${S_(vi(t))}|lt:${t.limitType}`}function Qo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>tI(r)).join(", ")}]`),Af(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Wa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Wa(r)).join(",")),`Target(${i})`}(vi(t))}; limitType=${t.limitType})`}function Lf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):fe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of fu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=w1(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,fu(i),r)||i.endAt&&!function(a,u,h){const f=w1(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,fu(i),r))}(t,e)}function YV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rI(t){return(e,n)=>{let i=!1;for(const r of fu(t)){const o=XV(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function XV(t,e,n){const i=t.field.isKeyField()?fe.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Ha(h,f):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return US(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=new it(fe.comparator);function sr(){return JV}const sI=new it(fe.comparator);function Zl(...t){let e=sI;for(const n of t)e=e.insert(n.key,n);return e}function oI(t){let e=sI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function qs(){return pu()}function aI(){return pu()}function pu(){return new yo(t=>t.toString(),(t,e)=>t.isEqual(e))}const e4=new it(fe.comparator),t4=new Et(fe.comparator);function Re(...t){let e=t4;for(const n of t)e=e.add(n);return e}const n4=new Et(be);function i4(){return n4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function lI(t){return{integerValue:""+t}}function r4(t,e){return bV(e)?lI(e):A_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function s4(t,e,n){return t instanceof Md?function(r,o){const a={fields:{[$S]:{stringValue:WS},[GS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&E_(o)&&(o=kf(o)),o&&(a.fields[qS]=o),{mapValue:a}}(n,e):t instanceof Gu?cI(t,e):t instanceof Zu?hI(t,e):function(r,o){const a=uI(r,o),u=P1(a)+P1(r.Ae);return Rg(a)&&Rg(r.Ae)?lI(u):A_(r.serializer,u)}(t,e)}function o4(t,e,n){return t instanceof Gu?cI(t,e):t instanceof Zu?hI(t,e):n}function uI(t,e){return t instanceof Od?function(i){return Rg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Md extends Nf{}class Gu extends Nf{constructor(e){super(),this.elements=e}}function cI(t,e){const n=dI(e);for(const i of t.elements)n.some(r=>Si(r,i))||n.push(i);return{arrayValue:{values:n}}}class Zu extends Nf{constructor(e){super(),this.elements=e}}function hI(t,e){let n=dI(e);for(const i of t.elements)n=n.filter(r=>!Si(r,i));return{arrayValue:{values:n}}}class Od extends Nf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function P1(t){return lt(t.integerValue||t.doubleValue)}function dI(t){return P_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function a4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Gu&&r instanceof Gu||i instanceof Zu&&r instanceof Zu?Ua(i.elements,r.elements,Si):i instanceof Od&&r instanceof Od?Si(i.Ae,r.Ae):i instanceof Md&&r instanceof Md}(t.transform,e.transform)}class l4{constructor(e,n){this.version=e,this.transformResults=n}}class Yi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yi}static exists(e){return new Yi(void 0,e)}static updateTime(e){return new Yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mf{}function fI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mI(t.key,Yi.none()):new lc(t.key,t.data,Yi.none());{const n=t.data,i=Dn.empty();let r=new Et(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new _o(t.key,i,new Xn(r.toArray()),Yi.none())}}function u4(t,e,n){t instanceof lc?function(r,o,a){const u=r.value.clone(),h=I1(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof _o?function(r,o,a){if(!Fh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=I1(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(pI(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function mu(t,e,n,i){return t instanceof lc?function(o,a,u,h){if(!Fh(o.precondition,a))return u;const f=o.value.clone(),m=C1(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof _o?function(o,a,u,h){if(!Fh(o.precondition,a))return u;const f=C1(o.fieldTransforms,h,a),m=a.data;return m.setAll(pI(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Fh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function c4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=uI(i.transform,r||null);o!=null&&(n===null&&(n=Dn.empty()),n.set(i.field,o))}return n||null}function S1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ua(i,r,(o,a)=>a4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lc extends Mf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _o extends Mf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function pI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function I1(t,e,n){const i=new Map;Fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,o4(a,u,n[r]))}return i}function C1(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,s4(o,a,e))}return i}class mI extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h4 extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&u4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=aI();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=fI(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Ee.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(n,i)=>S1(n,i))&&Ua(this.baseMutations,e.baseMutations,(n,i)=>S1(n,i))}}class k_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Fe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return e4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new k_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Ne;function m4(t){switch(t){case X.OK:return _e(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function gI(t){if(t===void 0)return rr("GRPC error has no .code"),X.UNKNOWN;switch(t){case mt.OK:return X.OK;case mt.CANCELLED:return X.CANCELLED;case mt.UNKNOWN:return X.UNKNOWN;case mt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case mt.INTERNAL:return X.INTERNAL;case mt.UNAVAILABLE:return X.UNAVAILABLE;case mt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case mt.NOT_FOUND:return X.NOT_FOUND;case mt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case mt.ABORTED:return X.ABORTED;case mt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case mt.DATA_LOSS:return X.DATA_LOSS;default:return _e(39323,{code:t})}}(Ne=mt||(mt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new Jr([4294967295,4294967295],0);function A1(t){const e=g4().encode(t),n=new RS;return n.update(e),new Uint8Array(n.digest())}function k1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Jr([n,i],0),new Jr([r,o],0)]}class b_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Kl(`Invalid padding: ${n}`);if(i<0)throw new Kl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Jr.fromNumber(i)));return r.compare(y4)===1&&(r=new Jr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=A1(e),[i,r]=k1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new b_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=A1(e),[i,r]=k1(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Of(Ee.min(),r,new it(be),sr(),Re())}}class uc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new uc(i,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class yI{constructor(e,n){this.targetId=e,this.Ce=n}}class _I{constructor(e,n,i=Dt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class b1{constructor(){this.ve=0,this.Fe=R1(),this.Me=Dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),n=Re(),i=Re();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:_e(38017,{changeType:o})}}),new uc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=R1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _4{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=vh(),this.He=vh(),this.Ye=new it(be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Ng(o))if(i===0){const a=new fe(o.path);this.et(n,a,$t.newNoDocument(a,Ee.min()))}else Fe(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=ls(i).toUint8Array()}catch(h){if(h instanceof HS)return Ba("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new b_(a,r,o)}catch(h){return Ba(h instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Ng(u.target)){const h=new fe(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,$t.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Re();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Of(e,n,this.Ye,this.je,i);return this.je=sr(),this.Je=vh(),this.He=vh(),this.Ye=new it(be),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new b1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Et(be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Et(be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new b1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vh(){return new it(fe.comparator)}function R1(){return new it(fe.comparator)}const v4={asc:"ASCENDING",desc:"DESCENDING"},w4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T4={and:"AND",or:"OR"};class x4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Og(t,e){return t.useProto3Json||Af(e)?e:{value:e}}function Dd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function E4(t,e){return Dd(t,e.toTimestamp())}function wi(t){return Fe(!!t,49232),Ee.fromTimestamp(function(n){const i=as(n);return new Ze(i.seconds,i.nanos)}(t))}function R_(t,e){return Dg(t,e).canonicalString()}function Dg(t,e){const n=function(r){return new Ge(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wI(t){const e=Ge.fromString(t);return Fe(SI(e),10190,{key:e.toString()}),e}function Vg(t,e){return R_(t.databaseId,e.path)}function Jp(t,e){const n=wI(e);if(n.get(1)!==t.databaseId.projectId)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(xI(n))}function TI(t,e){return R_(t.databaseId,e)}function P4(t){const e=wI(t);return e.length===4?Ge.emptyPath():xI(e)}function jg(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xI(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function L1(t,e,n){return{name:Vg(t,e),fields:n.value.mapValue.fields}}function S4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:_e(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Fe(m===void 0||typeof m=="string",58123),Dt.fromBase64String(m||"")):(Fe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Dt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?X.UNKNOWN:gI(f.code);return new he(m,f.message||"")}(a);n=new _I(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Jp(t,i.document.name),o=wi(i.document.updateTime),a=i.document.createTime?wi(i.document.createTime):Ee.min(),u=new Dn({mapValue:{fields:i.document.fields}}),h=$t.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Bh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Jp(t,i.document),o=i.readTime?wi(i.readTime):Ee.min(),a=$t.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Bh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Jp(t,i.document),o=i.removedTargetIds||[];n=new Bh([],o,r,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new p4(r,o),u=i.targetId;n=new yI(u,a)}}return n}function I4(t,e){let n;if(e instanceof lc)n={update:L1(t,e.key,e.value)};else if(e instanceof mI)n={delete:Vg(t,e.key)};else if(e instanceof _o)n={update:L1(t,e.key,e.data),updateMask:O4(e.fieldMask)};else{if(!(e instanceof h4))return _e(16599,{Vt:e.type});n={verify:Vg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Md)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Gu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Zu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Od)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw _e(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:E4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_e(27497)}(t,e.precondition)),n}function C4(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?wi(r.updateTime):wi(o);return a.isEqual(Ee.min())&&(a=wi(o)),new l4(a,r.transformResults||[])}(n,e))):[]}function A4(t,e){return{documents:[TI(t,e.path)]}}function k4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=TI(t,r);const o=function(f){if(f.length!==0)return PI(Ii.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:Yo(_.field),direction:L4(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Og(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function b4(t){let e=P4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Fe(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=EI(g);return _ instanceof Ii&&JS(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(k){return new Nd(Xo(k.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,Af(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(g){const _=!!g.before,T=g.values||[];return new Ld(T,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,T=g.values||[];return new Ld(T,_)}(n.endAt)),ZV(e,r,a,o,u,"F",h,f)}function R4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function EI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Xo(n.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Xo(n.unaryFilter.field);return wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xo(n.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Xo(n.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return wt.create(Xo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ii.create(n.compositeFilter.filters.map(i=>EI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function L4(t){return v4[t]}function N4(t){return w4[t]}function M4(t){return T4[t]}function Yo(t){return{fieldPath:t.canonicalString()}}function Xo(t){return Nt.fromServerFormat(t.fieldPath)}function PI(t){return t instanceof wt?function(n){if(n.op==="=="){if(v1(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NAN"}};if(_1(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(v1(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NAN"}};if(_1(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(n.field),op:N4(n.op),value:n.value}}}(t):t instanceof Ii?function(n){const i=n.getFilters().map(r=>PI(r));return i.length===1?i[0]:{compositeFilter:{op:M4(n.op),filters:i}}}(t):_e(54877,{filter:t})}function O4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,i,r,o=Ee.min(),a=Ee.min(),u=Dt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.yt=e}}function V4(t){const e=b4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.Cn=new z4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(os.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class z4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Et(Ge.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Et(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},II=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(II,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $a(0)}static cr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="LruGarbageCollector",F4=1048576;function O1([t,e],[n,i]){const r=be(t,n);return r===0?be(e,i):r}class B4{constructor(e){this.Ir=e,this.buffer=new Et(O1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();O1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class U4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(M1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nl(n)?re(M1,"Ignoring IndexedDB error during garbage collection: ",n):await tl(n)}await this.Vr(3e5)})}}class H4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Cf.ce);const i=new B4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(N1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),Ko()<=ke.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function W4(t,e){return new H4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.changes=new yo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&mu(i.mutation,r,Xn.empty(),Ze.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Re()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Re()){const r=qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Zl();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=qs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Re()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=sr();const a=pu(),u=function(){return pu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof _o)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),mu(m.mutation,f,m.mutation.getFieldMask(),Ze.now())):a.set(f.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new q4(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=pu();let r=new it((a,u)=>a-u),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||Xn.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||Re()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=aI();m.forEach(_=>{if(!o.has(_)){const T=fI(n.get(_),i.get(_));T!==null&&g.set(_,T),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return fe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(qs());let u=Hu,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{h=h.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Re())).next(m=>({batchId:u,changes:oI(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(i=>{let r=Zl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Zl();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,_){return new bf(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,$t.newInvalidDocument(m)))});let u=Zl();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&mu(m.mutation,f,Xn.empty(),Ze.now()),Lf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:wi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:V4(r.bundledQuery),readTime:wi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.overlays=new it(fe.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=qs();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=qs(),o=n.length+1,a=new fe(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new it((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=qs(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=qs(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new f4(n,i));let o=this.qr.get(n);o===void 0&&(o=Re(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.Qr=new Et(At.$r),this.Ur=new Et(At.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new At(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new At(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new fe(new Ge([])),i=new At(n,e),r=new At(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new fe(new Ge([])),i=new At(n,e),r=new At(n,e+1);let o=Re();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new At(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return fe.comparator(e.key,n.key)||be(e.Yr,n.Yr)}static Kr(e,n){return be(e.Yr,n.Yr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Et(At.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new d4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new At(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?x_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new At(n,0),r=new At(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Et(be);return n.forEach(r=>{const o=new At(r,0),a=new At(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;fe.isDocumentKey(o)||(o=o.child(""));const a=new At(new fe(o),0);let u=new Et(be);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new At(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new At(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.ri=e,this.docs=function(){return new it(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let i=sr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():$t.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=sr();const a=n.path,u=new fe(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||IV(SV(m),i)<=0||(r.has(m.key)||Lf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){_e(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new J4(this)}getSize(e){return K.resolve(this.size)}}class J4 extends $4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e){this.persistence=e,this.si=new yo(n=>S_(n),I_),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new L_,this.targetCount=0,this.ai=$a.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cf(0),this.li=!1,this.li=!0,this.hi=new Q4,this.referenceDelegate=e(this),this.Pi=new e3(this),this.indexManager=new j4,this.remoteDocumentCache=function(r){return new X4(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new D4(n),this.Ii=new Z4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new K4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new Y4(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new t3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class t3 extends AV{constructor(e){super(),this.currentSequenceNumber=e}}class N_{constructor(e){this.persistence=e,this.Ri=new L_,this.Vi=null}static mi(e){return new N_(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=fe.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vd{constructor(e,n){this.persistence=e,this.pi=new yo(i=>RV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=W4(this,n)}static mi(e,n){return new Vd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Ee.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Re(),r=Re();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new M_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return KO()?8:kV(Gt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new n3;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(Ko()<=ke.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Ko()<=ke.DEBUG&&re("QueryEngine","Query:",Qo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Ko()<=ke.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(n))):K.resolve())}ys(e,n){if(E1(n))return K.resolve(null);let i=vi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Mg(n,null,"F"),i=vi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Re(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Mg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return E1(n)||r.isEqual(Ee.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(Ko()<=ke.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qo(n)),this.vs(e,a,n,PV(r,Hu)).next(u=>u))})}Ds(e,n){let i=new Et(rI(e));return n.forEach((r,o)=>{Lf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return Ko()<=ke.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Qo(n)),this.ps.getDocumentsMatchingQuery(e,n,os.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="LocalStore",r3=3e8;class s3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new it(be),this.xs=new yo(o=>S_(o),I_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function o3(t,e,n,i){return new s3(t,e,n,i)}async function AI(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Re();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function a3(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,_=g.keys();let T=K.resolve();return _.forEach(k=>{T=T.next(()=>m.getEntry(h,k)).next(b=>{const z=f.docVersions.get(k);Fe(z!==null,48541),b.version.compareTo(z)<0&&(g.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),m.addEntry(b)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Re();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function kI(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function l3(t,e){const n=Pe(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let T=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Dt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(b,z,C){return b.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=r3?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(_,T,m)&&u.push(n.Pi.updateTargetData(o,T))});let h=sr(),f=Re();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(u3(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Ee.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function u3(t,e,n){let i=Re(),r=Re();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=sr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Ee.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):re(O_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function c3(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=x_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function h3(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new zr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function zg(t,e,n){const i=Pe(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!nl(a))throw a;re(O_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function D1(t,e,n){const i=Pe(t);let r=Ee.min(),o=Re();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=Pe(h),_=g.xs.get(m);return _!==void 0?K.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,vi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Ee.min(),n?o:Re())).next(u=>(d3(i,YV(e),u),{documents:u,Qs:o})))}function d3(t,e,n){let i=t.Os.get(e)||Ee.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class V1{constructor(){this.activeTargetIds=i4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f3{constructor(){this.Mo=new V1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new V1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="ConnectivityMonitor";class z1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(j1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(j1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh=null;function Fg(){return wh===null?wh=function(){return 268435456+Math.round(2147483648*Math.random())}():wh++,"0x"+wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="RestConnection",m3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===bd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Fg(),u=this.zo(e,n.toUriEncodedString());re(em,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=Xa(f);return this.Jo(e,u,h,i,m).then(g=>(re(em,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Ba(em,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+el}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=m3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class _3 extends g3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Fg();return new Promise((u,h)=>{const f=new LS;f.setWithCredentials(!0),f.listenOnce(NS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Vh.NO_ERROR:const g=f.getResponseJson();re(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Vh.TIMEOUT:re(Bt,`RPC '${e}' ${a} timed out`),h(new he(X.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const _=f.getStatus();if(re(Bt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const b=function(C){const P=C.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(P)>=0?P:X.UNKNOWN}(k.status);h(new he(b,k.message))}else h(new he(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new he(X.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{re(Bt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);re(Bt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Fg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=DS(),u=OS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");re(Bt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let _=!1,T=!1;const k=new y3({Yo:z=>{T?re(Bt,`Not sending because RPC '${e}' stream ${r} is closed:`,z):(_||(re(Bt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),re(Bt,`RPC '${e}' stream ${r} sending:`,z),g.send(z))},Zo:()=>g.close()}),b=(z,C,P)=>{z.listen(C,S=>{try{P(S)}catch(F){setTimeout(()=>{throw F},0)}})};return b(g,Gl.EventType.OPEN,()=>{T||(re(Bt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),b(g,Gl.EventType.CLOSE,()=>{T||(T=!0,re(Bt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(g))}),b(g,Gl.EventType.ERROR,z=>{T||(T=!0,Ba(Bt,`RPC '${e}' stream ${r} transport errored. Name:`,z.name,"Message:",z.message),k.a_(new he(X.UNAVAILABLE,"The operation could not be completed")))}),b(g,Gl.EventType.MESSAGE,z=>{var C;if(!T){const P=z.data[0];Fe(!!P,16349);const S=P,F=(S==null?void 0:S.error)||((C=S[0])==null?void 0:C.error);if(F){re(Bt,`RPC '${e}' stream ${r} received error:`,F);const G=F.status;let Z=function(N){const O=mt[N];if(O!==void 0)return gI(O)}(G),R=F.message;Z===void 0&&(Z=X.INTERNAL,R="Unknown error status: "+G+" with message "+F.message),T=!0,k.a_(new he(Z,R)),g.close()}else re(Bt,`RPC '${e}' stream ${r} received:`,P),k.u_(P)}}),b(u,MS.STAT_EVENT,z=>{z.stat===Ag.PROXY?re(Bt,`RPC '${e}' stream ${r} detected buffering proxy`):z.stat===Ag.NOPROXY&&re(Bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t){return new x4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="PersistentStream";class RI{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new he(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(F1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(F1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v3 extends RI{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=S4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ee.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Ee.min():a.readTime?wi(a.readTime):Ee.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=jg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Ng(h)?{documents:A4(o,h)}:{query:k4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=vI(o,a.resumeToken);const f=Og(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Ee.min())>0){u.readTime=Dd(o,a.snapshotVersion.toTimestamp());const f=Og(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=R4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=jg(this.serializer),n.removeTarget=e,this.q_(n)}}class w3 extends RI{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=C4(e.writeResults,e.commitTime),i=wi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=jg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>I4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{}class x3 extends T3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Dg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Dg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class E3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="RemoteStore";class P3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{vo(this)&&(re(ao,"Restarting streams for network reachability change."),await async function(h){const f=Pe(h);f.Ea.add(4),await cc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Vf(f)}(this))})}),this.Ra=new E3(i,r)}}async function Vf(t){if(vo(t))for(const e of t.da)await e(!0)}async function cc(t){for(const e of t.da)await e(!1)}function LI(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),z_(n)?j_(n):il(n).O_()&&V_(n,e))}function D_(t,e){const n=Pe(t),i=il(n);n.Ia.delete(e),i.O_()&&NI(n,e),n.Ia.size===0&&(i.O_()?i.L_():vo(n)&&n.Ra.set("Unknown"))}function V_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}il(t).Y_(e)}function NI(t,e){t.Va.Ue(e),il(t).Z_(e)}function j_(t){t.Va=new _4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),il(t).start(),t.Ra.ua()}function z_(t){return vo(t)&&!il(t).x_()&&t.Ia.size>0}function vo(t){return Pe(t).Ea.size===0}function MI(t){t.Va=void 0}async function S3(t){t.Ra.set("Online")}async function I3(t){t.Ia.forEach((e,n)=>{V_(t,e)})}async function C3(t,e){MI(t),z_(t)?(t.Ra.ha(e),j_(t)):t.Ra.set("Unknown")}async function A3(t,e,n){if(t.Ra.set("Online"),e instanceof _I&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){re(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await jd(t,i)}else if(e instanceof Bh?t.Va.Ze(e):e instanceof yI?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ee.min()))try{const i=await kI(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Dt.EMPTY_BYTE_STRING,m.snapshotVersion)),NI(o,h);const g=new zr(m.target,h,f,m.sequenceNumber);V_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){re(ao,"Failed to raise snapshot:",i),await jd(t,i)}}async function jd(t,e,n){if(!nl(e))throw e;t.Ea.add(1),await cc(t),t.Ra.set("Offline"),n||(n=()=>kI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(ao,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Vf(t)})}function OI(t,e){return e().catch(n=>jd(t,n,e))}async function jf(t){const e=Pe(t),n=cs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:x_;for(;k3(e);)try{const r=await c3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,b3(e,r)}catch(r){await jd(e,r)}DI(e)&&VI(e)}function k3(t){return vo(t)&&t.Ta.length<10}function b3(t,e){t.Ta.push(e);const n=cs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function DI(t){return vo(t)&&!cs(t).x_()&&t.Ta.length>0}function VI(t){cs(t).start()}async function R3(t){cs(t).ra()}async function L3(t){const e=cs(t);for(const n of t.Ta)e.ea(n.mutations)}async function N3(t,e,n){const i=t.Ta.shift(),r=k_.from(i,e,n);await OI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await jf(t)}async function M3(t,e){e&&cs(t).X_&&await async function(i,r){if(function(a){return m4(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();cs(i).B_(),await OI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await jf(i)}}(t,e),DI(t)&&VI(t)}async function B1(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),re(ao,"RemoteStore received new credentials");const i=vo(n);n.Ea.add(3),await cc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vf(n)}async function O3(t,e){const n=Pe(t);e?(n.Ea.delete(2),await Vf(n)):e||(n.Ea.add(2),await cc(n),n.Ra.set("Unknown"))}function il(t){return t.ma||(t.ma=function(n,i,r){const o=Pe(n);return o.sa(),new v3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:S3.bind(null,t),t_:I3.bind(null,t),r_:C3.bind(null,t),H_:A3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),z_(t)?j_(t):t.Ra.set("Unknown")):(await t.ma.stop(),MI(t))})),t.ma}function cs(t){return t.fa||(t.fa=function(n,i,r){const o=Pe(n);return o.sa(),new w3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:R3.bind(null,t),r_:M3.bind(null,t),ta:L3.bind(null,t),na:N3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await jf(t)):(await t.fa.stop(),t.Ta.length>0&&(re(ao,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new F_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B_(t,e){if(rr("AsyncQueue",`${e}: ${t}`),nl(t))return new he(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(e){return new Pa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||fe.comparator(n.key,i.key):(n,i)=>fe.comparator(n.key,i.key),this.keyedMap=Zl(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Pa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(){this.ga=new it(fe.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class qa{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new qa(e,n,Pa.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class V3{constructor(){this.queries=H1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Pe(n),o=r.queries;r.queries=H1(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new he(X.ABORTED,"Firestore shutting down"))}}function H1(){return new yo(t=>iI(t),Rf)}async function j3(t,e){const n=Pe(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new D3,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=B_(a,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&U_(n)}async function z3(t,e){const n=Pe(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function F3(t,e){const n=Pe(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&U_(n)}function B3(t,e,n){const i=Pe(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function U_(t){t.Ca.forEach(e=>{e.next()})}var Bg,W1;(W1=Bg||(Bg={})).Ma="default",W1.Cache="cache";class U3{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.key=e}}class zI{constructor(e){this.key=e}}class H3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Re(),this.mutatedKeys=Re(),this.eu=rI(e),this.tu=new Pa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new U1,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),T=Lf(this.query,g)?g:null,k=!!_&&this.mutatedKeys.has(_.key),b=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let z=!1;_&&T?_.data.isEqual(T.data)?k!==b&&(i.track({type:3,doc:T}),z=!0):this.su(_,T)||(i.track({type:2,doc:T}),z=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!_&&T?(i.track({type:0,doc:T}),z=!0):_&&!T&&(i.track({type:1,doc:_}),z=!0,(h||f)&&(u=!0)),z&&(T?(a=a.add(T),o=b?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(T,k){const b=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:z})}};return b(T)-b(k)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new qa(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new U1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Re(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new zI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new jI(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const H_="SyncEngine";class W3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class $3{constructor(e){this.key=e,this.hu=!1}}class q3{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new yo(u=>iI(u),Rf),this.Iu=new Map,this.Eu=new Set,this.du=new it(fe.comparator),this.Au=new Map,this.Ru=new L_,this.Vu={},this.mu=new Map,this.fu=$a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function G3(t,e,n=!0){const i=$I(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await FI(i,e,n,!0),r}async function Z3(t,e){const n=$I(t);await FI(n,e,!0,!1)}async function FI(t,e,n,i){const r=await h3(t.localStore,vi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await K3(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&LI(t.remoteStore,r),u}async function K3(t,e,n,i,r){t.pu=(g,_,T)=>async function(b,z,C,P){let S=z.view.ru(C);S.Cs&&(S=await D1(b.localStore,z.query,!1).then(({documents:R})=>z.view.ru(R,S)));const F=P&&P.targetChanges.get(z.targetId),G=P&&P.targetMismatches.get(z.targetId)!=null,Z=z.view.applyChanges(S,b.isPrimaryClient,F,G);return q1(b,z.targetId,Z.au),Z.snapshot}(t,g,_,T);const o=await D1(t.localStore,e,!0),a=new H3(e,o.Qs),u=a.ru(o.documents),h=uc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);q1(t,n,f.au);const m=new W3(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function Q3(t,e,n){const i=Pe(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Rf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await zg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&D_(i.remoteStore,r.targetId),Ug(i,r.targetId)}).catch(tl)):(Ug(i,r.targetId),await zg(i.localStore,r.targetId,!0))}async function Y3(t,e){const n=Pe(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),D_(n.remoteStore,i.targetId))}async function X3(t,e,n){const i=s5(t);try{const r=await function(a,u){const h=Pe(a),f=Ze.now(),m=u.reduce((T,k)=>T.add(k.key),Re());let g,_;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=sr(),b=Re();return h.Ns.getEntries(T,m).next(z=>{k=z,k.forEach((C,P)=>{P.isValidDocument()||(b=b.add(C))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,k)).next(z=>{g=z;const C=[];for(const P of u){const S=c4(P,g.get(P.key).overlayedDocument);S!=null&&C.push(new _o(P.key,S,QS(S.value.mapValue),Yi.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,C,u)}).next(z=>{_=z;const C=z.applyToLocalDocumentSet(g,b);return h.documentOverlayCache.saveOverlays(T,z.batchId,C)})}).then(()=>({batchId:_.batchId,changes:oI(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new it(be)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await hc(i,r.changes),await jf(i.remoteStore)}catch(r){const o=B_(r,"Failed to persist write");n.reject(o)}}async function BI(t,e){const n=Pe(t);try{const i=await l3(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Fe(a.hu,14607):r.removedDocuments.size>0&&(Fe(a.hu,42227),a.hu=!1))}),await hc(n,i,e)}catch(i){await tl(i)}}function $1(t,e,n){const i=Pe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Pe(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&U_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function J3(t,e,n){const i=Pe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new it(fe.comparator);a=a.insert(o,$t.newNoDocument(o,Ee.min()));const u=Re().add(o),h=new Of(Ee.min(),new Map,new it(be),a,u);await BI(i,h),i.du=i.du.remove(o),i.Au.delete(e),W_(i)}else await zg(i.localStore,e,!1).then(()=>Ug(i,e,n)).catch(tl)}async function e5(t,e){const n=Pe(t),i=e.batch.batchId;try{const r=await a3(n.localStore,e);HI(n,i,null),UI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await hc(n,r)}catch(r){await tl(r)}}async function t5(t,e,n){const i=Pe(t);try{const r=await function(a,u){const h=Pe(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(Fe(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);HI(i,e,n),UI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await hc(i,r)}catch(r){await tl(r)}}function UI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function HI(t,e,n){const i=Pe(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Ug(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||WI(t,i)})}function WI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(D_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),W_(t))}function q1(t,e,n){for(const i of n)i instanceof jI?(t.Ru.addReference(i.key,e),n5(t,i)):i instanceof zI?(re(H_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||WI(t,i.key)):_e(19791,{wu:i})}function n5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(re(H_,"New document in limbo: "+n),t.Eu.add(i),W_(t))}function W_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new fe(Ge.fromString(e)),i=t.fu.next();t.Au.set(i,new $3(n)),t.du=t.du.insert(n,i),LI(t.remoteStore,new zr(vi(C_(n.path)),i,"TargetPurposeLimboResolution",Cf.ce))}}async function hc(t,e,n){const i=Pe(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=M_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Pe(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,_=>K.forEach(_.Es,T=>m.persistence.referenceDelegate.addReference(g,_.targetId,T)).next(()=>K.forEach(_.ds,T=>m.persistence.referenceDelegate.removeReference(g,_.targetId,T)))))}catch(g){if(!nl(g))throw g;re(O_,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const T=m.Ms.get(_),k=T.snapshotVersion,b=T.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(_,b)}}}(i.localStore,o))}async function i5(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){re(H_,"User change. New user:",e.toKey());const i=await AI(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new he(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await hc(n,i.Ls)}}function r5(t,e){const n=Pe(t),i=n.Au.get(e);if(i&&i.hu)return Re().add(i.key);{let r=Re();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function $I(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J3.bind(null,e),e.Pu.H_=F3.bind(null,e.eventManager),e.Pu.yu=B3.bind(null,e.eventManager),e}function s5(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t5.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return o3(this.persistence,new i3,e.initialUser,this.serializer)}Cu(e){return new CI(N_.mi,this.serializer)}Du(e){return new f3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class o5 extends zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof Vd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new U4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new CI(i=>Vd.mi(i,n),this.serializer)}}class Hg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=i5.bind(null,this.syncEngine),await O3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new V3}()}createDatastore(e){const n=Df(e.databaseInfo.databaseId),i=function(o){return new _3(o)}(e.databaseInfo);return function(o,a,u,h){return new x3(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new P3(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>$1(this.syncEngine,n,0),function(){return z1.v()?new z1:new p3}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new q3(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Pe(r);re(ao,"RemoteStore shutting down."),o.Ea.add(5),await cc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hg.provider={build:()=>new Hg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class l5{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ht.UNAUTHENTICATED,this.clientId=w_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{re(hs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(re(hs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=B_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function nm(t,e){t.asyncQueue.verifyOperationInProgress(),re(hs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await AI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function G1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await u5(t);re(hs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>B1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>B1(e.remoteStore,r)),t._onlineComponents=e}async function u5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(hs,"Using user provided OfflineComponentProvider");try{await nm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ba("Error using user provided cache. Falling back to memory cache: "+n),await nm(t,new zd)}}else re(hs,"Using default OfflineComponentProvider"),await nm(t,new o5(void 0));return t._offlineComponents}async function qI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(hs,"Using user provided OnlineComponentProvider"),await G1(t,t._uninitializedComponentsProvider._online)):(re(hs,"Using default OnlineComponentProvider"),await G1(t,new Hg))),t._onlineComponents}function c5(t){return qI(t).then(e=>e.syncEngine)}async function Z1(t){const e=await qI(t),n=e.eventManager;return n.onListen=G3.bind(null,e.syncEngine),n.onUnlisten=Q3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Z3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Y3.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firestore.googleapis.com",Q1=!0;class Y1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZI,this.ssl=Q1}else this.host=e.host,this.ssl=e.ssl??Q1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=II;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F4)throw new he(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new fV;switch(i.type){case"firstParty":return new yV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=K1.get(n);i&&(re("ComponentProvider","Removing Datastore"),K1.delete(n),i.terminate())}(this),Promise.resolve()}}function h5(t,e,n,i={}){var f;t=Ea(t,zf);const r=Xa(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(ES(`https://${u}`),PS("Firestore",!0)),o.host!==ZI&&o.host!==u&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!ro(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Ht.MOCK_USER;else{m=FO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new he(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ht(_)}t._authCredentials=new pV(new jS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ff(this.firestore,e,this._query)}}class xt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(ac(n,xt._jsonSchema))return new xt(e,i||null,new fe(Ge.fromString(n.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:_t("string",xt._jsonSchemaVersion),referencePath:_t("string")};class es extends Ff{constructor(e,n,i){super(e,n,C_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new fe(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function im(t,e,...n){if(t=xn(t),zS("collection","path",e),t instanceof zf){const i=Ge.fromString(e,...n);return c1(i),new es(t,null,i)}{if(!(t instanceof xt||t instanceof es))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ge.fromString(e,...n));return c1(i),new es(t.firestore,null,i)}}function gu(t,e,...n){if(t=xn(t),arguments.length===1&&(e=w_.newId()),zS("doc","path",e),t instanceof zf){const i=Ge.fromString(e,...n);return u1(i),new xt(t,null,new fe(i))}{if(!(t instanceof xt||t instanceof es))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ge.fromString(e,...n));return u1(i),new xt(t.firestore,t instanceof es?t.converter:null,new fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="AsyncQueue";class J1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bI(this,"async_queue_retry"),this._c=()=>{const i=tm();i&&re(X1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=tm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=tm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Qs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nl(e))throw e;re(X1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",eT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=F_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&_e(47125,{Pc:eT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function eT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Fd extends zf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new J1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J1(e),this._firestoreClient=void 0,await e}}}function d5(t,e){const n=typeof t=="object"?t:AS(),i=typeof t=="string"?t:bd,r=__(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=jO("firestore");o&&h5(r,...o)}return r}function KI(t){if(t._terminated)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||f5(t),t._firestoreClient}function f5(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new MV(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,GI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new l5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Dt.fromBase64String(e))}catch(n){throw new he(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vn(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ac(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:_t("string",Vn._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(ac(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:_t("string",Ti._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ac(e,xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new xi(e.vectorValues);throw new he(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xi._jsonSchemaVersion="firestore/vectorValue/1.0",xi._jsonSchema={type:_t("string",xi._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=/^__.*__$/;class m5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,n,this.fieldTransforms):new lc(e,this.data,n,this.fieldTransforms)}}function YI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:t})}}class q_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new q_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(YI(this.Ac)&&p5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class g5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Df(e)}Cc(e,n,i,r=!1){return new q_({Ac:e,methodName:n,Dc:i,path:Nt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function y5(t){const e=t._freezeSettings(),n=Df(t._databaseId);return new g5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _5(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);tC("Data must be an object, but it was:",a,i);const u=JI(i,a);let h,f;if(o.merge)h=new Xn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=v5(e,g,n);if(!a.contains(_))throw new he(X.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);T5(m,_)||m.push(_)}h=new Xn(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new m5(new Dn(u),h,f)}function XI(t,e){if(eC(t=xn(t)))return tC("Unsupported field value:",e,t),JI(t,e);if(t instanceof QI)return function(i,r){if(!YI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=XI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=xn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return r4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ze.fromDate(i);return{timestampValue:Dd(r.serializer,o)}}if(i instanceof Ze){const o=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dd(r.serializer,o)}}if(i instanceof Ti)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vn)return{bytesValue:vI(r.serializer,i._byteString)};if(i instanceof xt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:R_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof xi)return function(a,u){return{mapValue:{fields:{[ZS]:{stringValue:KS},[Rd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return A_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${T_(i)}`)}(t,e)}function JI(t,e){const n={};return US(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(i,r)=>{const o=XI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function eC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof Ti||t instanceof Vn||t instanceof xt||t instanceof QI||t instanceof xi)}function tC(t,e,n){if(!eC(n)||!FS(n)){const i=T_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function v5(t,e,n){if((e=xn(e))instanceof $_)return e._internalPath;if(typeof e=="string")return nC(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const w5=new RegExp("[~\\*/\\[\\]]");function nC(t,e,n){if(e.search(w5)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $_(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new he(X.INVALID_ARGUMENT,u+t+h)}function T5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x5 extends iC{data(){return super.data()}}function rC(t,e){return typeof e=="string"?nC(t,e):e instanceof $_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P5{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return go(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Rd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>lt(a.doubleValue));return new xi(n)}convertGeoPoint(e){return new Ti(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=kf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=as(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ge.fromString(e);Fe(SI(i),9688,{name:e});const r=new $u(i.get(1),i.get(3)),o=new fe(i.popFirst(5));return r.isEqual(n)||rr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Ql{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ys extends iC{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(rC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ys._jsonSchema={type:_t("string",Ys._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class Uh extends Ys{data(e={}){return super.data(e)}}class Sa{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ql(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Uh(this._firestore,this._userDataWriter,i.key,i,new Ql(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new Uh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ql(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Uh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ql(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:I5(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=w_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function I5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}Sa._jsonSchemaVersion="firestore/querySnapshot/1.0",Sa._jsonSchema={type:_t("string",Sa._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class sC extends P5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function yu(t,e,n){t=Ea(t,xt);const i=Ea(t.firestore,Fd),r=S5(t.converter,e,n);return C5(i,[_5(y5(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Yi.none())])}function rm(t,...e){var h,f,m;t=xn(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||tT(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tT(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof xt)a=Ea(t.firestore,Fd),u=C_(t._key.path),o={next:g=>{e[i]&&e[i](A5(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=Ea(t,Ff);a=Ea(g.firestore,Fd),u=g._query;const _=new sC(a);o={next:T=>{e[i]&&e[i](new Sa(a,_,g,T))},error:e[i+1],complete:e[i+2]},E5(t._query)}return function(_,T,k,b){const z=new a5(b),C=new U3(T,z,k);return _.asyncQueue.enqueueAndForget(async()=>j3(await Z1(_),C)),()=>{z.Nu(),_.asyncQueue.enqueueAndForget(async()=>z3(await Z1(_),C))}}(KI(a),u,r,o)}function C5(t,e){return function(i,r){const o=new Qs;return i.asyncQueue.enqueueAndForget(async()=>X3(await c5(i),r,o)),o.promise}(KI(t),e)}function A5(t,e,n){const i=n.docs.get(e._key),r=new sC(t);return new Ys(t,r,e._key,i,new Ql(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){el=r})(Ja),Fa(new so("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Fd(new mV(i.getProvider("auth-internal")),new _V(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new he(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $u(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Xr(s1,o1,e),Xr(s1,o1,"esm2020")})();function oC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const k5=oC,aC=new sc("auth","Firebase",oC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new g_("@firebase/auth");function b5(t,...e){Ud.logLevel<=ke.WARN&&Ud.warn(`Auth (${Ja}): ${t}`,...e)}function Hh(t,...e){Ud.logLevel<=ke.ERROR&&Ud.error(`Auth (${Ja}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,...e){throw G_(t,...e)}function Ei(t,...e){return G_(t,...e)}function lC(t,e,n){const i={...k5(),[e]:n};return new sc("auth","Firebase",i).create(e,{appName:t.name})}function ts(t){return lC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return aC.create(t,...e)}function ve(t,e,...n){if(!t)throw G_(e,...n)}function qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hh(e),new Error(e)}function ar(t,e){t||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function R5(){return nT()==="http:"||nT()==="https:"}function nT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R5()||qO()||"connection"in navigator)?navigator.onLine:!0}function N5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=HO()||GO()}get(){return L5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D5=new dc(3e4,6e4);function Bf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function rl(t,e,n,i,r={}){return cC(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=oc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return $O()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Xa(t.emulatorConfig.host)&&(f.credentials="include"),uC.fetch()(await dC(t,t.config.apiHost,n,u),f)})}async function cC(t,e,n){t._canInitEmulator=!1;const i={...M5,...e};try{const r=new V5(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Th(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Th(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Th(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Th(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw lC(t,m,f);or(t,m)}}catch(r){if(r instanceof cr)throw r;or(t,"network-request-failed",{message:String(r)})}}async function hC(t,e,n,i,r={}){const o=await rl(t,e,n,i,r);return"mfaPendingCredential"in o&&or(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function dC(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?Z_(t.config,r):`${t.config.apiScheme}://${r}`;return O5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class V5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),D5.get())})}}function Th(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ei(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j5(t,e){return rl(t,"POST","/v1/accounts:delete",e)}async function Hd(t,e){return rl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z5(t,e=!1){const n=xn(t),i=await n.getIdToken(e),r=K_(i);ve(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:_u(sm(r.auth_time)),issuedAtTime:_u(sm(r.iat)),expirationTime:_u(sm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function sm(t){return Number(t)*1e3}function K_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const r=vS(n);return r?JSON.parse(r):(Hh("Failed to decode base64 JWT payload"),null)}catch(r){return Hh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function iT(t){const e=K_(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof cr&&F5(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function F5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_u(this.lastLoginAt),this.creationTime=_u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Ku(t,Hd(e,{idToken:n}));ve(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?fC(r.providerUserInfo):[],a=H5(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new $g(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function U5(t){const e=xn(t);await Wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function H5(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function fC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t,e){const n=await cC(t,{},async()=>{const i=oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await dC(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&Xa(t.emulatorConfig.host)&&(h.credentials="include"),uC.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $5(t,e){return rl(t,"POST","/v2/accounts:revokeToken",Bf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=iT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await W5(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Ia;return i&&(ve(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ve(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ve(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new B5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new $g(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ku(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return z5(this,e)}reload(){return U5(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Wd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(ts(this.auth));const e=await this.getIdToken();return await Ku(this,j5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:T,providerData:k,stsTokenManager:b}=n;ve(g&&b,e,"internal-error");const z=Ia.fromJSON(this.name,b);ve(typeof g=="string",e,"internal-error"),Er(i,e.name),Er(r,e.name),ve(typeof _=="boolean",e,"internal-error"),ve(typeof T=="boolean",e,"internal-error"),Er(o,e.name),Er(a,e.name),Er(u,e.name),Er(h,e.name),Er(f,e.name),Er(m,e.name);const C=new Jn({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:z,createdAt:f,lastLoginAt:m});return k&&Array.isArray(k)&&(C.providerData=k.map(P=>({...P}))),h&&(C._redirectEventId=h),C}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ia;r.updateFromServerResponse(n);const o=new Jn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Wd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ve(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?fC(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Ia;u.updateFromIdToken(i);const h=new Jn({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new $g(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=new Map;function Gi(t){ar(t instanceof Function,"Expected a class definition");let e=rT.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pC.type="NONE";const sT=pC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ca{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Wh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Wh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hd(this.auth,{idToken:e}).catch(()=>{});return n?Jn._fromGetAccountInfoResponse(this.auth,n,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ca(Gi(sT),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Gi(sT);const a=Wh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await Hd(e,{idToken:m}).catch(()=>{});if(!_)break;g=await Jn._fromGetAccountInfoResponse(e,_,m)}else g=Jn._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ca(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ca(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_C(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wC(e))return"Blackberry";if(TC(e))return"Webos";if(gC(e))return"Safari";if((e.includes("chrome/")||yC(e))&&!e.includes("edge/"))return"Chrome";if(vC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function mC(t=Gt()){return/firefox\//i.test(t)}function gC(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yC(t=Gt()){return/crios\//i.test(t)}function _C(t=Gt()){return/iemobile/i.test(t)}function vC(t=Gt()){return/android/i.test(t)}function wC(t=Gt()){return/blackberry/i.test(t)}function TC(t=Gt()){return/webos/i.test(t)}function Q_(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function q5(t=Gt()){var e;return Q_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function G5(){return ZO()&&document.documentMode===10}function xC(t=Gt()){return Q_(t)||vC(t)||TC(t)||wC(t)||/windows phone/i.test(t)||_C(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e=[]){let n;switch(t){case"Browser":n=oT(Gt());break;case"Worker":n=`${oT(Gt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ja}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(t,e={}){return rl(t,"GET","/v2/passwordPolicy",Bf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=6;class Y5{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Q5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aT(this),this.idTokenSubscription=new aT(this),this.beforeStateQueue=new Z5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hd(this,{idToken:e}),i=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(ts(this));const n=e?xn(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K5(this),n=new Y5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await $5(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gi(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&b5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Uf(t){return xn(t)}class aT{constructor(e){this.auth=e,this.observer=null,this.addObserver=nD(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function J5(t){Y_=t}function ej(t){return Y_.loadJS(t)}function tj(){return Y_.gapiScript}function nj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t,e){const n=__(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(ro(o,e??{}))return r;or(r,"already-initialized")}return n.initialize({options:e})}function rj(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function sj(t,e,n){const i=Uf(t);ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=PC(e),{host:a,port:u}=oj(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ve(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ve(ro(f,i.config.emulator)&&ro(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,Xa(a)?(ES(`${o}//${a}${h}`),PS("Auth",!0)):aj()}function PC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oj(t){const e=PC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:lT(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:lT(a)}}}function lT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t,e){return hC(t,"POST","/v1/accounts:signInWithIdp",Bf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="http://localhost";class lo extends SC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new lo(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Aa(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Aa(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Aa(e,n)}buildRequest(){const e={requestUri:lj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends IC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends fc{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return lo._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Lr.credential(n,i)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends fc{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends fc{constructor(){super("twitter.com")}static credential(e,n){return lo._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Mr.credential(n,i)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e){return hC(t,"POST","/v1/accounts:signUp",Bf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Jn._fromIdTokenResponse(e,i,r),a=uT(i);return new ds({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=uT(i);return new ds({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function uT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cj(t){var r;if(Yn(t.app))return Promise.reject(ts(t));const e=Uf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new ds({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await uj(e,{returnSecureToken:!0}),i=await ds._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends cr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,$d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new $d(e,n,i,r)}}function CC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?$d._fromErrorAndOperation(t,o,e,i):o})}async function hj(t,e,n=!1){const i=await Ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ds._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e,n=!1){const{auth:i}=t;if(Yn(i.app))return Promise.reject(ts(i));const r="reauthenticate";try{const o=await Ku(t,CC(i,r,e,t),n);ve(o.idToken,i,"internal-error");const a=K_(o.idToken);ve(a,i,"internal-error");const{sub:u}=a;return ve(t.uid===u,i,"user-mismatch"),ds._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&or(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(t,e,n=!1){if(Yn(t.app))return Promise.reject(ts(t));const i="signIn",r=await CC(t,i,e),o=await ds._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function pj(t,e,n,i){return xn(t).onIdTokenChanged(e,n,i)}function mj(t,e,n){return xn(t).beforeAuthStateChanged(e,n)}function gj(t,e,n,i){return xn(t).onAuthStateChanged(e,n,i)}const qd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qd,"1"),this.storage.removeItem(qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=1e3,_j=10;class kC extends AC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);G5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,_j):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},yj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kC.type="LOCAL";const vj=kC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC extends AC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bC.type="SESSION";const RC=bC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Hf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await wj(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=X_("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function xj(t){Pi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function Ej(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Pj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Sj(){return LC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="firebaseLocalStorageDb",Ij=1,Gd="firebaseLocalStorage",MC="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wf(t,e){return t.transaction([Gd],e?"readwrite":"readonly").objectStore(Gd)}function Cj(){const t=indexedDB.deleteDatabase(NC);return new pc(t).toPromise()}function qg(){const t=indexedDB.open(NC,Ij);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Gd,{keyPath:MC})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Gd)?e(i):(i.close(),await Cj(),e(await qg()))})})}async function cT(t,e,n){const i=Wf(t,!0).put({[MC]:e,value:n});return new pc(i).toPromise()}async function Aj(t,e){const n=Wf(t,!1).get(e),i=await new pc(n).toPromise();return i===void 0?null:i.value}function hT(t,e){const n=Wf(t,!0).delete(e);return new pc(n).toPromise()}const kj=800,bj=3;class OC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>bj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(Sj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Ej(),!this.activeServiceWorker)return;this.sender=new Tj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Pj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qg();return await cT(e,qd,"1"),await hT(e,qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>cT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Aj(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Wf(r,!1).getAll();return new pc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OC.type="LOCAL";const Rj=OC;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t,e){return e?Gi(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends SC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Aa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Aa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Aa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Nj(t){return fj(t.auth,new J_(t),t.bypassAuthState)}function Mj(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),dj(n,new J_(t),t.bypassAuthState)}async function Oj(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),hj(n,new J_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nj;case"linkViaPopup":case"linkViaRedirect":return Oj;case"reauthViaPopup":case"reauthViaRedirect":return Mj;default:or(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=new dc(2e3,1e4);class ga extends DC{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,ga.currentPopupAction&&ga.currentPopupAction.cancel(),ga.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=X_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ga.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Dj.get())};e()}}ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="pendingRedirect",$h=new Map;class jj extends DC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$h.get(this.auth._key());if(!e){try{const i=await zj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$h.set(this.auth._key(),e)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zj(t,e){const n=Uj(e),i=Bj(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Fj(t,e){$h.set(t._key(),e)}function Bj(t){return Gi(t._redirectPersistence)}function Uj(t){return Wh(Vj,t.config.apiKey,t.name)}async function Hj(t,e,n=!1){if(Yn(t.app))return Promise.reject(ts(t));const i=Uf(t),r=Lj(i,e),a=await new jj(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=10*60*1e3;class $j{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!VC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ei(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wj&&this.cachedEventUids.clear(),this.cachedEventUids.has(dT(e))}saveEventToCache(e){this.cachedEventUids.add(dT(e)),this.lastProcessedEventTime=Date.now()}}function dT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t,e={}){return rl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kj=/^https?/;async function Qj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Gj(t);for(const n of e)try{if(Yj(n))return}catch{}or(t,"unauthorized-domain")}function Yj(t){const e=Wg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Kj.test(n))return!1;if(Zj.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=new dc(3e4,6e4);function fT(){const t=Pi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Jj(t){return new Promise((e,n)=>{var r,o,a;function i(){fT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fT(),n(Ei(t,"network-request-failed"))},timeout:Xj.get()})}if((o=(r=Pi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Pi().gapi)!=null&&a.load)i();else{const u=nj("iframefcb");return Pi()[u]=()=>{gapi.load?i():n(Ei(t,"network-request-failed"))},ej(`${tj()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw qh=null,e})}let qh=null;function ez(t){return qh=qh||Jj(t),qh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=new dc(5e3,15e3),nz="__/auth/iframe",iz="emulator/auth/iframe",rz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oz(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Z_(e,iz):`https://${t.config.authDomain}/${nz}`,i={apiKey:e.apiKey,appName:t.name,v:Ja},r=sz.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${oc(i).slice(1)}`}async function az(t){const e=await ez(t),n=Pi().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:oz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rz,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Ei(t,"network-request-failed"),u=Pi().setTimeout(()=>{o(a)},tz.get());function h(){Pi().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uz=500,cz=600,hz="_blank",dz="http://localhost";class pT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fz(t,e,n,i=uz,r=cz){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...lz,width:i.toString(),height:r.toString(),top:o,left:a},f=Gt().toLowerCase();n&&(u=yC(f)?hz:n),mC(f)&&(e=e||dz,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[T,k])=>`${_}${T}=${k},`,"");if(q5(f)&&u!=="_self")return pz(e||"",u),new pT(null);const g=window.open(e||"",u,m);ve(g,t,"popup-blocked");try{g.focus()}catch{}return new pT(g)}function pz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz="__/auth/handler",gz="emulator/auth/handler",yz=encodeURIComponent("fac");async function mT(t,e,n,i,r,o){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ja,eventId:r};if(e instanceof IC){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",tD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof fc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${yz}=${encodeURIComponent(h)}`:"";return`${_z(t)}?${oc(u).slice(1)}${f}`}function _z({config:t}){return t.emulator?Z_(t,gz):`https://${t.authDomain}/${mz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="webStorageSupport";class vz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RC,this._completeRedirectFn=Hj,this._overrideRedirectResult=Fj}async _openPopup(e,n,i,r){var a;ar((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await mT(e,n,i,Wg(),r);return fz(e,o,X_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await mT(e,n,i,Wg(),r);return xj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(ar(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await az(e),i=new $j(e);return n.register("authEvent",r=>(ve(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(om,{type:om},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[om];o!==void 0&&n(!!o),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Qj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xC()||gC()||Q_()}}const wz=vz;var gT="@firebase/auth",yT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ez(t){Fa(new so("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ve(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EC(t)},f=new X5(i,r,o,h);return rj(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Fa(new so("auth-internal",e=>{const n=Uf(e.getProvider("auth").getImmediate());return(i=>new Tz(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(gT,yT,xz(t)),Xr(gT,yT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz=5*60,Sz=xS("authIdTokenMaxAge")||Pz;let _T=null;const Iz=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Sz)return;const r=n==null?void 0:n.token;_T!==r&&(_T=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Cz(t=AS()){const e=__(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ij(t,{popupRedirectResolver:wz,persistence:[Rj,vj,RC]}),i=xS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=Iz(o.toString());mj(n,a,()=>a(n.currentUser)),pj(n,u=>a(u))}}const r=wS("auth");return r&&sj(n,`http://${r}`),n}function Az(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}J5({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Ei("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",Az().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ez("Browser");var kz="firebase",bz="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xr(kz,bz,"app");const Rz={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},jC=CS(Rz),Or=d5(jC),vT=Cz(jC),Gg={palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},Lz="vysocany",zC=Gg[Lz].center,FC=15,Nz=13,Mz=18,wT={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},Ga=["red","blue"],Oz={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},TT=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],Yl=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function ev(t){var e;return((e=Oz[t.size])==null?void 0:e.points)||100}function Dz(t,e,n=8e-4){const i=[];for(let o=0;o<24;o++){const a=o/24*2*Math.PI;i.push([t+n*Math.cos(a),e+n*1.6*Math.sin(a)])}return i}function Vz(t){const e={};return Ga.forEach(n=>e[n]=[]),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]){const i=n.size==="large"?.002:n.size==="medium"?.0015:n.size==="small"?.0012:.001;e[n.capturedBy].push({polygon:Dz(n.location[0],n.location[1],i),points:[n]})}}),e}function Jo(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function BC(t){const e={};return Ga.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=ev(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const UC=j.createContext(null),Pr={player:"streetart-ctf-player",captures:"streetart-ctf-captures"},am="streetart-captures",jz="streetart-players",zz="streetart-teams",ct={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function lm(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function um(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function Fz({children:t}){const[e,n]=j.useState(null),[i,r]=j.useState(!0),[o,a]=j.useState(()=>lm(Pr.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]})),[u,h]=j.useState(()=>{const W=lm(Pr.captures,{});return Yl.map(te=>({...te,capturedBy:W[te.id]||null}))}),[f,m]=j.useState(null),[g,_]=j.useState(!1),[T,k]=j.useState(null);j.useEffect(()=>{const W=gj(vT,te=>{te?(n(te),a(Q=>({...Q,id:te.uid}))):cj(vT).catch(Q=>{console.log("Auth not available, using local mode")})});return()=>W()},[]);const[b,z]=j.useState(null),C=j.useRef({});j.useEffect(()=>{let W=!0;const te=im(Or,am),Q=rm(te,ee=>{const ae={},me={};ee.forEach(ce=>{const pe=ce.data();pe.capturedBy&&(ae[ce.id]=pe.capturedBy,me[ce.id]=pe)}),W||ee.docChanges().forEach(ce=>{if(ce.type==="added"||ce.type==="modified"){const pe=ce.doc.data(),ue=C.current[ce.doc.id];if(pe.capturedBy&&ue!==pe.capturedBy){const Qe=Yl.find(Vt=>Vt.id===ce.doc.id);Qe&&(z({artName:Qe.name,team:pe.capturedBy,playerName:pe.playerName||"Someone",isRecapture:pe.isRecapture||!1,timestamp:Date.now()}),setTimeout(()=>z(null),4e3))}}}),W=!1,C.current=ae,h(Yl.map(ce=>({...ce,capturedBy:ae[ce.id]||null}))),um(Pr.captures,ae),r(!0),console.log("Firebase: Synced",Object.keys(ae).length,"captures")},ee=>{console.warn("Firestore sync error:",ee),r(!1)});return()=>Q()},[]);const[P,S]=j.useState({red:0,blue:0});j.useEffect(()=>{const W=im(Or,zz),te=rm(W,Q=>{const ee={red:0,blue:0};Q.forEach(ae=>{const me=ae.data();(ae.id==="red"||ae.id==="blue")&&(ee[ae.id]=me.score||0)}),S(ee),console.log("Team scores:",ee)});return()=>te()},[]);const[F,G]=j.useState([]);j.useEffect(()=>{const W=im(Or,jz),te=rm(W,Q=>{const ee=[];Q.forEach(ae=>{const me=ae.data();me.name&&me.team&&ee.push({id:ae.id,name:me.name,team:me.team,score:me.score||0,captures:me.captures||0})}),G(ee.sort((ae,me)=>me.score-ae.score)),console.log("Players loaded:",ee.length)});return()=>te()},[]),j.useEffect(()=>{um(Pr.player,o)},[o]);const Z=j.useCallback(async W=>{if(!(!e||!i))try{await yu(gu(Or,am,"global"),W,{merge:!0})}catch(te){console.warn("Failed to sync to Firebase:",te)}},[e,i]),R=BC(u),I={red:Math.max(P.red,R.red),blue:Math.max(P.blue,R.blue)},N=j.useCallback(W=>{Ga.includes(W)&&a(te=>({...te,team:W}))},[]),O=j.useCallback(W=>{a(te=>({...te,name:W}))},[]),D=j.useCallback((W,te,Q=50)=>{let ee=null,ae=1/0;return u.forEach(me=>{const ce=(me.location[0]-W)*111e3,pe=(me.location[1]-te)*111e3*Math.cos(W*Math.PI/180),ue=Math.sqrt(ce*ce+pe*pe);ue<ae&&ue<=Q&&(ae=ue,ee={...me,distance:Math.round(ue)})}),ee},[u]),B=j.useCallback(W=>{if(!o.team)return{success:!1,message:"Join a team first!"};const te=u.find(me=>me.id===W);if(!te)return{success:!1,message:"Art not found"};if(te.capturedBy===o.team)return{success:!1,message:"Already yours!"};if(te.status==="ghost")return{success:!1,message:"This art no longer exists"};const Q=ev(te),ee=te.capturedBy;h(me=>me.map(ce=>ce.id===W?{...ce,capturedBy:o.team}:ce)),a(me=>({...me,score:me.score+Q,capturedArt:[...me.capturedArt.filter(ce=>ce!==W),W]})),Z({[W]:o.team});const ae=lm(Pr.captures,{});return um(Pr.captures,{...ae,[W]:o.team}),{success:!0,art:te,points:Q,previousTeam:ee,message:ee?`Stolen from ${ee}!`:"Captured!"}},[o.team,u,Z]),M=j.useCallback(async(W,te)=>{_(!0);const Q=D(te.lat,te.lng,100);if(!Q){_(!1),m({success:!1,message:"No street art nearby. Get closer!"});return}k({art:Q,photo:W,location:te}),_(!1)},[D]),xe=j.useCallback(()=>{if(!T)return;const W=B(T.art.id);m(W),k(null)},[T,B]),dt=j.useCallback(()=>{k(null),m(null)},[]),Se=j.useCallback(async()=>{if(localStorage.removeItem(Pr.player),localStorage.removeItem(Pr.captures),e&&i)try{await yu(gu(Or,am,"global"),{})}catch(W){console.warn("Failed to reset Firebase:",W)}a({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),h(Yl.map(W=>({...W,capturedBy:null}))),m(null),k(null)},[e,i]),rt={player:o,artPoints:u,teamScores:I,globalTeamScores:P,allPlayers:F,captureNotification:b,scanResult:f,isScanning:g,pendingCapture:T,isOnline:i,teams:Ga,joinTeam:N,setPlayerName:O,captureArt:B,startCapture:M,confirmCapture:xe,cancelCapture:dt,findNearestArt:D,setScanResult:m,resetAll:Se,TEAM_COLORS:ct};return x.jsx(UC.Provider,{value:rt,children:t})}function hr(){const t=j.useContext(UC);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ve=(t,e)=>{const n=j.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>j.createElement("svg",{ref:m,...Bz,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${Uz(t)}`,u].join(" "),...f},[...e.map(([g,_])=>j.createElement(g,_)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=Ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=Ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=Ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=Ve("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=Ve("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=Ve("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=Ve("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=Ve("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=Ve("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=Ve("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=Ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=Ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=Ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=Ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=Ve("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=Ve("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=Ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=Ve("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=Ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=Ve("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=Ve("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=Ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=Ve("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=Ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=Ve("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=Ve("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=Ve("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),lF=51,uF=24;function Zg({size:t=120,className:e=""}){const[n,i]=j.useState(0);j.useEffect(()=>{const a=setInterval(()=>{i(u=>(u+1)%lF)},1e3/uF);return()=>clearInterval(a)},[]);const r=String(n).padStart(5,"0");return x.jsx("img",{src:`/street-art-ctf/animation/frame_${r}.png`,alt:"Loading",width:t,height:t,className:e,style:{imageRendering:"pixelated",objectFit:"contain"}})}const xT=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],ET=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function cF(){const t=xT[Math.floor(Math.random()*xT.length)],e=ET[Math.floor(Math.random()*ET.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function hF(){const t=gf(),{player:e,joinTeam:n,setPlayerName:i}=hr(),[r,o]=j.useState(0),[a,u]=j.useState(e.name||""),[h,f]=j.useState(null);j.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]);const m=()=>{u(cF())},g=()=>{if(r===1&&a.trim()&&i(a.trim()),r===2&&h&&n(h),r===3){t("/map");return}o(r+1)},_=()=>r===1?a.trim().length>=2:r===2?h!==null:!0;return x.jsxs("div",{className:"h-screen bg-[#0a0a0f] flex flex-col overflow-hidden",children:[x.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:[0,1,2,3].map(T=>x.jsx("div",{className:`h-1.5 rounded-sm transition-all duration-300 ${T===r?"bg-white w-8":T<r?"bg-white/60 w-1.5":"bg-white/20 w-1.5"}`},T))}),x.jsxs(Bu,{mode:"wait",children:[r===0&&x.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx(de.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},className:"mb-6",children:x.jsx(Zg,{size:140})}),x.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Street Art CTF"}),x.jsx("p",{className:"text-white/40 max-w-xs mb-8",children:"Scan real street art to capture territory for your team. The city is your battlefield."}),x.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[x.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:x.jsx(HC,{size:20,className:"text-white/70"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium text-sm",children:"Scan Art"}),x.jsx("div",{className:"text-xs text-white/40",children:"Find and capture street art"})]})]}),x.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:x.jsx(Zd,{size:20,className:"text-white/70"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium text-sm",children:"Control Territory"}),x.jsx("div",{className:"text-xs text-white/40",children:"Expand your team's area"})]})]}),x.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:x.jsx(QC,{size:20,className:"text-white/70"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium text-sm",children:"Win Together"}),x.jsx("div",{className:"text-xs text-white/40",children:"Lead your team to victory"})]})]})]})]},"intro"),r===1&&x.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx("h1",{className:"text-2xl font-bold mb-2",children:"What's your name?"}),x.jsx("p",{className:"text-white/40 mb-8",children:"This is how others will see you"}),x.jsx("div",{className:"w-full max-w-xs mb-4",children:x.jsx("input",{type:"text",value:a,onChange:T=>u(T.target.value),placeholder:"Enter your name...",maxLength:20,className:"w-full px-4 py-4 rounded-lg bg-white/5 border border-white/10 text-center text-xl font-medium placeholder:text-white/30 focus:outline-none focus:border-white/30"})}),x.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white/50 hover:bg-white/10 transition-colors",children:[x.jsx(GC,{size:16}),"Generate random name"]})]},"name"),r===2&&x.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Choose your team"}),x.jsx("p",{className:"text-white/40 mb-8",children:"Fight for territory together"}),x.jsxs("div",{className:"flex gap-4 w-full max-w-sm",children:[x.jsxs(de.button,{whileTap:{scale:.95},onClick:()=>f("red"),className:`flex-1 p-5 rounded-lg border-2 transition-all ${h==="red"?"bg-red-500/20 border-red-500":"bg-white/5 border-white/10 hover:border-red-500/50"}`,children:[x.jsx("div",{className:`w-14 h-14 mx-auto rounded-lg flex items-center justify-center mb-3 ${h==="red"?"bg-red-500":"bg-red-500/30"}`,children:x.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90"})}),x.jsx("div",{className:"font-bold text-lg mb-1",style:{color:"#ff6b6b"},children:"Red Team"}),x.jsx("div",{className:"text-xs text-white/40",children:"The Flames"})]}),x.jsxs(de.button,{whileTap:{scale:.95},onClick:()=>f("blue"),className:`flex-1 p-5 rounded-lg border-2 transition-all ${h==="blue"?"bg-blue-500/20 border-blue-500":"bg-white/5 border-white/10 hover:border-blue-500/50"}`,children:[x.jsx("div",{className:`w-14 h-14 mx-auto rounded-lg flex items-center justify-center mb-3 ${h==="blue"?"bg-blue-500":"bg-blue-500/30"}`,children:x.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90"})}),x.jsx("div",{className:"font-bold text-lg mb-1",style:{color:"#4dabf7"},children:"Blue Team"}),x.jsx("div",{className:"text-xs text-white/40",children:"The Waves"})]})]})]},"team"),r===3&&x.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx("div",{className:"mb-4",children:x.jsx(Zg,{size:100})}),x.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome, ",a,"!"]}),x.jsxs("p",{className:"text-white/40 mb-8",children:["You're on Team ",x.jsx("span",{style:{color:h==="red"?"#ff6b6b":"#4dabf7"},className:"font-bold",children:h==="red"?"Red":"Blue"})]}),x.jsxs("div",{className:"w-full max-w-xs space-y-3 mb-8",children:[x.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 text-left",children:[x.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[x.jsx(ZC,{size:14,className:"text-white/50"}),"How to Play"]}),x.jsx("div",{className:"text-xs text-white/40",children:"Find street art around you. Point your camera at it to scan and capture it for your team."})]}),x.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 text-left",children:[x.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[x.jsx(Zd,{size:14,className:"text-white/50"}),"Check the Map"]}),x.jsx("div",{className:"text-xs text-white/40",children:"See which art is nearby and which territories each team controls."})]}),x.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 text-left",children:[x.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[x.jsx(YC,{size:14,className:"text-white/50"}),"Score Points"]}),x.jsx("div",{className:"text-xs text-white/40",children:"Each capture earns points. Big murals = more points. Steal from enemies for bonus!"})]})]})]},"tutorial")]}),x.jsx("div",{className:"p-4 pb-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:x.jsxs(de.button,{whileTap:{scale:.98},onClick:g,disabled:!_(),className:`w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition-all ${_()?"bg-white text-black":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:[r===3?"Let's Go":"Continue",x.jsx(ka,{size:20})]})})]})}const PT=[{color:"red",name:"Red Team"},{color:"blue",name:"Blue Team"}];function dF(){var g;const t=gf(),{player:e,joinTeam:n,teamScores:i,artPoints:r,resetAll:o,isOnline:a}=hr(),u=_=>{n(_)},h={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},f={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},m=Object.values(i).reduce((_,T)=>_+T,0);return x.jsxs(de.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:h,children:[x.jsxs(de.div,{className:"text-center mb-8",variants:f,children:[x.jsx(de.div,{className:"relative inline-block mb-4",animate:{y:[0,-6,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:x.jsx(Zg,{size:100})}),x.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Street Art CTF"}),x.jsx("p",{className:"text-white/40 text-sm max-w-xs mx-auto",children:"Capture the city, one masterpiece at a time"}),x.jsxs("div",{className:`inline-flex items-center gap-1.5 mt-3 px-3 py-1 rounded text-xs ${a?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[a?x.jsx($z,{size:12}):x.jsx(oF,{size:12}),a?"Synced":"Offline"]})]}),e.team?x.jsx(de.div,{className:"mb-8 p-4 rounded-lg relative overflow-hidden bg-white/5 border border-white/10",variants:f,style:{borderColor:ct[e.team].hex+"30"},children:x.jsxs("div",{className:"relative flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-1",children:"Your Team"}),x.jsx("p",{className:"text-xl font-bold",style:{color:ct[e.team].hex},children:(g=PT.find(_=>_.color===e.team))==null?void 0:g.name})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-1",children:"Score"}),x.jsx("p",{className:"text-2xl font-bold text-white",children:e.score})]})]})}):x.jsxs(de.div,{variants:f,className:"mb-8",children:[x.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 mb-6",children:[x.jsx("h3",{className:"font-bold text-white mb-2",children:"Welcome, Street Artist!"}),x.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Explore the city, find street art, and capture it for your team! Point your camera at art pieces and scan to claim them."})]}),x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(QC,{size:16,className:"text-white/40"}),x.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),x.jsx("div",{className:"grid grid-cols-2 gap-3",children:PT.map(({color:_,name:T},k)=>x.jsx(de.button,{onClick:()=>u(_),className:"group relative p-4 rounded-lg text-left bg-white/5 border border-white/10 hover:border-opacity-50 transition-all",style:{borderColor:ct[_].hex+"30"},whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.05},children:x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3",style:{backgroundColor:ct[_].hex+"30"},children:x.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ct[_].hex}})}),x.jsx("p",{className:"font-semibold text-white",children:T}),x.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[x.jsxs("span",{className:"text-xs text-white/40",children:[i[_]," pts"]}),x.jsx("div",{className:"flex-1 h-1 rounded bg-white/10 overflow-hidden",children:x.jsx(de.div,{className:"h-full",style:{backgroundColor:ct[_].hex},initial:{width:0},animate:{width:m>0?`${i[_]/m*100}%`:"50%"},transition:{duration:.8,delay:.3}})})]})]})},_))})]}),x.jsxs(de.div,{className:"space-y-2 mb-8",variants:f,children:[x.jsx("div",{className:"flex items-center gap-2 mb-3",children:x.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Quick Actions"})}),x.jsxs(de.button,{onClick:()=>t("/map"),className:"w-full group p-3 rounded-lg flex items-center gap-3 bg-white/5 border border-white/10 hover:bg-white/[0.08] transition-all",whileTap:{scale:.98},disabled:!e.team,children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-500/20 flex items-center justify-center",children:x.jsx(Zd,{size:20,className:"text-indigo-400"})}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-medium text-white text-sm",children:"Explore Map"}),x.jsx("p",{className:"text-xs text-white/40",children:"View territories"})]}),x.jsx(ka,{size:18,className:"text-white/20"})]}),x.jsxs(de.button,{onClick:()=>t("/scanner"),className:"w-full group p-3 rounded-lg flex items-center gap-3 bg-white/5 border border-white/10 hover:bg-white/[0.08] transition-all",whileTap:{scale:.98},disabled:!e.team,children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:x.jsx(qC,{size:20,className:"text-emerald-400"})}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-medium text-white text-sm",children:"Scan Art"}),x.jsx("p",{className:"text-xs text-white/40",children:"Capture for your team"})]}),x.jsx(ka,{size:18,className:"text-white/20"})]}),x.jsxs(de.button,{onClick:()=>t("/leaderboard"),className:"w-full group p-3 rounded-lg flex items-center gap-3 bg-white/5 border border-white/10 hover:bg-white/[0.08] transition-all",whileTap:{scale:.98},children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center",children:x.jsx($f,{size:20,className:"text-amber-400"})}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-medium text-white text-sm",children:"Leaderboard"}),x.jsx("p",{className:"text-xs text-white/40",children:"See team rankings"})]}),x.jsx(ka,{size:18,className:"text-white/20"})]})]}),x.jsxs(de.div,{variants:f,children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[x.jsx(Kd,{size:14,className:"text-white/40"}),x.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Game Stats"})]}),x.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:r.length,label:"Art Spots"},{value:r.filter(_=>_.capturedBy).length,label:"Captured"},{value:e.capturedArt.length,label:"Your Claims"}].map((_,T)=>x.jsxs(de.div,{className:"p-3 rounded-lg text-center bg-white/5 border border-white/10",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4+T*.1},children:[x.jsx("p",{className:"text-xl font-bold text-white",children:_.value}),x.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:_.label})]},_.label))})]}),x.jsx(de.div,{variants:f,className:"mt-6",children:x.jsxs(de.button,{onClick:o,className:"w-full p-3 rounded-lg flex items-center justify-center gap-2 bg-white/[0.02] border border-white/[0.05] text-white/30 hover:text-white/50 hover:bg-white/[0.04] transition-all text-xs",whileTap:{scale:.98},children:[x.jsx($C,{size:12}),"Reset Game Data"]})})]})}function fF(t,e){const n=j.useRef(e);j.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function pF(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const mF=1;function gF(t){return Object.freeze({__version:mF,map:t})}function tv(t,e){return Object.freeze({...t,...e})}const XC=j.createContext(null),JC=XC.Provider;function nv(){const t=j.useContext(XC);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function yF(t){function e(n,i){const{instance:r,context:o}=t(n).current;return j.useImperativeHandle(i,()=>r),n.children==null?null:Xs.createElement(JC,{value:o},n.children)}return j.forwardRef(e)}function _F(t){function e(n,i){const{instance:r}=t(n).current;return j.useImperativeHandle(i,()=>r),null}return j.forwardRef(e)}function eA(t,e){const n=j.useRef();j.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function iv(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Kg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(OA,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,E,V;return V=function(){p=!1,v&&(E.apply(d,v),v=!1)},E=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(V,l),p=!0)},E}function m(s,l,d){var p=l[1],v=l[0],E=p-v;return s===p&&d?s:((s-v)%E+E)%E+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return T(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function z(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function P(s,l){return s.replace(C,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function F(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function I(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||Z("RequestAnimationFrame")||I,O=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,l,d){if(d&&N===I)s.call(l);else return N.call(window,a(s,l))}function B(s){s&&O.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:T,splitWords:k,setOptions:b,getParamString:z,template:P,isArray:S,indexOf:F,emptyImageUrl:G,requestFn:N,cancelFn:O,requestAnimFrame:D,cancelAnimFrame:B};function xe(){}xe.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(dt(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,V=p._initHooks.length;E<V;E++)p._initHooks[E].call(this)}},l},xe.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},xe.mergeOptions=function(s){return r(this.prototype.options,s),this},xe.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function dt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Se={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var v=arguments.length===1,E=0,V=s.length;E<V;E++)v?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,E=p.length;v<E;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var V=this._listens(s,l,d);if(V!==!1){var H=p[V];this._firingCount&&(H.fn=g,this._events[s]=p=p.slice()),p.splice(V,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var E=0,V=v.length;E<V;E++){var H=v[E],q=H.fn;H.once&&this.off(s,q,H.ctx),q.call(H.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var V in this._eventParents)if(this._eventParents[V].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,E=p.length;v<E;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Se.addEventListener=Se.on,Se.removeEventListener=Se.clearAllEventListeners=Se.off,Se.addOneTimeEventListener=Se.once,Se.fireEvent=Se.fire,Se.hasEventListeners=Se.listens;var rt=xe.extend(Se);function W(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var te=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(s){return this.clone()._add(Q(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Q(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new W(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new W(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(s){s=Q(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=Q(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Q(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function Q(s,l,d){return s instanceof W?s:S(s)?new W(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new W(s.x,s.y):new W(s,l,d)}function ee(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}ee.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof W||typeof s[0]=="number"||"x"in s)l=d=Q(s);else if(s=ae(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof W?s=Q(s):s=ae(s),s instanceof ee?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=ae(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>=l.x&&p.x<=d.x,V=v.y>=l.y&&p.y<=d.y;return E&&V},overlaps:function(s){s=ae(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>l.x&&p.x<d.x,V=v.y>l.y&&p.y<d.y;return E&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return ae(Q(l.x-p,l.y-v),Q(d.x+p,d.y+v))},equals:function(s){return s?(s=ae(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ae(s,l){return!s||s instanceof ee?s:new ee(s,l)}function me(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}me.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof pe)p=s,v=s;else if(s instanceof me){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(ue(s)||ce(s)):this;return!l&&!d?(this._southWest=new pe(p.lat,p.lng),this._northEast=new pe(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new me(new pe(l.lat-p,l.lng-v),new pe(d.lat+p,d.lng+v))},getCenter:function(){return new pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof pe||"lat"in s?s=ue(s):s=ce(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof me?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=ce(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>=l.lat&&p.lat<=d.lat,V=v.lng>=l.lng&&p.lng<=d.lng;return E&&V},overlaps:function(s){s=ce(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>l.lat&&p.lat<d.lat,V=v.lng>l.lng&&p.lng<d.lng;return E&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=ce(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ce(s,l){return s instanceof me?s:new me(s,l)}function pe(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}pe.prototype={equals:function(s,l){if(!s)return!1;s=ue(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return Vt.distance(this,ue(s))},wrap:function(){return Vt.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return ce([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new pe(this.lat,this.lng,this.alt)}};function ue(s,l,d){return s instanceof pe?s:S(s)&&typeof s[0]!="object"?s.length===3?new pe(s[0],s[1],s[2]):s.length===2?new pe(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new pe(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new pe(s,l,d)}var Qe={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new ee(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new pe(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var E=s.getSouthWest(),V=s.getNorthEast(),H=new pe(E.lat-p,E.lng-v),q=new pe(V.lat-p,V.lng-v);return new me(H,q)}},Vt=r({},Qe,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),V=Math.sin((l.lng-s.lng)*d/2),H=E*E+Math.cos(p)*Math.cos(v)*V*V,q=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*q}}),Ci=6378137,ii={R:Ci,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new W(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new pe((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Ci*Math.PI;return new ee([-s,-s],[s,s])}()};function pn(s,l,d,p){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}pn.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new W((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ai(s,l,d,p){return new pn(s,l,d,p)}var _s=r({},Vt,{code:"EPSG:3857",projection:ii,transformation:function(){var s=.5/(Math.PI*ii.R);return Ai(s,.5,-s,.5)}()}),mc=r({},_s,{code:"EPSG:900913"});function gc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function wo(s,l){var d="",p,v,E,V,H,q;for(p=0,E=s.length;p<E;p++){for(H=s[p],v=0,V=H.length;v<V;v++)q=H[v],d+=(v?"L":"M")+q.x+" "+q.y;d+=l?le.svg?"z":"x":""}return d||"M0 0"}var vs=document.documentElement.style,ws="ActiveXObject"in window,Pt=ws&&!document.addEventListener,St="msLaunchUri"in navigator&&!("documentMode"in document),dr=nn("webkit"),yc=nn("android"),ol=nn("android 2")||nn("android 3"),Zf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ts=yc&&nn("Google")&&Zf<537&&!("AudioNode"in window),To=!!window.opera,al=!St&&nn("chrome"),xo=nn("gecko")&&!dr&&!To&&!ws,Kf=!al&&nn("safari"),_c=nn("phantom"),ll="OTransition"in vs,vc=navigator.platform.indexOf("Win")===0,fr=ws&&"transition"in vs,xs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ol,Eo="MozPerspective"in vs,ki=!window.L_DISABLE_3D&&(fr||xs||Eo)&&!ll&&!_c,pr=typeof orientation<"u"||nn("mobile"),Po=pr&&dr,wc=pr&&xs,mr=!window.PointerEvent&&window.MSPointerEvent,ul=!!(window.PointerEvent||mr),It="ontouchstart"in window||!!window.TouchEvent,Tc=!window.L_NO_TOUCH&&(It||ul),Es=pr&&To,Ps=pr&&xo,Qf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yf=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),gr=function(){return!!document.createElement("canvas").getContext}(),cl=!!(document.createElementNS&&gc("svg").createSVGRect),Xf=!!cl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),So=!cl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),xc=navigator.platform.indexOf("Mac")===0,Ec=navigator.platform.indexOf("Linux")===0;function nn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:ws,ielt9:Pt,edge:St,webkit:dr,android:yc,android23:ol,androidStock:Ts,opera:To,chrome:al,gecko:xo,safari:Kf,phantom:_c,opera12:ll,win:vc,ie3d:fr,webkit3d:xs,gecko3d:Eo,any3d:ki,mobile:pr,mobileWebkit:Po,mobileWebkit3d:wc,msPointer:mr,pointer:ul,touch:Tc,touchNative:It,mobileOpera:Es,mobileGecko:Ps,retina:Qf,passiveEvents:Yf,canvas:gr,svg:cl,vml:So,inlineSvg:Xf,mac:xc,linux:Ec},Pc=le.msPointer?"MSPointerDown":"pointerdown",Un=le.msPointer?"MSPointerMove":"pointermove",hl=le.msPointer?"MSPointerUp":"pointerup",dl=le.msPointer?"MSPointerCancel":"pointercancel",Ss={touchstart:Pc,touchmove:Un,touchend:hl,touchcancel:dl},Io={touchstart:fl,touchmove:Sn,touchend:Sn,touchcancel:Sn},bi={},Sc=!1;function Ic(s,l,d){return l==="touchstart"&&Is(),Io[l]?(d=Io[l].bind(this,d),s.addEventListener(Ss[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function Jf(s,l,d){if(!Ss[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ss[l],d,!1)}function Co(s){bi[s.pointerId]=s}function Cc(s){bi[s.pointerId]&&(bi[s.pointerId]=s)}function Ao(s){delete bi[s.pointerId]}function Is(){Sc||(document.addEventListener(Pc,Co,!0),document.addEventListener(Un,Cc,!0),document.addEventListener(hl,Ao,!0),document.addEventListener(dl,Ao,!0),Sc=!0)}function Sn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in bi)l.touches.push(bi[d]);l.changedTouches=[l],s(l)}}function fl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ft(l),Sn(s,l)}function ep(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ac=200;function kc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var V=_l(E);if(!(V.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!V.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var H=Date.now();H-d<=Ac?(p++,p===2&&l(ep(E))):p=1,d=H}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function bc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Cs=ko(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ri=ko(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pl=Ri==="webkitTransition"||Ri==="OTransition"?Ri+"End":"transitionend";function ml(s){return typeof s=="string"?document.getElementById(s):s}function yr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Le(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function Oe(s){var l=s.parentNode;l&&l.removeChild(s)}function Zt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function In(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Cn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function As(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=ri(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function se(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!As(s,l)){var E=ri(s);Li(s,(E?E+" ":"")+l)}}function He(s,l){s.classList!==void 0?s.classList.remove(l):Li(s,T((" "+ri(s)+" ").replace(" "+l+" "," ")))}function Li(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function ri(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function rn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Rc(s,l)}function Rc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function ko(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Ni(s,l,d){var p=l||new W(0,0);s.style[Cs]=(le.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function st(s,l){s._leaflet_pos=l,le.any3d?Ni(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Mi(s){return s._leaflet_pos||new W(0,0)}var Hn,mn,bo;if("onselectstart"in document)Hn=function(){we(window,"selectstart",ft)},mn=function(){Be(window,"selectstart",ft)};else{var _r=ko(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Hn=function(){if(_r){var s=document.documentElement.style;bo=s[_r],s[_r]="none"}},mn=function(){_r&&(document.documentElement.style[_r]=bo,bo=void 0)}}function Ro(){we(window,"dragstart",ft)}function Lo(){Be(window,"dragstart",ft)}var ks,si;function gl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(No(),ks=s,si=s.style.outlineStyle,s.style.outlineStyle="none",we(window,"keydown",No))}function No(){ks&&(ks.style.outlineStyle=si,ks=void 0,si=void 0,Be(window,"keydown",No))}function Lc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function An(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var tp={__proto__:null,TRANSFORM:Cs,TRANSITION:Ri,TRANSITION_END:pl,get:ml,getStyle:yr,create:Le,remove:Oe,empty:Zt,toFront:In,toBack:Cn,hasClass:As,addClass:se,removeClass:He,setClass:Li,getClass:ri,setOpacity:rn,testProp:ko,setTransform:Ni,setPosition:st,getPosition:Mi,get disableTextSelection(){return Hn},get enableTextSelection(){return mn},disableImageDrag:Ro,enableImageDrag:Lo,preventOutline:gl,restoreOutline:No,getSizedParentNode:Lc,getScale:An};function we(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Mo(s,v,l[v],d);else{l=k(l);for(var E=0,V=l.length;E<V;E++)Mo(s,l[E],d,p)}return this}var Kt="_leaflet_events";function Be(s,l,d,p){if(arguments.length===1)vr(s),delete s[Kt];else if(l&&typeof l=="object")for(var v in l)bs(s,v,l[v],d);else if(l=k(l),arguments.length===2)vr(s,function(H){return F(l,H)!==-1});else for(var E=0,V=l.length;E<V;E++)bs(s,l[E],d,p);return this}function vr(s,l){for(var d in s[Kt]){var p=d.split(/\d/)[0];(!l||l(p))&&bs(s,p,null,null,d)}}var Oi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Mo(s,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(s[Kt]&&s[Kt][v])return this;var E=function(H){return d.call(p||s,H||window.event)},V=E;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?E=Ic(s,l,E):le.touch&&l==="dblclick"?E=kc(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Oi[l]||l,E,le.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(H){H=H||window.event,wl(s,H)&&V(H)},s.addEventListener(Oi[l],E,!1)):s.addEventListener(l,V,!1):s.attachEvent("on"+l,E),s[Kt]=s[Kt]||{},s[Kt][v]=E}function bs(s,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var E=s[Kt]&&s[Kt][v];if(!E)return this;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?Jf(s,l,E):le.touch&&l==="dblclick"?bc(s,E):"removeEventListener"in s?s.removeEventListener(Oi[l]||l,E,!1):s.detachEvent("on"+l,E),s[Kt][v]=null}function je(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function yl(s){return Mo(s,"wheel",je),this}function Rs(s){return we(s,"mousedown touchstart dblclick contextmenu",je),s._leaflet_disable_click=!0,this}function ft(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function oi(s){return ft(s),je(s),this}function _l(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Ls(s,l){if(!l)return new W(s.clientX,s.clientY);var d=An(l),p=d.boundingClientRect;return new W((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var ai=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function vl(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ai:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function wl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Ns={__proto__:null,on:we,off:Be,stopPropagation:je,disableScrollPropagation:yl,disableClickPropagation:Rs,preventDefault:ft,stop:oi,getPropagationPath:_l,getMousePosition:Ls,getWheelDelta:vl,isExternalTarget:wl,addListener:we,removeListener:Be},Tl=rt.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Mi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),st(this._el,d),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ie=rt.extend({options:{crs:_s,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ue(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ri&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),we(this._proxy,pl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ue(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),E=s instanceof W?s:this.latLngToContainerPoint(s),V=E.subtract(v).multiplyBy(1-1/p),H=this.containerPointToLatLng(v.add(V));return this.setView(H,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():ce(s);var d=Q(l.paddingTopLeft||l.padding||[0,0]),p=Q(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var E=p.subtract(d).divideBy(2),V=this.project(s.getSouthWest(),v),H=this.project(s.getNorthEast(),v),q=this.unproject(V.add(H).divideBy(2).add(E),v);return{center:q,zoom:v}},fitBounds:function(s,l){if(s=ce(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=Q(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Tl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!le.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),E=this.getSize(),V=this._zoom;s=ue(s),l=l===void 0?V:l;var H=Math.max(E.x,E.y),q=H*this.getZoomScale(V,l),Y=v.distanceTo(p)||1,ie=1.42,ge=ie*ie;function Ce(pt){var Zc=pt?-1:1,bA=pt?q:H,RA=q*q-H*H+Zc*ge*ge*Y*Y,LA=2*bA*ge*Y,op=RA/LA,Iv=Math.sqrt(op*op+1)-op,NA=Iv<1e-9?-18:Math.log(Iv);return NA}function Qt(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function Ct(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function Rn(pt){return Qt(pt)/Ct(pt)}var on=Ce(0);function Go(pt){return H*(Ct(on)/Ct(on+ie*pt))}function IA(pt){return H*(Ct(on)*Rn(on+ie*pt)-Qt(on))/ge}function CA(pt){return 1-Math.pow(1-pt,1.5)}var AA=Date.now(),Pv=(Ce(1)-on)/ie,kA=d.duration?1e3*d.duration:1e3*Pv*.8;function Sv(){var pt=(Date.now()-AA)/kA,Zc=CA(pt)*Pv;pt<=1?(this._flyToFrame=D(Sv,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(IA(Zc)/Y)),V),this.getScaleZoom(H/Go(Zc),V),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Sv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=ce(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,ce(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=Q(l.paddingTopLeft||l.padding||[0,0]),p=Q(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),E=this.project(s),V=this.getPixelBounds(),H=ae([V.min.add(d),V.max.subtract(p)]),q=H.getSize();if(!H.contains(E)){this._enforcingBounds=!0;var Y=E.subtract(H.getCenter()),ie=H.extend(E).getSize().subtract(q);v.x+=Y.x<0?-ie.x:ie.x,v.y+=Y.y<0?-ie.y:ie.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),E=p.subtract(v);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new pe(l,d),v=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var V=this.getBoundsZoom(v);this.setView(p,E.maxZoom?Math.min(V,E.maxZoom):V)}var H={latlng:p,bounds:v,timestamp:s.timestamp};for(var q in s.coords)typeof s.coords[q]=="number"&&(H[q]=s.coords[q]);this.fire("locationfound",H)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Oe(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Le("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new me(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=ce(s),d=Q(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),E=this.getMaxZoom(),V=s.getNorthWest(),H=s.getSouthEast(),q=this.getSize().subtract(d),Y=ae(this.project(H,p),this.project(V,p)).getSize(),ie=le.any3d?this.options.zoomSnap:1,ge=q.x/Y.x,Ce=q.y/Y.y,Qt=l?Math.max(ge,Ce):Math.min(ge,Ce);return p=this.getScaleZoom(Qt,p),ie&&(p=Math.round(p/(ie/100))*(ie/100),p=l?Math.ceil(p/ie)*ie:Math.floor(p/ie)*ie),Math.max(v,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new ee(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ue(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Q(s),l)},layerPointToLatLng:function(s){var l=Q(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ue(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ue(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ce(s))},distance:function(s,l){return this.options.crs.distance(ue(s),ue(l))},containerPointToLayerPoint:function(s){return Q(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Q(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(Q(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(s)))},mouseEventToContainerPoint:function(s){return Ls(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=ml(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");we(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,se(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=yr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(s.markerPane,"leaflet-zoom-hide"),se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){st(this._mapPane,new W(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){st(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Be:we;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,V=!1;E;){if(p=this._targets[h(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){V=!0;break}if(p&&p.listens(l,!0)&&(v&&!wl(E,s)||(d.push(p),v))||E===this._container)break;E=E.parentNode}return!d.length&&!V&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&gl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var E=[],V=0;V<d.length;V++)d[V].listens(l,!0)&&E.push(d[V]);v=E.concat(v)}if(v.length){l==="contextmenu"&&ft(s);var H=v[0],q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=H.getLatLng&&(!H._radius||H._radius<=10);q.containerPoint=Y?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(s),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Y?H.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(V=0;V<v.length;V++)if(v[V].fire(l,q,!0),q.originalEvent._stopped||v[V].options.bubblingMouseEvents===!1&&F(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Mi(this._mapPane)||new W(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return ae([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),E=new ee(p.subtract(v),p.add(v)),V=this._getBoundsOffset(E,d,l);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?s:this.unproject(p.add(V),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new ee(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=ae(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),E=p.max.subtract(s.max),V=this._rebound(v.x,-E.x),H=this._rebound(v.y,-E.y);return new W(V,H)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=le.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){He(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Cs,p=this._proxy.style[d];Ni(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Ni(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(D(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&He(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Oo(s,l){return new Ie(s,l)}var sn=xe.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return se(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),li=function(s){return new sn(s)};Ie.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Le("div",l+"control-container",this._container);function p(v,E){var V=l+v+" "+l+E;s[v+E]=Le("div",V,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Oe(this._controlCorners[s]);Oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Nc=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){b(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return sn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):He(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return He(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Le("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Rs(l),yl(l);var p=this._section=Le("section",s+"-list");d&&(this._map.on("click",this.collapse,this),we(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Le("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),we(v,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){ft(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Le("div",s+"-base",p),this._separator=Le("div",s+"-separator",p),this._overlaysList=Le("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zt(this._baseLayersList),Zt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),we(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(v);var V=s.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(E=0;E<v.length;E++)this._map.hasLayer(v[E])&&this._map.removeLayer(v[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,we(s,"click",ft),this.expand();var l=this;setTimeout(function(){Be(s,"click",ft),l._preventClick=!1})}}),Mc=function(s,l,d){return new Nc(s,l,d)},Di=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Le("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var E=Le("a",d,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Rs(E),we(E,"click",oi),we(E,"click",v,this),we(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";He(this._zoomInButton,l),He(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(se(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(se(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Di,this.addControl(this.zoomControl))});var Oc=function(s){return new Di(s)},xl=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Le("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Le("div",l,d)),s.imperial&&(this._iScale=Le("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),El=function(s){return new xl(s)},Pl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Do=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?Pl+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Le("div","leaflet-control-attribution"),Rs(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new Do().addTo(this)});var Vo=function(s){return new Do(s)};sn.Layers=Nc,sn.Zoom=Di,sn.Scale=xl,sn.Attribution=Do,li.layers=Mc,li.zoom=Oc,li.scale=El,li.attribution=Vo;var gn=xe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(s,l){return s.addHandler(l,this),this};var Dc={Events:Se},ui=le.touch?"touchstart mousedown":"mousedown",Wn=rt.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){b(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(we(this._dragStartTarget,ui,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wn._dragging===this&&this.finishDrag(!0),Be(this._dragStartTarget,ui,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!As(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Wn._dragging===this&&this.finishDrag();return}if(!(Wn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Wn._dragging=this,this._preventOutline&&gl(this._element),Ro(),Hn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Lc(this._element);this._startPoint=new W(l.clientX,l.clientY),this._startPos=Mi(this._element),this._parentScale=An(d);var p=s.type==="mousedown";we(document,p?"mousemove":"touchmove",this._onMove,this),we(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new W(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,ft(s),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),st(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){He(document.body,"leaflet-dragging"),this._lastTarget&&(He(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Be(document,"mousemove touchmove",this._onMove,this),Be(document,"mouseup touchend touchcancel",this._onUp,this),Lo(),mn();var l=this._moved&&this._moving;this._moving=!1,Wn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Sl(s,l,d){var p,v=[1,4,2,8],E,V,H,q,Y,ie,ge,Ce;for(E=0,ie=s.length;E<ie;E++)s[E]._code=$(s[E],l);for(H=0;H<4;H++){for(ge=v[H],p=[],E=0,ie=s.length,V=ie-1;E<ie;V=E++)q=s[E],Y=s[V],q._code&ge?Y._code&ge||(Ce=U(Y,q,ge,l,d),Ce._code=$(Ce,l),p.push(Ce)):(Y._code&ge&&(Ce=U(Y,q,ge,l,d),Ce._code=$(Ce,l),p.push(Ce)),p.push(q));s=p}return s}function Il(s,l){var d,p,v,E,V,H,q,Y,ie;if(!s||s.length===0)throw new Error("latlngs not passed");De(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ge=ue([0,0]),Ce=ce(s),Qt=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());Qt<1700&&(ge=jo(s));var Ct=s.length,Rn=[];for(d=0;d<Ct;d++){var on=ue(s[d]);Rn.push(l.project(ue([on.lat-ge.lat,on.lng-ge.lng])))}for(H=q=Y=0,d=0,p=Ct-1;d<Ct;p=d++)v=Rn[d],E=Rn[p],V=v.y*E.x-E.y*v.x,q+=(v.x+E.x)*V,Y+=(v.y+E.y)*V,H+=V*3;H===0?ie=Rn[0]:ie=[q/H,Y/H];var Go=l.unproject(Q(ie));return ue([Go.lat+ge.lat,Go.lng+ge.lng])}function jo(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var E=ue(s[v]);l+=E.lat,d+=E.lng,p++}return ue([l/p,d/p])}var zo={__proto__:null,clipPolygon:Sl,polygonCenter:Il,centroid:jo};function jt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=wr(s,d),s}function Cl(s,l,d){return Math.sqrt(Te(s,l,d,!0))}function Vc(s,l,d){return Te(s,l,d)}function wr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,c(s,v,l,0,d-1);var E,V=[];for(E=0;E<d;E++)v[E]&&V.push(s[E]);return V}function c(s,l,d,p,v){var E=0,V,H,q;for(H=p+1;H<=v-1;H++)q=Te(s[H],s[p],s[v],!0),q>E&&(V=H,E=q);E>d&&(l[V]=1,c(s,l,d,p,V),c(s,l,d,V,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,E=s.length;p<E;p++)ne(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<E-1&&d.push(s[E-1]),d}var w;function A(s,l,d,p,v){var E=p?w:$(s,d),V=$(l,d),H,q,Y;for(w=V;;){if(!(E|V))return[s,l];if(E&V)return!1;H=E||V,q=U(s,l,H,d,v),Y=$(q,d),H===E?(s=q,E=Y):(l=q,V=Y)}}function U(s,l,d,p,v){var E=l.x-s.x,V=l.y-s.y,H=p.min,q=p.max,Y,ie;return d&8?(Y=s.x+E*(q.y-s.y)/V,ie=q.y):d&4?(Y=s.x+E*(H.y-s.y)/V,ie=H.y):d&2?(Y=q.x,ie=s.y+V*(q.x-s.x)/E):d&1&&(Y=H.x,ie=s.y+V*(H.x-s.x)/E),new W(Y,ie,v)}function $(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ne(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Te(s,l,d,p){var v=l.x,E=l.y,V=d.x-v,H=d.y-E,q=V*V+H*H,Y;return q>0&&(Y=((s.x-v)*V+(s.y-E)*H)/q,Y>1?(v=d.x,E=d.y):Y>0&&(v+=V*Y,E+=H*Y)),V=s.x-v,H=s.y-E,p?V*V+H*H:new W(v,E)}function De(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function ze(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),De(s)}function at(s,l){var d,p,v,E,V,H,q,Y;if(!s||s.length===0)throw new Error("latlngs not passed");De(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ie=ue([0,0]),ge=ce(s),Ce=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());Ce<1700&&(ie=jo(s));var Qt=s.length,Ct=[];for(d=0;d<Qt;d++){var Rn=ue(s[d]);Ct.push(l.project(ue([Rn.lat-ie.lat,Rn.lng-ie.lng])))}for(d=0,p=0;d<Qt-1;d++)p+=Ct[d].distanceTo(Ct[d+1])/2;if(p===0)Y=Ct[0];else for(d=0,E=0;d<Qt-1;d++)if(V=Ct[d],H=Ct[d+1],v=V.distanceTo(H),E+=v,E>p){q=(E-p)/v,Y=[H.x-q*(H.x-V.x),H.y-q*(H.y-V.y)];break}var on=l.unproject(Q(Y));return ue([on.lat+ie.lat,on.lng+ie.lng])}var kn={__proto__:null,simplify:jt,pointToSegmentDistance:Cl,closestPointOnSegment:Vc,clipSegment:A,_getEdgeIntersection:U,_getBitCode:$,_sqClosestPointOnSegment:Te,isFlat:De,_flat:ze,polylineCenter:at},$n={project:function(s){return new W(s.lng,s.lat)},unproject:function(s){return new pe(s.y,s.x)},bounds:new ee([-180,-90],[180,90])},bn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,E=Math.sqrt(1-v*v),V=E*Math.sin(p),H=Math.tan(Math.PI/4-p/2)/Math.pow((1-V)/(1+V),E/2);return p=-d*Math.log(Math.max(H,1e-10)),new W(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),E=Math.exp(-s.y/d),V=Math.PI/2-2*Math.atan(E),H=0,q=.1,Y;H<15&&Math.abs(q)>1e-7;H++)Y=v*Math.sin(V),Y=Math.pow((1-Y)/(1+Y),v/2),q=Math.PI/2-2*Math.atan(E*Y)-V,V+=q;return new pe(V*l,s.x*l/d)}},ci={__proto__:null,LonLat:$n,Mercator:bn,SphericalMercator:ii},Fo=r({},Vt,{code:"EPSG:3395",projection:bn,transformation:function(){var s=.5/(Math.PI*bn.R);return Ai(s,.5,-s,.5)}()}),Bo=r({},Vt,{code:"EPSG:4326",projection:$n,transformation:Ai(1/180,1,-1/180,.5)}),rA=r({},Qe,{projection:$n,transformation:Ai(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Qe.Earth=Vt,Qe.EPSG3395=Fo,Qe.EPSG3857=_s,Qe.EPSG900913=mc,Qe.EPSG4326=Bo,Qe.Simple=rA;var qn=rt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Uo=qn.extend({initialize:function(s,l){b(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),sA=function(s,l){return new Uo(s,l)},Vi=Uo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Uo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Uo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new me;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),oA=function(s,l){return new Vi(s,l)},Ho=xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=Q(p),E=Q(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function aA(s){return new Ho(s)}var Al=Ho.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Al.imagePath!="string"&&(Al.imagePath=this._detectIconPath()),(this.options.imagePath||Al.imagePath)+Ho.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var E=p.exec(d);return E&&E[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Le("div","leaflet-default-icon-path",document.body),l=yr(s,"background-image")||yr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),sv=gn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Wn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&He(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,E=Mi(l._icon),V=d.getPixelBounds(),H=d.getPixelOrigin(),q=ae(V.min._subtract(H).add(v),V.max._subtract(H).subtract(v));if(!q.contains(E)){var Y=Q((Math.max(q.max.x,E.x)-q.max.x)/(V.max.x-q.max.x)-(Math.min(q.min.x,E.x)-q.min.x)/(V.min.x-q.min.x),(Math.max(q.max.y,E.y)-q.max.y)/(V.max.y-q.max.y)-(Math.min(q.min.y,E.y)-q.min.y)/(V.min.y-q.min.y)).multiplyBy(p);d.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),st(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Mi(l._icon),v=l._map.layerPointToLatLng(p);d&&st(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),jc=qn.extend({options:{icon:new Al,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=ue(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ue(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),se(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),E=!1;v!==this._shadow&&(this._removeShadow(),E=!0),v&&(se(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(this._icon,"focus",this._panOnFocus,this),Oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Oe(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&st(this._icon,s),this._shadow&&st(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&rn(this._icon,s),this._shadow&&rn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?Q(l.iconSize):Q(0,0),p=l.iconAnchor?Q(l.iconAnchor):Q(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function lA(s,l){return new jc(s,l)}var Tr=qn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),zc=Tr.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=ue(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ue(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Tr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new ee(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function uA(s,l){return new zc(s,l)}var np=zc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),b(this,l),this._latlng=ue(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new me(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Tr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Vt.distance){var v=Math.PI/180,E=this._mRadius/Vt.R/v,V=d.project([l+E,s]),H=d.project([l-E,s]),q=V.add(H).divideBy(2),Y=d.unproject(q).lat,ie=Math.acos((Math.cos(E*v)-Math.sin(l*v)*Math.sin(Y*v))/(Math.cos(l*v)*Math.cos(Y*v)))/v;(isNaN(ie)||ie===0)&&(ie=E/Math.cos(Math.PI/180*l)),this._point=q.subtract(d.getPixelOrigin()),this._radius=isNaN(ie)?0:q.x-d.project([Y,s-ie]).x,this._radiusY=q.y-V.y}else{var ge=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ge).x}this._updateBounds()}});function cA(s,l,d){return new np(s,l,d)}var ji=Tr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Te,v,E,V=0,H=this._parts.length;V<H;V++)for(var q=this._parts[V],Y=1,ie=q.length;Y<ie;Y++){v=q[Y-1],E=q[Y];var ge=p(s,v,E,!0);ge<l&&(l=ge,d=p(s,v,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return at(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ue(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new me,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return De(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=De(s),p=0,v=s.length;p<v;p++)d?(l[p]=ue(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new W(s,s);this._rawPxBounds&&(this._pxBounds=new ee([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof pe,v=s.length,E,V;if(p){for(V=[],E=0;E<v;E++)V[E]=this._map.latLngToLayerPoint(s[E]),d.extend(V[E]);l.push(V)}else for(E=0;E<v;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,E,V,H,q;for(d=0,v=0,E=this._rings.length;d<E;d++)for(q=this._rings[d],p=0,V=q.length;p<V-1;p++)H=A(q[p],q[p+1],s,p,!0),H&&(l[v]=l[v]||[],l[v].push(H[0]),(H[1]!==q[p+1]||p===V-2)&&(l[v].push(H[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=jt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,E,V,H,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for(H=this._parts[d],p=0,V=H.length,v=V-1;p<V;v=p++)if(!(!l&&p===0)&&Cl(s,H[v],H[p])<=q)return!0;return!1}});function hA(s,l){return new ji(s,l)}ji._flat=ze;var Wo=ji.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Il(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=ji.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof pe&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){ji.prototype._setLatLngs.call(this,s),De(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return De(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new W(l,l);if(s=new ee(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,E;p<v;p++)E=Sl(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,E,V,H,q,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,q=this._parts.length;E<q;E++)for(d=this._parts[E],V=0,Y=d.length,H=Y-1;V<Y;H=V++)p=d[V],v=d[H],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||ji.prototype._containsPoint.call(this,s,!0)}});function dA(s,l){return new Wo(s,l)}var zi=Vi.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var V=Fc(s,E);return V?(V.feature=Hc(s),V.defaultOptions=V.options,this.resetStyle(V),E.onEachFeature&&E.onEachFeature(s,V),this.addLayer(V)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Fc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],E=l&&l.pointToLayer,V=l&&l.coordsToLatLng||ip,H,q,Y,ie;if(!p&&!d)return null;switch(d.type){case"Point":return H=V(p),ov(E,s,H,l);case"MultiPoint":for(Y=0,ie=p.length;Y<ie;Y++)H=V(p[Y]),v.push(ov(E,s,H,l));return new Vi(v);case"LineString":case"MultiLineString":return q=Bc(p,d.type==="LineString"?0:1,V),new ji(q,l);case"Polygon":case"MultiPolygon":return q=Bc(p,d.type==="Polygon"?1:2,V),new Wo(q,l);case"GeometryCollection":for(Y=0,ie=d.geometries.length;Y<ie;Y++){var ge=Fc({geometry:d.geometries[Y],type:"Feature",properties:s.properties},l);ge&&v.push(ge)}return new Vi(v);case"FeatureCollection":for(Y=0,ie=d.features.length;Y<ie;Y++){var Ce=Fc(d.features[Y],l);Ce&&v.push(Ce)}return new Vi(v);default:throw new Error("Invalid GeoJSON object.")}}function ov(s,l,d,p){return s?s(l,d):new jc(d,p&&p.markersInheritOptions&&p)}function ip(s){return new pe(s[1],s[0],s[2])}function Bc(s,l,d){for(var p=[],v=0,E=s.length,V;v<E;v++)V=l?Bc(s[v],l-1,d):(d||ip)(s[v]),p.push(V);return p}function rp(s,l){return s=ue(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function Uc(s,l,d,p){for(var v=[],E=0,V=s.length;E<V;E++)v.push(l?Uc(s[E],De(s[E])?0:l-1,d,p):rp(s[E],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function $o(s,l){return s.feature?r({},s.feature,{geometry:l}):Hc(l)}function Hc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var sp={toGeoJSON:function(s){return $o(this,{type:"Point",coordinates:rp(this.getLatLng(),s)})}};jc.include(sp),np.include(sp),zc.include(sp),ji.include({toGeoJSON:function(s){var l=!De(this._latlngs),d=Uc(this._latlngs,l?1:0,!1,s);return $o(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Wo.include({toGeoJSON:function(s){var l=!De(this._latlngs),d=l&&!De(this._latlngs[0]),p=Uc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),$o(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Uo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),$o(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var E=v.toGeoJSON(s);if(d)p.push(E.geometry);else{var V=Hc(E);V.type==="FeatureCollection"?p.push.apply(p,V.features):p.push(V)}}}),d?$o(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function av(s,l){return new zi(s,l)}var fA=av,Wc=qn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=ce(l),b(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&In(this._image),this},bringToBack:function(){return this._map&&Cn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ce(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Le("img");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ni(this._image,d,l)},_reset:function(){var s=this._image,l=new ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();st(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),pA=function(s,l,d){return new Wc(s,l,d)},lv=Wc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Le("video");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var V=Le("source");V.src=this._url[E],l.appendChild(V)}}});function mA(s,l,d){return new lv(s,l,d)}var uv=Wc.extend({_initImage:function(){var s=this._image=this._url;se(s,"leaflet-image-layer"),this._zoomAnimated&&se(s,"leaflet-zoom-animated"),this.options.className&&se(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function gA(s,l,d){return new uv(s,l,d)}var hi=qn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof pe||S(s))?(this._latlng=ue(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&rn(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(rn(this._container,0),this._removeTimeout=setTimeout(a(Oe,void 0,this._container),200)):Oe(this._container),this.options.interactive&&(He(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ue(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&In(this._container),this},bringToBack:function(){return this._map&&Cn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Vi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=Q(this.options.offset),d=this._getAnchor();this._zoomAnimated?st(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),qn.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(b(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var $c=hi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,hi.prototype.openOn.call(this,s)},onAdd:function(s){hi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Tr||this._source.on("preclick",je))},onRemove:function(s){hi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Tr||this._source.off("preclick",je))},getEvents:function(){var s=hi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Le("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Le("div",s+"-content-wrapper",l);if(this._contentNode=Le("div",s+"-content",d),Rs(l),yl(this._contentNode),we(l,"contextmenu",je),this._tipContainer=Le("div",s+"-tip-container",l),this._tip=Le("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Le("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',we(p,"click",function(v){ft(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,E="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",se(s,E)):He(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();st(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(yr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new W(this._containerLeft,-d-this._containerBottom);v._add(Mi(this._container));var E=s.layerPointToContainerPoint(v),V=Q(this.options.autoPanPadding),H=Q(this.options.autoPanPaddingTopLeft||V),q=Q(this.options.autoPanPaddingBottomRight||V),Y=s.getSize(),ie=0,ge=0;E.x+p+q.x>Y.x&&(ie=E.x+p-Y.x+q.x),E.x-ie-H.x<0&&(ie=E.x-H.x),E.y+d+q.y>Y.y&&(ge=E.y+d-Y.y+q.y),E.y-ge-H.y<0&&(ge=E.y-H.y),(ie||ge)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ie,ge]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),yA=function(s,l){return new $c(s,l)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(s,l,d){return this._initOverlay($c,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),qn.include({bindPopup:function(s,l){return this._popup=this._initOverlay($c,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Vi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){oi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Tr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var qc=hi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){hi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){hi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=hi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Le("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,E=p.latLngToContainerPoint(p.getCenter()),V=p.layerPointToContainerPoint(s),H=this.options.direction,q=v.offsetWidth,Y=v.offsetHeight,ie=Q(this.options.offset),ge=this._getAnchor();H==="top"?(l=q/2,d=Y):H==="bottom"?(l=q/2,d=0):H==="center"?(l=q/2,d=Y/2):H==="right"?(l=0,d=Y/2):H==="left"?(l=q,d=Y/2):V.x<E.x?(H="right",l=0,d=Y/2):(H="left",l=q+(ie.x+ge.x)*2,d=Y/2),s=s.subtract(Q(l,d,!0)).add(ie).add(ge),He(v,"leaflet-tooltip-right"),He(v,"leaflet-tooltip-left"),He(v,"leaflet-tooltip-top"),He(v,"leaflet-tooltip-bottom"),se(v,"leaflet-tooltip-"+H),st(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&rn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_A=function(s,l){return new qc(s,l)};Ie.include({openTooltip:function(s,l,d){return this._initOverlay(qc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),qn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(qc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Vi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(we(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),we(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var cv=Ho.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Zt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=Q(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function vA(s){return new cv(s)}Ho.Default=Al;var kl=qn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Oe(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Cn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof W?s:new W(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,E;p<v;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){rn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var E=Math.min(1,(s-v.loaded)/200);rn(v.el,E),E<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(B(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Oe(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Le("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Oe(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),E=Math.floor(l/2),V=d-1,H=new W(+v,+E);H.z=+V;var q=this._tileCoordsToKey(H),Y=this._tiles[q];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),V>p?this._retainParent(v,E,V,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var E=2*l;E<2*l+2;E++){var V=new W(v,E);V.z=d+1;var H=this._tileCoordsToKey(V),q=this._tiles[H];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);d+1<p&&this._retainChildren(v,E,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var E=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||E)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();le.any3d?Ni(s.el,v,p):st(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new ee(v.subtract(E),v.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),E=v.getCenter(),V=[],H=this.options.keepBuffer,q=new ee(v.getBottomLeft().subtract([H,-H]),v.getTopRight().add([H,-H]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var ie=this._tiles[Y].coords;(ie.z!==this._tileZoom||!q.contains(new W(ie.x,ie.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var ge=v.min.y;ge<=v.max.y;ge++)for(var Ce=v.min.x;Ce<=v.max.x;Ce++){var Qt=new W(Ce,ge);if(Qt.z=this._tileZoom,!!this._isValidTile(Qt)){var Ct=this._tiles[this._tileCoordsToKey(Qt)];Ct?Ct.current=!0:V.push(Qt)}}if(V.sort(function(on,Go){return on.distanceTo(E)-Go.distanceTo(E)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Rn=document.createDocumentFragment();for(Ce=0;Ce<V.length;Ce++)this._addTile(V[Ce],Rn);this._level.el.appendChild(Rn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return ce(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),E=l.unproject(p,s.z),V=l.unproject(v,s.z);return[E,V]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new me(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new W(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Oe(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){se(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,le.ielt9&&this.options.opacity<1&&rn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&D(a(this._tileReady,this,s,null,v)),st(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(rn(d.el,0),B(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(se(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new W(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ee(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function wA(s){return new kl(s)}var qo=kl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&le.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return we(d,"load",a(this._tileOnLoad,this,l,d)),we(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(s,l){le.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=G;var d=this._tiles[s].coords;Oe(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",G),kl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return kl.prototype._tileReady.call(this,s,l,d)}});function hv(s,l){return new qo(s,l)}var dv=qo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=b(this,l);var v=l.detectRetina&&le.retina?2:1,E=this.getTileSize();d.width=E.x*v,d.height=E.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,qo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=ae(d.project(l[0]),d.project(l[1])),v=p.min,E=p.max,V=(this._wmsVersion>=1.3&&this._crs===Bo?[v.y,v.x,E.y,E.x]:[v.x,v.y,E.x,E.y]).join(","),H=qo.prototype.getTileUrl.call(this,s);return H+z(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function TA(s,l){return new dv(s,l)}qo.WMS=dv,hv.wms=TA;var Fi=qn.extend({options:{padding:.1},initialize:function(s){b(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),E=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));le.any3d?Ni(this._container,E,d):st(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ee(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),fv=Fi.extend({options:{tolerance:0},getEvents:function(){var s=Fi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");we(s,"mousemove",this._onMouseMove,this),we(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),we(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Oe(this._container),Be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=le.retina?2:1;st(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Fi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ee,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,E,V=s._parts,H=V.length,q=this._ctx;if(H){for(q.beginPath(),d=0;d<H;d++){for(p=0,v=V[d].length;p<v;p++)E=V[d][p],q[p?"lineTo":"moveTo"](E.x,E.y);l&&q.closePath()}this._fillStroke(q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(He(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(se(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function pv(s){return le.canvas?new fv(s):null}var bl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),xA={_initContainer:function(){this._container=Le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=bl("shape");se(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=bl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Oe(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=bl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=S(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=bl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){In(s._container)},_bringToBack:function(s){Cn(s._container)}},Gc=le.vml?bl:gc,Rl=Fi.extend({_initContainer:function(){this._container=Gc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Oe(this._container),Be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),st(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Gc("path");s.options.className&&se(l,s.options.className),s.options.interactive&&se(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Oe(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,wo(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){In(s._path)},_bringToBack:function(s){Cn(s._path)}});le.vml&&Rl.include(xA);function mv(s){return le.svg||le.vml?new Rl(s):null}Ie.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&pv(s)||mv(s)}});var gv=Wo.extend({initialize:function(s,l){Wo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ce(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function EA(s,l){return new gv(s,l)}Rl.create=Gc,Rl.pointsToPath=wo,zi.geometryToLayer=Fc,zi.coordsToLatLng=ip,zi.coordsToLatLngs=Bc,zi.latLngToCoords=rp,zi.latLngsToCoords=Uc,zi.getFeature=$o,zi.asFeature=Hc,Ie.mergeOptions({boxZoom:!0});var yv=gn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Hn(),Ro(),this._startPoint=this._map.mouseEventToContainerPoint(s),we(document,{contextmenu:oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Le("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ee(this._point,this._startPoint),d=l.getSize();st(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Oe(this._box),He(this._container,"leaflet-crosshair")),mn(),Lo(),Be(document,{contextmenu:oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",yv),Ie.mergeOptions({doubleClickZoom:!0});var _v=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Ie.addInitHook("addHandler","doubleClickZoom",_v),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vv=gn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Wn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){He(this._map._container,"leaflet-grab"),He(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ce(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,E=(p+l+d)%s-l-d,V=Math.abs(v+d)<Math.abs(E+d)?v:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,V=d.easeLinearity,H=v.multiplyBy(V/E),q=H.distanceTo([0,0]),Y=Math.min(d.inertiaMaxSpeed,q),ie=H.multiplyBy(Y/q),ge=Y/(d.inertiaDeceleration*V),Ce=ie.multiplyBy(-ge/2).round();!Ce.x&&!Ce.y?l.fire("moveend"):(Ce=l._limitOffset(Ce,l.options.maxBounds),D(function(){l.panBy(Ce,{duration:ge,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",vv),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wv=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),we(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){we(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=Q(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(Q(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;oi(s)}}});Ie.addInitHook("addHandler","keyboard",wv),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Tv=gn.extend({addHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=vl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),oi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=d?Math.ceil(v/d)*d:v,V=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,V&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+V):s.setZoomAround(this._lastMousePos,l+V))}});Ie.addInitHook("addHandler","scrollWheelZoom",Tv);var PA=600;Ie.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var xv=gn.extend({addHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new W(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(we(document,"touchend",ft),we(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),PA),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Be(document,"touchend",ft),Be(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new W(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Ie.addInitHook("addHandler","tapHold",xv),Ie.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var Ev=gn.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){He(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),ft(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var E=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var V=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(V,this,!0),ft(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",Ev),Ie.BoxZoom=yv,Ie.DoubleClickZoom=_v,Ie.Drag=vv,Ie.Keyboard=wv,Ie.ScrollWheelZoom=Tv,Ie.TapHold=xv,Ie.TouchZoom=Ev,n.Bounds=ee,n.Browser=le,n.CRS=Qe,n.Canvas=fv,n.Circle=np,n.CircleMarker=zc,n.Class=xe,n.Control=sn,n.DivIcon=cv,n.DivOverlay=hi,n.DomEvent=Ns,n.DomUtil=tp,n.Draggable=Wn,n.Evented=rt,n.FeatureGroup=Vi,n.GeoJSON=zi,n.GridLayer=kl,n.Handler=gn,n.Icon=Ho,n.ImageOverlay=Wc,n.LatLng=pe,n.LatLngBounds=me,n.Layer=qn,n.LayerGroup=Uo,n.LineUtil=kn,n.Map=Ie,n.Marker=jc,n.Mixin=Dc,n.Path=Tr,n.Point=W,n.PolyUtil=zo,n.Polygon=Wo,n.Polyline=ji,n.Popup=$c,n.PosAnimation=Tl,n.Projection=ci,n.Rectangle=gv,n.Renderer=Fi,n.SVG=Rl,n.SVGOverlay=uv,n.TileLayer=qo,n.Tooltip=qc,n.Transformation=pn,n.Util=M,n.VideoOverlay=lv,n.bind=a,n.bounds=ae,n.canvas=pv,n.circle=cA,n.circleMarker=uA,n.control=li,n.divIcon=vA,n.extend=r,n.featureGroup=oA,n.geoJSON=av,n.geoJson=fA,n.gridLayer=wA,n.icon=aA,n.imageOverlay=pA,n.latLng=ue,n.latLngBounds=ce,n.layerGroup=sA,n.map=Oo,n.marker=lA,n.point=Q,n.polygon=dA,n.polyline=hA,n.popup=yA,n.rectangle=EA,n.setOptions=b,n.stamp=h,n.svg=mv,n.svgOverlay=gA,n.tileLayer=hv,n.tooltip=_A,n.transformation=Ai,n.version=i,n.videoOverlay=mA;var SA=window.L;n.noConflict=function(){return window.L=SA,this},window.L=n})})(Kg,Kg.exports);var sl=Kg.exports;const tA=ST(sl);function qf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function nA(t,e){return e==null?function(i,r){const o=j.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=j.useRef();o.current||(o.current=t(i,r));const a=j.useRef(i),{instance:u}=o.current;return j.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function iA(t,e){j.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function vF(t){return function(n){const i=nv(),r=t(iv(n,i),i);return fF(i.map,n.attribution),eA(r.current,n.eventHandlers),iA(r.current,i),r}}function wF(t,e){const n=j.useRef();j.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function TF(t){return function(n){const i=nv(),r=t(iv(n,i),i);return eA(r.current,n.eventHandlers),iA(r.current,i),wF(r.current,n),r}}function rv(t,e){const n=nA(t,e),i=TF(n);return yF(i)}function xF(t,e){const n=nA(t,e),i=vF(n);return _F(i)}function EF(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Gf(){return nv().map}function PF(t){const e=Gf();return j.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const Qg=rv(function({center:e,children:n,...i},r){const o=new sl.CircleMarker(e,i);return qf(o,tv(r,{overlayContainer:o}))},pF);function Yg(){return Yg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yg.apply(this,arguments)}function SF({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[_]=j.useState({className:r,id:o,style:u}),[T,k]=j.useState(null);j.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const b=j.useCallback(C=>{if(C!==null&&T===null){const P=new sl.Map(C,m);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),k(gF(P))}},[]);j.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const z=T?Xs.createElement(JC,{value:T},i):a??null;return Xs.createElement("div",Yg({},_,{ref:b}),z)}const IF=j.forwardRef(SF),CF=rv(function({positions:e,...n},i){const r=new sl.Polygon(e,n);return qf(r,tv(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),AF=rv(function({positions:e,...n},i){const r=new sl.Polyline(e,n);return qf(r,tv(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),kF=xF(function({url:e,...n},i){const r=new sl.TileLayer(e,iv(n,i));return qf(r,i)},function(e,n,i){EF(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete tA.Icon.Default.prototype._getIconUrl;tA.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function bF({devMode:t}){const[e,n]=j.useState(FC),[i,r]=j.useState(zC);return PF({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?x.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:x.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[x.jsxs("div",{children:["zoom: ",e]}),x.jsxs("div",{children:["lat: ",i[0]]}),x.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function RF({hood:t}){const e=Gf();return j.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function LF({onShow:t}){const e=Gf(),[n,i]=j.useState(null);if(j.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o){const a=JSON.parse(o);i(a),localStorage.removeItem("streetart-ctf-lastCapture"),a.location&&setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500)}},[e,t]),!n)return null;const r=n.team==="red"?"#ff6b6b":"#4dabf7";return x.jsx(Qg,{center:n.location,radius:30,pathOptions:{color:r,fillColor:r,fillOpacity:.3,weight:3,className:"capture-pulse"}})}function NF(){const t=Gf(),[e,n]=j.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return x.jsx(de.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:x.jsx(de.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:x.jsx(Gz,{size:20,className:"text-white"})})})}function MF({point:t,onClose:e}){const n=t.capturedBy?Jo(t.capturedBy):"#495057",i=ev(t),r=t.status==="ghost";return x.jsx(de.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:x.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${n}40`},children:[x.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:x.jsx(aF,{size:16,className:"text-white/50"})}),x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${n}20`,border:`1px solid ${n}40`},children:r?x.jsx(Yz,{size:20,className:"text-white/30"}):t.capturedBy?x.jsx(iF,{size:20,style:{color:n}}):x.jsx(WC,{size:20,style:{color:n}})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),r&&x.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),x.jsx("p",{className:"text-sm text-white/40",children:t.area}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&x.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),x.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[x.jsxs("span",{className:"text-lg font-bold",style:{color:n},children:[i," pts"]}),t.capturedBy?x.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:n},children:["Captured by ",t.capturedBy]}):x.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:r?"Gone":"Unclaimed"})]})]})]})]})})}const cm=[null,...Ga];function OF(){const{player:t,artPoints:e,captureArt:n}=hr(),[i,r]=j.useState(null),[o,a]=j.useState(!1),[u,h]=j.useState(e),[f,m]=j.useState(Gg.vysocany);j.useEffect(()=>{h(e)},[e]);const g=C=>{o?h(P=>P.map(S=>{if(S.id===C.id){const G=(cm.indexOf(S.capturedBy)+1)%cm.length;return{...S,capturedBy:cm[G]}}return S})):r(C)},_=()=>{h(e.map(C=>({...C,capturedBy:null})))},T=o?u:e,k=j.useMemo(()=>Vz(T),[T]),b=j.useMemo(()=>BC(T),[T]),z=Object.values(b).reduce((C,P)=>C+P,0)||1;return x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:Object.entries(b).map(([C,P])=>{const S=P/z*100;return x.jsx(de.div,{className:"h-full",style:{backgroundColor:Jo(C)},initial:{width:0},animate:{width:`${S}%`},transition:{duration:.8}},C)})}),x.jsxs("div",{className:"absolute top-10 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Teams"}),x.jsx("div",{className:"space-y-1.5",children:Ga.map(C=>x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:Jo(C)}}),x.jsx("span",{className:"text-xs text-white/70 capitalize font-medium",children:C}),x.jsxs("span",{className:"text-xs text-white/40 ml-auto",children:[b[C]||0," pts"]})]},C))}),x.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Points"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white/40"}),x.jsx("span",{className:"text-xs text-white/40",children:"Active"})]}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-dashed border-white/20"}),x.jsx("span",{className:"text-xs text-white/30",children:"Ghost"})]})]}),x.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),x.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),x.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(Gg).map(C=>x.jsx(de.button,{onClick:()=>m(C),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f.id===C.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:C.name},C.id))}),x.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[x.jsx(de.button,{onClick:()=>a(!o),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${o?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:x.jsx(qz,{size:18})}),o&&x.jsx(de.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:_,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:x.jsx($C,{size:18})})]}),x.jsx(Bu,{children:o&&x.jsx(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:x.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),x.jsxs(IF,{center:zC,zoom:FC,minZoom:Nz,maxZoom:Mz,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[x.jsx(kF,{url:wT.tileUrl,attribution:wT.attribution}),x.jsx(NF,{}),x.jsx(bF,{devMode:o}),x.jsx(RF,{hood:f}),x.jsx(LF,{}),x.jsx(AF,{positions:TT.map(C=>C.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),TT.map(C=>x.jsx(Qg,{center:C.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},C.name)),Object.entries(k).map(([C,P])=>P.map((S,F)=>x.jsx(CF,{positions:S.polygon,pathOptions:{color:Jo(C),fillColor:Jo(C),fillOpacity:.15,weight:0,opacity:0,interactive:!1}},`${C}-territory-${F}`))),T.map(C=>{const P=C.capturedBy?Jo(C.capturedBy):"#ffffff",S=!!C.capturedBy,F=C.status==="ghost";return x.jsx(Qg,{center:C.location,radius:8,pathOptions:{color:o?"#a855f7":F?"#6b7280":P,fillColor:S?P:F?"#374151":"#0a0a0f",fillOpacity:F?.4:S?.8:1,weight:o?3:2,opacity:F?.5:1,dashArray:F?"3, 3":void 0},eventHandlers:{click:G=>{G.originalEvent.stopPropagation(),g(C)}}},C.id)})]}),x.jsx(Bu,{children:i&&x.jsx(MF,{point:i,onClose:()=>r(null)})})]})}function DF(){return x.jsx(de.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:x.jsx(OF,{})})}function VF(){const{player:t}=hr(),[e,n]=j.useState(!1);return j.useEffect(()=>{t.team&&!e&&(n(!0),setTimeout(()=>{const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"},500))},[t.team,e]),t.team?x.jsx(de.div,{className:"flex-1 flex items-center justify-center p-8 bg-black",initial:{opacity:0},animate:{opacity:1},children:x.jsxs("div",{className:"text-center",children:[x.jsx(de.div,{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:x.jsx(ZC,{size:48,className:"text-white"})}),x.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Opening AR Scanner"}),x.jsx("p",{className:"text-white/40 text-sm mb-4",children:"Point your camera at street art to capture it"}),x.jsx(Jz,{className:"w-6 h-6 animate-spin mx-auto text-purple-400"})]})}):x.jsx(de.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:x.jsx(Hz,{size:36,className:"text-amber-500"})}),x.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),x.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start scanning street art"})]})})}const jF={red:"Red Team",blue:"Blue Team"};function zF({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return x.jsxs(de.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[x.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${ct[t].hex}15 0%, transparent 60%)`}}),x.jsx(de.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:ct[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),x.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${ct[t].hex}30`},children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?x.jsx(Zz,{size:20,className:"text-white"}):x.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-semibold text-white",children:jF[t]}),x.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[x.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ct[t].hex}}),x.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-2xl font-bold",style:{color:ct[t].hex},children:e.toLocaleString()}),x.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function FF({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return x.jsxs(de.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[x.jsx("div",{className:"w-8 flex justify-center",children:i?x.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:x.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):x.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),x.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${ct[t.team].hex}20`,color:ct[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&x.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),x.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),x.jsx("div",{className:"text-right",children:x.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function BF(){var m;const{teamScores:t,player:e,allPlayers:n}=hr(),r=Object.entries(t).filter(([g])=>ct[g]).sort((g,_)=>_[1]-g[1]),o=Object.values(t).reduce((g,_)=>g+_,0)||1,a=[...n];!a.find(g=>g.name===e.name)&&e.team&&e.name&&a.push({id:"current",name:e.name,team:e.team,score:e.score||0,captures:((m=e.capturedArt)==null?void 0:m.length)||0});const h=a.sort((g,_)=>_.score-g.score),f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return x.jsxs(de.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:f,children:[x.jsx(de.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:x.jsx($f,{size:20,className:"text-white"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),x.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(sF,{size:16,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),x.jsx("div",{className:"space-y-3",children:r.map(([g,_],T)=>x.jsx(zF,{team:g,score:_,rank:T,totalScore:o},g))})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Qz,{size:16,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),x.jsx("div",{className:"space-y-2",children:h.map((g,_)=>x.jsx(FF,{player:g,rank:_,isCurrentPlayer:g.id==="current"},g.id))})]})]})}function hm({icon:t,label:e,value:n,color:i}){return x.jsxs(de.div,{className:"glass rounded-xl p-4 text-center",whileHover:{scale:1.02},children:[x.jsx(t,{size:24,className:"mx-auto mb-2",style:{color:i}}),x.jsx("p",{className:"text-2xl font-bold",children:n}),x.jsx("p",{className:"text-xs text-gray-400",children:e})]})}function UF({art:t}){var e,n;return x.jsxs(de.div,{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[x.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${(e=ct[t.capturedBy])==null?void 0:e.hex}30`},children:x.jsx(Kd,{size:20,style:{color:(n=ct[t.capturedBy])==null?void 0:n.hex}})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-sm",children:t.name}),x.jsxs("p",{className:"text-xs text-gray-400",children:[t.points," pts"]})]}),x.jsx(ka,{size:18,className:"text-gray-500"})]})}function dm({icon:t,label:e,onClick:n}){return x.jsxs(de.button,{onClick:n,className:"w-full flex items-center gap-3 p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-colors",whileTap:{scale:.98},children:[x.jsx(t,{size:20,className:"text-gray-400"}),x.jsx("span",{className:"flex-1 text-left",children:e}),x.jsx(ka,{size:18,className:"text-gray-500"})]})}function HF(){const{player:t,artPoints:e,joinTeam:n,resetAll:i}=hr(),[r,o]=j.useState(!1),[a,u]=j.useState(t.name),[h,f]=j.useState(!1),m=(e==null?void 0:e.filter(T=>t.capturedArt.includes(T.id)))||[],g=t.team?ct[t.team].hex:"#64748b",_=async()=>{if(!h){f(!0);try{const T=["red","blue"];let k=0,b=0;for(const z of Yl){const C=T[Math.floor(Math.random()*T.length)],P=z.points||100;C==="red"?k+=P:b+=P,await yu(gu(Or,"streetart-captures",z.id),{artId:z.id,capturedBy:C,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:P,isFirstCapture:!0,isRecapture:!1})}await yu(gu(Or,"streetart-teams","red"),{score:k},{merge:!0}),await yu(gu(Or,"streetart-teams","blue"),{score:b},{merge:!0}),console.log("Randomized all territories!")}catch(T){console.error("Failed to randomize:",T)}f(!1)}};return x.jsxs(de.div,{className:"flex-1 overflow-y-auto pb-20 px-4 pt-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsxs(de.div,{className:"relative inline-block",whileHover:{scale:1.05},children:[x.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-3",style:{background:`linear-gradient(135deg, ${g}50, ${g}20)`,border:`3px solid ${g}`},children:x.jsx(KC,{size:40,style:{color:g}})}),x.jsx("button",{className:"absolute bottom-2 right-0 w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:x.jsx(HC,{size:14})})]}),r?x.jsx("input",{type:"text",value:a,onChange:T=>u(T.target.value),onBlur:()=>o(!1),className:"text-xl font-bold bg-transparent border-b-2 border-white/30 text-center outline-none",autoFocus:!0}):x.jsx("h1",{className:"text-xl font-bold cursor-pointer",onClick:()=>o(!0),children:t.name}),t.team&&x.jsxs("p",{className:"text-sm mt-1",style:{color:g},children:[t.team.charAt(0).toUpperCase()+t.team.slice(1)," Team"]})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[x.jsx(hm,{icon:$f,label:"Score",value:t.score,color:"#eab308"}),x.jsx(hm,{icon:Kd,label:"Captures",value:m.length,color:"#22c55e"}),x.jsx(hm,{icon:WC,label:"Sectors",value:"3",color:"#3b82f6"})]}),m.length>0&&x.jsxs("div",{className:"mb-6",children:[x.jsxs("h2",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[x.jsx(Kd,{size:16})," YOUR CAPTURES"]}),x.jsx("div",{className:"space-y-2",children:m.map(T=>x.jsx(UF,{art:T},T.id))})]}),!t.team&&x.jsxs("div",{className:"mb-6",children:[x.jsx("h2",{className:"text-sm font-medium text-gray-400 mb-3",children:"SELECT YOUR TEAM"}),x.jsx("div",{className:"grid grid-cols-2 gap-2",children:["red","blue"].map(T=>x.jsxs(de.button,{onClick:()=>n(T),className:"p-4 rounded-xl bg-white/5 text-center",style:{borderColor:ct[T].hex,borderWidth:2},whileTap:{scale:.95},children:[x.jsx("div",{className:"w-8 h-8 rounded-full mx-auto mb-2",style:{backgroundColor:ct[T].hex}}),x.jsx("p",{className:"text-sm font-medium capitalize",children:T==="red"?"Crimson":"Azure"})]},T))})]}),x.jsxs("div",{className:"mb-6",children:[x.jsxs("h2",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[x.jsx(YC,{size:16})," GAME MASTER"]}),x.jsxs(de.button,{onClick:_,disabled:h,className:"w-full flex items-center gap-3 p-4 bg-purple-500/20 border border-purple-500/30 rounded-xl hover:bg-purple-500/30 transition-colors disabled:opacity-50",whileTap:{scale:.98},children:[x.jsx(GC,{size:20,className:"text-purple-400"}),x.jsx("span",{className:"flex-1 text-left text-purple-300",children:h?"Randomizing...":"Randomize All Territories"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("h2",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[x.jsx(tF,{size:16})," SETTINGS"]}),x.jsx(dm,{icon:Wz,label:"Notifications"}),x.jsx(dm,{icon:nF,label:"Privacy"}),x.jsx(dm,{icon:eF,label:"Reset Game Data",onClick:i})]}),x.jsx("p",{className:"text-center text-xs text-gray-500 mt-6",children:"Street Art CTF v1.1.0"})]})}const WF=[{path:"/",icon:Xz,label:"Home"},{path:"/map",icon:Zd,label:"Map"},{path:"/scanner",icon:qC,label:"Scan"},{path:"/leaderboard",icon:$f,label:"Ranks"},{path:"/profile",icon:KC,label:"You"}];function $F(){return x.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[x.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),x.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:WF.map(({path:t,icon:e,label:n})=>x.jsx(cR,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>x.jsxs(de.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&x.jsx(de.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),x.jsx(de.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:x.jsx(e,{size:20,strokeWidth:i?2.5:2})}),x.jsx(de.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function qF(){var i;const{captureNotification:t}=hr();if(!t)return null;const e=((i=ct[t.team])==null?void 0:i.hex)||"#888",n=t.team==="red"?"RED TEAM":"BLUE TEAM";return x.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none",style:{backgroundColor:`${e}20`},children:x.jsxs(de.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:15},className:"text-center p-8",children:[x.jsx(de.div,{className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:`${e}30`,border:`3px solid ${e}`},initial:{rotate:-10},animate:{rotate:0},children:t.isRecapture?x.jsx(rF,{size:48,style:{color:e}}):x.jsx(Kz,{size:48,style:{color:e}})}),x.jsx(de.h1,{className:"text-3xl font-black mb-2",style:{color:e},initial:{y:20},animate:{y:0},children:t.isRecapture?"RECAPTURED!":"CAPTURED!"}),x.jsx(de.p,{className:"text-xl font-bold text-white mb-4",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:t.artName}),x.jsxs(de.div,{className:"flex items-center justify-center gap-3",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[x.jsx("span",{className:"text-white/60",children:"by"}),x.jsx("span",{className:"font-semibold text-white",children:t.playerName}),x.jsx("span",{className:"px-3 py-1 rounded font-bold text-sm",style:{backgroundColor:e,color:"white"},children:n})]})]})})}function xh({children:t}){const{player:e}=hr();return e.team&&e.name&&e.name!=="Street Artist"?t:x.jsx(GE,{to:"/onboarding",replace:!0})}function GF(){const t=fo(),{player:e}=hr(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding";return x.jsxs("div",{className:"h-full w-full flex flex-col",children:[x.jsx(Bu,{children:x.jsx(qF,{})}),x.jsx(Bu,{mode:"wait",children:x.jsxs(X2,{location:t,children:[x.jsx(Vs,{path:"/onboarding",element:x.jsx(hF,{})}),x.jsx(Vs,{path:"/",element:n?x.jsx(dF,{}):x.jsx(GE,{to:"/onboarding",replace:!0})}),x.jsx(Vs,{path:"/map",element:x.jsx(xh,{children:x.jsx(DF,{})})}),x.jsx(Vs,{path:"/scanner",element:x.jsx(xh,{children:x.jsx(VF,{})})}),x.jsx(Vs,{path:"/leaderboard",element:x.jsx(xh,{children:x.jsx(BF,{})})}),x.jsx(Vs,{path:"/profile",element:x.jsx(xh,{children:x.jsx(HF,{})})})]},t.pathname)}),!i&&n&&x.jsx($F,{})]})}function ZF(){return x.jsx(Fz,{children:x.jsx(GF,{})})}fm.createRoot(document.getElementById("root")).render(x.jsx(Xs.StrictMode,{children:x.jsx(oR,{children:x.jsx(ZF,{})})}));
