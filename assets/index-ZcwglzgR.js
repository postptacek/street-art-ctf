function qA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var GA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D1={exports:{}},tf={},V1={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ec=Symbol.for("react.element"),ZA=Symbol.for("react.portal"),KA=Symbol.for("react.fragment"),QA=Symbol.for("react.strict_mode"),XA=Symbol.for("react.profiler"),YA=Symbol.for("react.provider"),JA=Symbol.for("react.context"),eb=Symbol.for("react.forward_ref"),tb=Symbol.for("react.suspense"),nb=Symbol.for("react.memo"),ib=Symbol.for("react.lazy"),Lv=Symbol.iterator;function rb(t){return t===null||typeof t!="object"?null:(t=Lv&&t[Lv]||t["@@iterator"],typeof t=="function"?t:null)}var j1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z1=Object.assign,F1={};function tl(t,e,n){this.props=t,this.context=e,this.refs=F1,this.updater=n||j1}tl.prototype.isReactComponent={};tl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function B1(){}B1.prototype=tl.prototype;function Xg(t,e,n){this.props=t,this.context=e,this.refs=F1,this.updater=n||j1}var Yg=Xg.prototype=new B1;Yg.constructor=Xg;z1(Yg,tl.prototype);Yg.isPureReactComponent=!0;var Mv=Array.isArray,U1=Object.prototype.hasOwnProperty,Jg={current:null},H1={key:!0,ref:!0,__self:!0,__source:!0};function W1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)U1.call(e,i)&&!H1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:ec,type:t,key:o,ref:a,props:r,_owner:Jg.current}}function sb(t,e){return{$$typeof:ec,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ey(t){return typeof t=="object"&&t!==null&&t.$$typeof===ec}function ob(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ov=/\/+/g;function cp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ob(""+t.key):e.toString(36)}function bh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ec:case ZA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+cp(a,0):i,Mv(r)?(n="",t!=null&&(n=t.replace(Ov,"$&/")+"/"),bh(r,e,n,"",function(f){return f})):r!=null&&(ey(r)&&(r=sb(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Ov,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Mv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+cp(o,u);a+=bh(o,e,n,h,r)}else if(h=rb(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+cp(o,u++),a+=bh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Jc(t,e,n){if(t==null)return t;var i=[],r=0;return bh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function ab(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var an={current:null},kh={transition:null},lb={ReactCurrentDispatcher:an,ReactCurrentBatchConfig:kh,ReactCurrentOwner:Jg};function $1(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Jc,forEach:function(t,e,n){Jc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jc(t,function(){e++}),e},toArray:function(t){return Jc(t,function(e){return e})||[]},only:function(t){if(!ey(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ne.Component=tl;Ne.Fragment=KA;Ne.Profiler=XA;Ne.PureComponent=Xg;Ne.StrictMode=QA;Ne.Suspense=tb;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lb;Ne.act=$1;Ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=z1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Jg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)U1.call(e,h)&&!H1.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:ec,type:t.type,key:r,ref:o,props:i,_owner:a}};Ne.createContext=function(t){return t={$$typeof:JA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YA,_context:t},t.Consumer=t};Ne.createElement=W1;Ne.createFactory=function(t){var e=W1.bind(null,t);return e.type=t,e};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(t){return{$$typeof:eb,render:t}};Ne.isValidElement=ey;Ne.lazy=function(t){return{$$typeof:ib,_payload:{_status:-1,_result:t},_init:ab}};Ne.memo=function(t,e){return{$$typeof:nb,type:t,compare:e===void 0?null:e}};Ne.startTransition=function(t){var e=kh.transition;kh.transition={};try{t()}finally{kh.transition=e}};Ne.unstable_act=$1;Ne.useCallback=function(t,e){return an.current.useCallback(t,e)};Ne.useContext=function(t){return an.current.useContext(t)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(t){return an.current.useDeferredValue(t)};Ne.useEffect=function(t,e){return an.current.useEffect(t,e)};Ne.useId=function(){return an.current.useId()};Ne.useImperativeHandle=function(t,e,n){return an.current.useImperativeHandle(t,e,n)};Ne.useInsertionEffect=function(t,e){return an.current.useInsertionEffect(t,e)};Ne.useLayoutEffect=function(t,e){return an.current.useLayoutEffect(t,e)};Ne.useMemo=function(t,e){return an.current.useMemo(t,e)};Ne.useReducer=function(t,e,n){return an.current.useReducer(t,e,n)};Ne.useRef=function(t){return an.current.useRef(t)};Ne.useState=function(t){return an.current.useState(t)};Ne.useSyncExternalStore=function(t,e,n){return an.current.useSyncExternalStore(t,e,n)};Ne.useTransition=function(){return an.current.useTransition()};Ne.version="18.3.1";V1.exports=Ne;var D=V1.exports;const ro=O1(D),ub=qA({__proto__:null,default:ro},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb=D,hb=Symbol.for("react.element"),db=Symbol.for("react.fragment"),fb=Object.prototype.hasOwnProperty,pb=cb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mb={key:!0,ref:!0,__self:!0,__source:!0};function q1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)fb.call(e,i)&&!mb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:hb,type:t,key:o,ref:a,props:r,_owner:pb.current}}tf.Fragment=db;tf.jsx=q1;tf.jsxs=q1;D1.exports=tf;var w=D1.exports,fm={},G1={exports:{}},bn={},Z1={exports:{}},K1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,pe){var ee=Z.length;Z.push(pe);e:for(;0<ee;){var ie=ee-1>>>1,te=Z[ie];if(0<r(te,pe))Z[ie]=pe,Z[ee]=te,ee=ie;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var pe=Z[0],ee=Z.pop();if(ee!==pe){Z[0]=ee;e:for(var ie=0,te=Z.length,re=te>>>1;ie<re;){var ue=2*(ie+1)-1,le=Z[ue],J=ue+1,ge=Z[J];if(0>r(le,ee))J<te&&0>r(ge,le)?(Z[ie]=ge,Z[J]=ee,ie=J):(Z[ie]=le,Z[ue]=ee,ie=ue);else if(J<te&&0>r(ge,ee))Z[ie]=ge,Z[J]=ee,ie=J;else break e}}return pe}function r(Z,pe){var ee=Z.sortIndex-pe.sortIndex;return ee!==0?ee:Z.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,_=3,E=!1,k=!1,b=!1,V=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Z){for(var pe=n(f);pe!==null;){if(pe.callback===null)i(f);else if(pe.startTime<=Z)i(f),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=n(f)}}function F(Z){if(b=!1,C(Z),!k)if(n(h)!==null)k=!0,Ie(G);else{var pe=n(f);pe!==null&&ut(F,pe.startTime-Z)}}function G(Z,pe){k=!1,b&&(b=!1,R(T),T=-1),E=!0;var ee=_;try{for(C(pe),g=n(h);g!==null&&(!(g.expirationTime>pe)||Z&&!j());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,_=g.priorityLevel;var te=ie(g.expirationTime<=pe);pe=t.unstable_now(),typeof te=="function"?g.callback=te:g===n(h)&&i(h),C(pe)}else i(h);g=n(h)}if(g!==null)var re=!0;else{var ue=n(f);ue!==null&&ut(F,ue.startTime-pe),re=!1}return re}finally{g=null,_=ee,E=!1}}var U=!1,A=null,T=-1,N=5,M=-1;function j(){return!(t.unstable_now()-M<N)}function B(){if(A!==null){var Z=t.unstable_now();M=Z;var pe=!0;try{pe=A(!0,Z)}finally{pe?O():(U=!1,A=null)}}else U=!1}var O;if(typeof S=="function")O=function(){S(B)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,dt=xe.port2;xe.port1.onmessage=B,O=function(){dt.postMessage(null)}}else O=function(){V(B,0)};function Ie(Z){A=Z,U||(U=!0,O())}function ut(Z,pe){T=V(function(){Z(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){k||E||(k=!0,Ie(G))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var pe=3;break;default:pe=_}var ee=_;_=pe;try{return Z()}finally{_=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,pe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ee=_;_=Z;try{return pe()}finally{_=ee}},t.unstable_scheduleCallback=function(Z,pe,ee){var ie=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ie+ee:ie):ee=ie,Z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ee+te,Z={id:m++,callback:pe,priorityLevel:Z,startTime:ee,expirationTime:te,sortIndex:-1},ee>ie?(Z.sortIndex=ee,e(f,Z),n(h)===null&&Z===n(f)&&(b?(R(T),T=-1):b=!0,ut(F,ee-ie))):(Z.sortIndex=te,e(h,Z),k||E||(k=!0,Ie(G))),Z},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(Z){var pe=_;return function(){var ee=_;_=pe;try{return Z.apply(this,arguments)}finally{_=ee}}}})(K1);Z1.exports=K1;var gb=Z1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb=D,Cn=gb;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q1=new Set,Eu={};function go(t,e){Va(t,e),Va(t+"Capture",e)}function Va(t,e){for(Eu[t]=e,t=0;t<e.length;t++)Q1.add(e[t])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pm=Object.prototype.hasOwnProperty,_b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dv={},Vv={};function vb(t){return pm.call(Vv,t)?!0:pm.call(Dv,t)?!1:_b.test(t)?Vv[t]=!0:(Dv[t]=!0,!1)}function wb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xb(t,e,n,i){if(e===null||typeof e>"u"||wb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ln(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new ln(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new ln(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new ln(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new ln(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new ln(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new ln(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new ln(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new ln(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new ln(t,5,!1,t.toLowerCase(),null,!1,!1)});var ty=/[\-:]([a-z])/g;function ny(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ty,ny);Ut[e]=new ln(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ty,ny);Ut[e]=new ln(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ty,ny);Ut[e]=new ln(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new ln(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new ln(t,1,!1,t.toLowerCase(),null,!0,!0)});function iy(t,e,n,i){var r=Ut.hasOwnProperty(e)?Ut[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xb(e,n,r,i)&&(n=null),i||r===null?vb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var pr=yb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eh=Symbol.for("react.element"),ua=Symbol.for("react.portal"),ca=Symbol.for("react.fragment"),ry=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),X1=Symbol.for("react.provider"),Y1=Symbol.for("react.context"),sy=Symbol.for("react.forward_ref"),gm=Symbol.for("react.suspense"),ym=Symbol.for("react.suspense_list"),oy=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),J1=Symbol.for("react.offscreen"),jv=Symbol.iterator;function jl(t){return t===null||typeof t!="object"?null:(t=jv&&t[jv]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,hp;function Zl(t){if(hp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hp=e&&e[1]||""}return`
`+hp+t}var dp=!1;function fp(t,e){if(!t||dp)return"";dp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{dp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zl(t):""}function Tb(t){switch(t.tag){case 5:return Zl(t.type);case 16:return Zl("Lazy");case 13:return Zl("Suspense");case 19:return Zl("SuspenseList");case 0:case 2:case 15:return t=fp(t.type,!1),t;case 11:return t=fp(t.type.render,!1),t;case 1:return t=fp(t.type,!0),t;default:return""}}function _m(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ca:return"Fragment";case ua:return"Portal";case mm:return"Profiler";case ry:return"StrictMode";case gm:return"Suspense";case ym:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Y1:return(t.displayName||"Context")+".Consumer";case X1:return(t._context.displayName||"Context")+".Provider";case sy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oy:return e=t.displayName||null,e!==null?e:_m(t.type)||"Memo";case Nr:e=t._payload,t=t._init;try{return _m(t(e))}catch{}}return null}function Eb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _m(e);case 8:return e===ry?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pb(t){var e=eT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function th(t){t._valueTracker||(t._valueTracker=Pb(t))}function tT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=eT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Jh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vm(t,e){var n=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nT(t,e){e=e.checked,e!=null&&iy(t,"checked",e,!1)}function wm(t,e){nT(t,e);var n=cs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xm(t,e.type,n):e.hasOwnProperty("defaultValue")&&xm(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xm(t,e,n){(e!=="number"||Jh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Kl=Array.isArray;function Ca(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+cs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Tm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Kl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cs(n)}}function iT(t,e){var n=cs(e.value),i=cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Uv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nh,sT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nh=nh||document.createElement("div"),nh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var iu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sb=["Webkit","ms","Moz","O"];Object.keys(iu).forEach(function(t){Sb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),iu[e]=iu[t]})});function oT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||iu.hasOwnProperty(t)&&iu[t]?(""+e).trim():e+"px"}function aT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=oT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Cb=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pm(t,e){if(e){if(Cb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cm=null;function ay(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Im=null,Ia=null,Aa=null;function Hv(t){if(t=ic(t)){if(typeof Im!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=af(e),Im(t.stateNode,t.type,e))}}function lT(t){Ia?Aa?Aa.push(t):Aa=[t]:Ia=t}function uT(){if(Ia){var t=Ia,e=Aa;if(Aa=Ia=null,Hv(t),e)for(t=0;t<e.length;t++)Hv(e[t])}}function cT(t,e){return t(e)}function hT(){}var pp=!1;function dT(t,e,n){if(pp)return t(e,n);pp=!0;try{return cT(t,e,n)}finally{pp=!1,(Ia!==null||Aa!==null)&&(hT(),uT())}}function Su(t,e){var n=t.stateNode;if(n===null)return null;var i=af(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Am=!1;if(rr)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){Am=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{Am=!1}function Ib(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var ru=!1,ed=null,td=!1,bm=null,Ab={onError:function(t){ru=!0,ed=t}};function bb(t,e,n,i,r,o,a,u,h){ru=!1,ed=null,Ib.apply(Ab,arguments)}function kb(t,e,n,i,r,o,a,u,h){if(bb.apply(this,arguments),ru){if(ru){var f=ed;ru=!1,ed=null}else throw Error(Y(198));td||(td=!0,bm=f)}}function yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wv(t){if(yo(t)!==t)throw Error(Y(188))}function Rb(t){var e=t.alternate;if(!e){if(e=yo(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Wv(r),t;if(o===i)return Wv(r),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function pT(t){return t=Rb(t),t!==null?mT(t):null}function mT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mT(t);if(e!==null)return e;t=t.sibling}return null}var gT=Cn.unstable_scheduleCallback,$v=Cn.unstable_cancelCallback,Nb=Cn.unstable_shouldYield,Lb=Cn.unstable_requestPaint,yt=Cn.unstable_now,Mb=Cn.unstable_getCurrentPriorityLevel,ly=Cn.unstable_ImmediatePriority,yT=Cn.unstable_UserBlockingPriority,nd=Cn.unstable_NormalPriority,Ob=Cn.unstable_LowPriority,_T=Cn.unstable_IdlePriority,nf=null,xi=null;function Db(t){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(nf,t,void 0,(t.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:zb,Vb=Math.log,jb=Math.LN2;function zb(t){return t>>>=0,t===0?32:31-(Vb(t)/jb|0)|0}var ih=64,rh=4194304;function Ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function id(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Ql(u):(o&=a,o!==0&&(i=Ql(o)))}else a=n&~r,a!==0?i=Ql(a):o!==0&&(i=Ql(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-oi(e),r=1<<n,i|=t[n],e&=~r;return i}function Fb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-oi(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=Fb(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function km(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vT(){var t=ih;return ih<<=1,!(ih&4194240)&&(ih=64),t}function mp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-oi(e),t[e]=n}function Ub(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-oi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function uy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var qe=0;function wT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xT,cy,TT,ET,PT,Rm=!1,sh=[],qr=null,Gr=null,Zr=null,Cu=new Map,Iu=new Map,Or=[],Hb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qv(t,e){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(e.pointerId)}}function Fl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=ic(e),e!==null&&cy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Wb(t,e,n,i,r){switch(e){case"focusin":return qr=Fl(qr,t,e,n,i,r),!0;case"dragenter":return Gr=Fl(Gr,t,e,n,i,r),!0;case"mouseover":return Zr=Fl(Zr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Cu.set(o,Fl(Cu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Iu.set(o,Fl(Iu.get(o)||null,t,e,n,i,r)),!0}return!1}function ST(t){var e=Zs(t.target);if(e!==null){var n=yo(e);if(n!==null){if(e=n.tag,e===13){if(e=fT(n),e!==null){t.blockedOn=e,PT(t.priority,function(){TT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Cm=i,n.target.dispatchEvent(i),Cm=null}else return e=ic(n),e!==null&&cy(e),t.blockedOn=n,!1;e.shift()}return!0}function Gv(t,e,n){Rh(t)&&n.delete(e)}function $b(){Rm=!1,qr!==null&&Rh(qr)&&(qr=null),Gr!==null&&Rh(Gr)&&(Gr=null),Zr!==null&&Rh(Zr)&&(Zr=null),Cu.forEach(Gv),Iu.forEach(Gv)}function Bl(t,e){t.blockedOn===e&&(t.blockedOn=null,Rm||(Rm=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,$b)))}function Au(t){function e(r){return Bl(r,t)}if(0<sh.length){Bl(sh[0],t);for(var n=1;n<sh.length;n++){var i=sh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(qr!==null&&Bl(qr,t),Gr!==null&&Bl(Gr,t),Zr!==null&&Bl(Zr,t),Cu.forEach(e),Iu.forEach(e),n=0;n<Or.length;n++)i=Or[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Or.length&&(n=Or[0],n.blockedOn===null);)ST(n),n.blockedOn===null&&Or.shift()}var ba=pr.ReactCurrentBatchConfig,rd=!0;function qb(t,e,n,i){var r=qe,o=ba.transition;ba.transition=null;try{qe=1,hy(t,e,n,i)}finally{qe=r,ba.transition=o}}function Gb(t,e,n,i){var r=qe,o=ba.transition;ba.transition=null;try{qe=4,hy(t,e,n,i)}finally{qe=r,ba.transition=o}}function hy(t,e,n,i){if(rd){var r=Nm(t,e,n,i);if(r===null)Sp(t,e,i,sd,n),qv(t,i);else if(Wb(r,t,e,n,i))i.stopPropagation();else if(qv(t,i),e&4&&-1<Hb.indexOf(t)){for(;r!==null;){var o=ic(r);if(o!==null&&xT(o),o=Nm(t,e,n,i),o===null&&Sp(t,e,i,sd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Sp(t,e,i,null,n)}}var sd=null;function Nm(t,e,n,i){if(sd=null,t=ay(i),t=Zs(t),t!==null)if(e=yo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sd=t,null}function CT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mb()){case ly:return 1;case yT:return 4;case nd:case Ob:return 16;case _T:return 536870912;default:return 16}default:return 16}}var Br=null,dy=null,Nh=null;function IT(){if(Nh)return Nh;var t,e=dy,n=e.length,i,r="value"in Br?Br.value:Br.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Nh=r.slice(t,1<i?1-i:void 0)}function Lh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function oh(){return!0}function Zv(){return!1}function kn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?oh:Zv,this.isPropagationStopped=Zv,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=oh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=oh)},persist:function(){},isPersistent:oh}),e}var nl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fy=kn(nl),nc=at({},nl,{view:0,detail:0}),Zb=kn(nc),gp,yp,Ul,rf=at({},nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:py,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ul&&(Ul&&t.type==="mousemove"?(gp=t.screenX-Ul.screenX,yp=t.screenY-Ul.screenY):yp=gp=0,Ul=t),gp)},movementY:function(t){return"movementY"in t?t.movementY:yp}}),Kv=kn(rf),Kb=at({},rf,{dataTransfer:0}),Qb=kn(Kb),Xb=at({},nc,{relatedTarget:0}),_p=kn(Xb),Yb=at({},nl,{animationName:0,elapsedTime:0,pseudoElement:0}),Jb=kn(Yb),ek=at({},nl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tk=kn(ek),nk=at({},nl,{data:0}),Qv=kn(nk),ik={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ok(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sk[t])?!!e[t]:!1}function py(){return ok}var ak=at({},nc,{key:function(t){if(t.key){var e=ik[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:py,charCode:function(t){return t.type==="keypress"?Lh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lk=kn(ak),uk=at({},rf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xv=kn(uk),ck=at({},nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:py}),hk=kn(ck),dk=at({},nl,{propertyName:0,elapsedTime:0,pseudoElement:0}),fk=kn(dk),pk=at({},rf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mk=kn(pk),gk=[9,13,27,32],my=rr&&"CompositionEvent"in window,su=null;rr&&"documentMode"in document&&(su=document.documentMode);var yk=rr&&"TextEvent"in window&&!su,AT=rr&&(!my||su&&8<su&&11>=su),Yv=" ",Jv=!1;function bT(t,e){switch(t){case"keyup":return gk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ha=!1;function _k(t,e){switch(t){case"compositionend":return kT(e);case"keypress":return e.which!==32?null:(Jv=!0,Yv);case"textInput":return t=e.data,t===Yv&&Jv?null:t;default:return null}}function vk(t,e){if(ha)return t==="compositionend"||!my&&bT(t,e)?(t=IT(),Nh=dy=Br=null,ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AT&&e.locale!=="ko"?null:e.data;default:return null}}var wk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wk[t.type]:e==="textarea"}function RT(t,e,n,i){lT(i),e=od(e,"onChange"),0<e.length&&(n=new fy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ou=null,bu=null;function xk(t){UT(t,0)}function sf(t){var e=pa(t);if(tT(e))return t}function Tk(t,e){if(t==="change")return e}var NT=!1;if(rr){var vp;if(rr){var wp="oninput"in document;if(!wp){var t0=document.createElement("div");t0.setAttribute("oninput","return;"),wp=typeof t0.oninput=="function"}vp=wp}else vp=!1;NT=vp&&(!document.documentMode||9<document.documentMode)}function n0(){ou&&(ou.detachEvent("onpropertychange",LT),bu=ou=null)}function LT(t){if(t.propertyName==="value"&&sf(bu)){var e=[];RT(e,bu,t,ay(t)),dT(xk,e)}}function Ek(t,e,n){t==="focusin"?(n0(),ou=e,bu=n,ou.attachEvent("onpropertychange",LT)):t==="focusout"&&n0()}function Pk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sf(bu)}function Sk(t,e){if(t==="click")return sf(e)}function Ck(t,e){if(t==="input"||t==="change")return sf(e)}function Ik(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var li=typeof Object.is=="function"?Object.is:Ik;function ku(t,e){if(li(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!pm.call(e,r)||!li(t[r],e[r]))return!1}return!0}function i0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r0(t,e){var n=i0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i0(n)}}function MT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OT(){for(var t=window,e=Jh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jh(t.document)}return e}function gy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ak(t){var e=OT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MT(n.ownerDocument.documentElement,n)){if(i!==null&&gy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=r0(n,o);var a=r0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bk=rr&&"documentMode"in document&&11>=document.documentMode,da=null,Lm=null,au=null,Mm=!1;function s0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mm||da==null||da!==Jh(i)||(i=da,"selectionStart"in i&&gy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),au&&ku(au,i)||(au=i,i=od(Lm,"onSelect"),0<i.length&&(e=new fy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=da)))}function ah(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fa={animationend:ah("Animation","AnimationEnd"),animationiteration:ah("Animation","AnimationIteration"),animationstart:ah("Animation","AnimationStart"),transitionend:ah("Transition","TransitionEnd")},xp={},DT={};rr&&(DT=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function of(t){if(xp[t])return xp[t];if(!fa[t])return t;var e=fa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in DT)return xp[t]=e[n];return t}var VT=of("animationend"),jT=of("animationiteration"),zT=of("animationstart"),FT=of("transitionend"),BT=new Map,o0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,e){BT.set(t,e),go(e,[t])}for(var Tp=0;Tp<o0.length;Tp++){var Ep=o0[Tp],kk=Ep.toLowerCase(),Rk=Ep[0].toUpperCase()+Ep.slice(1);xs(kk,"on"+Rk)}xs(VT,"onAnimationEnd");xs(jT,"onAnimationIteration");xs(zT,"onAnimationStart");xs("dblclick","onDoubleClick");xs("focusin","onFocus");xs("focusout","onBlur");xs(FT,"onTransitionEnd");Va("onMouseEnter",["mouseout","mouseover"]);Va("onMouseLeave",["mouseout","mouseover"]);Va("onPointerEnter",["pointerout","pointerover"]);Va("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xl));function a0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,kb(i,e,void 0,t),t.currentTarget=null}function UT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;a0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;a0(r,u,f),o=h}}}if(td)throw t=bm,td=!1,bm=null,t}function Xe(t,e){var n=e[zm];n===void 0&&(n=e[zm]=new Set);var i=t+"__bubble";n.has(i)||(HT(e,t,2,!1),n.add(i))}function Pp(t,e,n){var i=0;e&&(i|=4),HT(n,t,i,e)}var lh="_reactListening"+Math.random().toString(36).slice(2);function Ru(t){if(!t[lh]){t[lh]=!0,Q1.forEach(function(n){n!=="selectionchange"&&(Nk.has(n)||Pp(n,!1,t),Pp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lh]||(e[lh]=!0,Pp("selectionchange",!1,e))}}function HT(t,e,n,i){switch(CT(e)){case 1:var r=qb;break;case 4:r=Gb;break;default:r=hy}n=r.bind(null,e,n,t),r=void 0,!Am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Sp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Zs(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}dT(function(){var f=o,m=ay(n),g=[];e:{var _=BT.get(t);if(_!==void 0){var E=fy,k=t;switch(t){case"keypress":if(Lh(n)===0)break e;case"keydown":case"keyup":E=lk;break;case"focusin":k="focus",E=_p;break;case"focusout":k="blur",E=_p;break;case"beforeblur":case"afterblur":E=_p;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Kv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Qb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=hk;break;case VT:case jT:case zT:E=Jb;break;case FT:E=fk;break;case"scroll":E=Zb;break;case"wheel":E=mk;break;case"copy":case"cut":case"paste":E=tk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Xv}var b=(e&4)!==0,V=!b&&t==="scroll",R=b?_!==null?_+"Capture":null:_;b=[];for(var S=f,C;S!==null;){C=S;var F=C.stateNode;if(C.tag===5&&F!==null&&(C=F,R!==null&&(F=Su(S,R),F!=null&&b.push(Nu(S,F,C)))),V)break;S=S.return}0<b.length&&(_=new E(_,k,null,n,m),g.push({event:_,listeners:b}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",_&&n!==Cm&&(k=n.relatedTarget||n.fromElement)&&(Zs(k)||k[sr]))break e;if((E||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,E?(k=n.relatedTarget||n.toElement,E=f,k=k?Zs(k):null,k!==null&&(V=yo(k),k!==V||k.tag!==5&&k.tag!==6)&&(k=null)):(E=null,k=f),E!==k)){if(b=Kv,F="onMouseLeave",R="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(b=Xv,F="onPointerLeave",R="onPointerEnter",S="pointer"),V=E==null?_:pa(E),C=k==null?_:pa(k),_=new b(F,S+"leave",E,n,m),_.target=V,_.relatedTarget=C,F=null,Zs(m)===f&&(b=new b(R,S+"enter",k,n,m),b.target=C,b.relatedTarget=V,F=b),V=F,E&&k)t:{for(b=E,R=k,S=0,C=b;C;C=na(C))S++;for(C=0,F=R;F;F=na(F))C++;for(;0<S-C;)b=na(b),S--;for(;0<C-S;)R=na(R),C--;for(;S--;){if(b===R||R!==null&&b===R.alternate)break t;b=na(b),R=na(R)}b=null}else b=null;E!==null&&l0(g,_,E,b,!1),k!==null&&V!==null&&l0(g,V,k,b,!0)}}e:{if(_=f?pa(f):window,E=_.nodeName&&_.nodeName.toLowerCase(),E==="select"||E==="input"&&_.type==="file")var G=Tk;else if(e0(_))if(NT)G=Ck;else{G=Pk;var U=Ek}else(E=_.nodeName)&&E.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(G=Sk);if(G&&(G=G(t,f))){RT(g,G,n,m);break e}U&&U(t,_,f),t==="focusout"&&(U=_._wrapperState)&&U.controlled&&_.type==="number"&&xm(_,"number",_.value)}switch(U=f?pa(f):window,t){case"focusin":(e0(U)||U.contentEditable==="true")&&(da=U,Lm=f,au=null);break;case"focusout":au=Lm=da=null;break;case"mousedown":Mm=!0;break;case"contextmenu":case"mouseup":case"dragend":Mm=!1,s0(g,n,m);break;case"selectionchange":if(bk)break;case"keydown":case"keyup":s0(g,n,m)}var A;if(my)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ha?bT(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(AT&&n.locale!=="ko"&&(ha||T!=="onCompositionStart"?T==="onCompositionEnd"&&ha&&(A=IT()):(Br=m,dy="value"in Br?Br.value:Br.textContent,ha=!0)),U=od(f,T),0<U.length&&(T=new Qv(T,t,null,n,m),g.push({event:T,listeners:U}),A?T.data=A:(A=kT(n),A!==null&&(T.data=A)))),(A=yk?_k(t,n):vk(t,n))&&(f=od(f,"onBeforeInput"),0<f.length&&(m=new Qv("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=A))}UT(g,e)})}function Nu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function od(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Su(t,n),o!=null&&i.unshift(Nu(t,o,r)),o=Su(t,e),o!=null&&i.push(Nu(t,o,r))),t=t.return}return i}function na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=Su(n,o),h!=null&&a.unshift(Nu(n,h,u))):r||(h=Su(n,o),h!=null&&a.push(Nu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Lk=/\r\n?/g,Mk=/\u0000|\uFFFD/g;function u0(t){return(typeof t=="string"?t:""+t).replace(Lk,`
`).replace(Mk,"")}function uh(t,e,n){if(e=u0(e),u0(t)!==e&&n)throw Error(Y(425))}function ad(){}var Om=null,Dm=null;function Vm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jm=typeof setTimeout=="function"?setTimeout:void 0,Ok=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,Dk=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(t){return c0.resolve(null).then(t).catch(Vk)}:jm;function Vk(t){setTimeout(function(){throw t})}function Cp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Au(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Au(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var il=Math.random().toString(36).slice(2),wi="__reactFiber$"+il,Lu="__reactProps$"+il,sr="__reactContainer$"+il,zm="__reactEvents$"+il,jk="__reactListeners$"+il,zk="__reactHandles$"+il;function Zs(t){var e=t[wi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sr]||n[wi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h0(t);t!==null;){if(n=t[wi])return n;t=h0(t)}return e}t=n,n=t.parentNode}return null}function ic(t){return t=t[wi]||t[sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function af(t){return t[Lu]||null}var Fm=[],ma=-1;function Ts(t){return{current:t}}function tt(t){0>ma||(t.current=Fm[ma],Fm[ma]=null,ma--)}function Ke(t,e){ma++,Fm[ma]=t.current,t.current=e}var hs={},Yt=Ts(hs),yn=Ts(!1),so=hs;function ja(t,e){var n=t.type.contextTypes;if(!n)return hs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _n(t){return t=t.childContextTypes,t!=null}function ld(){tt(yn),tt(Yt)}function d0(t,e,n){if(Yt.current!==hs)throw Error(Y(168));Ke(Yt,e),Ke(yn,n)}function WT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,Eb(t)||"Unknown",r));return at({},n,i)}function ud(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hs,so=Yt.current,Ke(Yt,t),Ke(yn,yn.current),!0}function f0(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=WT(t,e,so),i.__reactInternalMemoizedMergedChildContext=t,tt(yn),tt(Yt),Ke(Yt,t)):tt(yn),Ke(yn,n)}var Gi=null,lf=!1,Ip=!1;function $T(t){Gi===null?Gi=[t]:Gi.push(t)}function Fk(t){lf=!0,$T(t)}function Es(){if(!Ip&&Gi!==null){Ip=!0;var t=0,e=qe;try{var n=Gi;for(qe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Gi=null,lf=!1}catch(r){throw Gi!==null&&(Gi=Gi.slice(t+1)),gT(ly,Es),r}finally{qe=e,Ip=!1}}return null}var ga=[],ya=0,cd=null,hd=0,Fn=[],Bn=0,oo=null,Zi=1,Ki="";function Us(t,e){ga[ya++]=hd,ga[ya++]=cd,cd=t,hd=e}function qT(t,e,n){Fn[Bn++]=Zi,Fn[Bn++]=Ki,Fn[Bn++]=oo,oo=t;var i=Zi;t=Ki;var r=32-oi(i)-1;i&=~(1<<r),n+=1;var o=32-oi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zi=1<<32-oi(e)+r|n<<r|i,Ki=o+t}else Zi=1<<o|n<<r|i,Ki=t}function yy(t){t.return!==null&&(Us(t,1),qT(t,1,0))}function _y(t){for(;t===cd;)cd=ga[--ya],ga[ya]=null,hd=ga[--ya],ga[ya]=null;for(;t===oo;)oo=Fn[--Bn],Fn[Bn]=null,Ki=Fn[--Bn],Fn[Bn]=null,Zi=Fn[--Bn],Fn[Bn]=null}var Sn=null,Pn=null,nt=!1,ni=null;function GT(t,e){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,Pn=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oo!==null?{id:Zi,overflow:Ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,Pn=null,!0):!1;default:return!1}}function Bm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Um(t){if(nt){var e=Pn;if(e){var n=e;if(!p0(t,e)){if(Bm(t))throw Error(Y(418));e=Kr(n.nextSibling);var i=Sn;e&&p0(t,e)?GT(i,n):(t.flags=t.flags&-4097|2,nt=!1,Sn=t)}}else{if(Bm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,nt=!1,Sn=t}}}function m0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function ch(t){if(t!==Sn)return!1;if(!nt)return m0(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vm(t.type,t.memoizedProps)),e&&(e=Pn)){if(Bm(t))throw ZT(),Error(Y(418));for(;e;)GT(t,e),e=Kr(e.nextSibling)}if(m0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=Kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=Sn?Kr(t.stateNode.nextSibling):null;return!0}function ZT(){for(var t=Pn;t;)t=Kr(t.nextSibling)}function za(){Pn=Sn=null,nt=!1}function vy(t){ni===null?ni=[t]:ni.push(t)}var Bk=pr.ReactCurrentBatchConfig;function Hl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function hh(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g0(t){var e=t._init;return e(t._payload)}function KT(t){function e(R,S){if(t){var C=R.deletions;C===null?(R.deletions=[S],R.flags|=16):C.push(S)}}function n(R,S){if(!t)return null;for(;S!==null;)e(R,S),S=S.sibling;return null}function i(R,S){for(R=new Map;S!==null;)S.key!==null?R.set(S.key,S):R.set(S.index,S),S=S.sibling;return R}function r(R,S){return R=Jr(R,S),R.index=0,R.sibling=null,R}function o(R,S,C){return R.index=C,t?(C=R.alternate,C!==null?(C=C.index,C<S?(R.flags|=2,S):C):(R.flags|=2,S)):(R.flags|=1048576,S)}function a(R){return t&&R.alternate===null&&(R.flags|=2),R}function u(R,S,C,F){return S===null||S.tag!==6?(S=Mp(C,R.mode,F),S.return=R,S):(S=r(S,C),S.return=R,S)}function h(R,S,C,F){var G=C.type;return G===ca?m(R,S,C.props.children,F,C.key):S!==null&&(S.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Nr&&g0(G)===S.type)?(F=r(S,C.props),F.ref=Hl(R,S,C),F.return=R,F):(F=Fh(C.type,C.key,C.props,null,R.mode,F),F.ref=Hl(R,S,C),F.return=R,F)}function f(R,S,C,F){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=Op(C,R.mode,F),S.return=R,S):(S=r(S,C.children||[]),S.return=R,S)}function m(R,S,C,F,G){return S===null||S.tag!==7?(S=eo(C,R.mode,F,G),S.return=R,S):(S=r(S,C),S.return=R,S)}function g(R,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Mp(""+S,R.mode,C),S.return=R,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case eh:return C=Fh(S.type,S.key,S.props,null,R.mode,C),C.ref=Hl(R,null,S),C.return=R,C;case ua:return S=Op(S,R.mode,C),S.return=R,S;case Nr:var F=S._init;return g(R,F(S._payload),C)}if(Kl(S)||jl(S))return S=eo(S,R.mode,C,null),S.return=R,S;hh(R,S)}return null}function _(R,S,C,F){var G=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return G!==null?null:u(R,S,""+C,F);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case eh:return C.key===G?h(R,S,C,F):null;case ua:return C.key===G?f(R,S,C,F):null;case Nr:return G=C._init,_(R,S,G(C._payload),F)}if(Kl(C)||jl(C))return G!==null?null:m(R,S,C,F,null);hh(R,C)}return null}function E(R,S,C,F,G){if(typeof F=="string"&&F!==""||typeof F=="number")return R=R.get(C)||null,u(S,R,""+F,G);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case eh:return R=R.get(F.key===null?C:F.key)||null,h(S,R,F,G);case ua:return R=R.get(F.key===null?C:F.key)||null,f(S,R,F,G);case Nr:var U=F._init;return E(R,S,C,U(F._payload),G)}if(Kl(F)||jl(F))return R=R.get(C)||null,m(S,R,F,G,null);hh(S,F)}return null}function k(R,S,C,F){for(var G=null,U=null,A=S,T=S=0,N=null;A!==null&&T<C.length;T++){A.index>T?(N=A,A=null):N=A.sibling;var M=_(R,A,C[T],F);if(M===null){A===null&&(A=N);break}t&&A&&M.alternate===null&&e(R,A),S=o(M,S,T),U===null?G=M:U.sibling=M,U=M,A=N}if(T===C.length)return n(R,A),nt&&Us(R,T),G;if(A===null){for(;T<C.length;T++)A=g(R,C[T],F),A!==null&&(S=o(A,S,T),U===null?G=A:U.sibling=A,U=A);return nt&&Us(R,T),G}for(A=i(R,A);T<C.length;T++)N=E(A,R,T,C[T],F),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?T:N.key),S=o(N,S,T),U===null?G=N:U.sibling=N,U=N);return t&&A.forEach(function(j){return e(R,j)}),nt&&Us(R,T),G}function b(R,S,C,F){var G=jl(C);if(typeof G!="function")throw Error(Y(150));if(C=G.call(C),C==null)throw Error(Y(151));for(var U=G=null,A=S,T=S=0,N=null,M=C.next();A!==null&&!M.done;T++,M=C.next()){A.index>T?(N=A,A=null):N=A.sibling;var j=_(R,A,M.value,F);if(j===null){A===null&&(A=N);break}t&&A&&j.alternate===null&&e(R,A),S=o(j,S,T),U===null?G=j:U.sibling=j,U=j,A=N}if(M.done)return n(R,A),nt&&Us(R,T),G;if(A===null){for(;!M.done;T++,M=C.next())M=g(R,M.value,F),M!==null&&(S=o(M,S,T),U===null?G=M:U.sibling=M,U=M);return nt&&Us(R,T),G}for(A=i(R,A);!M.done;T++,M=C.next())M=E(A,R,T,M.value,F),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?T:M.key),S=o(M,S,T),U===null?G=M:U.sibling=M,U=M);return t&&A.forEach(function(B){return e(R,B)}),nt&&Us(R,T),G}function V(R,S,C,F){if(typeof C=="object"&&C!==null&&C.type===ca&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case eh:e:{for(var G=C.key,U=S;U!==null;){if(U.key===G){if(G=C.type,G===ca){if(U.tag===7){n(R,U.sibling),S=r(U,C.props.children),S.return=R,R=S;break e}}else if(U.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Nr&&g0(G)===U.type){n(R,U.sibling),S=r(U,C.props),S.ref=Hl(R,U,C),S.return=R,R=S;break e}n(R,U);break}else e(R,U);U=U.sibling}C.type===ca?(S=eo(C.props.children,R.mode,F,C.key),S.return=R,R=S):(F=Fh(C.type,C.key,C.props,null,R.mode,F),F.ref=Hl(R,S,C),F.return=R,R=F)}return a(R);case ua:e:{for(U=C.key;S!==null;){if(S.key===U)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){n(R,S.sibling),S=r(S,C.children||[]),S.return=R,R=S;break e}else{n(R,S);break}else e(R,S);S=S.sibling}S=Op(C,R.mode,F),S.return=R,R=S}return a(R);case Nr:return U=C._init,V(R,S,U(C._payload),F)}if(Kl(C))return k(R,S,C,F);if(jl(C))return b(R,S,C,F);hh(R,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(n(R,S.sibling),S=r(S,C),S.return=R,R=S):(n(R,S),S=Mp(C,R.mode,F),S.return=R,R=S),a(R)):n(R,S)}return V}var Fa=KT(!0),QT=KT(!1),dd=Ts(null),fd=null,_a=null,wy=null;function xy(){wy=_a=fd=null}function Ty(t){var e=dd.current;tt(dd),t._currentValue=e}function Hm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ka(t,e){fd=t,wy=_a=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(wy!==t)if(t={context:t,memoizedValue:e,next:null},_a===null){if(fd===null)throw Error(Y(308));_a=t,fd.dependencies={lanes:0,firstContext:t}}else _a=_a.next=t;return e}var Ks=null;function Ey(t){Ks===null?Ks=[t]:Ks.push(t)}function XT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ey(e)):(n.next=r.next,r.next=n),e.interleaved=n,or(t,i)}function or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lr=!1;function Py(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,je&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,or(t,n)}return r=i.interleaved,r===null?(e.next=e,Ey(i)):(e.next=r.next,r.next=e),i.interleaved=e,or(t,n)}function Mh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,uy(t,n)}}function y0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pd(t,e,n,i){var r=t.updateQueue;Lr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var _=u.lane,E=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,b=u;switch(_=e,E=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){g=k.call(E,g,_);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,_=typeof k=="function"?k.call(E,g,_):k,_==null)break e;g=at({},g,_);break e;case 2:Lr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else E={eventTime:E,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=E,h=g):m=m.next=E,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);lo|=a,t.lanes=a,t.memoizedState=g}}function _0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var rc={},Ti=Ts(rc),Mu=Ts(rc),Ou=Ts(rc);function Qs(t){if(t===rc)throw Error(Y(174));return t}function Sy(t,e){switch(Ke(Ou,e),Ke(Mu,t),Ke(Ti,rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Em(e,t)}tt(Ti),Ke(Ti,e)}function Ba(){tt(Ti),tt(Mu),tt(Ou)}function JT(t){Qs(Ou.current);var e=Qs(Ti.current),n=Em(e,t.type);e!==n&&(Ke(Mu,t),Ke(Ti,n))}function Cy(t){Mu.current===t&&(tt(Ti),tt(Mu))}var it=Ts(0);function md(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ap=[];function Iy(){for(var t=0;t<Ap.length;t++)Ap[t]._workInProgressVersionPrimary=null;Ap.length=0}var Oh=pr.ReactCurrentDispatcher,bp=pr.ReactCurrentBatchConfig,ao=0,st=null,Ct=null,Dt=null,gd=!1,lu=!1,Du=0,Uk=0;function $t(){throw Error(Y(321))}function Ay(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!li(t[n],e[n]))return!1;return!0}function by(t,e,n,i,r,o){if(ao=o,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oh.current=t===null||t.memoizedState===null?qk:Gk,t=n(i,r),lu){o=0;do{if(lu=!1,Du=0,25<=o)throw Error(Y(301));o+=1,Dt=Ct=null,e.updateQueue=null,Oh.current=Zk,t=n(i,r)}while(lu)}if(Oh.current=yd,e=Ct!==null&&Ct.next!==null,ao=0,Dt=Ct=st=null,gd=!1,e)throw Error(Y(300));return t}function ky(){var t=Du!==0;return Du=0,t}function _i(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?st.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Gn(){if(Ct===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Dt===null?st.memoizedState:Dt.next;if(e!==null)Dt=e,Ct=t;else{if(t===null)throw Error(Y(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Dt===null?st.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Vu(t,e){return typeof e=="function"?e(t):e}function kp(t){var e=Gn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=Ct,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((ao&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,st.lanes|=m,lo|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,li(i,e.memoizedState)||(gn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,st.lanes|=o,lo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rp(t){var e=Gn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);li(o,e.memoizedState)||(gn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function eE(){}function tE(t,e){var n=st,i=Gn(),r=e(),o=!li(i.memoizedState,r);if(o&&(i.memoizedState=r,gn=!0),i=i.queue,Ry(rE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,ju(9,iE.bind(null,n,i,r,e),void 0,null),Vt===null)throw Error(Y(349));ao&30||nE(n,e,r)}return r}function nE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iE(t,e,n,i){e.value=n,e.getSnapshot=i,sE(e)&&oE(t)}function rE(t,e,n){return n(function(){sE(e)&&oE(t)})}function sE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!li(t,n)}catch{return!0}}function oE(t){var e=or(t,1);e!==null&&ai(e,t,1,-1)}function v0(t){var e=_i();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vu,lastRenderedState:t},e.queue=t,t=t.dispatch=$k.bind(null,st,t),[e.memoizedState,t]}function ju(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function aE(){return Gn().memoizedState}function Dh(t,e,n,i){var r=_i();st.flags|=t,r.memoizedState=ju(1|e,n,void 0,i===void 0?null:i)}function uf(t,e,n,i){var r=Gn();i=i===void 0?null:i;var o=void 0;if(Ct!==null){var a=Ct.memoizedState;if(o=a.destroy,i!==null&&Ay(i,a.deps)){r.memoizedState=ju(e,n,o,i);return}}st.flags|=t,r.memoizedState=ju(1|e,n,o,i)}function w0(t,e){return Dh(8390656,8,t,e)}function Ry(t,e){return uf(2048,8,t,e)}function lE(t,e){return uf(4,2,t,e)}function uE(t,e){return uf(4,4,t,e)}function cE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hE(t,e,n){return n=n!=null?n.concat([t]):null,uf(4,4,cE.bind(null,e,t),n)}function Ny(){}function dE(t,e){var n=Gn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ay(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function fE(t,e){var n=Gn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ay(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function pE(t,e,n){return ao&21?(li(n,e)||(n=vT(),st.lanes|=n,lo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=n)}function Hk(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var i=bp.transition;bp.transition={};try{t(!1),e()}finally{qe=n,bp.transition=i}}function mE(){return Gn().memoizedState}function Wk(t,e,n){var i=Yr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},gE(t))yE(e,n);else if(n=XT(t,e,n,i),n!==null){var r=on();ai(n,t,i,r),_E(n,e,i)}}function $k(t,e,n){var i=Yr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(gE(t))yE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,li(u,a)){var h=e.interleaved;h===null?(r.next=r,Ey(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=XT(t,e,r,i),n!==null&&(r=on(),ai(n,t,i,r),_E(n,e,i))}}function gE(t){var e=t.alternate;return t===st||e!==null&&e===st}function yE(t,e){lu=gd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _E(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,uy(t,n)}}var yd={readContext:qn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},qk={readContext:qn,useCallback:function(t,e){return _i().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:w0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dh(4194308,4,cE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dh(4,2,t,e)},useMemo:function(t,e){var n=_i();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=_i();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Wk.bind(null,st,t),[i.memoizedState,t]},useRef:function(t){var e=_i();return t={current:t},e.memoizedState=t},useState:v0,useDebugValue:Ny,useDeferredValue:function(t){return _i().memoizedState=t},useTransition:function(){var t=v0(!1),e=t[0];return t=Hk.bind(null,t[1]),_i().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=st,r=_i();if(nt){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Vt===null)throw Error(Y(349));ao&30||nE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,w0(rE.bind(null,i,o,t),[t]),i.flags|=2048,ju(9,iE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=_i(),e=Vt.identifierPrefix;if(nt){var n=Ki,i=Zi;n=(i&~(1<<32-oi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Du++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Uk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gk={readContext:qn,useCallback:dE,useContext:qn,useEffect:Ry,useImperativeHandle:hE,useInsertionEffect:lE,useLayoutEffect:uE,useMemo:fE,useReducer:kp,useRef:aE,useState:function(){return kp(Vu)},useDebugValue:Ny,useDeferredValue:function(t){var e=Gn();return pE(e,Ct.memoizedState,t)},useTransition:function(){var t=kp(Vu)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1},Zk={readContext:qn,useCallback:dE,useContext:qn,useEffect:Ry,useImperativeHandle:hE,useInsertionEffect:lE,useLayoutEffect:uE,useMemo:fE,useReducer:Rp,useRef:aE,useState:function(){return Rp(Vu)},useDebugValue:Ny,useDeferredValue:function(t){var e=Gn();return Ct===null?e.memoizedState=t:pE(e,Ct.memoizedState,t)},useTransition:function(){var t=Rp(Vu)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1};function ei(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:at({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cf={isMounted:function(t){return(t=t._reactInternals)?yo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=on(),r=Yr(t),o=er(i,r);o.payload=e,n!=null&&(o.callback=n),e=Qr(t,o,r),e!==null&&(ai(e,t,r,i),Mh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=on(),r=Yr(t),o=er(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Qr(t,o,r),e!==null&&(ai(e,t,r,i),Mh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=on(),i=Yr(t),r=er(n,i);r.tag=2,e!=null&&(r.callback=e),e=Qr(t,r,i),e!==null&&(ai(e,t,i,n),Mh(e,t,i))}};function x0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!ku(n,i)||!ku(r,o):!0}function vE(t,e,n){var i=!1,r=hs,o=e.contextType;return typeof o=="object"&&o!==null?o=qn(o):(r=_n(e)?so:Yt.current,i=e.contextTypes,o=(i=i!=null)?ja(t,r):hs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function T0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&cf.enqueueReplaceState(e,e.state,null)}function $m(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Py(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=qn(o):(o=_n(e)?so:Yt.current,r.context=ja(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Wm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&cf.enqueueReplaceState(r,r.state,null),pd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ua(t,e){try{var n="",i=e;do n+=Tb(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Np(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Kk=typeof WeakMap=="function"?WeakMap:Map;function wE(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){vd||(vd=!0,ng=i),qm(t,e)},n}function xE(t,e,n){n=er(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){qm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){qm(t,e),typeof i!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function E0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Kk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=u2.bind(null,t,e,n),e.then(t,t))}function P0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function S0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Qr(n,e,1))),n.lanes|=1),t)}var Qk=pr.ReactCurrentOwner,gn=!1;function sn(t,e,n,i){e.child=t===null?QT(e,null,n,i):Fa(e,t.child,n,i)}function C0(t,e,n,i,r){n=n.render;var o=e.ref;return ka(e,r),i=by(t,e,n,i,o,r),n=ky(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ar(t,e,r)):(nt&&n&&yy(e),e.flags|=1,sn(t,e,i,r),e.child)}function I0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Fy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,TE(t,e,o,i,r)):(t=Fh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(a,i)&&t.ref===e.ref)return ar(t,e,r)}return e.flags|=1,t=Jr(o,i),t.ref=e.ref,t.return=e,e.child=t}function TE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(ku(o,i)&&t.ref===e.ref)if(gn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,ar(t,e,r)}return Gm(t,e,n,i,r)}function EE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(wa,En),En|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(wa,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ke(wa,En),En|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Ke(wa,En),En|=i;return sn(t,e,r,n),e.child}function PE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gm(t,e,n,i,r){var o=_n(n)?so:Yt.current;return o=ja(e,o),ka(e,r),n=by(t,e,n,i,o,r),i=ky(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ar(t,e,r)):(nt&&i&&yy(e),e.flags|=1,sn(t,e,n,r),e.child)}function A0(t,e,n,i,r){if(_n(n)){var o=!0;ud(e)}else o=!1;if(ka(e,r),e.stateNode===null)Vh(t,e),vE(e,n,i),$m(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=qn(f):(f=_n(n)?so:Yt.current,f=ja(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&T0(e,a,i,f),Lr=!1;var _=e.memoizedState;a.state=_,pd(e,i,a,r),h=e.memoizedState,u!==i||_!==h||yn.current||Lr?(typeof m=="function"&&(Wm(e,n,m,i),h=e.memoizedState),(u=Lr||x0(e,n,u,i,_,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,YT(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ei(e.type,u),a.props=f,g=e.pendingProps,_=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=qn(h):(h=_n(n)?so:Yt.current,h=ja(e,h));var E=n.getDerivedStateFromProps;(m=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==h)&&T0(e,a,i,h),Lr=!1,_=e.memoizedState,a.state=_,pd(e,i,a,r);var k=e.memoizedState;u!==g||_!==k||yn.current||Lr?(typeof E=="function"&&(Wm(e,n,E,i),k=e.memoizedState),(f=Lr||x0(e,n,f,i,_,k,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Zm(t,e,n,i,o,r)}function Zm(t,e,n,i,r,o){PE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&f0(e,n,!1),ar(t,e,o);i=e.stateNode,Qk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Fa(e,t.child,null,o),e.child=Fa(e,null,u,o)):sn(t,e,u,o),e.memoizedState=i.state,r&&f0(e,n,!0),e.child}function SE(t){var e=t.stateNode;e.pendingContext?d0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&d0(t,e.context,!1),Sy(t,e.containerInfo)}function b0(t,e,n,i,r){return za(),vy(r),e.flags|=256,sn(t,e,n,i),e.child}var Km={dehydrated:null,treeContext:null,retryLane:0};function Qm(t){return{baseLanes:t,cachePool:null,transitions:null}}function CE(t,e,n){var i=e.pendingProps,r=it.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ke(it,r&1),t===null)return Um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ff(a,i,0,null),t=eo(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Qm(n),e.memoizedState=Km,t):Ly(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Xk(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Jr(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Jr(u,o):(o=eo(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Qm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Km,i}return o=t.child,t=o.sibling,i=Jr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ly(t,e){return e=ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dh(t,e,n,i){return i!==null&&vy(i),Fa(e,t.child,null,n),t=Ly(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xk(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Np(Error(Y(422))),dh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=ff({mode:"visible",children:i.children},r,0,null),o=eo(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Fa(e,t.child,null,a),e.child.memoizedState=Qm(a),e.memoizedState=Km,o);if(!(e.mode&1))return dh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(Y(419)),i=Np(o,i,void 0),dh(t,e,a,i)}if(u=(a&t.childLanes)!==0,gn||u){if(i=Vt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,or(t,r),ai(i,t,r,-1))}return zy(),i=Np(Error(Y(421))),dh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=c2.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Pn=Kr(r.nextSibling),Sn=e,nt=!0,ni=null,t!==null&&(Fn[Bn++]=Zi,Fn[Bn++]=Ki,Fn[Bn++]=oo,Zi=t.id,Ki=t.overflow,oo=e),e=Ly(e,i.children),e.flags|=4096,e)}function k0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Hm(t.return,e,n)}function Lp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function IE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(sn(t,e,i.children,n),i=it.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k0(t,n,e);else if(t.tag===19)k0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ke(it,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&md(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Lp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&md(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Lp(e,!0,n,null,o);break;case"together":Lp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),lo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yk(t,e,n){switch(e.tag){case 3:SE(e),za();break;case 5:JT(e);break;case 1:_n(e.type)&&ud(e);break;case 4:Sy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ke(dd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ke(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?CE(t,e,n):(Ke(it,it.current&1),t=ar(t,e,n),t!==null?t.sibling:null);Ke(it,it.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return IE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ke(it,it.current),i)break;return null;case 22:case 23:return e.lanes=0,EE(t,e,n)}return ar(t,e,n)}var AE,Xm,bE,kE;AE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xm=function(){};bE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Qs(Ti.current);var o=null;switch(n){case"input":r=vm(t,r),i=vm(t,i),o=[];break;case"select":r=at({},r,{value:void 0}),i=at({},i,{value:void 0}),o=[];break;case"textarea":r=Tm(t,r),i=Tm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ad)}Pm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Eu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Xe("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};kE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Wl(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Jk(t,e,n){var i=e.pendingProps;switch(_y(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return _n(e.type)&&ld(),qt(e),null;case 3:return i=e.stateNode,Ba(),tt(yn),tt(Yt),Iy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ch(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ni!==null&&(sg(ni),ni=null))),Xm(t,e),qt(e),null;case 5:Cy(e);var r=Qs(Ou.current);if(n=e.type,t!==null&&e.stateNode!=null)bE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return qt(e),null}if(t=Qs(Ti.current),ch(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[wi]=e,i[Lu]=o,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":case"embed":Xe("load",i);break;case"video":case"audio":for(r=0;r<Xl.length;r++)Xe(Xl[r],i);break;case"source":Xe("error",i);break;case"img":case"image":case"link":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"input":zv(i,o),Xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Xe("invalid",i);break;case"textarea":Bv(i,o),Xe("invalid",i)}Pm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&uh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&uh(i.textContent,u,t),r=["children",""+u]):Eu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Xe("scroll",i)}switch(n){case"input":th(i),Fv(i,o,!0);break;case"textarea":th(i),Uv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=ad)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[wi]=e,t[Lu]=i,AE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Sm(n,i),n){case"dialog":Xe("cancel",t),Xe("close",t),r=i;break;case"iframe":case"object":case"embed":Xe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Xl.length;r++)Xe(Xl[r],t);r=i;break;case"source":Xe("error",t),r=i;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),r=i;break;case"details":Xe("toggle",t),r=i;break;case"input":zv(t,i),r=vm(t,i),Xe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=at({},i,{value:void 0}),Xe("invalid",t);break;case"textarea":Bv(t,i),r=Tm(t,i),Xe("invalid",t);break;default:r=i}Pm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?aT(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&sT(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Pu(t,h):typeof h=="number"&&Pu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Eu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Xe("scroll",t):h!=null&&iy(t,o,h,a))}switch(n){case"input":th(t),Fv(t,i,!1);break;case"textarea":th(t),Uv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+cs(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ca(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ca(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ad)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)kE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Qs(Ou.current),Qs(Ti.current),ch(e)){if(i=e.stateNode,n=e.memoizedProps,i[wi]=e,(o=i.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:uh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[wi]=e,e.stateNode=i}return qt(e),null;case 13:if(tt(it),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&Pn!==null&&e.mode&1&&!(e.flags&128))ZT(),za(),e.flags|=98560,o=!1;else if(o=ch(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[wi]=e}else za(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),o=!1}else ni!==null&&(sg(ni),ni=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?At===0&&(At=3):zy())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return Ba(),Xm(t,e),t===null&&Ru(e.stateNode.containerInfo),qt(e),null;case 10:return Ty(e.type._context),qt(e),null;case 17:return _n(e.type)&&ld(),qt(e),null;case 19:if(tt(it),o=e.memoizedState,o===null)return qt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Wl(o,!1);else{if(At!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=md(t),a!==null){for(e.flags|=128,Wl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(it,it.current&1|2),e.child}t=t.sibling}o.tail!==null&&yt()>Ha&&(e.flags|=128,i=!0,Wl(o,!1),e.lanes=4194304)}else{if(!i)if(t=md(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!nt)return qt(e),null}else 2*yt()-o.renderingStartTime>Ha&&n!==1073741824&&(e.flags|=128,i=!0,Wl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=yt(),e.sibling=null,n=it.current,Ke(it,i?n&1|2:n&1),e):(qt(e),null);case 22:case 23:return jy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?En&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function e2(t,e){switch(_y(e),e.tag){case 1:return _n(e.type)&&ld(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ba(),tt(yn),tt(Yt),Iy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cy(e),null;case 13:if(tt(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));za()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(it),null;case 4:return Ba(),null;case 10:return Ty(e.type._context),null;case 22:case 23:return jy(),null;case 24:return null;default:return null}}var fh=!1,Qt=!1,t2=typeof WeakSet=="function"?WeakSet:Set,he=null;function va(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ht(t,e,i)}else n.current=null}function Ym(t,e,n){try{n()}catch(i){ht(t,e,i)}}var R0=!1;function n2(t,e){if(Om=rd,t=OT(),gy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var E;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(E=g.firstChild)!==null;)_=g,g=E;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(h=a),(E=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=E}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dm={focusedElem:t,selectionRange:n},rd=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,V=k.memoizedState,R=e.stateNode,S=R.getSnapshotBeforeUpdate(e.elementType===e.type?b:ei(e.type,b),V);R.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(F){ht(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return k=R0,R0=!1,k}function uu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Ym(e,n,o)}r=r.next}while(r!==i)}}function hf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RE(t){var e=t.alternate;e!==null&&(t.alternate=null,RE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wi],delete e[Lu],delete e[zm],delete e[jk],delete e[zk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NE(t){return t.tag===5||t.tag===3||t.tag===4}function N0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ad));else if(i!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}function tg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(tg(t,e,n),t=t.sibling;t!==null;)tg(t,e,n),t=t.sibling}var jt=null,ti=!1;function Ir(t,e,n){for(n=n.child;n!==null;)LE(t,e,n),n=n.sibling}function LE(t,e,n){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(nf,n)}catch{}switch(n.tag){case 5:Qt||va(n,e);case 6:var i=jt,r=ti;jt=null,Ir(t,e,n),jt=i,ti=r,jt!==null&&(ti?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(ti?(t=jt,n=n.stateNode,t.nodeType===8?Cp(t.parentNode,n):t.nodeType===1&&Cp(t,n),Au(t)):Cp(jt,n.stateNode));break;case 4:i=jt,r=ti,jt=n.stateNode.containerInfo,ti=!0,Ir(t,e,n),jt=i,ti=r;break;case 0:case 11:case 14:case 15:if(!Qt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ym(n,e,a),r=r.next}while(r!==i)}Ir(t,e,n);break;case 1:if(!Qt&&(va(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){ht(n,e,u)}Ir(t,e,n);break;case 21:Ir(t,e,n);break;case 22:n.mode&1?(Qt=(i=Qt)||n.memoizedState!==null,Ir(t,e,n),Qt=i):Ir(t,e,n);break;default:Ir(t,e,n)}}function L0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new t2),e.forEach(function(i){var r=h2.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Jn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:jt=u.stateNode,ti=!1;break e;case 3:jt=u.stateNode.containerInfo,ti=!0;break e;case 4:jt=u.stateNode.containerInfo,ti=!0;break e}u=u.return}if(jt===null)throw Error(Y(160));LE(o,a,r),jt=null,ti=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){ht(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ME(e,t),e=e.sibling}function ME(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jn(e,t),yi(t),i&4){try{uu(3,t,t.return),hf(3,t)}catch(b){ht(t,t.return,b)}try{uu(5,t,t.return)}catch(b){ht(t,t.return,b)}}break;case 1:Jn(e,t),yi(t),i&512&&n!==null&&va(n,n.return);break;case 5:if(Jn(e,t),yi(t),i&512&&n!==null&&va(n,n.return),t.flags&32){var r=t.stateNode;try{Pu(r,"")}catch(b){ht(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&nT(r,o),Sm(u,a);var f=Sm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?aT(r,g):m==="dangerouslySetInnerHTML"?sT(r,g):m==="children"?Pu(r,g):iy(r,m,g,f)}switch(u){case"input":wm(r,o);break;case"textarea":iT(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?Ca(r,!!o.multiple,E,!1):_!==!!o.multiple&&(o.defaultValue!=null?Ca(r,!!o.multiple,o.defaultValue,!0):Ca(r,!!o.multiple,o.multiple?[]:"",!1))}r[Lu]=o}catch(b){ht(t,t.return,b)}}break;case 6:if(Jn(e,t),yi(t),i&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){ht(t,t.return,b)}}break;case 3:if(Jn(e,t),yi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Au(e.containerInfo)}catch(b){ht(t,t.return,b)}break;case 4:Jn(e,t),yi(t);break;case 13:Jn(e,t),yi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Dy=yt())),i&4&&L0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(f=Qt)||m,Jn(e,t),Qt=f):Jn(e,t),yi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(he=t,m=t.child;m!==null;){for(g=he=m;he!==null;){switch(_=he,E=_.child,_.tag){case 0:case 11:case 14:case 15:uu(4,_,_.return);break;case 1:va(_,_.return);var k=_.stateNode;if(typeof k.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(b){ht(i,n,b)}}break;case 5:va(_,_.return);break;case 22:if(_.memoizedState!==null){O0(g);continue}}E!==null?(E.return=_,he=E):O0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=oT("display",a))}catch(b){ht(t,t.return,b)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(b){ht(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Jn(e,t),yi(t),i&4&&L0(t);break;case 21:break;default:Jn(e,t),yi(t)}}function yi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Pu(r,""),i.flags&=-33);var o=N0(t);tg(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=N0(t);eg(t,u,a);break;default:throw Error(Y(161))}}catch(h){ht(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function i2(t,e,n){he=t,OE(t)}function OE(t,e,n){for(var i=(t.mode&1)!==0;he!==null;){var r=he,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||fh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Qt;u=fh;var f=Qt;if(fh=a,(Qt=h)&&!f)for(he=r;he!==null;)a=he,h=a.child,a.tag===22&&a.memoizedState!==null?D0(r):h!==null?(h.return=a,he=h):D0(r);for(;o!==null;)he=o,OE(o),o=o.sibling;he=r,fh=u,Qt=f}M0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,he=o):M0(t)}}function M0(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||hf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Qt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ei(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&_0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Au(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Qt||e.flags&512&&Jm(e)}catch(_){ht(e,e.return,_)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function O0(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function D0(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hf(4,e)}catch(h){ht(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){ht(e,r,h)}}var o=e.return;try{Jm(e)}catch(h){ht(e,o,h)}break;case 5:var a=e.return;try{Jm(e)}catch(h){ht(e,a,h)}}}catch(h){ht(e,e.return,h)}if(e===t){he=null;break}var u=e.sibling;if(u!==null){u.return=e.return,he=u;break}he=e.return}}var r2=Math.ceil,_d=pr.ReactCurrentDispatcher,My=pr.ReactCurrentOwner,$n=pr.ReactCurrentBatchConfig,je=0,Vt=null,Et=null,Bt=0,En=0,wa=Ts(0),At=0,zu=null,lo=0,df=0,Oy=0,cu=null,mn=null,Dy=0,Ha=1/0,qi=null,vd=!1,ng=null,Xr=null,ph=!1,Ur=null,wd=0,hu=0,ig=null,jh=-1,zh=0;function on(){return je&6?yt():jh!==-1?jh:jh=yt()}function Yr(t){return t.mode&1?je&2&&Bt!==0?Bt&-Bt:Bk.transition!==null?(zh===0&&(zh=vT()),zh):(t=qe,t!==0||(t=window.event,t=t===void 0?16:CT(t.type)),t):1}function ai(t,e,n,i){if(50<hu)throw hu=0,ig=null,Error(Y(185));tc(t,n,i),(!(je&2)||t!==Vt)&&(t===Vt&&(!(je&2)&&(df|=n),At===4&&Dr(t,Bt)),vn(t,i),n===1&&je===0&&!(e.mode&1)&&(Ha=yt()+500,lf&&Es()))}function vn(t,e){var n=t.callbackNode;Bb(t,e);var i=id(t,t===Vt?Bt:0);if(i===0)n!==null&&$v(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&$v(n),e===1)t.tag===0?Fk(V0.bind(null,t)):$T(V0.bind(null,t)),Dk(function(){!(je&6)&&Es()}),n=null;else{switch(wT(i)){case 1:n=ly;break;case 4:n=yT;break;case 16:n=nd;break;case 536870912:n=_T;break;default:n=nd}n=HE(n,DE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function DE(t,e){if(jh=-1,zh=0,je&6)throw Error(Y(327));var n=t.callbackNode;if(Ra()&&t.callbackNode!==n)return null;var i=id(t,t===Vt?Bt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=xd(t,i);else{e=i;var r=je;je|=2;var o=jE();(Vt!==t||Bt!==e)&&(qi=null,Ha=yt()+500,Js(t,e));do try{a2();break}catch(u){VE(t,u)}while(!0);xy(),_d.current=o,je=r,Et!==null?e=0:(Vt=null,Bt=0,e=At)}if(e!==0){if(e===2&&(r=km(t),r!==0&&(i=r,e=rg(t,r))),e===1)throw n=zu,Js(t,0),Dr(t,i),vn(t,yt()),n;if(e===6)Dr(t,i);else{if(r=t.current.alternate,!(i&30)&&!s2(r)&&(e=xd(t,i),e===2&&(o=km(t),o!==0&&(i=o,e=rg(t,o))),e===1))throw n=zu,Js(t,0),Dr(t,i),vn(t,yt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:Hs(t,mn,qi);break;case 3:if(Dr(t,i),(i&130023424)===i&&(e=Dy+500-yt(),10<e)){if(id(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){on(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=jm(Hs.bind(null,t,mn,qi),e);break}Hs(t,mn,qi);break;case 4:if(Dr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-oi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=yt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*r2(i/1960))-i,10<i){t.timeoutHandle=jm(Hs.bind(null,t,mn,qi),i);break}Hs(t,mn,qi);break;case 5:Hs(t,mn,qi);break;default:throw Error(Y(329))}}}return vn(t,yt()),t.callbackNode===n?DE.bind(null,t):null}function rg(t,e){var n=cu;return t.current.memoizedState.isDehydrated&&(Js(t,e).flags|=256),t=xd(t,e),t!==2&&(e=mn,mn=n,e!==null&&sg(e)),t}function sg(t){mn===null?mn=t:mn.push.apply(mn,t)}function s2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!li(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dr(t,e){for(e&=~Oy,e&=~df,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oi(e),i=1<<n;t[n]=-1,e&=~i}}function V0(t){if(je&6)throw Error(Y(327));Ra();var e=id(t,0);if(!(e&1))return vn(t,yt()),null;var n=xd(t,e);if(t.tag!==0&&n===2){var i=km(t);i!==0&&(e=i,n=rg(t,i))}if(n===1)throw n=zu,Js(t,0),Dr(t,e),vn(t,yt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hs(t,mn,qi),vn(t,yt()),null}function Vy(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(Ha=yt()+500,lf&&Es())}}function uo(t){Ur!==null&&Ur.tag===0&&!(je&6)&&Ra();var e=je;je|=1;var n=$n.transition,i=qe;try{if($n.transition=null,qe=1,t)return t()}finally{qe=i,$n.transition=n,je=e,!(je&6)&&Es()}}function jy(){En=wa.current,tt(wa)}function Js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ok(n)),Et!==null)for(n=Et.return;n!==null;){var i=n;switch(_y(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ld();break;case 3:Ba(),tt(yn),tt(Yt),Iy();break;case 5:Cy(i);break;case 4:Ba();break;case 13:tt(it);break;case 19:tt(it);break;case 10:Ty(i.type._context);break;case 22:case 23:jy()}n=n.return}if(Vt=t,Et=t=Jr(t.current,null),Bt=En=e,At=0,zu=null,Oy=df=lo=0,mn=cu=null,Ks!==null){for(e=0;e<Ks.length;e++)if(n=Ks[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Ks=null}return t}function VE(t,e){do{var n=Et;try{if(xy(),Oh.current=yd,gd){for(var i=st.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}gd=!1}if(ao=0,Dt=Ct=st=null,lu=!1,Du=0,My.current=null,n===null||n.return===null){At=1,zu=e,Et=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Bt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=P0(a);if(E!==null){E.flags&=-257,S0(E,a,u,o,e),E.mode&1&&E0(o,f,e),e=E,h=f;var k=e.updateQueue;if(k===null){var b=new Set;b.add(h),e.updateQueue=b}else k.add(h);break e}else{if(!(e&1)){E0(o,f,e),zy();break e}h=Error(Y(426))}}else if(nt&&u.mode&1){var V=P0(a);if(V!==null){!(V.flags&65536)&&(V.flags|=256),S0(V,a,u,o,e),vy(Ua(h,u));break e}}o=h=Ua(h,u),At!==4&&(At=2),cu===null?cu=[o]:cu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=wE(o,h,e);y0(o,R);break e;case 1:u=h;var S=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Xr===null||!Xr.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=xE(o,u,e);y0(o,F);break e}}o=o.return}while(o!==null)}FE(n)}catch(G){e=G,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function jE(){var t=_d.current;return _d.current=yd,t===null?yd:t}function zy(){(At===0||At===3||At===2)&&(At=4),Vt===null||!(lo&268435455)&&!(df&268435455)||Dr(Vt,Bt)}function xd(t,e){var n=je;je|=2;var i=jE();(Vt!==t||Bt!==e)&&(qi=null,Js(t,e));do try{o2();break}catch(r){VE(t,r)}while(!0);if(xy(),je=n,_d.current=i,Et!==null)throw Error(Y(261));return Vt=null,Bt=0,At}function o2(){for(;Et!==null;)zE(Et)}function a2(){for(;Et!==null&&!Nb();)zE(Et)}function zE(t){var e=UE(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?FE(t):Et=e,My.current=null}function FE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=e2(n,e),n!==null){n.flags&=32767,Et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{At=6,Et=null;return}}else if(n=Jk(n,e,En),n!==null){Et=n;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=t}while(e!==null);At===0&&(At=5)}function Hs(t,e,n){var i=qe,r=$n.transition;try{$n.transition=null,qe=1,l2(t,e,n,i)}finally{$n.transition=r,qe=i}return null}function l2(t,e,n,i){do Ra();while(Ur!==null);if(je&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Ub(t,o),t===Vt&&(Et=Vt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ph||(ph=!0,HE(nd,function(){return Ra(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$n.transition,$n.transition=null;var a=qe;qe=1;var u=je;je|=4,My.current=null,n2(t,n),ME(n,t),Ak(Dm),rd=!!Om,Dm=Om=null,t.current=n,i2(n),Lb(),je=u,qe=a,$n.transition=o}else t.current=n;if(ph&&(ph=!1,Ur=t,wd=r),o=t.pendingLanes,o===0&&(Xr=null),Db(n.stateNode),vn(t,yt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(vd)throw vd=!1,t=ng,ng=null,t;return wd&1&&t.tag!==0&&Ra(),o=t.pendingLanes,o&1?t===ig?hu++:(hu=0,ig=t):hu=0,Es(),null}function Ra(){if(Ur!==null){var t=wT(wd),e=$n.transition,n=qe;try{if($n.transition=null,qe=16>t?16:t,Ur===null)var i=!1;else{if(t=Ur,Ur=null,wd=0,je&6)throw Error(Y(331));var r=je;for(je|=4,he=t.current;he!==null;){var o=he,a=o.child;if(he.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(he=f;he!==null;){var m=he;switch(m.tag){case 0:case 11:case 15:uu(8,m,o)}var g=m.child;if(g!==null)g.return=m,he=g;else for(;he!==null;){m=he;var _=m.sibling,E=m.return;if(RE(m),m===f){he=null;break}if(_!==null){_.return=E,he=_;break}he=E}}}var k=o.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var V=b.sibling;b.sibling=null,b=V}while(b!==null)}}he=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,he=a;else e:for(;he!==null;){if(o=he,o.flags&2048)switch(o.tag){case 0:case 11:case 15:uu(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,he=R;break e}he=o.return}}var S=t.current;for(he=S;he!==null;){a=he;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,he=C;else e:for(a=S;he!==null;){if(u=he,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:hf(9,u)}}catch(G){ht(u,u.return,G)}if(u===a){he=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,he=F;break e}he=u.return}}if(je=r,Es(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(nf,t)}catch{}i=!0}return i}finally{qe=n,$n.transition=e}}return!1}function j0(t,e,n){e=Ua(n,e),e=wE(t,e,1),t=Qr(t,e,1),e=on(),t!==null&&(tc(t,1,e),vn(t,e))}function ht(t,e,n){if(t.tag===3)j0(t,t,n);else for(;e!==null;){if(e.tag===3){j0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xr===null||!Xr.has(i))){t=Ua(n,t),t=xE(e,t,1),e=Qr(e,t,1),t=on(),e!==null&&(tc(e,1,t),vn(e,t));break}}e=e.return}}function u2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=on(),t.pingedLanes|=t.suspendedLanes&n,Vt===t&&(Bt&n)===n&&(At===4||At===3&&(Bt&130023424)===Bt&&500>yt()-Dy?Js(t,0):Oy|=n),vn(t,e)}function BE(t,e){e===0&&(t.mode&1?(e=rh,rh<<=1,!(rh&130023424)&&(rh=4194304)):e=1);var n=on();t=or(t,e),t!==null&&(tc(t,e,n),vn(t,n))}function c2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BE(t,n)}function h2(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),BE(t,n)}var UE;UE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gn=!1,Yk(t,e,n);gn=!!(t.flags&131072)}else gn=!1,nt&&e.flags&1048576&&qT(e,hd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Vh(t,e),t=e.pendingProps;var r=ja(e,Yt.current);ka(e,n),r=by(null,e,i,t,r,n);var o=ky();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(i)?(o=!0,ud(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Py(e),r.updater=cf,e.stateNode=r,r._reactInternals=e,$m(e,i,t,n),e=Zm(null,e,i,!0,o,n)):(e.tag=0,nt&&o&&yy(e),sn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Vh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=f2(i),t=ei(i,t),r){case 0:e=Gm(null,e,i,t,n);break e;case 1:e=A0(null,e,i,t,n);break e;case 11:e=C0(null,e,i,t,n);break e;case 14:e=I0(null,e,i,ei(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),Gm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),A0(t,e,i,r,n);case 3:e:{if(SE(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,r=o.element,YT(t,e),pd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Ua(Error(Y(423)),e),e=b0(t,e,i,n,r);break e}else if(i!==r){r=Ua(Error(Y(424)),e),e=b0(t,e,i,n,r);break e}else for(Pn=Kr(e.stateNode.containerInfo.firstChild),Sn=e,nt=!0,ni=null,n=QT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(za(),i===r){e=ar(t,e,n);break e}sn(t,e,i,n)}e=e.child}return e;case 5:return JT(e),t===null&&Um(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Vm(i,r)?a=null:o!==null&&Vm(i,o)&&(e.flags|=32),PE(t,e),sn(t,e,a,n),e.child;case 6:return t===null&&Um(e),null;case 13:return CE(t,e,n);case 4:return Sy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Fa(e,null,i,n):sn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),C0(t,e,i,r,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Ke(dd,i._currentValue),i._currentValue=a,o!==null)if(li(o.value,a)){if(o.children===r.children&&!yn.current){e=ar(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=er(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Hm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Y(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Hm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}sn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ka(e,n),r=qn(r),i=i(r),e.flags|=1,sn(t,e,i,n),e.child;case 14:return i=e.type,r=ei(i,e.pendingProps),r=ei(i.type,r),I0(t,e,i,r,n);case 15:return TE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),Vh(t,e),e.tag=1,_n(i)?(t=!0,ud(e)):t=!1,ka(e,n),vE(e,i,r),$m(e,i,r,n),Zm(null,e,i,!0,t,n);case 19:return IE(t,e,n);case 22:return EE(t,e,n)}throw Error(Y(156,e.tag))};function HE(t,e){return gT(t,e)}function d2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,i){return new d2(t,e,n,i)}function Fy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function f2(t){if(typeof t=="function")return Fy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sy)return 11;if(t===oy)return 14}return 2}function Jr(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Fy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ca:return eo(n.children,r,o,e);case ry:a=8,r|=8;break;case mm:return t=Wn(12,n,e,r|2),t.elementType=mm,t.lanes=o,t;case gm:return t=Wn(13,n,e,r),t.elementType=gm,t.lanes=o,t;case ym:return t=Wn(19,n,e,r),t.elementType=ym,t.lanes=o,t;case J1:return ff(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X1:a=10;break e;case Y1:a=9;break e;case sy:a=11;break e;case oy:a=14;break e;case Nr:a=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Wn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function eo(t,e,n,i){return t=Wn(7,t,i,e),t.lanes=n,t}function ff(t,e,n,i){return t=Wn(22,t,i,e),t.elementType=J1,t.lanes=n,t.stateNode={isHidden:!1},t}function Mp(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function Op(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p2(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mp(0),this.expirationTimes=mp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function By(t,e,n,i,r,o,a,u,h){return t=new p2(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Wn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Py(o),t}function m2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ua,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function WE(t){if(!t)return hs;t=t._reactInternals;e:{if(yo(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(_n(n))return WT(t,n,e)}return e}function $E(t,e,n,i,r,o,a,u,h){return t=By(n,i,!0,t,r,o,a,u,h),t.context=WE(null),n=t.current,i=on(),r=Yr(n),o=er(i,r),o.callback=e??null,Qr(n,o,r),t.current.lanes=r,tc(t,r,i),vn(t,i),t}function pf(t,e,n,i){var r=e.current,o=on(),a=Yr(r);return n=WE(n),e.context===null?e.context=n:e.pendingContext=n,e=er(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Qr(r,e,a),t!==null&&(ai(t,r,a,o),Mh(t,r,a)),a}function Td(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function z0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uy(t,e){z0(t,e),(t=t.alternate)&&z0(t,e)}function g2(){return null}var qE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hy(t){this._internalRoot=t}mf.prototype.render=Hy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));pf(t,e,null,null)};mf.prototype.unmount=Hy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uo(function(){pf(null,t,null,null)}),e[sr]=null}};function mf(t){this._internalRoot=t}mf.prototype.unstable_scheduleHydration=function(t){if(t){var e=ET();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Or.length&&e!==0&&e<Or[n].priority;n++);Or.splice(n,0,t),n===0&&ST(t)}};function Wy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function F0(){}function y2(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Td(a);o.call(f)}}var a=$E(e,i,t,0,null,!1,!1,"",F0);return t._reactRootContainer=a,t[sr]=a.current,Ru(t.nodeType===8?t.parentNode:t),uo(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Td(h);u.call(f)}}var h=By(t,0,!1,null,null,!1,!1,"",F0);return t._reactRootContainer=h,t[sr]=h.current,Ru(t.nodeType===8?t.parentNode:t),uo(function(){pf(e,h,n,i)}),h}function yf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=Td(a);u.call(h)}}pf(e,a,t,r)}else a=y2(n,e,t,r,i);return Td(a)}xT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ql(e.pendingLanes);n!==0&&(uy(e,n|1),vn(e,yt()),!(je&6)&&(Ha=yt()+500,Es()))}break;case 13:uo(function(){var i=or(t,1);if(i!==null){var r=on();ai(i,t,1,r)}}),Uy(t,1)}};cy=function(t){if(t.tag===13){var e=or(t,134217728);if(e!==null){var n=on();ai(e,t,134217728,n)}Uy(t,134217728)}};TT=function(t){if(t.tag===13){var e=Yr(t),n=or(t,e);if(n!==null){var i=on();ai(n,t,e,i)}Uy(t,e)}};ET=function(){return qe};PT=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};Im=function(t,e,n){switch(e){case"input":if(wm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=af(i);if(!r)throw Error(Y(90));tT(i),wm(i,r)}}}break;case"textarea":iT(t,n);break;case"select":e=n.value,e!=null&&Ca(t,!!n.multiple,e,!1)}};cT=Vy;hT=uo;var _2={usingClientEntryPoint:!1,Events:[ic,pa,af,lT,uT,Vy]},$l={findFiberByHostInstance:Zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v2={bundleType:$l.bundleType,version:$l.version,rendererPackageName:$l.rendererPackageName,rendererConfig:$l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pT(t),t===null?null:t.stateNode},findFiberByHostInstance:$l.findFiberByHostInstance||g2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mh.isDisabled&&mh.supportsFiber)try{nf=mh.inject(v2),xi=mh}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_2;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wy(e))throw Error(Y(200));return m2(t,e,null,n)};bn.createRoot=function(t,e){if(!Wy(t))throw Error(Y(299));var n=!1,i="",r=qE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=By(t,1,!1,null,null,n,!1,i,r),t[sr]=e.current,Ru(t.nodeType===8?t.parentNode:t),new Hy(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=pT(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return uo(t)};bn.hydrate=function(t,e,n){if(!gf(e))throw Error(Y(200));return yf(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!Wy(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=qE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=$E(e,null,t,1,n??null,r,!1,o,a),t[sr]=e.current,Ru(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new mf(e)};bn.render=function(t,e,n){if(!gf(e))throw Error(Y(200));return yf(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!gf(t))throw Error(Y(40));return t._reactRootContainer?(uo(function(){yf(null,null,t,!1,function(){t._reactRootContainer=null,t[sr]=null})}),!0):!1};bn.unstable_batchedUpdates=Vy;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!gf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return yf(t,e,n,!1,i)};bn.version="18.3.1-next-f1338f8080-20240426";function GE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GE)}catch(t){console.error(t)}}GE(),G1.exports=bn;var w2=G1.exports,B0=w2;fm.createRoot=B0.createRoot,fm.hydrateRoot=B0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fu.apply(this,arguments)}var Hr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hr||(Hr={}));const U0="popstate";function x2(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=_o(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),og("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:Ed(o))}function i(r,o){_f(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return E2(e,n,i,t)}function ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _f(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function T2(){return Math.random().toString(36).substr(2,8)}function H0(t,e){return{usr:t.state,key:t.key,idx:e}}function og(t,e,n,i){return n===void 0&&(n=null),Fu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_o(e):e,{state:n,key:e&&e.key||i||T2()})}function Ed(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function _o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function E2(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Hr.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(Fu({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Hr.Pop;let V=m(),R=V==null?null:V-f;f=V,h&&h({action:u,location:b.location,delta:R})}function _(V,R){u=Hr.Push;let S=og(b.location,V,R);n&&n(S,V),f=m()+1;let C=H0(S,f),F=b.createHref(S);try{a.pushState(C,"",F)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(F)}o&&h&&h({action:u,location:b.location,delta:1})}function E(V,R){u=Hr.Replace;let S=og(b.location,V,R);n&&n(S,V),f=m();let C=H0(S,f),F=b.createHref(S);a.replaceState(C,"",F),o&&h&&h({action:u,location:b.location,delta:0})}function k(V){let R=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof V=="string"?V:Ed(V);return S=S.replace(/ $/,"%20"),ot(R,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,R)}let b={get action(){return u},get location(){return t(r,a)},listen(V){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(U0,g),h=V,()=>{r.removeEventListener(U0,g),h=null}},createHref(V){return e(r,V)},createURL:k,encodeLocation(V){let R=k(V);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:_,replace:E,go(V){return a.go(V)}};return b}var W0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(W0||(W0={}));function P2(t,e,n){return n===void 0&&(n="/"),S2(t,e,n)}function S2(t,e,n,i){let r=typeof e=="string"?_o(e):e,o=Wa(r.pathname||"/",n);if(o==null)return null;let a=ZE(t);C2(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=V2(o);u=O2(a[h],f)}return u}function ZE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(ot(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=es([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(ot(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),ZE(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:L2(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of KE(o.path))r(o,a,h)}),e}function KE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=KE(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function C2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:M2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const I2=/^:[\w-]+$/,A2=3,b2=2,k2=1,R2=10,N2=-2,$0=t=>t==="*";function L2(t,e){let n=t.split("/"),i=n.length;return n.some($0)&&(i+=N2),e&&(i+=b2),n.filter(r=>!$0(r)).reduce((r,o)=>r+(I2.test(o)?A2:o===""?k2:R2),i)}function M2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function O2(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=ag({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),_=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:es([o,g.pathname]),pathnameBase:U2(es([o,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(o=es([o,g.pathnameBase]))}return a}function ag(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=D2(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:_,isOptional:E}=m;if(_==="*"){let b=u[g]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const k=u[g];return E&&!k?f[_]=void 0:f[_]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function D2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_f(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function V2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _f(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const j2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z2=t=>j2.test(t);function F2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?_o(t):t,o;if(n)if(z2(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),_f(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=q0(n.substring(1),"/"):o=q0(n,e)}else o=e;return{pathname:o,search:H2(i),hash:W2(r)}}function q0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Dp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function B2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $y(t,e){let n=B2(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function qy(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=_o(t):(r=Fu({},t),ot(!r.pathname||!r.pathname.includes("?"),Dp("?","pathname","search",r)),ot(!r.pathname||!r.pathname.includes("#"),Dp("#","pathname","hash",r)),ot(!r.search||!r.search.includes("#"),Dp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}u=g>=0?e[g]:"/"}let h=F2(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const es=t=>t.join("/").replace(/\/\/+/g,"/"),U2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),H2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,W2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const QE=["post","put","patch","delete"];new Set(QE);const q2=["get",...QE];new Set(q2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bu(){return Bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bu.apply(this,arguments)}const vf=D.createContext(null),XE=D.createContext(null),mr=D.createContext(null),wf=D.createContext(null),Ps=D.createContext({outlet:null,matches:[],isDataRoute:!1}),YE=D.createContext(null);function G2(t,e){let{relative:n}=e===void 0?{}:e;rl()||ot(!1);let{basename:i,navigator:r}=D.useContext(mr),{hash:o,pathname:a,search:u}=Tf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:es([i,a])),r.createHref({pathname:h,search:u,hash:o})}function rl(){return D.useContext(wf)!=null}function vo(){return rl()||ot(!1),D.useContext(wf).location}function JE(t){D.useContext(mr).static||D.useLayoutEffect(t)}function xf(){let{isDataRoute:t}=D.useContext(Ps);return t?oR():Z2()}function Z2(){rl()||ot(!1);let t=D.useContext(vf),{basename:e,future:n,navigator:i}=D.useContext(mr),{matches:r}=D.useContext(Ps),{pathname:o}=vo(),a=JSON.stringify($y(r,n.v7_relativeSplatPath)),u=D.useRef(!1);return JE(()=>{u.current=!0}),D.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=qy(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:es([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function Tf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=D.useContext(mr),{matches:r}=D.useContext(Ps),{pathname:o}=vo(),a=JSON.stringify($y(r,i.v7_relativeSplatPath));return D.useMemo(()=>qy(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function K2(t,e){return Q2(t,e)}function Q2(t,e,n,i){rl()||ot(!1);let{navigator:r}=D.useContext(mr),{matches:o}=D.useContext(Ps),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=vo(),m;if(e){var g;let V=typeof e=="string"?_o(e):e;h==="/"||(g=V.pathname)!=null&&g.startsWith(h)||ot(!1),m=V}else m=f;let _=m.pathname||"/",E=_;if(h!=="/"){let V=h.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(V.length).join("/")}let k=P2(t,{pathname:E}),b=tR(k&&k.map(V=>Object.assign({},V,{params:Object.assign({},u,V.params),pathname:es([h,r.encodeLocation?r.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?h:es([h,r.encodeLocation?r.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,n,i);return e&&b?D.createElement(wf.Provider,{value:{location:Bu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Hr.Pop}},b):b}function X2(){let t=sR(),e=$2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:r},n):null,null)}const Y2=D.createElement(X2,null);class J2 extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Ps.Provider,{value:this.props.routeContext},D.createElement(YE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eR(t){let{routeContext:e,match:n,children:i}=t,r=D.useContext(vf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ps.Provider,{value:e},i)}function tR(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||ot(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:_,errors:E}=n,k=g.route.loader&&_[g.route.id]===void 0&&(!E||E[g.route.id]===void 0);if(g.route.lazy||k){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let E,k=!1,b=null,V=null;n&&(E=u&&g.route.id?u[g.route.id]:void 0,b=g.route.errorElement||Y2,h&&(f<0&&_===0?(aR("route-fallback"),k=!0,V=null):f===_&&(k=!0,V=g.route.hydrateFallbackElement||null)));let R=e.concat(a.slice(0,_+1)),S=()=>{let C;return E?C=b:k?C=V:g.route.Component?C=D.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=m,D.createElement(eR,{match:g,routeContext:{outlet:m,matches:R,isDataRoute:n!=null},children:C})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?D.createElement(J2,{location:n.location,revalidation:n.revalidation,component:b,error:E,children:S(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):S()},null)}var eP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(eP||{}),tP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tP||{});function nR(t){let e=D.useContext(vf);return e||ot(!1),e}function iR(t){let e=D.useContext(XE);return e||ot(!1),e}function rR(t){let e=D.useContext(Ps);return e||ot(!1),e}function nP(t){let e=rR(),n=e.matches[e.matches.length-1];return n.route.id||ot(!1),n.route.id}function sR(){var t;let e=D.useContext(YE),n=iR(),i=nP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function oR(){let{router:t}=nR(eP.UseNavigateStable),e=nP(tP.UseNavigateStable),n=D.useRef(!1);return JE(()=>{n.current=!0}),D.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Bu({fromRouteId:e},o)))},[t,e])}const G0={};function aR(t,e,n){G0[t]||(G0[t]=!0)}function lR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function iP(t){let{to:e,replace:n,state:i,relative:r}=t;rl()||ot(!1);let{future:o,static:a}=D.useContext(mr),{matches:u}=D.useContext(Ps),{pathname:h}=vo(),f=xf(),m=qy(e,$y(u,o.v7_relativeSplatPath),h,r==="path"),g=JSON.stringify(m);return D.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function kr(t){ot(!1)}function uR(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Hr.Pop,navigator:o,static:a=!1,future:u}=t;rl()&&ot(!1);let h=e.replace(/^\/*/,"/"),f=D.useMemo(()=>({basename:h,navigator:o,static:a,future:Bu({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=_o(i));let{pathname:m="/",search:g="",hash:_="",state:E=null,key:k="default"}=i,b=D.useMemo(()=>{let V=Wa(m,h);return V==null?null:{location:{pathname:V,search:g,hash:_,state:E,key:k},navigationType:r}},[h,m,g,_,E,k,r]);return b==null?null:D.createElement(mr.Provider,{value:f},D.createElement(wf.Provider,{children:n,value:b}))}function cR(t){let{children:e,location:n}=t;return K2(lg(e),n)}new Promise(()=>{});function lg(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(i,r)=>{if(!D.isValidElement(i))return;let o=[...e,r];if(i.type===D.Fragment){n.push.apply(n,lg(i.props.children,o));return}i.type!==kr&&ot(!1),!i.props.index||!i.props.children||ot(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=lg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pd(){return Pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pd.apply(this,arguments)}function rP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function hR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dR(t,e){return t.button===0&&(!e||e==="_self")&&!hR(t)}const fR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],mR="6";try{window.__reactRouterVersion=mR}catch{}const gR=D.createContext({isTransitioning:!1}),yR="startTransition",Z0=ub[yR];function _R(t){let{basename:e,children:n,future:i,window:r}=t,o=D.useRef();o.current==null&&(o.current=x2({window:r,v5Compat:!0}));let a=o.current,[u,h]=D.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=D.useCallback(g=>{f&&Z0?Z0(()=>h(g)):h(g)},[h,f]);return D.useLayoutEffect(()=>a.listen(m),[a,m]),D.useEffect(()=>lR(i),[i]),D.createElement(uR,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const vR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xR=D.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,_=rP(e,fR),{basename:E}=D.useContext(mr),k,b=!1;if(typeof f=="string"&&wR.test(f)&&(k=f,vR))try{let C=new URL(window.location.href),F=f.startsWith("//")?new URL(C.protocol+f):new URL(f),G=Wa(F.pathname,E);F.origin===C.origin&&G!=null?f=G+F.search+F.hash:b=!0}catch{}let V=G2(f,{relative:r}),R=PR(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function S(C){i&&i(C),C.defaultPrevented||R(C)}return D.createElement("a",Pd({},_,{href:k||V,onClick:b||o?i:S,ref:n,target:h}))}),TR=D.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=rP(e,pR),_=Tf(h,{relative:g.relative}),E=vo(),k=D.useContext(XE),{navigator:b,basename:V}=D.useContext(mr),R=k!=null&&SR(_)&&f===!0,S=b.encodeLocation?b.encodeLocation(_).pathname:_.pathname,C=E.pathname,F=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;r||(C=C.toLowerCase(),F=F?F.toLowerCase():null,S=S.toLowerCase()),F&&V&&(F=Wa(F,V)||F);const G=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let U=C===S||!a&&C.startsWith(S)&&C.charAt(G)==="/",A=F!=null&&(F===S||!a&&F.startsWith(S)&&F.charAt(S.length)==="/"),T={isActive:U,isPending:A,isTransitioning:R},N=U?i:void 0,M;typeof o=="function"?M=o(T):M=[o,U?"active":null,A?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(T):u;return D.createElement(xR,Pd({},g,{"aria-current":N,className:M,ref:n,style:j,to:h,viewTransition:f}),typeof m=="function"?m(T):m)});var ug;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ug||(ug={}));var K0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(K0||(K0={}));function ER(t){let e=D.useContext(vf);return e||ot(!1),e}function PR(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=xf(),f=vo(),m=Tf(t,{relative:a});return D.useCallback(g=>{if(dR(g,n)){g.preventDefault();let _=i!==void 0?i:Ed(f)===Ed(m);h(t,{replace:_,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function SR(t,e){e===void 0&&(e={});let n=D.useContext(gR);n==null&&ot(!1);let{basename:i}=ER(ug.useViewTransitionState),r=Tf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Wa(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Wa(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ag(r.pathname,a)!=null||ag(r.pathname,o)!=null}const sP=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ef=D.createContext({}),Pf=D.createContext(null),Sf=typeof document<"u",Gy=Sf?D.useLayoutEffect:D.useEffect,oP=D.createContext({strict:!1}),Zy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),CR="framerAppearId",aP="data-"+Zy(CR);function IR(t,e,n,i){const{visualElement:r}=D.useContext(Ef),o=D.useContext(oP),a=D.useContext(Pf),u=D.useContext(sP).reducedMotion,h=D.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;D.useInsertionEffect(()=>{f&&f.update(n,a)});const m=D.useRef(!!(n[aP]&&!window.HandoffComplete));return Gy(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),D.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function xa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function AR(t,e,n){return D.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):xa(n)&&(n.current=i))},[e])}function Uu(t){return typeof t=="string"||Array.isArray(t)}function Cf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ky=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Qy=["initial",...Ky];function If(t){return Cf(t.animate)||Qy.some(e=>Uu(t[e]))}function lP(t){return!!(If(t)||t.variants)}function bR(t,e){if(If(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Uu(n)?n:void 0,animate:Uu(i)?i:void 0}}return t.inherit!==!1?e:{}}function kR(t){const{initial:e,animate:n}=bR(t,D.useContext(Ef));return D.useMemo(()=>({initial:e,animate:n}),[Q0(e),Q0(n)])}function Q0(t){return Array.isArray(t)?t.join(" "):t}const X0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hu={};for(const t in X0)Hu[t]={isEnabled:e=>X0[t].some(n=>!!e[n])};function RR(t){for(const e in t)Hu[e]={...Hu[e],...t[e]}}const Xy=D.createContext({}),uP=D.createContext({}),NR=Symbol.for("motionComponentSymbol");function LR({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&RR(t);function o(u,h){let f;const m={...D.useContext(sP),...u,layoutId:MR(u)},{isStatic:g}=m,_=kR(u),E=i(u,g);if(!g&&Sf){_.visualElement=IR(r,E,m,e);const k=D.useContext(uP),b=D.useContext(oP).strict;_.visualElement&&(f=_.visualElement.loadFeatures(m,b,t,k))}return D.createElement(Ef.Provider,{value:_},f&&_.visualElement?D.createElement(f,{visualElement:_.visualElement,...m}):null,n(r,u,AR(E,_.visualElement,h),E,g,_.visualElement))}const a=D.forwardRef(o);return a[NR]=r,a}function MR({layoutId:t}){const e=D.useContext(Xy).id;return e&&t!==void 0?e+"-"+t:t}function OR(t){function e(i,r={}){return LR(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const DR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yy(t){return typeof t!="string"||t.includes("-")?!1:!!(DR.indexOf(t)>-1||/[A-Z]/.test(t))}const Sd={};function VR(t){Object.assign(Sd,t)}const sc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wo=new Set(sc);function cP(t,{layout:e,layoutId:n}){return wo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Sd[t]||t==="opacity")}const wn=t=>!!(t&&t.getVelocity),jR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zR=sc.length;function FR(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<zR;a++){const u=sc[a];if(t[u]!==void 0){const h=jR[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const hP=t=>e=>typeof e=="string"&&e.startsWith(t),dP=hP("--"),cg=hP("var(--"),BR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,UR=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ds=(t,e,n)=>Math.min(Math.max(n,t),e),xo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},du={...xo,transform:t=>ds(0,1,t)},gh={...xo,default:1},fu=t=>Math.round(t*1e5)/1e5,Af=/(-)?([\d]*\.?[\d])+/g,fP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,HR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function oc(t){return typeof t=="string"}const ac=t=>({test:e=>oc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rr=ac("deg"),Ei=ac("%"),ve=ac("px"),WR=ac("vh"),$R=ac("vw"),Y0={...Ei,parse:t=>Ei.parse(t)/100,transform:t=>Ei.transform(t*100)},J0={...xo,transform:Math.round},pP={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,size:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,rotate:Rr,rotateX:Rr,rotateY:Rr,rotateZ:Rr,scale:gh,scaleX:gh,scaleY:gh,scaleZ:gh,skew:Rr,skewX:Rr,skewY:Rr,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:du,originX:Y0,originY:Y0,originZ:ve,zIndex:J0,fillOpacity:du,strokeOpacity:du,numOctaves:J0};function Jy(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const _=e[g];if(dP(g)){o[g]=_;continue}const E=pP[g],k=UR(_,E);if(wo.has(g)){if(h=!0,a[g]=k,!m)continue;_!==(E.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=k):r[g]=k}if(e.transform||(h||i?r.transform=FR(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:_="50%",originZ:E=0}=u;r.transformOrigin=`${g} ${_} ${E}`}}const e_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mP(t,e,n){for(const i in e)!wn(e[i])&&!cP(i,n)&&(t[i]=e[i])}function qR({transformTemplate:t},e,n){return D.useMemo(()=>{const i=e_();return Jy(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function GR(t,e,n){const i=t.style||{},r={};return mP(r,i,t),Object.assign(r,qR(t,e,n)),t.transformValues?t.transformValues(r):r}function ZR(t,e,n){const i={},r=GR(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const KR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||KR.has(t)}let gP=t=>!Cd(t);function QR(t){t&&(gP=e=>e.startsWith("on")?!Cd(e):t(e))}try{QR(require("@emotion/is-prop-valid").default)}catch{}function XR(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(gP(r)||n===!0&&Cd(r)||!e&&!Cd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function ew(t,e,n){return typeof t=="string"?t:ve.transform(e+n*t)}function YR(t,e,n){const i=ew(e,t.x,t.width),r=ew(n,t.y,t.height);return`${i} ${r}`}const JR={offset:"stroke-dashoffset",array:"stroke-dasharray"},eN={offset:"strokeDashoffset",array:"strokeDasharray"};function tN(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?JR:eN;t[o.offset]=ve.transform(-i);const a=ve.transform(e),u=ve.transform(n);t[o.array]=`${a} ${u}`}function t_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,_){if(Jy(t,f,m,_),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:E,style:k,dimensions:b}=t;E.transform&&(b&&(k.transform=E.transform),delete E.transform),b&&(r!==void 0||o!==void 0||k.transform)&&(k.transformOrigin=YR(b,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(E.x=e),n!==void 0&&(E.y=n),i!==void 0&&(E.scale=i),a!==void 0&&tN(E,a,u,h,!1)}const yP=()=>({...e_(),attrs:{}}),n_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function nN(t,e,n,i){const r=D.useMemo(()=>{const o=yP();return t_(o,e,{enableHardwareAcceleration:!1},n_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};mP(o,t.style,t),r.style={...o,...r.style}}return r}function iN(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Yy(n)?nN:ZR)(i,o,a,n),m={...XR(i,typeof n=="string",t),...h,ref:r},{children:g}=i,_=D.useMemo(()=>wn(g)?g.get():g,[g]);return D.createElement(n,{...m,children:_})}}function _P(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const vP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wP(t,e,n,i){_P(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(vP.has(r)?r:Zy(r),e.attrs[r])}function i_(t,e){const{style:n}=t,i={};for(const r in n)(wn(n[r])||e.style&&wn(e.style[r])||cP(r,t))&&(i[r]=n[r]);return i}function xP(t,e){const n=i_(t,e);for(const i in t)if(wn(t[i])||wn(e[i])){const r=sc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function r_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function TP(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const Id=t=>Array.isArray(t),rN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),sN=t=>Id(t)?t[t.length-1]||0:t;function Bh(t){const e=wn(t)?t.get():t;return rN(e)?e.toValue():e}function oN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:aN(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const EP=t=>(e,n)=>{const i=D.useContext(Ef),r=D.useContext(Pf),o=()=>oN(t,e,i,r);return n?o():TP(o)};function aN(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Bh(o[_]);let{initial:a,animate:u}=t;const h=If(t),f=lP(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Cf(g)&&(Array.isArray(g)?g:[g]).forEach(E=>{const k=r_(t,E);if(!k)return;const{transitionEnd:b,transition:V,...R}=k;for(const S in R){let C=R[S];if(Array.isArray(C)){const F=m?C.length-1:0;C=C[F]}C!==null&&(r[S]=C)}for(const S in b)r[S]=b[S]}),r}const _t=t=>t;class tw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function lN(t){let e=new tw,n=new tw,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,_=g?e:n;return f&&a.add(h),_.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const yh=["prepare","read","update","preRender","render","postRender"],uN=40;function cN(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=yh.reduce((g,_)=>(g[_]=lN(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,uN),1),r.timestamp=g,r.isProcessing=!0,yh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:yh.reduce((g,_)=>{const E=o[_];return g[_]=(k,b=!1,V=!1)=>(n||h(),E.schedule(k,b,V)),g},{}),cancel:g=>yh.forEach(_=>o[_].cancel(g)),state:r,steps:o}}const{schedule:Qe,cancel:lr,state:Zt,steps:Vp}=cN(typeof requestAnimationFrame<"u"?requestAnimationFrame:_t,!0),hN={useVisualState:EP({scrapeMotionValuesFromProps:xP,createRenderState:yP,onMount:(t,e,{renderState:n,latestValues:i})=>{Qe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Qe.render(()=>{t_(n,i,{enableHardwareAcceleration:!1},n_(e.tagName),t.transformTemplate),wP(e,n)})}})},dN={useVisualState:EP({scrapeMotionValuesFromProps:i_,createRenderState:e_})};function fN(t,{forwardMotionProps:e=!1},n,i){return{...Yy(t)?hN:dN,preloadedFeatures:n,useRender:iN(e),createVisualElement:i,Component:t}}function Qi(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const PP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function bf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const pN=t=>e=>PP(e)&&t(e,bf(e));function tr(t,e,n,i){return Qi(t,e,pN(n),i)}const mN=(t,e)=>n=>e(t(n)),ts=(...t)=>t.reduce(mN);function SP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const nw=SP("dragHorizontal"),iw=SP("dragVertical");function CP(t){let e=!1;if(t==="y")e=iw();else if(t==="x")e=nw();else{const n=nw(),i=iw();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function IP(){const t=CP(!0);return t?(t(),!1):!0}class Ss{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rw(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||IP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&Qe.update(()=>u[i](o,a))};return tr(t.current,n,r,{passive:!t.getProps()[i]})}class gN extends Ss{mount(){this.unmount=ts(rw(this.node,!0),rw(this.node,!1))}unmount(){}}class yN extends Ss{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ts(Qi(this.node.current,"focus",()=>this.onFocus()),Qi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const AP=(t,e)=>e?t===e?!0:AP(t,e.parentElement):!1;function jp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,bf(n))}class _N extends Ss{constructor(){super(...arguments),this.removeStartListeners=_t,this.removeEndListeners=_t,this.removeAccessibleListeners=_t,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=tr(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Qe.update(()=>{!g&&!AP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=tr(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=ts(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||jp("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&Qe.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=Qi(this.node.current,"keyup",a),jp("down",(u,h)=>{this.startPress(u,h)})},n=Qi(this.node.current,"keydown",e),i=()=>{this.isPressing&&jp("cancel",(o,a)=>this.cancelPress(o,a))},r=Qi(this.node.current,"blur",i);this.removeAccessibleListeners=ts(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Qe.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!IP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Qe.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=tr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Qi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ts(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const hg=new WeakMap,zp=new WeakMap,vN=t=>{const e=hg.get(t.target);e&&e(t)},wN=t=>{t.forEach(vN)};function xN({root:t,...e}){const n=t||document;zp.has(n)||zp.set(n,{});const i=zp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(wN,{root:t,...e})),i[r]}function TN(t,e,n){const i=xN(e);return hg.set(t,n),i.observe(t),()=>{hg.delete(t),i.unobserve(t)}}const EN={some:0,all:1};class PN extends Ss{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:EN[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(h)};return TN(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(SN(e,n))&&this.startObserver()}unmount(){}}function SN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const CN={inView:{Feature:PN},tap:{Feature:_N},focus:{Feature:yN},hover:{Feature:gN}};function bP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function IN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function AN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function kf(t,e,n){const i=t.getProps();return r_(i,e,n!==void 0?n:i.custom,IN(t),AN(t))}let s_=_t;const to=t=>t*1e3,nr=t=>t/1e3,bN={current:!1},kP=t=>Array.isArray(t)&&typeof t[0]=="number";function RP(t){return!!(!t||typeof t=="string"&&NP[t]||kP(t)||Array.isArray(t)&&t.every(RP))}const Yl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,NP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yl([0,.65,.55,1]),circOut:Yl([.55,0,1,.45]),backIn:Yl([.31,.01,.66,-.59]),backOut:Yl([.33,1.53,.69,.99])};function LP(t){if(t)return kP(t)?Yl(t):Array.isArray(t)?t.map(LP):NP[t]}function kN(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=LP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function RN(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const MP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,NN=1e-7,LN=12;function MN(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=MP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>NN&&++u<LN);return a}function lc(t,e,n,i){if(t===e&&n===i)return _t;const r=o=>MN(o,0,1,t,n);return o=>o===0||o===1?o:MP(r(o),e,i)}const ON=lc(.42,0,1,1),DN=lc(0,0,.58,1),OP=lc(.42,0,.58,1),VN=t=>Array.isArray(t)&&typeof t[0]!="number",DP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,VP=t=>e=>1-t(1-e),o_=t=>1-Math.sin(Math.acos(t)),jP=VP(o_),jN=DP(o_),zP=lc(.33,1.53,.69,.99),a_=VP(zP),zN=DP(a_),FN=t=>(t*=2)<1?.5*a_(t):.5*(2-Math.pow(2,-10*(t-1))),BN={linear:_t,easeIn:ON,easeInOut:OP,easeOut:DN,circIn:o_,circInOut:jN,circOut:jP,backIn:a_,backInOut:zN,backOut:zP,anticipate:FN},sw=t=>{if(Array.isArray(t)){s_(t.length===4);const[e,n,i,r]=t;return lc(e,n,i,r)}else if(typeof t=="string")return BN[t];return t},l_=(t,e)=>n=>!!(oc(n)&&HR.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),FP=(t,e,n)=>i=>{if(!oc(i))return i;const[r,o,a,u]=i.match(Af);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},UN=t=>ds(0,255,t),Fp={...xo,transform:t=>Math.round(UN(t))},Xs={test:l_("rgb","red"),parse:FP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Fp.transform(t)+", "+Fp.transform(e)+", "+Fp.transform(n)+", "+fu(du.transform(i))+")"};function HN(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const dg={test:l_("#"),parse:HN,transform:Xs.transform},Ta={test:l_("hsl","hue"),parse:FP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ei.transform(fu(e))+", "+Ei.transform(fu(n))+", "+fu(du.transform(i))+")"},rn={test:t=>Xs.test(t)||dg.test(t)||Ta.test(t),parse:t=>Xs.test(t)?Xs.parse(t):Ta.test(t)?Ta.parse(t):dg.parse(t),transform:t=>oc(t)?t:t.hasOwnProperty("red")?Xs.transform(t):Ta.transform(t)},rt=(t,e,n)=>-n*t+n*e+t;function Bp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function WN({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=Bp(h,u,t+1/3),o=Bp(h,u,t),a=Bp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Up=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},$N=[dg,Xs,Ta],qN=t=>$N.find(e=>e.test(t));function ow(t){const e=qN(t);let n=e.parse(t);return e===Ta&&(n=WN(n)),n}const BP=(t,e)=>{const n=ow(t),i=ow(e),r={...n};return o=>(r.red=Up(n.red,i.red,o),r.green=Up(n.green,i.green,o),r.blue=Up(n.blue,i.blue,o),r.alpha=rt(n.alpha,i.alpha,o),Xs.transform(r))};function GN(t){var e,n;return isNaN(t)&&oc(t)&&(((e=t.match(Af))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(fP))===null||n===void 0?void 0:n.length)||0)>0}const UP={regex:BR,countKey:"Vars",token:"${v}",parse:_t},HP={regex:fP,countKey:"Colors",token:"${c}",parse:rn.parse},WP={regex:Af,countKey:"Numbers",token:"${n}",parse:xo.parse};function Hp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Ad(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Hp(n,UP),Hp(n,HP),Hp(n,WP),n}function $P(t){return Ad(t).values}function qP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Ad(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(UP.token,a[h]):h<i+n?u=u.replace(HP.token,rn.transform(a[h])):u=u.replace(WP.token,fu(a[h]));return u}}const ZN=t=>typeof t=="number"?0:t;function KN(t){const e=$P(t);return qP(t)(e.map(ZN))}const fs={test:GN,parse:$P,createTransformer:qP,getAnimatableNone:KN},GP=(t,e)=>n=>`${n>0?e:t}`;function ZP(t,e){return typeof t=="number"?n=>rt(t,e,n):rn.test(t)?BP(t,e):t.startsWith("var(")?GP(t,e):QP(t,e)}const KP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>ZP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},QN=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=ZP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},QP=(t,e)=>{const n=fs.createTransformer(e),i=Ad(t),r=Ad(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?ts(KP(i.values,r.values),n):GP(t,e)},Wu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},aw=(t,e)=>n=>rt(t,e,n);function XN(t){return typeof t=="number"?aw:typeof t=="string"?rn.test(t)?BP:QP:Array.isArray(t)?KP:typeof t=="object"?QN:aw}function YN(t,e,n){const i=[],r=n||XN(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||_t:e;u=ts(h,u)}i.push(u)}return i}function XP(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(s_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=YN(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Wu(t[m],t[m+1],f);return a[m](g)};return n?f=>h(ds(t[0],t[o-1],f)):h}function JN(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Wu(0,e,i);t.push(rt(n,1,r))}}function eL(t){const e=[0];return JN(e,t.length-1),e}function tL(t,e){return t.map(n=>n*e)}function nL(t,e){return t.map(()=>e||OP).splice(0,t.length-1)}function bd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=VN(i)?i.map(sw):sw(i),o={done:!1,value:e[0]},a=tL(n&&n.length===e.length?n:eL(e),t),u=XP(a,e,{ease:Array.isArray(r)?r:nL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function YP(t,e){return e?t*(1e3/e):0}const iL=5;function JP(t,e,n){const i=Math.max(e-iL,0);return YP(n-t(i),e-i)}const Wp=.001,rL=.01,sL=10,oL=.05,aL=1;function lL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=ds(oL,aL,a),t=ds(rL,sL,nr(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,E=fg(f,a),k=Math.exp(-g);return Wp-_/E*k},o=f=>{const g=f*a*t,_=g*n+n,E=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-g),b=fg(Math.pow(f,2),a);return(-r(f)+Wp>0?-1:1)*((_-E)*k)/b}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Wp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=cL(r,o,u);if(t=to(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const uL=12;function cL(t,e,n){let i=n;for(let r=1;r<uL;r++)i=i-t(i)/e(i);return i}function fg(t,e){return t*Math.sqrt(1-e*e)}const hL=["duration","bounce"],dL=["stiffness","damping","mass"];function lw(t,e){return e.some(n=>t[n]!==void 0)}function fL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!lw(t,dL)&&lw(t,hL)){const n=lL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function eS({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:_}=fL({...i,velocity:-nr(i.velocity||0)}),E=g||0,k=h/(2*Math.sqrt(u*f)),b=o-r,V=nr(Math.sqrt(u/f)),R=Math.abs(b)<5;n||(n=R?.01:2),e||(e=R?.005:.5);let S;if(k<1){const C=fg(V,k);S=F=>{const G=Math.exp(-k*V*F);return o-G*((E+k*V*b)/C*Math.sin(C*F)+b*Math.cos(C*F))}}else if(k===1)S=C=>o-Math.exp(-V*C)*(b+(E+V*b)*C);else{const C=V*Math.sqrt(k*k-1);S=F=>{const G=Math.exp(-k*V*F),U=Math.min(C*F,300);return o-G*((E+k*V*b)*Math.sinh(U)+C*b*Math.cosh(U))/C}}return{calculatedDuration:_&&m||null,next:C=>{const F=S(C);if(_)a.done=C>=m;else{let G=E;C!==0&&(k<1?G=JP(S,C,F):G=0);const U=Math.abs(G)<=n,A=Math.abs(o-F)<=e;a.done=U&&A}return a.value=a.done?o:F,a}}}function uw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},E=T=>u!==void 0&&T<u||h!==void 0&&T>h,k=T=>u===void 0?h:h===void 0||Math.abs(u-T)<Math.abs(h-T)?u:h;let b=n*e;const V=g+b,R=a===void 0?V:a(V);R!==V&&(b=R-g);const S=T=>-b*Math.exp(-T/i),C=T=>R+S(T),F=T=>{const N=S(T),M=C(T);_.done=Math.abs(N)<=f,_.value=_.done?R:M};let G,U;const A=T=>{E(_.value)&&(G=T,U=eS({keyframes:[_.value,k(_.value)],velocity:JP(C,T,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return A(0),{calculatedDuration:null,next:T=>{let N=!1;return!U&&G===void 0&&(N=!0,F(T),A(T)),G!==void 0&&T>G?U.next(T-G):(!N&&F(T),_)}}}const pL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Qe.update(e,!0),stop:()=>lr(e),now:()=>Zt.isProcessing?Zt.timestamp:performance.now()}},cw=2e4;function hw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<cw;)e+=n,i=t.next(e);return e>=cw?1/0:e}const mL={decay:uw,inertia:uw,tween:bd,keyframes:bd,spring:eS};function kd({autoplay:t=!0,delay:e=0,driver:n=pL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,..._}){let E=1,k=!1,b,V;const R=()=>{V=new Promise(ie=>{b=ie})};R();let S;const C=mL[r]||bd;let F;C!==bd&&typeof i[0]!="number"&&(F=XP([0,100],i,{clamp:!1}),i=[0,100]);const G=C({..._,keyframes:i});let U;u==="mirror"&&(U=C({..._,keyframes:[...i].reverse(),velocity:-(_.velocity||0)}));let A="idle",T=null,N=null,M=null;G.calculatedDuration===null&&o&&(G.calculatedDuration=hw(G));const{calculatedDuration:j}=G;let B=1/0,O=1/0;j!==null&&(B=j+a,O=B*(o+1)-a);let xe=0;const dt=ie=>{if(N===null)return;E>0&&(N=Math.min(N,ie)),E<0&&(N=Math.min(ie-O/E,N)),T!==null?xe=T:xe=Math.round(ie-N)*E;const te=xe-e*(E>=0?1:-1),re=E>=0?te<0:te>O;xe=Math.max(te,0),A==="finished"&&T===null&&(xe=O);let ue=xe,le=G;if(o){const St=Math.min(xe,O)/B;let me=Math.floor(St),Ae=St%1;!Ae&&St>=1&&(Ae=1),Ae===1&&me--,me=Math.min(me,o+1),!!(me%2)&&(u==="reverse"?(Ae=1-Ae,a&&(Ae-=a/B)):u==="mirror"&&(le=U)),ue=ds(0,1,Ae)*B}const J=re?{done:!1,value:i[0]}:le.next(ue);F&&(J.value=F(J.value));let{done:ge}=J;!re&&j!==null&&(ge=E>=0?xe>=O:xe<=0);const Ge=T===null&&(A==="finished"||A==="running"&&ge);return g&&g(J.value),Ge&&Z(),J},Ie=()=>{S&&S.stop(),S=void 0},ut=()=>{A="idle",Ie(),b(),R(),N=M=null},Z=()=>{A="finished",m&&m(),Ie(),b()},pe=()=>{if(k)return;S||(S=n(dt));const ie=S.now();h&&h(),T!==null?N=ie-T:(!N||A==="finished")&&(N=ie),A==="finished"&&R(),M=N,T=null,A="running",S.start()};t&&pe();const ee={then(ie,te){return V.then(ie,te)},get time(){return nr(xe)},set time(ie){ie=to(ie),xe=ie,T!==null||!S||E===0?T=ie:N=S.now()-ie/E},get duration(){const ie=G.calculatedDuration===null?hw(G):G.calculatedDuration;return nr(ie)},get speed(){return E},set speed(ie){ie===E||!S||(E=ie,ee.time=nr(xe))},get state(){return A},play:pe,pause:()=>{A="paused",T=xe},stop:()=>{k=!0,A!=="idle"&&(A="idle",f&&f(),ut())},cancel:()=>{M!==null&&dt(M),ut()},complete:()=>{A="finished"},sample:ie=>(N=0,dt(ie))};return ee}function gL(t){let e;return()=>(e===void 0&&(e=t()),e)}const yL=gL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),_L=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),_h=10,vL=2e4,wL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!RP(e.ease);function xL(t,e,{onUpdate:n,onComplete:i,...r}){if(!(yL()&&_L.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(C=>{u=C})};m();let{keyframes:g,duration:_=300,ease:E,times:k}=r;if(wL(e,r)){const C=kd({...r,repeat:0,delay:0});let F={done:!1,value:g[0]};const G=[];let U=0;for(;!F.done&&U<vL;)F=C.sample(U),G.push(F.value),U+=_h;k=void 0,g=G,_=U-_h,E="linear"}const b=kN(t.owner.current,e,g,{...r,duration:_,ease:E,times:k}),V=()=>{f=!1,b.cancel()},R=()=>{f=!0,Qe.update(V),u(),m()};return b.onfinish=()=>{f||(t.set(RN(g,r)),i&&i(),R())},{then(C,F){return h.then(C,F)},attachTimeline(C){return b.timeline=C,b.onfinish=null,_t},get time(){return nr(b.currentTime||0)},set time(C){b.currentTime=to(C)},get speed(){return b.playbackRate},set speed(C){b.playbackRate=C},get duration(){return nr(_)},play:()=>{a||(b.play(),lr(V))},pause:()=>b.pause(),stop:()=>{if(a=!0,b.playState==="idle")return;const{currentTime:C}=b;if(C){const F=kd({...r,autoplay:!1});t.setWithVelocity(F.sample(C-_h).value,F.sample(C).value,_h)}R()},complete:()=>{f||b.finish()},cancel:R}}function TL({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:_t,pause:_t,stop:_t,then:o=>(o(),Promise.resolve()),cancel:_t,complete:_t});return e?kd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const EL={type:"spring",stiffness:500,damping:25,restSpeed:10},PL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SL={type:"keyframes",duration:.8},CL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IL=(t,{keyframes:e})=>e.length>2?SL:wo.has(t)?t.startsWith("scale")?PL(e[1]):EL:CL,pg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(fs.test(e)||e==="0")&&!e.startsWith("url(")),AL=new Set(["brightness","contrast","saturate","opacity"]);function bL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Af)||[];if(!i)return t;const r=n.replace(i,"");let o=AL.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const kL=/([a-z-]*)\(.*?\)/g,mg={...fs,getAnimatableNone:t=>{const e=t.match(kL);return e?e.map(bL).join(" "):t}},RL={...pP,color:rn,backgroundColor:rn,outlineColor:rn,fill:rn,stroke:rn,borderColor:rn,borderTopColor:rn,borderRightColor:rn,borderBottomColor:rn,borderLeftColor:rn,filter:mg,WebkitFilter:mg},u_=t=>RL[t];function tS(t,e){let n=u_(t);return n!==mg&&(n=fs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const nS=t=>/^0[^.\s]+$/.test(t);function NL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||nS(t)}function LL(t,e,n,i){const r=pg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),NL(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=tS(e,u)}return o}function ML({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function c_(t,e){return t[e]||t.default||t}const OL={skipAnimations:!1},h_=(t,e,n,i={})=>r=>{const o=c_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-to(a);const h=LL(e,t,n,o),f=h[0],m=h[h.length-1],g=pg(t,f),_=pg(t,m);let E={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:k=>{e.set(k),o.onUpdate&&o.onUpdate(k)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(ML(o)||(E={...E,...IL(t,E)}),E.duration&&(E.duration=to(E.duration)),E.repeatDelay&&(E.repeatDelay=to(E.repeatDelay)),!g||!_||bN.current||o.type===!1||OL.skipAnimations)return TL(E);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const k=xL(e,t,E);if(k)return k}return kd(E)};function Rd(t){return!!(wn(t)&&t.add)}const iS=t=>/^\-?\d*\.?\d+$/.test(t);function d_(t,e){t.indexOf(e)===-1&&t.push(e)}function f_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class p_{constructor(){this.subscriptions=[]}add(e){return d_(this.subscriptions,e),()=>f_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const DL=t=>!isNaN(parseFloat(t));class VL{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Zt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Qe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Qe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=DL(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new p_);const i=this.events[e].add(n);return e==="change"?()=>{i(),Qe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?YP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $a(t,e){return new VL(t,e)}const rS=t=>e=>e.test(t),jL={test:t=>t==="auto",parse:t=>t},sS=[xo,ve,Ei,Rr,$R,WR,jL],ql=t=>sS.find(rS(t)),zL=[...sS,rn,fs],FL=t=>zL.find(rS(t));function BL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,$a(n))}function UL(t,e){const n=kf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=sN(o[a]);BL(t,a,u)}}function HL(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(iS(m)||nS(m))?m=parseFloat(m):!FL(m)&&fs.test(f)&&(m=tS(h,f)),t.addValue(h,$a(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function WL(t,e){return e?(e[t]||e.default||e).from:void 0}function $L(t,e,n){const i={};for(const r in t){const o=WL(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function qL({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function GL(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function oS(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const _=t.getValue(g),E=u[g];if(!_||E===void 0||m&&qL(m,g))continue;const k={delay:n,elapsed:0,...c_(o||{},g)};if(window.HandoffAppearAnimations){const R=t.getProps()[aP];if(R){const S=window.HandoffAppearAnimations(R,g,_,Qe);S!==null&&(k.elapsed=S,k.isHandoff=!0)}}let b=!k.isHandoff&&!GL(_,E);if(k.type==="spring"&&(_.getVelocity()||k.velocity)&&(b=!1),_.animation&&(b=!1),b)continue;_.start(h_(g,_,E,t.shouldReduceMotion&&wo.has(g)?{type:!1}:k));const V=_.animation;Rd(h)&&(h.add(g),V.then(()=>h.remove(g))),f.push(V)}return a&&Promise.all(f).then(()=>{a&&UL(t,a)}),f}function gg(t,e,n={}){const i=kf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(oS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return ZL(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function ZL(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(KL).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(gg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function KL(t,e){return t.sortNodePosition(e)}function QL(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>gg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=gg(t,e,n);else{const r=typeof e=="function"?kf(t,e,n.custom):e;i=Promise.all(oS(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const XL=[...Ky].reverse(),YL=Ky.length;function JL(t){return e=>Promise.all(e.map(({animation:n,options:i})=>QL(t,n,i)))}function eM(t){let e=JL(t);const n=nM();let i=!0;const r=(h,f)=>{const m=kf(t,f);if(m){const{transition:g,transitionEnd:_,...E}=m;h={...h,...E,..._}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},_=[],E=new Set;let k={},b=1/0;for(let R=0;R<YL;R++){const S=XL[R],C=n[S],F=m[S]!==void 0?m[S]:g[S],G=Uu(F),U=S===f?C.isActive:null;U===!1&&(b=R);let A=F===g[S]&&F!==m[S]&&G;if(A&&i&&t.manuallyAnimateOnMount&&(A=!1),C.protectedKeys={...k},!C.isActive&&U===null||!F&&!C.prevProp||Cf(F)||typeof F=="boolean")continue;let N=tM(C.prevProp,F)||S===f&&C.isActive&&!A&&G||R>b&&G,M=!1;const j=Array.isArray(F)?F:[F];let B=j.reduce(r,{});U===!1&&(B={});const{prevResolvedValues:O={}}=C,xe={...O,...B},dt=Ie=>{N=!0,E.has(Ie)&&(M=!0,E.delete(Ie)),C.needsAnimating[Ie]=!0};for(const Ie in xe){const ut=B[Ie],Z=O[Ie];if(k.hasOwnProperty(Ie))continue;let pe=!1;Id(ut)&&Id(Z)?pe=!bP(ut,Z):pe=ut!==Z,pe?ut!==void 0?dt(Ie):E.add(Ie):ut!==void 0&&E.has(Ie)?dt(Ie):C.protectedKeys[Ie]=!0}C.prevProp=F,C.prevResolvedValues=B,C.isActive&&(k={...k,...B}),i&&t.blockInitialAnimation&&(N=!1),N&&(!A||M)&&_.push(...j.map(Ie=>({animation:Ie,options:{type:S,...h}})))}if(E.size){const R={};E.forEach(S=>{const C=t.getBaseTarget(S);C!==void 0&&(R[S]=C)}),_.push({animation:R})}let V=!!_.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(V=!1),i=!1,V?e(_):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(E=>{var k;return(k=E.animationState)===null||k===void 0?void 0:k.setActive(h,f)}),n[h].isActive=f;const _=a(m,h);for(const E in n)n[E].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function tM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!bP(e,t):!1}function Bs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nM(){return{animate:Bs(!0),whileInView:Bs(),whileHover:Bs(),whileTap:Bs(),whileDrag:Bs(),whileFocus:Bs(),exit:Bs()}}class iM extends Ss{constructor(e){super(e),e.animationState||(e.animationState=eM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Cf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let rM=0;class sM extends Ss{constructor(){super(...arguments),this.id=rM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const oM={animation:{Feature:iM},exit:{Feature:sM}},dw=(t,e)=>Math.abs(t-e);function aM(t,e){const n=dw(t.x,e.x),i=dw(t.y,e.y);return Math.sqrt(n**2+i**2)}class aS{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=qp(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=aM(g.offset,{x:0,y:0})>=3;if(!_&&!E)return;const{point:k}=g,{timestamp:b}=Zt;this.history.push({...k,timestamp:b});const{onStart:V,onMove:R}=this.handlers;_||(V&&V(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=$p(_,this.transformPagePoint),Qe.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:E,onSessionEnd:k,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=qp(g.type==="pointercancel"?this.lastMoveEventInfo:$p(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,V),k&&k(g,V)},!PP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=bf(e),u=$p(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Zt;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,qp(u,this.history)),this.removeListeners=ts(tr(this.contextWindow,"pointermove",this.handlePointerMove),tr(this.contextWindow,"pointerup",this.handlePointerUp),tr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lr(this.updatePoint)}}function $p(t,e){return e?{point:e(t.point)}:t}function fw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qp({point:t},e){return{point:t,delta:fw(t,lS(e)),offset:fw(t,lM(e)),velocity:uM(e,.1)}}function lM(t){return t[0]}function lS(t){return t[t.length-1]}function uM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=lS(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>to(e)));)n--;if(!i)return{x:0,y:0};const o=nr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function In(t){return t.max-t.min}function yg(t,e=0,n=.01){return Math.abs(t-e)<=n}function pw(t,e,n,i=.5){t.origin=i,t.originPoint=rt(e.min,e.max,t.origin),t.scale=In(n)/In(e),(yg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=rt(n.min,n.max,t.origin)-t.originPoint,(yg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function pu(t,e,n,i){pw(t.x,e.x,n.x,i?i.originX:void 0),pw(t.y,e.y,n.y,i?i.originY:void 0)}function mw(t,e,n){t.min=n.min+e.min,t.max=t.min+In(e)}function cM(t,e,n){mw(t.x,e.x,n.x),mw(t.y,e.y,n.y)}function gw(t,e,n){t.min=e.min-n.min,t.max=t.min+In(e)}function mu(t,e,n){gw(t.x,e.x,n.x),gw(t.y,e.y,n.y)}function hM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?rt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?rt(n,t,i.max):Math.min(t,n)),t}function yw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function dM(t,{top:e,left:n,bottom:i,right:r}){return{x:yw(t.x,n,r),y:yw(t.y,e,i)}}function _w(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function fM(t,e){return{x:_w(t.x,e.x),y:_w(t.y,e.y)}}function pM(t,e){let n=.5;const i=In(t),r=In(e);return r>i?n=Wu(e.min,e.max-i,t.min):i>r&&(n=Wu(t.min,t.max-r,e.min)),ds(0,1,n)}function mM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const _g=.35;function gM(t=_g){return t===!1?t=0:t===!0&&(t=_g),{x:vw(t,"left","right"),y:vw(t,"top","bottom")}}function vw(t,e,n){return{min:ww(t,e),max:ww(t,n)}}function ww(t,e){return typeof t=="number"?t:t[e]||0}const xw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ea=()=>({x:xw(),y:xw()}),Tw=()=>({min:0,max:0}),Tt=()=>({x:Tw(),y:Tw()});function zn(t){return[t("x"),t("y")]}function uS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function yM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _M(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Gp(t){return t===void 0||t===1}function vg({scale:t,scaleX:e,scaleY:n}){return!Gp(t)||!Gp(e)||!Gp(n)}function Ws(t){return vg(t)||cS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function cS(t){return Ew(t.x)||Ew(t.y)}function Ew(t){return t&&t!=="0%"}function Nd(t,e,n){const i=t-n,r=e*i;return n+r}function Pw(t,e,n,i,r){return r!==void 0&&(t=Nd(t,r,i)),Nd(t,n,i)+e}function wg(t,e=0,n=1,i,r){t.min=Pw(t.min,e,n,i,r),t.max=Pw(t.max,e,n,i,r)}function hS(t,{x:e,y:n}){wg(t.x,e.translate,e.scale,e.originPoint),wg(t.y,n.translate,n.scale,n.originPoint)}function vM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Pa(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,hS(t,a)),i&&Ws(o.latestValues)&&Pa(t,o.latestValues))}e.x=Sw(e.x),e.y=Sw(e.y)}function Sw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Mr(t,e){t.min=t.min+e,t.max=t.max+e}function Cw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=rt(t.min,t.max,o);wg(t,e[n],e[i],a,e.scale)}const wM=["x","scaleX","originX"],xM=["y","scaleY","originY"];function Pa(t,e){Cw(t.x,e,wM),Cw(t.y,e,xM)}function dS(t,e){return uS(_M(t.getBoundingClientRect(),e))}function TM(t,e,n){const i=dS(t,n),{scroll:r}=e;return r&&(Mr(i.x,r.offset.x),Mr(i.y,r.offset.y)),i}const fS=({current:t})=>t?t.ownerDocument.defaultView:null,EM=new WeakMap;class PM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(bf(m,"page").point)},o=(m,g)=>{const{drag:_,dragPropagation:E,onDragStart:k}=this.getProps();if(_&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=CP(_),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zn(V=>{let R=this.getAxisMotionValue(V).get()||0;if(Ei.test(R)){const{projection:S}=this.visualElement;if(S&&S.layout){const C=S.layout.layoutBox[V];C&&(R=In(C)*(parseFloat(R)/100))}}this.originPoint[V]=R}),k&&Qe.update(()=>k(m,g),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:E,onDirectionLock:k,onDrag:b}=this.getProps();if(!_&&!this.openGlobalLock)return;const{offset:V}=g;if(E&&this.currentDirection===null){this.currentDirection=SM(V),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",g.point,V),this.updateAxis("y",g.point,V),this.visualElement.render(),b&&b(m,g)},u=(m,g)=>this.stop(m,g),h=()=>zn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new aS(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:fS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Qe.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!vh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=hM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&xa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=dM(r.layoutBox,n):this.constraints=!1,this.elastic=gM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&zn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=mM(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!xa(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=TM(i,r.root,this.visualElement.getTransformPagePoint());let a=fM(r.layout.layoutBox,o);if(n){const u=n(yM(a));this.hasMutatedConstraints=!!u,u&&(a=uS(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=zn(m=>{if(!vh(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,E=r?40:1e7,k={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(h_(e,i,0,n))}stopAnimation(){zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){zn(n=>{const{drag:i}=this.getProps();if(!vh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-rt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!xa(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};zn(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=pM({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),zn(a=>{if(!vh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(rt(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;EM.set(this.visualElement,this);const e=this.visualElement.current,n=tr(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();xa(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=Qi(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(zn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=_g,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function vh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function SM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class CM extends Ss{constructor(e){super(e),this.removeGroupControls=_t,this.removeListeners=_t,this.controls=new PM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_t}unmount(){this.removeGroupControls(),this.removeListeners()}}const Iw=t=>(e,n)=>{t&&Qe.update(()=>t(e,n))};class IM extends Ss{constructor(){super(...arguments),this.removePointerDownListener=_t}onPointerDown(e){this.session=new aS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Iw(e),onStart:Iw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Qe.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=tr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function AM(){const t=D.useContext(Pf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=D.useId();return D.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Uh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Aw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Gl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ve.test(t))t=parseFloat(t);else return t;const n=Aw(t,e.target.x),i=Aw(t,e.target.y);return`${n}% ${i}%`}},bM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=fs.parse(t);if(r.length>5)return i;const o=fs.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=rt(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class kM extends ro.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;VR(RM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Uh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Qe.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pS(t){const[e,n]=AM(),i=D.useContext(Xy);return ro.createElement(kM,{...t,layoutGroup:i,switchLayoutGroup:D.useContext(uP),isPresent:e,safeToRemove:n})}const RM={borderRadius:{...Gl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gl,borderTopRightRadius:Gl,borderBottomLeftRadius:Gl,borderBottomRightRadius:Gl,boxShadow:bM},mS=["TopLeft","TopRight","BottomLeft","BottomRight"],NM=mS.length,bw=t=>typeof t=="string"?parseFloat(t):t,kw=t=>typeof t=="number"||ve.test(t);function LM(t,e,n,i,r,o){r?(t.opacity=rt(0,n.opacity!==void 0?n.opacity:1,MM(i)),t.opacityExit=rt(e.opacity!==void 0?e.opacity:1,0,OM(i))):o&&(t.opacity=rt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<NM;a++){const u=`border${mS[a]}Radius`;let h=Rw(e,u),f=Rw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||kw(h)===kw(f)?(t[u]=Math.max(rt(bw(h),bw(f),i),0),(Ei.test(f)||Ei.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=rt(e.rotate||0,n.rotate||0,i))}function Rw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const MM=gS(0,.5,jP),OM=gS(.5,.95,_t);function gS(t,e,n){return i=>i<t?0:i>e?1:n(Wu(t,e,i))}function Nw(t,e){t.min=e.min,t.max=e.max}function jn(t,e){Nw(t.x,e.x),Nw(t.y,e.y)}function Lw(t,e,n,i,r){return t-=e,t=Nd(t,1/n,i),r!==void 0&&(t=Nd(t,1/r,i)),t}function DM(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ei.test(e)&&(e=parseFloat(e),e=rt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=rt(o.min,o.max,i);t===o&&(u-=e),t.min=Lw(t.min,e,n,u,r),t.max=Lw(t.max,e,n,u,r)}function Mw(t,e,[n,i,r],o,a){DM(t,e[n],e[i],e[r],e.scale,o,a)}const VM=["x","scaleX","originX"],jM=["y","scaleY","originY"];function Ow(t,e,n,i){Mw(t.x,e,VM,n?n.x:void 0,i?i.x:void 0),Mw(t.y,e,jM,n?n.y:void 0,i?i.y:void 0)}function Dw(t){return t.translate===0&&t.scale===1}function yS(t){return Dw(t.x)&&Dw(t.y)}function zM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function _S(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Vw(t){return In(t.x)/In(t.y)}class FM{constructor(){this.members=[]}add(e){d_(this.members,e),e.scheduleRender()}remove(e){if(f_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const BM=(t,e)=>t.depth-e.depth;class UM{constructor(){this.children=[],this.isDirty=!1}add(e){d_(this.children,e),this.isDirty=!0}remove(e){f_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(BM),this.isDirty=!1,this.children.forEach(e)}}function HM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(lr(i),t(o-e))};return Qe.read(i,!0),()=>lr(i)}function WM(t){window.MotionDebug&&window.MotionDebug.record(t)}function $M(t){return t instanceof SVGElement&&t.tagName!=="svg"}function qM(t,e,n){const i=wn(t)?t:$a(t);return i.start(h_("",i,e,n)),i.animation}const zw=["","X","Y","Z"],GM={visibility:"hidden"},Fw=1e3;let ZM=0;const $s={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function vS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=ZM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$s.totalNodes=$s.resolvedTargetDeltas=$s.recalculatedProjection=0,this.nodes.forEach(XM),this.nodes.forEach(nO),this.nodes.forEach(iO),this.nodes.forEach(YM),WM($s)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new UM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new p_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$M(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=HM(_,250),Uh.hasAnimatedSinceResize&&(Uh.hasAnimatedSinceResize=!1,this.nodes.forEach(Uw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:E,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||lO,{onLayoutAnimationStart:V,onLayoutAnimationComplete:R}=m.getProps(),S=!this.targetLayout||!_S(this.targetLayout,k)||E,C=!_&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||_&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,C);const F={...c_(b,"layout"),onPlay:V,onComplete:R};(m.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else _||Uw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Bw);return}this.isUpdating||this.nodes.forEach(eO),this.isUpdating=!1,this.nodes.forEach(tO),this.nodes.forEach(KM),this.nodes.forEach(QM),this.clearAllSnapshots();const u=performance.now();Zt.delta=ds(0,1e3/60,u-Zt.timestamp),Zt.timestamp=u,Zt.isProcessing=!0,Vp.update.process(Zt),Vp.preRender.process(Zt),Vp.render.process(Zt),Zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(JM),this.sharedNodes.forEach(sO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!yS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Ws(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),uO(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Tt();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Mr(u.x,h.offset.x),Mr(u.y,h.offset.y)),u}removeElementScroll(a){const u=Tt();jn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){jn(u,a);const{scroll:_}=this.root;_&&(Mr(u.x,-_.offset.x),Mr(u.y,-_.offset.y))}Mr(u.x,m.offset.x),Mr(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=Tt();jn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Pa(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Ws(m.latestValues)&&Pa(h,m.latestValues)}return Ws(this.latestValues)&&Pa(h,this.latestValues),h}removeTransform(a){const u=Tt();jn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Ws(f.latestValues))continue;vg(f.latestValues)&&f.updateSnapshot();const m=Tt(),g=f.measurePageBox();jn(m,g),Ow(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Ws(this.latestValues)&&Ow(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Zt.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),mu(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jn(this.target,this.layout.layoutBox),hS(this.target,this.targetDelta)):jn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),mu(this.relativeTargetOrigin,this.target,E.target),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$s.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||vg(this.parent.latestValues)||cS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Zt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;jn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,E=this.treeScale.y;vM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:k}=u;if(!k){this.projectionTransform&&(this.projectionDelta=Ea(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ea(),this.projectionDeltaWithTransform=Ea());const b=this.projectionTransform;pu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),this.projectionTransform=jw(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==_||this.treeScale.y!==E)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),$s.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=Ea();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=Tt(),E=h?h.source:void 0,k=this.layout?this.layout.source:void 0,b=E!==k,V=this.getStack(),R=!V||V.members.length<=1,S=!!(b&&!R&&this.options.crossfade===!0&&!this.path.some(aO));this.animationProgress=0;let C;this.mixTargetDelta=F=>{const G=F/1e3;Hw(g.x,a.x,G),Hw(g.y,a.y,G),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oO(this.relativeTarget,this.relativeTargetOrigin,_,G),C&&zM(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Tt()),jn(C,this.relativeTarget)),b&&(this.animationValues=m,LM(m,f,this.latestValues,G,S,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qe.update(()=>{Uh.hasAnimatedSinceResize=!0,this.currentAnimation=qM(0,Fw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Fw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&wS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Tt();const g=In(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const _=In(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+_}jn(u,h),Pa(u,m),pu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new FM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<zw.length;m++){const g="rotate"+zw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return GM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Bh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Bh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ws(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=jw(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x:E,y:k}=this.projectionDelta;f.transformOrigin=`${E.origin*100}% ${k.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const b in Sd){if(_[b]===void 0)continue;const{correct:V,applyTo:R}=Sd[b],S=f.transform==="none"?_[b]:V(_[b],g);if(R){const C=R.length;for(let F=0;F<C;F++)f[R[F]]=S}else f[b]=S}return this.options.layoutId&&(f.pointerEvents=g===this?Bh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Bw),this.root.sharedNodes.clear()}}}function KM(t){t.updateLayout()}function QM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?zn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=In(_);_.min=i[g].min,_.max=_.min+E}):wS(o,n.layoutBox,i)&&zn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=In(i[g]);_.max=_.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+E)});const u=Ea();pu(u,i,n.layoutBox);const h=Ea();a?pu(h,t.applyTransform(r,!0),n.measuredBox):pu(h,i,n.layoutBox);const f=!yS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:E}=g;if(_&&E){const k=Tt();mu(k,n.layoutBox,_.layoutBox);const b=Tt();mu(b,i,E.layoutBox),_S(k,b)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=k,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function XM(t){$s.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function JM(t){t.clearSnapshot()}function Bw(t){t.clearMeasurements()}function eO(t){t.isLayoutDirty=!1}function tO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Uw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function nO(t){t.resolveTargetDelta()}function iO(t){t.calcProjection()}function rO(t){t.resetRotation()}function sO(t){t.removeLeadSnapshot()}function Hw(t,e,n){t.translate=rt(e.translate,0,n),t.scale=rt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ww(t,e,n,i){t.min=rt(e.min,n.min,i),t.max=rt(e.max,n.max,i)}function oO(t,e,n,i){Ww(t.x,e.x,n.x,i),Ww(t.y,e.y,n.y,i)}function aO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const lO={duration:.45,ease:[.4,0,.1,1]},$w=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),qw=$w("applewebkit/")&&!$w("chrome/")?Math.round:_t;function Gw(t){t.min=qw(t.min),t.max=qw(t.max)}function uO(t){Gw(t.x),Gw(t.y)}function wS(t,e,n){return t==="position"||t==="preserve-aspect"&&!yg(Vw(e),Vw(n),.2)}const cO=vS({attachResizeListener:(t,e)=>Qi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zp={current:void 0},xS=vS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zp.current){const t=new cO({});t.mount(window),t.setOptions({layoutScroll:!0}),Zp.current=t}return Zp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),hO={pan:{Feature:IM},drag:{Feature:CM,ProjectionNode:xS,MeasureLayout:pS}},dO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function fO(t){const e=dO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function xg(t,e,n=1){const[i,r]=fO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return iS(a)?parseFloat(a):a}else return cg(r)?xg(r,e,n+1):r}function pO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!cg(o))return;const a=xg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!cg(o))continue;const a=xg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const mO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),TS=t=>mO.has(t),gO=t=>Object.keys(t).some(TS),Zw=t=>t===xo||t===ve,Kw=(t,e)=>parseFloat(t.split(", ")[e]),Qw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Kw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Kw(o[1],t):0}},yO=new Set(["x","y","z"]),_O=sc.filter(t=>!yO.has(t));function vO(t){const e=[];return _O.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const qa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Qw(4,13),y:Qw(5,14)};qa.translateX=qa.x;qa.translateY=qa.y;const wO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=qa[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=qa[f](h,o)}),t},xO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(TS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=ql(m);const _=e[h];let E;if(Id(_)){const k=_.length,b=_[0]===null?1:0;m=_[b],g=ql(m);for(let V=b;V<k&&_[V]!==null;V++)E?s_(ql(_[V])===E):E=ql(_[V])}else E=ql(_);if(g!==E)if(Zw(g)&&Zw(E)){const k=f.get();typeof k=="string"&&f.set(parseFloat(k)),typeof _=="string"?e[h]=parseFloat(_):Array.isArray(_)&&E===ve&&(e[h]=_.map(parseFloat))}else g!=null&&g.transform&&(E!=null&&E.transform)&&(m===0||_===0)?m===0?f.set(E.transform(m)):e[h]=g.transform(_):(a||(o=vO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(_))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=wO(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),Sf&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function TO(t,e,n,i){return gO(e)?xO(t,e,n,i):{target:e,transitionEnd:i}}const EO=(t,e,n,i)=>{const r=pO(t,e,i);return e=r.target,i=r.transitionEnd,TO(t,e,n,i)},Tg={current:null},ES={current:!1};function PO(){if(ES.current=!0,!!Sf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Tg.current=t.matches;t.addListener(e),e()}else Tg.current=!1}function SO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(wn(o))t.addValue(r,o),Rd(i)&&i.add(r);else if(wn(a))t.addValue(r,$a(o,{owner:t})),Rd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,$a(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Xw=new WeakMap,PS=Object.keys(Hu),CO=PS.length,Yw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],IO=Qy.length;class AO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Qe.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=If(n),this.isVariantNode=lP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const _=m[g];u[g]!==void 0&&wn(_)&&(_.set(u[g],!1),Rd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Xw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),ES.current||PO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xw.delete(this.current),this.projection&&this.projection.unmount(),lr(this.notifyUpdate),lr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=wo.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Qe.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<CO;h++){const f=PS[h],{isEnabled:m,Feature:g,ProjectionNode:_,MeasureLayout:E}=Hu[f];_&&(a=_),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),E&&(u=E))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:_,layoutRoot:E}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&xa(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:_,layoutRoot:E})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Yw.length;i++){const r=Yw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=SO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<IO;i++){const r=Qy[i],o=this.props[r];(Uu(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=$a(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=r_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!wn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new p_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class SS extends AO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=$L(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){HL(this,i,a);const u=EO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function bO(t){return window.getComputedStyle(t)}class kO extends SS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(wo.has(n)){const i=u_(n);return i&&i.default||0}else{const i=bO(e),r=(dP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return dS(e,n)}build(e,n,i,r){Jy(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return i_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){_P(e,n,i,r)}}class RO extends SS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(wo.has(n)){const i=u_(n);return i&&i.default||0}return n=vP.has(n)?n:Zy(n),e.getAttribute(n)}measureInstanceViewportBox(){return Tt()}scrapeMotionValuesFromProps(e,n){return xP(e,n)}build(e,n,i,r){t_(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){wP(e,n,i,r)}mount(e){this.isSVGTag=n_(e.tagName),super.mount(e)}}const NO=(t,e)=>Yy(t)?new RO(e,{enableHardwareAcceleration:!1}):new kO(e,{enableHardwareAcceleration:!0}),LO={layout:{ProjectionNode:xS,MeasureLayout:pS}},MO={...oM,...CN,...hO,...LO},oe=OR((t,e)=>fN(t,e,MO,NO));function CS(){const t=D.useRef(!1);return Gy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function OO(){const t=CS(),[e,n]=D.useState(0),i=D.useCallback(()=>{t.current&&n(e+1)},[e]);return[D.useCallback(()=>Qe.postRender(i),[i]),e]}class DO extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function VO({children:t,isPresent:e}){const n=D.useId(),i=D.useRef(null),r=D.useRef({width:0,height:0,top:0,left:0});return D.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),D.createElement(DO,{isPresent:e,childRef:i,sizeRef:r},D.cloneElement(t,{ref:i}))}const Kp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=TP(jO),h=D.useId(),f=D.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return D.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),D.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=D.createElement(VO,{isPresent:n},t)),D.createElement(Pf.Provider,{value:f},t)};function jO(){return new Map}function zO(t){return D.useEffect(()=>()=>t(),[])}const qs=t=>t.key||"";function FO(t,e){t.forEach(n=>{const i=qs(n);e.set(i,n)})}function BO(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const Na=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=D.useContext(Xy).forceRender||OO()[0],h=CS(),f=BO(t);let m=f;const g=D.useRef(new Map).current,_=D.useRef(m),E=D.useRef(new Map).current,k=D.useRef(!0);if(Gy(()=>{k.current=!1,FO(f,E),_.current=m}),zO(()=>{k.current=!0,E.clear(),g.clear()}),k.current)return D.createElement(D.Fragment,null,m.map(S=>D.createElement(Kp,{key:qs(S),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},S)));m=[...m];const b=_.current.map(qs),V=f.map(qs),R=b.length;for(let S=0;S<R;S++){const C=b[S];V.indexOf(C)===-1&&!g.has(C)&&g.set(C,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((S,C)=>{if(V.indexOf(C)!==-1)return;const F=E.get(C);if(!F)return;const G=b.indexOf(C);let U=S;if(!U){const A=()=>{g.delete(C);const T=Array.from(E.keys()).filter(N=>!V.includes(N));if(T.forEach(N=>E.delete(N)),_.current=f.filter(N=>{const M=qs(N);return M===C||T.includes(M)}),!g.size){if(h.current===!1)return;u(),i&&i()}};U=D.createElement(Kp,{key:qs(F),isPresent:!1,onExitComplete:A,custom:e,presenceAffectsLayout:o,mode:a},F),g.set(C,U)}m.splice(G,0,U)}),m=m.map(S=>{const C=S.key;return g.has(C)?S:D.createElement(Kp,{key:qs(S),isPresent:!0,presenceAffectsLayout:o,mode:a},S)}),D.createElement(D.Fragment,null,g.size?m:m.map(S=>D.cloneElement(S)))},UO=()=>{};var Jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},HO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},AS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,E=f&63;h||(E=64,a||(_=64)),i.push(n[m],n[g],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new WO;const _=o<<2|u>>4;if(i.push(_),f!==64){const E=u<<4&240|f>>2;if(i.push(E),g!==64){const k=f<<6&192|g;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $O=function(t){const e=IS(t);return AS.encodeByteArray(e,!0)},Ld=function(t){return $O(t).replace(/\./g,"")},bS=function(t){try{return AS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=()=>qO().__FIREBASE_DEFAULTS__,ZO=()=>{if(typeof process>"u"||typeof Jw>"u")return;const t=Jw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bS(t[1]);return e&&JSON.parse(e)},Rf=()=>{try{return UO()||GO()||ZO()||KO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kS=t=>{var e,n;return(n=(e=Rf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},QO=t=>{const e=kS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},RS=()=>{var t;return(t=Rf())==null?void 0:t.config},NS=t=>{var e;return(e=Rf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ld(JSON.stringify(n)),Ld(JSON.stringify(a)),""].join(".")}const gu={};function JO(){const t={prod:[],emulator:[]};for(const e of Object.keys(gu))gu[e]?t.emulator.push(e):t.prod.push(e);return t}function eD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ex=!1;function MS(t,e){if(typeof window>"u"||typeof document>"u"||!sl(window.location.host)||gu[t]===e||gu[t]||ex)return;gu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=JO().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{ex=!0,a()},_}function m(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=eD(i),E=n("text"),k=document.getElementById(E)||document.createElement("span"),b=n("learnmore"),V=document.getElementById(b)||document.createElement("a"),R=n("preprendIcon"),S=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const C=_.element;u(C),m(V,b);const F=f();h(S,R),C.append(S,k,V,F),document.body.appendChild(C)}o?(k.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function nD(){var e;const t=(e=Rf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oD(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aD(){return!nD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lD(){try{return typeof indexedDB=="object"}catch{return!1}}function uD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="FirebaseError";class gr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=cD,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uc.prototype.create)}}class uc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?hD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new gr(r,u,i)}}function hD(t,e){return t.replace(dD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const dD=/\{\$([^}]+)}/g;function fD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function co(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(tx(o)&&tx(a)){if(!co(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function tx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pD(t,e){const n=new mD(t,e);return n.subscribe.bind(n)}class mD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");gD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Qp),r.error===void 0&&(r.error=Qp),r.complete===void 0&&(r.complete=Qp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t){return t&&t._delegate?t._delegate:t}class ho{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new XO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vD(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_D(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _D(t){return t===Gs?void 0:t}function vD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const xD={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},TD=Le.INFO,ED={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},PD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=ED[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m_{constructor(e){this.name=e,this._logLevel=TD,this._logHandler=PD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const SD=(t,e)=>e.some(n=>t instanceof n);let nx,ix;function CD(){return nx||(nx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ID(){return ix||(ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OS=new WeakMap,Eg=new WeakMap,DS=new WeakMap,Xp=new WeakMap,g_=new WeakMap;function AD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(ns(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&OS.set(n,t)}).catch(()=>{}),g_.set(e,t),e}function bD(t){if(Eg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Eg.set(t,e)}let Pg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Eg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kD(t){Pg=t(Pg)}function RD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Yp(this),e,...n);return DS.set(i,e.sort?e.sort():[e]),ns(i)}:ID().includes(t)?function(...e){return t.apply(Yp(this),e),ns(OS.get(this))}:function(...e){return ns(t.apply(Yp(this),e))}}function ND(t){return typeof t=="function"?RD(t):(t instanceof IDBTransaction&&bD(t),SD(t,CD())?new Proxy(t,Pg):t)}function ns(t){if(t instanceof IDBRequest)return AD(t);if(Xp.has(t))return Xp.get(t);const e=ND(t);return e!==t&&(Xp.set(t,e),g_.set(e,t)),e}const Yp=t=>g_.get(t);function LD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=ns(a);return i&&a.addEventListener("upgradeneeded",h=>{i(ns(a.result),h.oldVersion,h.newVersion,ns(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const MD=["get","getKey","getAll","getAllKeys","count"],OD=["put","add","delete","clear"],Jp=new Map;function rx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=OD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||MD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return Jp.set(e,o),o}kD(t=>({...t,get:(e,n,i)=>rx(e,n)||t.get(e,n,i),has:(e,n)=>!!rx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function VD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sg="@firebase/app",sx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new m_("@firebase/app"),jD="@firebase/app-compat",zD="@firebase/analytics-compat",FD="@firebase/analytics",BD="@firebase/app-check-compat",UD="@firebase/app-check",HD="@firebase/auth",WD="@firebase/auth-compat",$D="@firebase/database",qD="@firebase/data-connect",GD="@firebase/database-compat",ZD="@firebase/functions",KD="@firebase/functions-compat",QD="@firebase/installations",XD="@firebase/installations-compat",YD="@firebase/messaging",JD="@firebase/messaging-compat",eV="@firebase/performance",tV="@firebase/performance-compat",nV="@firebase/remote-config",iV="@firebase/remote-config-compat",rV="@firebase/storage",sV="@firebase/storage-compat",oV="@firebase/firestore",aV="@firebase/ai",lV="@firebase/firestore-compat",uV="firebase",cV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="[DEFAULT]",hV={[Sg]:"fire-core",[jD]:"fire-core-compat",[FD]:"fire-analytics",[zD]:"fire-analytics-compat",[UD]:"fire-app-check",[BD]:"fire-app-check-compat",[HD]:"fire-auth",[WD]:"fire-auth-compat",[$D]:"fire-rtdb",[qD]:"fire-data-connect",[GD]:"fire-rtdb-compat",[ZD]:"fire-fn",[KD]:"fire-fn-compat",[QD]:"fire-iid",[XD]:"fire-iid-compat",[YD]:"fire-fcm",[JD]:"fire-fcm-compat",[eV]:"fire-perf",[tV]:"fire-perf-compat",[nV]:"fire-rc",[iV]:"fire-rc-compat",[rV]:"fire-gcs",[sV]:"fire-gcs-compat",[oV]:"fire-fst",[lV]:"fire-fst-compat",[aV]:"fire-vertex","fire-js":"fire-js",[uV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Map,dV=new Map,Ig=new Map;function ox(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ga(t){const e=t.name;if(Ig.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Ig.set(e,t);for(const n of Md.values())ox(n,t);for(const n of dV.values())ox(n,t);return!0}function y_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ii(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new uc("app","Firebase",fV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ho("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=cV;function VS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Cg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw is.create("bad-app-name",{appName:String(r)});if(n||(n=RS()),!n)throw is.create("no-options");const o=Md.get(r);if(o){if(co(n,o.options)&&co(i,o.config))return o;throw is.create("duplicate-app",{appName:r})}const a=new wD(r);for(const h of Ig.values())a.addComponent(h);const u=new pV(n,i,a);return Md.set(r,u),u}function jS(t=Cg){const e=Md.get(t);if(!e&&t===Cg&&RS())return VS();if(!e)throw is.create("no-app",{appName:t});return e}function rs(t,e,n){let i=hV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(a.join(" "));return}Ga(new ho(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="firebase-heartbeat-database",gV=1,$u="firebase-heartbeat-store";let em=null;function zS(){return em||(em=LD(mV,gV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($u)}catch(n){console.warn(n)}}}}).catch(t=>{throw is.create("idb-open",{originalErrorMessage:t.message})})),em}async function yV(t){try{const n=(await zS()).transaction($u),i=await n.objectStore($u).get(FS(t));return await n.done,i}catch(e){if(e instanceof gr)ur.warn(e.message);else{const n=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function ax(t,e){try{const i=(await zS()).transaction($u,"readwrite");await i.objectStore($u).put(e,FS(t)),await i.done}catch(n){if(n instanceof gr)ur.warn(n.message);else{const i=is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(i.message)}}}function FS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=1024,vV=30;class wV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>vV){const a=EV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ur.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lx(),{heartbeatsToSend:i,unsentEntries:r}=xV(this._heartbeatsCache.heartbeats),o=Ld(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ur.warn(n),""}}}function lx(){return new Date().toISOString().substring(0,10)}function xV(t,e=_V){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),ux(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ux(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lD()?uD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ax(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ax(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ux(t){return Ld(JSON.stringify({version:2,heartbeats:t})).length}function EV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t){Ga(new ho("platform-logger",e=>new DD(e),"PRIVATE")),Ga(new ho("heartbeat",e=>new wV(e),"PRIVATE")),rs(Sg,sx,t),rs(Sg,sx,"esm2020"),rs("fire-js","")}PV("");var cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,BS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function N(){}N.prototype=T.prototype,A.F=T.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(M,j,B){for(var O=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)O[xe-2]=arguments[xe];return T.prototype[j].apply(M,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,T,N){N||(N=0);const M=Array(16);if(typeof T=="string")for(var j=0;j<16;++j)M[j]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(j=0;j<16;++j)M[j]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=A.g[0],N=A.g[1],j=A.g[2];let B=A.g[3],O;O=T+(B^N&(j^B))+M[0]+3614090360&4294967295,T=N+(O<<7&4294967295|O>>>25),O=B+(j^T&(N^j))+M[1]+3905402710&4294967295,B=T+(O<<12&4294967295|O>>>20),O=j+(N^B&(T^N))+M[2]+606105819&4294967295,j=B+(O<<17&4294967295|O>>>15),O=N+(T^j&(B^T))+M[3]+3250441966&4294967295,N=j+(O<<22&4294967295|O>>>10),O=T+(B^N&(j^B))+M[4]+4118548399&4294967295,T=N+(O<<7&4294967295|O>>>25),O=B+(j^T&(N^j))+M[5]+1200080426&4294967295,B=T+(O<<12&4294967295|O>>>20),O=j+(N^B&(T^N))+M[6]+2821735955&4294967295,j=B+(O<<17&4294967295|O>>>15),O=N+(T^j&(B^T))+M[7]+4249261313&4294967295,N=j+(O<<22&4294967295|O>>>10),O=T+(B^N&(j^B))+M[8]+1770035416&4294967295,T=N+(O<<7&4294967295|O>>>25),O=B+(j^T&(N^j))+M[9]+2336552879&4294967295,B=T+(O<<12&4294967295|O>>>20),O=j+(N^B&(T^N))+M[10]+4294925233&4294967295,j=B+(O<<17&4294967295|O>>>15),O=N+(T^j&(B^T))+M[11]+2304563134&4294967295,N=j+(O<<22&4294967295|O>>>10),O=T+(B^N&(j^B))+M[12]+1804603682&4294967295,T=N+(O<<7&4294967295|O>>>25),O=B+(j^T&(N^j))+M[13]+4254626195&4294967295,B=T+(O<<12&4294967295|O>>>20),O=j+(N^B&(T^N))+M[14]+2792965006&4294967295,j=B+(O<<17&4294967295|O>>>15),O=N+(T^j&(B^T))+M[15]+1236535329&4294967295,N=j+(O<<22&4294967295|O>>>10),O=T+(j^B&(N^j))+M[1]+4129170786&4294967295,T=N+(O<<5&4294967295|O>>>27),O=B+(N^j&(T^N))+M[6]+3225465664&4294967295,B=T+(O<<9&4294967295|O>>>23),O=j+(T^N&(B^T))+M[11]+643717713&4294967295,j=B+(O<<14&4294967295|O>>>18),O=N+(B^T&(j^B))+M[0]+3921069994&4294967295,N=j+(O<<20&4294967295|O>>>12),O=T+(j^B&(N^j))+M[5]+3593408605&4294967295,T=N+(O<<5&4294967295|O>>>27),O=B+(N^j&(T^N))+M[10]+38016083&4294967295,B=T+(O<<9&4294967295|O>>>23),O=j+(T^N&(B^T))+M[15]+3634488961&4294967295,j=B+(O<<14&4294967295|O>>>18),O=N+(B^T&(j^B))+M[4]+3889429448&4294967295,N=j+(O<<20&4294967295|O>>>12),O=T+(j^B&(N^j))+M[9]+568446438&4294967295,T=N+(O<<5&4294967295|O>>>27),O=B+(N^j&(T^N))+M[14]+3275163606&4294967295,B=T+(O<<9&4294967295|O>>>23),O=j+(T^N&(B^T))+M[3]+4107603335&4294967295,j=B+(O<<14&4294967295|O>>>18),O=N+(B^T&(j^B))+M[8]+1163531501&4294967295,N=j+(O<<20&4294967295|O>>>12),O=T+(j^B&(N^j))+M[13]+2850285829&4294967295,T=N+(O<<5&4294967295|O>>>27),O=B+(N^j&(T^N))+M[2]+4243563512&4294967295,B=T+(O<<9&4294967295|O>>>23),O=j+(T^N&(B^T))+M[7]+1735328473&4294967295,j=B+(O<<14&4294967295|O>>>18),O=N+(B^T&(j^B))+M[12]+2368359562&4294967295,N=j+(O<<20&4294967295|O>>>12),O=T+(N^j^B)+M[5]+4294588738&4294967295,T=N+(O<<4&4294967295|O>>>28),O=B+(T^N^j)+M[8]+2272392833&4294967295,B=T+(O<<11&4294967295|O>>>21),O=j+(B^T^N)+M[11]+1839030562&4294967295,j=B+(O<<16&4294967295|O>>>16),O=N+(j^B^T)+M[14]+4259657740&4294967295,N=j+(O<<23&4294967295|O>>>9),O=T+(N^j^B)+M[1]+2763975236&4294967295,T=N+(O<<4&4294967295|O>>>28),O=B+(T^N^j)+M[4]+1272893353&4294967295,B=T+(O<<11&4294967295|O>>>21),O=j+(B^T^N)+M[7]+4139469664&4294967295,j=B+(O<<16&4294967295|O>>>16),O=N+(j^B^T)+M[10]+3200236656&4294967295,N=j+(O<<23&4294967295|O>>>9),O=T+(N^j^B)+M[13]+681279174&4294967295,T=N+(O<<4&4294967295|O>>>28),O=B+(T^N^j)+M[0]+3936430074&4294967295,B=T+(O<<11&4294967295|O>>>21),O=j+(B^T^N)+M[3]+3572445317&4294967295,j=B+(O<<16&4294967295|O>>>16),O=N+(j^B^T)+M[6]+76029189&4294967295,N=j+(O<<23&4294967295|O>>>9),O=T+(N^j^B)+M[9]+3654602809&4294967295,T=N+(O<<4&4294967295|O>>>28),O=B+(T^N^j)+M[12]+3873151461&4294967295,B=T+(O<<11&4294967295|O>>>21),O=j+(B^T^N)+M[15]+530742520&4294967295,j=B+(O<<16&4294967295|O>>>16),O=N+(j^B^T)+M[2]+3299628645&4294967295,N=j+(O<<23&4294967295|O>>>9),O=T+(j^(N|~B))+M[0]+4096336452&4294967295,T=N+(O<<6&4294967295|O>>>26),O=B+(N^(T|~j))+M[7]+1126891415&4294967295,B=T+(O<<10&4294967295|O>>>22),O=j+(T^(B|~N))+M[14]+2878612391&4294967295,j=B+(O<<15&4294967295|O>>>17),O=N+(B^(j|~T))+M[5]+4237533241&4294967295,N=j+(O<<21&4294967295|O>>>11),O=T+(j^(N|~B))+M[12]+1700485571&4294967295,T=N+(O<<6&4294967295|O>>>26),O=B+(N^(T|~j))+M[3]+2399980690&4294967295,B=T+(O<<10&4294967295|O>>>22),O=j+(T^(B|~N))+M[10]+4293915773&4294967295,j=B+(O<<15&4294967295|O>>>17),O=N+(B^(j|~T))+M[1]+2240044497&4294967295,N=j+(O<<21&4294967295|O>>>11),O=T+(j^(N|~B))+M[8]+1873313359&4294967295,T=N+(O<<6&4294967295|O>>>26),O=B+(N^(T|~j))+M[15]+4264355552&4294967295,B=T+(O<<10&4294967295|O>>>22),O=j+(T^(B|~N))+M[6]+2734768916&4294967295,j=B+(O<<15&4294967295|O>>>17),O=N+(B^(j|~T))+M[13]+1309151649&4294967295,N=j+(O<<21&4294967295|O>>>11),O=T+(j^(N|~B))+M[4]+4149444226&4294967295,T=N+(O<<6&4294967295|O>>>26),O=B+(N^(T|~j))+M[11]+3174756917&4294967295,B=T+(O<<10&4294967295|O>>>22),O=j+(T^(B|~N))+M[2]+718787259&4294967295,j=B+(O<<15&4294967295|O>>>17),O=N+(B^(j|~T))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(j+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+j&4294967295,A.g[3]=A.g[3]+B&4294967295}i.prototype.v=function(A,T){T===void 0&&(T=A.length);const N=T-this.blockSize,M=this.C;let j=this.h,B=0;for(;B<T;){if(j==0)for(;B<=N;)r(this,A,B),B+=this.blockSize;if(typeof A=="string"){for(;B<T;)if(M[j++]=A.charCodeAt(B++),j==this.blockSize){r(this,M),j=0;break}}else for(;B<T;)if(M[j++]=A[B++],j==this.blockSize){r(this,M),j=0;break}}this.h=j,this.o+=T},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;T=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=T&255,T/=256;for(this.v(A),A=Array(16),T=0,N=0;N<4;++N)for(let M=0;M<32;M+=8)A[T++]=this.g[N]>>>M&255;return A};function o(A,T){var N=u;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=T(A)}function a(A,T){this.h=T;const N=[];let M=!0;for(let j=A.length-1;j>=0;j--){const B=A[j]|0;M&&B==T||(N[j]=B,M=!1)}this.g=N}var u={};function h(A){return-128<=A&&A<128?o(A,function(T){return new a([T|0],T<0?-1:0)}):new a([A|0],A<0?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return g;if(A<0)return V(f(-A));const T=[];let N=1;for(let M=0;A>=N;M++)T[M]=A/N|0,N*=4294967296;return new a(T,0)}function m(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return V(m(A.substring(1),T));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(T,8));let M=g;for(let B=0;B<A.length;B+=8){var j=Math.min(8,A.length-B);const O=parseInt(A.substring(B,B+j),T);j<8?(j=f(Math.pow(T,j)),M=M.j(j).add(f(O))):(M=M.j(N),M=M.add(f(O)))}return M}var g=h(0),_=h(1),E=h(16777216);t=a.prototype,t.m=function(){if(b(this))return-V(this).m();let A=0,T=1;for(let N=0;N<this.g.length;N++){const M=this.i(N);A+=(M>=0?M:4294967296+M)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(b(this))return"-"+V(this).toString(A);const T=f(Math.pow(A,6));var N=this;let M="";for(;;){const j=F(N,T).g;N=R(N,j.j(T));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=j,k(N))return B+M;for(;B.length<6;)B="0"+B;M=B+M}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function b(A){return A.h==-1}t.l=function(A){return A=R(this,A),b(A)?-1:k(A)?0:1};function V(A){const T=A.g.length,N=[];for(let M=0;M<T;M++)N[M]=~A.g[M];return new a(N,~A.h).add(_)}t.abs=function(){return b(this)?V(this):this},t.add=function(A){const T=Math.max(this.g.length,A.g.length),N=[];let M=0;for(let j=0;j<=T;j++){let B=M+(this.i(j)&65535)+(A.i(j)&65535),O=(B>>>16)+(this.i(j)>>>16)+(A.i(j)>>>16);M=O>>>16,B&=65535,O&=65535,N[j]=O<<16|B}return new a(N,N[N.length-1]&-2147483648?-1:0)};function R(A,T){return A.add(V(T))}t.j=function(A){if(k(this)||k(A))return g;if(b(this))return b(A)?V(this).j(V(A)):V(V(this).j(A));if(b(A))return V(this.j(V(A)));if(this.l(E)<0&&A.l(E)<0)return f(this.m()*A.m());const T=this.g.length+A.g.length,N=[];for(var M=0;M<2*T;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(let j=0;j<A.g.length;j++){const B=this.i(M)>>>16,O=this.i(M)&65535,xe=A.i(j)>>>16,dt=A.i(j)&65535;N[2*M+2*j]+=O*dt,S(N,2*M+2*j),N[2*M+2*j+1]+=B*dt,S(N,2*M+2*j+1),N[2*M+2*j+1]+=O*xe,S(N,2*M+2*j+1),N[2*M+2*j+2]+=B*xe,S(N,2*M+2*j+2)}for(A=0;A<T;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=T;A<2*T;A++)N[A]=0;return new a(N,0)};function S(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function C(A,T){this.g=A,this.h=T}function F(A,T){if(k(T))throw Error("division by zero");if(k(A))return new C(g,g);if(b(A))return T=F(V(A),T),new C(V(T.g),V(T.h));if(b(T))return T=F(A,V(T)),new C(V(T.g),T.h);if(A.g.length>30){if(b(A)||b(T))throw Error("slowDivide_ only works with positive integers.");for(var N=_,M=T;M.l(A)<=0;)N=G(N),M=G(M);var j=U(N,1),B=U(M,1);for(M=U(M,2),N=U(N,2);!k(M);){var O=B.add(M);O.l(A)<=0&&(j=j.add(N),B=O),M=U(M,1),N=U(N,1)}return T=R(A,j.j(T)),new C(j,T)}for(j=g;A.l(T)>=0;){for(N=Math.max(1,Math.floor(A.m()/T.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),B=f(N),O=B.j(T);b(O)||O.l(A)>0;)N-=M,B=f(N),O=B.j(T);k(B)&&(B=_),j=j.add(B),A=R(A,O)}return new C(j,A)}t.B=function(A){return F(this,A).h},t.and=function(A){const T=Math.max(this.g.length,A.g.length),N=[];for(let M=0;M<T;M++)N[M]=this.i(M)&A.i(M);return new a(N,this.h&A.h)},t.or=function(A){const T=Math.max(this.g.length,A.g.length),N=[];for(let M=0;M<T;M++)N[M]=this.i(M)|A.i(M);return new a(N,this.h|A.h)},t.xor=function(A){const T=Math.max(this.g.length,A.g.length),N=[];for(let M=0;M<T;M++)N[M]=this.i(M)^A.i(M);return new a(N,this.h^A.h)};function G(A){const T=A.g.length+1,N=[];for(let M=0;M<T;M++)N[M]=A.i(M)<<1|A.i(M-1)>>>31;return new a(N,A.h)}function U(A,T){const N=T>>5;T%=32;const M=A.g.length-N,j=[];for(let B=0;B<M;B++)j[B]=T>0?A.i(B+N)>>>T|A.i(B+N+1)<<32-T:A.i(B+N);return new a(j,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,BS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ss=a}).apply(typeof cx<"u"?cx:typeof self<"u"?self:typeof window<"u"?window:{});var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var US,Jl,HS,Hh,Ag,WS,$S,qS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof wh=="object"&&wh];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var x=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var H=c[I];if(!(H in x))break e;x=x[H]}c=c[c.length-1],I=x[c],y=y(I),y!=I&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var x=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&x.push([I,y[I]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,x){return c.call.apply(c.bind,arguments)}function f(c,y,x){return f=h,f.apply(null,arguments)}function m(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function g(c,y){function x(){}x.prototype=y.prototype,c.Z=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Ob=function(I,H,$){for(var ne=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ne[Pe-2]=arguments[Pe];return y.prototype[H].apply(I,ne)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function E(c){const y=c.length;if(y>0){const x=Array(y);for(let I=0;I<y;I++)x[I]=c[I];return x}return[]}function k(c,y){for(let I=1;I<arguments.length;I++){const H=arguments[I];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=c.length||0;const $=H.length||0;c.length=x+$;for(let ne=0;ne<$;ne++)c[x+ne]=H[ne]}else c.push(H)}}class b{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(c){a.setTimeout(()=>{throw c},0)}function R(){var c=A;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class S{constructor(){this.h=this.g=null}add(y,x){const I=C.get();I.set(y,x),this.h?this.h.next=I:this.g=I,this.h=I}}var C=new b(()=>new F,c=>c.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let G,U=!1,A=new S,T=()=>{const c=Promise.resolve(void 0);G=()=>{c.then(N)}};function N(){for(var c;c=R();){try{c.h.call(c.g)}catch(x){V(x)}var y=C;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}U=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};a.addEventListener("test",x,y),a.removeEventListener("test",x,y)}catch{}return c}();function O(c){return/^[\s\xa0]*$/.test(c)}function xe(c,y){j.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(xe,j),xe.prototype.init=function(c,y){const x=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),Ie=0;function ut(c,y,x,I,H){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!I,this.ha=H,this.key=++Ie,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pe(c,y,x){for(const I in c)y.call(x,c[I],I,c)}function ee(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function ie(c){const y={};for(const x in c)y[x]=c[x];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(c,y){let x,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(x in I)c[x]=I[x];for(let $=0;$<te.length;$++)x=te[$],Object.prototype.hasOwnProperty.call(I,x)&&(c[x]=I[x])}}function ue(c){this.src=c,this.g={},this.h=0}ue.prototype.add=function(c,y,x,I,H){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const ne=J(c,y,I,H);return ne>-1?(y=c[ne],x||(y.fa=!1)):(y=new ut(y,this.src,$,!!I,H),y.fa=x,c.push(y)),y};function le(c,y){const x=y.type;if(x in c.g){var I=c.g[x],H=Array.prototype.indexOf.call(I,y,void 0),$;($=H>=0)&&Array.prototype.splice.call(I,H,1),$&&(Z(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function J(c,y,x,I){for(let H=0;H<c.length;++H){const $=c[H];if(!$.da&&$.listener==y&&$.capture==!!x&&$.ha==I)return H}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),Ge={};function St(c,y,x,I,H){if(Array.isArray(y)){for(let $=0;$<y.length;$++)St(c,y[$],x,I,H);return null}return x=Is(x),c&&c[dt]?c.J(y,x,u(I)?!!I.capture:!1,H):me(c,y,x,!1,I,H)}function me(c,y,x,I,H,$){if(!y)throw Error("Invalid event type");const ne=u(H)?!!H.capture:!!H;let Pe=Ao(c);if(Pe||(c[ge]=Pe=new ue(c)),x=Pe.add(y,x,I,ne,$),x.proxy)return x;if(I=Ae(),x.proxy=I,I.src=c,I.listener=x,c.addEventListener)B||(H=ne),H===void 0&&(H=!1),c.addEventListener(y.toString(),I,H);else if(c.attachEvent)c.attachEvent(pt(y.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ae(){function c(x){return y.call(c.src,c.listener,x)}const y=Io;return c}function ft(c,y,x,I,H){if(Array.isArray(y))for(var $=0;$<y.length;$++)ft(c,y[$],x,I,H);else I=u(I)?!!I.capture:!!I,x=Is(x),c&&c[dt]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],x=J(y,x,I,H),x>-1&&(Z(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=Ao(c))&&(y=c.g[y.toString()],c=-1,y&&(c=J(y,x,I,H)),(x=c>-1?y[c]:null)&&We(x))}function We(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[dt])le(y.i,c);else{var x=c.type,I=c.proxy;y.removeEventListener?y.removeEventListener(x,I,c.capture):y.detachEvent?y.detachEvent(pt(x),I):y.addListener&&y.removeListener&&y.removeListener(I),(x=Ao(y))?(le(x,c),x.h==0&&(x.src=null,y[ge]=null)):Z(c)}}}function pt(c){return c in Ge?Ge[c]:Ge[c]="on"+c}function Io(c,y){if(c.da)c=!0;else{y=new xe(y,this);const x=c.listener,I=c.ha||c.src;c.fa&&We(c),c=x.call(I,y)}return c}function Ao(c){return c=c[ge],c instanceof ue?c:null}var Cs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Is(c){return typeof c=="function"?c:(c[Cs]||(c[Cs]=function(y){return c.handleEvent(y)}),c[Cs])}function Rt(){M.call(this),this.i=new ue(this),this.M=this,this.G=null}g(Rt,M),Rt.prototype[dt]=!0,Rt.prototype.removeEventListener=function(c,y,x,I){ft(this,c,y,x,I)};function Nt(c,y){var x,I=c.G;if(I)for(x=[];I;I=I.G)x.push(I);if(c=c.M,I=y.type||y,typeof y=="string")y=new j(y,c);else if(y instanceof j)y.target=y.target||c;else{var H=y;y=new j(I,c),re(y,H)}H=!0;let $,ne;if(x)for(ne=x.length-1;ne>=0;ne--)$=y.g=x[ne],H=yr($,I,!0,y)&&H;if($=y.g=c,H=yr($,I,!0,y)&&H,H=yr($,I,!1,y)&&H,x)for(ne=0;ne<x.length;ne++)$=y.g=x[ne],H=yr($,I,!1,y)&&H}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const x=c.g[y];for(let I=0;I<x.length;I++)Z(x[I]);delete c.g[y],c.h--}}this.G=null},Rt.prototype.J=function(c,y,x,I){return this.i.add(String(c),y,!1,x,I)},Rt.prototype.K=function(c,y,x,I){return this.i.add(String(c),y,!0,x,I)};function yr(c,y,x,I){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let $=0;$<y.length;++$){const ne=y[$];if(ne&&!ne.da&&ne.capture==x){const Pe=ne.listener,Fe=ne.ha||ne.src;ne.fa&&le(c.i,ne),H=Pe.call(Fe,I)!==!1&&H}}return H&&!I.defaultPrevented}function xc(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function dl(c){c.g=xc(()=>{c.g=null,c.i&&(c.i=!1,dl(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Xf extends M{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:dl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(c){M.call(this),this.h=c,this.g={}}g(As,M);var bo=[];function fl(c){pe(c.g,function(y,x){this.g.hasOwnProperty(x)&&We(y)},c),c.g={}}As.prototype.N=function(){As.Z.N.call(this),fl(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ko=a.JSON.stringify,Yf=a.JSON.parse,Tc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function pl(){}function Ec(){}var _r={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bs(){j.call(this,"d")}g(bs,j);function Ro(){j.call(this,"c")}g(Ro,j);var Mi={},vr=null;function No(){return vr=vr||new Rt}Mi.Ia="serverreachability";function Pc(c){j.call(this,Mi.Ia,c)}g(Pc,j);function wr(c){const y=No();Nt(y,new Pc(y))}Mi.STAT_EVENT="statevent";function ml(c,y){j.call(this,Mi.STAT_EVENT,c),this.stat=y}g(ml,j);function Lt(c){const y=No();Nt(y,new ml(y,c))}Mi.Ja="timingevent";function Sc(c,y){j.call(this,Mi.Ja,c),this.size=y}g(Sc,j);function ks(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Rs(){this.g=!0}Rs.prototype.ua=function(){this.g=!1};function Jf(c,y,x,I,H,$){c.info(function(){if(c.g)if($){var ne="",Pe=$.split("&");for(let Ue=0;Ue<Pe.length;Ue++){var Fe=Pe[Ue].split("=");if(Fe.length>1){const mt=Fe[0];Fe=Fe[1];const On=mt.split("_");ne=On.length>=2&&On[1]=="type"?ne+(mt+"="+Fe+"&"):ne+(mt+"=redacted&")}}}else ne=null;else ne=$;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+y+`
`+x+`
`+ne})}function ep(c,y,x,I,H,$,ne){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+y+`
`+x+`
`+$+" "+ne})}function xr(c,y,x,I){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+tp(c,x)+(I?" "+I:"")})}function gl(c,y){c.info(function(){return"TIMEOUT: "+y})}Rs.prototype.info=function(){};function tp(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var x=$[c];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var H=I[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ne=1;ne<I.length;ne++)I[ne]=""}}}}return ko($)}catch{return y}}var Lo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ic;function un(){}g(un,pl),un.prototype.g=function(){return new XMLHttpRequest},Ic=new un;function de(c){return encodeURIComponent(String(c))}function Ac(c){var y=1;c=c.split(":");const x=[];for(;y>0&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function Zn(c,y,x,I){this.j=c,this.i=y,this.l=x,this.S=I||1,this.V=new As(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yl}function yl(){this.i=null,this.g="",this.h=!1}var _l={},Ns={};function Mo(c,y,x){c.M=1,c.A=Ze(en(y)),c.u=x,c.R=!0,Oi(c,null)}function Oi(c,y){c.F=Date.now(),Oo(c),c.B=en(c.A);var x=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Fo(x.i,"t",I),c.C=0,x=c.j.L,c.h=new yl,c.g=Nl(c.j,x?y:null,!c.u),c.P>0&&(c.O=new Xf(f(c.Y,c,c.g),c.P)),y=c.V,x=c.g,I=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(bo[0]=H.toString()),H=bo);for(let $=0;$<H.length;$++){const ne=St(x,H[$],I||y.handleEvent,!1,y.h||y);if(!ne)break;y.g[ne.key]=ne}y=c.J?ie(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),wr(),Jf(c.i,c.v,c.B,c.l,c.S,c.u)}Zn.prototype.ba=function(c){c=c.target;const y=this.O;y&&di(c)==3?y.j():this.Y(c)},Zn.prototype.Y=function(c){try{if(c==this.g)e:{const Pe=di(this.g),Fe=this.g.ya(),Ue=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Sl(this.g)))){this.K||Pe!=4||Fe==7||(Fe==8||Ue<=0?wr(3):wr(2)),Do(this);var y=this.g.ca();this.X=y;var x=bc(this);if(this.o=y==200,ep(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,H=this.g;if((I=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(I)){var $=I;break t}}$=null}if(c=$)xr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vl(this,c);else{this.o=!1,this.m=3,Lt(12),Rn(this),Ls(this);break e}}if(this.R){c=!0;let mt;for(;!this.K&&this.C<x.length;)if(mt=np(this,x),mt==Ns){Pe==4&&(this.m=4,Lt(14),c=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==_l){this.m=4,Lt(15),xr(this.i,this.l,x,"[Invalid Chunk]"),c=!1;break}else xr(this.i,this.l,mt,null),vl(this,mt);if(kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||x.length!=0||this.h.h||(this.m=1,Lt(16),c=!1),this.o=this.o&&c,!c)xr(this.i,this.l,x,"[Invalid Chunked Response]"),Rn(this),Ls(this);else if(x.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),kl(ne),ne.P=!0,Lt(11))}}else xr(this.i,this.l,x,null),vl(this,x);Pe==4&&Rn(this),this.o&&!this.K&&(Pe==4?Tn(this.j,this):(this.o=!1,Oo(this)))}else Cl(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),Rn(this),Ls(this)}}}catch{}finally{}};function bc(c){if(!kc(c))return c.g.la();const y=Sl(c.g);if(y==="")return"";let x="";const I=y.length,H=di(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Rn(c),Ls(c),"";c.h.i=new a.TextDecoder}for(let $=0;$<I;$++)c.h.h=!0,x+=c.h.i.decode(y[$],{stream:!(H&&$==I-1)});return y.length=0,c.h.g+=x,c.C=0,c.h.g}function kc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function np(c,y){var x=c.C,I=y.indexOf(`
`,x);return I==-1?Ns:(x=Number(y.substring(x,I)),isNaN(x)?_l:(I+=1,I+x>y.length?Ns:(y=y.slice(I,I+x),c.C=I+x,y)))}Zn.prototype.cancel=function(){this.K=!0,Rn(this)};function Oo(c){c.T=Date.now()+c.H,Rc(c,c.H)}function Rc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ks(f(c.aa,c),y)}function Do(c){c.D&&(a.clearTimeout(c.D),c.D=null)}Zn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(gl(this.i,this.B),this.M!=2&&(wr(),Lt(17)),Rn(this),this.m=2,Ls(this)):Rc(this,this.T-c)};function Ls(c){c.j.I==0||c.K||Tn(c.j,c)}function Rn(c){Do(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,fl(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function vl(c,y){try{var x=c.j;if(x.I!=0&&(x.g==c||Ms(x.h,c))){if(!c.L&&Ms(x.h,c)&&x.I==3){try{var I=x.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<c.F)$o(x),Ho(x);else break e;bl(x),Lt(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=ks(f(x.Va,x),6e3));Mc(x.h)<=1&&x.ta&&(x.ta=void 0)}else pi(x,11)}else if((c.L||x.g==c)&&$o(x),!O(y))for(H=x.Ba.g.parse(y),y=0;y<H.length;y++){let Ue=H[y];const mt=Ue[0];if(!(mt<=x.K))if(x.K=mt,Ue=Ue[1],x.I==2)if(Ue[0]=="c"){x.M=Ue[1],x.ba=Ue[2];const On=Ue[3];On!=null&&(x.ka=On,x.j.info("VER="+x.ka));const Xn=Ue[4];Xn!=null&&(x.za=Xn,x.j.info("SVER="+x.za));const Dn=Ue[5];Dn!=null&&typeof Dn=="number"&&Dn>0&&(I=1.5*Dn,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const mi=c.g;if(mi){const Zo=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zo){var $=I.h;$.g||Zo.indexOf("spdy")==-1&&Zo.indexOf("quic")==-1&&Zo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Di($,$.h),$.h=null))}if(I.G){const Ko=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ko&&(I.wa=Ko,ce(I.J,I.G,Ko))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-c.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var ne=c;if(I.na=Rl(I,I.L?I.ba:null,I.W),ne.L){wl(I.h,ne);var Pe=ne,Fe=I.O;Fe&&(Pe.H=Fe),Pe.D&&(Do(Pe),Oo(Pe)),I.g=ne}else Al(I);x.i.length>0&&fi(x)}else Ue[0]!="stop"&&Ue[0]!="close"||pi(x,7);else x.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?pi(x,7):ke(x):Ue[0]!="noop"&&x.l&&x.l.qa(Ue),x.A=0)}}wr(4)}catch{}}var ip=class{constructor(c,y){this.g=c,this.map=y}};function Nc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Mc(c){return c.h?1:c.g?c.g.size:0}function Ms(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Di(c,y){c.g?c.g.add(y):c.h=y}function wl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Nc.prototype.cancel=function(){if(this.i=xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function xl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.G);return y}return E(c.i)}var Tr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function De(c,y){if(c){c=c.split("&");for(let x=0;x<c.length;x++){const I=c[x].indexOf("=");let H,$=null;I>=0?(H=c[x].substring(0,I),$=c[x].substring(I+1)):H=c[x],y(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ze(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof ze?(this.l=c.l,Nn(this,c.j),this.o=c.o,this.g=c.g,Ln(this,c.u),this.h=c.h,Os(this,Ds(c.i)),this.m=c.m):c&&(y=String(c).match(Tr))?(this.l=!1,Nn(this,y[1]||"",!0),this.o=Vi(y[2]||""),this.g=Vi(y[3]||"",!0),Ln(this,y[4]),this.h=Vi(y[5]||"",!0),Os(this,y[6]||"",!0),this.m=Vi(y[7]||"")):(this.l=!1,this.i=new Kn(null,this.l))}ze.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ui(y,Oc,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ui(y,Oc,!0),"@"),c.push(de(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&c.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(ui(x,x.charAt(0)=="/"?ji:Vo,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",ui(x,zi)),c.join("")},ze.prototype.resolve=function(c){const y=en(this);let x=!!c.j;x?Nn(y,c.j):x=!!c.o,x?y.o=c.o:x=!!c.g,x?y.g=c.g:x=c.u!=null;var I=c.h;if(x)Ln(y,c.u);else if(x=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var H=y.h.lastIndexOf("/");H!=-1&&(I=y.h.slice(0,H+1)+I)}if(H=I,H==".."||H==".")I="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){I=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let ne=0;ne<H.length;){const Pe=H[ne++];Pe=="."?I&&ne==H.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),I&&ne==H.length&&$.push("")):($.push(Pe),I=!0)}I=$.join("/")}else I=H}return x?y.h=I:x=c.i.toString()!=="",x?Os(y,Ds(c.i)):x=!!c.m,x&&(y.m=c.m),y};function en(c){return new ze(c)}function Nn(c,y,x){c.j=x?Vi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Ln(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Os(c,y,x){y instanceof Kn?(c.i=y,Tl(c.i,c.l)):(x||(y=ui(y,ct)),c.i=new Kn(y,c.l))}function ce(c,y,x){c.i.set(y,x)}function Ze(c){return ce(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Vi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ui(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,cn),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function cn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Oc=/[#\/\?@]/g,Vo=/[#\?:]/g,ji=/[#\?]/g,ct=/[#\?@]/g,zi=/#/g;function Kn(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function xn(c){c.g||(c.g=new Map,c.h=0,c.i&&De(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=Kn.prototype,t.add=function(c,y){xn(this),this.i=null,c=ci(this,c);let x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function jo(c,y){xn(c),y=ci(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Er(c,y){return xn(c),y=ci(c,y),c.g.has(y)}t.forEach=function(c,y){xn(this),this.g.forEach(function(x,I){x.forEach(function(H){c.call(y,H,I,this)},this)},this)};function zo(c,y){xn(c);let x=[];if(typeof y=="string")Er(c,y)&&(x=x.concat(c.g.get(ci(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)x=x.concat(c[y]);return x}t.set=function(c,y){return xn(this),this.i=null,c=ci(this,c),Er(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=zo(this,c),c.length>0?String(c[0]):y):y};function Fo(c,y,x){jo(c,y),x.length>0&&(c.i=null,c.g.set(ci(c,y),E(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var x=y[I];const H=de(x);x=zo(this,x);for(let $=0;$<x.length;$++){let ne=H;x[$]!==""&&(ne+="="+de(x[$])),c.push(ne)}}return this.i=c.join("&")};function Ds(c){const y=new Kn;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function ci(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Tl(c,y){y&&!c.j&&(xn(c),c.i=null,c.g.forEach(function(x,I){const H=I.toLowerCase();I!=H&&(jo(this,I),Fo(this,H,x))},c)),c.j=y}function Bo(c,y){const x=new Rs;if(a.Image){const I=new Image;I.onload=m(Mn,x,"TestLoadImage: loaded",!0,y,I),I.onerror=m(Mn,x,"TestLoadImage: error",!1,y,I),I.onabort=m(Mn,x,"TestLoadImage: abort",!1,y,I),I.ontimeout=m(Mn,x,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else y(!1)}function Dc(c,y){const x=new Rs,I=new AbortController,H=setTimeout(()=>{I.abort(),Mn(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:I.signal}).then($=>{clearTimeout(H),$.ok?Mn(x,"TestPingServer: ok",!0,y):Mn(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Mn(x,"TestPingServer: error",!1,y)})}function Mn(c,y,x,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(x)}catch{}}function rp(){this.g=new Tc}function Ee(c){this.i=c.Sb||null,this.h=c.ab||!1}g(Ee,pl),Ee.prototype.g=function(){return new tn(this.i,this.h)};function tn(c,y){Rt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(tn,Rt),t=tn.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Fi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$e(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function $e(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Pr(this):Fi(this),this.readyState==3&&$e(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Pr(this))},t.Na=function(c){this.g&&(this.response=c,Pr(this))},t.ga=function(){this.g&&Pr(this)};function Pr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Fi(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function Fi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Uo(c){let y="";return pe(c,function(x,I){y+=I,y+=":",y+=x,y+=`\r
`}),y}function Vs(c,y,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=Uo(x),typeof c=="string"?x!=null&&de(x):ce(c,y,x))}function Be(c){Rt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Be,Rt);var El=/^https?$/i,js=["POST","PUT"];t=Be.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ic.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){vt(this,$);return}if(c=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)x.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())x.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find($=>$.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(js,y,void 0)>=0)||I||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of x)this.g.setRequestHeader($,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){vt(this,$)}};function vt(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,hi(c),zs(c)}function hi(c){c.A||(c.A=!0,Nt(c,"complete"),Nt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Nt(this,"complete"),Nt(this,"abort"),zs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zs(this,!0)),Be.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Pl(this):this.Xa())},t.Xa=function(){Pl(this)};function Pl(c){if(c.h&&typeof o<"u"){if(c.v&&di(c)==4)setTimeout(c.Ca.bind(c),0);else if(Nt(c,"readystatechange"),di(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var I;if(I=$===0){let ne=String(c.D).match(Tr)[1]||null;!ne&&a.self&&a.self.location&&(ne=a.self.location.protocol.slice(0,-1)),I=!El.test(ne?ne.toLowerCase():"")}x=I}if(x)Nt(c,"complete"),Nt(c,"success");else{c.o=6;try{var H=di(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",hi(c)}}finally{zs(c)}}}}function zs(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const x=c.g;c.g=null,y||Nt(c,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function di(c){return c.g?c.g.readyState:0}t.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Yf(y)}};function Sl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Cl(c){const y={};c=(c.g&&di(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(O(c[I]))continue;var x=Ac(c[I]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const $=y[H]||[];y[H]=$,$.push(x)}ee(y,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function Il(c){this.za=0,this.i=[],this.j=new Rs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fs("baseRetryDelayMs",5e3,c),this.Za=Fs("retryDelaySeedMs",1e4,c),this.Ta=Fs("forwardChannelMaxRetries",2,c),this.va=Fs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Nc(c&&c.concurrentRequestLimit),this.Ba=new rp,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Il.prototype,t.ka=8,t.I=1,t.connect=function(c,y,x,I){Lt(0),this.W=c,this.H=y||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=Rl(this,null,this.W),fi(this)};function ke(c){if(hn(c),c.I==3){var y=c.V++,x=en(c.J);if(ce(x,"SID",c.M),ce(x,"RID",y),ce(x,"TYPE","terminate"),Bi(c,x),y=new Zn(c,c.j,y),y.M=2,y.A=Ze(en(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=y.A,x=!0),x||(y.g=Nl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Oo(y)}Qn(c)}function Ho(c){c.g&&(kl(c),c.g.cancel(),c.g=null)}function hn(c){Ho(c),c.v&&(a.clearTimeout(c.v),c.v=null),$o(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function fi(c){if(!Lc(c.h)&&!c.m){c.m=!0;var y=c.Ea;G||T(),U||(G(),U=!0),A.add(y,c),c.D=0}}function Vc(c,y){return Mc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ks(f(c.Ea,c,y),Fc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new Zn(this,this.j,c);let $=this.o;if(this.U&&($?($=ie($),re($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=zc(this,H,y),x=en(this.J),ce(x,"RID",c),ce(x,"CVER",22),this.G&&ce(x,"X-HTTP-Session-Id",this.G),Bi(this,x),$&&(this.R?y="headers="+de(Uo($))+"&"+y:this.u&&Vs(x,this.u,$)),Di(this.h,H),this.Ra&&ce(x,"TYPE","init"),this.S?(ce(x,"$req",y),ce(x,"SID","null"),H.U=!0,Mo(H,x,null)):Mo(H,x,y),this.I=2}}else this.I==3&&(c?jc(this,c):this.i.length==0||Lc(this.h)||jc(this))};function jc(c,y){var x;y?x=y.l:x=c.V++;const I=en(c.J);ce(I,"SID",c.M),ce(I,"RID",x),ce(I,"AID",c.K),Bi(c,I),c.u&&c.o&&Vs(I,c.u,c.o),x=new Zn(c,c.j,x,c.D+1),c.u===null&&(x.J=c.o),y&&(c.i=y.G.concat(c.i)),y=zc(c,x,1e3),x.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Di(c.h,x),Mo(x,I,y)}function Bi(c,y){c.H&&pe(c.H,function(x,I){ce(y,I,x)}),c.l&&pe({},function(x,I){ce(y,I,x)})}function zc(c,y,x){x=Math.min(c.i.length,x);const I=c.l?f(c.l.Ka,c.l,c):null;e:{var H=c.i;let Pe=-1;for(;;){const Fe=["count="+x];Pe==-1?x>0?(Pe=H[0].g,Fe.push("ofs="+Pe)):Pe=0:Fe.push("ofs="+Pe);let Ue=!0;for(let mt=0;mt<x;mt++){var $=H[mt].g;const On=H[mt].map;if($-=Pe,$<0)Pe=Math.max(0,H[mt].g-100),Ue=!1;else try{$="req"+$+"_"||"";try{var ne=On instanceof Map?On:Object.entries(On);for(const[Xn,Dn]of ne){let mi=Dn;u(Dn)&&(mi=ko(Dn)),Fe.push($+Xn+"="+encodeURIComponent(mi))}}catch(Xn){throw Fe.push($+"type="+encodeURIComponent("_badmap")),Xn}}catch{I&&I(On)}}if(Ue){ne=Fe.join("&");break e}}ne=void 0}return c=c.i.splice(0,x),y.G=c,ne}function Al(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;G||T(),U||(G(),U=!0),A.add(y,c),c.A=0}}function bl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ks(f(c.Da,c),Fc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Wo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ks(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Ho(this),Wo(this))};function kl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Wo(c){c.g=new Zn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=en(c.na);ce(y,"RID","rpc"),ce(y,"SID",c.M),ce(y,"AID",c.K),ce(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&ce(y,"TO",c.ia),ce(y,"TYPE","xmlhttp"),Bi(c,y),c.u&&c.o&&Vs(y,c.u,c.o),c.O&&(c.g.H=c.O);var x=c.g;c=c.ba,x.M=1,x.A=Ze(en(y)),x.u=null,x.R=!0,Oi(x,c)}t.Va=function(){this.C!=null&&(this.C=null,Ho(this),bl(this),Lt(19))};function $o(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Tn(c,y){var x=null;if(c.g==y){$o(c),kl(c),c.g=null;var I=2}else if(Ms(c.h,y))x=y.G,wl(c.h,y),I=1;else return;if(c.I!=0){if(y.o)if(I==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;I=No(),Nt(I,new Sc(I,x)),fi(c)}else Al(c);else if(H=y.m,H==3||H==0&&y.X>0||!(I==1&&Vc(c,y)||I==2&&bl(c)))switch(x&&x.length>0&&(y=c.h,y.i=y.i.concat(x)),H){case 1:pi(c,5);break;case 4:pi(c,10);break;case 3:pi(c,6);break;default:pi(c,2)}}}function Fc(c,y){let x=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(x*=2),x*y}function pi(c,y){if(c.j.info("Error code "+y),y==2){var x=f(c.bb,c),I=c.Ua;const H=!I;I=new ze(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Nn(I,"https"),Ze(I),H?Bo(I.toString(),x):Dc(I.toString(),x)}else Lt(2);c.I=0,c.l&&c.l.pa(y),Qn(c),hn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Qn(c){if(c.I=0,c.ja=[],c.l){const y=xl(c.h);(y.length!=0||c.i.length!=0)&&(k(c.ja,y),k(c.ja,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.oa()}}function Rl(c,y,x){var I=x instanceof ze?en(x):new ze(x);if(I.g!="")y&&(I.g=y+"."+I.g),Ln(I,I.u);else{var H=a.location;I=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const $=new ze(null);I&&Nn($,I),y&&($.g=y),H&&Ln($,H),x&&($.h=x),I=$}return x=c.G,y=c.wa,x&&y&&ce(I,x,y),ce(I,"VER",c.ka),Bi(c,I),I}function Nl(c,y,x){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Be(new Ee({ab:x})):new Be(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qo(){}t=qo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Go(){}Go.prototype.g=function(c,y){return new Wt(c,y)};function Wt(c,y){Rt.call(this),this.g=new Il(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!O(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Sr(this)}g(Wt,Rt),Wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){ke(this.g)},Wt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.v&&(x={},x.__data__=ko(c),c=x);y.i.push(new ip(y.Ya++,c)),y.I==3&&fi(y)},Wt.prototype.N=function(){this.g.l=null,delete this.j,ke(this.g),delete this.g,Wt.Z.N.call(this)};function Ll(c){bs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(Ll,bs);function Bc(){Ro.call(this),this.status=1}g(Bc,Ro);function Sr(c){this.g=c}g(Sr,qo),Sr.prototype.ra=function(){Nt(this.g,"a")},Sr.prototype.qa=function(c){Nt(this.g,new Ll(c))},Sr.prototype.pa=function(c){Nt(this.g,new Bc)},Sr.prototype.oa=function(){Nt(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,qS=function(){return new Go},$S=function(){return No()},WS=Mi,Ag={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Hh=Lo,Cc.COMPLETE="complete",HS=Cc,Ec.EventType=_r,_r.OPEN="a",_r.CLOSE="b",_r.ERROR="c",_r.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Jl=Ec,Be.prototype.listenOnce=Be.prototype.K,Be.prototype.getLastError=Be.prototype.Ha,Be.prototype.getLastErrorCode=Be.prototype.ya,Be.prototype.getStatus=Be.prototype.ca,Be.prototype.getResponseJson=Be.prototype.La,Be.prototype.getResponseText=Be.prototype.la,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Fa,US=Be}).apply(typeof wh<"u"?wh:typeof self<"u"?self:typeof window<"u"?window:{});const hx="@firebase/firestore",dx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new m_("@firebase/firestore");function ia(){return fo.logLevel}function ae(t,...e){if(fo.logLevel<=Le.DEBUG){const n=e.map(__);fo.debug(`Firestore (${al}): ${t}`,...n)}}function cr(t,...e){if(fo.logLevel<=Le.ERROR){const n=e.map(__);fo.error(`Firestore (${al}): ${t}`,...n)}}function Za(t,...e){if(fo.logLevel<=Le.WARN){const n=e.map(__);fo.warn(`Firestore (${al}): ${t}`,...n)}}function __(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,GS(t,i,n)}function GS(t,e,n){let i=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw cr(i),new Error(i)}function He(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||GS(e,r,i)}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kt.UNAUTHENTICATED))}shutdown(){}}class CV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IV{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new os;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new os,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new os)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new ZS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class AV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new AV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const i=o=>{o.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=RV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Me(t,e){return t<e?-1:t>e?1:0}function bg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return tm(r)===tm(o)?Me(r,o):tm(r)?1:-1}return Me(t.length,e.length)}const NV=55296,LV=57343;function tm(t){const e=t.charCodeAt(0);return e>=NV&&e<=LV}function Ka(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="__name__";class vi{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=vi.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Me(e.length,n.length)}static compareSegments(e,n){const i=vi.isNumericId(e),r=vi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?vi.extractNumericId(e).compare(vi.extractNumericId(n)):bg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ss.fromString(e.substring(4,e.length-2))}}class Je extends vi{construct(e,n,i){return new Je(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const MV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends vi{construct(e,n,i){return new Ft(e,n,i)}static isValidIdentifier(e){return MV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===px}static keyField(){return new Ft([px])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new fe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new fe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new fe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Je.fromString(e))}static fromName(e){return new ye(Je.fromString(e).popFirst(5))}static empty(){return new ye(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e,n){if(!n)throw new fe(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OV(t,e,n,i){if(e===!0&&i===!0)throw new fe(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mx(t){if(!ye.isDocumentKey(t))throw new fe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gx(t){if(ye.isDocumentKey(t))throw new fe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function QS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function w_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function ir(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=w_(t);throw new fe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function hc(t,e){if(!QS(t))throw new fe(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new fe(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=-62135596800,_x=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*_x);return new et(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yx)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_x}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hc(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:Pt("string",et._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new et(0,0))}static max(){return new Se(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=-1;function DV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new et(n+1,0):new et(n,i));return new ps(r,ye.empty(),e)}function VV(t){return new ps(t.readTime,t.key,qu)}class ps{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ps(Se.min(),ye.empty(),qu)}static max(){return new ps(Se.max(),ye.empty(),qu)}}function jV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==zV)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function BV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ul(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=-1;function Lf(t){return t==null}function Od(t){return t===0&&1/t==-1/0}function UV(t){return typeof t=="number"&&Number.isInteger(t)&&!Od(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="";function HV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vx(e)),e=WV(t.get(n),e);return vx(e)}function WV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case XS:n+="";break;default:n+=o}}return n}function vx(t){return t+XS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function To(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??zt.RED,this.left=r??zt.EMPTY,this.right=o??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new zt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return zt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xx(this.data.getIterator())}getIteratorFrom(e){return new xx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class xx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ri([])}unionWith(e){let n=new kt(Ft.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ri(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ka(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new JS("Invalid base64 string: "+o):o}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const $V=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(t){if(He(!!t,39018),typeof t=="string"){let e=0;const n=$V.exec(t);if(He(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="server_timestamp",tC="__type__",nC="__previous_value__",iC="__local_write_time__";function T_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tC])==null?void 0:i.stringValue)===eC}function Mf(t){const e=t.mapValue.fields[nC];return T_(e)?Mf(e):e}function Gu(t){const e=ms(t.mapValue.fields[iC].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Dd="(default)";class Zu{constructor(e,n){this.projectId=e,this.database=n||Dd}static empty(){return new Zu("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="__type__",GV="__max__",Th={mapValue:{}},sC="__vector__",Vd="value";function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?T_(t)?4:KV(t)?9007199254740991:ZV(t)?10:11:we(28295,{value:t})}function Ri(t,e){if(t===e)return!0;const n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gu(t).isEqual(Gu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=ms(r.timestampValue),u=ms(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return gs(r.bytesValue).isEqual(gs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return gt(r.geoPointValue.latitude)===gt(o.geoPointValue.latitude)&&gt(r.geoPointValue.longitude)===gt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return gt(r.integerValue)===gt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=gt(r.doubleValue),u=gt(o.doubleValue);return a===u?Od(a)===Od(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ka(t.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(wx(a)!==wx(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Ri(a[h],u[h])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function Ku(t,e){return(t.values||[]).find(n=>Ri(n,e))!==void 0}function Qa(t,e){if(t===e)return 0;const n=ys(t),i=ys(e);if(n!==i)return Me(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=gt(o.integerValue||o.doubleValue),h=gt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Tx(t.timestampValue,e.timestampValue);case 4:return Tx(Gu(t),Gu(e));case 5:return bg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=gs(o),h=gs(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=Me(u[f],h[f]);if(m!==0)return m}return Me(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Me(gt(o.latitude),gt(a.latitude));return u!==0?u:Me(gt(o.longitude),gt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ex(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,E,k,b;const u=o.fields||{},h=a.fields||{},f=(_=u[Vd])==null?void 0:_.arrayValue,m=(E=h[Vd])==null?void 0:E.arrayValue,g=Me(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((b=m==null?void 0:m.values)==null?void 0:b.length)||0);return g!==0?g:Ex(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Th.mapValue&&a===Th.mapValue)return 0;if(o===Th.mapValue)return 1;if(a===Th.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const _=bg(h[g],m[g]);if(_!==0)return _;const E=Qa(u[h[g]],f[m[g]]);if(E!==0)return E}return Me(h.length,m.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Tx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=ms(t),i=ms(e),r=Me(n.seconds,i.seconds);return r!==0?r:Me(n.nanos,i.nanos)}function Ex(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Qa(n[r],i[r]);if(o)return o}return Me(n.length,i.length)}function Xa(t){return kg(t)}function kg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ms(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=kg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${kg(n.fields[a])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function Wh(t){switch(ys(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mf(t);return e?16+Wh(e):16;case 5:return 2*t.stringValue.length;case 6:return gs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Wh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return To(i.fields,(o,a)=>{r+=o.length+Wh(a)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function Rg(t){return!!t&&"integerValue"in t}function E_(t){return!!t&&"arrayValue"in t}function Px(t){return!!t&&"nullValue"in t}function Sx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $h(t){return!!t&&"mapValue"in t}function ZV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rC])==null?void 0:i.stringValue)===sC}function yu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return To(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=yu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yu(t.arrayValue.values[n]);return e}return{...t}}function KV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!$h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yu(n)}setAll(e){let n=Ft.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=yu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());$h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];$h(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){To(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Un(yu(this.value))}}function oC(t){const e=[];return To(t.fields,(n,i)=>{const r=new Ft([n]);if($h(i)){const o=oC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new ri(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Xt(e,0,Se.min(),Se.min(),Se.min(),Un.empty(),0)}static newFoundDocument(e,n,i,r){return new Xt(e,1,n,Se.min(),i,r,0)}static newNoDocument(e,n){return new Xt(e,2,n,Se.min(),Se.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,Se.min(),Se.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){this.position=e,this.inclusive=n}}function Cx(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ye.comparator(ye.fromName(a.referenceValue),n.key):i=Qa(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ix(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n="asc"){this.field=e,this.dir=n}}function QV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{}class It extends aC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new YV(e,n,i):n==="array-contains"?new t4(e,i):n==="in"?new n4(e,i):n==="not-in"?new i4(e,i):n==="array-contains-any"?new r4(e,i):new It(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new JV(e,i):new e4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qa(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(Qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends aC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ni(e,n)}matches(e){return lC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lC(t){return t.op==="and"}function uC(t){return XV(t)&&lC(t)}function XV(t){for(const e of t.filters)if(e instanceof Ni)return!1;return!0}function Ng(t){if(t instanceof It)return t.field.canonicalString()+t.op.toString()+Xa(t.value);if(uC(t))return t.filters.map(e=>Ng(e)).join(",");{const e=t.filters.map(n=>Ng(n)).join(",");return`${t.op}(${e})`}}function cC(t,e){return t instanceof It?function(i,r){return r instanceof It&&i.op===r.op&&i.field.isEqual(r.field)&&Ri(i.value,r.value)}(t,e):t instanceof Ni?function(i,r){return r instanceof Ni&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&cC(a,r.filters[u]),!0):!1}(t,e):void we(19439)}function hC(t){return t instanceof It?function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`}(t):t instanceof Ni?function(n){return n.op.toString()+" {"+n.getFilters().map(hC).join(" ,")+"}"}(t):"Filter"}class YV extends It{constructor(e,n,i){super(e,n,i),this.key=ye.fromName(i.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class JV extends It{constructor(e,n){super(e,"in",n),this.keys=dC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class e4 extends It{constructor(e,n){super(e,"not-in",n),this.keys=dC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ye.fromName(i.referenceValue))}class t4 extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return E_(n)&&Ku(n.arrayValue,this.value)}}class n4 extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ku(this.value.arrayValue,n)}}class i4 extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ku(this.value.arrayValue,n)}}class r4 extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!E_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ku(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function Ax(t,e=null,n=[],i=[],r=null,o=null,a=null){return new s4(t,e,n,i,r,o,a)}function P_(t){const e=Ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Ng(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Xa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Xa(i)).join(",")),e.Te=n}return e.Te}function S_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ix(t.startAt,e.startAt)&&Ix(t.endAt,e.endAt)}function Lg(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function o4(t,e,n,i,r,o,a,u){return new Of(t,e,n,i,r,o,a,u)}function C_(t){return new Of(t)}function bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function a4(t){return t.collectionGroup!==null}function _u(t){const e=Ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new kt(Ft.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new zd(o,i))}),n.has(Ft.keyField().canonicalString())||e.Ie.push(new zd(Ft.keyField(),i))}return e.Ie}function Pi(t){const e=Ce(t);return e.Ee||(e.Ee=l4(e,_u(t))),e.Ee}function l4(t,e){if(t.limitType==="F")return Ax(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new zd(r.field,o)});const n=t.endAt?new jd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new jd(t.startAt.position,t.startAt.inclusive):null;return Ax(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Mg(t,e,n){return new Of(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return S_(Pi(t),Pi(e))&&t.limitType===e.limitType}function fC(t){return`${P_(Pi(t))}|lt:${t.limitType}`}function ra(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>hC(r)).join(", ")}]`),Lf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Xa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Xa(r)).join(",")),`Target(${i})`}(Pi(t))}; limitType=${t.limitType})`}function Vf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ye.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of _u(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=Cx(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,_u(i),r)||i.endAt&&!function(a,u,h){const f=Cx(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,_u(i),r))}(t,e)}function u4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pC(t){return(e,n)=>{let i=!1;for(const r of _u(t)){const o=c4(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function c4(t,e,n){const i=t.field.isKeyField()?ye.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Qa(h,f):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return YS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new lt(ye.comparator);function hr(){return h4}const mC=new lt(ye.comparator);function eu(...t){let e=mC;for(const n of t)e=e.insert(n.key,n);return e}function gC(t){let e=mC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ys(){return vu()}function yC(){return vu()}function vu(){return new Eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const d4=new lt(ye.comparator),f4=new kt(ye.comparator);function Oe(...t){let e=f4;for(const n of t)e=e.add(n);return e}const p4=new kt(Me);function m4(){return p4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Od(e)?"-0":e}}function _C(t){return{integerValue:""+t}}function g4(t,e){return UV(e)?_C(e):I_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this._=void 0}}function y4(t,e,n){return t instanceof Fd?function(r,o){const a={fields:{[tC]:{stringValue:eC},[iC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&T_(o)&&(o=Mf(o)),o&&(a.fields[nC]=o),{mapValue:a}}(n,e):t instanceof Qu?wC(t,e):t instanceof Xu?xC(t,e):function(r,o){const a=vC(r,o),u=kx(a)+kx(r.Ae);return Rg(a)&&Rg(r.Ae)?_C(u):I_(r.serializer,u)}(t,e)}function _4(t,e,n){return t instanceof Qu?wC(t,e):t instanceof Xu?xC(t,e):n}function vC(t,e){return t instanceof Bd?function(i){return Rg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Fd extends jf{}class Qu extends jf{constructor(e){super(),this.elements=e}}function wC(t,e){const n=TC(e);for(const i of t.elements)n.some(r=>Ri(r,i))||n.push(i);return{arrayValue:{values:n}}}class Xu extends jf{constructor(e){super(),this.elements=e}}function xC(t,e){let n=TC(e);for(const i of t.elements)n=n.filter(r=>!Ri(r,i));return{arrayValue:{values:n}}}class Bd extends jf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function kx(t){return gt(t.integerValue||t.doubleValue)}function TC(t){return E_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function v4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Qu&&r instanceof Qu||i instanceof Xu&&r instanceof Xu?Ka(i.elements,r.elements,Ri):i instanceof Bd&&r instanceof Bd?Ri(i.Ae,r.Ae):i instanceof Fd&&r instanceof Fd}(t.transform,e.transform)}class w4{constructor(e,n){this.version=e,this.transformResults=n}}class Si{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zf{}function EC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new A_(t.key,Si.none()):new dc(t.key,t.data,Si.none());{const n=t.data,i=Un.empty();let r=new kt(Ft.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Po(t.key,i,new ri(r.toArray()),Si.none())}}function x4(t,e,n){t instanceof dc?function(r,o,a){const u=r.value.clone(),h=Nx(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Po?function(r,o,a){if(!qh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Nx(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(PC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function wu(t,e,n,i){return t instanceof dc?function(o,a,u,h){if(!qh(o.precondition,a))return u;const f=o.value.clone(),m=Lx(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Po?function(o,a,u,h){if(!qh(o.precondition,a))return u;const f=Lx(o.fieldTransforms,h,a),m=a.data;return m.setAll(PC(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return qh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function T4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=vC(i.transform,r||null);o!=null&&(n===null&&(n=Un.empty()),n.set(i.field,o))}return n||null}function Rx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ka(i,r,(o,a)=>v4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dc extends zf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Po extends zf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function PC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Nx(t,e,n){const i=new Map;He(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,_4(a,u,n[r]))}return i}function Lx(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,y4(o,a,e))}return i}class A_ extends zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class E4 extends zf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&x4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=wu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=wu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=yC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=EC(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Ka(this.mutations,e.mutations,(n,i)=>Rx(n,i))&&Ka(this.baseMutations,e.baseMutations,(n,i)=>Rx(n,i))}}class b_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return d4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new b_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Ve;function I4(t){switch(t){case X.OK:return we(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function SC(t){if(t===void 0)return cr("GRPC error has no .code"),X.UNKNOWN;switch(t){case xt.OK:return X.OK;case xt.CANCELLED:return X.CANCELLED;case xt.UNKNOWN:return X.UNKNOWN;case xt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case xt.INTERNAL:return X.INTERNAL;case xt.UNAVAILABLE:return X.UNAVAILABLE;case xt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case xt.NOT_FOUND:return X.NOT_FOUND;case xt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case xt.ABORTED:return X.ABORTED;case xt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case xt.DATA_LOSS:return X.DATA_LOSS;default:return we(39323,{code:t})}}(Ve=xt||(xt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new ss([4294967295,4294967295],0);function Mx(t){const e=A4().encode(t),n=new BS;return n.update(e),new Uint8Array(n.digest())}function Ox(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ss([n,i],0),new ss([r,o],0)]}class k_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new tu(`Invalid padding: ${n}`);if(i<0)throw new tu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new tu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ss.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(ss.fromNumber(i)));return r.compare(b4)===1&&(r=new ss([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Mx(e),[i,r]=Ox(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new k_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Mx(e),[i,r]=Ox(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,fc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ff(Se.min(),r,new lt(Me),hr(),Oe())}}class fc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new fc(i,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class CC{constructor(e,n){this.targetId=e,this.Ce=n}}class IC{constructor(e,n,i=Ht.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Dx{constructor(){this.ve=0,this.Fe=Vx(),this.Me=Ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),n=Oe(),i=Oe();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:we(38017,{changeType:o})}}),new fc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Vx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class k4{constructor(e){this.Ge=e,this.ze=new Map,this.je=hr(),this.Je=Eh(),this.He=Eh(),this.Ye=new lt(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Lg(o))if(i===0){const a=new ye(o.path);this.et(n,a,Xt.newNoDocument(a,Se.min()))}else He(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=gs(i).toUint8Array()}catch(h){if(h instanceof JS)return Za("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new k_(a,r,o)}catch(h){return Za(h instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Lg(u.target)){const h=new ye(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,Xt.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Oe();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Ff(e,n,this.Ye,this.je,i);return this.je=hr(),this.Je=Eh(),this.He=Eh(),this.Ye=new lt(Me),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Dx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new kt(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new kt(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Eh(){return new lt(ye.comparator)}function Vx(){return new lt(ye.comparator)}const R4={asc:"ASCENDING",desc:"DESCENDING"},N4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L4={and:"AND",or:"OR"};class M4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Og(t,e){return t.useProto3Json||Lf(e)?e:{value:e}}function Ud(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O4(t,e){return Ud(t,e.toTimestamp())}function Ci(t){return He(!!t,49232),Se.fromTimestamp(function(n){const i=ms(n);return new et(i.seconds,i.nanos)}(t))}function R_(t,e){return Dg(t,e).canonicalString()}function Dg(t,e){const n=function(r){return new Je(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bC(t){const e=Je.fromString(t);return He(MC(e),10190,{key:e.toString()}),e}function Vg(t,e){return R_(t.databaseId,e.path)}function nm(t,e){const n=bC(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(RC(n))}function kC(t,e){return R_(t.databaseId,e)}function D4(t){const e=bC(t);return e.length===4?Je.emptyPath():RC(e)}function jg(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RC(t){return He(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jx(t,e,n){return{name:Vg(t,e),fields:n.value.mapValue.fields}}function V4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(He(m===void 0||typeof m=="string",58123),Ht.fromBase64String(m||"")):(He(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ht.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?X.UNKNOWN:SC(f.code);return new fe(m,f.message||"")}(a);n=new IC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=nm(t,i.document.name),o=Ci(i.document.updateTime),a=i.document.createTime?Ci(i.document.createTime):Se.min(),u=new Un({mapValue:{fields:i.document.fields}}),h=Xt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Gh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=nm(t,i.document),o=i.readTime?Ci(i.readTime):Se.min(),a=Xt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Gh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=nm(t,i.document),o=i.removedTargetIds||[];n=new Gh([],o,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new C4(r,o),u=i.targetId;n=new CC(u,a)}}return n}function j4(t,e){let n;if(e instanceof dc)n={update:jx(t,e.key,e.value)};else if(e instanceof A_)n={delete:Vg(t,e.key)};else if(e instanceof Po)n={update:jx(t,e.key,e.data),updateMask:G4(e.fieldMask)};else{if(!(e instanceof E4))return we(16599,{Vt:e.type});n={verify:Vg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Fd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Qu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Xu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Bd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw we(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:O4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(t,e.precondition)),n}function z4(t,e){return t&&t.length>0?(He(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Ci(r.updateTime):Ci(o);return a.isEqual(Se.min())&&(a=Ci(o)),new w4(a,r.transformResults||[])}(n,e))):[]}function F4(t,e){return{documents:[kC(t,e.path)]}}function B4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=kC(t,r);const o=function(f){if(f.length!==0)return LC(Ni.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:sa(_.field),direction:W4(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Og(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function U4(t){let e=D4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){He(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=NC(g);return _ instanceof Ni&&uC(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(k){return new zd(oa(k.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,Lf(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(g){const _=!!g.before,E=g.values||[];return new jd(E,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,E=g.values||[];return new jd(E,_)}(n.endAt)),o4(e,r,a,o,u,"F",h,f)}function H4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=oa(n.unaryFilter.field);return It.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=oa(n.unaryFilter.field);return It.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=oa(n.unaryFilter.field);return It.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=oa(n.unaryFilter.field);return It.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return It.create(oa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ni.create(n.compositeFilter.filters.map(i=>NC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function W4(t){return R4[t]}function $4(t){return N4[t]}function q4(t){return L4[t]}function sa(t){return{fieldPath:t.canonicalString()}}function oa(t){return Ft.fromServerFormat(t.fieldPath)}function LC(t){return t instanceof It?function(n){if(n.op==="=="){if(Sx(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NAN"}};if(Px(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sx(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NOT_NAN"}};if(Px(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(n.field),op:$4(n.op),value:n.value}}}(t):t instanceof Ni?function(n){const i=n.getFilters().map(r=>LC(r));return i.length===1?i[0]:{compositeFilter:{op:q4(n.op),filters:i}}}(t):we(54877,{filter:t})}function G4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,i,r,o=Se.min(),a=Se.min(),u=Ht.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.yt=e}}function K4(t){const e=U4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.Cn=new X4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(ps.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class X4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new kt(Je.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new kt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OC=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(OC,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="LruGarbageCollector",Y4=1048576;function Bx([t,e],[n,i]){const r=Me(t,n);return r===0?Me(e,i):r}class J4{constructor(e){this.Ir=e,this.buffer=new kt(Bx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Bx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class e3{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(Fx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ul(n)?ae(Fx,"Ignoring IndexedDB error during garbage collection: ",n):await ll(n)}await this.Vr(3e5)})}}class t3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Nf.ce);const i=new J4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(zx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),ia()<=Le.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function n3(t,e){return new t3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(){this.changes=new Eo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&wu(i.mutation,r,ri.empty(),et.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Oe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Oe()){const r=Ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=eu();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Ys();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Oe()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=hr();const a=vu(),u=function(){return vu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Po)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),wu(m.mutation,f,m.mutation.getFieldMask(),et.now())):a.set(f.key,ri.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new r3(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=vu();let r=new lt((a,u)=>a-u),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||ri.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||Oe()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=yC();m.forEach(_=>{if(!o.has(_)){const E=EC(n.get(_),i.get(_));E!==null&&g.set(_,E),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):a4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(Ys());let u=qu,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{h=h.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Oe())).next(m=>({batchId:u,changes:gC(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(i=>{let r=eu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=eu();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,_){return new Of(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Xt.newInvalidDocument(m)))});let u=eu();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&wu(m.mutation,f,ri.empty(),et.now()),Vf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ci(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:K4(r.bundledQuery),readTime:Ci(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.overlays=new lt(ye.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Ys();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=Ys(),o=n.length+1,a=new ye(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new lt((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Ys(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Ys(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new S4(n,i));let o=this.qr.get(n);o===void 0&&(o=Oe(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.Qr=new kt(Ot.$r),this.Ur=new kt(Ot.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Ot(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Ot(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ye(new Je([])),i=new Ot(n,e),r=new Ot(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new Je([])),i=new Ot(n,e),r=new Ot(n,e+1);let o=Oe();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Ot(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ot{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new kt(Ot.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new P4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new Ot(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?x_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ot(n,0),r=new Ot(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new kt(Me);return n.forEach(r=>{const o=new Ot(r,0),a=new Ot(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ye.isDocumentKey(o)||(o=o.child(""));const a=new Ot(new ye(o),0);let u=new kt(Me);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new Ot(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Ot(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.ri=e,this.docs=function(){return new lt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let i=hr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Xt.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=hr();const a=n.path,u=new ye(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||jV(VV(m),i)<=0||(r.has(m.key)||Vf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){we(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new h3(this)}getSize(e){return K.resolve(this.size)}}class h3 extends i3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.persistence=e,this.si=new Eo(n=>P_(n),S_),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new N_,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ya(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nf(0),this.li=!1,this.li=!0,this.hi=new l3,this.referenceDelegate=e(this),this.Pi=new d3(this),this.indexManager=new Q4,this.remoteDocumentCache=function(r){return new c3(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new Z4(n),this.Ii=new o3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new a3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new u3(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ae("MemoryPersistence","Starting transaction:",e);const r=new f3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class f3 extends FV{constructor(e){super(),this.currentSequenceNumber=e}}class L_{constructor(e){this.persistence=e,this.Ri=new N_,this.Vi=null}static mi(e){return new L_(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=ye.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hd{constructor(e,n){this.persistence=e,this.pi=new Eo(i=>HV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=n3(this,n)}static mi(e,n){return new Hd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Se.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Oe(),r=Oe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new M_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return aD()?8:BV(Jt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new p3;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(ia()<=Le.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",ra(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(ia()<=Le.DEBUG&&ae("QueryEngine","Query:",ra(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ia()<=Le.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",ra(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(n))):K.resolve())}ys(e,n){if(bx(n))return K.resolve(null);let i=Pi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Mg(n,null,"F"),i=Pi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Oe(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Mg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return bx(n)||r.isEqual(Se.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(ia()<=Le.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ra(n)),this.vs(e,a,n,DV(r,qu)).next(u=>u))})}Ds(e,n){let i=new kt(pC(e));return n.forEach((r,o)=>{Vf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return ia()<=Le.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",ra(n)),this.ps.getDocumentsMatchingQuery(e,n,ps.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="LocalStore",g3=3e8;class y3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new lt(Me),this.xs=new Eo(o=>P_(o),S_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function _3(t,e,n,i){return new y3(t,e,n,i)}async function VC(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Oe();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function v3(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,_=g.keys();let E=K.resolve();return _.forEach(k=>{E=E.next(()=>m.getEntry(h,k)).next(b=>{const V=f.docVersions.get(k);He(V!==null,48541),b.version.compareTo(V)<0&&(g.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),m.addEntry(b)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Oe();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function jC(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function w3(t,e){const n=Ce(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Ht.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,i)),r=r.insert(g,E),function(b,V,R){return b.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=g3?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(_,E,m)&&u.push(n.Pi.updateTargetData(o,E))});let h=hr(),f=Oe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(x3(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Se.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function x3(t,e,n){let i=Oe(),r=Oe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=hr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Se.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):ae(O_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function T3(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=x_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function E3(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Wr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function zg(t,e,n){const i=Ce(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ul(a))throw a;ae(O_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Ux(t,e,n){const i=Ce(t);let r=Se.min(),o=Oe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=Ce(h),_=g.xs.get(m);return _!==void 0?K.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,Pi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Se.min(),n?o:Oe())).next(u=>(P3(i,u4(e),u),{documents:u,Qs:o})))}function P3(t,e,n){let i=t.Os.get(e)||Se.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Hx{constructor(){this.activeTargetIds=m4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S3{constructor(){this.Mo=new Hx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="ConnectivityMonitor";class $x{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(Wx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(Wx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph=null;function Fg(){return Ph===null?Ph=function(){return 268435456+Math.round(2147483648*Math.random())}():Ph++,"0x"+Ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="RestConnection",I3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Dd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Fg(),u=this.zo(e,n.toUriEncodedString());ae(im,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=sl(f);return this.Jo(e,u,h,i,m).then(g=>(ae(im,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Za(im,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+al}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=I3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class k3 extends A3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Fg();return new Promise((u,h)=>{const f=new US;f.setWithCredentials(!0),f.listenOnce(HS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Hh.NO_ERROR:const g=f.getResponseJson();ae(Gt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Hh.TIMEOUT:ae(Gt,`RPC '${e}' ${a} timed out`),h(new fe(X.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const _=f.getStatus();if(ae(Gt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E==null?void 0:E.error;if(k&&k.status&&k.message){const b=function(R){const S=R.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(S)>=0?S:X.UNKNOWN}(k.status);h(new fe(b,k.message))}else h(new fe(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new fe(X.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ae(Gt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);ae(Gt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Fg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qS(),u=$S(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");ae(Gt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let _=!1,E=!1;const k=new b3({Yo:V=>{E?ae(Gt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(_||(ae(Gt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),ae(Gt,`RPC '${e}' stream ${r} sending:`,V),g.send(V))},Zo:()=>g.close()}),b=(V,R,S)=>{V.listen(R,C=>{try{S(C)}catch(F){setTimeout(()=>{throw F},0)}})};return b(g,Jl.EventType.OPEN,()=>{E||(ae(Gt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),b(g,Jl.EventType.CLOSE,()=>{E||(E=!0,ae(Gt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(g))}),b(g,Jl.EventType.ERROR,V=>{E||(E=!0,Za(Gt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),k.a_(new fe(X.UNAVAILABLE,"The operation could not be completed")))}),b(g,Jl.EventType.MESSAGE,V=>{var R;if(!E){const S=V.data[0];He(!!S,16349);const C=S,F=(C==null?void 0:C.error)||((R=C[0])==null?void 0:R.error);if(F){ae(Gt,`RPC '${e}' stream ${r} received error:`,F);const G=F.status;let U=function(N){const M=xt[N];if(M!==void 0)return SC(M)}(G),A=F.message;U===void 0&&(U=X.INTERNAL,A="Unknown error status: "+G+" with message "+F.message),E=!0,k.a_(new fe(U,A)),g.close()}else ae(Gt,`RPC '${e}' stream ${r} received:`,S),k.u_(S)}}),b(u,WS.STAT_EVENT,V=>{V.stat===Ag.PROXY?ae(Gt,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===Ag.NOPROXY&&ae(Gt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return new M4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ae("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="PersistentStream";class FC{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new fe(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ae(qx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ae(qx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R3 extends FC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=V4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?Ci(a.readTime):Se.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=jg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Lg(h)?{documents:F4(o,h)}:{query:B4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=AC(o,a.resumeToken);const f=Og(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=Ud(o,a.snapshotVersion.toTimestamp());const f=Og(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=H4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=jg(this.serializer),n.removeTarget=e,this.q_(n)}}class N3 extends FC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=z4(e.writeResults,e.commitTime),i=Ci(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=jg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>j4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{}class M3 extends L3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Dg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Dg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class O3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cr(n),this.aa=!1):ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="RemoteStore";class D3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{So(this)&&(ae(po,"Restarting streams for network reachability change."),await async function(h){const f=Ce(h);f.Ea.add(4),await pc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Uf(f)}(this))})}),this.Ra=new O3(i,r)}}async function Uf(t){if(So(t))for(const e of t.da)await e(!0)}async function pc(t){for(const e of t.da)await e(!1)}function BC(t,e){const n=Ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),z_(n)?j_(n):cl(n).O_()&&V_(n,e))}function D_(t,e){const n=Ce(t),i=cl(n);n.Ia.delete(e),i.O_()&&UC(n,e),n.Ia.size===0&&(i.O_()?i.L_():So(n)&&n.Ra.set("Unknown"))}function V_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cl(t).Y_(e)}function UC(t,e){t.Va.Ue(e),cl(t).Z_(e)}function j_(t){t.Va=new k4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),cl(t).start(),t.Ra.ua()}function z_(t){return So(t)&&!cl(t).x_()&&t.Ia.size>0}function So(t){return Ce(t).Ea.size===0}function HC(t){t.Va=void 0}async function V3(t){t.Ra.set("Online")}async function j3(t){t.Ia.forEach((e,n)=>{V_(t,e)})}async function z3(t,e){HC(t),z_(t)?(t.Ra.ha(e),j_(t)):t.Ra.set("Unknown")}async function F3(t,e,n){if(t.Ra.set("Online"),e instanceof IC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){ae(po,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Wd(t,i)}else if(e instanceof Gh?t.Va.Ze(e):e instanceof CC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const i=await jC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Ht.EMPTY_BYTE_STRING,m.snapshotVersion)),UC(o,h);const g=new Wr(m.target,h,f,m.sequenceNumber);V_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){ae(po,"Failed to raise snapshot:",i),await Wd(t,i)}}async function Wd(t,e,n){if(!ul(e))throw e;t.Ea.add(1),await pc(t),t.Ra.set("Offline"),n||(n=()=>jC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae(po,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Uf(t)})}function WC(t,e){return e().catch(n=>Wd(t,n,e))}async function Hf(t){const e=Ce(t),n=_s(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:x_;for(;B3(e);)try{const r=await T3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,U3(e,r)}catch(r){await Wd(e,r)}$C(e)&&qC(e)}function B3(t){return So(t)&&t.Ta.length<10}function U3(t,e){t.Ta.push(e);const n=_s(t);n.O_()&&n.X_&&n.ea(e.mutations)}function $C(t){return So(t)&&!_s(t).x_()&&t.Ta.length>0}function qC(t){_s(t).start()}async function H3(t){_s(t).ra()}async function W3(t){const e=_s(t);for(const n of t.Ta)e.ea(n.mutations)}async function $3(t,e,n){const i=t.Ta.shift(),r=b_.from(i,e,n);await WC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Hf(t)}async function q3(t,e){e&&_s(t).X_&&await async function(i,r){if(function(a){return I4(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();_s(i).B_(),await WC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Hf(i)}}(t,e),$C(t)&&qC(t)}async function Gx(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),ae(po,"RemoteStore received new credentials");const i=So(n);n.Ea.add(3),await pc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Uf(n)}async function G3(t,e){const n=Ce(t);e?(n.Ea.delete(2),await Uf(n)):e||(n.Ea.add(2),await pc(n),n.Ra.set("Unknown"))}function cl(t){return t.ma||(t.ma=function(n,i,r){const o=Ce(n);return o.sa(),new R3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:V3.bind(null,t),t_:j3.bind(null,t),r_:z3.bind(null,t),H_:F3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),z_(t)?j_(t):t.Ra.set("Unknown")):(await t.ma.stop(),HC(t))})),t.ma}function _s(t){return t.fa||(t.fa=function(n,i,r){const o=Ce(n);return o.sa(),new N3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:H3.bind(null,t),r_:q3.bind(null,t),ta:W3.bind(null,t),na:$3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Hf(t)):(await t.fa.stop(),t.Ta.length>0&&(ae(po,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new F_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B_(t,e){if(cr("AsyncQueue",`${e}: ${t}`),ul(t))return new fe(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{static emptySet(e){return new La(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ye.comparator(n.key,i.key):(n,i)=>ye.comparator(n.key,i.key),this.keyedMap=eu(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof La)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new La;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.ga=new lt(ye.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ja{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ja(e,n,La.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class K3{constructor(){this.queries=Kx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ce(n),o=r.queries;r.queries=Kx(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new fe(X.ABORTED,"Firestore shutting down"))}}function Kx(){return new Eo(t=>fC(t),Df)}async function GC(t,e){const n=Ce(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new Z3,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=B_(a,`Initialization of query '${ra(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&U_(n)}async function ZC(t,e){const n=Ce(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Q3(t,e){const n=Ce(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&U_(n)}function X3(t,e,n){const i=Ce(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function U_(t){t.Ca.forEach(e=>{e.next()})}var Bg,Qx;(Qx=Bg||(Bg={})).Ma="default",Qx.Cache="cache";class KC{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ja(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.key=e}}class XC{constructor(e){this.key=e}}class Y3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=pC(e),this.tu=new La(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Zx,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),E=Vf(this.query,g)?g:null,k=!!_&&this.mutatedKeys.has(_.key),b=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let V=!1;_&&E?_.data.isEqual(E.data)?k!==b&&(i.track({type:3,doc:E}),V=!0):this.su(_,E)||(i.track({type:2,doc:E}),V=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(u=!0)):!_&&E?(i.track({type:0,doc:E}),V=!0):_&&!E&&(i.track({type:1,doc:_}),V=!0,(h||f)&&(u=!0)),V&&(E?(a=a.add(E),o=b?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(E,k){const b=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:V})}};return b(E)-b(k)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new Ja(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new XC(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new QC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ja.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const H_="SyncEngine";class J3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class ej{constructor(e){this.key=e,this.hu=!1}}class tj{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Eo(u=>fC(u),Df),this.Iu=new Map,this.Eu=new Set,this.du=new lt(ye.comparator),this.Au=new Map,this.Ru=new N_,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nj(t,e,n=!0){const i=iI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await YC(i,e,n,!0),r}async function ij(t,e){const n=iI(t);await YC(n,e,!0,!1)}async function YC(t,e,n,i){const r=await E3(t.localStore,Pi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await rj(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&BC(t.remoteStore,r),u}async function rj(t,e,n,i,r){t.pu=(g,_,E)=>async function(b,V,R,S){let C=V.view.ru(R);C.Cs&&(C=await Ux(b.localStore,V.query,!1).then(({documents:A})=>V.view.ru(A,C)));const F=S&&S.targetChanges.get(V.targetId),G=S&&S.targetMismatches.get(V.targetId)!=null,U=V.view.applyChanges(C,b.isPrimaryClient,F,G);return Yx(b,V.targetId,U.au),U.snapshot}(t,g,_,E);const o=await Ux(t.localStore,e,!0),a=new Y3(e,o.Qs),u=a.ru(o.documents),h=fc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);Yx(t,n,f.au);const m=new J3(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function sj(t,e,n){const i=Ce(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Df(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await zg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&D_(i.remoteStore,r.targetId),Ug(i,r.targetId)}).catch(ll)):(Ug(i,r.targetId),await zg(i.localStore,r.targetId,!0))}async function oj(t,e){const n=Ce(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),D_(n.remoteStore,i.targetId))}async function aj(t,e,n){const i=pj(t);try{const r=await function(a,u){const h=Ce(a),f=et.now(),m=u.reduce((E,k)=>E.add(k.key),Oe());let g,_;return h.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=hr(),b=Oe();return h.Ns.getEntries(E,m).next(V=>{k=V,k.forEach((R,S)=>{S.isValidDocument()||(b=b.add(R))})}).next(()=>h.localDocuments.getOverlayedDocuments(E,k)).next(V=>{g=V;const R=[];for(const S of u){const C=T4(S,g.get(S.key).overlayedDocument);C!=null&&R.push(new Po(S.key,C,oC(C.value.mapValue),Si.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,R,u)}).next(V=>{_=V;const R=V.applyToLocalDocumentSet(g,b);return h.documentOverlayCache.saveOverlays(E,V.batchId,R)})}).then(()=>({batchId:_.batchId,changes:gC(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new lt(Me)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await mc(i,r.changes),await Hf(i.remoteStore)}catch(r){const o=B_(r,"Failed to persist write");n.reject(o)}}async function JC(t,e){const n=Ce(t);try{const i=await w3(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(He(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?He(a.hu,14607):r.removedDocuments.size>0&&(He(a.hu,42227),a.hu=!1))}),await mc(n,i,e)}catch(i){await ll(i)}}function Xx(t,e,n){const i=Ce(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Ce(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&U_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lj(t,e,n){const i=Ce(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new lt(ye.comparator);a=a.insert(o,Xt.newNoDocument(o,Se.min()));const u=Oe().add(o),h=new Ff(Se.min(),new Map,new lt(Me),a,u);await JC(i,h),i.du=i.du.remove(o),i.Au.delete(e),W_(i)}else await zg(i.localStore,e,!1).then(()=>Ug(i,e,n)).catch(ll)}async function uj(t,e){const n=Ce(t),i=e.batch.batchId;try{const r=await v3(n.localStore,e);tI(n,i,null),eI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await mc(n,r)}catch(r){await ll(r)}}async function cj(t,e,n){const i=Ce(t);try{const r=await function(a,u){const h=Ce(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(He(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);tI(i,e,n),eI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await mc(i,r)}catch(r){await ll(r)}}function eI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function tI(t,e,n){const i=Ce(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Ug(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||nI(t,i)})}function nI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(D_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),W_(t))}function Yx(t,e,n){for(const i of n)i instanceof QC?(t.Ru.addReference(i.key,e),hj(t,i)):i instanceof XC?(ae(H_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||nI(t,i.key)):we(19791,{wu:i})}function hj(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ae(H_,"New document in limbo: "+n),t.Eu.add(i),W_(t))}function W_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(Je.fromString(e)),i=t.fu.next();t.Au.set(i,new ej(n)),t.du=t.du.insert(n,i),BC(t.remoteStore,new Wr(Pi(C_(n.path)),i,"TargetPurposeLimboResolution",Nf.ce))}}async function mc(t,e,n){const i=Ce(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=M_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Ce(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,_=>K.forEach(_.Es,E=>m.persistence.referenceDelegate.addReference(g,_.targetId,E)).next(()=>K.forEach(_.ds,E=>m.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))}catch(g){if(!ul(g))throw g;ae(O_,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const E=m.Ms.get(_),k=E.snapshotVersion,b=E.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(_,b)}}}(i.localStore,o))}async function dj(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){ae(H_,"User change. New user:",e.toKey());const i=await VC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new fe(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mc(n,i.Ls)}}function fj(t,e){const n=Ce(t),i=n.Au.get(e);if(i&&i.hu)return Oe().add(i.key);{let r=Oe();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function iI(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lj.bind(null,e),e.Pu.H_=Q3.bind(null,e.eventManager),e.Pu.yu=X3.bind(null,e.eventManager),e}function pj(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cj.bind(null,e),e}class $d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _3(this.persistence,new m3,e.initialUser,this.serializer)}Cu(e){return new DC(L_.mi,this.serializer)}Du(e){return new S3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$d.provider={build:()=>new $d};class mj extends $d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof Hd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new e3(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new DC(i=>Hd.mi(i,n),this.serializer)}}class Hg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Xx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dj.bind(null,this.syncEngine),await G3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K3}()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),i=function(o){return new k3(o)}(e.databaseInfo);return function(o,a,u,h){return new M3(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new D3(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Xx(this.syncEngine,n,0),function(){return $x.v()?new $x:new C3}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new tj(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ce(r);ae(po,"RemoteStore shutting down."),o.Ea.add(5),await pc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hg.provider={build:()=>new Hg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class gj{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Kt.UNAUTHENTICATED,this.clientId=v_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ae(vs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ae(vs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=B_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function sm(t,e){t.asyncQueue.verifyOperationInProgress(),ae(vs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await VC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yj(t);ae(vs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Gx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Gx(e.remoteStore,r)),t._onlineComponents=e}async function yj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae(vs,"Using user provided OfflineComponentProvider");try{await sm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Za("Error using user provided cache. Falling back to memory cache: "+n),await sm(t,new $d)}}else ae(vs,"Using default OfflineComponentProvider"),await sm(t,new mj(void 0));return t._offlineComponents}async function sI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae(vs,"Using user provided OnlineComponentProvider"),await Jx(t,t._uninitializedComponentsProvider._online)):(ae(vs,"Using default OnlineComponentProvider"),await Jx(t,new Hg))),t._onlineComponents}function _j(t){return sI(t).then(e=>e.syncEngine)}async function Wg(t){const e=await sI(t),n=e.eventManager;return n.onListen=nj.bind(null,e.syncEngine),n.onUnlisten=sj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ij.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oj.bind(null,e.syncEngine),n}function vj(t,e,n={}){const i=new os;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new rI({next:_=>{m.Nu(),a.enqueueAndForget(()=>ZC(o,g)),_.fromCache&&h.source==="server"?f.reject(new fe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new KC(u,m,{includeMetadataChanges:!0,qa:!0});return GC(o,g)}(await Wg(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="firestore.googleapis.com",t1=!0;class n1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aI,this.ssl=t1}else this.host=e.host,this.ssl=e.ssl??t1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y4)throw new fe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new SV;switch(i.type){case"firstParty":return new bV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=e1.get(n);i&&(ae("ComponentProvider","Removing Datastore"),e1.delete(n),i.terminate())}(this),Promise.resolve()}}function wj(t,e,n,i={}){var f;t=ir(t,Wf);const r=sl(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(LS(`https://${u}`),MS("Firestore",!0)),o.host!==aI&&o.host!==u&&Za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!co(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Kt.MOCK_USER;else{m=YO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new fe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Kt(_)}t._authCredentials=new CV(new ZS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gc(this.firestore,e,this._query)}}class bt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(hc(n,bt._jsonSchema))return new bt(e,i||null,new ye(Je.fromString(n.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:Pt("string",bt._jsonSchemaVersion),referencePath:Pt("string")};class as extends gc{constructor(e,n,i){super(e,n,C_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new ye(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function xu(t,e,...n){if(t=An(t),KS("collection","path",e),t instanceof Wf){const i=Je.fromString(e,...n);return gx(i),new as(t,null,i)}{if(!(t instanceof bt||t instanceof as))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Je.fromString(e,...n));return gx(i),new as(t.firestore,null,i)}}function Xi(t,e,...n){if(t=An(t),arguments.length===1&&(e=v_.newId()),KS("doc","path",e),t instanceof Wf){const i=Je.fromString(e,...n);return mx(i),new bt(t,null,new ye(i))}{if(!(t instanceof bt||t instanceof as))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Je.fromString(e,...n));return mx(i),new bt(t.firestore,t instanceof as?t.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="AsyncQueue";class r1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zC(this,"async_queue_retry"),this._c=()=>{const i=rm();i&&ae(i1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=rm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new os;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ul(e))throw e;ae(i1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,cr("INTERNAL UNHANDLED ERROR: ",s1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=F_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:s1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function s1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class el extends Wf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new r1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r1(e),this._firestoreClient=void 0,await e}}}function xj(t,e){const n=typeof t=="object"?t:jS(),i=typeof t=="string"?t:Dd,r=y_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=QO("firestore");o&&wj(r,...o)}return r}function $_(t){if(t._terminated)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Tj(t),t._firestoreClient}function Tj(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new qV(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,oI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new gj(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Ht.fromBase64String(e))}catch(n){throw new fe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hn(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hc(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Pt("string",Hn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ii._jsonSchemaVersion}}static fromJSON(e){if(hc(e,Ii._jsonSchema))return new Ii(e.latitude,e.longitude)}}Ii._jsonSchemaVersion="firestore/geoPoint/1.0",Ii._jsonSchema={type:Pt("string",Ii._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hc(e,Ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ai(e.vectorValues);throw new fe(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:Pt("string",Ai._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=/^__.*__$/;class Pj{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Po(e,this.data,this.fieldMask,n,this.fieldTransforms):new dc(e,this.data,n,this.fieldTransforms)}}function uI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class G_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new G_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uI(this.Ac)&&Ej.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Sj{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Bf(e)}Cc(e,n,i,r=!1){return new G_({Ac:e,methodName:n,Dc:i,path:Ft.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cj(t){const e=t._freezeSettings(),n=Bf(t._databaseId);return new Sj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ij(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);fI("Data must be an object, but it was:",a,i);const u=hI(i,a);let h,f;if(o.merge)h=new ri(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=Aj(e,g,n);if(!a.contains(_))throw new fe(X.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);kj(m,_)||m.push(_)}h=new ri(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new Pj(new Un(u),h,f)}function cI(t,e){if(dI(t=An(t)))return fI("Unsupported field value:",e,t),hI(t,e);if(t instanceof lI)return function(i,r){if(!uI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=cI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=An(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return g4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=et.fromDate(i);return{timestampValue:Ud(r.serializer,o)}}if(i instanceof et){const o=new et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ud(r.serializer,o)}}if(i instanceof Ii)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hn)return{bytesValue:AC(r.serializer,i._byteString)};if(i instanceof bt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:R_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ai)return function(a,u){return{mapValue:{fields:{[rC]:{stringValue:sC},[Vd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return I_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${w_(i)}`)}(t,e)}function hI(t,e){const n={};return YS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(t,(i,r)=>{const o=cI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function dI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Ii||t instanceof Hn||t instanceof bt||t instanceof lI||t instanceof Ai)}function fI(t,e,n){if(!dI(n)||!QS(n)){const i=w_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Aj(t,e,n){if((e=An(e))instanceof q_)return e._internalPath;if(typeof e=="string")return pI(t,e);throw qd("Field path arguments must be of type string or ",t,!1,void 0,n)}const bj=new RegExp("[~\\*/\\[\\]]");function pI(t,e,n){if(e.search(bj)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new q_(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new fe(X.INVALID_ARGUMENT,u+t+h)}function kj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Rj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Rj extends mI{data(){return super.data()}}function gI(t,e){return typeof e=="string"?pI(t,e):e instanceof q_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nj{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return To(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Vd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>gt(a.doubleValue));return new Ai(n)}convertGeoPoint(e){return new Ii(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Mf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}convertTimestamp(e){const n=ms(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Je.fromString(e);He(MC(i),9688,{name:e});const r=new Zu(i.get(1),i.get(3)),o=new ye(i.popFirst(5));return r.isEqual(n)||cr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class nu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class no extends mI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(gI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=no._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}no._jsonSchemaVersion="firestore/documentSnapshot/1.0",no._jsonSchema={type:Pt("string",no._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Zh extends no{data(e={}){return super.data(e)}}class io{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new nu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Zh(this._firestore,this._userDataWriter,i.key,i,new nu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new Zh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new nu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Zh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new nu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:Mj(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=v_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Mj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}io._jsonSchemaVersion="firestore/querySnapshot/1.0",io._jsonSchema={type:Pt("string",io._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Z_ extends Nj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function a1(t){t=ir(t,gc);const e=ir(t.firestore,el),n=$_(e),i=new Z_(e);return yI(t._query),vj(n,t._query).then(r=>new io(e,i,t,r))}function $r(t,e,n){t=ir(t,bt);const i=ir(t.firestore,el),r=Lj(t.converter,e,n);return _I(i,[Ij(Cj(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Si.none())])}function om(t){return _I(ir(t.firestore,el),[new A_(t._key,Si.none())])}function am(t,...e){var h,f,m;t=An(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||o1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(o1(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof bt)a=ir(t.firestore,el),u=C_(t._key.path),o={next:g=>{e[i]&&e[i](Oj(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=ir(t,gc);a=ir(g.firestore,el),u=g._query;const _=new Z_(a);o={next:E=>{e[i]&&e[i](new io(a,_,g,E))},error:e[i+1],complete:e[i+2]},yI(t._query)}return function(_,E,k,b){const V=new rI(b),R=new KC(E,V,k);return _.asyncQueue.enqueueAndForget(async()=>GC(await Wg(_),R)),()=>{V.Nu(),_.asyncQueue.enqueueAndForget(async()=>ZC(await Wg(_),R))}}($_(a),u,r,o)}function _I(t,e){return function(i,r){const o=new os;return i.asyncQueue.enqueueAndForget(async()=>aj(await _j(i),r,o)),o.promise}($_(t),e)}function Oj(t,e,n){const i=n.docs.get(e._key),r=new Z_(t);return new no(t,r,e._key,i,new nu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){al=r})(ol),Ga(new ho("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new el(new IV(i.getProvider("auth-internal")),new kV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new fe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),rs(hx,dx,e),rs(hx,dx,"esm2020")})();function vI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dj=vI,wI=new uc("auth","Firebase",vI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new m_("@firebase/auth");function Vj(t,...e){Gd.logLevel<=Le.WARN&&Gd.warn(`Auth (${ol}): ${t}`,...e)}function Kh(t,...e){Gd.logLevel<=Le.ERROR&&Gd.error(`Auth (${ol}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,...e){throw K_(t,...e)}function bi(t,...e){return K_(t,...e)}function xI(t,e,n){const i={...Dj(),[e]:n};return new uc("auth","Firebase",i).create(e,{appName:t.name})}function ls(t){return xI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return wI.create(t,...e)}function Te(t,e,...n){if(!t)throw K_(e,...n)}function Yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kh(e),new Error(e)}function fr(t,e){t||Yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function jj(){return l1()==="http:"||l1()==="https:"}function l1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jj()||rD()||"connection"in navigator)?navigator.onLine:!0}function Fj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.shortDelay=e,this.longDelay=n,fr(n>e,"Short delay should be less than long delay!"),this.isMobile=tD()||sD()}get(){return zj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e){fr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hj=new yc(3e4,6e4);function $f(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function hl(t,e,n,i,r={}){return EI(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=cc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return iD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&sl(t.emulatorConfig.host)&&(f.credentials="include"),TI.fetch()(await SI(t,t.config.apiHost,n,u),f)})}async function EI(t,e,n){t._canInitEmulator=!1;const i={...Bj,...e};try{const r=new Wj(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Sh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Sh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Sh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw xI(t,m,f);dr(t,m)}}catch(r){if(r instanceof gr)throw r;dr(t,"network-request-failed",{message:String(r)})}}async function PI(t,e,n,i,r={}){const o=await hl(t,e,n,i,r);return"mfaPendingCredential"in o&&dr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function SI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?Q_(t.config,r):`${t.config.apiScheme}://${r}`;return Uj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class Wj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(bi(this.auth,"network-request-failed")),Hj.get())})}}function Sh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=bi(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(t,e){return hl(t,"POST","/v1/accounts:delete",e)}async function Zd(t,e){return hl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qj(t,e=!1){const n=An(t),i=await n.getIdToken(e),r=X_(i);Te(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Tu(lm(r.auth_time)),issuedAtTime:Tu(lm(r.iat)),expirationTime:Tu(lm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function lm(t){return Number(t)*1e3}function X_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{const r=bS(n);return r?JSON.parse(r):(Kh("Failed to decode base64 JWT payload"),null)}catch(r){return Kh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function u1(t){const e=X_(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof gr&&Gj(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Gj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kd(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Yu(t,Zd(e,{idToken:n}));Te(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?CI(r.providerUserInfo):[],a=Qj(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new qg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function Kj(t){const e=An(t);await Kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qj(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function CI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xj(t,e){const n=await EI(t,{},async()=>{const i=cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await SI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&sl(t.emulatorConfig.host)&&(h.credentials="include"),TI.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Yj(t,e){return hl(t,"POST","/v2/accounts:revokeToken",$f(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=u1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await Xj(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Ma;return i&&(Te(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Te(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(Te(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ma,this.toJSON())}_performRefresh(){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class si{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Zj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new qg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Yu(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qj(this,e)}reload(){return Kj(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Kd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(ls(this.auth));const e=await this.getIdToken();return await Yu(this,$j(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:E,providerData:k,stsTokenManager:b}=n;Te(g&&b,e,"internal-error");const V=Ma.fromJSON(this.name,b);Te(typeof g=="string",e,"internal-error"),Ar(i,e.name),Ar(r,e.name),Te(typeof _=="boolean",e,"internal-error"),Te(typeof E=="boolean",e,"internal-error"),Ar(o,e.name),Ar(a,e.name),Ar(u,e.name),Ar(h,e.name),Ar(f,e.name),Ar(m,e.name);const R=new si({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:E,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:V,createdAt:f,lastLoginAt:m});return k&&Array.isArray(k)&&(R.providerData=k.map(S=>({...S}))),h&&(R._redirectEventId=h),R}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ma;r.updateFromServerResponse(n);const o=new si({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Kd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Te(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?CI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Ma;u.updateFromIdToken(i);const h=new si({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new qg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;function Ji(t){fr(t instanceof Function,"Expected a class definition");let e=c1.get(t);return e?(fr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,c1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}II.type="NONE";const h1=II;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t,e,n){return`firebase:${t}:${e}:${n}`}class Oa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Qh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Qh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zd(this.auth,{idToken:e}).catch(()=>{});return n?si._fromGetAccountInfoResponse(this.auth,n,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Oa(Ji(h1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Ji(h1);const a=Qh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await Zd(e,{idToken:m}).catch(()=>{});if(!_)break;g=await si._fromGetAccountInfoResponse(e,_,m)}else g=si._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Oa(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Oa(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LI(e))return"Blackberry";if(MI(e))return"Webos";if(bI(e))return"Safari";if((e.includes("chrome/")||kI(e))&&!e.includes("edge/"))return"Chrome";if(NI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function AI(t=Jt()){return/firefox\//i.test(t)}function bI(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kI(t=Jt()){return/crios\//i.test(t)}function RI(t=Jt()){return/iemobile/i.test(t)}function NI(t=Jt()){return/android/i.test(t)}function LI(t=Jt()){return/blackberry/i.test(t)}function MI(t=Jt()){return/webos/i.test(t)}function Y_(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Jj(t=Jt()){var e;return Y_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function e5(){return oD()&&document.documentMode===10}function OI(t=Jt()){return Y_(t)||NI(t)||MI(t)||LI(t)||/windows phone/i.test(t)||RI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t,e=[]){let n;switch(t){case"Browser":n=d1(Jt());break;case"Worker":n=`${d1(Jt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ol}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e={}){return hl(t,"GET","/v2/passwordPolicy",$f(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=6;class r5{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??i5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f1(this),this.idTokenSubscription=new f1(this),this.beforeStateQueue=new t5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ji(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Oa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zd(this,{idToken:e}),i=await si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ii(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Fj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(ls(this));const n=e?An(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n5(this),n=new r5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Yj(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ji(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Oa.create(this,[Ji(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Vj(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function qf(t){return An(t)}class f1{constructor(e){this.auth=e,this.observer=null,this.addObserver=pD(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o5(t){J_=t}function a5(t){return J_.loadJS(t)}function l5(){return J_.gapiScript}function u5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t,e){const n=y_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(co(o,e??{}))return r;dr(r,"already-initialized")}return n.initialize({options:e})}function h5(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ji);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function d5(t,e,n){const i=qf(t);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=VI(e),{host:a,port:u}=f5(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(co(f,i.config.emulator)&&co(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,sl(a)?(LS(`${o}//${a}${h}`),MS("Auth",!0)):p5()}function VI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function f5(t){const e=VI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:p1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:p1(a)}}}function p1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function p5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yi("not implemented")}_getIdTokenResponse(e){return Yi("not implemented")}_linkToIdToken(e,n){return Yi("not implemented")}_getReauthenticationResolver(e){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e){return PI(t,"POST","/v1/accounts:signInWithIdp",$f(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5="http://localhost";class mo extends jI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):dr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new mo(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Da(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Da(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Da(e,n)}buildRequest(){const e={requestUri:m5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends zI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends _c{constructor(){super("facebook.com")}static credential(e){return mo._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return mo._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return jr.credential(n,i)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends _c{constructor(){super("github.com")}static credential(e){return mo._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.GITHUB_SIGN_IN_METHOD="github.com";zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends _c{constructor(){super("twitter.com")}static credential(e,n){return mo._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Fr.credential(n,i)}catch{return null}}}Fr.TWITTER_SIGN_IN_METHOD="twitter.com";Fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(t,e){return PI(t,"POST","/v1/accounts:signUp",$f(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await si._fromIdTokenResponse(e,i,r),a=m1(i);return new ws({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=m1(i);return new ws({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function m1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(t){var r;if(ii(t.app))return Promise.reject(ls(t));const e=qf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new ws({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await g5(e,{returnSecureToken:!0}),i=await ws._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends gr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Qd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Qd(e,n,i,r)}}function FI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Qd._fromErrorAndOperation(t,o,e,i):o})}async function _5(t,e,n=!1){const i=await Yu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ws._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t,e,n=!1){const{auth:i}=t;if(ii(i.app))return Promise.reject(ls(i));const r="reauthenticate";try{const o=await Yu(t,FI(i,r,e,t),n);Te(o.idToken,i,"internal-error");const a=X_(o.idToken);Te(a,i,"internal-error");const{sub:u}=a;return Te(t.uid===u,i,"user-mismatch"),ws._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&dr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(t,e,n=!1){if(ii(t.app))return Promise.reject(ls(t));const i="signIn",r=await FI(t,i,e),o=await ws._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function x5(t,e,n,i){return An(t).onIdTokenChanged(e,n,i)}function T5(t,e,n){return An(t).beforeAuthStateChanged(e,n)}function E5(t,e,n,i){return An(t).onAuthStateChanged(e,n,i)}const Xd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xd,"1"),this.storage.removeItem(Xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=1e3,S5=10;class UI extends BI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);e5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,S5):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},P5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UI.type="LOCAL";const C5=UI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI extends BI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}HI.type="SESSION";const WI=HI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Gf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await I5(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=ev("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function b5(t){ki().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function k5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function N5(){return $I()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="firebaseLocalStorageDb",L5=1,Yd="firebaseLocalStorage",GI="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zf(t,e){return t.transaction([Yd],e?"readwrite":"readonly").objectStore(Yd)}function M5(){const t=indexedDB.deleteDatabase(qI);return new vc(t).toPromise()}function Gg(){const t=indexedDB.open(qI,L5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Yd,{keyPath:GI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Yd)?e(i):(i.close(),await M5(),e(await Gg()))})})}async function g1(t,e,n){const i=Zf(t,!0).put({[GI]:e,value:n});return new vc(i).toPromise()}async function O5(t,e){const n=Zf(t,!1).get(e),i=await new vc(n).toPromise();return i===void 0?null:i.value}function y1(t,e){const n=Zf(t,!0).delete(e);return new vc(n).toPromise()}const D5=800,V5=3;class ZI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>V5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $I()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gf._getInstance(N5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await k5(),!this.activeServiceWorker)return;this.sender=new A5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||R5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gg();return await g1(e,Xd,"1"),await y1(e,Xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>g1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>O5(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>y1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Zf(r,!1).getAll();return new vc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),D5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZI.type="LOCAL";const j5=ZI;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t,e){return e?Ji(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends jI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function F5(t){return w5(t.auth,new tv(t),t.bypassAuthState)}function B5(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),v5(n,new tv(t),t.bypassAuthState)}async function U5(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),_5(n,new tv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return F5;case"linkViaPopup":case"linkViaRedirect":return U5;case"reauthViaPopup":case"reauthViaRedirect":return B5;default:dr(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new yc(2e3,1e4);class Sa extends KI{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Sa.currentPopupAction&&Sa.currentPopupAction.cancel(),Sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,H5.get())};e()}}Sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="pendingRedirect",Xh=new Map;class $5 extends KI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{const i=await q5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q5(t,e){const n=K5(e),i=Z5(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function G5(t,e){Xh.set(t._key(),e)}function Z5(t){return Ji(t._redirectPersistence)}function K5(t){return Qh(W5,t.config.apiKey,t.name)}async function Q5(t,e,n=!1){if(ii(t.app))return Promise.reject(ls(t));const i=qf(t),r=z5(i,e),a=await new $5(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=10*60*1e3;class Y5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!QI(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(bi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=X5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_1(e))}saveEventToCache(e){this.cachedEventUids.add(_1(e)),this.lastProcessedEventTime=Date.now()}}function _1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e6(t,e={}){return hl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n6=/^https?/;async function i6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await e6(t);for(const n of e)try{if(r6(n))return}catch{}dr(t,"unauthorized-domain")}function r6(t){const e=$g(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!n6.test(n))return!1;if(t6.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=new yc(3e4,6e4);function v1(){const t=ki().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function o6(t){return new Promise((e,n)=>{var r,o,a;function i(){v1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v1(),n(bi(t,"network-request-failed"))},timeout:s6.get()})}if((o=(r=ki().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=ki().gapi)!=null&&a.load)i();else{const u=u5("iframefcb");return ki()[u]=()=>{gapi.load?i():n(bi(t,"network-request-failed"))},a5(`${l5()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function a6(t){return Yh=Yh||o6(t),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=new yc(5e3,15e3),u6="__/auth/iframe",c6="emulator/auth/iframe",h6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f6(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Q_(e,c6):`https://${t.config.authDomain}/${u6}`,i={apiKey:e.apiKey,appName:t.name,v:ol},r=d6.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${cc(i).slice(1)}`}async function p6(t){const e=await a6(t),n=ki().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:f6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h6,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=bi(t,"network-request-failed"),u=ki().setTimeout(()=>{o(a)},l6.get());function h(){ki().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g6=500,y6=600,_6="_blank",v6="http://localhost";class w1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w6(t,e,n,i=g6,r=y6){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...m6,width:i.toString(),height:r.toString(),top:o,left:a},f=Jt().toLowerCase();n&&(u=kI(f)?_6:n),AI(f)&&(e=e||v6,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[E,k])=>`${_}${E}=${k},`,"");if(Jj(f)&&u!=="_self")return x6(e||"",u),new w1(null);const g=window.open(e||"",u,m);Te(g,t,"popup-blocked");try{g.focus()}catch{}return new w1(g)}function x6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6="__/auth/handler",E6="emulator/auth/handler",P6=encodeURIComponent("fac");async function x1(t,e,n,i,r,o){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ol,eventId:r};if(e instanceof zI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",fD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof _c){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${P6}=${encodeURIComponent(h)}`:"";return`${S6(t)}?${cc(u).slice(1)}${f}`}function S6({config:t}){return t.emulator?Q_(t,E6):`https://${t.authDomain}/${T6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="webStorageSupport";class C6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WI,this._completeRedirectFn=Q5,this._overrideRedirectResult=G5}async _openPopup(e,n,i,r){var a;fr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await x1(e,n,i,$g(),r);return w6(e,o,ev())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await x1(e,n,i,$g(),r);return b5(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(fr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await p6(e),i=new Y5(e);return n.register("authEvent",r=>(Te(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(um,{type:um},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[um];o!==void 0&&n(!!o),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=i6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OI()||bI()||Y_()}}const I6=C6;var T1="@firebase/auth",E1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function k6(t){Ga(new ho("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;Te(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DI(t)},f=new s5(i,r,o,h);return h5(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ga(new ho("auth-internal",e=>{const n=qf(e.getProvider("auth").getImmediate());return(i=>new A6(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(T1,E1,b6(t)),rs(T1,E1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=5*60,N6=NS("authIdTokenMaxAge")||R6;let P1=null;const L6=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>N6)return;const r=n==null?void 0:n.token;P1!==r&&(P1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function M6(t=jS()){const e=y_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=c5(t,{popupRedirectResolver:I6,persistence:[j5,C5,WI]}),i=NS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=L6(o.toString());T5(n,a,()=>a(n.currentUser)),x5(n,u=>a(u))}}const r=kS("auth");return r&&d5(n,`http://${r}`),n}function O6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}o5({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=bi("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",O6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});k6("Browser");var D6="firebase",V6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(D6,V6,"app");const j6={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},XI=VS(j6),pn=xj(XI),S1=M6(XI),Jd={palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},z6="vysocany",YI=Jd[z6].center,JI=15,F6=13,B6=18,C1={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},us=["red","blue"],eA={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},I1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],aa=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function Ju(t){var e;return((e=eA[t.size])==null?void 0:e.points)||100}function U6(t,e=.008){const n={};us.forEach(r=>n[r]=[]);const i={};return us.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),us.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],m=o[h],g=`${f.id}-${m.id}`,_=f.location[0]-m.location[0],E=(f.location[1]-m.location[1])*1.6,k=Math.sqrt(_*_+E*E);k<=e&&!a.has(g)&&(a.add(g),n[r].push({from:f.location,to:m.location,distance:k}))}}),n}function la(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function tA(t){const e={};return us.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=Ju(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const nA=D.createContext(null),br={player:"streetart-ctf-player",captures:"streetart-ctf-captures"},Ch="streetart-captures",A1="streetart-players",H6="streetart-teams",Ye={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function cm(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function hm(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function W6({children:t}){const[e,n]=D.useState(null),[i,r]=D.useState(!0),[o,a]=D.useState(()=>cm(br.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,totalDistance:0,lastCaptureTime:null,lastCaptureLocation:null,captureCount:0,recaptureCount:0,firstCaptureCount:0})),[u,h]=D.useState(()=>{const te=cm(br.captures,{});return aa.map(re=>({...re,capturedBy:te[re.id]||null}))}),[f,m]=D.useState(null),[g,_]=D.useState(!1),[E,k]=D.useState(null);D.useEffect(()=>{const te=E5(S1,re=>{re?(n(re),a(ue=>({...ue,id:re.uid}))):y5(S1).catch(ue=>{console.log("Auth not available, using local mode")})});return()=>te()},[]);const[b,V]=D.useState(null),[R,S]=D.useState([]),C=D.useRef({});D.useEffect(()=>{let te=!0;const re=xu(pn,Ch),ue=am(re,le=>{const J={},ge={},Ge=[];le.forEach(me=>{var ft,We;const Ae=me.data();if(Ae.status&&(ge[me.id]=Ae.status),Ae.capturedBy){J[me.id]=Ae.capturedBy;const pt=aa.find(Io=>Io.id===me.id);Ge.push({id:me.id,artName:(pt==null?void 0:pt.name)||me.id,area:(pt==null?void 0:pt.area)||"Unknown",team:Ae.capturedBy,playerName:Ae.playerName||"Unknown",capturedAt:((We=(ft=Ae.capturedAt)==null?void 0:ft.toDate)==null?void 0:We.call(ft))||new Date,points:Ae.points||100,isRecapture:Ae.isRecapture||!1})}});const St=Ge.sort((me,Ae)=>Ae.capturedAt-me.capturedAt).slice(0,10);S(St),te||le.docChanges().forEach(me=>{if(me.type==="added"||me.type==="modified"){const Ae=me.doc.data(),ft=C.current[me.doc.id];if(Ae.capturedBy&&ft!==Ae.capturedBy){const We=aa.find(pt=>pt.id===me.doc.id);We&&(V({artName:We.name,team:Ae.capturedBy,playerName:Ae.playerName||"Someone",points:Ae.points||Ju(We),streak:Ae.streak||0,isRecapture:Ae.isRecapture||!!ft,timestamp:Date.now()}),setTimeout(()=>V(null),4e3))}}}),te=!1,C.current=J,h(aa.map(me=>({...me,capturedBy:J[me.id]||null,status:ge[me.id]||me.status}))),hm(br.captures,J),r(!0),console.log("Firebase: Synced",Object.keys(J).length,"captures")},le=>{console.warn("Firestore sync error:",le),r(!1)});return()=>ue()},[]);const[F,G]=D.useState({red:0,blue:0});D.useEffect(()=>{const te=xu(pn,H6),re=am(te,ue=>{const le={red:0,blue:0};ue.forEach(J=>{const ge=J.data();(J.id==="red"||J.id==="blue")&&(le[J.id]=ge.score||0)}),G(le),console.log("Team scores:",le)});return()=>re()},[]);const[U,A]=D.useState([]);D.useEffect(()=>{const te=xu(pn,A1),re=am(te,ue=>{const le=[];ue.forEach(J=>{const ge=J.data();ge.name&&ge.team&&le.push({id:J.id,name:ge.name,team:ge.team,score:ge.score||0,captures:ge.captures||0})}),A(le.sort((J,ge)=>ge.score-J.score)),console.log("Players loaded:",le.length)});return()=>re()},[]),D.useEffect(()=>{hm(br.player,o)},[o]);const T=D.useCallback(async(te,re)=>{if(i)try{await $r(Xi(pn,Ch,te),{artId:te,capturedBy:re.team,capturedAt:new Date,playerId:o.id,playerName:o.name,points:re.points,streak:re.streak,isFirstCapture:re.isFirstCapture,isRecapture:re.isRecapture})}catch(ue){console.warn("Failed to sync capture to Firebase:",ue)}},[i,o.id,o.name]);D.useCallback(async te=>{if(i)try{await $r(Xi(pn,Ch,"global"),te,{merge:!0})}catch(re){console.warn("Failed to sync to Firebase:",re)}},[i]);const N=tA(u),M={red:Math.max(F.red,N.red),blue:Math.max(F.blue,N.blue)},j=D.useCallback(async te=>{if(us.includes(te)&&(a(re=>({...re,team:te})),i&&o.id))try{await $r(Xi(pn,A1,o.id),{name:o.name,team:te,score:o.score||0,captures:o.captureCount||0,joinedAt:new Date},{merge:!0})}catch(re){console.warn("Failed to sync player to Firebase:",re)}},[i,o.id,o.name,o.score,o.captureCount]),B=D.useCallback(te=>{a(re=>({...re,name:te}))},[]),O=D.useCallback((te,re,ue=50)=>{let le=null,J=1/0;return u.forEach(ge=>{const Ge=(ge.location[0]-te)*111e3,St=(ge.location[1]-re)*111e3*Math.cos(te*Math.PI/180),me=Math.sqrt(Ge*Ge+St*St);me<J&&me<=ue&&(J=me,le={...ge,distance:Math.round(me)})}),le},[u]),xe=D.useCallback((te,re,ue,le)=>{const J=(ue-te)*111e3,ge=(le-re)*111e3*Math.cos(te*Math.PI/180);return Math.sqrt(J*J+ge*ge)},[]),dt=D.useCallback((te,re,ue=null)=>{const le=Ju(te),J=[];let ge=le;const Ge=te.capturedBy&&te.capturedBy!==re.team,St=!te.capturedBy,me=Date.now(),Ae=re.lastCaptureTime?(me-re.lastCaptureTime)/1e3/60:1/0,ft=re.streak||0;if(ft>0){const We=Math.min(ft*.1,1),pt=Math.round(le*We);pt>0&&(ge+=pt,J.push({type:"streak",label:` ${ft}x Streak`,points:pt}))}if(Ge){const We=Math.round(le*.5);ge+=We,J.push({type:"recapture",label:" Recapture",points:We})}if(St){const We=Math.round(le*.25);ge+=We,J.push({type:"first",label:" First Capture",points:We})}if(Ae<5){const We=Math.round(le*.2);ge+=We,J.push({type:"speed",label:" Speed Bonus",points:We})}if(ue&&re.lastCaptureLocation){const We=xe(re.lastCaptureLocation[0],re.lastCaptureLocation[1],ue[0],ue[1]);if(We>50){const pt=Math.min(Math.round(We/100)*5,50);pt>0&&(ge+=pt,J.push({type:"distance",label:` ${Math.round(We)}m walked`,points:pt}))}}return{basePoints:le,totalPoints:ge,bonuses:J,isRecapture:Ge,isFirstCapture:St}},[xe]),Ie=D.useCallback((te,re=null)=>{if(!o.team)return{success:!1,message:"Join a team first!"};const ue=u.find(me=>me.id===te);if(!ue)return{success:!1,message:"Art not found"};if(ue.capturedBy===o.team)return{success:!1,message:"Already yours!"};if(ue.status==="ghost")return{success:!1,message:"This art no longer exists"};const le=re||ue.location,J=dt(ue,o,le),ge=ue.capturedBy;h(me=>me.map(Ae=>Ae.id===te?{...Ae,capturedBy:o.team}:Ae));const Ge=o.streak+1;a(me=>({...me,score:me.score+J.totalPoints,capturedArt:[...me.capturedArt.filter(Ae=>Ae!==te),te],streak:Ge,maxStreak:Math.max(me.maxStreak,Ge),lastCaptureTime:Date.now(),lastCaptureLocation:le,captureCount:me.captureCount+1,recaptureCount:J.isRecapture?me.recaptureCount+1:me.recaptureCount,firstCaptureCount:J.isFirstCapture?me.firstCaptureCount+1:me.firstCaptureCount,totalDistance:me.totalDistance+(re&&me.lastCaptureLocation?xe(me.lastCaptureLocation[0],me.lastCaptureLocation[1],re[0],re[1]):0)})),T(te,{team:o.team,points:J.totalPoints,streak:Ge,isFirstCapture:J.isFirstCapture,isRecapture:J.isRecapture});const St=cm(br.captures,{});return hm(br.captures,{...St,[te]:o.team}),{success:!0,art:ue,points:J.totalPoints,basePoints:J.basePoints,bonuses:J.bonuses,streak:Ge,previousTeam:ge,message:ge?`Stolen from ${ge}!`:"Captured!"}},[o,u,T,dt,xe]),ut=D.useCallback(async(te,re)=>{_(!0);const ue=O(re.lat,re.lng,100);if(!ue){_(!1),m({success:!1,message:"No street art nearby. Get closer!"});return}k({art:ue,photo:te,location:re}),_(!1)},[O]),Z=D.useCallback(()=>{if(!E)return;const te=Ie(E.art.id);m(te),k(null)},[E,Ie]),pe=D.useCallback(()=>{k(null),m(null)},[]),ee=D.useCallback(async()=>{if(localStorage.removeItem(br.player),localStorage.removeItem(br.captures),e&&i)try{await $r(Xi(pn,Ch,"global"),{})}catch(te){console.warn("Failed to reset Firebase:",te)}a({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),h(aa.map(te=>({...te,capturedBy:null}))),m(null),k(null)},[e,i]),ie={player:o,artPoints:u,teamScores:M,globalTeamScores:F,allPlayers:U,recentCaptures:R,captureNotification:b,scanResult:f,isScanning:g,pendingCapture:E,isOnline:i,teams:us,joinTeam:j,setPlayerName:B,captureArt:Ie,startCapture:ut,confirmCapture:Z,cancelCapture:pe,findNearestArt:O,setScanResult:m,resetAll:ee,TEAM_COLORS:Ye};return w.jsx(nA.Provider,{value:ie,children:t})}function Li(){const t=D.useContext(nA);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),be=(t,e)=>{const n=D.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>D.createElement("svg",{ref:m,...$6,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${q6(t)}`,u].join(" "),...f},[...e.map(([g,_])=>D.createElement(g,_)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=be("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=be("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=be("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=be("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=be("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=be("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=be("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=be("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=be("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=be("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=be("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=be("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=be("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=be("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=be("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=be("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=be("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=be("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=be("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=be("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=be("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=be("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=be("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=be("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=be("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),_z=51,vz=24;function lA({size:t=120,className:e=""}){const[n,i]=D.useState(0);D.useEffect(()=>{const a=setInterval(()=>{i(u=>(u+1)%_z)},1e3/vz);return()=>clearInterval(a)},[]);const r=String(n).padStart(5,"0");return w.jsx("img",{src:`/street-art-ctf/animation/frame_${r}.png`,alt:"Loading",width:t,height:t,className:e,style:{imageRendering:"pixelated",objectFit:"contain"}})}const R1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],N1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function L1(){const t=R1[Math.floor(Math.random()*R1.length)],e=N1[Math.floor(Math.random()*N1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function wz(){const t=xf(),{player:e,joinTeam:n,setPlayerName:i,allPlayers:r}=Li(),[o,a]=D.useState(0),[u,h]=D.useState(()=>e.name&&e.name!=="Street Artist"?e.name:L1()),[f,m]=D.useState(null);D.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]),D.useEffect(()=>{const V=r.filter(C=>C.team==="red").length,R=r.filter(C=>C.team==="blue").length,S=V<R?"red":R<V?"blue":Math.random()<.5?"red":"blue";m(S)},[r]);const g=()=>{h(L1())},_=()=>{if(o===1&&u.trim()&&(i(u.trim()),f&&n(f)),o===3){t("/map");return}a(o+1)},E=()=>o===1?u.trim().length>=2&&f:!0,k=f==="red"?"#ff6b6b":"#4dabf7",b=f==="red"?"Red":"Blue";return w.jsxs("div",{className:"h-screen bg-[#0a0a0f] flex flex-col overflow-hidden",children:[w.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:[0,1,2,3].map(V=>w.jsx("div",{className:`h-1.5 rounded-sm transition-all duration-300 ${V===o?"bg-white w-8":V<o?"bg-white/60 w-1.5":"bg-white/20 w-1.5"}`},V))}),w.jsxs(Na,{mode:"wait",children:[o===0&&w.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx(oe.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},className:"mb-6",children:w.jsx(lA,{size:140})}),w.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Street Art CTF"}),w.jsx("p",{className:"text-white/40 max-w-xs mb-8",children:"Scan real street art to capture territory for your team. The city is your battlefield."}),w.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(b1,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Scan Art"}),w.jsx("div",{className:"text-xs text-white/40",children:"Find and capture street art"})]})]}),w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(Zg,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Control Territory"}),w.jsx("div",{className:"text-xs text-white/40",children:"Expand your team's area"})]})]}),w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(ef,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Win Together"}),w.jsx("div",{className:"text-xs text-white/40",children:"Lead your team to victory"})]})]})]})]},"intro"),o===1&&w.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"What's your name?"}),w.jsx("p",{className:"text-white/40 mb-8",children:"This is how others will see you"}),w.jsx("div",{className:"w-full max-w-xs mb-4",children:w.jsx("input",{type:"text",value:u,onChange:V=>h(V.target.value),placeholder:"Enter your name...",maxLength:20,className:"w-full px-4 py-4 rounded-lg bg-white/5 border border-white/10 text-center text-xl font-medium placeholder:text-white/30 focus:outline-none focus:border-white/30"})}),w.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white/50 hover:bg-white/10 transition-colors",children:[w.jsx(oA,{size:16}),"Generate random name"]})]},"name"),o===2&&w.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative overflow-hidden",children:[w.jsx(oe.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:.15},transition:{delay:.3,duration:.8},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:w.jsx("div",{className:"w-[600px] h-[600px] rounded-full blur-3xl",style:{backgroundColor:k}})}),w.jsxs(oe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:200},className:"relative z-10",children:[w.jsxs(oe.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-white/50 text-lg mb-2",children:["Welcome, ",u,"!"]}),w.jsx(oe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-white/40 text-sm mb-6",children:"You've been assigned to"}),w.jsx(oe.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.8,type:"spring",stiffness:200},children:w.jsxs("h1",{className:"text-6xl font-bold mb-4",style:{color:k},children:["Team ",b]})}),w.jsx(oe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"text-white/30 text-sm",children:f==="red"?"The Flames ":"The Waves "})]})]},"team-reveal"),o===3&&w.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"How to Play"}),w.jsx("p",{className:"text-white/40 mb-8 text-sm",children:"It's simple!"}),w.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[w.jsxs(oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(b1,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Find & Scan"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Explore Prague to find street art. Use your camera to scan and capture it."})]})]}),w.jsxs(oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500/30 to-cyan-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(Zg,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Claim Territory"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Each capture claims territory for your team. Check the map to see who controls what."})]})]}),w.jsxs(oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500/30 to-orange-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(sv,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Score Points"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Bigger art = more points. Steal from enemies for bonus points!"})]})]})]})]},"tutorial")]}),w.jsx("div",{className:"p-4 pb-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:w.jsxs(oe.button,{whileTap:{scale:.98},onClick:_,disabled:!E(),className:`w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition-all ${E()?"bg-white text-black":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:[o===3?"Let's Go!":"Continue",w.jsx(K6,{size:20})]})})]})}const xz=[{color:"red",name:"Red Team"},{color:"blue",name:"Blue Team"}];function Tz(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"just now";const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const i=Math.floor(n/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function Ez(){const{player:t,joinTeam:e,teamScores:n,recentCaptures:i,isOnline:r}=Li(),o=f=>{e(f)},a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},u={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},h=Object.values(n).reduce((f,m)=>f+m,0);return w.jsxs(oe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:a,children:[w.jsxs(oe.div,{className:"text-center mb-6",variants:u,children:[w.jsx(oe.div,{className:"relative inline-block mb-3",animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:w.jsx(lA,{size:70})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Street Art CTF"}),w.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] ${r?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[r?w.jsx(Y6,{size:10}):w.jsx(mz,{size:10}),r?"Live":"Offline"]})]}),w.jsxs(oe.div,{variants:u,className:"mb-6",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("span",{className:"text-xs text-white/40",children:"Red Team"}),w.jsx("span",{className:"text-xs text-white/40",children:"Blue Team"})]}),w.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-white/10",children:[w.jsx(oe.div,{className:"h-full",style:{backgroundColor:Ye.red.hex},initial:{width:"50%"},animate:{width:h>0?`${n.red/h*100}%`:"50%"},transition:{duration:.8}}),w.jsx(oe.div,{className:"h-full",style:{backgroundColor:Ye.blue.hex},initial:{width:"50%"},animate:{width:h>0?`${n.blue/h*100}%`:"50%"},transition:{duration:.8}})]}),w.jsxs("div",{className:"flex items-center justify-between mt-2",children:[w.jsxs("span",{className:"text-sm font-bold",style:{color:Ye.red.hex},children:[n.red," pts"]}),w.jsxs("span",{className:"text-sm font-bold",style:{color:Ye.blue.hex},children:[n.blue," pts"]})]})]}),t.team?w.jsx(oe.div,{className:"mb-6 p-4 rounded-xl border-2",variants:u,style:{borderColor:Ye[t.team].hex+"50",backgroundColor:Ye[t.team].hex+"10"},children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:Ye[t.team].hex+"30"},children:w.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Ye[t.team].hex}})}),w.jsxs("div",{children:[w.jsx("p",{className:"font-bold text-white",children:t.name}),w.jsx("p",{className:"text-xs",style:{color:Ye[t.team].hex},children:t.team==="red"?"Red Team":"Blue Team"})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),w.jsx("p",{className:"text-[10px] text-white/40",children:"points"})]})]})}):w.jsxs(oe.div,{variants:u,className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(ef,{size:14,className:"text-white/40"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),w.jsx("div",{className:"grid grid-cols-2 gap-3",children:xz.map(({color:f,name:m})=>w.jsxs(oe.button,{onClick:()=>o(f),className:"p-4 rounded-xl text-center border-2 transition-all",style:{borderColor:Ye[f].hex+"50",backgroundColor:Ye[f].hex+"10"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[w.jsx("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:Ye[f].hex+"30"},children:w.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:Ye[f].hex}})}),w.jsx("p",{className:"font-semibold text-white",children:m})]},f))})]}),w.jsxs(oe.div,{variants:u,children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(X6,{size:14,className:"text-white/40"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Live Activity"})]}),i.length===0?w.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:"No captures yet. Be the first!"}):w.jsx("div",{className:"space-y-2",children:i.map((f,m)=>{var _;const g=((_=Ye[f.team])==null?void 0:_.hex)||"#888";return w.jsxs(oe.div,{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.05},children:[w.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${g}20`},children:f.isRecapture?w.jsx(aA,{size:14,style:{color:g}}):w.jsx(iA,{size:14,style:{color:g}})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm font-medium text-white truncate",children:f.artName}),w.jsxs("p",{className:"text-[10px] text-white/40",children:[w.jsx("span",{style:{color:g},children:f.playerName}),"  ",f.area]})]}),w.jsxs("div",{className:"text-right flex-shrink-0",children:[w.jsxs("p",{className:"text-xs font-semibold",style:{color:g},children:["+",f.points]}),w.jsx("p",{className:"text-[10px] text-white/30",children:Tz(f.capturedAt)})]})]},f.id)})})]})]})}function Pz(t,e){const n=D.useRef(e);D.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function Sz(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const Cz=1;function Iz(t){return Object.freeze({__version:Cz,map:t})}function Kf(t,e){return Object.freeze({...t,...e})}const uA=D.createContext(null),cA=uA.Provider;function ov(){const t=D.useContext(uA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function hA(t){function e(n,i){const{instance:r,context:o}=t(n).current;return D.useImperativeHandle(i,()=>r),n.children==null?null:ro.createElement(cA,{value:o},n.children)}return D.forwardRef(e)}function Az(t){function e(n,i){const{instance:r}=t(n).current;return D.useImperativeHandle(i,()=>r),null}return D.forwardRef(e)}function dA(t,e){const n=D.useRef();D.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function av(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Kg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(GA,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,P,z;return z=function(){p=!1,v&&(P.apply(d,v),v=!1)},P=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(z,l),p=!0)},P}function m(s,l,d){var p=l[1],v=l[0],P=p-v;return s===p&&d?s:((s-v)%P+P)%P+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function E(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return E(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function V(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function S(s,l){return s.replace(R,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function F(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var A=0;function T(s){var l=+new Date,d=Math.max(0,16-(l-A));return A=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||U("RequestAnimationFrame")||T,M=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function j(s,l,d){if(d&&N===T)s.call(l);else return N.call(window,a(s,l))}function B(s){s&&M.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:E,splitWords:k,setOptions:b,getParamString:V,template:S,isArray:C,indexOf:F,emptyImageUrl:G,requestFn:N,cancelFn:M,requestAnimFrame:j,cancelAnimFrame:B};function xe(){}xe.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(dt(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,z=p._initHooks.length;P<z;P++)p._initHooks[P].call(this)}},l},xe.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},xe.mergeOptions=function(s){return r(this.prototype.options,s),this},xe.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function dt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ie={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var v=0,P=s.length;v<P;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var v=arguments.length===1,P=0,z=s.length;P<z;P++)v?this._off(s[P]):this._off(s[P],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,P;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,P=p.length;v<P;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var z=this._listens(s,l,d);if(z!==!1){var W=p[z];this._firingCount&&(W.fn=g,this._events[s]=p=p.slice()),p.splice(z,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var P=0,z=v.length;P<z;P++){var W=v[P],q=W.fn;W.once&&this.off(s,q,W.ctx),q.call(W.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var P=this._events&&this._events[s];if(P&&P.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var z in this._eventParents)if(this._eventParents[z].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,P=p.length;v<P;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var v=0,P=s.length;v<P;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ie.addEventListener=Ie.on,Ie.removeEventListener=Ie.clearAllEventListeners=Ie.off,Ie.addOneTimeEventListener=Ie.once,Ie.fireEvent=Ie.fire,Ie.hasEventListeners=Ie.listens;var ut=xe.extend(Ie);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var pe=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(ee(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ee(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(s){s=ee(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=ee(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ee(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function ee(s,l,d){return s instanceof Z?s:C(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function ie(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}ie.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=ee(s);else if(s=te(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=ee(s):s=te(s),s instanceof ie?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=te(s);var l=this.min,d=this.max,p=s.min,v=s.max,P=v.x>=l.x&&p.x<=d.x,z=v.y>=l.y&&p.y<=d.y;return P&&z},overlaps:function(s){s=te(s);var l=this.min,d=this.max,p=s.min,v=s.max,P=v.x>l.x&&p.x<d.x,z=v.y>l.y&&p.y<d.y;return P&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return te(ee(l.x-p,l.y-v),ee(d.x+p,d.y+v))},equals:function(s){return s?(s=te(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function te(s,l){return!s||s instanceof ie?s:new ie(s,l)}function re(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}re.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof le)p=s,v=s;else if(s instanceof re){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(J(s)||ue(s)):this;return!l&&!d?(this._southWest=new le(p.lat,p.lng),this._northEast=new le(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new re(new le(l.lat-p,l.lng-v),new le(d.lat+p,d.lng+v))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof le||"lat"in s?s=J(s):s=ue(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof re?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=ue(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),P=v.lat>=l.lat&&p.lat<=d.lat,z=v.lng>=l.lng&&p.lng<=d.lng;return P&&z},overlaps:function(s){s=ue(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),P=v.lat>l.lat&&p.lat<d.lat,z=v.lng>l.lng&&p.lng<d.lng;return P&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=ue(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ue(s,l){return s instanceof re?s:new re(s,l)}function le(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}le.prototype={equals:function(s,l){if(!s)return!1;s=J(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return Ge.distance(this,J(s))},wrap:function(){return Ge.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return ue([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function J(s,l,d){return s instanceof le?s:C(s)&&typeof s[0]!="object"?s.length===3?new le(s[0],s[1],s[2]):s.length===2?new le(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new le(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new le(s,l,d)}var ge={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new ie(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new le(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var P=s.getSouthWest(),z=s.getNorthEast(),W=new le(P.lat-p,P.lng-v),q=new le(z.lat-p,z.lng-v);return new re(W,q)}},Ge=r({},ge,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,P=Math.sin((l.lat-s.lat)*d/2),z=Math.sin((l.lng-s.lng)*d/2),W=P*P+Math.cos(p)*Math.cos(v)*z*z,q=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*q}}),St=6378137,me={R:St,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new le((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=St*Math.PI;return new ie([-s,-s],[s,s])}()};function Ae(s,l,d,p){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}Ae.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function ft(s,l,d,p){return new Ae(s,l,d,p)}var We=r({},Ge,{code:"EPSG:3857",projection:me,transformation:function(){var s=.5/(Math.PI*me.R);return ft(s,.5,-s,.5)}()}),pt=r({},We,{code:"EPSG:900913"});function Io(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ao(s,l){var d="",p,v,P,z,W,q;for(p=0,P=s.length;p<P;p++){for(W=s[p],v=0,z=W.length;v<z;v++)q=W[v],d+=(v?"L":"M")+q.x+" "+q.y;d+=l?de.svg?"z":"x":""}return d||"M0 0"}var Cs=document.documentElement.style,Is="ActiveXObject"in window,Rt=Is&&!document.addEventListener,Nt="msLaunchUri"in navigator&&!("documentMode"in document),yr=un("webkit"),xc=un("android"),dl=un("android 2")||un("android 3"),Xf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),As=xc&&un("Google")&&Xf<537&&!("AudioNode"in window),bo=!!window.opera,fl=!Nt&&un("chrome"),ko=un("gecko")&&!yr&&!bo&&!Is,Yf=!fl&&un("safari"),Tc=un("phantom"),pl="OTransition"in Cs,Ec=navigator.platform.indexOf("Win")===0,_r=Is&&"transition"in Cs,bs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!dl,Ro="MozPerspective"in Cs,Mi=!window.L_DISABLE_3D&&(_r||bs||Ro)&&!pl&&!Tc,vr=typeof orientation<"u"||un("mobile"),No=vr&&yr,Pc=vr&&bs,wr=!window.PointerEvent&&window.MSPointerEvent,ml=!!(window.PointerEvent||wr),Lt="ontouchstart"in window||!!window.TouchEvent,Sc=!window.L_NO_TOUCH&&(Lt||ml),ks=vr&&bo,Rs=vr&&ko,Jf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ep=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),xr=function(){return!!document.createElement("canvas").getContext}(),gl=!!(document.createElementNS&&Io("svg").createSVGRect),tp=!!gl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Lo=!gl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Cc=navigator.platform.indexOf("Mac")===0,Ic=navigator.platform.indexOf("Linux")===0;function un(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var de={ie:Is,ielt9:Rt,edge:Nt,webkit:yr,android:xc,android23:dl,androidStock:As,opera:bo,chrome:fl,gecko:ko,safari:Yf,phantom:Tc,opera12:pl,win:Ec,ie3d:_r,webkit3d:bs,gecko3d:Ro,any3d:Mi,mobile:vr,mobileWebkit:No,mobileWebkit3d:Pc,msPointer:wr,pointer:ml,touch:Sc,touchNative:Lt,mobileOpera:ks,mobileGecko:Rs,retina:Jf,passiveEvents:ep,canvas:xr,svg:gl,vml:Lo,inlineSvg:tp,mac:Cc,linux:Ic},Ac=de.msPointer?"MSPointerDown":"pointerdown",Zn=de.msPointer?"MSPointerMove":"pointermove",yl=de.msPointer?"MSPointerUp":"pointerup",_l=de.msPointer?"MSPointerCancel":"pointercancel",Ns={touchstart:Ac,touchmove:Zn,touchend:yl,touchcancel:_l},Mo={touchstart:vl,touchmove:Rn,touchend:Rn,touchcancel:Rn},Oi={},bc=!1;function kc(s,l,d){return l==="touchstart"&&Ls(),Mo[l]?(d=Mo[l].bind(this,d),s.addEventListener(Ns[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function np(s,l,d){if(!Ns[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ns[l],d,!1)}function Oo(s){Oi[s.pointerId]=s}function Rc(s){Oi[s.pointerId]&&(Oi[s.pointerId]=s)}function Do(s){delete Oi[s.pointerId]}function Ls(){bc||(document.addEventListener(Ac,Oo,!0),document.addEventListener(Zn,Rc,!0),document.addEventListener(yl,Do,!0),document.addEventListener(_l,Do,!0),bc=!0)}function Rn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Oi)l.touches.push(Oi[d]);l.changedTouches=[l],s(l)}}function vl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&vt(l),Rn(s,l)}function ip(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Nc=200;function Lc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(P){if(P.detail!==1){p=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var z=Pl(P);if(!(z.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!z.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var W=Date.now();W-d<=Nc?(p++,p===2&&l(ip(P))):p=1,d=W}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Mc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Ms=Vo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Di=Vo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),wl=Di==="webkitTransition"||Di==="OTransition"?Di+"End":"transitionend";function xl(s){return typeof s=="string"?document.getElementById(s):s}function Tr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function De(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function ze(s){var l=s.parentNode;l&&l.removeChild(s)}function en(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Nn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Ln(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Os(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=ui(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function ce(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Os(s,l)){var P=ui(s);Vi(s,(P?P+" ":"")+l)}}function Ze(s,l){s.classList!==void 0?s.classList.remove(l):Vi(s,E((" "+ui(s)+" ").replace(" "+l+" "," ")))}function Vi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function ui(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function cn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Oc(s,l)}function Oc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Vo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function ji(s,l,d){var p=l||new Z(0,0);s.style[Ms]=(de.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function ct(s,l){s._leaflet_pos=l,de.any3d?ji(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function zi(s){return s._leaflet_pos||new Z(0,0)}var Kn,xn,jo;if("onselectstart"in document)Kn=function(){Ee(window,"selectstart",vt)},xn=function(){$e(window,"selectstart",vt)};else{var Er=Vo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Kn=function(){if(Er){var s=document.documentElement.style;jo=s[Er],s[Er]="none"}},xn=function(){Er&&(document.documentElement.style[Er]=jo,jo=void 0)}}function zo(){Ee(window,"dragstart",vt)}function Fo(){$e(window,"dragstart",vt)}var Ds,ci;function Tl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Bo(),Ds=s,ci=s.style.outlineStyle,s.style.outlineStyle="none",Ee(window,"keydown",Bo))}function Bo(){Ds&&(Ds.style.outlineStyle=ci,Ds=void 0,ci=void 0,$e(window,"keydown",Bo))}function Dc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Mn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var rp={__proto__:null,TRANSFORM:Ms,TRANSITION:Di,TRANSITION_END:wl,get:xl,getStyle:Tr,create:De,remove:ze,empty:en,toFront:Nn,toBack:Ln,hasClass:Os,addClass:ce,removeClass:Ze,setClass:Vi,getClass:ui,setOpacity:cn,testProp:Vo,setTransform:ji,setPosition:ct,getPosition:zi,get disableTextSelection(){return Kn},get enableTextSelection(){return xn},disableImageDrag:zo,enableImageDrag:Fo,preventOutline:Tl,restoreOutline:Bo,getSizedParentNode:Dc,getScale:Mn};function Ee(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Uo(s,v,l[v],d);else{l=k(l);for(var P=0,z=l.length;P<z;P++)Uo(s,l[P],d,p)}return this}var tn="_leaflet_events";function $e(s,l,d,p){if(arguments.length===1)Pr(s),delete s[tn];else if(l&&typeof l=="object")for(var v in l)Vs(s,v,l[v],d);else if(l=k(l),arguments.length===2)Pr(s,function(W){return F(l,W)!==-1});else for(var P=0,z=l.length;P<z;P++)Vs(s,l[P],d,p);return this}function Pr(s,l){for(var d in s[tn]){var p=d.split(/\d/)[0];(!l||l(p))&&Vs(s,p,null,null,d)}}var Fi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Uo(s,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(s[tn]&&s[tn][v])return this;var P=function(W){return d.call(p||s,W||window.event)},z=P;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?P=kc(s,l,P):de.touch&&l==="dblclick"?P=Lc(s,P):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Fi[l]||l,P,de.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(W){W=W||window.event,Cl(s,W)&&z(W)},s.addEventListener(Fi[l],P,!1)):s.addEventListener(l,z,!1):s.attachEvent("on"+l,P),s[tn]=s[tn]||{},s[tn][v]=P}function Vs(s,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var P=s[tn]&&s[tn][v];if(!P)return this;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?np(s,l,P):de.touch&&l==="dblclick"?Mc(s,P):"removeEventListener"in s?s.removeEventListener(Fi[l]||l,P,!1):s.detachEvent("on"+l,P),s[tn][v]=null}function Be(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function El(s){return Uo(s,"wheel",Be),this}function js(s){return Ee(s,"mousedown touchstart dblclick contextmenu",Be),s._leaflet_disable_click=!0,this}function vt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function hi(s){return vt(s),Be(s),this}function Pl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function zs(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=Mn(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var di=de.linux&&de.chrome?window.devicePixelRatio:de.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Sl(s){return de.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/di:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Cl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Fs={__proto__:null,on:Ee,off:$e,stopPropagation:Be,disableScrollPropagation:El,disableClickPropagation:js,preventDefault:vt,stop:hi,getPropagationPath:Pl,getMousePosition:zs,getWheelDelta:Sl,isExternalTarget:Cl,addListener:Ee,removeListener:$e},Il=ut.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=zi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),ct(this._el,d),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),ke=ut.extend({options:{crs:We,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(J(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Di&&de.any3d&&!de.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,wl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(J(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),P=s instanceof Z?s:this.latLngToContainerPoint(s),z=P.subtract(v).multiplyBy(1-1/p),W=this.containerPointToLatLng(v.add(z));return this.setView(W,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():ue(s);var d=ee(l.paddingTopLeft||l.padding||[0,0]),p=ee(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var P=p.subtract(d).divideBy(2),z=this.project(s.getSouthWest(),v),W=this.project(s.getNorthEast(),v),q=this.unproject(z.add(W).divideBy(2).add(P),v);return{center:q,zoom:v}},fitBounds:function(s,l){if(s=ue(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=ee(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Il,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ce(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!de.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),P=this.getSize(),z=this._zoom;s=J(s),l=l===void 0?z:l;var W=Math.max(P.x,P.y),q=W*this.getZoomScale(z,l),Q=v.distanceTo(p)||1,se=1.42,_e=se*se;function Re(wt){var Yc=wt?-1:1,UA=wt?q:W,HA=q*q-W*W+Yc*_e*_e*Q*Q,WA=2*UA*_e*Q,up=HA/WA,Nv=Math.sqrt(up*up+1)-up,$A=Nv<1e-9?-18:Math.log(Nv);return $A}function nn(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function Mt(wt){return(Math.exp(wt)+Math.exp(-wt))/2}function Vn(wt){return nn(wt)/Mt(wt)}var dn=Re(0);function ta(wt){return W*(Mt(dn)/Mt(dn+se*wt))}function jA(wt){return W*(Mt(dn)*Vn(dn+se*wt)-nn(dn))/_e}function zA(wt){return 1-Math.pow(1-wt,1.5)}var FA=Date.now(),kv=(Re(1)-dn)/se,BA=d.duration?1e3*d.duration:1e3*kv*.8;function Rv(){var wt=(Date.now()-FA)/BA,Yc=zA(wt)*kv;wt<=1?(this._flyToFrame=j(Rv,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(jA(Yc)/Q)),z),this.getScaleZoom(W/ta(Yc),z),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Rv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=ue(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,ue(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=ee(l.paddingTopLeft||l.padding||[0,0]),p=ee(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),P=this.project(s),z=this.getPixelBounds(),W=te([z.min.add(d),z.max.subtract(p)]),q=W.getSize();if(!W.contains(P)){this._enforcingBounds=!0;var Q=P.subtract(W.getCenter()),se=W.extend(P).getSize().subtract(q);v.x+=Q.x<0?-se.x:se.x,v.y+=Q.y<0?-se.y:se.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),P=p.subtract(v);return!P.x&&!P.y?this:(s.animate&&s.pan?this.panBy(P):(s.pan&&this._rawPanBy(P),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new le(l,d),v=p.toBounds(s.coords.accuracy*2),P=this._locateOptions;if(P.setView){var z=this.getBoundsZoom(v);this.setView(p,P.maxZoom?Math.min(z,P.maxZoom):z)}var W={latlng:p,bounds:v,timestamp:s.timestamp};for(var q in s.coords)typeof s.coords[q]=="number"&&(W[q]=s.coords[q]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ze(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)ze(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=De("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new re(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=ue(s),d=ee(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),P=this.getMaxZoom(),z=s.getNorthWest(),W=s.getSouthEast(),q=this.getSize().subtract(d),Q=te(this.project(W,p),this.project(z,p)).getSize(),se=de.any3d?this.options.zoomSnap:1,_e=q.x/Q.x,Re=q.y/Q.y,nn=l?Math.max(_e,Re):Math.min(_e,Re);return p=this.getScaleZoom(nn,p),se&&(p=Math.round(p/(se/100))*(se/100),p=l?Math.ceil(p/se)*se:Math.floor(p/se)*se),Math.max(v,Math.min(P,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new ie(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(J(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ee(s),l)},layerPointToLatLng:function(s){var l=ee(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(J(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(J(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ue(s))},distance:function(s,l){return this.options.crs.distance(J(s),J(l))},containerPointToLayerPoint:function(s){return ee(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ee(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(ee(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(s)))},mouseEventToContainerPoint:function(s){return zs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=xl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&de.any3d,ce(s,"leaflet-container"+(de.touch?" leaflet-touch":"")+(de.retina?" leaflet-retina":"")+(de.ielt9?" leaflet-oldie":"")+(de.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Tr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ct(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ce(s.markerPane,"leaflet-zoom-hide"),ce(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){ct(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ct(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?$e:Ee;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),de.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",P=s.target||s.srcElement,z=!1;P;){if(p=this._targets[h(P)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){z=!0;break}if(p&&p.listens(l,!0)&&(v&&!Cl(P,s)||(d.push(p),v))||P===this._container)break;P=P.parentNode}return!d.length&&!z&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Tl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var P=[],z=0;z<d.length;z++)d[z].listens(l,!0)&&P.push(d[z]);v=P.concat(v)}if(v.length){l==="contextmenu"&&vt(s);var W=v[0],q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);q.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Q?W.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(z=0;z<v.length;z++)if(v[z].fire(l,q,!0),q.originalEvent._stopped||v[z].options.bubblingMouseEvents===!1&&F(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return zi(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return te([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),P=new ie(p.subtract(v),p.add(v)),z=this._getBoundsOffset(P,d,l);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?s:this.unproject(p.add(z),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new ie(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=te(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),P=p.max.subtract(s.max),z=this._rebound(v.x,-P.x),W=this._rebound(v.y,-P.y);return new Z(z,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=de.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=De("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Ms,p=this._proxy.style[d];ji(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ze(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();ji(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(j(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,ce(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ho(s,l){return new ke(s,l)}var hn=xe.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return ce(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ze(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),fi=function(s){return new hn(s)};ke.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=De("div",l+"control-container",this._container);function p(v,P){var z=l+v+" "+l+P;s[v+P]=De("div",z,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)ze(this._controlCorners[s]);ze(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Vc=hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){b(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return hn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ce(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ce(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=De("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),js(l),El(l);var p=this._section=De("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Ee(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=De("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ee(v,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){vt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=De("div",s+"-base",p),this._separator=De("div",s+"-separator",p),this._overlaysList=De("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;en(this._baseLayersList),en(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),Ee(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(p),P.appendChild(v);var z=s.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var P=s.length-1;P>=0;P--)l=s[P],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(P=0;P<v.length;P++)this._map.hasLayer(v[P])&&this._map.removeLayer(v[P]);for(P=0;P<p.length;P++)this._map.hasLayer(p[P])||this._map.addLayer(p[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ee(s,"click",vt),this.expand();var l=this;setTimeout(function(){$e(s,"click",vt),l._preventClick=!1})}}),jc=function(s,l,d){return new Vc(s,l,d)},Bi=hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=De("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var P=De("a",d,p);return P.innerHTML=s,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),js(P),Ee(P,"click",hi),Ee(P,"click",v,this),Ee(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ze(this._zoomInButton,l),Ze(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ce(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ce(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});ke.mergeOptions({zoomControl:!0}),ke.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bi,this.addControl(this.zoomControl))});var zc=function(s){return new Bi(s)},Al=hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=De("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=De("div",l,d)),s.imperial&&(this._iScale=De("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),bl=function(s){return new Al(s)},kl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Wo=hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(de.inlineSvg?kl+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=De("div","leaflet-control-attribution"),js(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});ke.mergeOptions({attributionControl:!0}),ke.addInitHook(function(){this.options.attributionControl&&new Wo().addTo(this)});var $o=function(s){return new Wo(s)};hn.Layers=Vc,hn.Zoom=Bi,hn.Scale=Al,hn.Attribution=Wo,fi.layers=jc,fi.zoom=zc,fi.scale=bl,fi.attribution=$o;var Tn=xe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tn.addTo=function(s,l){return s.addHandler(l,this),this};var Fc={Events:Ie},pi=de.touch?"touchstart mousedown":"mousedown",Qn=ut.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){b(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Ee(this._dragStartTarget,pi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qn._dragging===this&&this.finishDrag(!0),$e(this._dragStartTarget,pi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Os(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Qn._dragging===this&&this.finishDrag();return}if(!(Qn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Qn._dragging=this,this._preventOutline&&Tl(this._element),zo(),Kn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Dc(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=zi(this._element),this._parentScale=Mn(d);var p=s.type==="mousedown";Ee(document,p?"mousemove":"touchmove",this._onMove,this),Ee(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,vt(s),this._moved||(this.fire("dragstart"),this._moved=!0,ce(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ce(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ct(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$e(document,"mousemove touchmove",this._onMove,this),$e(document,"mouseup touchend touchcancel",this._onUp,this),Fo(),xn();var l=this._moved&&this._moving;this._moving=!1,Qn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Rl(s,l,d){var p,v=[1,4,2,8],P,z,W,q,Q,se,_e,Re;for(P=0,se=s.length;P<se;P++)s[P]._code=$(s[P],l);for(W=0;W<4;W++){for(_e=v[W],p=[],P=0,se=s.length,z=se-1;P<se;z=P++)q=s[P],Q=s[z],q._code&_e?Q._code&_e||(Re=H(Q,q,_e,l,d),Re._code=$(Re,l),p.push(Re)):(Q._code&_e&&(Re=H(Q,q,_e,l,d),Re._code=$(Re,l),p.push(Re)),p.push(q));s=p}return s}function Nl(s,l){var d,p,v,P,z,W,q,Q,se;if(!s||s.length===0)throw new Error("latlngs not passed");Fe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var _e=J([0,0]),Re=ue(s),nn=Re.getNorthWest().distanceTo(Re.getSouthWest())*Re.getNorthEast().distanceTo(Re.getNorthWest());nn<1700&&(_e=qo(s));var Mt=s.length,Vn=[];for(d=0;d<Mt;d++){var dn=J(s[d]);Vn.push(l.project(J([dn.lat-_e.lat,dn.lng-_e.lng])))}for(W=q=Q=0,d=0,p=Mt-1;d<Mt;p=d++)v=Vn[d],P=Vn[p],z=v.y*P.x-P.y*v.x,q+=(v.x+P.x)*z,Q+=(v.y+P.y)*z,W+=z*3;W===0?se=Vn[0]:se=[q/W,Q/W];var ta=l.unproject(ee(se));return J([ta.lat+_e.lat,ta.lng+_e.lng])}function qo(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var P=J(s[v]);l+=P.lat,d+=P.lng,p++}return J([l/p,d/p])}var Go={__proto__:null,clipPolygon:Rl,polygonCenter:Nl,centroid:qo};function Wt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Sr(s,d),s}function Ll(s,l,d){return Math.sqrt(Pe(s,l,d,!0))}function Bc(s,l,d){return Pe(s,l,d)}function Sr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,c(s,v,l,0,d-1);var P,z=[];for(P=0;P<d;P++)v[P]&&z.push(s[P]);return z}function c(s,l,d,p,v){var P=0,z,W,q;for(W=p+1;W<=v-1;W++)q=Pe(s[W],s[p],s[v],!0),q>P&&(z=W,P=q);P>d&&(l[z]=1,c(s,l,d,p,z),c(s,l,d,z,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,P=s.length;p<P;p++)ne(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<P-1&&d.push(s[P-1]),d}var x;function I(s,l,d,p,v){var P=p?x:$(s,d),z=$(l,d),W,q,Q;for(x=z;;){if(!(P|z))return[s,l];if(P&z)return!1;W=P||z,q=H(s,l,W,d,v),Q=$(q,d),W===P?(s=q,P=Q):(l=q,z=Q)}}function H(s,l,d,p,v){var P=l.x-s.x,z=l.y-s.y,W=p.min,q=p.max,Q,se;return d&8?(Q=s.x+P*(q.y-s.y)/z,se=q.y):d&4?(Q=s.x+P*(W.y-s.y)/z,se=W.y):d&2?(Q=q.x,se=s.y+z*(q.x-s.x)/P):d&1&&(Q=W.x,se=s.y+z*(W.x-s.x)/P),new Z(Q,se,v)}function $(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ne(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Pe(s,l,d,p){var v=l.x,P=l.y,z=d.x-v,W=d.y-P,q=z*z+W*W,Q;return q>0&&(Q=((s.x-v)*z+(s.y-P)*W)/q,Q>1?(v=d.x,P=d.y):Q>0&&(v+=z*Q,P+=W*Q)),z=s.x-v,W=s.y-P,p?z*z+W*W:new Z(v,P)}function Fe(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ue(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fe(s)}function mt(s,l){var d,p,v,P,z,W,q,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Fe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=J([0,0]),_e=ue(s),Re=_e.getNorthWest().distanceTo(_e.getSouthWest())*_e.getNorthEast().distanceTo(_e.getNorthWest());Re<1700&&(se=qo(s));var nn=s.length,Mt=[];for(d=0;d<nn;d++){var Vn=J(s[d]);Mt.push(l.project(J([Vn.lat-se.lat,Vn.lng-se.lng])))}for(d=0,p=0;d<nn-1;d++)p+=Mt[d].distanceTo(Mt[d+1])/2;if(p===0)Q=Mt[0];else for(d=0,P=0;d<nn-1;d++)if(z=Mt[d],W=Mt[d+1],v=z.distanceTo(W),P+=v,P>p){q=(P-p)/v,Q=[W.x-q*(W.x-z.x),W.y-q*(W.y-z.y)];break}var dn=l.unproject(ee(Q));return J([dn.lat+se.lat,dn.lng+se.lng])}var On={__proto__:null,simplify:Wt,pointToSegmentDistance:Ll,closestPointOnSegment:Bc,clipSegment:I,_getEdgeIntersection:H,_getBitCode:$,_sqClosestPointOnSegment:Pe,isFlat:Fe,_flat:Ue,polylineCenter:mt},Xn={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new le(s.y,s.x)},bounds:new ie([-180,-90],[180,90])},Dn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,P=Math.sqrt(1-v*v),z=P*Math.sin(p),W=Math.tan(Math.PI/4-p/2)/Math.pow((1-z)/(1+z),P/2);return p=-d*Math.log(Math.max(W,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),P=Math.exp(-s.y/d),z=Math.PI/2-2*Math.atan(P),W=0,q=.1,Q;W<15&&Math.abs(q)>1e-7;W++)Q=v*Math.sin(z),Q=Math.pow((1-Q)/(1+Q),v/2),q=Math.PI/2-2*Math.atan(P*Q)-z,z+=q;return new le(z*l,s.x*l/d)}},mi={__proto__:null,LonLat:Xn,Mercator:Dn,SphericalMercator:me},Zo=r({},Ge,{code:"EPSG:3395",projection:Dn,transformation:function(){var s=.5/(Math.PI*Dn.R);return ft(s,.5,-s,.5)}()}),Ko=r({},Ge,{code:"EPSG:4326",projection:Xn,transformation:ft(1/180,1,-1/180,.5)}),gA=r({},ge,{projection:Xn,transformation:ft(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});ge.Earth=Ge,ge.EPSG3395=Zo,ge.EPSG3857=We,ge.EPSG900913=pt,ge.EPSG4326=Ko,ge.Simple=gA;var Yn=ut.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});ke.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qo=Yn.extend({initialize:function(s,l){b(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),yA=function(s,l){return new Qo(s,l)},Ui=Qo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Qo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Qo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new re;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),_A=function(s,l){return new Ui(s,l)},Xo=xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=ee(p),P=ee(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),P&&(s.style.marginLeft=-P.x+"px",s.style.marginTop=-P.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return de.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function vA(s){return new Xo(s)}var Ml=Xo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ml.imagePath!="string"&&(Ml.imagePath=this._detectIconPath()),(this.options.imagePath||Ml.imagePath)+Xo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var P=p.exec(d);return P&&P[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=De("div","leaflet-default-icon-path",document.body),l=Tr(s,"background-image")||Tr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),hv=Tn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Qn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ce(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,P=zi(l._icon),z=d.getPixelBounds(),W=d.getPixelOrigin(),q=te(z.min._subtract(W).add(v),z.max._subtract(W).subtract(v));if(!q.contains(P)){var Q=ee((Math.max(q.max.x,P.x)-q.max.x)/(z.max.x-q.max.x)-(Math.min(q.min.x,P.x)-q.min.x)/(z.min.x-q.min.x),(Math.max(q.max.y,P.y)-q.max.y)/(z.max.y-q.max.y)-(Math.min(q.min.y,P.y)-q.min.y)/(z.min.y-q.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),ct(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=j(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=zi(l._icon),v=l._map.layerPointToLatLng(p);d&&ct(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Uc=Yn.extend({options:{icon:new Ml,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=J(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=J(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),ce(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),P=!1;v!==this._shadow&&(this._removeShadow(),P=!0),v&&(ce(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&P&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$e(this._icon,"focus",this._panOnFocus,this),ze(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ze(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ct(this._icon,s),this._shadow&&ct(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ce(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&cn(this._icon,s),this._shadow&&cn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?ee(l.iconSize):ee(0,0),p=l.iconAnchor?ee(l.iconAnchor):ee(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function wA(s,l){return new Uc(s,l)}var Cr=Yn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Hc=Cr.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=J(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=J(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Cr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new ie(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xA(s,l){return new Hc(s,l)}var sp=Hc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),b(this,l),this._latlng=J(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new re(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Cr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Ge.distance){var v=Math.PI/180,P=this._mRadius/Ge.R/v,z=d.project([l+P,s]),W=d.project([l-P,s]),q=z.add(W).divideBy(2),Q=d.unproject(q).lat,se=Math.acos((Math.cos(P*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(se)||se===0)&&(se=P/Math.cos(Math.PI/180*l)),this._point=q.subtract(d.getPixelOrigin()),this._radius=isNaN(se)?0:q.x-d.project([Q,s-se]).x,this._radiusY=q.y-z.y}else{var _e=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(_e).x}this._updateBounds()}});function TA(s,l,d){return new sp(s,l,d)}var Hi=Cr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Pe,v,P,z=0,W=this._parts.length;z<W;z++)for(var q=this._parts[z],Q=1,se=q.length;Q<se;Q++){v=q[Q-1],P=q[Q];var _e=p(s,v,P,!0);_e<l&&(l=_e,d=p(s,v,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=J(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new re,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Fe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Fe(s),p=0,v=s.length;p<v;p++)d?(l[p]=J(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof le,v=s.length,P,z;if(p){for(z=[],P=0;P<v;P++)z[P]=this._map.latLngToLayerPoint(s[P]),d.extend(z[P]);l.push(z)}else for(P=0;P<v;P++)this._projectLatlngs(s[P],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,P,z,W,q;for(d=0,v=0,P=this._rings.length;d<P;d++)for(q=this._rings[d],p=0,z=q.length;p<z-1;p++)W=I(q[p],q[p+1],s,p,!0),W&&(l[v]=l[v]||[],l[v].push(W[0]),(W[1]!==q[p+1]||p===z-2)&&(l[v].push(W[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Wt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,P,z,W,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,P=this._parts.length;d<P;d++)for(W=this._parts[d],p=0,z=W.length,v=z-1;p<z;v=p++)if(!(!l&&p===0)&&Ll(s,W[v],W[p])<=q)return!0;return!1}});function EA(s,l){return new Hi(s,l)}Hi._flat=Ue;var Yo=Hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Hi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof le&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Hi.prototype._setLatLngs.call(this,s),Fe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new ie(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,P;p<v;p++)P=Rl(this._rings[p],s,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,P,z,W,q,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(P=0,q=this._parts.length;P<q;P++)for(d=this._parts[P],z=0,Q=d.length,W=Q-1;z<Q;W=z++)p=d[z],v=d[W],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Hi.prototype._containsPoint.call(this,s,!0)}});function PA(s,l){return new Yo(s,l)}var Wi=Ui.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var P=this.options;if(P.filter&&!P.filter(s))return this;var z=Wc(s,P);return z?(z.feature=Gc(s),z.defaultOptions=z.options,this.resetStyle(z),P.onEachFeature&&P.onEachFeature(s,z),this.addLayer(z)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Wc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],P=l&&l.pointToLayer,z=l&&l.coordsToLatLng||op,W,q,Q,se;if(!p&&!d)return null;switch(d.type){case"Point":return W=z(p),dv(P,s,W,l);case"MultiPoint":for(Q=0,se=p.length;Q<se;Q++)W=z(p[Q]),v.push(dv(P,s,W,l));return new Ui(v);case"LineString":case"MultiLineString":return q=$c(p,d.type==="LineString"?0:1,z),new Hi(q,l);case"Polygon":case"MultiPolygon":return q=$c(p,d.type==="Polygon"?1:2,z),new Yo(q,l);case"GeometryCollection":for(Q=0,se=d.geometries.length;Q<se;Q++){var _e=Wc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);_e&&v.push(_e)}return new Ui(v);case"FeatureCollection":for(Q=0,se=d.features.length;Q<se;Q++){var Re=Wc(d.features[Q],l);Re&&v.push(Re)}return new Ui(v);default:throw new Error("Invalid GeoJSON object.")}}function dv(s,l,d,p){return s?s(l,d):new Uc(d,p&&p.markersInheritOptions&&p)}function op(s){return new le(s[1],s[0],s[2])}function $c(s,l,d){for(var p=[],v=0,P=s.length,z;v<P;v++)z=l?$c(s[v],l-1,d):(d||op)(s[v]),p.push(z);return p}function ap(s,l){return s=J(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function qc(s,l,d,p){for(var v=[],P=0,z=s.length;P<z;P++)v.push(l?qc(s[P],Fe(s[P])?0:l-1,d,p):ap(s[P],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function Jo(s,l){return s.feature?r({},s.feature,{geometry:l}):Gc(l)}function Gc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var lp={toGeoJSON:function(s){return Jo(this,{type:"Point",coordinates:ap(this.getLatLng(),s)})}};Uc.include(lp),sp.include(lp),Hc.include(lp),Hi.include({toGeoJSON:function(s){var l=!Fe(this._latlngs),d=qc(this._latlngs,l?1:0,!1,s);return Jo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Yo.include({toGeoJSON:function(s){var l=!Fe(this._latlngs),d=l&&!Fe(this._latlngs[0]),p=qc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Jo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Qo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Jo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var P=v.toGeoJSON(s);if(d)p.push(P.geometry);else{var z=Gc(P);z.type==="FeatureCollection"?p.push.apply(p,z.features):p.push(z)}}}),d?Jo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function fv(s,l){return new Wi(s,l)}var SA=fv,Zc=Yn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=ue(l),b(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ce(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ze(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Nn(this._image),this},bringToBack:function(){return this._map&&Ln(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ue(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:De("img");if(ce(l,"leaflet-image-layer"),this._zoomAnimated&&ce(l,"leaflet-zoom-animated"),this.options.className&&ce(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ji(this._image,d,l)},_reset:function(){var s=this._image,l=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();ct(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){cn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),CA=function(s,l,d){return new Zc(s,l,d)},pv=Zc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:De("video");if(ce(l,"leaflet-image-layer"),this._zoomAnimated&&ce(l,"leaflet-zoom-animated"),this.options.className&&ce(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var z=De("source");z.src=this._url[P],l.appendChild(z)}}});function IA(s,l,d){return new pv(s,l,d)}var mv=Zc.extend({_initImage:function(){var s=this._image=this._url;ce(s,"leaflet-image-layer"),this._zoomAnimated&&ce(s,"leaflet-zoom-animated"),this.options.className&&ce(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function AA(s,l,d){return new mv(s,l,d)}var gi=Yn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof le||C(s))?(this._latlng=J(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&cn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&cn(this._container,1),this.bringToFront(),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(cn(this._container,0),this._removeTimeout=setTimeout(a(ze,void 0,this._container),200)):ze(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=J(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Nn(this._container),this},bringToBack:function(){return this._map&&Ln(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Ui){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=ee(this.options.offset),d=this._getAnchor();this._zoomAnimated?ct(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});ke.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),Yn.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(b(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var Kc=gi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,gi.prototype.openOn.call(this,s)},onAdd:function(s){gi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Cr||this._source.on("preclick",Be))},onRemove:function(s){gi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Cr||this._source.off("preclick",Be))},getEvents:function(){var s=gi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=De("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=De("div",s+"-content-wrapper",l);if(this._contentNode=De("div",s+"-content",d),js(l),El(this._contentNode),Ee(l,"contextmenu",Be),this._tipContainer=De("div",s+"-tip-container",l),this._tip=De("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=De("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(p,"click",function(v){vt(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,P="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",ce(s,P)):Ze(s,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();ct(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Tr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new Z(this._containerLeft,-d-this._containerBottom);v._add(zi(this._container));var P=s.layerPointToContainerPoint(v),z=ee(this.options.autoPanPadding),W=ee(this.options.autoPanPaddingTopLeft||z),q=ee(this.options.autoPanPaddingBottomRight||z),Q=s.getSize(),se=0,_e=0;P.x+p+q.x>Q.x&&(se=P.x+p-Q.x+q.x),P.x-se-W.x<0&&(se=P.x-W.x),P.y+d+q.y>Q.y&&(_e=P.y+d-Q.y+q.y),P.y-_e-W.y<0&&(_e=P.y-W.y),(se||_e)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,_e]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),bA=function(s,l){return new Kc(s,l)};ke.mergeOptions({closePopupOnClick:!0}),ke.include({openPopup:function(s,l,d){return this._initOverlay(Kc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Yn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Kc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Ui||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){hi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Cr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Qc=gi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){gi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){gi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=gi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=De("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,P=p.latLngToContainerPoint(p.getCenter()),z=p.layerPointToContainerPoint(s),W=this.options.direction,q=v.offsetWidth,Q=v.offsetHeight,se=ee(this.options.offset),_e=this._getAnchor();W==="top"?(l=q/2,d=Q):W==="bottom"?(l=q/2,d=0):W==="center"?(l=q/2,d=Q/2):W==="right"?(l=0,d=Q/2):W==="left"?(l=q,d=Q/2):z.x<P.x?(W="right",l=0,d=Q/2):(W="left",l=q+(se.x+_e.x)*2,d=Q/2),s=s.subtract(ee(l,d,!0)).add(se).add(_e),Ze(v,"leaflet-tooltip-right"),Ze(v,"leaflet-tooltip-left"),Ze(v,"leaflet-tooltip-top"),Ze(v,"leaflet-tooltip-bottom"),ce(v,"leaflet-tooltip-"+W),ct(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&cn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kA=function(s,l){return new Qc(s,l)};ke.include({openTooltip:function(s,l,d){return this._initOverlay(Qc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Yn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Ui||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Ee(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ee(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var gv=Xo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(en(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=ee(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function RA(s){return new gv(s)}Xo.Default=Ml;var Ol=Yn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:de.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),ze(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Nn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,P;p<v;p++)P=l[p].style.zIndex,l[p]!==this._container&&P&&(d=s(d,+P));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!de.ielt9){cn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var P=Math.min(1,(s-v.loaded)/200);cn(v.el,P),P<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(B(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=De("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(ze(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=De("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)ze(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),P=Math.floor(l/2),z=d-1,W=new Z(+v,+P);W.z=+z;var q=this._tileCoordsToKey(W),Q=this._tiles[q];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),z>p?this._retainParent(v,P,z,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var P=2*l;P<2*l+2;P++){var z=new Z(v,P);z.z=d+1;var W=this._tileCoordsToKey(z),q=this._tiles[W];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);d+1<p&&this._retainChildren(v,P,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var P=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||P)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();de.any3d?ji(s.el,v,p):ct(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),P=l.getSize().divideBy(p*2);return new ie(v.subtract(P),v.add(P))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),P=v.getCenter(),z=[],W=this.options.keepBuffer,q=new ie(v.getBottomLeft().subtract([W,-W]),v.getTopRight().add([W,-W]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var se=this._tiles[Q].coords;(se.z!==this._tileZoom||!q.contains(new Z(se.x,se.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var _e=v.min.y;_e<=v.max.y;_e++)for(var Re=v.min.x;Re<=v.max.x;Re++){var nn=new Z(Re,_e);if(nn.z=this._tileZoom,!!this._isValidTile(nn)){var Mt=this._tiles[this._tileCoordsToKey(nn)];Mt?Mt.current=!0:z.push(nn)}}if(z.sort(function(dn,ta){return dn.distanceTo(P)-ta.distanceTo(P)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Vn=document.createDocumentFragment();for(Re=0;Re<z.length;Re++)this._addTile(z[Re],Vn);this._level.el.appendChild(Vn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return ue(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),P=l.unproject(p,s.z),z=l.unproject(v,s.z);return[P,z]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new re(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(ze(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ce(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,de.ielt9&&this.options.opacity<1&&cn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&j(a(this._tileReady,this,s,null,v)),ct(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(cn(d.el,0),B(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(ce(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),de.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ie(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function NA(s){return new Ol(s)}var ea=Ol.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&de.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Ee(d,"load",a(this._tileOnLoad,this,l,d)),Ee(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:de.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return S(this._url,r(l,this.options))},_tileOnLoad:function(s,l){de.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=G;var d=this._tiles[s].coords;ze(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",G),Ol.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return Ol.prototype._tileReady.call(this,s,l,d)}});function yv(s,l){return new ea(s,l)}var _v=ea.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=b(this,l);var v=l.detectRetina&&de.retina?2:1,P=this.getTileSize();d.width=P.x*v,d.height=P.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ea.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=te(d.project(l[0]),d.project(l[1])),v=p.min,P=p.max,z=(this._wmsVersion>=1.3&&this._crs===Ko?[v.y,v.x,P.y,P.x]:[v.x,v.y,P.x,P.y]).join(","),W=ea.prototype.getTileUrl.call(this,s);return W+V(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function LA(s,l){return new _v(s,l)}ea.WMS=_v,yv.wms=LA;var $i=Yn.extend({options:{padding:.1},initialize:function(s){b(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ce(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),P=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));de.any3d?ji(this._container,P,d):ct(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ie(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vv=$i.extend({options:{tolerance:0},getEvents:function(){var s=$i.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ee(s,"mousemove",this._onMouseMove,this),Ee(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,ze(this._container),$e(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=de.retina?2:1;ct(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",de.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){$i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,P,z=s._parts,W=z.length,q=this._ctx;if(W){for(q.beginPath(),d=0;d<W;d++){for(p=0,v=z[d].length;p<v;p++)P=z[d][p],q[p?"lineTo":"moveTo"](P.x,P.y);l&&q.closePath()}this._fillStroke(q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(ce(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function wv(s){return de.canvas?new vv(s):null}var Dl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),MA={_initContainer:function(){this._container=De("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($i.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Dl("shape");ce(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Dl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;ze(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Dl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=C(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Dl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Nn(s._container)},_bringToBack:function(s){Ln(s._container)}},Xc=de.vml?Dl:Io,Vl=$i.extend({_initContainer:function(){this._container=Xc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ze(this._container),$e(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),ct(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Xc("path");s.options.className&&ce(l,s.options.className),s.options.interactive&&ce(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){ze(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Ao(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",P=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,P)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Nn(s._path)},_bringToBack:function(s){Ln(s._path)}});de.vml&&Vl.include(MA);function xv(s){return de.svg||de.vml?new Vl(s):null}ke.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&wv(s)||xv(s)}});var Tv=Yo.extend({initialize:function(s,l){Yo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ue(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function OA(s,l){return new Tv(s,l)}Vl.create=Xc,Vl.pointsToPath=Ao,Wi.geometryToLayer=Wc,Wi.coordsToLatLng=op,Wi.coordsToLatLngs=$c,Wi.latLngToCoords=ap,Wi.latLngsToCoords=qc,Wi.getFeature=Jo,Wi.asFeature=Gc,ke.mergeOptions({boxZoom:!0});var Ev=Tn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$e(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ze(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Kn(),zo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ee(document,{contextmenu:hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=De("div","leaflet-zoom-box",this._container),ce(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ie(this._point,this._startPoint),d=l.getSize();ct(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(ze(this._box),Ze(this._container,"leaflet-crosshair")),xn(),Fo(),$e(document,{contextmenu:hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ke.addInitHook("addHandler","boxZoom",Ev),ke.mergeOptions({doubleClickZoom:!0});var Pv=Tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});ke.addInitHook("addHandler","doubleClickZoom",Pv),ke.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Sv=Tn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Qn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ce(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ue(this._map.options.maxBounds);this._offsetLimit=te(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,P=(p+l+d)%s-l-d,z=Math.abs(v+d)<Math.abs(P+d)?v:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,z=d.easeLinearity,W=v.multiplyBy(z/P),q=W.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,q),se=W.multiplyBy(Q/q),_e=Q/(d.inertiaDeceleration*z),Re=se.multiplyBy(-_e/2).round();!Re.x&&!Re.y?l.fire("moveend"):(Re=l._limitOffset(Re,l.options.maxBounds),j(function(){l.panBy(Re,{duration:_e,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});ke.addInitHook("addHandler","dragging",Sv),ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Cv=Tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ee(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$e(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$e(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=ee(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(ee(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;hi(s)}}});ke.addInitHook("addHandler","keyboard",Cv),ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Iv=Tn.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$e(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Sl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),hi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,P=d?Math.ceil(v/d)*d:v,z=s._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,z&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+z):s.setZoomAround(this._lastMousePos,l+z))}});ke.addInitHook("addHandler","scrollWheelZoom",Iv);var DA=600;ke.mergeOptions({tapHold:de.touchNative&&de.safari&&de.mobile,tapTolerance:15});var Av=Tn.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$e(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",vt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),DA),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){$e(document,"touchend",vt),$e(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),$e(document,"touchend touchcancel contextmenu",this._cancel,this),$e(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});ke.addInitHook("addHandler","tapHold",Av),ke.mergeOptions({touchZoom:de.touch,bounceAtZoomLimits:!0});var bv=Tn.extend({addHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),$e(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),vt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var P=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var z=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(z,this,!0),vt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),$e(document,"touchmove",this._onTouchMove,this),$e(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ke.addInitHook("addHandler","touchZoom",bv),ke.BoxZoom=Ev,ke.DoubleClickZoom=Pv,ke.Drag=Sv,ke.Keyboard=Cv,ke.ScrollWheelZoom=Iv,ke.TapHold=Av,ke.TouchZoom=bv,n.Bounds=ie,n.Browser=de,n.CRS=ge,n.Canvas=vv,n.Circle=sp,n.CircleMarker=Hc,n.Class=xe,n.Control=hn,n.DivIcon=gv,n.DivOverlay=gi,n.DomEvent=Fs,n.DomUtil=rp,n.Draggable=Qn,n.Evented=ut,n.FeatureGroup=Ui,n.GeoJSON=Wi,n.GridLayer=Ol,n.Handler=Tn,n.Icon=Xo,n.ImageOverlay=Zc,n.LatLng=le,n.LatLngBounds=re,n.Layer=Yn,n.LayerGroup=Qo,n.LineUtil=On,n.Map=ke,n.Marker=Uc,n.Mixin=Fc,n.Path=Cr,n.Point=Z,n.PolyUtil=Go,n.Polygon=Yo,n.Polyline=Hi,n.Popup=Kc,n.PosAnimation=Il,n.Projection=mi,n.Rectangle=Tv,n.Renderer=$i,n.SVG=Vl,n.SVGOverlay=mv,n.TileLayer=ea,n.Tooltip=Qc,n.Transformation=Ae,n.Util=O,n.VideoOverlay=pv,n.bind=a,n.bounds=te,n.canvas=wv,n.circle=TA,n.circleMarker=xA,n.control=fi,n.divIcon=RA,n.extend=r,n.featureGroup=_A,n.geoJSON=fv,n.geoJson=SA,n.gridLayer=NA,n.icon=vA,n.imageOverlay=CA,n.latLng=J,n.latLngBounds=ue,n.layerGroup=yA,n.map=Ho,n.marker=wA,n.point=ee,n.polygon=PA,n.polyline=EA,n.popup=bA,n.rectangle=OA,n.setOptions=b,n.stamp=h,n.svg=xv,n.svgOverlay=AA,n.tileLayer=yv,n.tooltip=kA,n.transformation=ft,n.version=i,n.videoOverlay=IA;var VA=window.L;n.noConflict=function(){return window.L=VA,this},window.L=n})})(Kg,Kg.exports);var Co=Kg.exports;const lv=O1(Co);function wc(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function uv(t,e){return e==null?function(i,r){const o=D.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=D.useRef();o.current||(o.current=t(i,r));const a=D.useRef(i),{instance:u}=o.current;return D.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function fA(t,e){D.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function pA(t){return function(n){const i=ov(),r=t(av(n,i),i);return Pz(i.map,n.attribution),dA(r.current,n.eventHandlers),fA(r.current,i),r}}function bz(t,e){const n=D.useRef();D.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function kz(t){return function(n){const i=ov(),r=t(av(n,i),i);return dA(r.current,n.eventHandlers),fA(r.current,i),bz(r.current,n),r}}function Rz(t,e){const n=uv(t,e),i=pA(n);return hA(i)}function cv(t,e){const n=uv(t,e),i=kz(n);return hA(i)}function Nz(t,e){const n=uv(t,e),i=pA(n);return Az(i)}function Lz(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Qf(){return ov().map}function Mz(t){const e=Qf();return D.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const mA=cv(function({center:e,children:n,...i},r){const o=new Co.CircleMarker(e,i);return wc(o,Kf(r,{overlayContainer:o}))},Sz);function Qg(){return Qg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qg.apply(this,arguments)}function Oz({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[_]=D.useState({className:r,id:o,style:u}),[E,k]=D.useState(null);D.useImperativeHandle(g,()=>(E==null?void 0:E.map)??null,[E]);const b=D.useCallback(R=>{if(R!==null&&E===null){const S=new Co.Map(R,m);n!=null&&f!=null?S.setView(n,f):t!=null&&S.fitBounds(t,e),h!=null&&S.whenReady(h),k(Iz(S))}},[]);D.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const V=E?ro.createElement(cA,{value:E},i):a??null;return ro.createElement("div",Qg({},_,{ref:b}),V)}const Dz=D.forwardRef(Oz),Vz=Rz(function({position:e,...n},i){const r=new Co.Marker(e,n);return wc(r,Kf(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),jz=cv(function({positions:e,...n},i){const r=new Co.Polygon(e,n);return wc(r,Kf(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),M1=cv(function({positions:e,...n},i){const r=new Co.Polyline(e,n);return wc(r,Kf(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),zz=Nz(function({url:e,...n},i){const r=new Co.TileLayer(e,av(n,i));return wc(r,i)},function(e,n,i){Lz(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete lv.Icon.Default.prototype._getIconUrl;lv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const Fz="/street-art-ctf/chumper.png",Bz=(t,e=!1)=>{let n="";return e?n="grayscale(100%) opacity(0.5)":t?t==="red"&&(n="hue-rotate(160deg) saturate(1.5)"):n="grayscale(100%)",lv.divIcon({html:`<img src="${Fz}" style="width: 32px; height: 32px; filter: ${n};" />`,className:"chumper-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})};function Uz({devMode:t}){const[e,n]=D.useState(JI),[i,r]=D.useState(YI);return Mz({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?w.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:w.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[w.jsxs("div",{children:["zoom: ",e]}),w.jsxs("div",{children:["lat: ",i[0]]}),w.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function Hz({hood:t}){const e=Qf();return D.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function Wz({onShow:t}){const e=Qf(),[n,i]=D.useState(null);if(D.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o){const a=JSON.parse(o);i(a),localStorage.removeItem("streetart-ctf-lastCapture"),a.location&&setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500)}},[e,t]),!n)return null;const r=n.team==="red"?"#ff6b6b":"#4dabf7";return w.jsx(mA,{center:n.location,radius:30,pathOptions:{color:r,fillColor:r,fillOpacity:.3,weight:3,className:"capture-pulse"}})}function $z(){const t=Qf(),[e,n]=D.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return w.jsx(oe.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:w.jsx(oe.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:w.jsx(ez,{size:20,className:"text-white"})})})}function qz({point:t,onClose:e}){const n=t.capturedBy?la(t.capturedBy):"#495057",i=Ju(t),r=t.status==="ghost";return w.jsx(oe.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:w.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${n}40`},children:[w.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:w.jsx(yz,{size:16,className:"text-white/50"})}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${n}20`,border:`1px solid ${n}40`},children:r?w.jsx(rA,{size:20,className:"text-white/30"}):t.capturedBy?w.jsx(cz,{size:20,style:{color:n}}):w.jsx(oz,{size:20,style:{color:n}})}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),r&&w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),w.jsx("p",{className:"text-sm text-white/40",children:t.area}),w.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&w.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),w.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[w.jsxs("span",{className:"text-lg font-bold",style:{color:n},children:[i," pts"]}),t.capturedBy?w.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:n},children:["Captured by ",t.capturedBy]}):w.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:r?"Gone":"Unclaimed"})]})]})]})]})})}const dm=[null,...us],Gz=[{id:"off",label:"Off",icon:az},{id:"circles",label:"Circles",icon:Q6},{id:"squares",label:"Squares",icon:hz},{id:"hexagons",label:"Hexagons",icon:iz}],Zz=(t,e)=>{if(e==="off")return[];const n=t.filter(r=>r.capturedBy&&r.status!=="ghost"),i=[];return n.forEach(r=>{const[o,a]=r.location,u=.002,h=r.capturedBy;if(e==="circles"){const m=[];for(let g=0;g<32;g++){const _=g/32*2*Math.PI;m.push([o+u*Math.cos(_),a+u*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id})}else if(e==="squares"){const f=u*.8;i.push({team:h,coords:[[o-f,a-f*1.5],[o-f,a+f*1.5],[o+f,a+f*1.5],[o+f,a-f*1.5]],pointId:r.id})}else if(e==="hexagons"){const f=u*.9,m=[];for(let g=0;g<6;g++){const _=g/6*2*Math.PI+Math.PI/6;m.push([o+f*Math.cos(_),a+f*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id})}}),i};function Kz(){const{player:t,artPoints:e,captureArt:n}=Li(),[i,r]=D.useState(null),[o,a]=D.useState(!1),[u,h]=D.useState(e),[f,m]=D.useState(Jd.vysocany),[g,_]=D.useState(!1),[E,k]=D.useState(!0),[b,V]=D.useState("circles");D.useEffect(()=>{h(e)},[e]);const R=T=>{o?h(N=>N.map(M=>{if(M.id===T.id){const B=(dm.indexOf(M.capturedBy)+1)%dm.length;return{...M,capturedBy:dm[B]}}return M})):r(T)},S=()=>{h(e.map(T=>({...T,capturedBy:null})))},C=o?u:e,F=D.useMemo(()=>U6(C),[C]),G=D.useMemo(()=>Zz(C,b),[C,b]),U=D.useMemo(()=>tA(C),[C]),A=Object.values(U).reduce((T,N)=>T+N,0)||1;return w.jsxs("div",{className:"relative w-full h-full",children:[w.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:Object.entries(U).map(([T,N])=>{const M=N/A*100;return w.jsx(oe.div,{className:"h-full",style:{backgroundColor:la(T)},initial:{width:0},animate:{width:`${M}%`},transition:{duration:.8}},T)})}),w.jsxs("div",{className:"absolute top-10 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[w.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Teams"}),w.jsx("div",{className:"space-y-1.5",children:us.map(T=>w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:la(T)}}),w.jsx("span",{className:"text-xs text-white/70 capitalize font-medium",children:T}),w.jsxs("span",{className:"text-xs text-white/40 ml-auto",children:[U[T]||0," pts"]})]},T))}),w.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[w.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Points"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white/40"}),w.jsx("span",{className:"text-xs text-white/40",children:"Active"})]}),w.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-dashed border-white/20"}),w.jsx("span",{className:"text-xs text-white/30",children:"Ghost"})]})]}),w.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[w.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),w.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),w.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(Jd).map(T=>w.jsx(oe.button,{onClick:()=>m(T),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f.id===T.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:T.name},T.id))}),w.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[w.jsx(oe.button,{onClick:()=>_(!g),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${g?"bg-white/20 border-white/30 text-white":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Map Settings",children:w.jsx(uz,{size:18})}),w.jsx(oe.button,{onClick:()=>a(!o),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${o?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:w.jsx(J6,{size:18})}),o&&w.jsx(oe.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:S,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:w.jsx(sA,{size:18})})]}),w.jsx(Na,{children:g&&w.jsxs(oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"absolute top-24 right-4 z-[1000] w-48 bg-black/90 backdrop-blur-xl rounded-xl border border-white/10 overflow-hidden",children:[w.jsx("div",{className:"p-3 border-b border-white/10",children:w.jsx("h3",{className:"text-xs font-bold text-white/60 uppercase tracking-wider",children:"Display"})}),w.jsx("div",{className:"p-3 border-b border-white/5",children:w.jsxs("button",{onClick:()=>k(!E),className:"w-full flex items-center justify-between",children:[w.jsx("span",{className:"text-sm text-white/70",children:"Show Lines"}),w.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${E?"bg-blue-500":"bg-white/20"}`,children:w.jsx(oe.div,{className:"w-4 h-4 bg-white rounded-full mt-0.5",animate:{x:E?22:2},transition:{type:"spring",stiffness:500,damping:30}})})]})}),w.jsxs("div",{className:"p-3",children:[w.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Territory Style"}),w.jsx("div",{className:"grid grid-cols-2 gap-1",children:Gz.map(T=>{const N=T.icon;return w.jsxs("button",{onClick:()=>V(T.id),className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs transition-colors ${b===T.id?"bg-white/20 text-white":"bg-white/5 text-white/50 hover:bg-white/10"}`,children:[w.jsx(N,{size:12}),T.label]},T.id)})})]})]})}),w.jsx(Na,{children:o&&w.jsx(oe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:w.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),w.jsxs(Dz,{center:YI,zoom:JI,minZoom:F6,maxZoom:B6,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[w.jsx(zz,{url:C1.tileUrl,attribution:C1.attribution}),w.jsx($z,{}),w.jsx(Uz,{devMode:o}),w.jsx(Hz,{hood:f}),w.jsx(Wz,{}),w.jsx(M1,{positions:I1.map(T=>T.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),I1.map(T=>w.jsx(mA,{center:T.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},T.name)),G.map((T,N)=>w.jsx(jz,{positions:T.coords,pathOptions:{color:la(T.team),fillColor:la(T.team),fillOpacity:.15,weight:1,opacity:.4}},`territory-${T.pointId}`)),E&&Object.entries(F).map(([T,N])=>N.map((M,j)=>w.jsx(M1,{positions:[M.from,M.to],pathOptions:{color:la(T),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${T}-line-${j}`))),C.map(T=>{const N=T.status==="ghost",M=Bz(T.capturedBy,N);return w.jsx(Vz,{position:T.location,icon:M,eventHandlers:{click:j=>{j.originalEvent.stopPropagation(),R(T)}}},T.id)})]}),w.jsx(Na,{children:i&&w.jsx(qz,{point:i,onClose:()=>r(null)})})]})}function Qz(){return w.jsx(oe.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:w.jsx(Kz,{})})}function Xz(){const{player:t}=Li(),[e,n]=D.useState(!1);return D.useEffect(()=>{if(t.team&&!e){n(!0);const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"}},[t.team,e]),t.team?w.jsx(oe.div,{className:"flex-1 flex items-center justify-center p-8 bg-black",initial:{opacity:0},animate:{opacity:1},children:w.jsxs("div",{className:"text-center",children:[w.jsx(oe.div,{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:w.jsx(iv,{size:48,className:"text-white"})}),w.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Opening AR Scanner"}),w.jsx("p",{className:"text-white/40 text-sm mb-4",children:"Point your camera at street art to capture it"}),w.jsx(sz,{className:"w-6 h-6 animate-spin mx-auto text-purple-400"})]})}):w.jsx(oe.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:w.jsx(G6,{size:36,className:"text-amber-500"})}),w.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),w.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start scanning street art"})]})})}const Yz={red:"Red Team",blue:"Blue Team"};function Jz({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return w.jsxs(oe.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[w.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${Ye[t].hex}15 0%, transparent 60%)`}}),w.jsx(oe.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:Ye[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),w.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${Ye[t].hex}30`},children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?w.jsx(tz,{size:20,className:"text-white"}):w.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),w.jsxs("div",{className:"flex-1",children:[w.jsx("p",{className:"font-semibold text-white",children:Yz[t]}),w.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[w.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Ye[t].hex}}),w.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-2xl font-bold",style:{color:Ye[t].hex},children:e.toLocaleString()}),w.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function eF({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return w.jsxs(oe.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[w.jsx("div",{className:"w-8 flex justify-center",children:i?w.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:w.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):w.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),w.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${Ye[t.team].hex}20`,color:Ye[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&w.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),w.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),w.jsx("div",{className:"text-right",children:w.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function tF(){var m;const{teamScores:t,player:e,allPlayers:n}=Li(),r=Object.entries(t).filter(([g])=>Ye[g]).sort((g,_)=>_[1]-g[1]),o=Object.values(t).reduce((g,_)=>g+_,0)||1,a=[...n];!a.find(g=>g.name===e.name)&&e.team&&e.name&&a.push({id:"current",name:e.name,team:e.team,score:e.score||0,captures:((m=e.capturedArt)==null?void 0:m.length)||0});const h=a.sort((g,_)=>_.score-g.score),f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return w.jsxs(oe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:f,children:[w.jsx(oe.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:w.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[w.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:w.jsx(rv,{size:20,className:"text-white"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),w.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),w.jsxs("div",{className:"mb-8",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(fz,{size:16,className:"text-white/40"}),w.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),w.jsx("div",{className:"space-y-3",children:r.map(([g,_],E)=>w.jsx(Jz,{team:g,score:_,rank:E,totalScore:o},g))})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(nv,{size:16,className:"text-white/40"}),w.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),w.jsx("div",{className:"space-y-2",children:h.map((g,_)=>w.jsx(eF,{player:g,rank:_,isCurrentPlayer:g.id==="current"},g.id))})]})]})}function nF(){var f,m;const{player:t,artPoints:e,resetAll:n}=Li(),[i,r]=D.useState(!1),o=(e==null?void 0:e.filter(g=>t.capturedArt.includes(g.id)))||[],a=t.team?Ye[t.team].hex:"#64748b",u=t.team==="red"?"Red Team":"Blue Team",h=async()=>{if(!i){r(!0);try{const g=["red","blue"];let _=0,E=0;for(const k of aa){const b=g[Math.floor(Math.random()*g.length)],V=Ju(k);b==="red"?_+=V:E+=V,await $r(Xi(pn,"streetart-captures",k.id),{artId:k.id,capturedBy:b,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:V,isFirstCapture:!0,isRecapture:!1})}await $r(Xi(pn,"streetart-teams","red"),{score:_},{merge:!0}),await $r(Xi(pn,"streetart-teams","blue"),{score:E},{merge:!0})}catch(g){console.error("Failed to randomize:",g)}r(!1)}};return w.jsxs(oe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx(oe.div,{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${a}, ${a}50)`},whileHover:{scale:1.05},children:w.jsx("span",{className:"text-3xl font-black text-white",children:((m=(f=t.name)==null?void 0:f.charAt(0))==null?void 0:m.toUpperCase())||"?"})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:t.name}),w.jsx("p",{className:"text-sm",style:{color:a},children:u})]}),w.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[w.jsxs(oe.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#eab30815",border:"1px solid #eab30830"},whileHover:{scale:1.02},children:[w.jsx(rv,{size:24,className:"mx-auto mb-2 text-yellow-500"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),w.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Score"})]}),w.jsxs(oe.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#22c55e15",border:"1px solid #22c55e30"},whileHover:{scale:1.02},children:[w.jsx(iv,{size:24,className:"mx-auto mb-2 text-green-500"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:t.captureCount||o.length}),w.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Captures"})]}),w.jsxs(oe.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#f9731615",border:"1px solid #f9731630"},whileHover:{scale:1.02},children:[w.jsx(nv,{size:24,className:"mx-auto mb-2 text-orange-500"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:t.maxStreak||0}),w.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Best Streak"})]})]}),w.jsxs("div",{className:"mb-8",children:[w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Lifetime Stats"}),w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-bold text-white",children:t.recaptureCount||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Recaptures"})]})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-bold text-white",children:t.firstCaptureCount||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"First Captures"})]})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsxs("p",{className:"text-lg font-bold text-white",children:[t.totalDistance?(t.totalDistance/1e3).toFixed(1):"0","km"]}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Distance Walked"})]})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-bold text-white",children:t.streak||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Current Streak"})]})]})]})]}),o.length>0&&w.jsxs("div",{className:"mb-8",children:[w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Your Captures"}),w.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.slice(0,8).map((g,_)=>w.jsx(oe.div,{className:"aspect-square rounded-xl flex items-center justify-center",style:{backgroundColor:`${a}20`,border:`1px solid ${a}30`},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:_*.05},children:w.jsx("span",{className:"text-lg",children:""})},g.id)),o.length>8&&w.jsx("div",{className:"aspect-square rounded-xl flex items-center justify-center bg-white/5",children:w.jsxs("span",{className:"text-xs text-white/40",children:["+",o.length-8]})})]})]}),w.jsxs("div",{className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(sv,{size:14,className:"text-purple-400"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Game Master"})]}),w.jsxs(oe.button,{onClick:h,disabled:i,className:"w-full p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 flex items-center gap-3 disabled:opacity-50",whileTap:{scale:.98},children:[w.jsx(oA,{size:20,className:"text-purple-400"}),w.jsx("span",{className:"text-sm text-purple-300",children:i?"Randomizing...":"Randomize All Territories"})]})]}),w.jsxs(oe.button,{onClick:n,className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center gap-2 text-white/40 hover:text-white/60 transition-colors",whileTap:{scale:.98},children:[w.jsx(sA,{size:14}),w.jsx("span",{className:"text-xs",children:"Reset Game Data"})]}),w.jsx("p",{className:"text-center text-[10px] text-white/20 mt-6",children:"Street Art CTF v1.2.0"})]})}const iF="123";function rF(){const t=xf(),{artPoints:e,allPlayers:n,teamScores:i}=Li(),[r,o]=D.useState(!1),[a,u]=D.useState(""),[h,f]=D.useState("all"),[m,g]=D.useState({}),[_,E]=D.useState(null);D.useEffect(()=>{sessionStorage.getItem("admin-auth")==="true"&&o(!0)},[]);const k=U=>{U.preventDefault(),a===iF?(o(!0),sessionStorage.setItem("admin-auth","true")):(E({type:"error",text:"Wrong password"}),setTimeout(()=>E(null),2e3))},b=(U,A)=>{E({type:U,text:A}),setTimeout(()=>E(null),3e3)},V=async(U,A)=>{g(T=>({...T,[U]:!0}));try{const T=A==="ghost"?"active":"ghost";await $r(Xi(pn,"streetart-captures",U),{status:T,statusUpdatedAt:new Date},{merge:!0}),b("success",`Point ${U} set to ${T}`)}catch(T){b("error","Failed to update: "+T.message),console.error(T)}g(T=>({...T,[U]:!1}))},R=async U=>{g(A=>({...A,[`reset-${U}`]:!0}));try{await om(Xi(pn,"streetart-captures",U)),b("success",`Ownership reset for ${U}`)}catch(A){b("error","Failed to reset ownership"),console.error(A)}g(A=>({...A,[`reset-${U}`]:!1}))},S=async()=>{if(confirm("Are you sure? This will reset ALL captures!")){g(U=>({...U,resetAll:!0}));try{const A=(await a1(xu(pn,"streetart-captures"))).docs.map(T=>om(T.ref));await Promise.all(A),b("success","All captures reset!")}catch(U){b("error","Failed to reset all captures"),console.error(U)}g(U=>({...U,resetAll:!1}))}},C=async()=>{if(confirm("Are you sure? This will delete ALL player data!")){g(U=>({...U,resetPlayers:!0}));try{const A=(await a1(xu(pn,"streetart-players"))).docs.map(T=>om(T.ref));await Promise.all(A),b("success","All players reset!")}catch(U){b("error","Failed to reset players"),console.error(U)}g(U=>({...U,resetPlayers:!1}))}},F=h==="all"?e:e.filter(U=>U.hood===h),G={total:e.length,captured:e.filter(U=>U.capturedBy).length,red:e.filter(U=>U.capturedBy==="red").length,blue:e.filter(U=>U.capturedBy==="blue").length,ghost:e.filter(U=>U.status==="ghost").length,players:n.length};return r?w.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] pb-24 overflow-y-auto",children:[w.jsx("div",{className:"sticky top-0 z-50 bg-[#0a0a0f]/90 backdrop-blur-xl border-b border-white/10 px-4 py-3",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2",children:w.jsx(Z6,{size:24,className:"text-white/70"})}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(k1,{size:18,className:"text-purple-400"}),w.jsx("span",{className:"font-bold",children:"God Mode"})]}),w.jsx("div",{className:"w-10"})]})}),_&&w.jsx(oe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:`fixed top-16 left-4 right-4 z-50 p-3 rounded-xl text-center text-sm font-medium ${_.type==="error"?"bg-red-500/90":"bg-green-500/90"}`,children:_.text}),w.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.total}),w.jsx("div",{className:"text-xs text-white/40",children:"Points"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-red-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-red-400",children:G.red}),w.jsx("div",{className:"text-xs text-red-400/60",children:"Red"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-blue-400",children:G.blue}),w.jsx("div",{className:"text-xs text-blue-400/60",children:"Blue"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-white/60",children:G.ghost}),w.jsx("div",{className:"text-xs text-white/40",children:"Ghost"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.players}),w.jsx("div",{className:"text-xs text-white/40",children:"Players"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.captured}),w.jsx("div",{className:"text-xs text-white/40",children:"Captured"})]})]}),w.jsxs("div",{className:"px-4 mb-6",children:[w.jsxs("h2",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[w.jsx(sv,{size:14}),"Danger Zone"]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("button",{onClick:S,disabled:m.resetAll,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetAll?w.jsx(Ih,{size:16,className:"animate-spin"}):w.jsx(dz,{size:16}),"Reset Captures"]}),w.jsxs("button",{onClick:C,disabled:m.resetPlayers,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetPlayers?w.jsx(Ih,{size:16,className:"animate-spin"}):w.jsx(ef,{size:16}),"Reset Players"]})]})]}),w.jsx("div",{className:"px-4 mb-4",children:w.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[w.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h==="all"?"bg-white text-black":"bg-white/10 text-white/60"}`,children:"All"}),Object.values(Jd).map(U=>w.jsx("button",{onClick:()=>f(U.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h===U.id?"bg-white text-black":"bg-white/10 text-white/60"}`,children:U.name},U.id))]})}),w.jsxs("div",{className:"px-4 space-y-2",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2",children:["Art Points (",F.length,")"]}),F.map(U=>{var T;const A=U.status==="ghost";return w.jsxs("div",{className:`p-4 rounded-xl border ${A?"bg-white/5 border-white/10 opacity-60":"bg-white/5 border-white/10"}`,children:[w.jsxs("div",{className:"flex items-start justify-between mb-2",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-medium",children:U.name}),A&&w.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-white/10 text-white/40",children:"GHOST"})]}),w.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[U.id,"  ",U.area,"  ",U.size,"  ",(T=eA[U.size])==null?void 0:T.points,"pts"]})]}),U.capturedBy&&w.jsx("div",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:U.capturedBy==="red"?"#ff6b6b20":"#4dabf720",color:U.capturedBy==="red"?"#ff6b6b":"#4dabf7"},children:U.capturedBy.toUpperCase()})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>V(U.id,U.status),disabled:m[U.id],className:`flex-1 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-1.5 ${A?"bg-green-500/20 text-green-400":"bg-white/10 text-white/60"}`,children:m[U.id]?w.jsx(Ih,{size:14,className:"animate-spin"}):A?w.jsxs(w.Fragment,{children:[w.jsx(nz,{size:14})," Make Active"]}):w.jsxs(w.Fragment,{children:[w.jsx(rA,{size:14})," Make Ghost"]})}),U.capturedBy&&w.jsx("button",{onClick:()=>R(U.id),disabled:m[`reset-${U.id}`],className:"py-2 px-3 rounded-lg bg-white/10 text-white/60 text-xs font-medium flex items-center gap-1.5",children:m[`reset-${U.id}`]?w.jsx(Ih,{size:14,className:"animate-spin"}):w.jsxs(w.Fragment,{children:[w.jsx(gz,{size:14})," Reset"]})})]})]},U.id)})]}),w.jsxs("div",{className:"px-4 mt-8",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2 flex items-center gap-2",children:[w.jsx(ef,{size:14}),"Players (",n.length,")"]}),w.jsx("div",{className:"space-y-2",children:n.map(U=>w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("div",{className:"font-medium",children:U.name}),w.jsxs("div",{className:"text-xs text-white/40",children:[U.captures||0," captures"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-sm font-bold",children:U.score||0}),w.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:U.team==="red"?"#ff6b6b":"#4dabf7"}})]})]},U.id))})]})]}):w.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-6",children:w.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-purple-500/20 flex items-center justify-center",children:w.jsx(k1,{size:32,className:"text-purple-400"})}),w.jsx("h1",{className:"text-2xl font-bold",children:"Admin Access"}),w.jsx("p",{className:"text-white/40 text-sm mt-1",children:"God Mode Panel"})]}),w.jsxs("form",{onSubmit:k,className:"space-y-4",children:[w.jsx("input",{type:"password",value:a,onChange:U=>u(U.target.value),placeholder:"Enter password...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-center focus:outline-none focus:border-purple-500/50"}),w.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-purple-500 text-white font-bold",children:"Enter"})]}),_&&w.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 p-3 rounded-lg text-center text-sm ${_.type==="error"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:_.text}),w.jsx("button",{onClick:()=>t(-1),className:"mt-6 w-full py-2 text-white/40 text-sm",children:" Back"})]})})}const sF=[{path:"/",icon:rz,label:"Home"},{path:"/map",icon:Zg,label:"Map"},{path:"/scanner",icon:lz,label:"Scan"},{path:"/leaderboard",icon:rv,label:"Ranks"},{path:"/profile",icon:pz,label:"You"}];function oF(){return w.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[w.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),w.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:sF.map(({path:t,icon:e,label:n})=>w.jsx(TR,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>w.jsxs(oe.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&w.jsx(oe.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),w.jsx(oe.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:w.jsx(e,{size:20,strokeWidth:i?2.5:2})}),w.jsx(oe.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function aF({color:t}){const e=Array.from({length:12},(n,i)=>({id:i,angle:i/12*360,delay:i*.02}));return w.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.map(n=>w.jsx(oe.div,{className:"absolute left-1/2 top-1/2 w-3 h-3 rounded-full",style:{backgroundColor:t},initial:{x:0,y:0,opacity:1,scale:1},animate:{x:Math.cos(n.angle*Math.PI/180)*150,y:Math.sin(n.angle*Math.PI/180)*150,opacity:0,scale:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"}},n.id))})}function lF(){var o;const{captureNotification:t}=Li();if(!t)return null;const e=((o=Ye[t.team])==null?void 0:o.hex)||"#888",n=t.team==="red"?"RED":"BLUE",i=t.points||100,r=t.streak||0;return w.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden",children:[w.jsx(oe.div,{className:"absolute inset-0",style:{backgroundColor:e},initial:{opacity:.3},animate:{opacity:[.3,.15,.2]},transition:{duration:.5}}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Array.from({length:8}).map((a,u)=>w.jsx(oe.div,{className:"absolute w-1 origin-bottom",style:{backgroundColor:e,height:"50vh",transform:`rotate(${u*45}deg)`,opacity:.2},initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.3,delay:u*.02}},u))}),w.jsxs(oe.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},exit:{scale:.5,opacity:0},transition:{type:"spring",damping:12,stiffness:200},className:"relative text-center p-8",children:[w.jsx(aF,{color:e}),w.jsxs(oe.div,{className:"relative w-28 h-28 mx-auto mb-4",animate:{scale:[1,1.1,1]},transition:{duration:.5,repeat:2},children:[w.jsx("div",{className:"absolute inset-0 rounded-full blur-xl",style:{backgroundColor:e,opacity:.5}}),w.jsx("div",{className:"relative w-full h-full rounded-full flex items-center justify-center",style:{backgroundColor:e},children:t.isRecapture?w.jsx(aA,{size:56,className:"text-white"}):w.jsx(iA,{size:56,className:"text-white"})})]}),w.jsxs(oe.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[w.jsx("h1",{className:"text-4xl font-black text-white tracking-tight mb-1",children:t.isRecapture?"STOLEN!":"CAPTURED!"}),w.jsx("p",{className:"text-lg font-semibold text-white/80",children:t.artName})]}),w.jsxs(oe.div,{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"rgba(0,0,0,0.4)"},initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:[w.jsx(iv,{size:20,className:"text-white"}),w.jsxs("span",{className:"text-2xl font-black text-white",children:["+",i]}),r>1&&w.jsxs("span",{className:"flex items-center gap-1 text-orange-400 font-bold",children:[w.jsx(nv,{size:18}),r,"x"]})]}),w.jsxs(oe.div,{className:"mt-4 flex items-center justify-center gap-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[w.jsx("span",{className:"text-white/60 text-sm",children:"by"}),w.jsx("span",{className:"font-bold text-white",children:t.playerName}),w.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-black",style:{backgroundColor:e},children:n})]})]})]})}function Ah({children:t}){const{player:e}=Li();return e.team&&e.name&&e.name!=="Street Artist"?t:w.jsx(iP,{to:"/onboarding",replace:!0})}function uF(){const t=vo(),{player:e}=Li(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding"||t.pathname==="/admin";return w.jsxs("div",{className:"h-full w-full flex flex-col",children:[w.jsx(Na,{children:w.jsx(lF,{})}),w.jsx(Na,{mode:"wait",children:w.jsxs(cR,{location:t,children:[w.jsx(kr,{path:"/onboarding",element:w.jsx(wz,{})}),w.jsx(kr,{path:"/",element:n?w.jsx(Ez,{}):w.jsx(iP,{to:"/onboarding",replace:!0})}),w.jsx(kr,{path:"/map",element:w.jsx(Ah,{children:w.jsx(Qz,{})})}),w.jsx(kr,{path:"/scanner",element:w.jsx(Ah,{children:w.jsx(Xz,{})})}),w.jsx(kr,{path:"/leaderboard",element:w.jsx(Ah,{children:w.jsx(tF,{})})}),w.jsx(kr,{path:"/profile",element:w.jsx(Ah,{children:w.jsx(nF,{})})}),w.jsx(kr,{path:"/admin",element:w.jsx(rF,{})})]},t.pathname)}),!i&&n&&w.jsx(oF,{})]})}function cF(){return w.jsx(W6,{children:w.jsx(uF,{})})}fm.createRoot(document.getElementById("root")).render(w.jsx(ro.StrictMode,{children:w.jsx(_R,{children:w.jsx(cF,{})})}));
