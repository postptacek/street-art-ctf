function ZA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var KA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U1={exports:{}},Xd={},H1={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zu=Symbol.for("react.element"),QA=Symbol.for("react.portal"),YA=Symbol.for("react.fragment"),XA=Symbol.for("react.strict_mode"),JA=Symbol.for("react.profiler"),ek=Symbol.for("react.provider"),tk=Symbol.for("react.context"),nk=Symbol.for("react.forward_ref"),ik=Symbol.for("react.suspense"),rk=Symbol.for("react.memo"),sk=Symbol.for("react.lazy"),Mv=Symbol.iterator;function ok(t){return t===null||typeof t!="object"?null:(t=Mv&&t[Mv]||t["@@iterator"],typeof t=="function"?t:null)}var W1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$1=Object.assign,q1={};function Xa(t,e,n){this.props=t,this.context=e,this.refs=q1,this.updater=n||W1}Xa.prototype.isReactComponent={};Xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G1(){}G1.prototype=Xa.prototype;function e_(t,e,n){this.props=t,this.context=e,this.refs=q1,this.updater=n||W1}var t_=e_.prototype=new G1;t_.constructor=e_;$1(t_,Xa.prototype);t_.isPureReactComponent=!0;var Ov=Array.isArray,Z1=Object.prototype.hasOwnProperty,n_={current:null},K1={key:!0,ref:!0,__self:!0,__source:!0};function Q1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Z1.call(e,i)&&!K1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Zu,type:t,key:o,ref:a,props:r,_owner:n_.current}}function ak(t,e){return{$$typeof:Zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function i_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zu}function lk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dv=/\/+/g;function cp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lk(""+t.key):e.toString(36)}function Eh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Zu:case QA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+cp(a,0):i,Ov(r)?(n="",t!=null&&(n=t.replace(Dv,"$&/")+"/"),Eh(r,e,n,"",function(f){return f})):r!=null&&(i_(r)&&(r=ak(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Dv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Ov(t))for(var u=0;u<t.length;u++){o=t[u];var c=i+cp(o,u);a+=Eh(o,e,n,c,r)}else if(c=ok(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=i+cp(o,u++),a+=Eh(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Gc(t,e,n){if(t==null)return t;var i=[],r=0;return Eh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function uk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Ph={transition:null},ck={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Ph,ReactCurrentOwner:n_};function Y1(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Gc,forEach:function(t,e,n){Gc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gc(t,function(){e++}),e},toArray:function(t){return Gc(t,function(e){return e})||[]},only:function(t){if(!i_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Xa;Ie.Fragment=YA;Ie.Profiler=JA;Ie.PureComponent=e_;Ie.StrictMode=XA;Ie.Suspense=ik;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ck;Ie.act=Y1;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=$1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=n_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Z1.call(e,c)&&!K1.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Zu,type:t.type,key:r,ref:o,props:i,_owner:a}};Ie.createContext=function(t){return t={$$typeof:tk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ek,_context:t},t.Consumer=t};Ie.createElement=Q1;Ie.createFactory=function(t){var e=Q1.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:nk,render:t}};Ie.isValidElement=i_;Ie.lazy=function(t){return{$$typeof:sk,_payload:{_status:-1,_result:t},_init:uk}};Ie.memo=function(t,e){return{$$typeof:rk,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Ph.transition;Ph.transition={};try{t()}finally{Ph.transition=e}};Ie.unstable_act=Y1;Ie.useCallback=function(t,e){return Jt.current.useCallback(t,e)};Ie.useContext=function(t){return Jt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Jt.current.useEffect(t,e)};Ie.useId=function(){return Jt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Jt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};Ie.useRef=function(t){return Jt.current.useRef(t)};Ie.useState=function(t){return Jt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Jt.current.useTransition()};Ie.version="18.3.1";H1.exports=Ie;var F=H1.exports;const no=z1(F),hk=ZA({__proto__:null,default:no},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dk=F,fk=Symbol.for("react.element"),pk=Symbol.for("react.fragment"),mk=Object.prototype.hasOwnProperty,gk=dk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_k={key:!0,ref:!0,__self:!0,__source:!0};function X1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)mk.call(e,i)&&!_k.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:fk,type:t,key:o,ref:a,props:r,_owner:gk.current}}Xd.Fragment=pk;Xd.jsx=X1;Xd.jsxs=X1;U1.exports=Xd;var x=U1.exports,gm={},J1={exports:{}},En={},ex={exports:{}},tx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ae){var J=G.length;G.push(ae);e:for(;0<J;){var te=J-1>>>1,xe=G[te];if(0<r(xe,ae))G[te]=ae,G[J]=xe,J=te;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ae=G[0],J=G.pop();if(J!==ae){G[0]=J;e:for(var te=0,xe=G.length,Ge=xe>>>1;te<Ge;){var ke=2*(te+1)-1,Ee=G[ke],de=ke+1,lt=G[de];if(0>r(Ee,J))de<xe&&0>r(lt,Ee)?(G[te]=lt,G[de]=J,te=de):(G[te]=Ee,G[ke]=J,te=ke);else if(de<xe&&0>r(lt,J))G[te]=lt,G[de]=J,te=de;else break e}}return ae}function r(G,ae){var J=G.sortIndex-ae.sortIndex;return J!==0?J:G.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],f=[],m=1,g=null,y=3,T=!1,b=!1,k=!1,D=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var ae=n(f);ae!==null;){if(ae.callback===null)i(f);else if(ae.startTime<=G)i(f),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=n(f)}}function B(G){if(k=!1,S(G),!b)if(n(c)!==null)b=!0,ce(q);else{var ae=n(f);ae!==null&&Ae(B,ae.startTime-G)}}function q(G,ae){b=!1,k&&(k=!1,C(I),I=-1),T=!0;var J=y;try{for(S(ae),g=n(c);g!==null&&(!(g.expirationTime>ae)||G&&!V());){var te=g.callback;if(typeof te=="function"){g.callback=null,y=g.priorityLevel;var xe=te(g.expirationTime<=ae);ae=t.unstable_now(),typeof xe=="function"?g.callback=xe:g===n(c)&&i(c),S(ae)}else i(c);g=n(c)}if(g!==null)var Ge=!0;else{var ke=n(f);ke!==null&&Ae(B,ke.startTime-ae),Ge=!1}return Ge}finally{g=null,y=J,T=!1}}var Z=!1,R=null,I=-1,N=5,O=-1;function V(){return!(t.unstable_now()-O<N)}function z(){if(R!==null){var G=t.unstable_now();O=G;var ae=!0;try{ae=R(!0,G)}finally{ae?M():(Z=!1,R=null)}}else Z=!1}var M;if(typeof P=="function")M=function(){P(z)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Ce=ne.port2;ne.port1.onmessage=z,M=function(){Ce.postMessage(null)}}else M=function(){D(z,0)};function ce(G){R=G,Z||(Z=!0,M())}function Ae(G,ae){I=D(function(){G(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){b||T||(b=!0,ce(q))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var ae=3;break;default:ae=y}var J=y;y=ae;try{return G()}finally{y=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=y;y=G;try{return ae()}finally{y=J}},t.unstable_scheduleCallback=function(G,ae,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,G){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=J+xe,G={id:m++,callback:ae,priorityLevel:G,startTime:J,expirationTime:xe,sortIndex:-1},J>te?(G.sortIndex=J,e(f,G),n(c)===null&&G===n(f)&&(k?(C(I),I=-1):k=!0,Ae(B,J-te))):(G.sortIndex=xe,e(c,G),b||T||(b=!0,ce(q))),G},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(G){var ae=y;return function(){var J=y;y=ae;try{return G.apply(this,arguments)}finally{y=J}}}})(tx);ex.exports=tx;var yk=ex.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk=F,Tn=yk;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nx=new Set,yu={};function po(t,e){Da(t,e),Da(t+"Capture",e)}function Da(t,e){for(yu[t]=e,t=0;t<e.length;t++)nx.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_m=Object.prototype.hasOwnProperty,wk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vv={},jv={};function Tk(t){return _m.call(jv,t)?!0:_m.call(Vv,t)?!1:wk.test(t)?jv[t]=!0:(Vv[t]=!0,!1)}function xk(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ek(t,e,n,i){if(e===null||typeof e>"u"||xk(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var r_=/[\-:]([a-z])/g;function s_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(r_,s_);Ot[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(r_,s_);Ot[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(r_,s_);Ot[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function o_(t,e,n,i){var r=Ot.hasOwnProperty(e)?Ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ek(e,n,r,i)&&(n=null),i||r===null?Tk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var fr=vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zc=Symbol.for("react.element"),oa=Symbol.for("react.portal"),aa=Symbol.for("react.fragment"),a_=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),ix=Symbol.for("react.provider"),rx=Symbol.for("react.context"),l_=Symbol.for("react.forward_ref"),vm=Symbol.for("react.suspense"),wm=Symbol.for("react.suspense_list"),u_=Symbol.for("react.memo"),kr=Symbol.for("react.lazy"),sx=Symbol.for("react.offscreen"),Fv=Symbol.iterator;function Ml(t){return t===null||typeof t!="object"?null:(t=Fv&&t[Fv]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,hp;function Wl(t){if(hp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hp=e&&e[1]||""}return`
`+hp+t}var dp=!1;function fp(t,e){if(!t||dp)return"";dp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{dp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wl(t):""}function Pk(t){switch(t.tag){case 5:return Wl(t.type);case 16:return Wl("Lazy");case 13:return Wl("Suspense");case 19:return Wl("SuspenseList");case 0:case 2:case 15:return t=fp(t.type,!1),t;case 11:return t=fp(t.type.render,!1),t;case 1:return t=fp(t.type,!0),t;default:return""}}function Tm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case aa:return"Fragment";case oa:return"Portal";case ym:return"Profiler";case a_:return"StrictMode";case vm:return"Suspense";case wm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rx:return(t.displayName||"Context")+".Consumer";case ix:return(t._context.displayName||"Context")+".Provider";case l_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case u_:return e=t.displayName||null,e!==null?e:Tm(t.type)||"Memo";case kr:e=t._payload,t=t._init;try{return Tm(t(e))}catch{}}return null}function Sk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tm(e);case 8:return e===a_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ox(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ik(t){var e=ox(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kc(t){t._valueTracker||(t._valueTracker=Ik(t))}function ax(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=ox(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Gh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xm(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lx(t,e){e=e.checked,e!=null&&o_(t,"checked",e,!1)}function Em(t,e){lx(t,e);var n=rs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pm(t,e.type,rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pm(t,e,n){(e!=="number"||Gh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $l=Array.isArray;function Ea(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+rs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Sm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if($l(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rs(n)}}function ux(t,e){var n=rs(e.value),i=rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Hv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Im(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qc,hx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qc=Qc||document.createElement("div"),Qc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ck=["Webkit","ms","Moz","O"];Object.keys(Jl).forEach(function(t){Ck.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jl[e]=Jl[t]})});function dx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jl.hasOwnProperty(t)&&Jl[t]?(""+e).trim():e+"px"}function fx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=dx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Ak=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cm(t,e){if(e){if(Ak[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Am(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var km=null;function c_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bm=null,Pa=null,Sa=null;function Wv(t){if(t=Yu(t)){if(typeof bm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=rf(e),bm(t.stateNode,t.type,e))}}function px(t){Pa?Sa?Sa.push(t):Sa=[t]:Pa=t}function mx(){if(Pa){var t=Pa,e=Sa;if(Sa=Pa=null,Wv(t),e)for(t=0;t<e.length;t++)Wv(e[t])}}function gx(t,e){return t(e)}function _x(){}var pp=!1;function yx(t,e,n){if(pp)return t(e,n);pp=!0;try{return gx(t,e,n)}finally{pp=!1,(Pa!==null||Sa!==null)&&(_x(),mx())}}function wu(t,e){var n=t.stateNode;if(n===null)return null;var i=rf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Rm=!1;if(ir)try{var Ol={};Object.defineProperty(Ol,"passive",{get:function(){Rm=!0}}),window.addEventListener("test",Ol,Ol),window.removeEventListener("test",Ol,Ol)}catch{Rm=!1}function kk(t,e,n,i,r,o,a,u,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var eu=!1,Zh=null,Kh=!1,Lm=null,bk={onError:function(t){eu=!0,Zh=t}};function Rk(t,e,n,i,r,o,a,u,c){eu=!1,Zh=null,kk.apply(bk,arguments)}function Lk(t,e,n,i,r,o,a,u,c){if(Rk.apply(this,arguments),eu){if(eu){var f=Zh;eu=!1,Zh=null}else throw Error(X(198));Kh||(Kh=!0,Lm=f)}}function mo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $v(t){if(mo(t)!==t)throw Error(X(188))}function Nk(t){var e=t.alternate;if(!e){if(e=mo(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return $v(r),t;if(o===i)return $v(r),e;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function wx(t){return t=Nk(t),t!==null?Tx(t):null}function Tx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tx(t);if(e!==null)return e;t=t.sibling}return null}var xx=Tn.unstable_scheduleCallback,qv=Tn.unstable_cancelCallback,Mk=Tn.unstable_shouldYield,Ok=Tn.unstable_requestPaint,ht=Tn.unstable_now,Dk=Tn.unstable_getCurrentPriorityLevel,h_=Tn.unstable_ImmediatePriority,Ex=Tn.unstable_UserBlockingPriority,Qh=Tn.unstable_NormalPriority,Vk=Tn.unstable_LowPriority,Px=Tn.unstable_IdlePriority,Jd=null,_i=null;function jk(t){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(Jd,t,void 0,(t.current.flags&128)===128)}catch{}}var ti=Math.clz32?Math.clz32:zk,Fk=Math.log,Bk=Math.LN2;function zk(t){return t>>>=0,t===0?32:31-(Fk(t)/Bk|0)|0}var Yc=64,Xc=4194304;function ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=ql(u):(o&=a,o!==0&&(i=ql(o)))}else a=n&~r,a!==0?i=ql(a):o!==0&&(i=ql(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ti(e),r=1<<n,i|=t[n],e&=~r;return i}function Uk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ti(o),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=Uk(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function Nm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sx(){var t=Yc;return Yc<<=1,!(Yc&4194240)&&(Yc=64),t}function mp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ku(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ti(e),t[e]=n}function Wk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ti(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function d_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ti(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ue=0;function Ix(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cx,f_,Ax,kx,bx,Mm=!1,Jc=[],Ur=null,Hr=null,Wr=null,Tu=new Map,xu=new Map,Lr=[],$k="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gv(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(e.pointerId)}}function Dl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Yu(e),e!==null&&f_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function qk(t,e,n,i,r){switch(e){case"focusin":return Ur=Dl(Ur,t,e,n,i,r),!0;case"dragenter":return Hr=Dl(Hr,t,e,n,i,r),!0;case"mouseover":return Wr=Dl(Wr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Tu.set(o,Dl(Tu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,xu.set(o,Dl(xu.get(o)||null,t,e,n,i,r)),!0}return!1}function Rx(t){var e=qs(t.target);if(e!==null){var n=mo(e);if(n!==null){if(e=n.tag,e===13){if(e=vx(n),e!==null){t.blockedOn=e,bx(t.priority,function(){Ax(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Om(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);km=i,n.target.dispatchEvent(i),km=null}else return e=Yu(n),e!==null&&f_(e),t.blockedOn=n,!1;e.shift()}return!0}function Zv(t,e,n){Sh(t)&&n.delete(e)}function Gk(){Mm=!1,Ur!==null&&Sh(Ur)&&(Ur=null),Hr!==null&&Sh(Hr)&&(Hr=null),Wr!==null&&Sh(Wr)&&(Wr=null),Tu.forEach(Zv),xu.forEach(Zv)}function Vl(t,e){t.blockedOn===e&&(t.blockedOn=null,Mm||(Mm=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,Gk)))}function Eu(t){function e(r){return Vl(r,t)}if(0<Jc.length){Vl(Jc[0],t);for(var n=1;n<Jc.length;n++){var i=Jc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ur!==null&&Vl(Ur,t),Hr!==null&&Vl(Hr,t),Wr!==null&&Vl(Wr,t),Tu.forEach(e),xu.forEach(e),n=0;n<Lr.length;n++)i=Lr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)Rx(n),n.blockedOn===null&&Lr.shift()}var Ia=fr.ReactCurrentBatchConfig,Xh=!0;function Zk(t,e,n,i){var r=Ue,o=Ia.transition;Ia.transition=null;try{Ue=1,p_(t,e,n,i)}finally{Ue=r,Ia.transition=o}}function Kk(t,e,n,i){var r=Ue,o=Ia.transition;Ia.transition=null;try{Ue=4,p_(t,e,n,i)}finally{Ue=r,Ia.transition=o}}function p_(t,e,n,i){if(Xh){var r=Om(t,e,n,i);if(r===null)Sp(t,e,i,Jh,n),Gv(t,i);else if(qk(r,t,e,n,i))i.stopPropagation();else if(Gv(t,i),e&4&&-1<$k.indexOf(t)){for(;r!==null;){var o=Yu(r);if(o!==null&&Cx(o),o=Om(t,e,n,i),o===null&&Sp(t,e,i,Jh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Sp(t,e,i,null,n)}}var Jh=null;function Om(t,e,n,i){if(Jh=null,t=c_(i),t=qs(t),t!==null)if(e=mo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jh=t,null}function Lx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dk()){case h_:return 1;case Ex:return 4;case Qh:case Vk:return 16;case Px:return 536870912;default:return 16}default:return 16}}var jr=null,m_=null,Ih=null;function Nx(){if(Ih)return Ih;var t,e=m_,n=e.length,i,r="value"in jr?jr.value:jr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Ih=r.slice(t,1<i?1-i:void 0)}function Ch(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eh(){return!0}function Kv(){return!1}function Pn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?eh:Kv,this.isPropagationStopped=Kv,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eh)},persist:function(){},isPersistent:eh}),e}var Ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g_=Pn(Ja),Qu=rt({},Ja,{view:0,detail:0}),Qk=Pn(Qu),gp,_p,jl,ef=rt({},Qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:__,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jl&&(jl&&t.type==="mousemove"?(gp=t.screenX-jl.screenX,_p=t.screenY-jl.screenY):_p=gp=0,jl=t),gp)},movementY:function(t){return"movementY"in t?t.movementY:_p}}),Qv=Pn(ef),Yk=rt({},ef,{dataTransfer:0}),Xk=Pn(Yk),Jk=rt({},Qu,{relatedTarget:0}),yp=Pn(Jk),eb=rt({},Ja,{animationName:0,elapsedTime:0,pseudoElement:0}),tb=Pn(eb),nb=rt({},Ja,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ib=Pn(nb),rb=rt({},Ja,{data:0}),Yv=Pn(rb),sb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ob={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ab={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ab[t])?!!e[t]:!1}function __(){return lb}var ub=rt({},Qu,{key:function(t){if(t.key){var e=sb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ch(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ob[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:__,charCode:function(t){return t.type==="keypress"?Ch(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ch(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cb=Pn(ub),hb=rt({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xv=Pn(hb),db=rt({},Qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:__}),fb=Pn(db),pb=rt({},Ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),mb=Pn(pb),gb=rt({},ef,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_b=Pn(gb),yb=[9,13,27,32],y_=ir&&"CompositionEvent"in window,tu=null;ir&&"documentMode"in document&&(tu=document.documentMode);var vb=ir&&"TextEvent"in window&&!tu,Mx=ir&&(!y_||tu&&8<tu&&11>=tu),Jv=" ",e0=!1;function Ox(t,e){switch(t){case"keyup":return yb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var la=!1;function wb(t,e){switch(t){case"compositionend":return Dx(e);case"keypress":return e.which!==32?null:(e0=!0,Jv);case"textInput":return t=e.data,t===Jv&&e0?null:t;default:return null}}function Tb(t,e){if(la)return t==="compositionend"||!y_&&Ox(t,e)?(t=Nx(),Ih=m_=jr=null,la=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mx&&e.locale!=="ko"?null:e.data;default:return null}}var xb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xb[t.type]:e==="textarea"}function Vx(t,e,n,i){px(i),e=ed(e,"onChange"),0<e.length&&(n=new g_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var nu=null,Pu=null;function Eb(t){Zx(t,0)}function tf(t){var e=ha(t);if(ax(e))return t}function Pb(t,e){if(t==="change")return e}var jx=!1;if(ir){var vp;if(ir){var wp="oninput"in document;if(!wp){var n0=document.createElement("div");n0.setAttribute("oninput","return;"),wp=typeof n0.oninput=="function"}vp=wp}else vp=!1;jx=vp&&(!document.documentMode||9<document.documentMode)}function i0(){nu&&(nu.detachEvent("onpropertychange",Fx),Pu=nu=null)}function Fx(t){if(t.propertyName==="value"&&tf(Pu)){var e=[];Vx(e,Pu,t,c_(t)),yx(Eb,e)}}function Sb(t,e,n){t==="focusin"?(i0(),nu=e,Pu=n,nu.attachEvent("onpropertychange",Fx)):t==="focusout"&&i0()}function Ib(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tf(Pu)}function Cb(t,e){if(t==="click")return tf(e)}function Ab(t,e){if(t==="input"||t==="change")return tf(e)}function kb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ii=typeof Object.is=="function"?Object.is:kb;function Su(t,e){if(ii(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!_m.call(e,r)||!ii(t[r],e[r]))return!1}return!0}function r0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function s0(t,e){var n=r0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r0(n)}}function Bx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zx(){for(var t=window,e=Gh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gh(t.document)}return e}function v_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bb(t){var e=zx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bx(n.ownerDocument.documentElement,n)){if(i!==null&&v_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=s0(n,o);var a=s0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rb=ir&&"documentMode"in document&&11>=document.documentMode,ua=null,Dm=null,iu=null,Vm=!1;function o0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vm||ua==null||ua!==Gh(i)||(i=ua,"selectionStart"in i&&v_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),iu&&Su(iu,i)||(iu=i,i=ed(Dm,"onSelect"),0<i.length&&(e=new g_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ua)))}function th(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ca={animationend:th("Animation","AnimationEnd"),animationiteration:th("Animation","AnimationIteration"),animationstart:th("Animation","AnimationStart"),transitionend:th("Transition","TransitionEnd")},Tp={},Ux={};ir&&(Ux=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function nf(t){if(Tp[t])return Tp[t];if(!ca[t])return t;var e=ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ux)return Tp[t]=e[n];return t}var Hx=nf("animationend"),Wx=nf("animationiteration"),$x=nf("animationstart"),qx=nf("transitionend"),Gx=new Map,a0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(t,e){Gx.set(t,e),po(e,[t])}for(var xp=0;xp<a0.length;xp++){var Ep=a0[xp],Lb=Ep.toLowerCase(),Nb=Ep[0].toUpperCase()+Ep.slice(1);gs(Lb,"on"+Nb)}gs(Hx,"onAnimationEnd");gs(Wx,"onAnimationIteration");gs($x,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(qx,"onTransitionEnd");Da("onMouseEnter",["mouseout","mouseover"]);Da("onMouseLeave",["mouseout","mouseover"]);Da("onPointerEnter",["pointerout","pointerover"]);Da("onPointerLeave",["pointerout","pointerover"]);po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));po("onBeforeInput",["compositionend","keypress","textInput","paste"]);po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gl));function l0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Lk(i,e,void 0,t),t.currentTarget=null}function Zx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==o&&r.isPropagationStopped())break e;l0(r,u,f),o=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,f=u.currentTarget,u=u.listener,c!==o&&r.isPropagationStopped())break e;l0(r,u,f),o=c}}}if(Kh)throw t=Lm,Kh=!1,Lm=null,t}function Ze(t,e){var n=e[Um];n===void 0&&(n=e[Um]=new Set);var i=t+"__bubble";n.has(i)||(Kx(e,t,2,!1),n.add(i))}function Pp(t,e,n){var i=0;e&&(i|=4),Kx(n,t,i,e)}var nh="_reactListening"+Math.random().toString(36).slice(2);function Iu(t){if(!t[nh]){t[nh]=!0,nx.forEach(function(n){n!=="selectionchange"&&(Mb.has(n)||Pp(n,!1,t),Pp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nh]||(e[nh]=!0,Pp("selectionchange",!1,e))}}function Kx(t,e,n,i){switch(Lx(e)){case 1:var r=Zk;break;case 4:r=Kk;break;default:r=p_}n=r.bind(null,e,n,t),r=void 0,!Rm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Sp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=qs(u),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}u=u.parentNode}}i=i.return}yx(function(){var f=o,m=c_(n),g=[];e:{var y=Gx.get(t);if(y!==void 0){var T=g_,b=t;switch(t){case"keypress":if(Ch(n)===0)break e;case"keydown":case"keyup":T=cb;break;case"focusin":b="focus",T=yp;break;case"focusout":b="blur",T=yp;break;case"beforeblur":case"afterblur":T=yp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Xk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=fb;break;case Hx:case Wx:case $x:T=tb;break;case qx:T=mb;break;case"scroll":T=Qk;break;case"wheel":T=_b;break;case"copy":case"cut":case"paste":T=ib;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Xv}var k=(e&4)!==0,D=!k&&t==="scroll",C=k?y!==null?y+"Capture":null:y;k=[];for(var P=f,S;P!==null;){S=P;var B=S.stateNode;if(S.tag===5&&B!==null&&(S=B,C!==null&&(B=wu(P,C),B!=null&&k.push(Cu(P,B,S)))),D)break;P=P.return}0<k.length&&(y=new T(y,b,null,n,m),g.push({event:y,listeners:k}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",y&&n!==km&&(b=n.relatedTarget||n.fromElement)&&(qs(b)||b[rr]))break e;if((T||y)&&(y=m.window===m?m:(y=m.ownerDocument)?y.defaultView||y.parentWindow:window,T?(b=n.relatedTarget||n.toElement,T=f,b=b?qs(b):null,b!==null&&(D=mo(b),b!==D||b.tag!==5&&b.tag!==6)&&(b=null)):(T=null,b=f),T!==b)){if(k=Qv,B="onMouseLeave",C="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(k=Xv,B="onPointerLeave",C="onPointerEnter",P="pointer"),D=T==null?y:ha(T),S=b==null?y:ha(b),y=new k(B,P+"leave",T,n,m),y.target=D,y.relatedTarget=S,B=null,qs(m)===f&&(k=new k(C,P+"enter",b,n,m),k.target=S,k.relatedTarget=D,B=k),D=B,T&&b)t:{for(k=T,C=b,P=0,S=k;S;S=ea(S))P++;for(S=0,B=C;B;B=ea(B))S++;for(;0<P-S;)k=ea(k),P--;for(;0<S-P;)C=ea(C),S--;for(;P--;){if(k===C||C!==null&&k===C.alternate)break t;k=ea(k),C=ea(C)}k=null}else k=null;T!==null&&u0(g,y,T,k,!1),b!==null&&D!==null&&u0(g,D,b,k,!0)}}e:{if(y=f?ha(f):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var q=Pb;else if(t0(y))if(jx)q=Ab;else{q=Ib;var Z=Sb}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(q=Cb);if(q&&(q=q(t,f))){Vx(g,q,n,m);break e}Z&&Z(t,y,f),t==="focusout"&&(Z=y._wrapperState)&&Z.controlled&&y.type==="number"&&Pm(y,"number",y.value)}switch(Z=f?ha(f):window,t){case"focusin":(t0(Z)||Z.contentEditable==="true")&&(ua=Z,Dm=f,iu=null);break;case"focusout":iu=Dm=ua=null;break;case"mousedown":Vm=!0;break;case"contextmenu":case"mouseup":case"dragend":Vm=!1,o0(g,n,m);break;case"selectionchange":if(Rb)break;case"keydown":case"keyup":o0(g,n,m)}var R;if(y_)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else la?Ox(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Mx&&n.locale!=="ko"&&(la||I!=="onCompositionStart"?I==="onCompositionEnd"&&la&&(R=Nx()):(jr=m,m_="value"in jr?jr.value:jr.textContent,la=!0)),Z=ed(f,I),0<Z.length&&(I=new Yv(I,t,null,n,m),g.push({event:I,listeners:Z}),R?I.data=R:(R=Dx(n),R!==null&&(I.data=R)))),(R=vb?wb(t,n):Tb(t,n))&&(f=ed(f,"onBeforeInput"),0<f.length&&(m=new Yv("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=R))}Zx(g,e)})}function Cu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ed(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=wu(t,n),o!=null&&i.unshift(Cu(t,o,r)),o=wu(t,e),o!=null&&i.push(Cu(t,o,r))),t=t.return}return i}function ea(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function u0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&f!==null&&(u=f,r?(c=wu(n,o),c!=null&&a.unshift(Cu(n,c,u))):r||(c=wu(n,o),c!=null&&a.push(Cu(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Ob=/\r\n?/g,Db=/\u0000|\uFFFD/g;function c0(t){return(typeof t=="string"?t:""+t).replace(Ob,`
`).replace(Db,"")}function ih(t,e,n){if(e=c0(e),c0(t)!==e&&n)throw Error(X(425))}function td(){}var jm=null,Fm=null;function Bm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,Vb=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,jb=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(t){return h0.resolve(null).then(t).catch(Fb)}:zm;function Fb(t){setTimeout(function(){throw t})}function Ip(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Eu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Eu(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function d0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var el=Math.random().toString(36).slice(2),gi="__reactFiber$"+el,Au="__reactProps$"+el,rr="__reactContainer$"+el,Um="__reactEvents$"+el,Bb="__reactListeners$"+el,zb="__reactHandles$"+el;function qs(t){var e=t[gi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[gi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=d0(t);t!==null;){if(n=t[gi])return n;t=d0(t)}return e}t=n,n=t.parentNode}return null}function Yu(t){return t=t[gi]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function rf(t){return t[Au]||null}var Hm=[],da=-1;function _s(t){return{current:t}}function Ye(t){0>da||(t.current=Hm[da],Hm[da]=null,da--)}function $e(t,e){da++,Hm[da]=t.current,t.current=e}var ss={},$t=_s(ss),cn=_s(!1),io=ss;function Va(t,e){var n=t.type.contextTypes;if(!n)return ss;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function hn(t){return t=t.childContextTypes,t!=null}function nd(){Ye(cn),Ye($t)}function f0(t,e,n){if($t.current!==ss)throw Error(X(168));$e($t,e),$e(cn,n)}function Qx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,Sk(t)||"Unknown",r));return rt({},n,i)}function id(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ss,io=$t.current,$e($t,t),$e(cn,cn.current),!0}function p0(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=Qx(t,e,io),i.__reactInternalMemoizedMergedChildContext=t,Ye(cn),Ye($t),$e($t,t)):Ye(cn),$e(cn,n)}var Gi=null,sf=!1,Cp=!1;function Yx(t){Gi===null?Gi=[t]:Gi.push(t)}function Ub(t){sf=!0,Yx(t)}function ys(){if(!Cp&&Gi!==null){Cp=!0;var t=0,e=Ue;try{var n=Gi;for(Ue=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Gi=null,sf=!1}catch(r){throw Gi!==null&&(Gi=Gi.slice(t+1)),xx(h_,ys),r}finally{Ue=e,Cp=!1}}return null}var fa=[],pa=0,rd=null,sd=0,Mn=[],On=0,ro=null,Zi=1,Ki="";function Fs(t,e){fa[pa++]=sd,fa[pa++]=rd,rd=t,sd=e}function Xx(t,e,n){Mn[On++]=Zi,Mn[On++]=Ki,Mn[On++]=ro,ro=t;var i=Zi;t=Ki;var r=32-ti(i)-1;i&=~(1<<r),n+=1;var o=32-ti(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zi=1<<32-ti(e)+r|n<<r|i,Ki=o+t}else Zi=1<<o|n<<r|i,Ki=t}function w_(t){t.return!==null&&(Fs(t,1),Xx(t,1,0))}function T_(t){for(;t===rd;)rd=fa[--pa],fa[pa]=null,sd=fa[--pa],fa[pa]=null;for(;t===ro;)ro=Mn[--On],Mn[On]=null,Ki=Mn[--On],Mn[On]=null,Zi=Mn[--On],Mn[On]=null}var wn=null,vn=null,Je=!1,Yn=null;function Jx(t,e){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function m0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,vn=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ro!==null?{id:Zi,overflow:Ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,vn=null,!0):!1;default:return!1}}function Wm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $m(t){if(Je){var e=vn;if(e){var n=e;if(!m0(t,e)){if(Wm(t))throw Error(X(418));e=$r(n.nextSibling);var i=wn;e&&m0(t,e)?Jx(i,n):(t.flags=t.flags&-4097|2,Je=!1,wn=t)}}else{if(Wm(t))throw Error(X(418));t.flags=t.flags&-4097|2,Je=!1,wn=t}}}function g0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function rh(t){if(t!==wn)return!1;if(!Je)return g0(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bm(t.type,t.memoizedProps)),e&&(e=vn)){if(Wm(t))throw eE(),Error(X(418));for(;e;)Jx(t,e),e=$r(e.nextSibling)}if(g0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=$r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=wn?$r(t.stateNode.nextSibling):null;return!0}function eE(){for(var t=vn;t;)t=$r(t.nextSibling)}function ja(){vn=wn=null,Je=!1}function x_(t){Yn===null?Yn=[t]:Yn.push(t)}var Hb=fr.ReactCurrentBatchConfig;function Fl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function sh(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _0(t){var e=t._init;return e(t._payload)}function tE(t){function e(C,P){if(t){var S=C.deletions;S===null?(C.deletions=[P],C.flags|=16):S.push(P)}}function n(C,P){if(!t)return null;for(;P!==null;)e(C,P),P=P.sibling;return null}function i(C,P){for(C=new Map;P!==null;)P.key!==null?C.set(P.key,P):C.set(P.index,P),P=P.sibling;return C}function r(C,P){return C=Kr(C,P),C.index=0,C.sibling=null,C}function o(C,P,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<P?(C.flags|=2,P):S):(C.flags|=2,P)):(C.flags|=1048576,P)}function a(C){return t&&C.alternate===null&&(C.flags|=2),C}function u(C,P,S,B){return P===null||P.tag!==6?(P=Mp(S,C.mode,B),P.return=C,P):(P=r(P,S),P.return=C,P)}function c(C,P,S,B){var q=S.type;return q===aa?m(C,P,S.props.children,B,S.key):P!==null&&(P.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===kr&&_0(q)===P.type)?(B=r(P,S.props),B.ref=Fl(C,P,S),B.return=C,B):(B=Mh(S.type,S.key,S.props,null,C.mode,B),B.ref=Fl(C,P,S),B.return=C,B)}function f(C,P,S,B){return P===null||P.tag!==4||P.stateNode.containerInfo!==S.containerInfo||P.stateNode.implementation!==S.implementation?(P=Op(S,C.mode,B),P.return=C,P):(P=r(P,S.children||[]),P.return=C,P)}function m(C,P,S,B,q){return P===null||P.tag!==7?(P=Xs(S,C.mode,B,q),P.return=C,P):(P=r(P,S),P.return=C,P)}function g(C,P,S){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Mp(""+P,C.mode,S),P.return=C,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Zc:return S=Mh(P.type,P.key,P.props,null,C.mode,S),S.ref=Fl(C,null,P),S.return=C,S;case oa:return P=Op(P,C.mode,S),P.return=C,P;case kr:var B=P._init;return g(C,B(P._payload),S)}if($l(P)||Ml(P))return P=Xs(P,C.mode,S,null),P.return=C,P;sh(C,P)}return null}function y(C,P,S,B){var q=P!==null?P.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return q!==null?null:u(C,P,""+S,B);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zc:return S.key===q?c(C,P,S,B):null;case oa:return S.key===q?f(C,P,S,B):null;case kr:return q=S._init,y(C,P,q(S._payload),B)}if($l(S)||Ml(S))return q!==null?null:m(C,P,S,B,null);sh(C,S)}return null}function T(C,P,S,B,q){if(typeof B=="string"&&B!==""||typeof B=="number")return C=C.get(S)||null,u(P,C,""+B,q);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Zc:return C=C.get(B.key===null?S:B.key)||null,c(P,C,B,q);case oa:return C=C.get(B.key===null?S:B.key)||null,f(P,C,B,q);case kr:var Z=B._init;return T(C,P,S,Z(B._payload),q)}if($l(B)||Ml(B))return C=C.get(S)||null,m(P,C,B,q,null);sh(P,B)}return null}function b(C,P,S,B){for(var q=null,Z=null,R=P,I=P=0,N=null;R!==null&&I<S.length;I++){R.index>I?(N=R,R=null):N=R.sibling;var O=y(C,R,S[I],B);if(O===null){R===null&&(R=N);break}t&&R&&O.alternate===null&&e(C,R),P=o(O,P,I),Z===null?q=O:Z.sibling=O,Z=O,R=N}if(I===S.length)return n(C,R),Je&&Fs(C,I),q;if(R===null){for(;I<S.length;I++)R=g(C,S[I],B),R!==null&&(P=o(R,P,I),Z===null?q=R:Z.sibling=R,Z=R);return Je&&Fs(C,I),q}for(R=i(C,R);I<S.length;I++)N=T(R,C,I,S[I],B),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?I:N.key),P=o(N,P,I),Z===null?q=N:Z.sibling=N,Z=N);return t&&R.forEach(function(V){return e(C,V)}),Je&&Fs(C,I),q}function k(C,P,S,B){var q=Ml(S);if(typeof q!="function")throw Error(X(150));if(S=q.call(S),S==null)throw Error(X(151));for(var Z=q=null,R=P,I=P=0,N=null,O=S.next();R!==null&&!O.done;I++,O=S.next()){R.index>I?(N=R,R=null):N=R.sibling;var V=y(C,R,O.value,B);if(V===null){R===null&&(R=N);break}t&&R&&V.alternate===null&&e(C,R),P=o(V,P,I),Z===null?q=V:Z.sibling=V,Z=V,R=N}if(O.done)return n(C,R),Je&&Fs(C,I),q;if(R===null){for(;!O.done;I++,O=S.next())O=g(C,O.value,B),O!==null&&(P=o(O,P,I),Z===null?q=O:Z.sibling=O,Z=O);return Je&&Fs(C,I),q}for(R=i(C,R);!O.done;I++,O=S.next())O=T(R,C,I,O.value,B),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?I:O.key),P=o(O,P,I),Z===null?q=O:Z.sibling=O,Z=O);return t&&R.forEach(function(z){return e(C,z)}),Je&&Fs(C,I),q}function D(C,P,S,B){if(typeof S=="object"&&S!==null&&S.type===aa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Zc:e:{for(var q=S.key,Z=P;Z!==null;){if(Z.key===q){if(q=S.type,q===aa){if(Z.tag===7){n(C,Z.sibling),P=r(Z,S.props.children),P.return=C,C=P;break e}}else if(Z.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===kr&&_0(q)===Z.type){n(C,Z.sibling),P=r(Z,S.props),P.ref=Fl(C,Z,S),P.return=C,C=P;break e}n(C,Z);break}else e(C,Z);Z=Z.sibling}S.type===aa?(P=Xs(S.props.children,C.mode,B,S.key),P.return=C,C=P):(B=Mh(S.type,S.key,S.props,null,C.mode,B),B.ref=Fl(C,P,S),B.return=C,C=B)}return a(C);case oa:e:{for(Z=S.key;P!==null;){if(P.key===Z)if(P.tag===4&&P.stateNode.containerInfo===S.containerInfo&&P.stateNode.implementation===S.implementation){n(C,P.sibling),P=r(P,S.children||[]),P.return=C,C=P;break e}else{n(C,P);break}else e(C,P);P=P.sibling}P=Op(S,C.mode,B),P.return=C,C=P}return a(C);case kr:return Z=S._init,D(C,P,Z(S._payload),B)}if($l(S))return b(C,P,S,B);if(Ml(S))return k(C,P,S,B);sh(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,P!==null&&P.tag===6?(n(C,P.sibling),P=r(P,S),P.return=C,C=P):(n(C,P),P=Mp(S,C.mode,B),P.return=C,C=P),a(C)):n(C,P)}return D}var Fa=tE(!0),nE=tE(!1),od=_s(null),ad=null,ma=null,E_=null;function P_(){E_=ma=ad=null}function S_(t){var e=od.current;Ye(od),t._currentValue=e}function qm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ca(t,e){ad=t,E_=ma=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function zn(t){var e=t._currentValue;if(E_!==t)if(t={context:t,memoizedValue:e,next:null},ma===null){if(ad===null)throw Error(X(308));ma=t,ad.dependencies={lanes:0,firstContext:t}}else ma=ma.next=t;return e}var Gs=null;function I_(t){Gs===null?Gs=[t]:Gs.push(t)}function iE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,I_(e)):(n.next=r.next,r.next=n),e.interleaved=n,sr(t,i)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var br=!1;function C_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ji(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Oe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,sr(t,n)}return r=i.interleaved,r===null?(e.next=e,I_(i)):(e.next=r.next,r.next=e),i.interleaved=e,sr(t,n)}function Ah(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,d_(t,n)}}function y0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ld(t,e,n,i){var r=t.updateQueue;br=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,f=c.next;c.next=null,a===null?o=f:a.next=f,a=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=c))}if(o!==null){var g=r.baseState;a=0,m=f=c=null,u=o;do{var y=u.lane,T=u.eventTime;if((i&y)===y){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var b=t,k=u;switch(y=e,T=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){g=b.call(T,g,y);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,y=typeof b=="function"?b.call(T,g,y):b,y==null)break e;g=rt({},g,y);break e;case 2:br=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,y=r.effects,y===null?r.effects=[u]:y.push(u))}else T={eventTime:T,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,c=g):m=m.next=T,a|=y;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;y=u,u=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);if(m===null&&(c=g),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);oo|=a,t.lanes=a,t.memoizedState=g}}function v0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var Xu={},yi=_s(Xu),ku=_s(Xu),bu=_s(Xu);function Zs(t){if(t===Xu)throw Error(X(174));return t}function A_(t,e){switch($e(bu,e),$e(ku,t),$e(yi,Xu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Im(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Im(e,t)}Ye(yi),$e(yi,e)}function Ba(){Ye(yi),Ye(ku),Ye(bu)}function sE(t){Zs(bu.current);var e=Zs(yi.current),n=Im(e,t.type);e!==n&&($e(ku,t),$e(yi,n))}function k_(t){ku.current===t&&(Ye(yi),Ye(ku))}var et=_s(0);function ud(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ap=[];function b_(){for(var t=0;t<Ap.length;t++)Ap[t]._workInProgressVersionPrimary=null;Ap.length=0}var kh=fr.ReactCurrentDispatcher,kp=fr.ReactCurrentBatchConfig,so=0,nt=null,vt=null,kt=null,cd=!1,ru=!1,Ru=0,Wb=0;function jt(){throw Error(X(321))}function R_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ii(t[n],e[n]))return!1;return!0}function L_(t,e,n,i,r,o){if(so=o,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kh.current=t===null||t.memoizedState===null?Zb:Kb,t=n(i,r),ru){o=0;do{if(ru=!1,Ru=0,25<=o)throw Error(X(301));o+=1,kt=vt=null,e.updateQueue=null,kh.current=Qb,t=n(i,r)}while(ru)}if(kh.current=hd,e=vt!==null&&vt.next!==null,so=0,kt=vt=nt=null,cd=!1,e)throw Error(X(300));return t}function N_(){var t=Ru!==0;return Ru=0,t}function pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?nt.memoizedState=kt=t:kt=kt.next=t,kt}function Un(){if(vt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=kt===null?nt.memoizedState:kt.next;if(e!==null)kt=e,vt=t;else{if(t===null)throw Error(X(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},kt===null?nt.memoizedState=kt=t:kt=kt.next=t}return kt}function Lu(t,e){return typeof e=="function"?e(t):e}function bp(t){var e=Un(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=vt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,c=null,f=o;do{var m=f.lane;if((so&m)===m)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,nt.lanes|=m,oo|=m}f=f.next}while(f!==null&&f!==o);c===null?a=i:c.next=u,ii(i,e.memoizedState)||(un=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,nt.lanes|=o,oo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rp(t){var e=Un(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);ii(o,e.memoizedState)||(un=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function oE(){}function aE(t,e){var n=nt,i=Un(),r=e(),o=!ii(i.memoizedState,r);if(o&&(i.memoizedState=r,un=!0),i=i.queue,M_(cE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,Nu(9,uE.bind(null,n,i,r,e),void 0,null),bt===null)throw Error(X(349));so&30||lE(n,e,r)}return r}function lE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uE(t,e,n,i){e.value=n,e.getSnapshot=i,hE(e)&&dE(t)}function cE(t,e,n){return n(function(){hE(e)&&dE(t)})}function hE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ii(t,n)}catch{return!0}}function dE(t){var e=sr(t,1);e!==null&&ni(e,t,1,-1)}function w0(t){var e=pi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lu,lastRenderedState:t},e.queue=t,t=t.dispatch=Gb.bind(null,nt,t),[e.memoizedState,t]}function Nu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function fE(){return Un().memoizedState}function bh(t,e,n,i){var r=pi();nt.flags|=t,r.memoizedState=Nu(1|e,n,void 0,i===void 0?null:i)}function of(t,e,n,i){var r=Un();i=i===void 0?null:i;var o=void 0;if(vt!==null){var a=vt.memoizedState;if(o=a.destroy,i!==null&&R_(i,a.deps)){r.memoizedState=Nu(e,n,o,i);return}}nt.flags|=t,r.memoizedState=Nu(1|e,n,o,i)}function T0(t,e){return bh(8390656,8,t,e)}function M_(t,e){return of(2048,8,t,e)}function pE(t,e){return of(4,2,t,e)}function mE(t,e){return of(4,4,t,e)}function gE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _E(t,e,n){return n=n!=null?n.concat([t]):null,of(4,4,gE.bind(null,e,t),n)}function O_(){}function yE(t,e){var n=Un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&R_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function vE(t,e){var n=Un();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&R_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function wE(t,e,n){return so&21?(ii(n,e)||(n=Sx(),nt.lanes|=n,oo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function $b(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var i=kp.transition;kp.transition={};try{t(!1),e()}finally{Ue=n,kp.transition=i}}function TE(){return Un().memoizedState}function qb(t,e,n){var i=Zr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},xE(t))EE(e,n);else if(n=iE(t,e,n,i),n!==null){var r=Xt();ni(n,t,i,r),PE(n,e,i)}}function Gb(t,e,n){var i=Zr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(xE(t))EE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,ii(u,a)){var c=e.interleaved;c===null?(r.next=r,I_(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=iE(t,e,r,i),n!==null&&(r=Xt(),ni(n,t,i,r),PE(n,e,i))}}function xE(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function EE(t,e){ru=cd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,d_(t,n)}}var hd={readContext:zn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},Zb={readContext:zn,useCallback:function(t,e){return pi().memoizedState=[t,e===void 0?null:e],t},useContext:zn,useEffect:T0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bh(4194308,4,gE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return bh(4,2,t,e)},useMemo:function(t,e){var n=pi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=pi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=qb.bind(null,nt,t),[i.memoizedState,t]},useRef:function(t){var e=pi();return t={current:t},e.memoizedState=t},useState:w0,useDebugValue:O_,useDeferredValue:function(t){return pi().memoizedState=t},useTransition:function(){var t=w0(!1),e=t[0];return t=$b.bind(null,t[1]),pi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=nt,r=pi();if(Je){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),bt===null)throw Error(X(349));so&30||lE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,T0(cE.bind(null,i,o,t),[t]),i.flags|=2048,Nu(9,uE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=pi(),e=bt.identifierPrefix;if(Je){var n=Ki,i=Zi;n=(i&~(1<<32-ti(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ru++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Wb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Kb={readContext:zn,useCallback:yE,useContext:zn,useEffect:M_,useImperativeHandle:_E,useInsertionEffect:pE,useLayoutEffect:mE,useMemo:vE,useReducer:bp,useRef:fE,useState:function(){return bp(Lu)},useDebugValue:O_,useDeferredValue:function(t){var e=Un();return wE(e,vt.memoizedState,t)},useTransition:function(){var t=bp(Lu)[0],e=Un().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:aE,useId:TE,unstable_isNewReconciler:!1},Qb={readContext:zn,useCallback:yE,useContext:zn,useEffect:M_,useImperativeHandle:_E,useInsertionEffect:pE,useLayoutEffect:mE,useMemo:vE,useReducer:Rp,useRef:fE,useState:function(){return Rp(Lu)},useDebugValue:O_,useDeferredValue:function(t){var e=Un();return vt===null?e.memoizedState=t:wE(e,vt.memoizedState,t)},useTransition:function(){var t=Rp(Lu)[0],e=Un().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:aE,useId:TE,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var af={isMounted:function(t){return(t=t._reactInternals)?mo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Xt(),r=Zr(t),o=Ji(i,r);o.payload=e,n!=null&&(o.callback=n),e=qr(t,o,r),e!==null&&(ni(e,t,r,i),Ah(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Xt(),r=Zr(t),o=Ji(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=qr(t,o,r),e!==null&&(ni(e,t,r,i),Ah(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),i=Zr(t),r=Ji(n,i);r.tag=2,e!=null&&(r.callback=e),e=qr(t,r,i),e!==null&&(ni(e,t,i,n),Ah(e,t,i))}};function x0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Su(n,i)||!Su(r,o):!0}function SE(t,e,n){var i=!1,r=ss,o=e.contextType;return typeof o=="object"&&o!==null?o=zn(o):(r=hn(e)?io:$t.current,i=e.contextTypes,o=(i=i!=null)?Va(t,r):ss),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=af,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function E0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&af.enqueueReplaceState(e,e.state,null)}function Zm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},C_(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=zn(o):(o=hn(e)?io:$t.current,r.context=Va(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Gm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&af.enqueueReplaceState(r,r.state,null),ld(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function za(t,e){try{var n="",i=e;do n+=Pk(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Lp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Km(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yb=typeof WeakMap=="function"?WeakMap:Map;function IE(t,e,n){n=Ji(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){fd||(fd=!0,sg=i),Km(t,e)},n}function CE(t,e,n){n=Ji(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Km(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Km(t,e),typeof i!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function P0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Yb;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=hR.bind(null,t,e,n),e.then(t,t))}function S0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function I0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ji(-1,1),e.tag=2,qr(n,e,1))),n.lanes|=1),t)}var Xb=fr.ReactCurrentOwner,un=!1;function Yt(t,e,n,i){e.child=t===null?nE(e,null,n,i):Fa(e,t.child,n,i)}function C0(t,e,n,i,r){n=n.render;var o=e.ref;return Ca(e,r),i=L_(t,e,n,i,o,r),n=N_(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,or(t,e,r)):(Je&&n&&w_(e),e.flags|=1,Yt(t,e,i,r),e.child)}function A0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!H_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,AE(t,e,o,i,r)):(t=Mh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Su,n(a,i)&&t.ref===e.ref)return or(t,e,r)}return e.flags|=1,t=Kr(o,i),t.ref=e.ref,t.return=e,e.child=t}function AE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Su(o,i)&&t.ref===e.ref)if(un=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,or(t,e,r)}return Qm(t,e,n,i,r)}function kE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(_a,yn),yn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(_a,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,$e(_a,yn),yn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,$e(_a,yn),yn|=i;return Yt(t,e,r,n),e.child}function bE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qm(t,e,n,i,r){var o=hn(n)?io:$t.current;return o=Va(e,o),Ca(e,r),n=L_(t,e,n,i,o,r),i=N_(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,or(t,e,r)):(Je&&i&&w_(e),e.flags|=1,Yt(t,e,n,r),e.child)}function k0(t,e,n,i,r){if(hn(n)){var o=!0;id(e)}else o=!1;if(Ca(e,r),e.stateNode===null)Rh(t,e),SE(e,n,i),Zm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=zn(f):(f=hn(n)?io:$t.current,f=Va(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==f)&&E0(e,a,i,f),br=!1;var y=e.memoizedState;a.state=y,ld(e,i,a,r),c=e.memoizedState,u!==i||y!==c||cn.current||br?(typeof m=="function"&&(Gm(e,n,m,i),c=e.memoizedState),(u=br||x0(e,n,u,i,y,c,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,rE(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Kn(e.type,u),a.props=f,g=e.pendingProps,y=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=zn(c):(c=hn(n)?io:$t.current,c=Va(e,c));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||y!==c)&&E0(e,a,i,c),br=!1,y=e.memoizedState,a.state=y,ld(e,i,a,r);var b=e.memoizedState;u!==g||y!==b||cn.current||br?(typeof T=="function"&&(Gm(e,n,T,i),b=e.memoizedState),(f=br||x0(e,n,f,i,y,b,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,b,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),a.props=i,a.state=b,a.context=c,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),i=!1)}return Ym(t,e,n,i,o,r)}function Ym(t,e,n,i,r,o){bE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&p0(e,n,!1),or(t,e,o);i=e.stateNode,Xb.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Fa(e,t.child,null,o),e.child=Fa(e,null,u,o)):Yt(t,e,u,o),e.memoizedState=i.state,r&&p0(e,n,!0),e.child}function RE(t){var e=t.stateNode;e.pendingContext?f0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f0(t,e.context,!1),A_(t,e.containerInfo)}function b0(t,e,n,i,r){return ja(),x_(r),e.flags|=256,Yt(t,e,n,i),e.child}var Xm={dehydrated:null,treeContext:null,retryLane:0};function Jm(t){return{baseLanes:t,cachePool:null,transitions:null}}function LE(t,e,n){var i=e.pendingProps,r=et.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),$e(et,r&1),t===null)return $m(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=cf(a,i,0,null),t=Xs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Jm(n),e.memoizedState=Xm,t):D_(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Jb(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Kr(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Kr(u,o):(o=Xs(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Jm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Xm,i}return o=t.child,t=o.sibling,i=Kr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function D_(t,e){return e=cf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oh(t,e,n,i){return i!==null&&x_(i),Fa(e,t.child,null,n),t=D_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Jb(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Lp(Error(X(422))),oh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=cf({mode:"visible",children:i.children},r,0,null),o=Xs(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Fa(e,t.child,null,a),e.child.memoizedState=Jm(a),e.memoizedState=Xm,o);if(!(e.mode&1))return oh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(X(419)),i=Lp(o,i,void 0),oh(t,e,a,i)}if(u=(a&t.childLanes)!==0,un||u){if(i=bt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,sr(t,r),ni(i,t,r,-1))}return U_(),i=Lp(Error(X(421))),oh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=dR.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,vn=$r(r.nextSibling),wn=e,Je=!0,Yn=null,t!==null&&(Mn[On++]=Zi,Mn[On++]=Ki,Mn[On++]=ro,Zi=t.id,Ki=t.overflow,ro=e),e=D_(e,i.children),e.flags|=4096,e)}function R0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),qm(t.return,e,n)}function Np(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function NE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Yt(t,e,i.children,n),i=et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&R0(t,n,e);else if(t.tag===19)R0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(et,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ud(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Np(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ud(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Np(e,!0,n,null,o);break;case"together":Np(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eR(t,e,n){switch(e.tag){case 3:RE(e),ja();break;case 5:sE(e);break;case 1:hn(e.type)&&id(e);break;case 4:A_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;$e(od,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?LE(t,e,n):($e(et,et.current&1),t=or(t,e,n),t!==null?t.sibling:null);$e(et,et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return NE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(et,et.current),i)break;return null;case 22:case 23:return e.lanes=0,kE(t,e,n)}return or(t,e,n)}var ME,eg,OE,DE;ME=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eg=function(){};OE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Zs(yi.current);var o=null;switch(n){case"input":r=xm(t,r),i=xm(t,i),o=[];break;case"select":r=rt({},r,{value:void 0}),i=rt({},i,{value:void 0}),o=[];break;case"textarea":r=Sm(t,r),i=Sm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=td)}Cm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(yu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var c=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(yu.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Ze("scroll",t),o||u===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};DE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Bl(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function tR(t,e,n){var i=e.pendingProps;switch(T_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return hn(e.type)&&nd(),Ft(e),null;case 3:return i=e.stateNode,Ba(),Ye(cn),Ye($t),b_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(rh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(lg(Yn),Yn=null))),eg(t,e),Ft(e),null;case 5:k_(e);var r=Zs(bu.current);if(n=e.type,t!==null&&e.stateNode!=null)OE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Ft(e),null}if(t=Zs(yi.current),rh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[gi]=e,i[Au]=o,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(r=0;r<Gl.length;r++)Ze(Gl[r],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":Bv(i,o),Ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ze("invalid",i);break;case"textarea":Uv(i,o),Ze("invalid",i)}Cm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&ih(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&ih(i.textContent,u,t),r=["children",""+u]):yu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ze("scroll",i)}switch(n){case"input":Kc(i),zv(i,o,!0);break;case"textarea":Kc(i),Hv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=td)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[gi]=e,t[Au]=i,ME(t,e,!1,!1),e.stateNode=t;e:{switch(a=Am(n,i),n){case"dialog":Ze("cancel",t),Ze("close",t),r=i;break;case"iframe":case"object":case"embed":Ze("load",t),r=i;break;case"video":case"audio":for(r=0;r<Gl.length;r++)Ze(Gl[r],t);r=i;break;case"source":Ze("error",t),r=i;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),r=i;break;case"details":Ze("toggle",t),r=i;break;case"input":Bv(t,i),r=xm(t,i),Ze("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=rt({},i,{value:void 0}),Ze("invalid",t);break;case"textarea":Uv(t,i),r=Sm(t,i),Ze("invalid",t);break;default:r=i}Cm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?fx(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hx(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vu(t,c):typeof c=="number"&&vu(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(yu.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ze("scroll",t):c!=null&&o_(t,o,c,a))}switch(n){case"input":Kc(t),zv(t,i,!1);break;case"textarea":Kc(t),Hv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+rs(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ea(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ea(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=td)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)DE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=Zs(bu.current),Zs(yi.current),rh(e)){if(i=e.stateNode,n=e.memoizedProps,i[gi]=e,(o=i.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:ih(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ih(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[gi]=e,e.stateNode=i}return Ft(e),null;case 13:if(Ye(et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&vn!==null&&e.mode&1&&!(e.flags&128))eE(),ja(),e.flags|=98560,o=!1;else if(o=rh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[gi]=e}else ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),o=!1}else Yn!==null&&(lg(Yn),Yn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?Tt===0&&(Tt=3):U_())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return Ba(),eg(t,e),t===null&&Iu(e.stateNode.containerInfo),Ft(e),null;case 10:return S_(e.type._context),Ft(e),null;case 17:return hn(e.type)&&nd(),Ft(e),null;case 19:if(Ye(et),o=e.memoizedState,o===null)return Ft(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Bl(o,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ud(t),a!==null){for(e.flags|=128,Bl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(et,et.current&1|2),e.child}t=t.sibling}o.tail!==null&&ht()>Ua&&(e.flags|=128,i=!0,Bl(o,!1),e.lanes=4194304)}else{if(!i)if(t=ud(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Je)return Ft(e),null}else 2*ht()-o.renderingStartTime>Ua&&n!==1073741824&&(e.flags|=128,i=!0,Bl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ht(),e.sibling=null,n=et.current,$e(et,i?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return z_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function nR(t,e){switch(T_(e),e.tag){case 1:return hn(e.type)&&nd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ba(),Ye(cn),Ye($t),b_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return k_(e),null;case 13:if(Ye(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(et),null;case 4:return Ba(),null;case 10:return S_(e.type._context),null;case 22:case 23:return z_(),null;case 24:return null;default:return null}}var ah=!1,Ht=!1,iR=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ga(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){at(t,e,i)}else n.current=null}function tg(t,e,n){try{n()}catch(i){at(t,e,i)}}var L0=!1;function rR(t,e){if(jm=Xh,t=zx(),v_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,f=0,m=0,g=t,y=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)y=g,g=T;for(;;){if(g===t)break t;if(y===n&&++f===r&&(u=a),y===o&&++m===i&&(c=a),(T=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=T}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fm={focusedElem:t,selectionRange:n},Xh=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,D=b.memoizedState,C=e.stateNode,P=C.getSnapshotBeforeUpdate(e.elementType===e.type?k:Kn(e.type,k),D);C.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(B){at(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return b=L0,L0=!1,b}function su(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&tg(e,n,o)}r=r.next}while(r!==i)}}function lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ng(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function VE(t){var e=t.alternate;e!==null&&(t.alternate=null,VE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gi],delete e[Au],delete e[Um],delete e[Bb],delete e[zb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jE(t){return t.tag===5||t.tag===3||t.tag===4}function N0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ig(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=td));else if(i!==4&&(t=t.child,t!==null))for(ig(t,e,n),t=t.sibling;t!==null;)ig(t,e,n),t=t.sibling}function rg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(rg(t,e,n),t=t.sibling;t!==null;)rg(t,e,n),t=t.sibling}var Rt=null,Qn=!1;function Sr(t,e,n){for(n=n.child;n!==null;)FE(t,e,n),n=n.sibling}function FE(t,e,n){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(Jd,n)}catch{}switch(n.tag){case 5:Ht||ga(n,e);case 6:var i=Rt,r=Qn;Rt=null,Sr(t,e,n),Rt=i,Qn=r,Rt!==null&&(Qn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Qn?(t=Rt,n=n.stateNode,t.nodeType===8?Ip(t.parentNode,n):t.nodeType===1&&Ip(t,n),Eu(t)):Ip(Rt,n.stateNode));break;case 4:i=Rt,r=Qn,Rt=n.stateNode.containerInfo,Qn=!0,Sr(t,e,n),Rt=i,Qn=r;break;case 0:case 11:case 14:case 15:if(!Ht&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&tg(n,e,a),r=r.next}while(r!==i)}Sr(t,e,n);break;case 1:if(!Ht&&(ga(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){at(n,e,u)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(Ht=(i=Ht)||n.memoizedState!==null,Sr(t,e,n),Ht=i):Sr(t,e,n);break;default:Sr(t,e,n)}}function M0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iR),e.forEach(function(i){var r=fR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Zn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Rt=u.stateNode,Qn=!1;break e;case 3:Rt=u.stateNode.containerInfo,Qn=!0;break e;case 4:Rt=u.stateNode.containerInfo,Qn=!0;break e}u=u.return}if(Rt===null)throw Error(X(160));FE(o,a,r),Rt=null,Qn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(f){at(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BE(e,t),e=e.sibling}function BE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zn(e,t),fi(t),i&4){try{su(3,t,t.return),lf(3,t)}catch(k){at(t,t.return,k)}try{su(5,t,t.return)}catch(k){at(t,t.return,k)}}break;case 1:Zn(e,t),fi(t),i&512&&n!==null&&ga(n,n.return);break;case 5:if(Zn(e,t),fi(t),i&512&&n!==null&&ga(n,n.return),t.flags&32){var r=t.stateNode;try{vu(r,"")}catch(k){at(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&lx(r,o),Am(u,a);var f=Am(u,o);for(a=0;a<c.length;a+=2){var m=c[a],g=c[a+1];m==="style"?fx(r,g):m==="dangerouslySetInnerHTML"?hx(r,g):m==="children"?vu(r,g):o_(r,m,g,f)}switch(u){case"input":Em(r,o);break;case"textarea":ux(r,o);break;case"select":var y=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Ea(r,!!o.multiple,T,!1):y!==!!o.multiple&&(o.defaultValue!=null?Ea(r,!!o.multiple,o.defaultValue,!0):Ea(r,!!o.multiple,o.multiple?[]:"",!1))}r[Au]=o}catch(k){at(t,t.return,k)}}break;case 6:if(Zn(e,t),fi(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){at(t,t.return,k)}}break;case 3:if(Zn(e,t),fi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Eu(e.containerInfo)}catch(k){at(t,t.return,k)}break;case 4:Zn(e,t),fi(t);break;case 13:Zn(e,t),fi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(F_=ht())),i&4&&M0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ht=(f=Ht)||m,Zn(e,t),Ht=f):Zn(e,t),fi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(oe=t,m=t.child;m!==null;){for(g=oe=m;oe!==null;){switch(y=oe,T=y.child,y.tag){case 0:case 11:case 14:case 15:su(4,y,y.return);break;case 1:ga(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){i=y,n=y.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(k){at(i,n,k)}}break;case 5:ga(y,y.return);break;case 22:if(y.memoizedState!==null){D0(g);continue}}T!==null?(T.return=y,oe=T):D0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=dx("display",a))}catch(k){at(t,t.return,k)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){at(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Zn(e,t),fi(t),i&4&&M0(t);break;case 21:break;default:Zn(e,t),fi(t)}}function fi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jE(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(vu(r,""),i.flags&=-33);var o=N0(t);rg(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=N0(t);ig(t,u,a);break;default:throw Error(X(161))}}catch(c){at(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sR(t,e,n){oe=t,zE(t)}function zE(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||ah;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Ht;u=ah;var f=Ht;if(ah=a,(Ht=c)&&!f)for(oe=r;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?V0(r):c!==null?(c.return=a,oe=c):V0(r);for(;o!==null;)oe=o,zE(o),o=o.sibling;oe=r,ah=u,Ht=f}O0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):O0(t)}}function O0(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||lf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ht)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&v0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}v0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Eu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Ht||e.flags&512&&ng(e)}catch(y){at(e,e.return,y)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function D0(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function V0(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lf(4,e)}catch(c){at(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){at(e,r,c)}}var o=e.return;try{ng(e)}catch(c){at(e,o,c)}break;case 5:var a=e.return;try{ng(e)}catch(c){at(e,a,c)}}}catch(c){at(e,e.return,c)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var oR=Math.ceil,dd=fr.ReactCurrentDispatcher,V_=fr.ReactCurrentOwner,Bn=fr.ReactCurrentBatchConfig,Oe=0,bt=null,_t=null,Mt=0,yn=0,_a=_s(0),Tt=0,Mu=null,oo=0,uf=0,j_=0,ou=null,ln=null,F_=0,Ua=1/0,qi=null,fd=!1,sg=null,Gr=null,lh=!1,Fr=null,pd=0,au=0,og=null,Lh=-1,Nh=0;function Xt(){return Oe&6?ht():Lh!==-1?Lh:Lh=ht()}function Zr(t){return t.mode&1?Oe&2&&Mt!==0?Mt&-Mt:Hb.transition!==null?(Nh===0&&(Nh=Sx()),Nh):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:Lx(t.type)),t):1}function ni(t,e,n,i){if(50<au)throw au=0,og=null,Error(X(185));Ku(t,n,i),(!(Oe&2)||t!==bt)&&(t===bt&&(!(Oe&2)&&(uf|=n),Tt===4&&Nr(t,Mt)),dn(t,i),n===1&&Oe===0&&!(e.mode&1)&&(Ua=ht()+500,sf&&ys()))}function dn(t,e){var n=t.callbackNode;Hk(t,e);var i=Yh(t,t===bt?Mt:0);if(i===0)n!==null&&qv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&qv(n),e===1)t.tag===0?Ub(j0.bind(null,t)):Yx(j0.bind(null,t)),jb(function(){!(Oe&6)&&ys()}),n=null;else{switch(Ix(i)){case 1:n=h_;break;case 4:n=Ex;break;case 16:n=Qh;break;case 536870912:n=Px;break;default:n=Qh}n=KE(n,UE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function UE(t,e){if(Lh=-1,Nh=0,Oe&6)throw Error(X(327));var n=t.callbackNode;if(Aa()&&t.callbackNode!==n)return null;var i=Yh(t,t===bt?Mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=md(t,i);else{e=i;var r=Oe;Oe|=2;var o=WE();(bt!==t||Mt!==e)&&(qi=null,Ua=ht()+500,Ys(t,e));do try{uR();break}catch(u){HE(t,u)}while(!0);P_(),dd.current=o,Oe=r,_t!==null?e=0:(bt=null,Mt=0,e=Tt)}if(e!==0){if(e===2&&(r=Nm(t),r!==0&&(i=r,e=ag(t,r))),e===1)throw n=Mu,Ys(t,0),Nr(t,i),dn(t,ht()),n;if(e===6)Nr(t,i);else{if(r=t.current.alternate,!(i&30)&&!aR(r)&&(e=md(t,i),e===2&&(o=Nm(t),o!==0&&(i=o,e=ag(t,o))),e===1))throw n=Mu,Ys(t,0),Nr(t,i),dn(t,ht()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:Bs(t,ln,qi);break;case 3:if(Nr(t,i),(i&130023424)===i&&(e=F_+500-ht(),10<e)){if(Yh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Xt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=zm(Bs.bind(null,t,ln,qi),e);break}Bs(t,ln,qi);break;case 4:if(Nr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ti(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ht()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*oR(i/1960))-i,10<i){t.timeoutHandle=zm(Bs.bind(null,t,ln,qi),i);break}Bs(t,ln,qi);break;case 5:Bs(t,ln,qi);break;default:throw Error(X(329))}}}return dn(t,ht()),t.callbackNode===n?UE.bind(null,t):null}function ag(t,e){var n=ou;return t.current.memoizedState.isDehydrated&&(Ys(t,e).flags|=256),t=md(t,e),t!==2&&(e=ln,ln=n,e!==null&&lg(e)),t}function lg(t){ln===null?ln=t:ln.push.apply(ln,t)}function aR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ii(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~j_,e&=~uf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ti(e),i=1<<n;t[n]=-1,e&=~i}}function j0(t){if(Oe&6)throw Error(X(327));Aa();var e=Yh(t,0);if(!(e&1))return dn(t,ht()),null;var n=md(t,e);if(t.tag!==0&&n===2){var i=Nm(t);i!==0&&(e=i,n=ag(t,i))}if(n===1)throw n=Mu,Ys(t,0),Nr(t,e),dn(t,ht()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bs(t,ln,qi),dn(t,ht()),null}function B_(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(Ua=ht()+500,sf&&ys())}}function ao(t){Fr!==null&&Fr.tag===0&&!(Oe&6)&&Aa();var e=Oe;Oe|=1;var n=Bn.transition,i=Ue;try{if(Bn.transition=null,Ue=1,t)return t()}finally{Ue=i,Bn.transition=n,Oe=e,!(Oe&6)&&ys()}}function z_(){yn=_a.current,Ye(_a)}function Ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Vb(n)),_t!==null)for(n=_t.return;n!==null;){var i=n;switch(T_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&nd();break;case 3:Ba(),Ye(cn),Ye($t),b_();break;case 5:k_(i);break;case 4:Ba();break;case 13:Ye(et);break;case 19:Ye(et);break;case 10:S_(i.type._context);break;case 22:case 23:z_()}n=n.return}if(bt=t,_t=t=Kr(t.current,null),Mt=yn=e,Tt=0,Mu=null,j_=uf=oo=0,ln=ou=null,Gs!==null){for(e=0;e<Gs.length;e++)if(n=Gs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Gs=null}return t}function HE(t,e){do{var n=_t;try{if(P_(),kh.current=hd,cd){for(var i=nt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}cd=!1}if(so=0,kt=vt=nt=null,ru=!1,Ru=0,V_.current=null,n===null||n.return===null){Tt=1,Mu=e,_t=null;break}e:{var o=t,a=n.return,u=n,c=e;if(e=Mt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var y=m.alternate;y?(m.updateQueue=y.updateQueue,m.memoizedState=y.memoizedState,m.lanes=y.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=S0(a);if(T!==null){T.flags&=-257,I0(T,a,u,o,e),T.mode&1&&P0(o,f,e),e=T,c=f;var b=e.updateQueue;if(b===null){var k=new Set;k.add(c),e.updateQueue=k}else b.add(c);break e}else{if(!(e&1)){P0(o,f,e),U_();break e}c=Error(X(426))}}else if(Je&&u.mode&1){var D=S0(a);if(D!==null){!(D.flags&65536)&&(D.flags|=256),I0(D,a,u,o,e),x_(za(c,u));break e}}o=c=za(c,u),Tt!==4&&(Tt=2),ou===null?ou=[o]:ou.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=IE(o,c,e);y0(o,C);break e;case 1:u=c;var P=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Gr===null||!Gr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=CE(o,u,e);y0(o,B);break e}}o=o.return}while(o!==null)}qE(n)}catch(q){e=q,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(!0)}function WE(){var t=dd.current;return dd.current=hd,t===null?hd:t}function U_(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),bt===null||!(oo&268435455)&&!(uf&268435455)||Nr(bt,Mt)}function md(t,e){var n=Oe;Oe|=2;var i=WE();(bt!==t||Mt!==e)&&(qi=null,Ys(t,e));do try{lR();break}catch(r){HE(t,r)}while(!0);if(P_(),Oe=n,dd.current=i,_t!==null)throw Error(X(261));return bt=null,Mt=0,Tt}function lR(){for(;_t!==null;)$E(_t)}function uR(){for(;_t!==null&&!Mk();)$E(_t)}function $E(t){var e=ZE(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?qE(t):_t=e,V_.current=null}function qE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nR(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,_t=null;return}}else if(n=tR(n,e,yn),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);Tt===0&&(Tt=5)}function Bs(t,e,n){var i=Ue,r=Bn.transition;try{Bn.transition=null,Ue=1,cR(t,e,n,i)}finally{Bn.transition=r,Ue=i}return null}function cR(t,e,n,i){do Aa();while(Fr!==null);if(Oe&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Wk(t,o),t===bt&&(_t=bt=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lh||(lh=!0,KE(Qh,function(){return Aa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Bn.transition,Bn.transition=null;var a=Ue;Ue=1;var u=Oe;Oe|=4,V_.current=null,rR(t,n),BE(n,t),bb(Fm),Xh=!!jm,Fm=jm=null,t.current=n,sR(n),Ok(),Oe=u,Ue=a,Bn.transition=o}else t.current=n;if(lh&&(lh=!1,Fr=t,pd=r),o=t.pendingLanes,o===0&&(Gr=null),jk(n.stateNode),dn(t,ht()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(fd)throw fd=!1,t=sg,sg=null,t;return pd&1&&t.tag!==0&&Aa(),o=t.pendingLanes,o&1?t===og?au++:(au=0,og=t):au=0,ys(),null}function Aa(){if(Fr!==null){var t=Ix(pd),e=Bn.transition,n=Ue;try{if(Bn.transition=null,Ue=16>t?16:t,Fr===null)var i=!1;else{if(t=Fr,Fr=null,pd=0,Oe&6)throw Error(X(331));var r=Oe;for(Oe|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(oe=f;oe!==null;){var m=oe;switch(m.tag){case 0:case 11:case 15:su(8,m,o)}var g=m.child;if(g!==null)g.return=m,oe=g;else for(;oe!==null;){m=oe;var y=m.sibling,T=m.return;if(VE(m),m===f){oe=null;break}if(y!==null){y.return=T,oe=y;break}oe=T}}}var b=o.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var D=k.sibling;k.sibling=null,k=D}while(k!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:su(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,oe=C;break e}oe=o.return}}var P=t.current;for(oe=P;oe!==null;){a=oe;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,oe=S;else e:for(a=P;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:lf(9,u)}}catch(q){at(u,u.return,q)}if(u===a){oe=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,oe=B;break e}oe=u.return}}if(Oe=r,ys(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(Jd,t)}catch{}i=!0}return i}finally{Ue=n,Bn.transition=e}}return!1}function F0(t,e,n){e=za(n,e),e=IE(t,e,1),t=qr(t,e,1),e=Xt(),t!==null&&(Ku(t,1,e),dn(t,e))}function at(t,e,n){if(t.tag===3)F0(t,t,n);else for(;e!==null;){if(e.tag===3){F0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Gr===null||!Gr.has(i))){t=za(n,t),t=CE(e,t,1),e=qr(e,t,1),t=Xt(),e!==null&&(Ku(e,1,t),dn(e,t));break}}e=e.return}}function hR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Mt&n)===n&&(Tt===4||Tt===3&&(Mt&130023424)===Mt&&500>ht()-F_?Ys(t,0):j_|=n),dn(t,e)}function GE(t,e){e===0&&(t.mode&1?(e=Xc,Xc<<=1,!(Xc&130023424)&&(Xc=4194304)):e=1);var n=Xt();t=sr(t,e),t!==null&&(Ku(t,e,n),dn(t,n))}function dR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GE(t,n)}function fR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),GE(t,n)}var ZE;ZE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,eR(t,e,n);un=!!(t.flags&131072)}else un=!1,Je&&e.flags&1048576&&Xx(e,sd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Rh(t,e),t=e.pendingProps;var r=Va(e,$t.current);Ca(e,n),r=L_(null,e,i,t,r,n);var o=N_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(i)?(o=!0,id(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,C_(e),r.updater=af,e.stateNode=r,r._reactInternals=e,Zm(e,i,t,n),e=Ym(null,e,i,!0,o,n)):(e.tag=0,Je&&o&&w_(e),Yt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Rh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=mR(i),t=Kn(i,t),r){case 0:e=Qm(null,e,i,t,n);break e;case 1:e=k0(null,e,i,t,n);break e;case 11:e=C0(null,e,i,t,n);break e;case 14:e=A0(null,e,i,Kn(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Kn(i,r),Qm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Kn(i,r),k0(t,e,i,r,n);case 3:e:{if(RE(e),t===null)throw Error(X(387));i=e.pendingProps,o=e.memoizedState,r=o.element,rE(t,e),ld(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=za(Error(X(423)),e),e=b0(t,e,i,n,r);break e}else if(i!==r){r=za(Error(X(424)),e),e=b0(t,e,i,n,r);break e}else for(vn=$r(e.stateNode.containerInfo.firstChild),wn=e,Je=!0,Yn=null,n=nE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ja(),i===r){e=or(t,e,n);break e}Yt(t,e,i,n)}e=e.child}return e;case 5:return sE(e),t===null&&$m(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Bm(i,r)?a=null:o!==null&&Bm(i,o)&&(e.flags|=32),bE(t,e),Yt(t,e,a,n),e.child;case 6:return t===null&&$m(e),null;case 13:return LE(t,e,n);case 4:return A_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Fa(e,null,i,n):Yt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Kn(i,r),C0(t,e,i,r,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,$e(od,i._currentValue),i._currentValue=a,o!==null)if(ii(o.value,a)){if(o.children===r.children&&!cn.current){e=or(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=Ji(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?c.next=c:(c.next=m.next,m.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),qm(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),qm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Yt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ca(e,n),r=zn(r),i=i(r),e.flags|=1,Yt(t,e,i,n),e.child;case 14:return i=e.type,r=Kn(i,e.pendingProps),r=Kn(i.type,r),A0(t,e,i,r,n);case 15:return AE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Kn(i,r),Rh(t,e),e.tag=1,hn(i)?(t=!0,id(e)):t=!1,Ca(e,n),SE(e,i,r),Zm(e,i,r,n),Ym(null,e,i,!0,t,n);case 19:return NE(t,e,n);case 22:return kE(t,e,n)}throw Error(X(156,e.tag))};function KE(t,e){return xx(t,e)}function pR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,i){return new pR(t,e,n,i)}function H_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mR(t){if(typeof t=="function")return H_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===l_)return 11;if(t===u_)return 14}return 2}function Kr(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")H_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case aa:return Xs(n.children,r,o,e);case a_:a=8,r|=8;break;case ym:return t=Fn(12,n,e,r|2),t.elementType=ym,t.lanes=o,t;case vm:return t=Fn(13,n,e,r),t.elementType=vm,t.lanes=o,t;case wm:return t=Fn(19,n,e,r),t.elementType=wm,t.lanes=o,t;case sx:return cf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ix:a=10;break e;case rx:a=9;break e;case l_:a=11;break e;case u_:a=14;break e;case kr:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Fn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Xs(t,e,n,i){return t=Fn(7,t,i,e),t.lanes=n,t}function cf(t,e,n,i){return t=Fn(22,t,i,e),t.elementType=sx,t.lanes=n,t.stateNode={isHidden:!1},t}function Mp(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function Op(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gR(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mp(0),this.expirationTimes=mp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function W_(t,e,n,i,r,o,a,u,c){return t=new gR(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Fn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},C_(o),t}function _R(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oa,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function QE(t){if(!t)return ss;t=t._reactInternals;e:{if(mo(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(hn(n))return Qx(t,n,e)}return e}function YE(t,e,n,i,r,o,a,u,c){return t=W_(n,i,!0,t,r,o,a,u,c),t.context=QE(null),n=t.current,i=Xt(),r=Zr(n),o=Ji(i,r),o.callback=e??null,qr(n,o,r),t.current.lanes=r,Ku(t,r,i),dn(t,i),t}function hf(t,e,n,i){var r=e.current,o=Xt(),a=Zr(r);return n=QE(n),e.context===null?e.context=n:e.pendingContext=n,e=Ji(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=qr(r,e,a),t!==null&&(ni(t,r,a,o),Ah(t,r,a)),a}function gd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function B0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $_(t,e){B0(t,e),(t=t.alternate)&&B0(t,e)}function yR(){return null}var XE=typeof reportError=="function"?reportError:function(t){console.error(t)};function q_(t){this._internalRoot=t}df.prototype.render=q_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));hf(t,e,null,null)};df.prototype.unmount=q_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ao(function(){hf(null,t,null,null)}),e[rr]=null}};function df(t){this._internalRoot=t}df.prototype.unstable_scheduleHydration=function(t){if(t){var e=kx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lr.length&&e!==0&&e<Lr[n].priority;n++);Lr.splice(n,0,t),n===0&&Rx(t)}};function G_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function z0(){}function vR(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=gd(a);o.call(f)}}var a=YE(e,i,t,0,null,!1,!1,"",z0);return t._reactRootContainer=a,t[rr]=a.current,Iu(t.nodeType===8?t.parentNode:t),ao(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=gd(c);u.call(f)}}var c=W_(t,0,!1,null,null,!1,!1,"",z0);return t._reactRootContainer=c,t[rr]=c.current,Iu(t.nodeType===8?t.parentNode:t),ao(function(){hf(e,c,n,i)}),c}function pf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var c=gd(a);u.call(c)}}hf(e,a,t,r)}else a=vR(n,e,t,r,i);return gd(a)}Cx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ql(e.pendingLanes);n!==0&&(d_(e,n|1),dn(e,ht()),!(Oe&6)&&(Ua=ht()+500,ys()))}break;case 13:ao(function(){var i=sr(t,1);if(i!==null){var r=Xt();ni(i,t,1,r)}}),$_(t,1)}};f_=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=Xt();ni(e,t,134217728,n)}$_(t,134217728)}};Ax=function(t){if(t.tag===13){var e=Zr(t),n=sr(t,e);if(n!==null){var i=Xt();ni(n,t,e,i)}$_(t,e)}};kx=function(){return Ue};bx=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};bm=function(t,e,n){switch(e){case"input":if(Em(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=rf(i);if(!r)throw Error(X(90));ax(i),Em(i,r)}}}break;case"textarea":ux(t,n);break;case"select":e=n.value,e!=null&&Ea(t,!!n.multiple,e,!1)}};gx=B_;_x=ao;var wR={usingClientEntryPoint:!1,Events:[Yu,ha,rf,px,mx,B_]},zl={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TR={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wx(t),t===null?null:t.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||yR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uh.isDisabled&&uh.supportsFiber)try{Jd=uh.inject(TR),_i=uh}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wR;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G_(e))throw Error(X(200));return _R(t,e,null,n)};En.createRoot=function(t,e){if(!G_(t))throw Error(X(299));var n=!1,i="",r=XE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=W_(t,1,!1,null,null,n,!1,i,r),t[rr]=e.current,Iu(t.nodeType===8?t.parentNode:t),new q_(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=wx(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return ao(t)};En.hydrate=function(t,e,n){if(!ff(e))throw Error(X(200));return pf(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!G_(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=XE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=YE(e,null,t,1,n??null,r,!1,o,a),t[rr]=e.current,Iu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new df(e)};En.render=function(t,e,n){if(!ff(e))throw Error(X(200));return pf(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!ff(t))throw Error(X(40));return t._reactRootContainer?(ao(function(){pf(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};En.unstable_batchedUpdates=B_;En.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ff(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return pf(t,e,n,!1,i)};En.version="18.3.1-next-f1338f8080-20240426";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(t){console.error(t)}}JE(),J1.exports=En;var xR=J1.exports,U0=xR;gm.createRoot=U0.createRoot,gm.hydrateRoot=U0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ou.apply(this,arguments)}var Br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Br||(Br={}));const H0="popstate";function ER(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:c=""}=go(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),ug("",{pathname:a,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let c=r.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:_d(o))}function i(r,o){mf(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return SR(e,n,i,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PR(){return Math.random().toString(36).substr(2,8)}function W0(t,e){return{usr:t.state,key:t.key,idx:e}}function ug(t,e,n,i){return n===void 0&&(n=null),Ou({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?go(e):e,{state:n,key:e&&e.key||i||PR()})}function _d(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function go(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function SR(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Br.Pop,c=null,f=m();f==null&&(f=0,a.replaceState(Ou({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Br.Pop;let D=m(),C=D==null?null:D-f;f=D,c&&c({action:u,location:k.location,delta:C})}function y(D,C){u=Br.Push;let P=ug(k.location,D,C);n&&n(P,D),f=m()+1;let S=W0(P,f),B=k.createHref(P);try{a.pushState(S,"",B)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;r.location.assign(B)}o&&c&&c({action:u,location:k.location,delta:1})}function T(D,C){u=Br.Replace;let P=ug(k.location,D,C);n&&n(P,D),f=m();let S=W0(P,f),B=k.createHref(P);a.replaceState(S,"",B),o&&c&&c({action:u,location:k.location,delta:0})}function b(D){let C=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof D=="string"?D:_d(D);return P=P.replace(/ $/,"%20"),it(C,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,C)}let k={get action(){return u},get location(){return t(r,a)},listen(D){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(H0,g),c=D,()=>{r.removeEventListener(H0,g),c=null}},createHref(D){return e(r,D)},createURL:b,encodeLocation(D){let C=b(D);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:T,go(D){return a.go(D)}};return k}var $0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($0||($0={}));function IR(t,e,n){return n===void 0&&(n="/"),CR(t,e,n)}function CR(t,e,n,i){let r=typeof e=="string"?go(e):e,o=Ha(r.pathname||"/",n);if(o==null)return null;let a=eP(t);AR(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=FR(o);u=VR(a[c],f)}return u}function eP(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(it(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let f=Qr([i,c.relativePath]),m=n.concat(c);o.children&&o.children.length>0&&(it(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),eP(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:OR(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let c of tP(o.path))r(o,a,c)}),e}function tP(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=tP(i.join("/")),u=[];return u.push(...a.map(c=>c===""?o:[o,c].join("/"))),r&&u.push(...a),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function AR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const kR=/^:[\w-]+$/,bR=3,RR=2,LR=1,NR=10,MR=-2,q0=t=>t==="*";function OR(t,e){let n=t.split("/"),i=n.length;return n.some(q0)&&(i+=MR),e&&(i+=RR),n.filter(r=>!q0(r)).reduce((r,o)=>r+(kR.test(o)?bR:o===""?LR:NR),i)}function DR(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function VR(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let c=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=cg({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},m),y=c.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:Qr([o,g.pathname]),pathnameBase:WR(Qr([o,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(o=Qr([o,g.pathnameBase]))}return a}function cg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=jR(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:y,isOptional:T}=m;if(y==="*"){let k=u[g]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const b=u[g];return T&&!b?f[y]=void 0:f[y]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function jR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(i.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function FR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ha(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const BR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zR=t=>BR.test(t);function UR(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?go(t):t,o;if(n)if(zR(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),mf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=G0(n.substring(1),"/"):o=G0(n,e)}else o=e;return{pathname:o,search:$R(i),hash:qR(r)}}function G0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Dp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Z_(t,e){let n=HR(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function K_(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=go(t):(r=Ou({},t),it(!r.pathname||!r.pathname.includes("?"),Dp("?","pathname","search",r)),it(!r.pathname||!r.pathname.includes("#"),Dp("#","pathname","hash",r)),it(!r.search||!r.search.includes("#"),Dp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),g-=1;r.pathname=y.join("/")}u=g>=0?e[g]:"/"}let c=UR(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||m)&&(c.pathname+="/"),c}const Qr=t=>t.join("/").replace(/\/\/+/g,"/"),WR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$R=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nP=["post","put","patch","delete"];new Set(nP);const ZR=["get",...nP];new Set(ZR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Du.apply(this,arguments)}const gf=F.createContext(null),iP=F.createContext(null),pr=F.createContext(null),_f=F.createContext(null),vs=F.createContext({outlet:null,matches:[],isDataRoute:!1}),rP=F.createContext(null);function KR(t,e){let{relative:n}=e===void 0?{}:e;tl()||it(!1);let{basename:i,navigator:r}=F.useContext(pr),{hash:o,pathname:a,search:u}=vf(t,{relative:n}),c=a;return i!=="/"&&(c=a==="/"?i:Qr([i,a])),r.createHref({pathname:c,search:u,hash:o})}function tl(){return F.useContext(_f)!=null}function _o(){return tl()||it(!1),F.useContext(_f).location}function sP(t){F.useContext(pr).static||F.useLayoutEffect(t)}function yf(){let{isDataRoute:t}=F.useContext(vs);return t?l2():QR()}function QR(){tl()||it(!1);let t=F.useContext(gf),{basename:e,future:n,navigator:i}=F.useContext(pr),{matches:r}=F.useContext(vs),{pathname:o}=_o(),a=JSON.stringify(Z_(r,n.v7_relativeSplatPath)),u=F.useRef(!1);return sP(()=>{u.current=!0}),F.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=K_(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Qr([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function vf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=F.useContext(pr),{matches:r}=F.useContext(vs),{pathname:o}=_o(),a=JSON.stringify(Z_(r,i.v7_relativeSplatPath));return F.useMemo(()=>K_(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function YR(t,e){return XR(t,e)}function XR(t,e,n,i){tl()||it(!1);let{navigator:r}=F.useContext(pr),{matches:o}=F.useContext(vs),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=_o(),m;if(e){var g;let D=typeof e=="string"?go(e):e;c==="/"||(g=D.pathname)!=null&&g.startsWith(c)||it(!1),m=D}else m=f;let y=m.pathname||"/",T=y;if(c!=="/"){let D=c.replace(/^\//,"").split("/");T="/"+y.replace(/^\//,"").split("/").slice(D.length).join("/")}let b=IR(t,{pathname:T}),k=i2(b&&b.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:Qr([c,r.encodeLocation?r.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?c:Qr([c,r.encodeLocation?r.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),o,n,i);return e&&k?F.createElement(_f.Provider,{value:{location:Du({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Br.Pop}},k):k}function JR(){let t=a2(),e=GR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:r},n):null,null)}const e2=F.createElement(JR,null);class t2 extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(vs.Provider,{value:this.props.routeContext},F.createElement(rP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n2(t){let{routeContext:e,match:n,children:i}=t,r=F.useContext(gf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(vs.Provider,{value:e},i)}function i2(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||it(!1),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:y,errors:T}=n,b=g.route.loader&&y[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||b){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,y)=>{let T,b=!1,k=null,D=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||e2,c&&(f<0&&y===0?(u2("route-fallback"),b=!0,D=null):f===y&&(b=!0,D=g.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,y+1)),P=()=>{let S;return T?S=k:b?S=D:g.route.Component?S=F.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=m,F.createElement(n2,{match:g,routeContext:{outlet:m,matches:C,isDataRoute:n!=null},children:S})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?F.createElement(t2,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:P(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):P()},null)}var oP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(oP||{}),aP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(aP||{});function r2(t){let e=F.useContext(gf);return e||it(!1),e}function s2(t){let e=F.useContext(iP);return e||it(!1),e}function o2(t){let e=F.useContext(vs);return e||it(!1),e}function lP(t){let e=o2(),n=e.matches[e.matches.length-1];return n.route.id||it(!1),n.route.id}function a2(){var t;let e=F.useContext(rP),n=s2(),i=lP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function l2(){let{router:t}=r2(oP.UseNavigateStable),e=lP(aP.UseNavigateStable),n=F.useRef(!1);return sP(()=>{n.current=!0}),F.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Du({fromRouteId:e},o)))},[t,e])}const Z0={};function u2(t,e,n){Z0[t]||(Z0[t]=!0)}function c2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function uP(t){let{to:e,replace:n,state:i,relative:r}=t;tl()||it(!1);let{future:o,static:a}=F.useContext(pr),{matches:u}=F.useContext(vs),{pathname:c}=_o(),f=yf(),m=K_(e,Z_(u,o.v7_relativeSplatPath),c,r==="path"),g=JSON.stringify(m);return F.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function zs(t){it(!1)}function h2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Br.Pop,navigator:o,static:a=!1,future:u}=t;tl()&&it(!1);let c=e.replace(/^\/*/,"/"),f=F.useMemo(()=>({basename:c,navigator:o,static:a,future:Du({v7_relativeSplatPath:!1},u)}),[c,u,o,a]);typeof i=="string"&&(i=go(i));let{pathname:m="/",search:g="",hash:y="",state:T=null,key:b="default"}=i,k=F.useMemo(()=>{let D=Ha(m,c);return D==null?null:{location:{pathname:D,search:g,hash:y,state:T,key:b},navigationType:r}},[c,m,g,y,T,b,r]);return k==null?null:F.createElement(pr.Provider,{value:f},F.createElement(_f.Provider,{children:n,value:k}))}function d2(t){let{children:e,location:n}=t;return YR(hg(e),n)}new Promise(()=>{});function hg(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(i,r)=>{if(!F.isValidElement(i))return;let o=[...e,r];if(i.type===F.Fragment){n.push.apply(n,hg(i.props.children,o));return}i.type!==zs&&it(!1),!i.props.index||!i.props.children||it(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=hg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yd.apply(this,arguments)}function cP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function f2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function p2(t,e){return t.button===0&&(!e||e==="_self")&&!f2(t)}const m2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],g2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_2="6";try{window.__reactRouterVersion=_2}catch{}const y2=F.createContext({isTransitioning:!1}),v2="startTransition",K0=hk[v2];function w2(t){let{basename:e,children:n,future:i,window:r}=t,o=F.useRef();o.current==null&&(o.current=ER({window:r,v5Compat:!0}));let a=o.current,[u,c]=F.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=F.useCallback(g=>{f&&K0?K0(()=>c(g)):c(g)},[c,f]);return F.useLayoutEffect(()=>a.listen(m),[a,m]),F.useEffect(()=>c2(i),[i]),F.createElement(h2,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const T2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,E2=F.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:c,to:f,preventScrollReset:m,viewTransition:g}=e,y=cP(e,m2),{basename:T}=F.useContext(pr),b,k=!1;if(typeof f=="string"&&x2.test(f)&&(b=f,T2))try{let S=new URL(window.location.href),B=f.startsWith("//")?new URL(S.protocol+f):new URL(f),q=Ha(B.pathname,T);B.origin===S.origin&&q!=null?f=q+B.search+B.hash:k=!0}catch{}let D=KR(f,{relative:r}),C=I2(f,{replace:a,state:u,target:c,preventScrollReset:m,relative:r,viewTransition:g});function P(S){i&&i(S),S.defaultPrevented||C(S)}return F.createElement("a",yd({},y,{href:b||D,onClick:k||o?i:P,ref:n,target:c}))}),P2=F.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:c,viewTransition:f,children:m}=e,g=cP(e,g2),y=vf(c,{relative:g.relative}),T=_o(),b=F.useContext(iP),{navigator:k,basename:D}=F.useContext(pr),C=b!=null&&C2(y)&&f===!0,P=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,S=T.pathname,B=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(S=S.toLowerCase(),B=B?B.toLowerCase():null,P=P.toLowerCase()),B&&D&&(B=Ha(B,D)||B);const q=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let Z=S===P||!a&&S.startsWith(P)&&S.charAt(q)==="/",R=B!=null&&(B===P||!a&&B.startsWith(P)&&B.charAt(P.length)==="/"),I={isActive:Z,isPending:R,isTransitioning:C},N=Z?i:void 0,O;typeof o=="function"?O=o(I):O=[o,Z?"active":null,R?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(I):u;return F.createElement(E2,yd({},g,{"aria-current":N,className:O,ref:n,style:V,to:c,viewTransition:f}),typeof m=="function"?m(I):m)});var dg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dg||(dg={}));var Q0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Q0||(Q0={}));function S2(t){let e=F.useContext(gf);return e||it(!1),e}function I2(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,c=yf(),f=_o(),m=vf(t,{relative:a});return F.useCallback(g=>{if(p2(g,n)){g.preventDefault();let y=i!==void 0?i:_d(f)===_d(m);c(t,{replace:y,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,c,m,i,r,n,t,o,a,u])}function C2(t,e){e===void 0&&(e={});let n=F.useContext(y2);n==null&&it(!1);let{basename:i}=S2(dg.useViewTransitionState),r=vf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ha(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Ha(n.nextLocation.pathname,i)||n.nextLocation.pathname;return cg(r.pathname,a)!=null||cg(r.pathname,o)!=null}const hP=F.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),wf=F.createContext({}),Tf=F.createContext(null),xf=typeof document<"u",Q_=xf?F.useLayoutEffect:F.useEffect,dP=F.createContext({strict:!1}),Y_=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),A2="framerAppearId",fP="data-"+Y_(A2);function k2(t,e,n,i){const{visualElement:r}=F.useContext(wf),o=F.useContext(dP),a=F.useContext(Tf),u=F.useContext(hP).reducedMotion,c=F.useRef();i=i||o.renderer,!c.current&&i&&(c.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=c.current;F.useInsertionEffect(()=>{f&&f.update(n,a)});const m=F.useRef(!!(n[fP]&&!window.HandoffComplete));return Q_(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),F.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function ya(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function b2(t,e,n){return F.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):ya(n)&&(n.current=i))},[e])}function Vu(t){return typeof t=="string"||Array.isArray(t)}function Ef(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const X_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],J_=["initial",...X_];function Pf(t){return Ef(t.animate)||J_.some(e=>Vu(t[e]))}function pP(t){return!!(Pf(t)||t.variants)}function R2(t,e){if(Pf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Vu(n)?n:void 0,animate:Vu(i)?i:void 0}}return t.inherit!==!1?e:{}}function L2(t){const{initial:e,animate:n}=R2(t,F.useContext(wf));return F.useMemo(()=>({initial:e,animate:n}),[Y0(e),Y0(n)])}function Y0(t){return Array.isArray(t)?t.join(" "):t}const X0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ju={};for(const t in X0)ju[t]={isEnabled:e=>X0[t].some(n=>!!e[n])};function N2(t){for(const e in t)ju[e]={...ju[e],...t[e]}}const ey=F.createContext({}),mP=F.createContext({}),M2=Symbol.for("motionComponentSymbol");function O2({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&N2(t);function o(u,c){let f;const m={...F.useContext(hP),...u,layoutId:D2(u)},{isStatic:g}=m,y=L2(u),T=i(u,g);if(!g&&xf){y.visualElement=k2(r,T,m,e);const b=F.useContext(mP),k=F.useContext(dP).strict;y.visualElement&&(f=y.visualElement.loadFeatures(m,k,t,b))}return F.createElement(wf.Provider,{value:y},f&&y.visualElement?F.createElement(f,{visualElement:y.visualElement,...m}):null,n(r,u,b2(T,y.visualElement,c),T,g,y.visualElement))}const a=F.forwardRef(o);return a[M2]=r,a}function D2({layoutId:t}){const e=F.useContext(ey).id;return e&&t!==void 0?e+"-"+t:t}function V2(t){function e(i,r={}){return O2(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const j2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ty(t){return typeof t!="string"||t.includes("-")?!1:!!(j2.indexOf(t)>-1||/[A-Z]/.test(t))}const vd={};function F2(t){Object.assign(vd,t)}const Ju=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yo=new Set(Ju);function gP(t,{layout:e,layoutId:n}){return yo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vd[t]||t==="opacity")}const fn=t=>!!(t&&t.getVelocity),B2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},z2=Ju.length;function U2(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<z2;a++){const u=Ju[a];if(t[u]!==void 0){const c=B2[u]||u;o+=`${c}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const _P=t=>e=>typeof e=="string"&&e.startsWith(t),yP=_P("--"),fg=_P("var(--"),H2=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,W2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,os=(t,e,n)=>Math.min(Math.max(n,t),e),vo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},lu={...vo,transform:t=>os(0,1,t)},ch={...vo,default:1},uu=t=>Math.round(t*1e5)/1e5,Sf=/(-)?([\d]*\.?[\d])+/g,vP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,$2=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ec(t){return typeof t=="string"}const tc=t=>({test:e=>ec(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ar=tc("deg"),vi=tc("%"),me=tc("px"),q2=tc("vh"),G2=tc("vw"),J0={...vi,parse:t=>vi.parse(t)/100,transform:t=>vi.transform(t*100)},ew={...vo,transform:Math.round},wP={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,size:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,rotate:Ar,rotateX:Ar,rotateY:Ar,rotateZ:Ar,scale:ch,scaleX:ch,scaleY:ch,scaleZ:ch,skew:Ar,skewX:Ar,skewY:Ar,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:lu,originX:J0,originY:J0,originZ:me,zIndex:ew,fillOpacity:lu,strokeOpacity:lu,numOctaves:ew};function ny(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let c=!1,f=!1,m=!0;for(const g in e){const y=e[g];if(yP(g)){o[g]=y;continue}const T=wP[g],b=W2(y,T);if(yo.has(g)){if(c=!0,a[g]=b,!m)continue;y!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=b):r[g]=b}if(e.transform||(c||i?r.transform=U2(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:y="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${y} ${T}`}}const iy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TP(t,e,n){for(const i in e)!fn(e[i])&&!gP(i,n)&&(t[i]=e[i])}function Z2({transformTemplate:t},e,n){return F.useMemo(()=>{const i=iy();return ny(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function K2(t,e,n){const i=t.style||{},r={};return TP(r,i,t),Object.assign(r,Z2(t,e,n)),t.transformValues?t.transformValues(r):r}function Q2(t,e,n){const i={},r=K2(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const Y2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Y2.has(t)}let xP=t=>!wd(t);function X2(t){t&&(xP=e=>e.startsWith("on")?!wd(e):t(e))}try{X2(require("@emotion/is-prop-valid").default)}catch{}function J2(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(xP(r)||n===!0&&wd(r)||!e&&!wd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function tw(t,e,n){return typeof t=="string"?t:me.transform(e+n*t)}function eL(t,e,n){const i=tw(e,t.x,t.width),r=tw(n,t.y,t.height);return`${i} ${r}`}const tL={offset:"stroke-dashoffset",array:"stroke-dasharray"},nL={offset:"strokeDashoffset",array:"strokeDasharray"};function iL(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?tL:nL;t[o.offset]=me.transform(-i);const a=me.transform(e),u=me.transform(n);t[o.array]=`${a} ${u}`}function ry(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:c=0,...f},m,g,y){if(ny(t,f,m,y),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:b,dimensions:k}=t;T.transform&&(k&&(b.transform=T.transform),delete T.transform),k&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=eL(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&iL(T,a,u,c,!1)}const EP=()=>({...iy(),attrs:{}}),sy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function rL(t,e,n,i){const r=F.useMemo(()=>{const o=EP();return ry(o,e,{enableHardwareAcceleration:!1},sy(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};TP(o,t.style,t),r.style={...o,...r.style}}return r}function sL(t=!1){return(n,i,r,{latestValues:o},a)=>{const c=(ty(n)?rL:Q2)(i,o,a,n),m={...J2(i,typeof n=="string",t),...c,ref:r},{children:g}=i,y=F.useMemo(()=>fn(g)?g.get():g,[g]);return F.createElement(n,{...m,children:y})}}function PP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const SP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IP(t,e,n,i){PP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(SP.has(r)?r:Y_(r),e.attrs[r])}function oy(t,e){const{style:n}=t,i={};for(const r in n)(fn(n[r])||e.style&&fn(e.style[r])||gP(r,t))&&(i[r]=n[r]);return i}function CP(t,e){const n=oy(t,e);for(const i in t)if(fn(t[i])||fn(e[i])){const r=Ju.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function ay(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function AP(t){const e=F.useRef(null);return e.current===null&&(e.current=t()),e.current}const Td=t=>Array.isArray(t),oL=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),aL=t=>Td(t)?t[t.length-1]||0:t;function Oh(t){const e=fn(t)?t.get():t;return oL(e)?e.toValue():e}function lL({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:uL(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const kP=t=>(e,n)=>{const i=F.useContext(wf),r=F.useContext(Tf),o=()=>lL(t,e,i,r);return n?o():AP(o)};function uL(t,e,n,i){const r={},o=i(t,{});for(const y in o)r[y]=Oh(o[y]);let{initial:a,animate:u}=t;const c=Pf(t),f=pP(t);e&&f&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Ef(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const b=ay(t,T);if(!b)return;const{transitionEnd:k,transition:D,...C}=b;for(const P in C){let S=C[P];if(Array.isArray(S)){const B=m?S.length-1:0;S=S[B]}S!==null&&(r[P]=S)}for(const P in k)r[P]=k[P]}),r}const dt=t=>t;class nw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function cL(t){let e=new nw,n=new nw,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(c,f=!1,m=!1)=>{const g=m&&r,y=g?e:n;return f&&a.add(c),y.add(c)&&g&&r&&(i=e.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(c),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(c))}};return u}const hh=["prepare","read","update","preRender","render","postRender"],hL=40;function dL(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=hh.reduce((g,y)=>(g[y]=cL(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,hL),1),r.timestamp=g,r.isProcessing=!0,hh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},c=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:hh.reduce((g,y)=>{const T=o[y];return g[y]=(b,k=!1,D=!1)=>(n||c(),T.schedule(b,k,D)),g},{}),cancel:g=>hh.forEach(y=>o[y].cancel(g)),state:r,steps:o}}const{schedule:qe,cancel:ar,state:zt,steps:Vp}=dL(typeof requestAnimationFrame<"u"?requestAnimationFrame:dt,!0),fL={useVisualState:kP({scrapeMotionValuesFromProps:CP,createRenderState:EP,onMount:(t,e,{renderState:n,latestValues:i})=>{qe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),qe.render(()=>{ry(n,i,{enableHardwareAcceleration:!1},sy(e.tagName),t.transformTemplate),IP(e,n)})}})},pL={useVisualState:kP({scrapeMotionValuesFromProps:oy,createRenderState:iy})};function mL(t,{forwardMotionProps:e=!1},n,i){return{...ty(t)?fL:pL,preloadedFeatures:n,useRender:sL(e),createVisualElement:i,Component:t}}function Qi(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const bP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function If(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const gL=t=>e=>bP(e)&&t(e,If(e));function er(t,e,n,i){return Qi(t,e,gL(n),i)}const _L=(t,e)=>n=>e(t(n)),Yr=(...t)=>t.reduce(_L);function RP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const iw=RP("dragHorizontal"),rw=RP("dragVertical");function LP(t){let e=!1;if(t==="y")e=rw();else if(t==="x")e=iw();else{const n=iw(),i=rw();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function NP(){const t=LP(!0);return t?(t(),!1):!0}class ws{constructor(e){this.isMounted=!1,this.node=e}update(){}}function sw(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||NP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&qe.update(()=>u[i](o,a))};return er(t.current,n,r,{passive:!t.getProps()[i]})}class yL extends ws{mount(){this.unmount=Yr(sw(this.node,!0),sw(this.node,!1))}unmount(){}}class vL extends ws{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yr(Qi(this.node.current,"focus",()=>this.onFocus()),Qi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const MP=(t,e)=>e?t===e?!0:MP(t,e.parentElement):!1;function jp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,If(n))}class wL extends ws{constructor(){super(...arguments),this.removeStartListeners=dt,this.removeEndListeners=dt,this.removeAccessibleListeners=dt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=er(window,"pointerup",(u,c)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();qe.update(()=>{!g&&!MP(this.node.current,u.target)?m&&m(u,c):f&&f(u,c)})},{passive:!(i.onTap||i.onPointerUp)}),a=er(window,"pointercancel",(u,c)=>this.cancelPress(u,c),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Yr(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||jp("up",(c,f)=>{const{onTap:m}=this.node.getProps();m&&qe.update(()=>m(c,f))})};this.removeEndListeners(),this.removeEndListeners=Qi(this.node.current,"keyup",a),jp("down",(u,c)=>{this.startPress(u,c)})},n=Qi(this.node.current,"keydown",e),i=()=>{this.isPressing&&jp("cancel",(o,a)=>this.cancelPress(o,a))},r=Qi(this.node.current,"blur",i);this.removeAccessibleListeners=Yr(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&qe.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!NP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&qe.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=er(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Qi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Yr(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const pg=new WeakMap,Fp=new WeakMap,TL=t=>{const e=pg.get(t.target);e&&e(t)},xL=t=>{t.forEach(TL)};function EL({root:t,...e}){const n=t||document;Fp.has(n)||Fp.set(n,{});const i=Fp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(xL,{root:t,...e})),i[r]}function PL(t,e,n){const i=EL(e);return pg.set(t,n),i.observe(t),()=>{pg.delete(t),i.unobserve(t)}}const SL={some:0,all:1};class IL extends ws{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:SL[r]},u=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),y=f?m:g;y&&y(c)};return PL(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(CL(e,n))&&this.startObserver()}unmount(){}}function CL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const AL={inView:{Feature:IL},tap:{Feature:wL},focus:{Feature:vL},hover:{Feature:yL}};function OP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function kL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function bL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Cf(t,e,n){const i=t.getProps();return ay(i,e,n!==void 0?n:i.custom,kL(t),bL(t))}let ly=dt;const Js=t=>t*1e3,tr=t=>t/1e3,RL={current:!1},DP=t=>Array.isArray(t)&&typeof t[0]=="number";function VP(t){return!!(!t||typeof t=="string"&&jP[t]||DP(t)||Array.isArray(t)&&t.every(VP))}const Zl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,jP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zl([0,.65,.55,1]),circOut:Zl([.55,0,1,.45]),backIn:Zl([.31,.01,.66,-.59]),backOut:Zl([.33,1.53,.69,.99])};function FP(t){if(t)return DP(t)?Zl(t):Array.isArray(t)?t.map(FP):jP[t]}function LL(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:c}={}){const f={[e]:n};c&&(f.offset=c);const m=FP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function NL(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const BP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ML=1e-7,OL=12;function DL(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=BP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>ML&&++u<OL);return a}function nc(t,e,n,i){if(t===e&&n===i)return dt;const r=o=>DL(o,0,1,t,n);return o=>o===0||o===1?o:BP(r(o),e,i)}const VL=nc(.42,0,1,1),jL=nc(0,0,.58,1),zP=nc(.42,0,.58,1),FL=t=>Array.isArray(t)&&typeof t[0]!="number",UP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,HP=t=>e=>1-t(1-e),uy=t=>1-Math.sin(Math.acos(t)),WP=HP(uy),BL=UP(uy),$P=nc(.33,1.53,.69,.99),cy=HP($P),zL=UP(cy),UL=t=>(t*=2)<1?.5*cy(t):.5*(2-Math.pow(2,-10*(t-1))),HL={linear:dt,easeIn:VL,easeInOut:zP,easeOut:jL,circIn:uy,circInOut:BL,circOut:WP,backIn:cy,backInOut:zL,backOut:$P,anticipate:UL},ow=t=>{if(Array.isArray(t)){ly(t.length===4);const[e,n,i,r]=t;return nc(e,n,i,r)}else if(typeof t=="string")return HL[t];return t},hy=(t,e)=>n=>!!(ec(n)&&$2.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),qP=(t,e,n)=>i=>{if(!ec(i))return i;const[r,o,a,u]=i.match(Sf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},WL=t=>os(0,255,t),Bp={...vo,transform:t=>Math.round(WL(t))},Ks={test:hy("rgb","red"),parse:qP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Bp.transform(t)+", "+Bp.transform(e)+", "+Bp.transform(n)+", "+uu(lu.transform(i))+")"};function $L(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const mg={test:hy("#"),parse:$L,transform:Ks.transform},va={test:hy("hsl","hue"),parse:qP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+vi.transform(uu(e))+", "+vi.transform(uu(n))+", "+uu(lu.transform(i))+")"},Qt={test:t=>Ks.test(t)||mg.test(t)||va.test(t),parse:t=>Ks.test(t)?Ks.parse(t):va.test(t)?va.parse(t):mg.parse(t),transform:t=>ec(t)?t:t.hasOwnProperty("red")?Ks.transform(t):va.transform(t)},tt=(t,e,n)=>-n*t+n*e+t;function zp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function qL({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;r=zp(c,u,t+1/3),o=zp(c,u,t),a=zp(c,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Up=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},GL=[mg,Ks,va],ZL=t=>GL.find(e=>e.test(t));function aw(t){const e=ZL(t);let n=e.parse(t);return e===va&&(n=qL(n)),n}const GP=(t,e)=>{const n=aw(t),i=aw(e),r={...n};return o=>(r.red=Up(n.red,i.red,o),r.green=Up(n.green,i.green,o),r.blue=Up(n.blue,i.blue,o),r.alpha=tt(n.alpha,i.alpha,o),Ks.transform(r))};function KL(t){var e,n;return isNaN(t)&&ec(t)&&(((e=t.match(Sf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(vP))===null||n===void 0?void 0:n.length)||0)>0}const ZP={regex:H2,countKey:"Vars",token:"${v}",parse:dt},KP={regex:vP,countKey:"Colors",token:"${c}",parse:Qt.parse},QP={regex:Sf,countKey:"Numbers",token:"${n}",parse:vo.parse};function Hp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function xd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Hp(n,ZP),Hp(n,KP),Hp(n,QP),n}function YP(t){return xd(t).values}function XP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=xd(t),o=e.length;return a=>{let u=r;for(let c=0;c<o;c++)c<i?u=u.replace(ZP.token,a[c]):c<i+n?u=u.replace(KP.token,Qt.transform(a[c])):u=u.replace(QP.token,uu(a[c]));return u}}const QL=t=>typeof t=="number"?0:t;function YL(t){const e=YP(t);return XP(t)(e.map(QL))}const as={test:KL,parse:YP,createTransformer:XP,getAnimatableNone:YL},JP=(t,e)=>n=>`${n>0?e:t}`;function eS(t,e){return typeof t=="number"?n=>tt(t,e,n):Qt.test(t)?GP(t,e):t.startsWith("var(")?JP(t,e):nS(t,e)}const tS=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>eS(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},XL=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=eS(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},nS=(t,e)=>{const n=as.createTransformer(e),i=xd(t),r=xd(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Yr(tS(i.values,r.values),n):JP(t,e)},Fu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},lw=(t,e)=>n=>tt(t,e,n);function JL(t){return typeof t=="number"?lw:typeof t=="string"?Qt.test(t)?GP:nS:Array.isArray(t)?tS:typeof t=="object"?XL:lw}function eN(t,e,n){const i=[],r=n||JL(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||dt:e;u=Yr(c,u)}i.push(u)}return i}function iS(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(ly(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=eN(e,i,r),u=a.length,c=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Fu(t[m],t[m+1],f);return a[m](g)};return n?f=>c(os(t[0],t[o-1],f)):c}function tN(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Fu(0,e,i);t.push(tt(n,1,r))}}function nN(t){const e=[0];return tN(e,t.length-1),e}function iN(t,e){return t.map(n=>n*e)}function rN(t,e){return t.map(()=>e||zP).splice(0,t.length-1)}function Ed({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=FL(i)?i.map(ow):ow(i),o={done:!1,value:e[0]},a=iN(n&&n.length===e.length?n:nN(e),t),u=iS(a,e,{ease:Array.isArray(r)?r:rN(e,r)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}function rS(t,e){return e?t*(1e3/e):0}const sN=5;function sS(t,e,n){const i=Math.max(e-sN,0);return rS(n-t(i),e-i)}const Wp=.001,oN=.01,aN=10,lN=.05,uN=1;function cN({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=os(lN,uN,a),t=os(oN,aN,tr(t)),a<1?(r=f=>{const m=f*a,g=m*t,y=m-n,T=gg(f,a),b=Math.exp(-g);return Wp-y/T*b},o=f=>{const g=f*a*t,y=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,b=Math.exp(-g),k=gg(Math.pow(f,2),a);return(-r(f)+Wp>0?-1:1)*((y-T)*b)/k}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Wp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,c=dN(r,o,u);if(t=Js(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(c,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const hN=12;function dN(t,e,n){let i=n;for(let r=1;r<hN;r++)i=i-t(i)/e(i);return i}function gg(t,e){return t*Math.sqrt(1-e*e)}const fN=["duration","bounce"],pN=["stiffness","damping","mass"];function uw(t,e){return e.some(n=>t[n]!==void 0)}function mN(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!uw(t,pN)&&uw(t,fN)){const n=cN(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function oS({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:c,mass:f,duration:m,velocity:g,isResolvedFromDuration:y}=mN({...i,velocity:-tr(i.velocity||0)}),T=g||0,b=c/(2*Math.sqrt(u*f)),k=o-r,D=tr(Math.sqrt(u/f)),C=Math.abs(k)<5;n||(n=C?.01:2),e||(e=C?.005:.5);let P;if(b<1){const S=gg(D,b);P=B=>{const q=Math.exp(-b*D*B);return o-q*((T+b*D*k)/S*Math.sin(S*B)+k*Math.cos(S*B))}}else if(b===1)P=S=>o-Math.exp(-D*S)*(k+(T+D*k)*S);else{const S=D*Math.sqrt(b*b-1);P=B=>{const q=Math.exp(-b*D*B),Z=Math.min(S*B,300);return o-q*((T+b*D*k)*Math.sinh(Z)+S*k*Math.cosh(Z))/S}}return{calculatedDuration:y&&m||null,next:S=>{const B=P(S);if(y)a.done=S>=m;else{let q=T;S!==0&&(b<1?q=sS(P,S,B):q=0);const Z=Math.abs(q)<=n,R=Math.abs(o-B)<=e;a.done=Z&&R}return a.value=a.done?o:B,a}}}function cw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:c,restDelta:f=.5,restSpeed:m}){const g=t[0],y={done:!1,value:g},T=I=>u!==void 0&&I<u||c!==void 0&&I>c,b=I=>u===void 0?c:c===void 0||Math.abs(u-I)<Math.abs(c-I)?u:c;let k=n*e;const D=g+k,C=a===void 0?D:a(D);C!==D&&(k=C-g);const P=I=>-k*Math.exp(-I/i),S=I=>C+P(I),B=I=>{const N=P(I),O=S(I);y.done=Math.abs(N)<=f,y.value=y.done?C:O};let q,Z;const R=I=>{T(y.value)&&(q=I,Z=oS({keyframes:[y.value,b(y.value)],velocity:sS(S,I,y.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:I=>{let N=!1;return!Z&&q===void 0&&(N=!0,B(I),R(I)),q!==void 0&&I>q?Z.next(I-q):(!N&&B(I),y)}}}const gN=t=>{const e=({timestamp:n})=>t(n);return{start:()=>qe.update(e,!0),stop:()=>ar(e),now:()=>zt.isProcessing?zt.timestamp:performance.now()}},hw=2e4;function dw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<hw;)e+=n,i=t.next(e);return e>=hw?1/0:e}const _N={decay:cw,inertia:cw,tween:Ed,keyframes:Ed,spring:oS};function Pd({autoplay:t=!0,delay:e=0,driver:n=gN,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:c,onStop:f,onComplete:m,onUpdate:g,...y}){let T=1,b=!1,k,D;const C=()=>{D=new Promise(te=>{k=te})};C();let P;const S=_N[r]||Ed;let B;S!==Ed&&typeof i[0]!="number"&&(B=iS([0,100],i,{clamp:!1}),i=[0,100]);const q=S({...y,keyframes:i});let Z;u==="mirror"&&(Z=S({...y,keyframes:[...i].reverse(),velocity:-(y.velocity||0)}));let R="idle",I=null,N=null,O=null;q.calculatedDuration===null&&o&&(q.calculatedDuration=dw(q));const{calculatedDuration:V}=q;let z=1/0,M=1/0;V!==null&&(z=V+a,M=z*(o+1)-a);let ne=0;const Ce=te=>{if(N===null)return;T>0&&(N=Math.min(N,te)),T<0&&(N=Math.min(te-M/T,N)),I!==null?ne=I:ne=Math.round(te-N)*T;const xe=ne-e*(T>=0?1:-1),Ge=T>=0?xe<0:xe>M;ne=Math.max(xe,0),R==="finished"&&I===null&&(ne=M);let ke=ne,Ee=q;if(o){const Li=Math.min(ne,M)/z;let ri=Math.floor(Li),mn=Li%1;!mn&&Li>=1&&(mn=1),mn===1&&ri--,ri=Math.min(ri,o+1),!!(ri%2)&&(u==="reverse"?(mn=1-mn,a&&(mn-=a/z)):u==="mirror"&&(Ee=Z)),ke=os(0,1,mn)*z}const de=Ge?{done:!1,value:i[0]}:Ee.next(ke);B&&(de.value=B(de.value));let{done:lt}=de;!Ge&&V!==null&&(lt=T>=0?ne>=M:ne<=0);const tn=I===null&&(R==="finished"||R==="running"&&lt);return g&&g(de.value),tn&&G(),de},ce=()=>{P&&P.stop(),P=void 0},Ae=()=>{R="idle",ce(),k(),C(),N=O=null},G=()=>{R="finished",m&&m(),ce(),k()},ae=()=>{if(b)return;P||(P=n(Ce));const te=P.now();c&&c(),I!==null?N=te-I:(!N||R==="finished")&&(N=te),R==="finished"&&C(),O=N,I=null,R="running",P.start()};t&&ae();const J={then(te,xe){return D.then(te,xe)},get time(){return tr(ne)},set time(te){te=Js(te),ne=te,I!==null||!P||T===0?I=te:N=P.now()-te/T},get duration(){const te=q.calculatedDuration===null?dw(q):q.calculatedDuration;return tr(te)},get speed(){return T},set speed(te){te===T||!P||(T=te,J.time=tr(ne))},get state(){return R},play:ae,pause:()=>{R="paused",I=ne},stop:()=>{b=!0,R!=="idle"&&(R="idle",f&&f(),Ae())},cancel:()=>{O!==null&&Ce(O),Ae()},complete:()=>{R="finished"},sample:te=>(N=0,Ce(te))};return J}function yN(t){let e;return()=>(e===void 0&&(e=t()),e)}const vN=yN(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),wN=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),dh=10,TN=2e4,xN=(t,e)=>e.type==="spring"||t==="backgroundColor"||!VP(e.ease);function EN(t,e,{onUpdate:n,onComplete:i,...r}){if(!(vN()&&wN.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,c,f=!1;const m=()=>{c=new Promise(S=>{u=S})};m();let{keyframes:g,duration:y=300,ease:T,times:b}=r;if(xN(e,r)){const S=Pd({...r,repeat:0,delay:0});let B={done:!1,value:g[0]};const q=[];let Z=0;for(;!B.done&&Z<TN;)B=S.sample(Z),q.push(B.value),Z+=dh;b=void 0,g=q,y=Z-dh,T="linear"}const k=LL(t.owner.current,e,g,{...r,duration:y,ease:T,times:b}),D=()=>{f=!1,k.cancel()},C=()=>{f=!0,qe.update(D),u(),m()};return k.onfinish=()=>{f||(t.set(NL(g,r)),i&&i(),C())},{then(S,B){return c.then(S,B)},attachTimeline(S){return k.timeline=S,k.onfinish=null,dt},get time(){return tr(k.currentTime||0)},set time(S){k.currentTime=Js(S)},get speed(){return k.playbackRate},set speed(S){k.playbackRate=S},get duration(){return tr(y)},play:()=>{a||(k.play(),ar(D))},pause:()=>k.pause(),stop:()=>{if(a=!0,k.playState==="idle")return;const{currentTime:S}=k;if(S){const B=Pd({...r,autoplay:!1});t.setWithVelocity(B.sample(S-dh).value,B.sample(S).value,dh)}C()},complete:()=>{f||k.finish()},cancel:C}}function PN({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:dt,pause:dt,stop:dt,then:o=>(o(),Promise.resolve()),cancel:dt,complete:dt});return e?Pd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const SN={type:"spring",stiffness:500,damping:25,restSpeed:10},IN=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CN={type:"keyframes",duration:.8},AN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kN=(t,{keyframes:e})=>e.length>2?CN:yo.has(t)?t.startsWith("scale")?IN(e[1]):SN:AN,_g=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(as.test(e)||e==="0")&&!e.startsWith("url(")),bN=new Set(["brightness","contrast","saturate","opacity"]);function RN(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Sf)||[];if(!i)return t;const r=n.replace(i,"");let o=bN.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const LN=/([a-z-]*)\(.*?\)/g,yg={...as,getAnimatableNone:t=>{const e=t.match(LN);return e?e.map(RN).join(" "):t}},NN={...wP,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:yg,WebkitFilter:yg},dy=t=>NN[t];function aS(t,e){let n=dy(t);return n!==yg&&(n=as),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lS=t=>/^0[^.\s]+$/.test(t);function MN(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||lS(t)}function ON(t,e,n,i){const r=_g(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const c=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),MN(o[f])&&c.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&c.length&&u)for(let f=0;f<c.length;f++){const m=c[f];o[m]=aS(e,u)}return o}function DN({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:c,elapsed:f,...m}){return!!Object.keys(m).length}function fy(t,e){return t[e]||t.default||t}const VN={skipAnimations:!1},py=(t,e,n,i={})=>r=>{const o=fy(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Js(a);const c=ON(e,t,n,o),f=c[0],m=c[c.length-1],g=_g(t,f),y=_g(t,m);let T={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:b=>{e.set(b),o.onUpdate&&o.onUpdate(b)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(DN(o)||(T={...T,...kN(t,T)}),T.duration&&(T.duration=Js(T.duration)),T.repeatDelay&&(T.repeatDelay=Js(T.repeatDelay)),!g||!y||RL.current||o.type===!1||VN.skipAnimations)return PN(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=EN(e,t,T);if(b)return b}return Pd(T)};function Sd(t){return!!(fn(t)&&t.add)}const uS=t=>/^\-?\d*\.?\d+$/.test(t);function my(t,e){t.indexOf(e)===-1&&t.push(e)}function gy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class _y{constructor(){this.subscriptions=[]}add(e){return my(this.subscriptions,e),()=>gy(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const jN=t=>!isNaN(parseFloat(t));class FN{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=zt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,qe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>qe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=jN(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new _y);const i=this.events[e].add(n);return e==="change"?()=>{i(),qe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?rS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wa(t,e){return new FN(t,e)}const cS=t=>e=>e.test(t),BN={test:t=>t==="auto",parse:t=>t},hS=[vo,me,vi,Ar,G2,q2,BN],Ul=t=>hS.find(cS(t)),zN=[...hS,Qt,as],UN=t=>zN.find(cS(t));function HN(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Wa(n))}function WN(t,e){const n=Cf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=aL(o[a]);HN(t,a,u)}}function $N(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const c=o[u],f=e[c];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[c])!==null&&i!==void 0?i:t.readValue(c))!==null&&r!==void 0?r:e[c]),m!=null&&(typeof m=="string"&&(uS(m)||lS(m))?m=parseFloat(m):!UN(m)&&as.test(f)&&(m=aS(c,f)),t.addValue(c,Wa(m,{owner:t})),n[c]===void 0&&(n[c]=m),m!==null&&t.setBaseTarget(c,m))}}function qN(t,e){return e?(e[t]||e.default||e).from:void 0}function GN(t,e,n){const i={};for(const r in t){const o=qN(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function ZN({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function KN(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function dS(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const y=t.getValue(g),T=u[g];if(!y||T===void 0||m&&ZN(m,g))continue;const b={delay:n,elapsed:0,...fy(o||{},g)};if(window.HandoffAppearAnimations){const C=t.getProps()[fP];if(C){const P=window.HandoffAppearAnimations(C,g,y,qe);P!==null&&(b.elapsed=P,b.isHandoff=!0)}}let k=!b.isHandoff&&!KN(y,T);if(b.type==="spring"&&(y.getVelocity()||b.velocity)&&(k=!1),y.animation&&(k=!1),k)continue;y.start(py(g,y,T,t.shouldReduceMotion&&yo.has(g)?{type:!1}:b));const D=y.animation;Sd(c)&&(c.add(g),D.then(()=>c.remove(g))),f.push(D)}return a&&Promise.all(f).then(()=>{a&&WN(t,a)}),f}function vg(t,e,n={}){const i=Cf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(dS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return QN(t,e,f+c,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[c,f]=u==="beforeChildren"?[o,a]:[a,o];return c().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function QN(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,c=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(YN).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(vg(f,e,{...o,delay:n+c(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function YN(t,e){return t.sortNodePosition(e)}function XN(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>vg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=vg(t,e,n);else{const r=typeof e=="function"?Cf(t,e,n.custom):e;i=Promise.all(dS(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const JN=[...X_].reverse(),eM=X_.length;function tM(t){return e=>Promise.all(e.map(({animation:n,options:i})=>XN(t,n,i)))}function nM(t){let e=tM(t);const n=rM();let i=!0;const r=(c,f)=>{const m=Cf(t,f);if(m){const{transition:g,transitionEnd:y,...T}=m;c={...c,...T,...y}}return c};function o(c){e=c(t)}function a(c,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},y=[],T=new Set;let b={},k=1/0;for(let C=0;C<eM;C++){const P=JN[C],S=n[P],B=m[P]!==void 0?m[P]:g[P],q=Vu(B),Z=P===f?S.isActive:null;Z===!1&&(k=C);let R=B===g[P]&&B!==m[P]&&q;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),S.protectedKeys={...b},!S.isActive&&Z===null||!B&&!S.prevProp||Ef(B)||typeof B=="boolean")continue;let N=iM(S.prevProp,B)||P===f&&S.isActive&&!R&&q||C>k&&q,O=!1;const V=Array.isArray(B)?B:[B];let z=V.reduce(r,{});Z===!1&&(z={});const{prevResolvedValues:M={}}=S,ne={...M,...z},Ce=ce=>{N=!0,T.has(ce)&&(O=!0,T.delete(ce)),S.needsAnimating[ce]=!0};for(const ce in ne){const Ae=z[ce],G=M[ce];if(b.hasOwnProperty(ce))continue;let ae=!1;Td(Ae)&&Td(G)?ae=!OP(Ae,G):ae=Ae!==G,ae?Ae!==void 0?Ce(ce):T.add(ce):Ae!==void 0&&T.has(ce)?Ce(ce):S.protectedKeys[ce]=!0}S.prevProp=B,S.prevResolvedValues=z,S.isActive&&(b={...b,...z}),i&&t.blockInitialAnimation&&(N=!1),N&&(!R||O)&&y.push(...V.map(ce=>({animation:ce,options:{type:P,...c}})))}if(T.size){const C={};T.forEach(P=>{const S=t.getBaseTarget(P);S!==void 0&&(C[P]=S)}),y.push({animation:C})}let D=!!y.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(D=!1),i=!1,D?e(y):Promise.resolve()}function u(c,f,m){var g;if(n[c].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var b;return(b=T.animationState)===null||b===void 0?void 0:b.setActive(c,f)}),n[c].isActive=f;const y=a(m,c);for(const T in n)n[T].protectedKeys={};return y}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function iM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!OP(e,t):!1}function js(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rM(){return{animate:js(!0),whileInView:js(),whileHover:js(),whileTap:js(),whileDrag:js(),whileFocus:js(),exit:js()}}class sM extends ws{constructor(e){super(e),e.animationState||(e.animationState=nM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Ef(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let oM=0;class aM extends ws{constructor(){super(...arguments),this.id=oM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const lM={animation:{Feature:sM},exit:{Feature:aM}},fw=(t,e)=>Math.abs(t-e);function uM(t,e){const n=fw(t.x,e.x),i=fw(t.y,e.y);return Math.sqrt(n**2+i**2)}class fS{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=qp(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,T=uM(g.offset,{x:0,y:0})>=3;if(!y&&!T)return;const{point:b}=g,{timestamp:k}=zt;this.history.push({...b,timestamp:k});const{onStart:D,onMove:C}=this.handlers;y||(D&&D(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=$p(y,this.transformPagePoint),qe.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:T,onSessionEnd:b,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=qp(g.type==="pointercancel"?this.lastMoveEventInfo:$p(y,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,D),b&&b(g,D)},!bP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=If(e),u=$p(a,this.transformPagePoint),{point:c}=u,{timestamp:f}=zt;this.history=[{...c,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,qp(u,this.history)),this.removeListeners=Yr(er(this.contextWindow,"pointermove",this.handlePointerMove),er(this.contextWindow,"pointerup",this.handlePointerUp),er(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ar(this.updatePoint)}}function $p(t,e){return e?{point:e(t.point)}:t}function pw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qp({point:t},e){return{point:t,delta:pw(t,pS(e)),offset:pw(t,cM(e)),velocity:hM(e,.1)}}function cM(t){return t[0]}function pS(t){return t[t.length-1]}function hM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=pS(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Js(e)));)n--;if(!i)return{x:0,y:0};const o=tr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function xn(t){return t.max-t.min}function wg(t,e=0,n=.01){return Math.abs(t-e)<=n}function mw(t,e,n,i=.5){t.origin=i,t.originPoint=tt(e.min,e.max,t.origin),t.scale=xn(n)/xn(e),(wg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(wg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function cu(t,e,n,i){mw(t.x,e.x,n.x,i?i.originX:void 0),mw(t.y,e.y,n.y,i?i.originY:void 0)}function gw(t,e,n){t.min=n.min+e.min,t.max=t.min+xn(e)}function dM(t,e,n){gw(t.x,e.x,n.x),gw(t.y,e.y,n.y)}function _w(t,e,n){t.min=e.min-n.min,t.max=t.min+xn(e)}function hu(t,e,n){_w(t.x,e.x,n.x),_w(t.y,e.y,n.y)}function fM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?tt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?tt(n,t,i.max):Math.min(t,n)),t}function yw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function pM(t,{top:e,left:n,bottom:i,right:r}){return{x:yw(t.x,n,r),y:yw(t.y,e,i)}}function vw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function mM(t,e){return{x:vw(t.x,e.x),y:vw(t.y,e.y)}}function gM(t,e){let n=.5;const i=xn(t),r=xn(e);return r>i?n=Fu(e.min,e.max-i,t.min):i>r&&(n=Fu(t.min,t.max-r,e.min)),os(0,1,n)}function _M(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Tg=.35;function yM(t=Tg){return t===!1?t=0:t===!0&&(t=Tg),{x:ww(t,"left","right"),y:ww(t,"top","bottom")}}function ww(t,e,n){return{min:Tw(t,e),max:Tw(t,n)}}function Tw(t,e){return typeof t=="number"?t:t[e]||0}const xw=()=>({translate:0,scale:1,origin:0,originPoint:0}),wa=()=>({x:xw(),y:xw()}),Ew=()=>({min:0,max:0}),gt=()=>({x:Ew(),y:Ew()});function Nn(t){return[t("x"),t("y")]}function mS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function vM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Gp(t){return t===void 0||t===1}function xg({scale:t,scaleX:e,scaleY:n}){return!Gp(t)||!Gp(e)||!Gp(n)}function Us(t){return xg(t)||gS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function gS(t){return Pw(t.x)||Pw(t.y)}function Pw(t){return t&&t!=="0%"}function Id(t,e,n){const i=t-n,r=e*i;return n+r}function Sw(t,e,n,i,r){return r!==void 0&&(t=Id(t,r,i)),Id(t,n,i)+e}function Eg(t,e=0,n=1,i,r){t.min=Sw(t.min,e,n,i,r),t.max=Sw(t.max,e,n,i,r)}function _S(t,{x:e,y:n}){Eg(t.x,e.translate,e.scale,e.originPoint),Eg(t.y,n.translate,n.scale,n.originPoint)}function TM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ta(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,_S(t,a)),i&&Us(o.latestValues)&&Ta(t,o.latestValues))}e.x=Iw(e.x),e.y=Iw(e.y)}function Iw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Rr(t,e){t.min=t.min+e,t.max=t.max+e}function Cw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=tt(t.min,t.max,o);Eg(t,e[n],e[i],a,e.scale)}const xM=["x","scaleX","originX"],EM=["y","scaleY","originY"];function Ta(t,e){Cw(t.x,e,xM),Cw(t.y,e,EM)}function yS(t,e){return mS(wM(t.getBoundingClientRect(),e))}function PM(t,e,n){const i=yS(t,n),{scroll:r}=e;return r&&(Rr(i.x,r.offset.x),Rr(i.y,r.offset.y)),i}const vS=({current:t})=>t?t.ownerDocument.defaultView:null,SM=new WeakMap;class IM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(If(m,"page").point)},o=(m,g)=>{const{drag:y,dragPropagation:T,onDragStart:b}=this.getProps();if(y&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=LP(y),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nn(D=>{let C=this.getAxisMotionValue(D).get()||0;if(vi.test(C)){const{projection:P}=this.visualElement;if(P&&P.layout){const S=P.layout.layoutBox[D];S&&(C=xn(S)*(parseFloat(C)/100))}}this.originPoint[D]=C}),b&&qe.update(()=>b(m,g),!1,!0);const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:y,dragDirectionLock:T,onDirectionLock:b,onDrag:k}=this.getProps();if(!y&&!this.openGlobalLock)return;const{offset:D}=g;if(T&&this.currentDirection===null){this.currentDirection=CM(D),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,D),this.updateAxis("y",g.point,D),this.visualElement.render(),k&&k(m,g)},u=(m,g)=>this.stop(m,g),c=()=>Nn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new fS(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:vS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&qe.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!fh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=fM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&ya(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=pM(r.layoutBox,n):this.constraints=!1,this.elastic=yM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Nn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=_M(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ya(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=PM(i,r.root,this.visualElement.getTransformPagePoint());let a=mM(r.layout.layoutBox,o);if(n){const u=n(vM(a));this.hasMutatedConstraints=!!u,u&&(a=mS(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},f=Nn(m=>{if(!fh(m,n,this.currentDirection))return;let g=c&&c[m]||{};a&&(g={min:0,max:0});const y=r?200:1e6,T=r?40:1e7,b={type:"inertia",velocity:i?e[m]:0,bounceStiffness:y,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,b)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(py(e,i,0,n))}stopAnimation(){Nn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Nn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Nn(n=>{const{drag:i}=this.getProps();if(!fh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-tt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ya(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Nn(a=>{const u=this.getAxisMotionValue(a);if(u){const c=u.get();r[a]=gM({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Nn(a=>{if(!fh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:c,max:f}=this.constraints[a];u.set(tt(c,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;SM.set(this.visualElement,this);const e=this.visualElement.current,n=er(e,"pointerdown",c=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();ya(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=Qi(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Nn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=c[m].translate,g.set(g.get()+c[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Tg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function fh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function CM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class AM extends ws{constructor(e){super(e),this.removeGroupControls=dt,this.removeListeners=dt,this.controls=new IM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Aw=t=>(e,n)=>{t&&qe.update(()=>t(e,n))};class kM extends ws{constructor(){super(...arguments),this.removePointerDownListener=dt}onPointerDown(e){this.session=new fS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Aw(e),onStart:Aw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&qe.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=er(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function bM(){const t=F.useContext(Tf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=F.useId();return F.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Dh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Hl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(me.test(t))t=parseFloat(t);else return t;const n=kw(t,e.target.x),i=kw(t,e.target.y);return`${n}% ${i}%`}},RM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=as.parse(t);if(r.length>5)return i;const o=as.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=c;const f=tt(u,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class LM extends no.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;F2(NM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Dh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||qe.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wS(t){const[e,n]=bM(),i=F.useContext(ey);return no.createElement(LM,{...t,layoutGroup:i,switchLayoutGroup:F.useContext(mP),isPresent:e,safeToRemove:n})}const NM={borderRadius:{...Hl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hl,borderTopRightRadius:Hl,borderBottomLeftRadius:Hl,borderBottomRightRadius:Hl,boxShadow:RM},TS=["TopLeft","TopRight","BottomLeft","BottomRight"],MM=TS.length,bw=t=>typeof t=="string"?parseFloat(t):t,Rw=t=>typeof t=="number"||me.test(t);function OM(t,e,n,i,r,o){r?(t.opacity=tt(0,n.opacity!==void 0?n.opacity:1,DM(i)),t.opacityExit=tt(e.opacity!==void 0?e.opacity:1,0,VM(i))):o&&(t.opacity=tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<MM;a++){const u=`border${TS[a]}Radius`;let c=Lw(e,u),f=Lw(n,u);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||Rw(c)===Rw(f)?(t[u]=Math.max(tt(bw(c),bw(f),i),0),(vi.test(f)||vi.test(c))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,i))}function Lw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const DM=xS(0,.5,WP),VM=xS(.5,.95,dt);function xS(t,e,n){return i=>i<t?0:i>e?1:n(Fu(t,e,i))}function Nw(t,e){t.min=e.min,t.max=e.max}function Ln(t,e){Nw(t.x,e.x),Nw(t.y,e.y)}function Mw(t,e,n,i,r){return t-=e,t=Id(t,1/n,i),r!==void 0&&(t=Id(t,1/r,i)),t}function jM(t,e=0,n=1,i=.5,r,o=t,a=t){if(vi.test(e)&&(e=parseFloat(e),e=tt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=tt(o.min,o.max,i);t===o&&(u-=e),t.min=Mw(t.min,e,n,u,r),t.max=Mw(t.max,e,n,u,r)}function Ow(t,e,[n,i,r],o,a){jM(t,e[n],e[i],e[r],e.scale,o,a)}const FM=["x","scaleX","originX"],BM=["y","scaleY","originY"];function Dw(t,e,n,i){Ow(t.x,e,FM,n?n.x:void 0,i?i.x:void 0),Ow(t.y,e,BM,n?n.y:void 0,i?i.y:void 0)}function Vw(t){return t.translate===0&&t.scale===1}function ES(t){return Vw(t.x)&&Vw(t.y)}function zM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function PS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function jw(t){return xn(t.x)/xn(t.y)}class UM{constructor(){this.members=[]}add(e){my(this.members,e),e.scheduleRender()}remove(e){if(gy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Fw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:c,rotateX:f,rotateY:m}=n;c&&(i+=`rotate(${c}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const HM=(t,e)=>t.depth-e.depth;class WM{constructor(){this.children=[],this.isDirty=!1}add(e){my(this.children,e),this.isDirty=!0}remove(e){gy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(HM),this.isDirty=!1,this.children.forEach(e)}}function $M(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(ar(i),t(o-e))};return qe.read(i,!0),()=>ar(i)}function qM(t){window.MotionDebug&&window.MotionDebug.record(t)}function GM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function ZM(t,e,n){const i=fn(t)?t:Wa(t);return i.start(py("",i,e,n)),i.animation}const Bw=["","X","Y","Z"],KM={visibility:"hidden"},zw=1e3;let QM=0;const Hs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function SS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=QM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Hs.totalNodes=Hs.resolvedTargetDeltas=Hs.recalculatedProjection=0,this.nodes.forEach(JM),this.nodes.forEach(rO),this.nodes.forEach(sO),this.nodes.forEach(eO),qM(Hs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new WM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new _y),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const c=this.eventHandlers.get(a);c&&c.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=GM(a),this.instance=a;const{layoutId:c,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||c)&&(this.isLayoutDirty=!0),t){let g;const y=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=$M(y,250),Dh.hasAnimatedSinceResize&&(Dh.hasAnimatedSinceResize=!1,this.nodes.forEach(Hw))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeTargetChanged:T,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||cO,{onLayoutAnimationStart:D,onLayoutAnimationComplete:C}=m.getProps(),P=!this.targetLayout||!PS(this.targetLayout,b)||T,S=!y&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||y&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,S);const B={...fy(k,"layout"),onPlay:D,onComplete:C};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else y||Hw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ar(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Uw);return}this.isUpdating||this.nodes.forEach(nO),this.isUpdating=!1,this.nodes.forEach(iO),this.nodes.forEach(YM),this.nodes.forEach(XM),this.clearAllSnapshots();const u=performance.now();zt.delta=os(0,1e3/60,u-zt.timestamp),zt.timestamp=u,zt.isProcessing=!0,Vp.update.process(zt),Vp.preRender.process(zt),Vp.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(tO),this.sharedNodes.forEach(aO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!ES(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Us(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return a&&(c=this.removeTransform(c)),hO(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return gt();const u=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Rr(u.x,c.offset.x),Rr(u.y,c.offset.y)),u}removeElementScroll(a){const u=gt();Ln(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){Ln(u,a);const{scroll:y}=this.root;y&&(Rr(u.x,-y.offset.x),Rr(u.y,-y.offset.y))}Rr(u.x,m.offset.x),Rr(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const c=gt();Ln(c,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Ta(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Us(m.latestValues)&&Ta(c,m.latestValues)}return Us(this.latestValues)&&Ta(c,this.latestValues),c}removeTransform(a){const u=gt();Ln(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!Us(f.latestValues))continue;xg(f.latestValues)&&f.updateSnapshot();const m=gt(),g=f.measurePageBox();Ln(m,g),Dw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Us(this.latestValues)&&Dw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=zt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gt(),this.relativeTargetOrigin=gt(),hu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=gt(),this.targetWithTransforms=gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ln(this.target,this.layout.layoutBox),_S(this.target,this.targetDelta)):Ln(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gt(),this.relativeTargetOrigin=gt(),hu(this.relativeTargetOrigin,this.target,T.target),Ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Hs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||xg(this.parent.latestValues)||gS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Ln(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,T=this.treeScale.y;TM(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:b}=u;if(!b){this.projectionTransform&&(this.projectionDelta=wa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=wa(),this.projectionDeltaWithTransform=wa());const k=this.projectionTransform;cu(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=Fw(this.projectionDelta,this.treeScale),(this.projectionTransform!==k||this.treeScale.x!==y||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Hs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const c=this.snapshot,f=c?c.latestValues:{},m={...this.latestValues},g=wa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=gt(),T=c?c.source:void 0,b=this.layout?this.layout.source:void 0,k=T!==b,D=this.getStack(),C=!D||D.members.length<=1,P=!!(k&&!C&&this.options.crossfade===!0&&!this.path.some(uO));this.animationProgress=0;let S;this.mixTargetDelta=B=>{const q=B/1e3;Ww(g.x,a.x,q),Ww(g.y,a.y,q),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hu(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lO(this.relativeTarget,this.relativeTargetOrigin,y,q),S&&zM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=gt()),Ln(S,this.relativeTarget)),k&&(this.animationValues=m,OM(m,f,this.latestValues,q,P,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ar(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qe.update(()=>{Dh.hasAnimatedSinceResize=!0,this.currentAnimation=ZM(0,zw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:c,layout:f,latestValues:m}=a;if(!(!u||!c||!f)){if(this!==a&&this.layout&&f&&IS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||gt();const g=xn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const y=xn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+y}Ln(u,c),Ta(u,m),cu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new UM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<Bw.length;m++){const g="rotate"+Bw[m];c[g]&&(f[g]=c[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return KM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Oh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=Oh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Us(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=Fw(this.projectionDeltaWithTransform,this.treeScale,y),m&&(f.transform=m(y,f.transform));const{x:T,y:b}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${b.origin*100}% 0`,g.animationValues?f.opacity=g===this?(c=(u=y.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:f.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const k in vd){if(y[k]===void 0)continue;const{correct:D,applyTo:C}=vd[k],P=f.transform==="none"?y[k]:D(y[k],g);if(C){const S=C.length;for(let B=0;B<S;B++)f[C[B]]=P}else f[k]=P}return this.options.layoutId&&(f.pointerEvents=g===this?Oh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Uw),this.root.sharedNodes.clear()}}}function YM(t){t.updateLayout()}function XM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Nn(g=>{const y=a?n.measuredBox[g]:n.layoutBox[g],T=xn(y);y.min=i[g].min,y.max=y.min+T}):IS(o,n.layoutBox,i)&&Nn(g=>{const y=a?n.measuredBox[g]:n.layoutBox[g],T=xn(i[g]);y.max=y.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=wa();cu(u,i,n.layoutBox);const c=wa();a?cu(c,t.applyTransform(r,!0),n.measuredBox):cu(c,i,n.layoutBox);const f=!ES(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:T}=g;if(y&&T){const b=gt();hu(b,n.layoutBox,y.layoutBox);const k=gt();hu(k,i,T.layoutBox),PS(b,k)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=b,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function JM(t){Hs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eO(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tO(t){t.clearSnapshot()}function Uw(t){t.clearMeasurements()}function nO(t){t.isLayoutDirty=!1}function iO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Hw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rO(t){t.resolveTargetDelta()}function sO(t){t.calcProjection()}function oO(t){t.resetRotation()}function aO(t){t.removeLeadSnapshot()}function Ww(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $w(t,e,n,i){t.min=tt(e.min,n.min,i),t.max=tt(e.max,n.max,i)}function lO(t,e,n,i){$w(t.x,e.x,n.x,i),$w(t.y,e.y,n.y,i)}function uO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const cO={duration:.45,ease:[.4,0,.1,1]},qw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Gw=qw("applewebkit/")&&!qw("chrome/")?Math.round:dt;function Zw(t){t.min=Gw(t.min),t.max=Gw(t.max)}function hO(t){Zw(t.x),Zw(t.y)}function IS(t,e,n){return t==="position"||t==="preserve-aspect"&&!wg(jw(e),jw(n),.2)}const dO=SS({attachResizeListener:(t,e)=>Qi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zp={current:void 0},CS=SS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zp.current){const t=new dO({});t.mount(window),t.setOptions({layoutScroll:!0}),Zp.current=t}return Zp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),fO={pan:{Feature:kM},drag:{Feature:AM,ProjectionNode:CS,MeasureLayout:wS}},pO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function mO(t){const e=pO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Pg(t,e,n=1){const[i,r]=mO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return uS(a)?parseFloat(a):a}else return fg(r)?Pg(r,e,n+1):r}function gO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!fg(o))return;const a=Pg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!fg(o))continue;const a=Pg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const _O=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),AS=t=>_O.has(t),yO=t=>Object.keys(t).some(AS),Kw=t=>t===vo||t===me,Qw=(t,e)=>parseFloat(t.split(", ")[e]),Yw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Qw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Qw(o[1],t):0}},vO=new Set(["x","y","z"]),wO=Ju.filter(t=>!vO.has(t));function TO(t){const e=[];return wO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const $a={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Yw(4,13),y:Yw(5,14)};$a.translateX=$a.x;$a.translateY=$a.y;const xO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=$a[f](i,o)}),e.render();const c=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=$a[f](c,o)}),t},EO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(AS);let o=[],a=!1;const u=[];if(r.forEach(c=>{const f=t.getValue(c);if(!t.hasValue(c))return;let m=n[c],g=Ul(m);const y=e[c];let T;if(Td(y)){const b=y.length,k=y[0]===null?1:0;m=y[k],g=Ul(m);for(let D=k;D<b&&y[D]!==null;D++)T?ly(Ul(y[D])===T):T=Ul(y[D])}else T=Ul(y);if(g!==T)if(Kw(g)&&Kw(T)){const b=f.get();typeof b=="string"&&f.set(parseFloat(b)),typeof y=="string"?e[c]=parseFloat(y):Array.isArray(y)&&T===me&&(e[c]=y.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||y===0)?m===0?f.set(T.transform(m)):e[c]=g.transform(y):(a||(o=TO(t),a=!0),u.push(c),i[c]=i[c]!==void 0?i[c]:e[c],f.jump(y))}),u.length){const c=u.indexOf("height")>=0?window.pageYOffset:null,f=xO(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),xf&&c!==null&&window.scrollTo({top:c}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function PO(t,e,n,i){return yO(e)?EO(t,e,n,i):{target:e,transitionEnd:i}}const SO=(t,e,n,i)=>{const r=gO(t,e,i);return e=r.target,i=r.transitionEnd,PO(t,e,n,i)},Sg={current:null},kS={current:!1};function IO(){if(kS.current=!0,!!xf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Sg.current=t.matches;t.addListener(e),e()}else Sg.current=!1}function CO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(fn(o))t.addValue(r,o),Sd(i)&&i.add(r);else if(fn(a))t.addValue(r,Wa(o,{owner:t})),Sd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Wa(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Xw=new WeakMap,bS=Object.keys(ju),AO=bS.length,Jw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],kO=J_.length;class bO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>qe.render(this.render,!1,!0);const{latestValues:u,renderState:c}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Pf(n),this.isVariantNode=pP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const y=m[g];u[g]!==void 0&&fn(y)&&(y.set(u[g],!1),Sd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Xw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),kS.current||IO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xw.delete(this.current),this.projection&&this.projection.unmount(),ar(this.notifyUpdate),ar(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=yo.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&qe.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let c=0;c<AO;c++){const f=bS[c],{isEnabled:m,Feature:g,ProjectionNode:y,MeasureLayout:T}=ju[f];y&&(a=y),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:f,drag:m,dragConstraints:g,layoutScroll:y,layoutRoot:T}=n;this.projection.setOptions({layoutId:c,layout:f,alwaysMeasureLayout:!!m||g&&ya(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:y,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Jw.length;i++){const r=Jw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=CO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<kO;i++){const r=J_[i],o=this.props[r];(Vu(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Wa(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=ay(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!fn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new _y),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class RS extends bO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=GN(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){$N(this,i,a);const u=SO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function RO(t){return window.getComputedStyle(t)}class LO extends RS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(yo.has(n)){const i=dy(n);return i&&i.default||0}else{const i=RO(e),r=(yP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return yS(e,n)}build(e,n,i,r){ny(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return oy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){PP(e,n,i,r)}}class NO extends RS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(yo.has(n)){const i=dy(n);return i&&i.default||0}return n=SP.has(n)?n:Y_(n),e.getAttribute(n)}measureInstanceViewportBox(){return gt()}scrapeMotionValuesFromProps(e,n){return CP(e,n)}build(e,n,i,r){ry(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){IP(e,n,i,r)}mount(e){this.isSVGTag=sy(e.tagName),super.mount(e)}}const MO=(t,e)=>ty(t)?new NO(e,{enableHardwareAcceleration:!1}):new LO(e,{enableHardwareAcceleration:!0}),OO={layout:{ProjectionNode:CS,MeasureLayout:wS}},DO={...lM,...AL,...fO,...OO},fe=V2((t,e)=>mL(t,e,DO,MO));function LS(){const t=F.useRef(!1);return Q_(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function VO(){const t=LS(),[e,n]=F.useState(0),i=F.useCallback(()=>{t.current&&n(e+1)},[e]);return[F.useCallback(()=>qe.postRender(i),[i]),e]}class jO extends F.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function FO({children:t,isPresent:e}){const n=F.useId(),i=F.useRef(null),r=F.useRef({width:0,height:0,top:0,left:0});return F.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:c}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),F.createElement(jO,{isPresent:e,childRef:i,sizeRef:r},F.cloneElement(t,{ref:i}))}const Kp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=AP(BO),c=F.useId(),f=F.useMemo(()=>({id:c,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return F.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),F.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=F.createElement(FO,{isPresent:n},t)),F.createElement(Tf.Provider,{value:f},t)};function BO(){return new Map}function zO(t){return F.useEffect(()=>()=>t(),[])}const Ws=t=>t.key||"";function UO(t,e){t.forEach(n=>{const i=Ws(n);e.set(i,n)})}function HO(t){const e=[];return F.Children.forEach(t,n=>{F.isValidElement(n)&&e.push(n)}),e}const Cd=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=F.useContext(ey).forceRender||VO()[0],c=LS(),f=HO(t);let m=f;const g=F.useRef(new Map).current,y=F.useRef(m),T=F.useRef(new Map).current,b=F.useRef(!0);if(Q_(()=>{b.current=!1,UO(f,T),y.current=m}),zO(()=>{b.current=!0,T.clear(),g.clear()}),b.current)return F.createElement(F.Fragment,null,m.map(P=>F.createElement(Kp,{key:Ws(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},P)));m=[...m];const k=y.current.map(Ws),D=f.map(Ws),C=k.length;for(let P=0;P<C;P++){const S=k[P];D.indexOf(S)===-1&&!g.has(S)&&g.set(S,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((P,S)=>{if(D.indexOf(S)!==-1)return;const B=T.get(S);if(!B)return;const q=k.indexOf(S);let Z=P;if(!Z){const R=()=>{g.delete(S);const I=Array.from(T.keys()).filter(N=>!D.includes(N));if(I.forEach(N=>T.delete(N)),y.current=f.filter(N=>{const O=Ws(N);return O===S||I.includes(O)}),!g.size){if(c.current===!1)return;u(),i&&i()}};Z=F.createElement(Kp,{key:Ws(B),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:o,mode:a},B),g.set(S,Z)}m.splice(q,0,Z)}),m=m.map(P=>{const S=P.key;return g.has(S)?P:F.createElement(Kp,{key:Ws(P),isPresent:!0,presenceAffectsLayout:o,mode:a},P)}),F.createElement(F.Fragment,null,g.size?m:m.map(P=>F.cloneElement(P)))},WO=()=>{};var eT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},$O=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},MS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,f=c?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let y=(u&15)<<2|f>>6,T=f&63;c||(T=64,a||(y=64)),i.push(n[m],n[g],n[y],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$O(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new qO;const y=o<<2|u>>4;if(i.push(y),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const b=f<<6&192|g;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GO=function(t){const e=NS(t);return MS.encodeByteArray(e,!0)},Ad=function(t){return GO(t).replace(/\./g,"")},OS=function(t){try{return MS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=()=>ZO().__FIREBASE_DEFAULTS__,QO=()=>{if(typeof process>"u"||typeof eT>"u")return;const t=eT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OS(t[1]);return e&&JSON.parse(e)},Af=()=>{try{return WO()||KO()||QO()||YO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DS=t=>{var e,n;return(n=(e=Af())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},VS=t=>{const e=DS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},jS=()=>{var t;return(t=Af())==null?void 0:t.config},FS=t=>{var e;return(e=Af())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ad(JSON.stringify(n)),Ad(JSON.stringify(a)),""].join(".")}const du={};function JO(){const t={prod:[],emulator:[]};for(const e of Object.keys(du))du[e]?t.emulator.push(e):t.prod.push(e);return t}function eD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let tT=!1;function vy(t,e){if(typeof window>"u"||typeof document>"u"||!wo(window.location.host)||du[t]===e||du[t]||tT)return;du[t]=e;function n(y){return`__firebase__banner__${y}`}const i="__firebase__banner",o=JO().prod.length>0;function a(){const y=document.getElementById(i);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,T){y.setAttribute("width","24"),y.setAttribute("id",T),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{tT=!0,a()},y}function m(y,T){y.setAttribute("id",T),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=eD(i),T=n("text"),b=document.getElementById(T)||document.createElement("span"),k=n("learnmore"),D=document.getElementById(k)||document.createElement("a"),C=n("preprendIcon"),P=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const S=y.element;u(S),m(D,k);const B=f();c(P,C),S.append(P,b,D,B),document.body.appendChild(S)}o?(b.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function nD(){var e;const t=(e=Af())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oD(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aD(){return!nD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lD(){try{return typeof indexedDB=="object"}catch{return!1}}function uD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="FirebaseError";class bi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=cD,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ic.prototype.create)}}class ic{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?hD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new bi(r,u,i)}}function hD(t,e){return t.replace(dD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const dD=/\{\$([^}]+)}/g;function fD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(nT(o)&&nT(a)){if(!lo(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function nT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pD(t,e){const n=new mD(t,e);return n.subscribe.bind(n)}class mD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");gD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Qp),r.error===void 0&&(r.error=Qp),r.complete===void 0&&(r.complete=Qp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t){return t&&t._delegate?t._delegate:t}class ls{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new XO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vD(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yD(t){return t===$s?void 0:t}function vD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _D(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const TD={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},xD=be.INFO,ED={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},PD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=ED[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wy{constructor(e){this.name=e,this._logLevel=xD,this._logHandler=PD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const SD=(t,e)=>e.some(n=>t instanceof n);let iT,rT;function ID(){return iT||(iT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CD(){return rT||(rT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zS=new WeakMap,Ig=new WeakMap,US=new WeakMap,Yp=new WeakMap,Ty=new WeakMap;function AD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Xr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&zS.set(n,t)}).catch(()=>{}),Ty.set(e,t),e}function kD(t){if(Ig.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Ig.set(t,e)}let Cg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ig.get(t);if(e==="objectStoreNames")return t.objectStoreNames||US.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bD(t){Cg=t(Cg)}function RD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Xp(this),e,...n);return US.set(i,e.sort?e.sort():[e]),Xr(i)}:CD().includes(t)?function(...e){return t.apply(Xp(this),e),Xr(zS.get(this))}:function(...e){return Xr(t.apply(Xp(this),e))}}function LD(t){return typeof t=="function"?RD(t):(t instanceof IDBTransaction&&kD(t),SD(t,ID())?new Proxy(t,Cg):t)}function Xr(t){if(t instanceof IDBRequest)return AD(t);if(Yp.has(t))return Yp.get(t);const e=LD(t);return e!==t&&(Yp.set(t,e),Ty.set(e,t)),e}const Xp=t=>Ty.get(t);function ND(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Xr(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Xr(a.result),c.oldVersion,c.newVersion,Xr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const MD=["get","getKey","getAll","getAllKeys","count"],OD=["put","add","delete","clear"],Jp=new Map;function sT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=OD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||MD.includes(n)))return;const o=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&c.done]))[0]};return Jp.set(e,o),o}bD(t=>({...t,get:(e,n,i)=>sT(e,n)||t.get(e,n,i),has:(e,n)=>!!sT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function VD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ag="@firebase/app",oT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new wy("@firebase/app"),jD="@firebase/app-compat",FD="@firebase/analytics-compat",BD="@firebase/analytics",zD="@firebase/app-check-compat",UD="@firebase/app-check",HD="@firebase/auth",WD="@firebase/auth-compat",$D="@firebase/database",qD="@firebase/data-connect",GD="@firebase/database-compat",ZD="@firebase/functions",KD="@firebase/functions-compat",QD="@firebase/installations",YD="@firebase/installations-compat",XD="@firebase/messaging",JD="@firebase/messaging-compat",eV="@firebase/performance",tV="@firebase/performance-compat",nV="@firebase/remote-config",iV="@firebase/remote-config-compat",rV="@firebase/storage",sV="@firebase/storage-compat",oV="@firebase/firestore",aV="@firebase/ai",lV="@firebase/firestore-compat",uV="firebase",cV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="[DEFAULT]",hV={[Ag]:"fire-core",[jD]:"fire-core-compat",[BD]:"fire-analytics",[FD]:"fire-analytics-compat",[UD]:"fire-app-check",[zD]:"fire-app-check-compat",[HD]:"fire-auth",[WD]:"fire-auth-compat",[$D]:"fire-rtdb",[qD]:"fire-data-connect",[GD]:"fire-rtdb-compat",[ZD]:"fire-fn",[KD]:"fire-fn-compat",[QD]:"fire-iid",[YD]:"fire-iid-compat",[XD]:"fire-fcm",[JD]:"fire-fcm-compat",[eV]:"fire-perf",[tV]:"fire-perf-compat",[nV]:"fire-rc",[iV]:"fire-rc-compat",[rV]:"fire-gcs",[sV]:"fire-gcs-compat",[oV]:"fire-fst",[lV]:"fire-fst-compat",[aV]:"fire-vertex","fire-js":"fire-js",[uV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Map,dV=new Map,bg=new Map;function aT(t,e){try{t.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function uo(t){const e=t.name;if(bg.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;bg.set(e,t);for(const n of kd.values())aT(n,t);for(const n of dV.values())aT(n,t);return!0}function kf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new ic("app","Firebase",fV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=cV;function HS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:kg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Jr.create("bad-app-name",{appName:String(r)});if(n||(n=jS()),!n)throw Jr.create("no-options");const o=kd.get(r);if(o){if(lo(n,o.options)&&lo(i,o.config))return o;throw Jr.create("duplicate-app",{appName:r})}const a=new wD(r);for(const c of bg.values())a.addComponent(c);const u=new pV(n,i,a);return kd.set(r,u),u}function xy(t=kg){const e=kd.get(t);if(!e&&t===kg&&jS())return HS();if(!e)throw Jr.create("no-app",{appName:t});return e}function wi(t,e,n){let i=hV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(a.join(" "));return}uo(new ls(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="firebase-heartbeat-database",gV=1,Bu="firebase-heartbeat-store";let em=null;function WS(){return em||(em=ND(mV,gV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Jr.create("idb-open",{originalErrorMessage:t.message})})),em}async function _V(t){try{const n=(await WS()).transaction(Bu),i=await n.objectStore(Bu).get($S(t));return await n.done,i}catch(e){if(e instanceof bi)lr.warn(e.message);else{const n=Jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lr.warn(n.message)}}}async function lT(t,e){try{const i=(await WS()).transaction(Bu,"readwrite");await i.objectStore(Bu).put(e,$S(t)),await i.done}catch(n){if(n instanceof bi)lr.warn(n.message);else{const i=Jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lr.warn(i.message)}}}function $S(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=1024,vV=30;class wV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=uT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>vV){const a=EV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){lr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uT(),{heartbeatsToSend:i,unsentEntries:r}=TV(this._heartbeatsCache.heartbeats),o=Ad(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return lr.warn(n),""}}}function uT(){return new Date().toISOString().substring(0,10)}function TV(t,e=yV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),cT(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),cT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lD()?uD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _V(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return lT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return lT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cT(t){return Ad(JSON.stringify({version:2,heartbeats:t})).length}function EV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t){uo(new ls("platform-logger",e=>new DD(e),"PRIVATE")),uo(new ls("heartbeat",e=>new wV(e),"PRIVATE")),wi(Ag,oT,t),wi(Ag,oT,"esm2020"),wi("fire-js","")}PV("");var hT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,qS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function N(){}N.prototype=I.prototype,R.F=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(O,V,z){for(var M=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)M[ne-2]=arguments[ne];return I.prototype[V].apply(O,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,N){N||(N=0);const O=Array(16);if(typeof I=="string")for(var V=0;V<16;++V)O[V]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(V=0;V<16;++V)O[V]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],V=R.g[2];let z=R.g[3],M;M=I+(z^N&(V^z))+O[0]+3614090360&4294967295,I=N+(M<<7&4294967295|M>>>25),M=z+(V^I&(N^V))+O[1]+3905402710&4294967295,z=I+(M<<12&4294967295|M>>>20),M=V+(N^z&(I^N))+O[2]+606105819&4294967295,V=z+(M<<17&4294967295|M>>>15),M=N+(I^V&(z^I))+O[3]+3250441966&4294967295,N=V+(M<<22&4294967295|M>>>10),M=I+(z^N&(V^z))+O[4]+4118548399&4294967295,I=N+(M<<7&4294967295|M>>>25),M=z+(V^I&(N^V))+O[5]+1200080426&4294967295,z=I+(M<<12&4294967295|M>>>20),M=V+(N^z&(I^N))+O[6]+2821735955&4294967295,V=z+(M<<17&4294967295|M>>>15),M=N+(I^V&(z^I))+O[7]+4249261313&4294967295,N=V+(M<<22&4294967295|M>>>10),M=I+(z^N&(V^z))+O[8]+1770035416&4294967295,I=N+(M<<7&4294967295|M>>>25),M=z+(V^I&(N^V))+O[9]+2336552879&4294967295,z=I+(M<<12&4294967295|M>>>20),M=V+(N^z&(I^N))+O[10]+4294925233&4294967295,V=z+(M<<17&4294967295|M>>>15),M=N+(I^V&(z^I))+O[11]+2304563134&4294967295,N=V+(M<<22&4294967295|M>>>10),M=I+(z^N&(V^z))+O[12]+1804603682&4294967295,I=N+(M<<7&4294967295|M>>>25),M=z+(V^I&(N^V))+O[13]+4254626195&4294967295,z=I+(M<<12&4294967295|M>>>20),M=V+(N^z&(I^N))+O[14]+2792965006&4294967295,V=z+(M<<17&4294967295|M>>>15),M=N+(I^V&(z^I))+O[15]+1236535329&4294967295,N=V+(M<<22&4294967295|M>>>10),M=I+(V^z&(N^V))+O[1]+4129170786&4294967295,I=N+(M<<5&4294967295|M>>>27),M=z+(N^V&(I^N))+O[6]+3225465664&4294967295,z=I+(M<<9&4294967295|M>>>23),M=V+(I^N&(z^I))+O[11]+643717713&4294967295,V=z+(M<<14&4294967295|M>>>18),M=N+(z^I&(V^z))+O[0]+3921069994&4294967295,N=V+(M<<20&4294967295|M>>>12),M=I+(V^z&(N^V))+O[5]+3593408605&4294967295,I=N+(M<<5&4294967295|M>>>27),M=z+(N^V&(I^N))+O[10]+38016083&4294967295,z=I+(M<<9&4294967295|M>>>23),M=V+(I^N&(z^I))+O[15]+3634488961&4294967295,V=z+(M<<14&4294967295|M>>>18),M=N+(z^I&(V^z))+O[4]+3889429448&4294967295,N=V+(M<<20&4294967295|M>>>12),M=I+(V^z&(N^V))+O[9]+568446438&4294967295,I=N+(M<<5&4294967295|M>>>27),M=z+(N^V&(I^N))+O[14]+3275163606&4294967295,z=I+(M<<9&4294967295|M>>>23),M=V+(I^N&(z^I))+O[3]+4107603335&4294967295,V=z+(M<<14&4294967295|M>>>18),M=N+(z^I&(V^z))+O[8]+1163531501&4294967295,N=V+(M<<20&4294967295|M>>>12),M=I+(V^z&(N^V))+O[13]+2850285829&4294967295,I=N+(M<<5&4294967295|M>>>27),M=z+(N^V&(I^N))+O[2]+4243563512&4294967295,z=I+(M<<9&4294967295|M>>>23),M=V+(I^N&(z^I))+O[7]+1735328473&4294967295,V=z+(M<<14&4294967295|M>>>18),M=N+(z^I&(V^z))+O[12]+2368359562&4294967295,N=V+(M<<20&4294967295|M>>>12),M=I+(N^V^z)+O[5]+4294588738&4294967295,I=N+(M<<4&4294967295|M>>>28),M=z+(I^N^V)+O[8]+2272392833&4294967295,z=I+(M<<11&4294967295|M>>>21),M=V+(z^I^N)+O[11]+1839030562&4294967295,V=z+(M<<16&4294967295|M>>>16),M=N+(V^z^I)+O[14]+4259657740&4294967295,N=V+(M<<23&4294967295|M>>>9),M=I+(N^V^z)+O[1]+2763975236&4294967295,I=N+(M<<4&4294967295|M>>>28),M=z+(I^N^V)+O[4]+1272893353&4294967295,z=I+(M<<11&4294967295|M>>>21),M=V+(z^I^N)+O[7]+4139469664&4294967295,V=z+(M<<16&4294967295|M>>>16),M=N+(V^z^I)+O[10]+3200236656&4294967295,N=V+(M<<23&4294967295|M>>>9),M=I+(N^V^z)+O[13]+681279174&4294967295,I=N+(M<<4&4294967295|M>>>28),M=z+(I^N^V)+O[0]+3936430074&4294967295,z=I+(M<<11&4294967295|M>>>21),M=V+(z^I^N)+O[3]+3572445317&4294967295,V=z+(M<<16&4294967295|M>>>16),M=N+(V^z^I)+O[6]+76029189&4294967295,N=V+(M<<23&4294967295|M>>>9),M=I+(N^V^z)+O[9]+3654602809&4294967295,I=N+(M<<4&4294967295|M>>>28),M=z+(I^N^V)+O[12]+3873151461&4294967295,z=I+(M<<11&4294967295|M>>>21),M=V+(z^I^N)+O[15]+530742520&4294967295,V=z+(M<<16&4294967295|M>>>16),M=N+(V^z^I)+O[2]+3299628645&4294967295,N=V+(M<<23&4294967295|M>>>9),M=I+(V^(N|~z))+O[0]+4096336452&4294967295,I=N+(M<<6&4294967295|M>>>26),M=z+(N^(I|~V))+O[7]+1126891415&4294967295,z=I+(M<<10&4294967295|M>>>22),M=V+(I^(z|~N))+O[14]+2878612391&4294967295,V=z+(M<<15&4294967295|M>>>17),M=N+(z^(V|~I))+O[5]+4237533241&4294967295,N=V+(M<<21&4294967295|M>>>11),M=I+(V^(N|~z))+O[12]+1700485571&4294967295,I=N+(M<<6&4294967295|M>>>26),M=z+(N^(I|~V))+O[3]+2399980690&4294967295,z=I+(M<<10&4294967295|M>>>22),M=V+(I^(z|~N))+O[10]+4293915773&4294967295,V=z+(M<<15&4294967295|M>>>17),M=N+(z^(V|~I))+O[1]+2240044497&4294967295,N=V+(M<<21&4294967295|M>>>11),M=I+(V^(N|~z))+O[8]+1873313359&4294967295,I=N+(M<<6&4294967295|M>>>26),M=z+(N^(I|~V))+O[15]+4264355552&4294967295,z=I+(M<<10&4294967295|M>>>22),M=V+(I^(z|~N))+O[6]+2734768916&4294967295,V=z+(M<<15&4294967295|M>>>17),M=N+(z^(V|~I))+O[13]+1309151649&4294967295,N=V+(M<<21&4294967295|M>>>11),M=I+(V^(N|~z))+O[4]+4149444226&4294967295,I=N+(M<<6&4294967295|M>>>26),M=z+(N^(I|~V))+O[11]+3174756917&4294967295,z=I+(M<<10&4294967295|M>>>22),M=V+(I^(z|~N))+O[2]+718787259&4294967295,V=z+(M<<15&4294967295|M>>>17),M=N+(z^(V|~I))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.v=function(R,I){I===void 0&&(I=R.length);const N=I-this.blockSize,O=this.C;let V=this.h,z=0;for(;z<I;){if(V==0)for(;z<=N;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<I;)if(O[V++]=R.charCodeAt(z++),V==this.blockSize){r(this,O),V=0;break}}else for(;z<I;)if(O[V++]=R[z++],V==this.blockSize){r(this,O),V=0;break}}this.h=V,this.o+=I},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)R[I++]=this.g[N]>>>O&255;return R};function o(R,I){var N=u;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function a(R,I){this.h=I;const N=[];let O=!0;for(let V=R.length-1;V>=0;V--){const z=R[V]|0;O&&z==I||(N[V]=z,O=!1)}this.g=N}var u={};function c(R){return-128<=R&&R<128?o(R,function(I){return new a([I|0],I<0?-1:0)}):new a([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return D(f(-R));const I=[];let N=1;for(let O=0;R>=N;O++)I[O]=R/N|0,N*=4294967296;return new a(I,0)}function m(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return D(m(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(I,8));let O=g;for(let z=0;z<R.length;z+=8){var V=Math.min(8,R.length-z);const M=parseInt(R.substring(z,z+V),I);V<8?(V=f(Math.pow(I,V)),O=O.j(V).add(f(M))):(O=O.j(N),O=O.add(f(M)))}return O}var g=c(0),y=c(1),T=c(16777216);t=a.prototype,t.m=function(){if(k(this))return-D(this).m();let R=0,I=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);R+=(O>=0?O:4294967296+O)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(k(this))return"-"+D(this).toString(R);const I=f(Math.pow(R,6));var N=this;let O="";for(;;){const V=B(N,I).g;N=C(N,V.j(I));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=V,b(N))return z+O;for(;z.length<6;)z="0"+z;O=z+O}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function k(R){return R.h==-1}t.l=function(R){return R=C(this,R),k(R)?-1:b(R)?0:1};function D(R){const I=R.g.length,N=[];for(let O=0;O<I;O++)N[O]=~R.g[O];return new a(N,~R.h).add(y)}t.abs=function(){return k(this)?D(this):this},t.add=function(R){const I=Math.max(this.g.length,R.g.length),N=[];let O=0;for(let V=0;V<=I;V++){let z=O+(this.i(V)&65535)+(R.i(V)&65535),M=(z>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);O=M>>>16,z&=65535,M&=65535,N[V]=M<<16|z}return new a(N,N[N.length-1]&-2147483648?-1:0)};function C(R,I){return R.add(D(I))}t.j=function(R){if(b(this)||b(R))return g;if(k(this))return k(R)?D(this).j(D(R)):D(D(this).j(R));if(k(R))return D(this.j(D(R)));if(this.l(T)<0&&R.l(T)<0)return f(this.m()*R.m());const I=this.g.length+R.g.length,N=[];for(var O=0;O<2*I;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<R.g.length;V++){const z=this.i(O)>>>16,M=this.i(O)&65535,ne=R.i(V)>>>16,Ce=R.i(V)&65535;N[2*O+2*V]+=M*Ce,P(N,2*O+2*V),N[2*O+2*V+1]+=z*Ce,P(N,2*O+2*V+1),N[2*O+2*V+1]+=M*ne,P(N,2*O+2*V+1),N[2*O+2*V+2]+=z*ne,P(N,2*O+2*V+2)}for(R=0;R<I;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=I;R<2*I;R++)N[R]=0;return new a(N,0)};function P(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function S(R,I){this.g=R,this.h=I}function B(R,I){if(b(I))throw Error("division by zero");if(b(R))return new S(g,g);if(k(R))return I=B(D(R),I),new S(D(I.g),D(I.h));if(k(I))return I=B(R,D(I)),new S(D(I.g),I.h);if(R.g.length>30){if(k(R)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var N=y,O=I;O.l(R)<=0;)N=q(N),O=q(O);var V=Z(N,1),z=Z(O,1);for(O=Z(O,2),N=Z(N,2);!b(O);){var M=z.add(O);M.l(R)<=0&&(V=V.add(N),z=M),O=Z(O,1),N=Z(N,1)}return I=C(R,V.j(I)),new S(V,I)}for(V=g;R.l(I)>=0;){for(N=Math.max(1,Math.floor(R.m()/I.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),z=f(N),M=z.j(I);k(M)||M.l(R)>0;)N-=O,z=f(N),M=z.j(I);b(z)&&(z=y),V=V.add(z),R=C(R,M)}return new S(V,R)}t.B=function(R){return B(this,R).h},t.and=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)&R.i(O);return new a(N,this.h&R.h)},t.or=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)|R.i(O);return new a(N,this.h|R.h)},t.xor=function(R){const I=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)^R.i(O);return new a(N,this.h^R.h)};function q(R){const I=R.g.length+1,N=[];for(let O=0;O<I;O++)N[O]=R.i(O)<<1|R.i(O-1)>>>31;return new a(N,R.h)}function Z(R,I){const N=I>>5;I%=32;const O=R.g.length-N,V=[];for(let z=0;z<O;z++)V[z]=I>0?R.i(z+N)>>>I|R.i(z+N+1)<<32-I:R.i(z+N);return new a(V,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,qS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,es=a}).apply(typeof hT<"u"?hT:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GS,Kl,ZS,Vh,Rg,KS,QS,YS;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var _=0;_<h.length;++_){var w=h[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(h,_){if(_)e:{var w=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var U=h[A];if(!(U in w))break e;w=w[U]}h=h[h.length-1],A=w[h],_=_(A),_!=A&&_!=null&&e(w,h,{configurable:!0,writable:!0,value:_})}}r("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(h){return h||function(_){var w=[],A;for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&w.push([A,_[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function c(h,_,w){return h.call.apply(h.bind,arguments)}function f(h,_,w){return f=c,f.apply(null,arguments)}function m(h,_){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function g(h,_){function w(){}w.prototype=_.prototype,h.Z=_.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(A,U,W){for(var ee=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)ee[ve-2]=arguments[ve];return _.prototype[U].apply(A,ee)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const _=h.length;if(_>0){const w=Array(_);for(let A=0;A<_;A++)w[A]=h[A];return w}return[]}function b(h,_){for(let A=1;A<arguments.length;A++){const U=arguments[A];var w=typeof U;if(w=w!="object"?w:U?Array.isArray(U)?"array":w:"null",w=="array"||w=="object"&&typeof U.length=="number"){w=h.length||0;const W=U.length||0;h.length=w+W;for(let ee=0;ee<W;ee++)h[w+ee]=U[ee]}else h.push(U)}}class k{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function D(h){a.setTimeout(()=>{throw h},0)}function C(){var h=R;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class P{constructor(){this.h=this.g=null}add(_,w){const A=S.get();A.set(_,w),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new k(()=>new B,h=>h.reset());class B{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,Z=!1,R=new P,I=()=>{const h=Promise.resolve(void 0);q=()=>{h.then(N)}};function N(){for(var h;h=C();){try{h.h.call(h.g)}catch(w){D(w)}var _=S;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}Z=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};a.addEventListener("test",w,_),a.removeEventListener("test",w,_)}catch{}return h}();function M(h){return/^[\s\xa0]*$/.test(h)}function ne(h,_){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}g(ne,V),ne.prototype.init=function(h,_){const w=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(w=="mouseover"?_=h.fromElement:w=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),ce=0;function Ae(h,_,w,A,U){this.listener=h,this.proxy=null,this.src=_,this.type=w,this.capture=!!A,this.ha=U,this.key=++ce,this.da=this.fa=!1}function G(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ae(h,_,w){for(const A in h)_.call(w,h[A],A,h)}function J(h,_){for(const w in h)_.call(void 0,h[w],w,h)}function te(h){const _={};for(const w in h)_[w]=h[w];return _}const xe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(h,_){let w,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(w in A)h[w]=A[w];for(let W=0;W<xe.length;W++)w=xe[W],Object.prototype.hasOwnProperty.call(A,w)&&(h[w]=A[w])}}function ke(h){this.src=h,this.g={},this.h=0}ke.prototype.add=function(h,_,w,A,U){const W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);const ee=de(h,_,A,U);return ee>-1?(_=h[ee],w||(_.fa=!1)):(_=new Ae(_,this.src,W,!!A,U),_.fa=w,h.push(_)),_};function Ee(h,_){const w=_.type;if(w in h.g){var A=h.g[w],U=Array.prototype.indexOf.call(A,_,void 0),W;(W=U>=0)&&Array.prototype.splice.call(A,U,1),W&&(G(_),h.g[w].length==0&&(delete h.g[w],h.h--))}}function de(h,_,w,A){for(let U=0;U<h.length;++U){const W=h[U];if(!W.da&&W.listener==_&&W.capture==!!w&&W.ha==A)return U}return-1}var lt="closure_lm_"+(Math.random()*1e6|0),tn={};function Li(h,_,w,A,U){if(Array.isArray(_)){for(let W=0;W<_.length;W++)Li(h,_[W],w,A,U);return null}return w=Ps(w),h&&h[Ce]?h.J(_,w,u(A)?!!A.capture:!1,U):ri(h,_,w,!1,A,U)}function ri(h,_,w,A,U,W){if(!_)throw Error("Invalid event type");const ee=u(U)?!!U.capture:!!U;let ve=Io(h);if(ve||(h[lt]=ve=new ke(h)),w=ve.add(_,w,A,ee,W),w.proxy)return w;if(A=mn(),w.proxy=A,A.src=h,A.listener=w,h.addEventListener)z||(U=ee),U===void 0&&(U=!1),h.addEventListener(_.toString(),A,U);else if(h.attachEvent)h.attachEvent(fc(_.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function mn(){function h(w){return _.call(h.src,h.listener,w)}const _=pc;return h}function Ni(h,_,w,A,U){if(Array.isArray(_))for(var W=0;W<_.length;W++)Ni(h,_[W],w,A,U);else A=u(A)?!!A.capture:!!A,w=Ps(w),h&&h[Ce]?(h=h.i,W=String(_).toString(),W in h.g&&(_=h.g[W],w=de(_,w,A,U),w>-1&&(G(_[w]),Array.prototype.splice.call(_,w,1),_.length==0&&(delete h.g[W],h.h--)))):h&&(h=Io(h))&&(_=h.g[_.toString()],h=-1,_&&(h=de(_,w,A,U)),(w=h>-1?_[h]:null)&&xs(w))}function xs(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ce])Ee(_.i,h);else{var w=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(w,A,h.capture):_.detachEvent?_.detachEvent(fc(w),A):_.addListener&&_.removeListener&&_.removeListener(A),(w=Io(_))?(Ee(w,h),w.h==0&&(w.src=null,_[lt]=null)):G(h)}}}function fc(h){return h in tn?tn[h]:tn[h]="on"+h}function pc(h,_){if(h.da)h=!0;else{_=new ne(_,this);const w=h.listener,A=h.ha||h.src;h.fa&&xs(h),h=w.call(A,_)}return h}function Io(h){return h=h[lt],h instanceof ke?h:null}var Es="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ps(h){return typeof h=="function"?h:(h[Es]||(h[Es]=function(_){return h.handleEvent(_)}),h[Es])}function Pt(){O.call(this),this.i=new ke(this),this.M=this,this.G=null}g(Pt,O),Pt.prototype[Ce]=!0,Pt.prototype.removeEventListener=function(h,_,w,A){Ni(this,h,_,w,A)};function St(h,_){var w,A=h.G;if(A)for(w=[];A;A=A.G)w.push(A);if(h=h.M,A=_.type||_,typeof _=="string")_=new V(_,h);else if(_ instanceof V)_.target=_.target||h;else{var U=_;_=new V(A,h),Ge(_,U)}U=!0;let W,ee;if(w)for(ee=w.length-1;ee>=0;ee--)W=_.g=w[ee],U=mr(W,A,!0,_)&&U;if(W=_.g=h,U=mr(W,A,!0,_)&&U,U=mr(W,A,!1,_)&&U,w)for(ee=0;ee<w.length;ee++)W=_.g=w[ee],U=mr(W,A,!1,_)&&U}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const w=h.g[_];for(let A=0;A<w.length;A++)G(w[A]);delete h.g[_],h.h--}}this.G=null},Pt.prototype.J=function(h,_,w,A){return this.i.add(String(h),_,!1,w,A)},Pt.prototype.K=function(h,_,w,A){return this.i.add(String(h),_,!0,w,A)};function mr(h,_,w,A){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let U=!0;for(let W=0;W<_.length;++W){const ee=_[W];if(ee&&!ee.da&&ee.capture==w){const ve=ee.listener,Ve=ee.ha||ee.src;ee.fa&&Ee(h.i,ee),U=ve.call(Ve,A)!==!1&&U}}return U&&!A.defaultPrevented}function mc(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:a.setTimeout(h,_||0)}function ll(h){h.g=mc(()=>{h.g=null,h.i&&(h.i=!1,ll(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Yf extends O{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ll(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ss(h){O.call(this),this.h=h,this.g={}}g(Ss,O);var Co=[];function ul(h){ae(h.g,function(_,w){this.g.hasOwnProperty(w)&&xs(_)},h),h.g={}}Ss.prototype.N=function(){Ss.Z.N.call(this),ul(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ao=a.JSON.stringify,Xf=a.JSON.parse,gc=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function cl(){}function _c(){}var gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Is(){V.call(this,"d")}g(Is,V);function ko(){V.call(this,"c")}g(ko,V);var Mi={},_r=null;function bo(){return _r=_r||new Pt}Mi.Ia="serverreachability";function yc(h){V.call(this,Mi.Ia,h)}g(yc,V);function yr(h){const _=bo();St(_,new yc(_))}Mi.STAT_EVENT="statevent";function hl(h,_){V.call(this,Mi.STAT_EVENT,h),this.stat=_}g(hl,V);function It(h){const _=bo();St(_,new hl(_,h))}Mi.Ja="timingevent";function vc(h,_){V.call(this,Mi.Ja,h),this.size=_}g(vc,V);function Cs(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function As(){this.g=!0}As.prototype.ua=function(){this.g=!1};function Jf(h,_,w,A,U,W){h.info(function(){if(h.g)if(W){var ee="",ve=W.split("&");for(let Fe=0;Fe<ve.length;Fe++){var Ve=ve[Fe].split("=");if(Ve.length>1){const ut=Ve[0];Ve=Ve[1];const kn=ut.split("_");ee=kn.length>=2&&kn[1]=="type"?ee+(ut+"="+Ve+"&"):ee+(ut+"=redacted&")}}}else ee=null;else ee=W;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+_+`
`+w+`
`+ee})}function ep(h,_,w,A,U,W,ee){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+_+`
`+w+`
`+W+" "+ee})}function vr(h,_,w,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+tp(h,w)+(A?" "+A:"")})}function dl(h,_){h.info(function(){return"TIMEOUT: "+_})}As.prototype.info=function(){};function tp(h,_){if(!h.g)return _;if(!_)return null;try{const W=JSON.parse(_);if(W){for(h=0;h<W.length;h++)if(Array.isArray(W[h])){var w=W[h];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ee=1;ee<A.length;ee++)A[ee]=""}}}}return Ao(W)}catch{return _}}var Ro={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tc;function nn(){}g(nn,cl),nn.prototype.g=function(){return new XMLHttpRequest},Tc=new nn;function le(h){return encodeURIComponent(String(h))}function xc(h){var _=1;h=h.split(":");const w=[];for(;_>0&&h.length;)w.push(h.shift()),_--;return h.length&&w.push(h.join(":")),w}function Hn(h,_,w,A){this.j=h,this.i=_,this.l=w,this.S=A||1,this.V=new Ss(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fl}function fl(){this.i=null,this.g="",this.h=!1}var pl={},ks={};function Lo(h,_,w){h.M=1,h.A=We(Gt(_)),h.u=w,h.R=!0,Oi(h,null)}function Oi(h,_){h.F=Date.now(),No(h),h.B=Gt(h.A);var w=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),jo(w.i,"t",A),h.C=0,w=h.j.L,h.h=new fl,h.g=Al(h.j,w?_:null,!h.u),h.P>0&&(h.O=new Yf(f(h.Y,h,h.g),h.P)),_=h.V,w=h.g,A=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(Co[0]=U.toString()),U=Co);for(let W=0;W<U.length;W++){const ee=Li(w,U[W],A||_.handleEvent,!1,_.h||_);if(!ee)break;_.g[ee.key]=ee}_=h.J?te(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),yr(),Jf(h.i,h.v,h.B,h.l,h.S,h.u)}Hn.prototype.ba=function(h){h=h.target;const _=this.O;_&&li(h)==3?_.j():this.Y(h)},Hn.prototype.Y=function(h){try{if(h==this.g)e:{const ve=li(this.g),Ve=this.g.ya(),Fe=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||Tl(this.g)))){this.K||ve!=4||Ve==7||(Ve==8||Fe<=0?yr(3):yr(2)),Mo(this);var _=this.g.ca();this.X=_;var w=Ec(this);if(this.o=_==200,ep(this.i,this.v,this.B,this.l,this.S,ve,_),this.o){if(this.U&&!this.L){t:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(A)){var W=A;break t}}W=null}if(h=W)vr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ml(this,h);else{this.o=!1,this.m=3,It(12),Sn(this),bs(this);break e}}if(this.R){h=!0;let ut;for(;!this.K&&this.C<w.length;)if(ut=np(this,w),ut==ks){ve==4&&(this.m=4,It(14),h=!1),vr(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==pl){this.m=4,It(15),vr(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else vr(this.i,this.l,ut,null),ml(this,ut);if(Pc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||w.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)vr(this.i,this.l,w,"[Invalid Chunked Response]"),Sn(this),bs(this);else if(w.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Il(ee),ee.P=!0,It(11))}}else vr(this.i,this.l,w,null),ml(this,w);ve==4&&Sn(this),this.o&&!this.K&&(ve==4?_n(this.j,this):(this.o=!1,No(this)))}else xl(this.g),_==400&&w.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Sn(this),bs(this)}}}catch{}finally{}};function Ec(h){if(!Pc(h))return h.g.la();const _=Tl(h.g);if(_==="")return"";let w="";const A=_.length,U=li(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Sn(h),bs(h),"";h.h.i=new a.TextDecoder}for(let W=0;W<A;W++)h.h.h=!0,w+=h.h.i.decode(_[W],{stream:!(U&&W==A-1)});return _.length=0,h.h.g+=w,h.C=0,h.h.g}function Pc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function np(h,_){var w=h.C,A=_.indexOf(`
`,w);return A==-1?ks:(w=Number(_.substring(w,A)),isNaN(w)?pl:(A+=1,A+w>_.length?ks:(_=_.slice(A,A+w),h.C=A+w,_)))}Hn.prototype.cancel=function(){this.K=!0,Sn(this)};function No(h){h.T=Date.now()+h.H,Sc(h,h.H)}function Sc(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Cs(f(h.aa,h),_)}function Mo(h){h.D&&(a.clearTimeout(h.D),h.D=null)}Hn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(dl(this.i,this.B),this.M!=2&&(yr(),It(17)),Sn(this),this.m=2,bs(this)):Sc(this,this.T-h)};function bs(h){h.j.I==0||h.K||_n(h.j,h)}function Sn(h){Mo(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,ul(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function ml(h,_){try{var w=h.j;if(w.I!=0&&(w.g==h||Rs(w.h,h))){if(!h.L&&Rs(w.h,h)&&w.I==3){try{var A=w.Ba.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Ho(w),zo(w);else break e;Sl(w),It(18)}}else w.xa=U[1],0<w.xa-w.K&&U[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Cs(f(w.Va,w),6e3));Ac(w.h)<=1&&w.ta&&(w.ta=void 0)}else ci(w,11)}else if((h.L||w.g==h)&&Ho(w),!M(_))for(U=w.Ba.g.parse(_),_=0;_<U.length;_++){let Fe=U[_];const ut=Fe[0];if(!(ut<=w.K))if(w.K=ut,Fe=Fe[1],w.I==2)if(Fe[0]=="c"){w.M=Fe[1],w.ba=Fe[2];const kn=Fe[3];kn!=null&&(w.ka=kn,w.j.info("VER="+w.ka));const qn=Fe[4];qn!=null&&(w.za=qn,w.j.info("SVER="+w.za));const bn=Fe[5];bn!=null&&typeof bn=="number"&&bn>0&&(A=1.5*bn,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const hi=h.g;if(hi){const qo=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qo){var W=A.h;W.g||qo.indexOf("spdy")==-1&&qo.indexOf("quic")==-1&&qo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Di(W,W.h),W.h=null))}if(A.G){const Go=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Go&&(A.wa=Go,se(A.J,A.G,Go))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var ee=h;if(A.na=Cl(A,A.L?A.ba:null,A.W),ee.L){gl(A.h,ee);var ve=ee,Ve=A.O;Ve&&(ve.H=Ve),ve.D&&(Mo(ve),No(ve)),A.g=ee}else Pl(A);w.i.length>0&&ui(w)}else Fe[0]!="stop"&&Fe[0]!="close"||ci(w,7);else w.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ci(w,7):Pe(w):Fe[0]!="noop"&&w.l&&w.l.qa(Fe),w.A=0)}}yr(4)}catch{}}var ip=class{constructor(h,_){this.g=h,this.map=_}};function Ic(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ac(h){return h.h?1:h.g?h.g.size:0}function Rs(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Di(h,_){h.g?h.g.add(_):h.h=_}function gl(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ic.prototype.cancel=function(){if(this.i=_l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function _l(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const w of h.g.values())_=_.concat(w.G);return _}return T(h.i)}var wr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ne(h,_){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const A=h[w].indexOf("=");let U,W=null;A>=0?(U=h[w].substring(0,A),W=h[w].substring(A+1)):U=h[w],_(U,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function De(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof De?(this.l=h.l,In(this,h.j),this.o=h.o,this.g=h.g,Cn(this,h.u),this.h=h.h,Ls(this,Ns(h.i)),this.m=h.m):h&&(_=String(h).match(wr))?(this.l=!1,In(this,_[1]||"",!0),this.o=Vi(_[2]||""),this.g=Vi(_[3]||"",!0),Cn(this,_[4]),this.h=Vi(_[5]||"",!0),Ls(this,_[6]||"",!0),this.m=Vi(_[7]||"")):(this.l=!1,this.i=new Wn(null,this.l))}De.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(si(_,kc,!0),":");var w=this.g;return(w||_=="file")&&(h.push("//"),(_=this.o)&&h.push(si(_,kc,!0),"@"),h.push(le(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(si(w,w.charAt(0)=="/"?ji:Oo,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",si(w,Fi)),h.join("")},De.prototype.resolve=function(h){const _=Gt(this);let w=!!h.j;w?In(_,h.j):w=!!h.o,w?_.o=h.o:w=!!h.g,w?_.g=h.g:w=h.u!=null;var A=h.h;if(w)Cn(_,h.u);else if(w=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=_.h.lastIndexOf("/");U!=-1&&(A=_.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const W=[];for(let ee=0;ee<U.length;){const ve=U[ee++];ve=="."?A&&ee==U.length&&W.push(""):ve==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&ee==U.length&&W.push("")):(W.push(ve),A=!0)}A=W.join("/")}else A=U}return w?_.h=A:w=h.i.toString()!=="",w?Ls(_,Ns(h.i)):w=!!h.m,w&&(_.m=h.m),_};function Gt(h){return new De(h)}function In(h,_,w){h.j=w?Vi(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Cn(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Ls(h,_,w){_ instanceof Wn?(h.i=_,yl(h.i,h.l)):(w||(_=si(_,ot)),h.i=new Wn(_,h.l))}function se(h,_,w){h.i.set(_,w)}function We(h){return se(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Vi(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function si(h,_,w){return typeof h=="string"?(h=encodeURI(h).replace(_,rn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function rn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var kc=/[#\/\?@]/g,Oo=/[#\?:]/g,ji=/[#\?]/g,ot=/[#\?@]/g,Fi=/#/g;function Wn(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function gn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ne(h.i,function(_,w){h.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}t=Wn.prototype,t.add=function(h,_){gn(this),this.i=null,h=oi(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(_),this.h+=1,this};function Do(h,_){gn(h),_=oi(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Tr(h,_){return gn(h),_=oi(h,_),h.g.has(_)}t.forEach=function(h,_){gn(this),this.g.forEach(function(w,A){w.forEach(function(U){h.call(_,U,A,this)},this)},this)};function Vo(h,_){gn(h);let w=[];if(typeof _=="string")Tr(h,_)&&(w=w.concat(h.g.get(oi(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)w=w.concat(h[_]);return w}t.set=function(h,_){return gn(this),this.i=null,h=oi(this,h),Tr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=Vo(this,h),h.length>0?String(h[0]):_):_};function jo(h,_,w){Do(h,_),w.length>0&&(h.i=null,h.g.set(oi(h,_),T(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let A=0;A<_.length;A++){var w=_[A];const U=le(w);w=Vo(this,w);for(let W=0;W<w.length;W++){let ee=U;w[W]!==""&&(ee+="="+le(w[W])),h.push(ee)}}return this.i=h.join("&")};function Ns(h){const _=new Wn;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function oi(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function yl(h,_){_&&!h.j&&(gn(h),h.i=null,h.g.forEach(function(w,A){const U=A.toLowerCase();A!=U&&(Do(this,A),jo(this,U,w))},h)),h.j=_}function Fo(h,_){const w=new As;if(a.Image){const A=new Image;A.onload=m(An,w,"TestLoadImage: loaded",!0,_,A),A.onerror=m(An,w,"TestLoadImage: error",!1,_,A),A.onabort=m(An,w,"TestLoadImage: abort",!1,_,A),A.ontimeout=m(An,w,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}function bc(h,_){const w=new As,A=new AbortController,U=setTimeout(()=>{A.abort(),An(w,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:A.signal}).then(W=>{clearTimeout(U),W.ok?An(w,"TestPingServer: ok",!0,_):An(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(U),An(w,"TestPingServer: error",!1,_)})}function An(h,_,w,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(w)}catch{}}function rp(){this.g=new gc}function ye(h){this.i=h.Sb||null,this.h=h.ab||!1}g(ye,cl),ye.prototype.g=function(){return new Zt(this.i,this.h)};function Zt(h,_){Pt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Zt,Pt),t=Zt.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,Bi(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||a).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ze(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ze(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?xr(this):Bi(this),this.readyState==3&&ze(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,xr(this))},t.Na=function(h){this.g&&(this.response=h,xr(this))},t.ga=function(){this.g&&xr(this)};function xr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Bi(h)}t.setRequestHeader=function(h,_){this.A.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=_.next();return h.join(`\r
`)};function Bi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Zt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Bo(h){let _="";return ae(h,function(w,A){_+=A,_+=":",_+=w,_+=`\r
`}),_}function Ms(h,_,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Bo(w),typeof h=="string"?w!=null&&le(w):se(h,_,w))}function je(h){Pt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(je,Pt);var vl=/^https?$/i,Os=["POST","PUT"];t=je.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,_,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tc.g(),this.g.onreadystatechange=y(f(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(W){ft(this,W);return}if(h=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)w.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())w.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),U=a.FormData&&h instanceof a.FormData,!(Array.prototype.indexOf.call(Os,_,void 0)>=0)||A||U||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ee]of w)this.g.setRequestHeader(W,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(W){ft(this,W)}};function ft(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,ai(h),Ds(h)}function ai(h){h.A||(h.A=!0,St(h,"complete"),St(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,St(this,"complete"),St(this,"abort"),Ds(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ds(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wl(this):this.Xa())},t.Xa=function(){wl(this)};function wl(h){if(h.h&&typeof o<"u"){if(h.v&&li(h)==4)setTimeout(h.Ca.bind(h),0);else if(St(h,"readystatechange"),li(h)==4){h.h=!1;try{const W=h.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var A;if(A=W===0){let ee=String(h.D).match(wr)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),A=!vl.test(ee?ee.toLowerCase():"")}w=A}if(w)St(h,"complete"),St(h,"success");else{h.o=6;try{var U=li(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",ai(h)}}finally{Ds(h)}}}}function Ds(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,_||St(h,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function li(h){return h.g?h.g.readyState:0}t.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Xf(_)}};function Tl(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function xl(h){const _={};h=(h.g&&li(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(M(h[A]))continue;var w=xc(h[A]);const U=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=_[U]||[];_[U]=W,W.push(w)}J(_,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(h,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||_}function El(h){this.za=0,this.i=[],this.j=new As,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vs("baseRetryDelayMs",5e3,h),this.Za=Vs("retryDelaySeedMs",1e4,h),this.Ta=Vs("forwardChannelMaxRetries",2,h),this.va=Vs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ic(h&&h.concurrentRequestLimit),this.Ba=new rp,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=El.prototype,t.ka=8,t.I=1,t.connect=function(h,_,w,A){It(0),this.W=h,this.H=_||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=Cl(this,null,this.W),ui(this)};function Pe(h){if(sn(h),h.I==3){var _=h.V++,w=Gt(h.J);if(se(w,"SID",h.M),se(w,"RID",_),se(w,"TYPE","terminate"),zi(h,w),_=new Hn(h,h.j,_),_.M=2,_.A=We(Gt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(_.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=_.A,w=!0),w||(_.g=Al(_.j,null),_.g.ea(_.A)),_.F=Date.now(),No(_)}$n(h)}function zo(h){h.g&&(Il(h),h.g.cancel(),h.g=null)}function sn(h){zo(h),h.v&&(a.clearTimeout(h.v),h.v=null),Ho(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&a.clearTimeout(h.m),h.m=null)}function ui(h){if(!Cc(h.h)&&!h.m){h.m=!0;var _=h.Ea;q||I(),Z||(q(),Z=!0),R.add(_,h),h.D=0}}function Rc(h,_){return Ac(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Cs(f(h.Ea,h,_),Mc(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new Hn(this,this.j,h);let W=this.o;if(this.U&&(W?(W=te(W),Ge(W,this.U)):W=this.U),this.u!==null||this.R||(U.J=W,W=null),this.S)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,_>4096){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=Nc(this,U,_),w=Gt(this.J),se(w,"RID",h),se(w,"CVER",22),this.G&&se(w,"X-HTTP-Session-Id",this.G),zi(this,w),W&&(this.R?_="headers="+le(Bo(W))+"&"+_:this.u&&Ms(w,this.u,W)),Di(this.h,U),this.Ra&&se(w,"TYPE","init"),this.S?(se(w,"$req",_),se(w,"SID","null"),U.U=!0,Lo(U,w,null)):Lo(U,w,_),this.I=2}}else this.I==3&&(h?Lc(this,h):this.i.length==0||Cc(this.h)||Lc(this))};function Lc(h,_){var w;_?w=_.l:w=h.V++;const A=Gt(h.J);se(A,"SID",h.M),se(A,"RID",w),se(A,"AID",h.K),zi(h,A),h.u&&h.o&&Ms(A,h.u,h.o),w=new Hn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Nc(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Di(h.h,w),Lo(w,A,_)}function zi(h,_){h.H&&ae(h.H,function(w,A){se(_,A,w)}),h.l&&ae({},function(w,A){se(_,A,w)})}function Nc(h,_,w){w=Math.min(h.i.length,w);const A=h.l?f(h.l.Ka,h.l,h):null;e:{var U=h.i;let ve=-1;for(;;){const Ve=["count="+w];ve==-1?w>0?(ve=U[0].g,Ve.push("ofs="+ve)):ve=0:Ve.push("ofs="+ve);let Fe=!0;for(let ut=0;ut<w;ut++){var W=U[ut].g;const kn=U[ut].map;if(W-=ve,W<0)ve=Math.max(0,U[ut].g-100),Fe=!1;else try{W="req"+W+"_"||"";try{var ee=kn instanceof Map?kn:Object.entries(kn);for(const[qn,bn]of ee){let hi=bn;u(bn)&&(hi=Ao(bn)),Ve.push(W+qn+"="+encodeURIComponent(hi))}}catch(qn){throw Ve.push(W+"type="+encodeURIComponent("_badmap")),qn}}catch{A&&A(kn)}}if(Fe){ee=Ve.join("&");break e}}ee=void 0}return h=h.i.splice(0,w),_.G=h,ee}function Pl(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;q||I(),Z||(q(),Z=!0),R.add(_,h),h.A=0}}function Sl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Cs(f(h.Da,h),Mc(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,Uo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Cs(f(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),zo(this),Uo(this))};function Il(h){h.B!=null&&(a.clearTimeout(h.B),h.B=null)}function Uo(h){h.g=new Hn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Gt(h.na);se(_,"RID","rpc"),se(_,"SID",h.M),se(_,"AID",h.K),se(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&se(_,"TO",h.ia),se(_,"TYPE","xmlhttp"),zi(h,_),h.u&&h.o&&Ms(_,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=We(Gt(_)),w.u=null,w.R=!0,Oi(w,h)}t.Va=function(){this.C!=null&&(this.C=null,zo(this),Sl(this),It(19))};function Ho(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function _n(h,_){var w=null;if(h.g==_){Ho(h),Il(h),h.g=null;var A=2}else if(Rs(h.h,_))w=_.G,gl(h.h,_),A=1;else return;if(h.I!=0){if(_.o)if(A==1){w=_.u?_.u.length:0,_=Date.now()-_.F;var U=h.D;A=bo(),St(A,new vc(A,w)),ui(h)}else Pl(h);else if(U=_.m,U==3||U==0&&_.X>0||!(A==1&&Rc(h,_)||A==2&&Sl(h)))switch(w&&w.length>0&&(_=h.h,_.i=_.i.concat(w)),U){case 1:ci(h,5);break;case 4:ci(h,10);break;case 3:ci(h,6);break;default:ci(h,2)}}}function Mc(h,_){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*_}function ci(h,_){if(h.j.info("Error code "+_),_==2){var w=f(h.bb,h),A=h.Ua;const U=!A;A=new De(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||In(A,"https"),We(A),U?Fo(A.toString(),w):bc(A.toString(),w)}else It(2);h.I=0,h.l&&h.l.pa(_),$n(h),sn(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function $n(h){if(h.I=0,h.ja=[],h.l){const _=_l(h.h);(_.length!=0||h.i.length!=0)&&(b(h.ja,_),b(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function Cl(h,_,w){var A=w instanceof De?Gt(w):new De(w);if(A.g!="")_&&(A.g=_+"."+A.g),Cn(A,A.u);else{var U=a.location;A=U.protocol,_=_?_+"."+U.hostname:U.hostname,U=+U.port;const W=new De(null);A&&In(W,A),_&&(W.g=_),U&&Cn(W,U),w&&(W.h=w),A=W}return w=h.G,_=h.wa,w&&_&&se(A,w,_),se(A,"VER",h.ka),zi(h,A),A}function Al(h,_,w){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new je(new ye({ab:w})):new je(h.ma),_.Fa(h.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wo(){}t=Wo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function $o(){}$o.prototype.g=function(h,_){return new Vt(h,_)};function Vt(h,_){Pt.call(this),this.g=new El(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!M(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!M(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Er(this)}g(Vt,Pt),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Pe(this.g)},Vt.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Ao(h),h=w);_.i.push(new ip(_.Ya++,h)),_.I==3&&ui(_)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Pe(this.g),delete this.g,Vt.Z.N.call(this)};function kl(h){Is.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const w in _){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}g(kl,Is);function Oc(){ko.call(this),this.status=1}g(Oc,ko);function Er(h){this.g=h}g(Er,Wo),Er.prototype.ra=function(){St(this.g,"a")},Er.prototype.qa=function(h){St(this.g,new kl(h))},Er.prototype.pa=function(h){St(this.g,new Oc)},Er.prototype.oa=function(){St(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,YS=function(){return new $o},QS=function(){return bo()},KS=Mi,Rg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Vh=Ro,wc.COMPLETE="complete",ZS=wc,_c.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Kl=_c,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,GS=je}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});const dT="@firebase/firestore",fT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new wy("@firebase/firestore");function ta(){return co.logLevel}function re(t,...e){if(co.logLevel<=be.DEBUG){const n=e.map(Ey);co.debug(`Firestore (${nl}): ${t}`,...n)}}function ur(t,...e){if(co.logLevel<=be.ERROR){const n=e.map(Ey);co.error(`Firestore (${nl}): ${t}`,...n)}}function qa(t,...e){if(co.logLevel<=be.WARN){const n=e.map(Ey);co.warn(`Firestore (${nl}): ${t}`,...n)}}function Ey(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,XS(t,i,n)}function XS(t,e,n){let i=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ur(i),new Error(i)}function Be(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||XS(e,r,i)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class IV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CV{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new eo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new eo,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new eo)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string",31837,{l:i}),new JS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class AV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new AV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Be(this.o===void 0,3512);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new pT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=RV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Re(t,e){return t<e?-1:t>e?1:0}function Lg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return tm(r)===tm(o)?Re(r,o):tm(r)?1:-1}return Re(t.length,e.length)}const LV=55296,NV=57343;function tm(t){const e=t.charCodeAt(0);return e>=LV&&e<=NV}function Ga(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="__name__";class mi{constructor(e,n,i){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ge(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=mi.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Re(e.length,n.length)}static compareSegments(e,n){const i=mi.isNumericId(e),r=mi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?mi.extractNumericId(e).compare(mi.extractNumericId(n)):Lg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return es.fromString(e.substring(4,e.length-2))}}class Ke extends mi{construct(e,n,i){return new Ke(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const MV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends mi{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return MV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mT}static keyField(){return new Nt([mT])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ue(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new ue(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new ue(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Ke.fromString(e))}static fromName(e){return new he(Ke.fromString(e).popFirst(5))}static empty(){return new he(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t,e,n){if(!n)throw new ue(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OV(t,e,n,i){if(e===!0&&i===!0)throw new ue(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gT(t){if(!he.isDocumentKey(t))throw new ue(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _T(t){if(he.isDocumentKey(t))throw new ue(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function ka(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sy(t);throw new ue(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function sc(t,e){if(!tI(t))throw new ue(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ue(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=-62135596800,vT=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*vT);return new Qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yT)throw new ue(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vT}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sc(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:yt("string",Qe._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Qe(0,0))}static max(){return new we(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=-1;function DV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=we.fromTimestamp(i===1e9?new Qe(n+1,0):new Qe(n,i));return new us(r,he.empty(),e)}function VV(t){return new us(t.readTime,t.key,zu)}class us{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new us(we.min(),he.empty(),zu)}static max(){return new us(we.max(),he.empty(),zu)}}function jV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==FV)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},c=>i(c))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function zV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=-1;function Rf(t){return t==null}function bd(t){return t===0&&1/t==-1/0}function UV(t){return typeof t=="number"&&Number.isInteger(t)&&!bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="";function HV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wT(e)),e=WV(t.get(n),e);return wT(e)}function WV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case nI:n+="";break;default:n+=o}}return n}function wT(t){return t+nI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mh(this.root,e,this.comparator,!0)}}class mh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Lt.RED,this.left=r??Lt.EMPTY,this.right=o??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Lt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Lt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xT(this.data.getIterator())}getIteratorFrom(e){return new xT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class xT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new Et(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ga(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rI("Invalid base64 string: "+o):o}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const $V=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(t){if(Be(!!t,39018),typeof t=="string"){let e=0;const n=$V.exec(t);if(Be(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hs(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="server_timestamp",oI="__type__",aI="__previous_value__",lI="__local_write_time__";function Cy(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oI])==null?void 0:i.stringValue)===sI}function Lf(t){const e=t.mapValue.fields[aI];return Cy(e)?Lf(e):e}function Uu(t){const e=cs(t.mapValue.fields[lI].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,i,r,o,a,u,c,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=m}}const Rd="(default)";class Hu{constructor(e,n){this.projectId=e,this.database=n||Rd}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="__type__",GV="__max__",gh={mapValue:{}},cI="__vector__",Ld="value";function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cy(t)?4:KV(t)?9007199254740991:ZV(t)?10:11:ge(28295,{value:t})}function Ci(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uu(t).isEqual(Uu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=cs(r.timestampValue),u=cs(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return hs(r.bytesValue).isEqual(hs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ct(r.geoPointValue.latitude)===ct(o.geoPointValue.latitude)&&ct(r.geoPointValue.longitude)===ct(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ct(r.integerValue)===ct(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=ct(r.doubleValue),u=ct(o.doubleValue);return a===u?bd(a)===bd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ga(t.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(TT(a)!==TT(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!Ci(a[c],u[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Wu(t,e){return(t.values||[]).find(n=>Ci(n,e))!==void 0}function Za(t,e){if(t===e)return 0;const n=ds(t),i=ds(e);if(n!==i)return Re(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ct(o.integerValue||o.doubleValue),c=ct(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return ET(t.timestampValue,e.timestampValue);case 4:return ET(Uu(t),Uu(e));case 5:return Lg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=hs(o),c=hs(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),c=a.split("/");for(let f=0;f<u.length&&f<c.length;f++){const m=Re(u[f],c[f]);if(m!==0)return m}return Re(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Re(ct(o.latitude),ct(a.latitude));return u!==0?u:Re(ct(o.longitude),ct(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return PT(t.arrayValue,e.arrayValue);case 10:return function(o,a){var y,T,b,k;const u=o.fields||{},c=a.fields||{},f=(y=u[Ld])==null?void 0:y.arrayValue,m=(T=c[Ld])==null?void 0:T.arrayValue,g=Re(((b=f==null?void 0:f.values)==null?void 0:b.length)||0,((k=m==null?void 0:m.values)==null?void 0:k.length)||0);return g!==0?g:PT(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===gh.mapValue&&a===gh.mapValue)return 0;if(o===gh.mapValue)return 1;if(a===gh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=a.fields||{},m=Object.keys(f);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const y=Lg(c[g],m[g]);if(y!==0)return y;const T=Za(u[c[g]],f[m[g]]);if(T!==0)return T}return Re(c.length,m.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function ET(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=cs(t),i=cs(e),r=Re(n.seconds,i.seconds);return r!==0?r:Re(n.nanos,i.nanos)}function PT(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Za(n[r],i[r]);if(o)return o}return Re(n.length,i.length)}function Ka(t){return Ng(t)}function Ng(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=cs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Ng(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Ng(n.fields[a])}`;return r+"}"}(t.mapValue):ge(61005,{value:t})}function jh(t){switch(ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(t);return e?16+jh(e):16;case 5:return 2*t.stringValue.length;case 6:return hs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+jh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return xo(i.fields,(o,a)=>{r+=o.length+jh(a)}),r}(t.mapValue);default:throw ge(13486,{value:t})}}function Mg(t){return!!t&&"integerValue"in t}function Ay(t){return!!t&&"arrayValue"in t}function ST(t){return!!t&&"nullValue"in t}function IT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fh(t){return!!t&&"mapValue"in t}function ZV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[uI])==null?void 0:i.stringValue)===cI}function fu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return xo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=fu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fu(t.arrayValue.values[n]);return e}return{...t}}function KV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=fu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Fh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){xo(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Vn(fu(this.value))}}function hI(t){const e=[];return xo(t.fields,(n,i)=>{const r=new Nt([n]);if(Fh(i)){const o=hI(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Wt(e,0,we.min(),we.min(),we.min(),Vn.empty(),0)}static newFoundDocument(e,n,i,r){return new Wt(e,1,n,we.min(),i,r,0)}static newNoDocument(e,n){return new Wt(e,2,n,we.min(),we.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,we.min(),we.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.position=e,this.inclusive=n}}function CT(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=he.comparator(he.fromName(a.referenceValue),n.key):i=Za(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function AT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n="asc"){this.field=e,this.dir=n}}function QV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{}class wt extends dI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new XV(e,n,i):n==="array-contains"?new t4(e,i):n==="in"?new n4(e,i):n==="not-in"?new i4(e,i):n==="array-contains-any"?new r4(e,i):new wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new JV(e,i):new e4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Za(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(Za(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends dI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ai(e,n)}matches(e){return fI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fI(t){return t.op==="and"}function pI(t){return YV(t)&&fI(t)}function YV(t){for(const e of t.filters)if(e instanceof Ai)return!1;return!0}function Og(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Ka(t.value);if(pI(t))return t.filters.map(e=>Og(e)).join(",");{const e=t.filters.map(n=>Og(n)).join(",");return`${t.op}(${e})`}}function mI(t,e){return t instanceof wt?function(i,r){return r instanceof wt&&i.op===r.op&&i.field.isEqual(r.field)&&Ci(i.value,r.value)}(t,e):t instanceof Ai?function(i,r){return r instanceof Ai&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&mI(a,r.filters[u]),!0):!1}(t,e):void ge(19439)}function gI(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ka(n.value)}`}(t):t instanceof Ai?function(n){return n.op.toString()+" {"+n.getFilters().map(gI).join(" ,")+"}"}(t):"Filter"}class XV extends wt{constructor(e,n,i){super(e,n,i),this.key=he.fromName(i.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class JV extends wt{constructor(e,n){super(e,"in",n),this.keys=_I("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class e4 extends wt{constructor(e,n){super(e,"not-in",n),this.keys=_I("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _I(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>he.fromName(i.referenceValue))}class t4 extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ay(n)&&Wu(n.arrayValue,this.value)}}class n4 extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wu(this.value.arrayValue,n)}}class i4 extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wu(this.value.arrayValue,n)}}class r4 extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ay(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Wu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function kT(t,e=null,n=[],i=[],r=null,o=null,a=null){return new s4(t,e,n,i,r,o,a)}function ky(t){const e=Te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Og(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Rf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ka(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ka(i)).join(",")),e.Te=n}return e.Te}function by(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AT(t.startAt,e.startAt)&&AT(t.endAt,e.endAt)}function Dg(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function o4(t,e,n,i,r,o,a,u){return new Nf(t,e,n,i,r,o,a,u)}function Ry(t){return new Nf(t)}function bT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function a4(t){return t.collectionGroup!==null}function pu(t){const e=Te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Et(Nt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Md(o,i))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new Md(Nt.keyField(),i))}return e.Ie}function Ti(t){const e=Te(t);return e.Ee||(e.Ee=l4(e,pu(t))),e.Ee}function l4(t,e){if(t.limitType==="F")return kT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Md(r.field,o)});const n=t.endAt?new Nd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Nd(t.startAt.position,t.startAt.inclusive):null;return kT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Vg(t,e,n){return new Nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mf(t,e){return by(Ti(t),Ti(e))&&t.limitType===e.limitType}function yI(t){return`${ky(Ti(t))}|lt:${t.limitType}`}function na(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>gI(r)).join(", ")}]`),Rf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ka(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ka(r)).join(",")),`Target(${i})`}(Ti(t))}; limitType=${t.limitType})`}function Of(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):he.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of pu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const f=CT(a,u,c);return a.inclusive?f<=0:f<0}(i.startAt,pu(i),r)||i.endAt&&!function(a,u,c){const f=CT(a,u,c);return a.inclusive?f>=0:f>0}(i.endAt,pu(i),r))}(t,e)}function u4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vI(t){return(e,n)=>{let i=!1;for(const r of pu(t)){const o=c4(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function c4(t,e,n){const i=t.field.isKeyField()?he.comparator(e.key,n.key):function(o,a,u){const c=a.data.field(o),f=u.data.field(o);return c!==null&&f!==null?Za(c,f):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return iI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new st(he.comparator);function cr(){return h4}const wI=new st(he.comparator);function Ql(...t){let e=wI;for(const n of t)e=e.insert(n.key,n);return e}function TI(t){let e=wI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Qs(){return mu()}function xI(){return mu()}function mu(){return new Eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const d4=new st(he.comparator),f4=new Et(he.comparator);function Le(...t){let e=f4;for(const n of t)e=e.add(n);return e}const p4=new Et(Re);function m4(){return p4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function EI(t){return{integerValue:""+t}}function g4(t,e){return UV(e)?EI(e):Ly(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this._=void 0}}function _4(t,e,n){return t instanceof Od?function(r,o){const a={fields:{[oI]:{stringValue:sI},[lI]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Cy(o)&&(o=Lf(o)),o&&(a.fields[aI]=o),{mapValue:a}}(n,e):t instanceof $u?SI(t,e):t instanceof qu?II(t,e):function(r,o){const a=PI(r,o),u=RT(a)+RT(r.Ae);return Mg(a)&&Mg(r.Ae)?EI(u):Ly(r.serializer,u)}(t,e)}function y4(t,e,n){return t instanceof $u?SI(t,e):t instanceof qu?II(t,e):n}function PI(t,e){return t instanceof Dd?function(i){return Mg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Od extends Df{}class $u extends Df{constructor(e){super(),this.elements=e}}function SI(t,e){const n=CI(e);for(const i of t.elements)n.some(r=>Ci(r,i))||n.push(i);return{arrayValue:{values:n}}}class qu extends Df{constructor(e){super(),this.elements=e}}function II(t,e){let n=CI(e);for(const i of t.elements)n=n.filter(r=>!Ci(r,i));return{arrayValue:{values:n}}}class Dd extends Df{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function RT(t){return ct(t.integerValue||t.doubleValue)}function CI(t){return Ay(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function v4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof $u&&r instanceof $u||i instanceof qu&&r instanceof qu?Ga(i.elements,r.elements,Ci):i instanceof Dd&&r instanceof Dd?Ci(i.Ae,r.Ae):i instanceof Od&&r instanceof Od}(t.transform,e.transform)}class w4{constructor(e,n){this.version=e,this.transformResults=n}}class nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vf{}function AI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bI(t.key,nr.none()):new oc(t.key,t.data,nr.none());{const n=t.data,i=Vn.empty();let r=new Et(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Po(t.key,i,new Xn(r.toArray()),nr.none())}}function T4(t,e,n){t instanceof oc?function(r,o,a){const u=r.value.clone(),c=NT(r.fieldTransforms,o,a.transformResults);u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Po?function(r,o,a){if(!Bh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=NT(r.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(kI(r)),c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function gu(t,e,n,i){return t instanceof oc?function(o,a,u,c){if(!Bh(o.precondition,a))return u;const f=o.value.clone(),m=MT(o.fieldTransforms,c,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Po?function(o,a,u,c){if(!Bh(o.precondition,a))return u;const f=MT(o.fieldTransforms,c,a),m=a.data;return m.setAll(kI(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Bh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function x4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=PI(i.transform,r||null);o!=null&&(n===null&&(n=Vn.empty()),n.set(i.field,o))}return n||null}function LT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ga(i,r,(o,a)=>v4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oc extends Vf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Po extends Vf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function kI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function NT(t,e,n){const i=new Map;Be(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,y4(a,u,n[r]))}return i}function MT(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,_4(o,a,e))}return i}class bI extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class E4 extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&T4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=gu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=gu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=xI();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const c=AI(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(we.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Le())}isEqual(e){return this.batchId===e.batchId&&Ga(this.mutations,e.mutations,(n,i)=>LT(n,i))&&Ga(this.baseMutations,e.baseMutations,(n,i)=>LT(n,i))}}class Ny{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Be(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return d4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Ny(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Me;function C4(t){switch(t){case Y.OK:return ge(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function RI(t){if(t===void 0)return ur("GRPC error has no .code"),Y.UNKNOWN;switch(t){case mt.OK:return Y.OK;case mt.CANCELLED:return Y.CANCELLED;case mt.UNKNOWN:return Y.UNKNOWN;case mt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case mt.INTERNAL:return Y.INTERNAL;case mt.UNAVAILABLE:return Y.UNAVAILABLE;case mt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case mt.NOT_FOUND:return Y.NOT_FOUND;case mt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case mt.ABORTED:return Y.ABORTED;case mt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case mt.DATA_LOSS:return Y.DATA_LOSS;default:return ge(39323,{code:t})}}(Me=mt||(mt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=new es([4294967295,4294967295],0);function OT(t){const e=A4().encode(t),n=new qS;return n.update(e),new Uint8Array(n.digest())}function DT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new es([n,i],0),new es([r,o],0)]}class My{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Yl(`Invalid padding: ${n}`);if(i<0)throw new Yl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=es.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(es.fromNumber(i)));return r.compare(k4)===1&&(r=new es([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=OT(e),[i,r]=DT(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new My(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=OT(e),[i,r]=DT(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new jf(we.min(),r,new st(Re),cr(),Le())}}class ac{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ac(i,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class LI{constructor(e,n){this.targetId=e,this.Ce=n}}class NI{constructor(e,n,i=Dt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class VT{constructor(){this.ve=0,this.Fe=jT(),this.Me=Dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),i=Le();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ge(38017,{changeType:o})}}),new ac(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=jT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class b4{constructor(e){this.Ge=e,this.ze=new Map,this.je=cr(),this.Je=_h(),this.He=_h(),this.Ye=new st(Re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Dg(o))if(i===0){const a=new he(o.path);this.et(n,a,Wt.newNoDocument(a,we.min()))}else Be(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),c=u?this.ct(u,e,a):1;if(c!==0){this.it(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=hs(i).toUint8Array()}catch(c){if(c instanceof rI)return qa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new My(a,r,o)}catch(c){return qa(c instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Dg(u.target)){const c=new he(u.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Wt.newNoDocument(c,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Le();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new jf(e,n,this.Ye,this.je,i);return this.je=cr(),this.Je=_h(),this.He=_h(),this.Ye=new st(Re),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new VT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Et(Re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Et(Re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new VT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _h(){return new st(he.comparator)}function jT(){return new st(he.comparator)}const R4={asc:"ASCENDING",desc:"DESCENDING"},L4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N4={and:"AND",or:"OR"};class M4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jg(t,e){return t.useProto3Json||Rf(e)?e:{value:e}}function Vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O4(t,e){return Vd(t,e.toTimestamp())}function xi(t){return Be(!!t,49232),we.fromTimestamp(function(n){const i=cs(n);return new Qe(i.seconds,i.nanos)}(t))}function Oy(t,e){return Fg(t,e).canonicalString()}function Fg(t,e){const n=function(r){return new Ke(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function OI(t){const e=Ke.fromString(t);return Be(BI(e),10190,{key:e.toString()}),e}function Bg(t,e){return Oy(t.databaseId,e.path)}function nm(t,e){const n=OI(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(VI(n))}function DI(t,e){return Oy(t.databaseId,e)}function D4(t){const e=OI(t);return e.length===4?Ke.emptyPath():VI(e)}function zg(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VI(t){return Be(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function FT(t,e,n){return{name:Bg(t,e),fields:n.value.mapValue.fields}}function V4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ge(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Be(m===void 0||typeof m=="string",58123),Dt.fromBase64String(m||"")):(Be(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Dt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?Y.UNKNOWN:RI(f.code);return new ue(m,f.message||"")}(a);n=new NI(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=nm(t,i.document.name),o=xi(i.document.updateTime),a=i.document.createTime?xi(i.document.createTime):we.min(),u=new Vn({mapValue:{fields:i.document.fields}}),c=Wt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new zh(f,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=nm(t,i.document),o=i.readTime?xi(i.readTime):we.min(),a=Wt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new zh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=nm(t,i.document),o=i.removedTargetIds||[];n=new zh([],o,r,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new I4(r,o),u=i.targetId;n=new LI(u,a)}}return n}function j4(t,e){let n;if(e instanceof oc)n={update:FT(t,e.key,e.value)};else if(e instanceof bI)n={delete:Bg(t,e.key)};else if(e instanceof Po)n={update:FT(t,e.key,e.data),updateMask:G4(e.fieldMask)};else{if(!(e instanceof E4))return ge(16599,{Vt:e.type});n={verify:Bg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Od)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof $u)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof qu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Dd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw ge(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:O4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge(27497)}(t,e.precondition)),n}function F4(t,e){return t&&t.length>0?(Be(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?xi(r.updateTime):xi(o);return a.isEqual(we.min())&&(a=xi(o)),new w4(a,r.transformResults||[])}(n,e))):[]}function B4(t,e){return{documents:[DI(t,e.path)]}}function z4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=DI(t,r);const o=function(f){if(f.length!==0)return FI(Ai.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(y){return{field:ia(y.field),direction:W4(y.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=jg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function U4(t){let e=D4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Be(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const y=jI(g);return y instanceof Ai&&pI(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(y=>function(b){return new Md(ra(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(n.orderBy));let u=null;n.limit&&(u=function(g){let y;return y=typeof g=="object"?g.value:g,Rf(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(g){const y=!!g.before,T=g.values||[];return new Nd(T,y)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const y=!g.before,T=g.values||[];return new Nd(T,y)}(n.endAt)),o4(e,r,a,o,u,"F",c,f)}function H4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ra(n.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ra(n.unaryFilter.field);return wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ra(n.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ra(n.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return wt.create(ra(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ai.create(n.compositeFilter.filters.map(i=>jI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function W4(t){return R4[t]}function $4(t){return L4[t]}function q4(t){return N4[t]}function ia(t){return{fieldPath:t.canonicalString()}}function ra(t){return Nt.fromServerFormat(t.fieldPath)}function FI(t){return t instanceof wt?function(n){if(n.op==="=="){if(IT(n.value))return{unaryFilter:{field:ia(n.field),op:"IS_NAN"}};if(ST(n.value))return{unaryFilter:{field:ia(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(IT(n.value))return{unaryFilter:{field:ia(n.field),op:"IS_NOT_NAN"}};if(ST(n.value))return{unaryFilter:{field:ia(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ia(n.field),op:$4(n.op),value:n.value}}}(t):t instanceof Ai?function(n){const i=n.getFilters().map(r=>FI(r));return i.length===1?i[0]:{compositeFilter:{op:q4(n.op),filters:i}}}(t):ge(54877,{filter:t})}function G4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,i,r,o=we.min(),a=we.min(),u=Dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.yt=e}}function K4(t){const e=U4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.Cn=new Y4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(us.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class Y4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Et(Ke.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Et(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zI=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(zI,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qa(0)}static cr(){return new Qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="LruGarbageCollector",X4=1048576;function UT([t,e],[n,i]){const r=Re(t,n);return r===0?Re(e,i):r}class J4{constructor(e){this.Ir=e,this.buffer=new Et(UT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();UT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class e5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(zT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rl(n)?re(zT,"Ignoring IndexedDB error during garbage collection: ",n):await il(n)}await this.Vr(3e5)})}}class t5{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(bf.ce);const i=new J4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(BT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,c,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),ta()<=be.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function n5(t,e){return new t5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(){this.changes=new Eo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&gu(i.mutation,r,Xn.empty(),Qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Le()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Le()){const r=Qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Ql();return o.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Qs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Le()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=cr();const a=mu(),u=function(){return mu()}();return n.forEach((c,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Po)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),gu(m.mutation,f,m.mutation.getFieldMask(),Qe.now())):a.set(f.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new r5(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=mu();let r=new st((a,u)=>a-u),o=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let m=i.get(c)||Xn.empty();m=u.applyToLocalView(f,m),i.set(c,m);const g=(r.get(u.batchId)||Le()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,m=c.value,g=xI();m.forEach(y=>{if(!o.has(y)){const T=AI(n.get(y),i.get(y));T!==null&&g.set(y,T),o=o.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return he.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):a4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(Qs());let u=zu,c=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(y=>{c=c.insert(m,y)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,Le())).next(m=>({batchId:u,changes:TI(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(i=>{let r=Ql();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Ql();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,c=>{const f=function(g,y){return new Nf(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,y)=>{a=a.insert(g,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((c,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Wt.newInvalidDocument(m)))});let u=Ql();return a.forEach((c,f)=>{const m=o.get(c);m!==void 0&&gu(m.mutation,f,Xn.empty(),Qe.now()),Of(n,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:xi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:K4(r.bundledQuery),readTime:xi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(){this.overlays=new st(he.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Qs();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=Qs(),o=n.length+1,a=new he(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new st((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Qs(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Qs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new S4(n,i));let o=this.qr.get(n);o===void 0&&(o=Le(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.Qr=new Et(At.$r),this.Ur=new Et(At.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new At(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new At(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new he(new Ke([])),i=new At(n,e),r=new At(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new Ke([])),i=new At(n,e),r=new At(n,e+1);let o=Le();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new At(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Re(e.Yr,n.Yr)}static Kr(e,n){return Re(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Et(At.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new P4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new At(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Iy:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new At(n,0),r=new At(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Et(Re);return n.forEach(r=>{const o=new At(r,0),a=new At(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;he.isDocumentKey(o)||(o=o.child(""));const a=new At(new he(o),0);let u=new Et(Re);return this.Zr.forEachWhile(c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(c.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Be(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new At(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new At(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.ri=e,this.docs=function(){return new st(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let i=cr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Wt.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=cr();const a=n.path,u=new he(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:m}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||jV(VV(m),i)<=0||(r.has(m.key)||Of(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ge(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new h5(this)}getSize(e){return K.resolve(this.size)}}class h5 extends i5{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e){this.persistence=e,this.si=new Eo(n=>ky(n),by),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new Dy,this.targetCount=0,this.ai=Qa.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.ui={},this.overlays={},this.ci=new bf(0),this.li=!1,this.li=!0,this.hi=new l5,this.referenceDelegate=e(this),this.Pi=new d5(this),this.indexManager=new Q4,this.remoteDocumentCache=function(r){return new c5(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new Z4(n),this.Ii=new o5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new a5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new u5(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const r=new f5(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class f5 extends BV{constructor(e){super(),this.currentSequenceNumber=e}}class Vy{constructor(e){this.persistence=e,this.Ri=new Dy,this.Vi=null}static mi(e){return new Vy(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=he.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jd{constructor(e,n){this.persistence=e,this.pi=new Eo(i=>HV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=n5(this,n)}static mi(e,n){return new jd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,we.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Le(),r=Le();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new jy(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return aD()?8:zV(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new p5;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(ta()<=be.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",na(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(ta()<=be.DEBUG&&re("QueryEngine","Query:",na(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ta()<=be.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",na(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(n))):K.resolve())}ys(e,n){if(bT(n))return K.resolve(null);let i=Ti(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Vg(n,null,"F"),i=Ti(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Le(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const f=this.Ds(n,u);return this.Cs(n,f,a,c.readTime)?this.ys(e,Vg(n,null,"F")):this.vs(e,f,n,c)}))})))}ws(e,n,i,r){return bT(n)||r.isEqual(we.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(ta()<=be.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),na(n)),this.vs(e,a,n,DV(r,zu)).next(u=>u))})}Ds(e,n){let i=new Et(vI(e));return n.forEach((r,o)=>{Of(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return ta()<=be.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",na(n)),this.ps.getDocumentsMatchingQuery(e,n,us.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="LocalStore",g5=3e8;class _5{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new st(Re),this.xs=new Eo(o=>ky(o),by),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function y5(t,e,n,i){return new _5(t,e,n,i)}async function HI(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let c=Le();for(const f of r){a.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(i,c).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function v5(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,f,m){const g=f.batch,y=g.keys();let T=K.resolve();return y.forEach(b=>{T=T.next(()=>m.getEntry(c,b)).next(k=>{const D=f.docVersions.get(b);Be(D!==null,48541),k.version.compareTo(D)<0&&(g.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=Le();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function WI(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function w5(t,e){const n=Te(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const y=r.get(g);if(!y)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let T=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Dt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(k,D,C){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=g5?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(y,T,m)&&u.push(n.Pi.updateTargetData(o,T))});let c=cr(),f=Le();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(T5(o,a,e.documentUpdates).next(m=>{c=m.ks,f=m.qs})),!i.isEqual(we.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,f)).next(()=>c)}).then(o=>(n.Ms=r,o))}function T5(t,e,n){let i=Le(),r=Le();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=cr();return n.forEach((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):re(Fy,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{ks:a,qs:r}})}function x5(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Iy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function E5(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new zr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Ug(t,e,n){const i=Te(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!rl(a))throw a;re(Fy,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function HT(t,e,n){const i=Te(t);let r=we.min(),o=Le();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,m){const g=Te(c),y=g.xs.get(m);return y!==void 0?K.resolve(g.Ms.get(y)):g.Pi.getTargetData(f,m)}(i,a,Ti(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(c=>{o=c})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:we.min(),n?o:Le())).next(u=>(P5(i,u4(e),u),{documents:u,Qs:o})))}function P5(t,e,n){let i=t.Os.get(e)||we.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class WT{constructor(){this.activeTargetIds=m4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S5{constructor(){this.Mo=new WT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new WT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="ConnectivityMonitor";class qT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re($T,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re($T,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function Hg(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="RestConnection",C5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Rd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Hg(),u=this.zo(e,n.toUriEncodedString());re(im,`Sending RPC '${e}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,o);const{host:f}=new URL(u),m=wo(f);return this.Jo(e,u,c,i,m).then(g=>(re(im,`Received RPC '${e}' ${a}: `,g),g),g=>{throw qa(im,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=C5[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class b5 extends A5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Hg();return new Promise((u,c)=>{const f=new GS;f.setWithCredentials(!0),f.listenOnce(ZS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Vh.NO_ERROR:const g=f.getResponseJson();re(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Vh.TIMEOUT:re(Bt,`RPC '${e}' ${a} timed out`),c(new ue(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const y=f.getStatus();if(re(Bt,`RPC '${e}' ${a} failed with status:`,y,"response text:",f.getResponseText()),y>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const b=T==null?void 0:T.error;if(b&&b.status&&b.message){const k=function(C){const P=C.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(P)>=0?P:Y.UNKNOWN}(b.status);c(new ue(k,b.message))}else c(new ue(Y.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new ue(Y.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{re(Bt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);re(Bt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Hg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=YS(),u=QS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const m=o.join("");re(Bt,`Creating RPC '${e}' stream ${r}: ${m}`,c);const g=a.createWebChannel(m,c);this.I_(g);let y=!1,T=!1;const b=new k5({Yo:D=>{T?re(Bt,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(y||(re(Bt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),y=!0),re(Bt,`RPC '${e}' stream ${r} sending:`,D),g.send(D))},Zo:()=>g.close()}),k=(D,C,P)=>{D.listen(C,S=>{try{P(S)}catch(B){setTimeout(()=>{throw B},0)}})};return k(g,Kl.EventType.OPEN,()=>{T||(re(Bt,`RPC '${e}' stream ${r} transport opened.`),b.o_())}),k(g,Kl.EventType.CLOSE,()=>{T||(T=!0,re(Bt,`RPC '${e}' stream ${r} transport closed`),b.a_(),this.E_(g))}),k(g,Kl.EventType.ERROR,D=>{T||(T=!0,qa(Bt,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),b.a_(new ue(Y.UNAVAILABLE,"The operation could not be completed")))}),k(g,Kl.EventType.MESSAGE,D=>{var C;if(!T){const P=D.data[0];Be(!!P,16349);const S=P,B=(S==null?void 0:S.error)||((C=S[0])==null?void 0:C.error);if(B){re(Bt,`RPC '${e}' stream ${r} received error:`,B);const q=B.status;let Z=function(N){const O=mt[N];if(O!==void 0)return RI(O)}(q),R=B.message;Z===void 0&&(Z=Y.INTERNAL,R="Unknown error status: "+q+" with message "+B.message),T=!0,b.a_(new ue(Z,R)),g.close()}else re(Bt,`RPC '${e}' stream ${r} received:`,P),b.u_(P)}}),k(u,KS.STAT_EVENT,D=>{D.stat===Rg.PROXY?re(Bt,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===Rg.NOPROXY&&re(Bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){return new M4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="PersistentStream";class qI{constructor(e,n,i,r,o,a,u,c){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $I(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new ue(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(GT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(GT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R5 extends qI{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=V4(this.serializer,e),i=function(o){if(!("targetChange"in o))return we.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?we.min():a.readTime?xi(a.readTime):we.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=zg(this.serializer),n.addTarget=function(o,a){let u;const c=a.target;if(u=Dg(c)?{documents:B4(o,c)}:{query:z4(o,c).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=MI(o,a.resumeToken);const f=jg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(we.min())>0){u.readTime=Vd(o,a.snapshotVersion.toTimestamp());const f=jg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=H4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=zg(this.serializer),n.removeTarget=e,this.q_(n)}}class L5 extends qI{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=F4(e.writeResults,e.commitTime),i=xi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=zg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>j4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{}class M5 extends N5{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ue(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Fg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(Y.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Fg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(Y.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class O5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ur(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="RemoteStore";class D5{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{So(this)&&(re(ho,"Restarting streams for network reachability change."),await async function(c){const f=Te(c);f.Ea.add(4),await lc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Bf(f)}(this))})}),this.Ra=new O5(i,r)}}async function Bf(t){if(So(t))for(const e of t.da)await e(!0)}async function lc(t){for(const e of t.da)await e(!1)}function GI(t,e){const n=Te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Hy(n)?Uy(n):sl(n).O_()&&zy(n,e))}function By(t,e){const n=Te(t),i=sl(n);n.Ia.delete(e),i.O_()&&ZI(n,e),n.Ia.size===0&&(i.O_()?i.L_():So(n)&&n.Ra.set("Unknown"))}function zy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sl(t).Y_(e)}function ZI(t,e){t.Va.Ue(e),sl(t).Z_(e)}function Uy(t){t.Va=new b4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),sl(t).start(),t.Ra.ua()}function Hy(t){return So(t)&&!sl(t).x_()&&t.Ia.size>0}function So(t){return Te(t).Ea.size===0}function KI(t){t.Va=void 0}async function V5(t){t.Ra.set("Online")}async function j5(t){t.Ia.forEach((e,n)=>{zy(t,e)})}async function F5(t,e){KI(t),Hy(t)?(t.Ra.ha(e),Uy(t)):t.Ra.set("Unknown")}async function B5(t,e,n){if(t.Ra.set("Online"),e instanceof NI&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){re(ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fd(t,i)}else if(e instanceof zh?t.Va.Ze(e):e instanceof LI?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const i=await WI(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,f)=>{const m=o.Ia.get(c);if(!m)return;o.Ia.set(c,m.withResumeToken(Dt.EMPTY_BYTE_STRING,m.snapshotVersion)),ZI(o,c);const g=new zr(m.target,c,f,m.sequenceNumber);zy(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){re(ho,"Failed to raise snapshot:",i),await Fd(t,i)}}async function Fd(t,e,n){if(!rl(e))throw e;t.Ea.add(1),await lc(t),t.Ra.set("Offline"),n||(n=()=>WI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(ho,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bf(t)})}function QI(t,e){return e().catch(n=>Fd(t,n,e))}async function zf(t){const e=Te(t),n=fs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Iy;for(;z5(e);)try{const r=await x5(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,U5(e,r)}catch(r){await Fd(e,r)}YI(e)&&XI(e)}function z5(t){return So(t)&&t.Ta.length<10}function U5(t,e){t.Ta.push(e);const n=fs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function YI(t){return So(t)&&!fs(t).x_()&&t.Ta.length>0}function XI(t){fs(t).start()}async function H5(t){fs(t).ra()}async function W5(t){const e=fs(t);for(const n of t.Ta)e.ea(n.mutations)}async function $5(t,e,n){const i=t.Ta.shift(),r=Ny.from(i,e,n);await QI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await zf(t)}async function q5(t,e){e&&fs(t).X_&&await async function(i,r){if(function(a){return C4(a)&&a!==Y.ABORTED}(r.code)){const o=i.Ta.shift();fs(i).B_(),await QI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await zf(i)}}(t,e),YI(t)&&XI(t)}async function ZT(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),re(ho,"RemoteStore received new credentials");const i=So(n);n.Ea.add(3),await lc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bf(n)}async function G5(t,e){const n=Te(t);e?(n.Ea.delete(2),await Bf(n)):e||(n.Ea.add(2),await lc(n),n.Ra.set("Unknown"))}function sl(t){return t.ma||(t.ma=function(n,i,r){const o=Te(n);return o.sa(),new R5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:V5.bind(null,t),t_:j5.bind(null,t),r_:F5.bind(null,t),H_:B5.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Hy(t)?Uy(t):t.Ra.set("Unknown")):(await t.ma.stop(),KI(t))})),t.ma}function fs(t){return t.fa||(t.fa=function(n,i,r){const o=Te(n);return o.sa(),new L5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:H5.bind(null,t),r_:q5.bind(null,t),ta:W5.bind(null,t),na:$5.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await zf(t)):(await t.fa.stop(),t.Ta.length>0&&(re(ho,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Wy(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $y(t,e){if(ur("AsyncQueue",`${e}: ${t}`),rl(t))return new ue(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{static emptySet(e){return new ba(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||he.comparator(n.key,i.key):(n,i)=>he.comparator(n.key,i.key),this.keyedMap=Ql(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ba;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.ga=new st(he.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ya{constructor(e,n,i,r,o,a,u,c,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ya(e,n,ba.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class K5{constructor(){this.queries=QT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Te(n),o=r.queries;r.queries=QT(),o.forEach((a,u)=>{for(const c of u.Sa)c.onError(i)})})(this,new ue(Y.ABORTED,"Firestore shutting down"))}}function QT(){return new Eo(t=>yI(t),Mf)}async function Q5(t,e){const n=Te(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new Z5,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=$y(a,`Initialization of query '${na(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&qy(n)}async function Y5(t,e){const n=Te(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function X5(t,e){const n=Te(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&qy(n)}function J5(t,e,n){const i=Te(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function qy(t){t.Ca.forEach(e=>{e.next()})}var Wg,YT;(YT=Wg||(Wg={})).Ma="default",YT.Cache="cache";class e3{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ya(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.key=e}}class eC{constructor(e){this.key=e}}class t3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=vI(e),this.tu=new ba(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new KT,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const y=r.get(m),T=Of(this.query,g)?g:null,b=!!y&&this.mutatedKeys.has(y.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let D=!1;y&&T?y.data.isEqual(T.data)?b!==k&&(i.track({type:3,doc:T}),D=!0):this.su(y,T)||(i.track({type:2,doc:T}),D=!0,(c&&this.eu(T,c)>0||f&&this.eu(T,f)<0)&&(u=!0)):!y&&T?(i.track({type:0,doc:T}),D=!0):y&&!T&&(i.track({type:1,doc:y}),D=!0,(c||f)&&(u=!0)),D&&(T?(a=a.add(T),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(T,b){const k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:D})}};return k(T)-k(b)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,f=c!==this.Za;return this.Za=c,a.length!==0||f?{snapshot:new Ya(this.query,e.tu,o,a,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new KT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new eC(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new JI(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ya.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gy="SyncEngine";class n3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class i3{constructor(e){this.key=e,this.hu=!1}}class r3{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Eo(u=>yI(u),Mf),this.Iu=new Map,this.Eu=new Set,this.du=new st(he.comparator),this.Au=new Map,this.Ru=new Dy,this.Vu={},this.mu=new Map,this.fu=Qa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function s3(t,e,n=!0){const i=oC(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await tC(i,e,n,!0),r}async function o3(t,e){const n=oC(t);await tC(n,e,!0,!1)}async function tC(t,e,n,i){const r=await E5(t.localStore,Ti(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await a3(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&GI(t.remoteStore,r),u}async function a3(t,e,n,i,r){t.pu=(g,y,T)=>async function(k,D,C,P){let S=D.view.ru(C);S.Cs&&(S=await HT(k.localStore,D.query,!1).then(({documents:R})=>D.view.ru(R,S)));const B=P&&P.targetChanges.get(D.targetId),q=P&&P.targetMismatches.get(D.targetId)!=null,Z=D.view.applyChanges(S,k.isPrimaryClient,B,q);return JT(k,D.targetId,Z.au),Z.snapshot}(t,g,y,T);const o=await HT(t.localStore,e,!0),a=new t3(e,o.Qs),u=a.ru(o.documents),c=ac.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,c);JT(t,n,f.au);const m=new n3(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function l3(t,e,n){const i=Te(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Mf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ug(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&By(i.remoteStore,r.targetId),$g(i,r.targetId)}).catch(il)):($g(i,r.targetId),await Ug(i.localStore,r.targetId,!0))}async function u3(t,e){const n=Te(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),By(n.remoteStore,i.targetId))}async function c3(t,e,n){const i=_3(t);try{const r=await function(a,u){const c=Te(a),f=Qe.now(),m=u.reduce((T,b)=>T.add(b.key),Le());let g,y;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let b=cr(),k=Le();return c.Ns.getEntries(T,m).next(D=>{b=D,b.forEach((C,P)=>{P.isValidDocument()||(k=k.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,b)).next(D=>{g=D;const C=[];for(const P of u){const S=x4(P,g.get(P.key).overlayedDocument);S!=null&&C.push(new Po(P.key,S,hI(S.value.mapValue),nr.exists(!0)))}return c.mutationQueue.addMutationBatch(T,f,C,u)}).next(D=>{y=D;const C=D.applyToLocalDocumentSet(g,k);return c.documentOverlayCache.saveOverlays(T,D.batchId,C)})}).then(()=>({batchId:y.batchId,changes:TI(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let f=a.Vu[a.currentUser.toKey()];f||(f=new st(Re)),f=f.insert(u,c),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await uc(i,r.changes),await zf(i.remoteStore)}catch(r){const o=$y(r,"Failed to persist write");n.reject(o)}}async function nC(t,e){const n=Te(t);try{const i=await w5(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Be(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Be(a.hu,14607):r.removedDocuments.size>0&&(Be(a.hu,42227),a.hu=!1))}),await uc(n,i,e)}catch(i){await il(i)}}function XT(t,e,n){const i=Te(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=Te(a);c.onlineState=u;let f=!1;c.queries.forEach((m,g)=>{for(const y of g.Sa)y.va(u)&&(f=!0)}),f&&qy(c)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function h3(t,e,n){const i=Te(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new st(he.comparator);a=a.insert(o,Wt.newNoDocument(o,we.min()));const u=Le().add(o),c=new jf(we.min(),new Map,new st(Re),a,u);await nC(i,c),i.du=i.du.remove(o),i.Au.delete(e),Zy(i)}else await Ug(i.localStore,e,!1).then(()=>$g(i,e,n)).catch(il)}async function d3(t,e){const n=Te(t),i=e.batch.batchId;try{const r=await v5(n.localStore,e);rC(n,i,null),iC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await uc(n,r)}catch(r){await il(r)}}async function f3(t,e,n){const i=Te(t);try{const r=await function(a,u){const c=Te(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return c.mutationQueue.lookupMutationBatch(f,u).next(g=>(Be(g!==null,37113),m=g.keys(),c.mutationQueue.removeMutationBatch(f,g))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>c.localDocuments.getDocuments(f,m))})}(i.localStore,e);rC(i,e,n),iC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await uc(i,r)}catch(r){await il(r)}}function iC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rC(t,e,n){const i=Te(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function $g(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||sC(t,i)})}function sC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(By(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Zy(t))}function JT(t,e,n){for(const i of n)i instanceof JI?(t.Ru.addReference(i.key,e),p3(t,i)):i instanceof eC?(re(Gy,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||sC(t,i.key)):ge(19791,{wu:i})}function p3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(re(Gy,"New document in limbo: "+n),t.Eu.add(i),Zy(t))}function Zy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(Ke.fromString(e)),i=t.fu.next();t.Au.set(i,new i3(n)),t.du=t.du.insert(n,i),GI(t.remoteStore,new zr(Ti(Ry(n.path)),i,"TargetPurposeLimboResolution",bf.ce))}}async function uc(t,e,n){const i=Te(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,c)=>{a.push(i.pu(c,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){r.push(f);const g=jy.As(c.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(c,f){const m=Te(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,y=>K.forEach(y.Es,T=>m.persistence.referenceDelegate.addReference(g,y.targetId,T)).next(()=>K.forEach(y.ds,T=>m.persistence.referenceDelegate.removeReference(g,y.targetId,T)))))}catch(g){if(!rl(g))throw g;re(Fy,"Failed to update sequence numbers: "+g)}for(const g of f){const y=g.targetId;if(!g.fromCache){const T=m.Ms.get(y),b=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(y,k)}}}(i.localStore,o))}async function m3(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){re(Gy,"User change. New user:",e.toKey());const i=await HI(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(c=>{c.reject(new ue(Y.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await uc(n,i.Ls)}}function g3(t,e){const n=Te(t),i=n.Au.get(e);if(i&&i.hu)return Le().add(i.key);{let r=Le();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function oC(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h3.bind(null,e),e.Pu.H_=X5.bind(null,e.eventManager),e.Pu.yu=J5.bind(null,e.eventManager),e}function _3(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f3.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return y5(this.persistence,new m5,e.initialUser,this.serializer)}Cu(e){return new UI(Vy.mi,this.serializer)}Du(e){return new S5}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class y3 extends Bd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Be(this.persistence.referenceDelegate instanceof jd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new e5(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new UI(i=>jd.mi(i,n),this.serializer)}}class qg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>XT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=m3.bind(null,this.syncEngine),await G5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K5}()}createDatastore(e){const n=Ff(e.databaseInfo.databaseId),i=function(o){return new b5(o)}(e.databaseInfo);return function(o,a,u,c){return new M5(o,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new D5(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>XT(this.syncEngine,n,0),function(){return qT.v()?new qT:new I5}())}createSyncEngine(e,n){return function(r,o,a,u,c,f,m){const g=new r3(r,o,a,u,c,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Te(r);re(ho,"RemoteStore shutting down."),o.Ea.add(5),await lc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}qg.provider={build:()=>new qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="FirestoreClient";class w3{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ut.UNAUTHENTICATED,this.clientId=Py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{re(ps,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(re(ps,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=$y(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function sm(t,e){t.asyncQueue.verifyOperationInProgress(),re(ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await HI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function e1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await T3(t);re(ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>ZT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>ZT(e.remoteStore,r)),t._onlineComponents=e}async function T3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(ps,"Using user provided OfflineComponentProvider");try{await sm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;qa("Error using user provided cache. Falling back to memory cache: "+n),await sm(t,new Bd)}}else re(ps,"Using default OfflineComponentProvider"),await sm(t,new y3(void 0));return t._offlineComponents}async function aC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(ps,"Using user provided OnlineComponentProvider"),await e1(t,t._uninitializedComponentsProvider._online)):(re(ps,"Using default OnlineComponentProvider"),await e1(t,new qg))),t._onlineComponents}function x3(t){return aC(t).then(e=>e.syncEngine)}async function t1(t){const e=await aC(t),n=e.eventManager;return n.onListen=s3.bind(null,e.syncEngine),n.onUnlisten=l3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u3.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="firestore.googleapis.com",i1=!0;class r1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uC,this.ssl=i1}else this.host=e.host,this.ssl=e.ssl??i1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<X4)throw new ue(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lC(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new SV;switch(i.type){case"firstParty":return new kV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=n1.get(n);i&&(re("ComponentProvider","Removing Datastore"),n1.delete(n),i.terminate())}(this),Promise.resolve()}}function E3(t,e,n,i={}){var f;t=ka(t,Uf);const r=wo(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(yy(`https://${u}`),vy("Firestore",!0)),o.host!==uC&&o.host!==u&&qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:u,ssl:r,emulatorOptions:i};if(!lo(c,a)&&(t._setSettings(c),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Ut.MOCK_USER;else{m=BS(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ue(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ut(y)}t._authCredentials=new IV(new JS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hf(this.firestore,e,this._query)}}class xt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(sc(n,xt._jsonSchema))return new xt(e,i||null,new he(Ke.fromString(n.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:yt("string",xt._jsonSchemaVersion),referencePath:yt("string")};class ts extends Hf{constructor(e,n,i){super(e,n,Ry(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new he(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function s1(t,e,...n){if(t=pn(t),eI("collection","path",e),t instanceof Uf){const i=Ke.fromString(e,...n);return _T(i),new ts(t,null,i)}{if(!(t instanceof xt||t instanceof ts))throw new ue(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ke.fromString(e,...n));return _T(i),new ts(t.firestore,null,i)}}function o1(t,e,...n){if(t=pn(t),arguments.length===1&&(e=Py.newId()),eI("doc","path",e),t instanceof Uf){const i=Ke.fromString(e,...n);return gT(i),new xt(t,null,new he(i))}{if(!(t instanceof xt||t instanceof ts))throw new ue(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ke.fromString(e,...n));return gT(i),new xt(t.firestore,t instanceof ts?t.converter:null,new he(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="AsyncQueue";class l1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $I(this,"async_queue_retry"),this._c=()=>{const i=rm();i&&re(a1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=rm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new eo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rl(e))throw e;re(a1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,ur("INTERNAL UNHANDLED ERROR: ",u1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Wy.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&ge(47125,{Pc:u1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function u1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class zd extends Uf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new l1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l1(e),this._firestoreClient=void 0,await e}}}function P3(t,e){const n=typeof t=="object"?t:xy(),i=typeof t=="string"?t:Rd,r=kf(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=VS("firestore");o&&E3(r,...o)}return r}function cC(t){if(t._terminated)throw new ue(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||S3(t),t._firestoreClient}function S3(t){var i,r,o;const e=t._freezeSettings(),n=function(u,c,f,m){return new qV(u,c,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,lC(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new w3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Dt.fromBase64String(e))}catch(n){throw new ue(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sc(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:yt("string",jn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ei._jsonSchemaVersion}}static fromJSON(e){if(sc(e,Ei._jsonSchema))return new Ei(e.latitude,e.longitude)}}Ei._jsonSchemaVersion="firestore/geoPoint/1.0",Ei._jsonSchema={type:yt("string",Ei._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sc(e,Pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pi(e.vectorValues);throw new ue(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:yt("string",Pi._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=/^__.*__$/;class C3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Po(e,this.data,this.fieldMask,n,this.fieldTransforms):new oc(e,this.data,n,this.fieldTransforms)}}function dC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class Qy{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ud(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dC(this.Ac)&&I3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class A3{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ff(e)}Cc(e,n,i,r=!1){return new Qy({Ac:e,methodName:n,Dc:i,path:Nt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function k3(t){const e=t._freezeSettings(),n=Ff(t._databaseId);return new A3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function b3(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);gC("Data must be an object, but it was:",a,i);const u=pC(i,a);let c,f;if(o.merge)c=new Xn(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const y=R3(e,g,n);if(!a.contains(y))throw new ue(Y.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);N3(m,y)||m.push(y)}c=new Xn(m),f=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,f=a.fieldTransforms;return new C3(new Vn(u),c,f)}function fC(t,e){if(mC(t=pn(t)))return gC("Unsupported field value:",e,t),pC(t,e);if(t instanceof hC)return function(i,r){if(!dC(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let c=fC(u,r.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=pn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return g4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Qe.fromDate(i);return{timestampValue:Vd(r.serializer,o)}}if(i instanceof Qe){const o=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vd(r.serializer,o)}}if(i instanceof Ei)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jn)return{bytesValue:MI(r.serializer,i._byteString)};if(i instanceof xt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Oy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Pi)return function(a,u){return{mapValue:{fields:{[uI]:{stringValue:cI},[Ld]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Ly(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Sy(i)}`)}(t,e)}function pC(t,e){const n={};return iI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(t,(i,r)=>{const o=fC(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function mC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Ei||t instanceof jn||t instanceof xt||t instanceof hC||t instanceof Pi)}function gC(t,e,n){if(!mC(n)||!tI(n)){const i=Sy(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function R3(t,e,n){if((e=pn(e))instanceof Ky)return e._internalPath;if(typeof e=="string")return _C(t,e);throw Ud("Field path arguments must be of type string or ",t,!1,void 0,n)}const L3=new RegExp("[~\\*/\\[\\]]");function _C(t,e,n){if(e.search(L3)>=0)throw Ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ky(...e.split("."))._internalPath}catch{throw Ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ud(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new ue(Y.INVALID_ARGUMENT,u+t+c)}function N3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class M3 extends yC{data(){return super.data()}}function vC(t,e){return typeof e=="string"?_C(t,e):e instanceof Ky?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D3{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return xo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Ld].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>ct(a.doubleValue));return new Pi(n)}convertGeoPoint(e){return new Ei(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Lf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){const n=cs(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ke.fromString(e);Be(BI(i),9688,{name:e});const r=new Hu(i.get(1),i.get(3)),o=new he(i.popFirst(5));return r.isEqual(n)||ur(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class to extends yC{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(vC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=to._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:yt("string",to._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Uh extends to{data(e={}){return super.data(e)}}class Ra{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Xl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Uh(this._firestore,this._userDataWriter,i.key,i,new Xl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new Uh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Xl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Uh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Xl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:j3(u.type),doc:c,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Py.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}Ra._jsonSchemaVersion="firestore/querySnapshot/1.0",Ra._jsonSchema={type:yt("string",Ra._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class wC extends D3{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function h1(t,e,n){t=ka(t,xt);const i=ka(t.firestore,zd),r=V3(t.converter,e,n);return F3(i,[b3(k3(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,nr.none())])}function d1(t,...e){var c,f,m;t=pn(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||c1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(c1(e[i])){const g=e[i];e[i]=(c=g.next)==null?void 0:c.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof xt)a=ka(t.firestore,zd),u=Ry(t._key.path),o={next:g=>{e[i]&&e[i](B3(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=ka(t,Hf);a=ka(g.firestore,zd),u=g._query;const y=new wC(a);o={next:T=>{e[i]&&e[i](new Ra(a,y,g,T))},error:e[i+1],complete:e[i+2]},O3(t._query)}return function(y,T,b,k){const D=new v3(k),C=new e3(T,D,b);return y.asyncQueue.enqueueAndForget(async()=>Q5(await t1(y),C)),()=>{D.Nu(),y.asyncQueue.enqueueAndForget(async()=>Y5(await t1(y),C))}}(cC(a),u,r,o)}function F3(t,e){return function(i,r){const o=new eo;return i.asyncQueue.enqueueAndForget(async()=>c3(await x3(i),r,o)),o.promise}(cC(t),e)}function B3(t,e,n){const i=n.docs.get(e._key),r=new wC(t);return new to(t,r,e._key,i,new Xl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){nl=r})(To),uo(new ls("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new zd(new CV(i.getProvider("auth-internal")),new bV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ue(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),wi(dT,fT,e),wi(dT,fT,"esm2020")})();function TC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z3=TC,xC=new ic("auth","Firebase",TC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new wy("@firebase/auth");function U3(t,...e){Hd.logLevel<=be.WARN&&Hd.warn(`Auth (${To}): ${t}`,...e)}function Hh(t,...e){Hd.logLevel<=be.ERROR&&Hd.error(`Auth (${To}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,...e){throw Yy(t,...e)}function Si(t,...e){return Yy(t,...e)}function EC(t,e,n){const i={...z3(),[e]:n};return new ic("auth","Firebase",i).create(e,{appName:t.name})}function ns(t){return EC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return xC.create(t,...e)}function _e(t,e,...n){if(!t)throw Yy(e,...n)}function Yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hh(e),new Error(e)}function dr(t,e){t||Yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function H3(){return f1()==="http:"||f1()==="https:"}function f1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H3()||rD()||"connection"in navigator)?navigator.onLine:!0}function $3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=tD()||sD()}get(){return W3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t,e){dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z3=new cc(3e4,6e4);function Wf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ol(t,e,n,i,r={}){return SC(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=rc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...o};return iD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&wo(t.emulatorConfig.host)&&(f.credentials="include"),PC.fetch()(await CC(t,t.config.apiHost,n,u),f)})}async function SC(t,e,n){t._canInitEmulator=!1;const i={...q3,...e};try{const r=new K3(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw vh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw vh(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw vh(t,"user-disabled",a);const m=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw EC(t,m,f);hr(t,m)}}catch(r){if(r instanceof bi)throw r;hr(t,"network-request-failed",{message:String(r)})}}async function IC(t,e,n,i,r={}){const o=await ol(t,e,n,i,r);return"mfaPendingCredential"in o&&hr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function CC(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?Xy(t.config,r):`${t.config.apiScheme}://${r}`;return G3.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class K3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Si(this.auth,"network-request-failed")),Z3.get())})}}function vh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Si(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(t,e){return ol(t,"POST","/v1/accounts:delete",e)}async function Wd(t,e){return ol(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y3(t,e=!1){const n=pn(t),i=await n.getIdToken(e),r=Jy(i);_e(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:_u(om(r.auth_time)),issuedAtTime:_u(om(r.iat)),expirationTime:_u(om(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function om(t){return Number(t)*1e3}function Jy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const r=OS(n);return r?JSON.parse(r):(Hh("Failed to decode base64 JWT payload"),null)}catch(r){return Hh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function p1(t){const e=Jy(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof bi&&X3(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function X3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_u(this.lastLoginAt),this.creationTime=_u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Gu(t,Wd(e,{idToken:n}));_e(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?AC(r.providerUserInfo):[],a=tj(t.providerData,o),u=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?c:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Zg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function ej(t){const e=pn(t);await $d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tj(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function AC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nj(t,e){const n=await SC(t,{},async()=>{const i=rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await CC(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:i};return t.emulatorConfig&&wo(t.emulatorConfig.host)&&(c.credentials="include"),PC.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ij(t,e){return ol(t,"POST","/v2/accounts:revokeToken",Wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=p1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await nj(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new La;return i&&(_e(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(_e(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(_e(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new La,this.toJSON())}_performRefresh(){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new J3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Zg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Gu(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Y3(this,e)}reload(){return ej(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await $d(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await Gu(this,Q3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,c=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:y,isAnonymous:T,providerData:b,stsTokenManager:k}=n;_e(g&&k,e,"internal-error");const D=La.fromJSON(this.name,k);_e(typeof g=="string",e,"internal-error"),Ir(i,e.name),Ir(r,e.name),_e(typeof y=="boolean",e,"internal-error"),_e(typeof T=="boolean",e,"internal-error"),Ir(o,e.name),Ir(a,e.name),Ir(u,e.name),Ir(c,e.name),Ir(f,e.name),Ir(m,e.name);const C=new Jn({uid:g,auth:e,email:r,emailVerified:y,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:D,createdAt:f,lastLoginAt:m});return b&&Array.isArray(b)&&(C.providerData=b.map(P=>({...P}))),c&&(C._redirectEventId=c),C}static async _fromIdTokenResponse(e,n,i=!1){const r=new La;r.updateFromServerResponse(n);const o=new Jn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await $d(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];_e(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?AC(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new La;u.updateFromIdToken(i);const c=new Jn({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Zg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=new Map;function Xi(t){dr(t instanceof Function,"Expected a class definition");let e=m1.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,m1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kC.type="NONE";const g1=kC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e,n){return`firebase:${t}:${e}:${n}`}class Na{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Wh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Wh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wd(this.auth,{idToken:e}).catch(()=>{});return n?Jn._fromGetAccountInfoResponse(this.auth,n,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Na(Xi(g1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Xi(g1);const a=Wh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const y=await Wd(e,{idToken:m}).catch(()=>{});if(!y)break;g=await Jn._fromGetAccountInfoResponse(e,y,m)}else g=Jn._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Na(o,e,i):(o=c[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Na(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OC(e))return"Blackberry";if(DC(e))return"Webos";if(RC(e))return"Safari";if((e.includes("chrome/")||LC(e))&&!e.includes("edge/"))return"Chrome";if(MC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function bC(t=qt()){return/firefox\//i.test(t)}function RC(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LC(t=qt()){return/crios\//i.test(t)}function NC(t=qt()){return/iemobile/i.test(t)}function MC(t=qt()){return/android/i.test(t)}function OC(t=qt()){return/blackberry/i.test(t)}function DC(t=qt()){return/webos/i.test(t)}function ev(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rj(t=qt()){var e;return ev(t)&&!!((e=window.navigator)!=null&&e.standalone)}function sj(){return oD()&&document.documentMode===10}function VC(t=qt()){return ev(t)||MC(t)||DC(t)||OC(t)||/windows phone/i.test(t)||NC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t,e=[]){let n;switch(t){case"Browser":n=_1(qt());break;case"Worker":n=`${_1(qt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${To}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const c=e(o);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(t,e={}){return ol(t,"GET","/v2/passwordPolicy",Wf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=6;class uj{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y1(this),this.idTokenSubscription=new y1(this),this.beforeStateQueue=new oj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xi(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Na.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wd(this,{idToken:e}),i=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Dn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $d(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(ns(this));const n=e?pn(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aj(this),n=new uj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ic("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ij(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xi(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await Na.create(this,[Xi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&U3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $f(t){return pn(t)}class y1{constructor(e){this.auth=e,this.observer=null,this.addObserver=pD(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hj(t){tv=t}function dj(t){return tv.loadJS(t)}function fj(){return tv.gapiScript}function pj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t,e){const n=kf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(lo(o,e??{}))return r;hr(r,"already-initialized")}return n.initialize({options:e})}function gj(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Xi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function _j(t,e,n){const i=$f(t);_e(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=FC(e),{host:a,port:u}=yj(e),c=u===null?"":`:${u}`,f={url:`${o}//${a}${c}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){_e(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),_e(lo(f,i.config.emulator)&&lo(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,wo(a)?(yy(`${o}//${a}${c}`),vy("Auth",!0)):vj()}function FC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yj(t){const e=FC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:v1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:v1(a)}}}function v1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yi("not implemented")}_getIdTokenResponse(e){return Yi("not implemented")}_linkToIdToken(e,n){return Yi("not implemented")}_getReauthenticationResolver(e){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t,e){return IC(t,"POST","/v1/accounts:signInWithIdp",Wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="http://localhost";class fo extends BC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new fo(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ma(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ma(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ma(e,n)}buildRequest(){const e={requestUri:wj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends zC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends hc{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fo._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Or.credential(n,i)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends hc{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends hc{constructor(){super("twitter.com")}static credential(e,n){return fo._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Vr.credential(n,i)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t,e){return IC(t,"POST","/v1/accounts:signUp",Wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Jn._fromIdTokenResponse(e,i,r),a=w1(i);return new ms({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=w1(i);return new ms({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function w1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t){var r;if(Dn(t.app))return Promise.reject(ns(t));const e=$f(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new ms({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await Tj(e,{returnSecureToken:!0}),i=await ms._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends bi{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,qd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new qd(e,n,i,r)}}function UC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qd._fromErrorAndOperation(t,o,e,i):o})}async function Ej(t,e,n=!1){const i=await Gu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ms._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(t,e,n=!1){const{auth:i}=t;if(Dn(i.app))return Promise.reject(ns(i));const r="reauthenticate";try{const o=await Gu(t,UC(i,r,e,t),n);_e(o.idToken,i,"internal-error");const a=Jy(o.idToken);_e(a,i,"internal-error");const{sub:u}=a;return _e(t.uid===u,i,"user-mismatch"),ms._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&hr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e,n=!1){if(Dn(t.app))return Promise.reject(ns(t));const i="signIn",r=await UC(t,i,e),o=await ms._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function Ij(t,e,n,i){return pn(t).onIdTokenChanged(e,n,i)}function Cj(t,e,n){return pn(t).beforeAuthStateChanged(e,n)}function Aj(t,e,n,i){return pn(t).onAuthStateChanged(e,n,i)}const Gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=1e3,bj=10;class WC extends HC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);sj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,bj):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},kj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WC.type="LOCAL";const Rj=WC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C extends HC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$C.type="SESSION";const qC=$C;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new qf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),c=await Lj(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const f=nv("",20);r.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const y=g;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(y.data.response);break;default:clearTimeout(m),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function Mj(t){Ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function Oj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Vj(){return GC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebaseLocalStorageDb",jj=1,Zd="firebaseLocalStorage",KC="fbase_key";class dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gf(t,e){return t.transaction([Zd],e?"readwrite":"readonly").objectStore(Zd)}function Fj(){const t=indexedDB.deleteDatabase(ZC);return new dc(t).toPromise()}function Kg(){const t=indexedDB.open(ZC,jj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Zd,{keyPath:KC})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Zd)?e(i):(i.close(),await Fj(),e(await Kg()))})})}async function T1(t,e,n){const i=Gf(t,!0).put({[KC]:e,value:n});return new dc(i).toPromise()}async function Bj(t,e){const n=Gf(t,!1).get(e),i=await new dc(n).toPromise();return i===void 0?null:i.value}function x1(t,e){const n=Gf(t,!0).delete(e);return new dc(n).toPromise()}const zj=800,Uj=3;class QC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Uj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(Vj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Oj(),!this.activeServiceWorker)return;this.sender=new Nj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kg();return await T1(e,Gd,"1"),await x1(e,Gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>T1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Bj(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>x1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Gf(r,!1).getAll();return new dc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QC.type="LOCAL";const Hj=QC;new cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t,e){return e?Xi(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv extends BC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $j(t){return Sj(t.auth,new iv(t),t.bypassAuthState)}function qj(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),Pj(n,new iv(t),t.bypassAuthState)}async function Gj(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),Ej(n,new iv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $j;case"linkViaPopup":case"linkViaRedirect":return Gj;case"reauthViaPopup":case"reauthViaRedirect":return qj;default:hr(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=new cc(2e3,1e4);class xa extends YC{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,xa.currentPopupAction&&xa.currentPopupAction.cancel(),xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=nv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zj.get())};e()}}xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="pendingRedirect",$h=new Map;class Qj extends YC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$h.get(this.auth._key());if(!e){try{const i=await Yj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$h.set(this.auth._key(),e)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yj(t,e){const n=eF(e),i=Jj(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Xj(t,e){$h.set(t._key(),e)}function Jj(t){return Xi(t._redirectPersistence)}function eF(t){return Wh(Kj,t.config.apiKey,t.name)}async function tF(t,e,n=!1){if(Dn(t.app))return Promise.reject(ns(t));const i=$f(t),r=Wj(i,e),a=await new Qj(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=10*60*1e3;class iF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!XC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nF&&this.cachedEventUids.clear(),this.cachedEventUids.has(E1(e))}saveEventToCache(e){this.cachedEventUids.add(E1(e)),this.lastProcessedEventTime=Date.now()}}function E1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sF(t,e={}){return ol(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aF=/^https?/;async function lF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sF(t);for(const n of e)try{if(uF(n))return}catch{}hr(t,"unauthorized-domain")}function uF(t){const e=Gg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!aF.test(n))return!1;if(oF.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=new cc(3e4,6e4);function P1(){const t=Ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hF(t){return new Promise((e,n)=>{var r,o,a;function i(){P1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{P1(),n(Si(t,"network-request-failed"))},timeout:cF.get()})}if((o=(r=Ii().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Ii().gapi)!=null&&a.load)i();else{const u=pj("iframefcb");return Ii()[u]=()=>{gapi.load?i():n(Si(t,"network-request-failed"))},dj(`${fj()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw qh=null,e})}let qh=null;function dF(t){return qh=qh||hF(t),qh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=new cc(5e3,15e3),pF="__/auth/iframe",mF="emulator/auth/iframe",gF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_F=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yF(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xy(e,mF):`https://${t.config.authDomain}/${pF}`,i={apiKey:e.apiKey,appName:t.name,v:To},r=_F.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${rc(i).slice(1)}`}async function vF(t){const e=await dF(t),n=Ii().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:yF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gF,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Si(t,"network-request-failed"),u=Ii().setTimeout(()=>{o(a)},fF.get());function c(){Ii().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TF=500,xF=600,EF="_blank",PF="http://localhost";class S1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SF(t,e,n,i=TF,r=xF){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c={...wF,width:i.toString(),height:r.toString(),top:o,left:a},f=qt().toLowerCase();n&&(u=LC(f)?EF:n),bC(f)&&(e=e||PF,c.scrollbars="yes");const m=Object.entries(c).reduce((y,[T,b])=>`${y}${T}=${b},`,"");if(rj(f)&&u!=="_self")return IF(e||"",u),new S1(null);const g=window.open(e||"",u,m);_e(g,t,"popup-blocked");try{g.focus()}catch{}return new S1(g)}function IF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="__/auth/handler",AF="emulator/auth/handler",kF=encodeURIComponent("fac");async function I1(t,e,n,i,r,o){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:To,eventId:r};if(e instanceof zC){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",fD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof hc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await t._getAppCheckToken(),f=c?`#${kF}=${encodeURIComponent(c)}`:"";return`${bF(t)}?${rc(u).slice(1)}${f}`}function bF({config:t}){return t.emulator?Xy(t,AF):`https://${t.authDomain}/${CF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="webStorageSupport";class RF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qC,this._completeRedirectFn=tF,this._overrideRedirectResult=Xj}async _openPopup(e,n,i,r){var a;dr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await I1(e,n,i,Gg(),r);return SF(e,o,nv())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await I1(e,n,i,Gg(),r);return Mj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(dr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await vF(e),i=new iF(e);return n.register("authEvent",r=>(_e(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(am,{type:am},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[am];o!==void 0&&n(!!o),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VC()||RC()||ev()}}const LF=RF;var C1="@firebase/auth",A1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OF(t){uo(new ls("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;_e(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jC(t)},f=new cj(i,r,o,c);return gj(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),uo(new ls("auth-internal",e=>{const n=$f(e.getProvider("auth").getImmediate());return(i=>new NF(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wi(C1,A1,MF(t)),wi(C1,A1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=5*60,VF=FS("authIdTokenMaxAge")||DF;let k1=null;const jF=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>VF)return;const r=n==null?void 0:n.token;k1!==r&&(k1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function FF(t=xy()){const e=kf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mj(t,{popupRedirectResolver:LF,persistence:[Hj,Rj,qC]}),i=FS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=jF(o.toString());Cj(n,a,()=>a(n.currentUser)),Ij(n,u=>a(u))}}const r=DS("auth");return r&&_j(n,`http://${r}`),n}function BF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hj({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Si("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",BF().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OF("Browser");var zF="firebase",UF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi(zF,UF,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="firebasestorage.googleapis.com",HF="storageBucket",WF=2*60*1e3,$F=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends bi{constructor(e,n,i=0){super(lm(e),`Firebase Storage: ${n} (${lm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ri.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ki;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ki||(ki={}));function lm(t){return"storage/"+t}function qF(){const t="An unknown error occurred, please check the error payload for server response.";return new Ri(ki.UNKNOWN,t)}function GF(){return new Ri(ki.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZF(){return new Ri(ki.CANCELED,"User canceled the upload/download.")}function KF(t){return new Ri(ki.INVALID_URL,"Invalid URL '"+t+"'.")}function QF(t){return new Ri(ki.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function b1(t){return new Ri(ki.INVALID_ARGUMENT,t)}function eA(){return new Ri(ki.APP_DELETED,"The Firebase app was deleted.")}function YF(t){return new Ri(ki.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=ei.makeFromUrl(e,n)}catch{return new ei(e,"")}if(i.path==="")return i;throw QF(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),c={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const m="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",T=new RegExp(`^https?://${g}/${m}/b/${r}/o${y}`,"i"),b={bucket:1,path:3},k=n===JC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",C=new RegExp(`^https?://${k}/${r}/${D}`,"i"),S=[{regex:u,indices:c,postModify:o},{regex:T,indices:b,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<S.length;B++){const q=S[B],Z=q.regex.exec(e);if(Z){const R=Z[q.indices.bucket];let I=Z[q.indices.path];I||(I=""),i=new ei(R,I),q.postModify(i);break}}if(i==null)throw KF(e);return i}}class XF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(t,e,n){let i=1,r=null,o=null,a=!1,u=0;function c(){return u===2}let f=!1;function m(...D){f||(f=!0,e.apply(null,D))}function g(D){r=setTimeout(()=>{r=null,t(T,c())},D)}function y(){o&&clearTimeout(o)}function T(D,...C){if(f){y();return}if(D){y(),m.call(null,D,...C);return}if(c()||a){y(),m.call(null,D,...C);return}i<64&&(i*=2);let S;u===1?(u=2,S=0):S=(i+Math.random())*1e3,g(S)}let b=!1;function k(D){b||(b=!0,y(),!f&&(r!==null?(D||(u=2),clearTimeout(r),g(0)):D||(u=1)))}return g(0),o=setTimeout(()=>{a=!0,k(!0)},n),k}function eB(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(t){return t!==void 0}function R1(t,e,n,i){if(i<e)throw b1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw b1(`Invalid value for '${t}'. Expected ${n} or less.`)}function nB(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Kd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Kd||(Kd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n,i,r,o,a,u,c,f,m,g,y=!0,T=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=g,this.retry=y,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,k)=>{this.resolve_=b,this.reject_=k,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new wh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===Kd.NO_ERROR,c=o.getStatus();if(!u||iB(c,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Kd.ABORT;i(!1,new wh(!1,null,m));return}const f=this.successCodes_.indexOf(c)!==-1;i(!0,new wh(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());tB(c)?o(c):o()}catch(c){a(c)}else if(u!==null){const c=qF();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(r.canceled){const c=this.appDelete_?eA():ZF();a(c)}else{const c=GF();a(c)}};this.canceled_?n(!1,new wh(!1,null,!0)):this.backoffId_=JF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function sB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aB(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lB(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uB(t,e,n,i,r,o,a=!0,u=!1){const c=nB(t.urlParams),f=t.url+c,m=Object.assign({},t.headers);return aB(m,e),sB(m,n),oB(m,o),lB(m,i),new rB(f,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function hB(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this._service=e,n instanceof ei?this._location=n:this._location=ei.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qd(e,n)}get root(){const e=new ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hB(this._location.path)}get storage(){return this._service}get parent(){const e=cB(this._location.path);if(e===null)return null;const n=new ei(this._location.bucket,e);return new Qd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw YF(e)}}function L1(t,e){const n=e==null?void 0:e[HF];return n==null?null:ei.makeFromBucketSpec(n,t)}function dB(t,e,n,i={}){t.host=`${e}:${n}`;const r=wo(e);r&&(yy(`https://${t.host}/b`),vy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:BS(o,t.app.options.projectId))}class fB{constructor(e,n,i,r,o,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=JC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WF,this._maxUploadRetryTime=$F,this._requests=new Set,r!=null?this._bucket=ei.makeFromBucketSpec(r,this._host):this._bucket=L1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ei.makeFromBucketSpec(this._url,e):this._bucket=L1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){R1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){R1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qd(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new XF(eA());{const a=uB(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const N1="@firebase/storage",M1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="storage";function pB(t=xy(),e){t=pn(t);const i=kf(t,tA).getImmediate({identifier:e}),r=VS("storage");return r&&mB(i,...r),i}function mB(t,e,n,i={}){dB(t,e,n,i)}function gB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new fB(n,i,r,e,To)}function _B(){uo(new ls(tA,gB,"PUBLIC").setMultipleInstances(!0)),wi(N1,M1,""),wi(N1,M1,"esm2020")}_B();const yB={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},rv=HS(yB),Th=P3(rv),O1=FF(rv);pB(rv);const Qg={vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},vB="vysocany",nA=Qg[vB].center,iA=15,wB=13,TB=18,D1={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},is=["red","blue"],xB={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},V1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],um=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function sv(t){var e;return((e=xB[t.size])==null?void 0:e.points)||100}function EB(t,e,n=.001,i=16){const r=[];for(let o=0;o<i;o++){const a=o/i*2*Math.PI;r.push([t+n*Math.cos(a),e+n*1.6*Math.sin(a)])}return r}function PB(t){if(t.length<3)return t;let e=0;for(let o=1;o<t.length;o++)(t[o][0]<t[e][0]||t[o][0]===t[e][0]&&t[o][1]<t[e][1])&&(e=o);[t[0],t[e]]=[t[e],t[0]];const n=t[0],i=t.slice(1).sort((o,a)=>{const u=Math.atan2(o[1]-n[1],o[0]-n[0]),c=Math.atan2(a[1]-n[1],a[0]-n[0]);return u-c}),r=[n];for(const o of i){for(;r.length>1;){const a=r[r.length-2],u=r[r.length-1];if((u[0]-a[0])*(o[1]-a[1])-(u[1]-a[1])*(o[0]-a[0])<=0)r.pop();else break}r.push(o)}return r}function SB(t,e){if(t.length<3)return t;const n=t.reduce((r,o)=>r+o[0],0)/t.length,i=t.reduce((r,o)=>r+o[1],0)/t.length;return t.map(r=>{const o=r[0]-n,a=r[1]-i,u=Math.sqrt(o*o+a*a);if(u===0)return r;const c=(u+e)/u;return[n+o*c,i+a*c]})}function IB(t){const e={};is.forEach(i=>e[i]=[]);const n={};return is.forEach(i=>n[i]=[]),t.forEach(i=>{i.capturedBy&&n[i.capturedBy]&&n[i.capturedBy].push(i)}),is.forEach(i=>{const r=n[i];if(r.length!==0)if(r.length===1){const o=r[0];e[i].push({polygon:EB(o.location[0],o.location[1],.0015,12),points:r})}else{const o=r.map(c=>c.location),a=PB([...o]),u=SB(a,.001);e[i].push({polygon:u,points:r})}}),e}function sa(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function rA(t){const e={};return is.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=sv(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const sA=F.createContext(null),Cr={player:"streetart-ctf-player",captures:"streetart-ctf-captures"},cm="streetart-captures",CB="streetart-teams",Xe={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function hm(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function dm(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function AB({children:t}){const[e,n]=F.useState(null),[i,r]=F.useState(!0),[o,a]=F.useState(()=>hm(Cr.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]})),[u,c]=F.useState(()=>{const M=hm(Cr.captures,{});return um.map(ne=>({...ne,capturedBy:M[ne.id]||null}))}),[f,m]=F.useState(null),[g,y]=F.useState(!1),[T,b]=F.useState(null);F.useEffect(()=>{const M=Aj(O1,ne=>{ne?(n(ne),a(Ce=>({...Ce,id:ne.uid}))):xj(O1).catch(Ce=>{console.warn("Firebase auth failed, using offline mode:",Ce),r(!1)})});return()=>M()},[]),F.useEffect(()=>{if(!e)return;const M=s1(Th,cm),ne=d1(M,Ce=>{const ce={};Ce.forEach(Ae=>{const G=Ae.data();G.capturedBy&&(ce[Ae.id]=G.capturedBy)}),c(um.map(Ae=>({...Ae,capturedBy:ce[Ae.id]||null}))),dm(Cr.captures,ce),r(!0),console.log(" Firebase: Synced",Object.keys(ce).length,"captures")},Ce=>{console.warn("Firestore sync error:",Ce),r(!1)});return()=>ne()},[e]);const[k,D]=F.useState({red:0,blue:0});F.useEffect(()=>{const M=s1(Th,CB),ne=d1(M,Ce=>{const ce={red:0,blue:0};Ce.forEach(Ae=>{const G=Ae.data();(Ae.id==="red"||Ae.id==="blue")&&(ce[Ae.id]=G.score||0)}),D(ce),console.log(" Team scores:",ce)});return()=>ne()},[]),F.useEffect(()=>{dm(Cr.player,o)},[o]);const C=F.useCallback(async M=>{if(!(!e||!i))try{await h1(o1(Th,cm,"global"),M,{merge:!0})}catch(ne){console.warn("Failed to sync to Firebase:",ne)}},[e,i]),P=rA(u),S={red:Math.max(k.red,P.red),blue:Math.max(k.blue,P.blue)},B=F.useCallback(M=>{is.includes(M)&&a(ne=>({...ne,team:M}))},[]),q=F.useCallback(M=>{a(ne=>({...ne,name:M}))},[]),Z=F.useCallback((M,ne,Ce=50)=>{let ce=null,Ae=1/0;return u.forEach(G=>{const ae=(G.location[0]-M)*111e3,J=(G.location[1]-ne)*111e3*Math.cos(M*Math.PI/180),te=Math.sqrt(ae*ae+J*J);te<Ae&&te<=Ce&&(Ae=te,ce={...G,distance:Math.round(te)})}),ce},[u]),R=F.useCallback(M=>{if(!o.team)return{success:!1,message:"Join a team first!"};const ne=u.find(G=>G.id===M);if(!ne)return{success:!1,message:"Art not found"};if(ne.capturedBy===o.team)return{success:!1,message:"Already yours!"};if(ne.status==="ghost")return{success:!1,message:"This art no longer exists"};const Ce=sv(ne),ce=ne.capturedBy;c(G=>G.map(ae=>ae.id===M?{...ae,capturedBy:o.team}:ae)),a(G=>({...G,score:G.score+Ce,capturedArt:[...G.capturedArt.filter(ae=>ae!==M),M]})),C({[M]:o.team});const Ae=hm(Cr.captures,{});return dm(Cr.captures,{...Ae,[M]:o.team}),{success:!0,art:ne,points:Ce,previousTeam:ce,message:ce?`Stolen from ${ce}!`:"Captured!"}},[o.team,u,C]),I=F.useCallback(async(M,ne)=>{y(!0);const Ce=Z(ne.lat,ne.lng,100);if(!Ce){y(!1),m({success:!1,message:"No street art nearby. Get closer!"});return}b({art:Ce,photo:M,location:ne}),y(!1)},[Z]),N=F.useCallback(()=>{if(!T)return;const M=R(T.art.id);m(M),b(null)},[T,R]),O=F.useCallback(()=>{b(null),m(null)},[]),V=F.useCallback(async()=>{if(localStorage.removeItem(Cr.player),localStorage.removeItem(Cr.captures),e&&i)try{await h1(o1(Th,cm,"global"),{})}catch(M){console.warn("Failed to reset Firebase:",M)}a({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),c(um.map(M=>({...M,capturedBy:null}))),m(null),b(null)},[e,i]),z={player:o,artPoints:u,teamScores:S,globalTeamScores:k,scanResult:f,isScanning:g,pendingCapture:T,isOnline:i,teams:is,joinTeam:B,setPlayerName:q,captureArt:R,startCapture:I,confirmCapture:N,cancelCapture:O,findNearestArt:Z,setScanResult:m,resetAll:V,TEAM_COLORS:Xe};return x.jsx(sA.Provider,{value:z,children:t})}function Ts(){const t=F.useContext(sA);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),He=(t,e)=>{const n=F.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:c,...f},m)=>F.createElement("svg",{ref:m,...kB,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${bB(t)}`,u].join(" "),...f},[...e.map(([g,y])=>F.createElement(g,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=He("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=He("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=He("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=He("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=He("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=He("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=He("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=He("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=He("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=He("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=He("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=He("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=He("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=He("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=He("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=He("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=He("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=He("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=He("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=He("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=He("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=He("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=He("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=He("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=He("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=He("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=He("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),j1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],F1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function GB(){const t=j1[Math.floor(Math.random()*j1.length)],e=F1[Math.floor(Math.random()*F1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function ZB(){const t=yf(),{player:e,joinTeam:n,setPlayerName:i}=Ts(),[r,o]=F.useState(0),[a,u]=F.useState(e.name||""),[c,f]=F.useState(null);F.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]);const m=()=>{u(GB())},g=()=>{if(r===1&&a.trim()&&i(a.trim()),r===2&&c&&n(c),r===3){t("/map");return}o(r+1)},y=()=>r===1?a.trim().length>=2:r===2?c!==null:!0;return x.jsxs("div",{className:"h-screen bg-gradient-to-b from-[#0a0a0f] via-[#12121a] to-[#0a0a0f] flex flex-col overflow-hidden",children:[x.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:[0,1,2,3].map(T=>x.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${T===r?"bg-white w-6":T<r?"bg-white/60":"bg-white/20"}`},T))}),x.jsxs(Cd,{mode:"wait",children:[r===0&&x.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx(fe.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mb-8 shadow-2xl shadow-purple-500/30",children:x.jsx(av,{size:48,className:"text-white"})}),x.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Street Art CTF"}),x.jsx("p",{className:"text-white/60 text-lg mb-2",children:"Capture the Flag"}),x.jsx("p",{className:"text-white/40 max-w-xs mb-8",children:"Scan real street art to capture territory for your team. The city is your battlefield."}),x.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs",children:[x.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-white/5 border border-white/10",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center",children:x.jsx(oA,{size:24,className:"text-blue-400"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium",children:"Scan Art"}),x.jsx("div",{className:"text-sm text-white/50",children:"Find & capture street art"})]})]}),x.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-white/5 border border-white/10",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center",children:x.jsx(ov,{size:24,className:"text-green-400"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium",children:"Control Territory"}),x.jsx("div",{className:"text-sm text-white/50",children:"Expand your team's area"})]})]}),x.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-white/5 border border-white/10",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-yellow-500/20 flex items-center justify-center",children:x.jsx(hA,{size:24,className:"text-yellow-400"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium",children:"Win Together"}),x.jsx("div",{className:"text-sm text-white/50",children:"Lead your team to victory"})]})]})]})]},"intro"),r===1&&x.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx("h1",{className:"text-2xl font-bold mb-2",children:"What's your name?"}),x.jsx("p",{className:"text-white/50 mb-8",children:"This is how others will see you"}),x.jsx("div",{className:"w-full max-w-xs mb-4",children:x.jsx("input",{type:"text",value:a,onChange:T=>u(T.target.value),placeholder:"Enter your name...",maxLength:20,className:"w-full px-4 py-4 rounded-xl bg-white/5 border border-white/10 text-center text-xl font-medium placeholder:text-white/30 focus:outline-none focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20"})}),x.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white/60 hover:bg-white/10 transition-colors",children:[x.jsx(HB,{size:16}),"Generate random name"]})]},"name"),r===2&&x.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Choose your team"}),x.jsx("p",{className:"text-white/50 mb-8",children:"Fight for territory together"}),x.jsxs("div",{className:"flex gap-4 w-full max-w-sm",children:[x.jsxs(fe.button,{whileTap:{scale:.95},onClick:()=>f("red"),className:`flex-1 p-6 rounded-2xl border-2 transition-all ${c==="red"?"bg-red-500/20 border-red-500 shadow-lg shadow-red-500/30":"bg-white/5 border-white/10 hover:border-red-500/50"}`,children:[x.jsx("div",{className:`w-16 h-16 mx-auto rounded-2xl flex items-center justify-center mb-4 ${c==="red"?"bg-red-500":"bg-red-500/30"}`,children:x.jsx("span",{className:"text-3xl",children:""})}),x.jsx("div",{className:"font-bold text-lg mb-1",style:{color:"#ff6b6b"},children:"Red Team"}),x.jsx("div",{className:"text-sm text-white/50",children:"The Flames"})]}),x.jsxs(fe.button,{whileTap:{scale:.95},onClick:()=>f("blue"),className:`flex-1 p-6 rounded-2xl border-2 transition-all ${c==="blue"?"bg-blue-500/20 border-blue-500 shadow-lg shadow-blue-500/30":"bg-white/5 border-white/10 hover:border-blue-500/50"}`,children:[x.jsx("div",{className:`w-16 h-16 mx-auto rounded-2xl flex items-center justify-center mb-4 ${c==="blue"?"bg-blue-500":"bg-blue-500/30"}`,children:x.jsx("span",{className:"text-3xl",children:""})}),x.jsx("div",{className:"font-bold text-lg mb-1",style:{color:"#4dabf7"},children:"Blue Team"}),x.jsx("div",{className:"text-sm text-white/50",children:"The Waves"})]})]})]},"team"),r===3&&x.jsxs(fe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx("div",{className:`w-20 h-20 rounded-2xl flex items-center justify-center mb-6 ${c==="red"?"bg-red-500/20":"bg-blue-500/20"}`,children:x.jsx("span",{className:"text-4xl",children:c==="red"?"":""})}),x.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome, ",a,"!"]}),x.jsxs("p",{className:"text-white/50 mb-8",children:["You're on Team ",x.jsx("span",{style:{color:c==="red"?"#ff6b6b":"#4dabf7"},className:"font-bold",children:c==="red"?"Red":"Blue"})]}),x.jsxs("div",{className:"w-full max-w-xs space-y-4 mb-8",children:[x.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 text-left",children:[x.jsx("div",{className:"font-medium mb-1",children:" How to Play"}),x.jsx("div",{className:"text-sm text-white/50",children:"Find street art around you. Point your camera at it to scan and capture it for your team."})]}),x.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 text-left",children:[x.jsx("div",{className:"font-medium mb-1",children:" Check the Map"}),x.jsx("div",{className:"text-sm text-white/50",children:"See which art is nearby and which territories each team controls."})]}),x.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 text-left",children:[x.jsx("div",{className:"font-medium mb-1",children:" Score Points"}),x.jsx("div",{className:"text-sm text-white/50",children:"Each capture earns points. Big murals = more points. Steal from enemies for bonus!"})]})]})]},"tutorial")]}),x.jsx("div",{className:"p-4 pb-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:x.jsxs(fe.button,{whileTap:{scale:.98},onClick:g,disabled:!y(),className:`w-full py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${y()?"bg-white text-black":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:[r===3?"Let's Go!":"Continue",x.jsx(Oa,{size:20})]})})]})}const B1=[{color:"red",name:"Crimson",icon:""},{color:"blue",name:"Azure",icon:""}];function KB(){var g;const t=yf(),{player:e,joinTeam:n,teamScores:i,artPoints:r,resetAll:o,isOnline:a}=Ts(),u=y=>{n(y)},c={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},f={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},m=Object.values(i).reduce((y,T)=>y+T,0);return x.jsxs(fe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:c,children:[x.jsxs(fe.div,{className:"text-center mb-10",variants:f,children:[x.jsxs(fe.div,{className:"relative inline-block mb-6",animate:{y:[0,-8,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[x.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center mx-auto backdrop-blur-sm border border-white/10",children:x.jsx("span",{className:"text-4xl",children:""})}),x.jsx(fe.div,{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-green-400",animate:{scale:[1,1.2,1],opacity:[1,.7,1]},transition:{duration:2,repeat:1/0}})]}),x.jsx("h1",{className:"text-4xl font-bold gradient-text mb-3",children:"Street Art CTF"}),x.jsx("p",{className:"text-white/50 text-sm max-w-xs mx-auto",children:"Capture the city, one masterpiece at a time"}),x.jsxs("div",{className:`inline-flex items-center gap-1.5 mt-3 px-3 py-1 rounded-full text-xs ${a?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[a?x.jsx(NB,{size:12}):x.jsx($B,{size:12}),a?"Synced":"Offline"]})]}),e.team?x.jsxs(fe.div,{className:"mb-8 p-5 rounded-2xl relative overflow-hidden",variants:f,style:{background:`linear-gradient(135deg, ${Xe[e.team].hex}15 0%, transparent 100%)`,border:`1px solid ${Xe[e.team].hex}30`},children:[x.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-20 blur-3xl",style:{backgroundColor:Xe[e.team].hex}}),x.jsxs("div",{className:"relative flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-1",children:"Your Team"}),x.jsx("p",{className:"text-2xl font-bold",style:{color:Xe[e.team].hex},children:(g=B1.find(y=>y.color===e.team))==null?void 0:g.name})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-1",children:"Score"}),x.jsx("p",{className:"text-3xl font-bold text-white",children:e.score})]})]})]}):x.jsxs(fe.div,{variants:f,className:"mb-8",children:[x.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-2xl p-4 mb-6",children:[x.jsx("h3",{className:"font-bold text-white mb-2",children:" Welcome, Street Artist!"}),x.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Explore the city, find street art, and capture it for your team! Get within ",x.jsx("span",{className:"text-purple-400 font-medium",children:"100m"})," of an art piece, take a photo, and claim it."]})]}),x.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[x.jsx(hA,{size:18,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),x.jsx("div",{className:"grid grid-cols-2 gap-3",children:B1.map(({color:y,name:T,icon:b},k)=>x.jsxs(fe.button,{onClick:()=>u(y),className:"group relative p-5 rounded-2xl text-left overflow-hidden",style:{background:`linear-gradient(135deg, ${Xe[y].hex}15 0%, transparent 100%)`,border:`1px solid ${Xe[y].hex}30`},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.05},children:[x.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",style:{background:`radial-gradient(circle at 50% 50%, ${Xe[y].hex}20 0%, transparent 70%)`}}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"text-2xl font-bold",style:{color:Xe[y].hex},children:b}),x.jsx("p",{className:"font-semibold mt-3 text-white",children:T}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsxs("span",{className:"text-xs text-white/40",children:[i[y]," pts"]}),x.jsx("div",{className:"flex-1 h-1 rounded-full bg-white/10 overflow-hidden",children:x.jsx(fe.div,{className:"h-full rounded-full",style:{backgroundColor:Xe[y].hex},initial:{width:0},animate:{width:`${i[y]/m*100}%`},transition:{duration:.8,delay:.3}})})]})]})]},y))})]}),x.jsxs(fe.div,{className:"space-y-3 mb-8",variants:f,children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(av,{size:18,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Quick Actions"})]}),x.jsxs(fe.button,{onClick:()=>t("/map"),className:"w-full group p-4 rounded-2xl flex items-center gap-4 bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-300",whileTap:{scale:.98},disabled:!e.team,children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20",children:x.jsx(ov,{size:22,className:"text-white"})}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-semibold text-white",children:"Explore Map"}),x.jsx("p",{className:"text-sm text-white/40",children:"View sectors & tram lines"})]}),x.jsx(Oa,{size:20,className:"text-white/20 group-hover:text-white/40 group-hover:translate-x-1 transition-all"})]}),x.jsxs(fe.button,{onClick:()=>t("/scanner"),className:"w-full group p-4 rounded-2xl flex items-center gap-4 bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-300",whileTap:{scale:.98},disabled:!e.team,children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-lg shadow-emerald-500/20",children:x.jsx(uA,{size:22,className:"text-white"})}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-semibold text-white",children:"Scan Art"}),x.jsx("p",{className:"text-sm text-white/40",children:"Capture for your team"})]}),x.jsx(Oa,{size:20,className:"text-white/20 group-hover:text-white/40 group-hover:translate-x-1 transition-all"})]}),x.jsxs(fe.button,{onClick:()=>t("/leaderboard"),className:"w-full group p-4 rounded-2xl flex items-center gap-4 bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-300",whileTap:{scale:.98},children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-lg shadow-amber-500/20",children:x.jsx(Zf,{size:22,className:"text-white"})}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-semibold text-white",children:"Leaderboard"}),x.jsx("p",{className:"text-sm text-white/40",children:"See team rankings"})]}),x.jsx(Oa,{size:20,className:"text-white/20 group-hover:text-white/40 group-hover:translate-x-1 transition-all"})]})]}),x.jsxs(fe.div,{variants:f,children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Yd,{size:18,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Game Stats"})]}),x.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:r.length,label:"Art Spots",color:"from-purple-500/20 to-pink-500/20"},{value:r.filter(y=>y.capturedBy).length,label:"Captured",color:"from-green-500/20 to-emerald-500/20"},{value:e.capturedArt.length,label:"Your Claims",color:"from-blue-500/20 to-indigo-500/20"}].map((y,T)=>x.jsxs(fe.div,{className:`p-4 rounded-2xl text-center bg-gradient-to-br ${y.color} border border-white/[0.06]`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4+T*.1},children:[x.jsx("p",{className:"text-2xl font-bold text-white",children:y.value}),x.jsx("p",{className:"text-xs text-white/40 mt-1",children:y.label})]},y.label))})]}),x.jsx(fe.div,{variants:f,className:"mt-6",children:x.jsxs(fe.button,{onClick:o,className:"w-full p-3 rounded-xl flex items-center justify-center gap-2 bg-white/[0.02] border border-white/[0.04] text-white/30 hover:text-white/50 hover:bg-white/[0.04] transition-all text-sm",whileTap:{scale:.98},children:[x.jsx(lA,{size:14}),"Reset Game Data"]})})]})}function QB(t,e){const n=F.useRef(e);F.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function YB(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const XB=1;function JB(t){return Object.freeze({__version:XB,map:t})}function lv(t,e){return Object.freeze({...t,...e})}const dA=F.createContext(null),fA=dA.Provider;function uv(){const t=F.useContext(dA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function e6(t){function e(n,i){const{instance:r,context:o}=t(n).current;return F.useImperativeHandle(i,()=>r),n.children==null?null:no.createElement(fA,{value:o},n.children)}return F.forwardRef(e)}function t6(t){function e(n,i){const{instance:r}=t(n).current;return F.useImperativeHandle(i,()=>r),null}return F.forwardRef(e)}function pA(t,e){const n=F.useRef();F.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function cv(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Yg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(KA,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function c(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,E,j;return j=function(){p=!1,v&&(E.apply(d,v),v=!1)},E=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(j,l),p=!0)},E}function m(s,l,d){var p=l[1],v=l[0],E=p-v;return s===p&&d?s:((s-v)%E+E)%E+v}function g(){return!1}function y(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function b(s){return T(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function D(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function P(s,l){return s.replace(C,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function I(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||Z("RequestAnimationFrame")||I,O=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,l,d){if(d&&N===I)s.call(l);else return N.call(window,a(s,l))}function z(s){s&&O.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:c,throttle:f,wrapNum:m,falseFn:g,formatNum:y,trim:T,splitWords:b,setOptions:k,getParamString:D,template:P,isArray:S,indexOf:B,emptyImageUrl:q,requestFn:N,cancelFn:O,requestAnimFrame:V,cancelAnimFrame:z};function ne(){}ne.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(Ce(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,j=p._initHooks.length;E<j;E++)p._initHooks[E].call(this)}},l},ne.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ne.mergeOptions=function(s){return r(this.prototype.options,s),this},ne.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Ce(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ce={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=b(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=b(s);for(var v=arguments.length===1,E=0,j=s.length;E<j;E++)v?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,E=p.length;v<E;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var j=this._listens(s,l,d);if(j!==!1){var H=p[j];this._firingCount&&(H.fn=g,this._events[s]=p=p.slice()),p.splice(j,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var E=0,j=v.length;E<j;E++){var H=v[E],$=H.fn;H.once&&this.off(s,$,H.ctx),$.call(H.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var j in this._eventParents)if(this._eventParents[j].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,E=p.length;v<E;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=b(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[c(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[c(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};ce.addEventListener=ce.on,ce.removeEventListener=ce.clearAllEventListeners=ce.off,ce.addOneTimeEventListener=ce.once,ce.fireEvent=ce.fire,ce.hasEventListeners=ce.listens;var Ae=ne.extend(ce);function G(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ae=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function J(s,l,d){return s instanceof G?s:S(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,l,d)}function te(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}te.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=xe(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof G?s=J(s):s=xe(s),s instanceof te?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=xe(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>=l.x&&p.x<=d.x,j=v.y>=l.y&&p.y<=d.y;return E&&j},overlaps:function(s){s=xe(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>l.x&&p.x<d.x,j=v.y>l.y&&p.y<d.y;return E&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return xe(J(l.x-p,l.y-v),J(d.x+p,d.y+v))},equals:function(s){return s?(s=xe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function xe(s,l){return!s||s instanceof te?s:new te(s,l)}function Ge(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}Ge.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof Ee)p=s,v=s;else if(s instanceof Ge){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(de(s)||ke(s)):this;return!l&&!d?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new Ge(new Ee(l.lat-p,l.lng-v),new Ee(d.lat+p,d.lng+v))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ee||"lat"in s?s=de(s):s=ke(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof Ge?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=ke(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>=l.lat&&p.lat<=d.lat,j=v.lng>=l.lng&&p.lng<=d.lng;return E&&j},overlaps:function(s){s=ke(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>l.lat&&p.lat<d.lat,j=v.lng>l.lng&&p.lng<d.lng;return E&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=ke(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ke(s,l){return s instanceof Ge?s:new Ge(s,l)}function Ee(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Ee.prototype={equals:function(s,l){if(!s)return!1;s=de(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+y(this.lat,s)+", "+y(this.lng,s)+")"},distanceTo:function(s){return tn.distance(this,de(s))},wrap:function(){return tn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return ke([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function de(s,l,d){return s instanceof Ee?s:S(s)&&typeof s[0]!="object"?s.length===3?new Ee(s[0],s[1],s[2]):s.length===2?new Ee(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ee(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ee(s,l,d)}var lt={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new te(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ee(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var E=s.getSouthWest(),j=s.getNorthEast(),H=new Ee(E.lat-p,E.lng-v),$=new Ee(j.lat-p,j.lng-v);return new Ge(H,$)}},tn=r({},lt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),j=Math.sin((l.lng-s.lng)*d/2),H=E*E+Math.cos(p)*Math.cos(v)*j*j,$=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*$}}),Li=6378137,ri={R:Li,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new G(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Li*Math.PI;return new te([-s,-s],[s,s])}()};function mn(s,l,d,p){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}mn.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new G((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ni(s,l,d,p){return new mn(s,l,d,p)}var xs=r({},tn,{code:"EPSG:3857",projection:ri,transformation:function(){var s=.5/(Math.PI*ri.R);return Ni(s,.5,-s,.5)}()}),fc=r({},xs,{code:"EPSG:900913"});function pc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Io(s,l){var d="",p,v,E,j,H,$;for(p=0,E=s.length;p<E;p++){for(H=s[p],v=0,j=H.length;v<j;v++)$=H[v],d+=(v?"L":"M")+$.x+" "+$.y;d+=l?le.svg?"z":"x":""}return d||"M0 0"}var Es=document.documentElement.style,Ps="ActiveXObject"in window,Pt=Ps&&!document.addEventListener,St="msLaunchUri"in navigator&&!("documentMode"in document),mr=nn("webkit"),mc=nn("android"),ll=nn("android 2")||nn("android 3"),Yf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ss=mc&&nn("Google")&&Yf<537&&!("AudioNode"in window),Co=!!window.opera,ul=!St&&nn("chrome"),Ao=nn("gecko")&&!mr&&!Co&&!Ps,Xf=!ul&&nn("safari"),gc=nn("phantom"),cl="OTransition"in Es,_c=navigator.platform.indexOf("Win")===0,gr=Ps&&"transition"in Es,Is="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ll,ko="MozPerspective"in Es,Mi=!window.L_DISABLE_3D&&(gr||Is||ko)&&!cl&&!gc,_r=typeof orientation<"u"||nn("mobile"),bo=_r&&mr,yc=_r&&Is,yr=!window.PointerEvent&&window.MSPointerEvent,hl=!!(window.PointerEvent||yr),It="ontouchstart"in window||!!window.TouchEvent,vc=!window.L_NO_TOUCH&&(It||hl),Cs=_r&&Co,As=_r&&Ao,Jf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ep=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),vr=function(){return!!document.createElement("canvas").getContext}(),dl=!!(document.createElementNS&&pc("svg").createSVGRect),tp=!!dl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ro=!dl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),wc=navigator.platform.indexOf("Mac")===0,Tc=navigator.platform.indexOf("Linux")===0;function nn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var le={ie:Ps,ielt9:Pt,edge:St,webkit:mr,android:mc,android23:ll,androidStock:Ss,opera:Co,chrome:ul,gecko:Ao,safari:Xf,phantom:gc,opera12:cl,win:_c,ie3d:gr,webkit3d:Is,gecko3d:ko,any3d:Mi,mobile:_r,mobileWebkit:bo,mobileWebkit3d:yc,msPointer:yr,pointer:hl,touch:vc,touchNative:It,mobileOpera:Cs,mobileGecko:As,retina:Jf,passiveEvents:ep,canvas:vr,svg:dl,vml:Ro,inlineSvg:tp,mac:wc,linux:Tc},xc=le.msPointer?"MSPointerDown":"pointerdown",Hn=le.msPointer?"MSPointerMove":"pointermove",fl=le.msPointer?"MSPointerUp":"pointerup",pl=le.msPointer?"MSPointerCancel":"pointercancel",ks={touchstart:xc,touchmove:Hn,touchend:fl,touchcancel:pl},Lo={touchstart:ml,touchmove:Sn,touchend:Sn,touchcancel:Sn},Oi={},Ec=!1;function Pc(s,l,d){return l==="touchstart"&&bs(),Lo[l]?(d=Lo[l].bind(this,d),s.addEventListener(ks[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function np(s,l,d){if(!ks[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(ks[l],d,!1)}function No(s){Oi[s.pointerId]=s}function Sc(s){Oi[s.pointerId]&&(Oi[s.pointerId]=s)}function Mo(s){delete Oi[s.pointerId]}function bs(){Ec||(document.addEventListener(xc,No,!0),document.addEventListener(Hn,Sc,!0),document.addEventListener(fl,Mo,!0),document.addEventListener(pl,Mo,!0),Ec=!0)}function Sn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Oi)l.touches.push(Oi[d]);l.changedTouches=[l],s(l)}}function ml(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ft(l),Sn(s,l)}function ip(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ic=200;function Cc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var j=wl(E);if(!(j.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!j.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var H=Date.now();H-d<=Ic?(p++,p===2&&l(ip(E))):p=1,d=H}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Ac(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Rs=Oo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Di=Oo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gl=Di==="webkitTransition"||Di==="OTransition"?Di+"End":"transitionend";function _l(s){return typeof s=="string"?document.getElementById(s):s}function wr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Ne(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function De(s){var l=s.parentNode;l&&l.removeChild(s)}function Gt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function In(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Cn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Ls(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=si(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function se(s,l){if(s.classList!==void 0)for(var d=b(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Ls(s,l)){var E=si(s);Vi(s,(E?E+" ":"")+l)}}function We(s,l){s.classList!==void 0?s.classList.remove(l):Vi(s,T((" "+si(s)+" ").replace(" "+l+" "," ")))}function Vi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function si(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function rn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&kc(s,l)}function kc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Oo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function ji(s,l,d){var p=l||new G(0,0);s.style[Rs]=(le.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function ot(s,l){s._leaflet_pos=l,le.any3d?ji(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Fi(s){return s._leaflet_pos||new G(0,0)}var Wn,gn,Do;if("onselectstart"in document)Wn=function(){ye(window,"selectstart",ft)},gn=function(){ze(window,"selectstart",ft)};else{var Tr=Oo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wn=function(){if(Tr){var s=document.documentElement.style;Do=s[Tr],s[Tr]="none"}},gn=function(){Tr&&(document.documentElement.style[Tr]=Do,Do=void 0)}}function Vo(){ye(window,"dragstart",ft)}function jo(){ze(window,"dragstart",ft)}var Ns,oi;function yl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Fo(),Ns=s,oi=s.style.outlineStyle,s.style.outlineStyle="none",ye(window,"keydown",Fo))}function Fo(){Ns&&(Ns.style.outlineStyle=oi,Ns=void 0,oi=void 0,ze(window,"keydown",Fo))}function bc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function An(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var rp={__proto__:null,TRANSFORM:Rs,TRANSITION:Di,TRANSITION_END:gl,get:_l,getStyle:wr,create:Ne,remove:De,empty:Gt,toFront:In,toBack:Cn,hasClass:Ls,addClass:se,removeClass:We,setClass:Vi,getClass:si,setOpacity:rn,testProp:Oo,setTransform:ji,setPosition:ot,getPosition:Fi,get disableTextSelection(){return Wn},get enableTextSelection(){return gn},disableImageDrag:Vo,enableImageDrag:jo,preventOutline:yl,restoreOutline:Fo,getSizedParentNode:bc,getScale:An};function ye(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Bo(s,v,l[v],d);else{l=b(l);for(var E=0,j=l.length;E<j;E++)Bo(s,l[E],d,p)}return this}var Zt="_leaflet_events";function ze(s,l,d,p){if(arguments.length===1)xr(s),delete s[Zt];else if(l&&typeof l=="object")for(var v in l)Ms(s,v,l[v],d);else if(l=b(l),arguments.length===2)xr(s,function(H){return B(l,H)!==-1});else for(var E=0,j=l.length;E<j;E++)Ms(s,l[E],d,p);return this}function xr(s,l){for(var d in s[Zt]){var p=d.split(/\d/)[0];(!l||l(p))&&Ms(s,p,null,null,d)}}var Bi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bo(s,l,d,p){var v=l+c(d)+(p?"_"+c(p):"");if(s[Zt]&&s[Zt][v])return this;var E=function(H){return d.call(p||s,H||window.event)},j=E;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?E=Pc(s,l,E):le.touch&&l==="dblclick"?E=Cc(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Bi[l]||l,E,le.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(H){H=H||window.event,xl(s,H)&&j(H)},s.addEventListener(Bi[l],E,!1)):s.addEventListener(l,j,!1):s.attachEvent("on"+l,E),s[Zt]=s[Zt]||{},s[Zt][v]=E}function Ms(s,l,d,p,v){v=v||l+c(d)+(p?"_"+c(p):"");var E=s[Zt]&&s[Zt][v];if(!E)return this;!le.touchNative&&le.pointer&&l.indexOf("touch")===0?np(s,l,E):le.touch&&l==="dblclick"?Ac(s,E):"removeEventListener"in s?s.removeEventListener(Bi[l]||l,E,!1):s.detachEvent("on"+l,E),s[Zt][v]=null}function je(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function vl(s){return Bo(s,"wheel",je),this}function Os(s){return ye(s,"mousedown touchstart dblclick contextmenu",je),s._leaflet_disable_click=!0,this}function ft(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ai(s){return ft(s),je(s),this}function wl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Ds(s,l){if(!l)return new G(s.clientX,s.clientY);var d=An(l),p=d.boundingClientRect;return new G((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var li=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Tl(s){return le.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/li:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function xl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Vs={__proto__:null,on:ye,off:ze,stopPropagation:je,disableScrollPropagation:vl,disableClickPropagation:Os,preventDefault:ft,stop:ai,getPropagationPath:wl,getMousePosition:Ds,getWheelDelta:Tl,isExternalTarget:xl,addListener:ye,removeListener:ze},El=Ae.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Fi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),ot(this._el,d),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Pe=Ae.extend({options:{crs:xs,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(de(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Di&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,gl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(de(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),E=s instanceof G?s:this.latLngToContainerPoint(s),j=E.subtract(v).multiplyBy(1-1/p),H=this.containerPointToLatLng(v.add(j));return this.setView(H,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():ke(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var E=p.subtract(d).divideBy(2),j=this.project(s.getSouthWest(),v),H=this.project(s.getNorthEast(),v),$=this.unproject(j.add(H).divideBy(2).add(E),v);return{center:$,zoom:v}},fitBounds:function(s,l){if(s=ke(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new El,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!le.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),E=this.getSize(),j=this._zoom;s=de(s),l=l===void 0?j:l;var H=Math.max(E.x,E.y),$=H*this.getZoomScale(j,l),Q=v.distanceTo(p)||1,ie=1.42,pe=ie*ie;function Se(pt){var qc=pt?-1:1,WA=pt?$:H,$A=$*$-H*H+qc*pe*pe*Q*Q,qA=2*WA*pe*Q,up=$A/qA,Nv=Math.sqrt(up*up+1)-up,GA=Nv<1e-9?-18:Math.log(Nv);return GA}function Kt(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function Ct(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function Rn(pt){return Kt(pt)/Ct(pt)}var on=Se(0);function Jo(pt){return H*(Ct(on)/Ct(on+ie*pt))}function BA(pt){return H*(Ct(on)*Rn(on+ie*pt)-Kt(on))/pe}function zA(pt){return 1-Math.pow(1-pt,1.5)}var UA=Date.now(),Rv=(Se(1)-on)/ie,HA=d.duration?1e3*d.duration:1e3*Rv*.8;function Lv(){var pt=(Date.now()-UA)/HA,qc=zA(pt)*Rv;pt<=1?(this._flyToFrame=V(Lv,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(BA(qc)/Q)),j),this.getScaleZoom(H/Jo(qc),j),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Lv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=ke(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,ke(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),E=this.project(s),j=this.getPixelBounds(),H=xe([j.min.add(d),j.max.subtract(p)]),$=H.getSize();if(!H.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(H.getCenter()),ie=H.extend(E).getSize().subtract($);v.x+=Q.x<0?-ie.x:ie.x,v.y+=Q.y<0?-ie.y:ie.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),E=p.subtract(v);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Ee(l,d),v=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var j=this.getBoundsZoom(v);this.setView(p,E.maxZoom?Math.min(j,E.maxZoom):j)}var H={latlng:p,bounds:v,timestamp:s.timestamp};for(var $ in s.coords)typeof s.coords[$]=="number"&&(H[$]=s.coords[$]);this.fire("locationfound",H)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),De(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)De(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ne("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Ge(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=ke(s),d=J(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),E=this.getMaxZoom(),j=s.getNorthWest(),H=s.getSouthEast(),$=this.getSize().subtract(d),Q=xe(this.project(H,p),this.project(j,p)).getSize(),ie=le.any3d?this.options.zoomSnap:1,pe=$.x/Q.x,Se=$.y/Q.y,Kt=l?Math.max(pe,Se):Math.min(pe,Se);return p=this.getScaleZoom(Kt,p),ie&&(p=Math.round(p/(ie/100))*(ie/100),p=l?Math.ceil(p/ie)*ie:Math.floor(p/ie)*ie),Math.max(v,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new te(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(de(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(de(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(de(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ke(s))},distance:function(s,l){return this.options.crs.distance(de(s),de(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(s)))},mouseEventToContainerPoint:function(s){return Ds(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=_l(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,se(s,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=wr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ot(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(s.markerPane,"leaflet-zoom-hide"),se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){ot(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ot(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[c(this._container)]=this;var l=s?ze:ye;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,j=!1;E;){if(p=this._targets[c(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){j=!0;break}if(p&&p.listens(l,!0)&&(v&&!xl(E,s)||(d.push(p),v))||E===this._container)break;E=E.parentNode}return!d.length&&!j&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&yl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var E=[],j=0;j<d.length;j++)d[j].listens(l,!0)&&E.push(d[j]);v=E.concat(v)}if(v.length){l==="contextmenu"&&ft(s);var H=v[0],$={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=H.getLatLng&&(!H._radius||H._radius<=10);$.containerPoint=Q?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(s),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Q?H.getLatLng():this.layerPointToLatLng($.layerPoint)}for(j=0;j<v.length;j++)if(v[j].fire(l,$,!0),$.originalEvent._stopped||v[j].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Fi(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return xe([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),E=new te(p.subtract(v),p.add(v)),j=this._getBoundsOffset(E,d,l);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?s:this.unproject(p.add(j),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new te(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=xe(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),E=p.max.subtract(s.max),j=this._rebound(v.x,-E.x),H=this._rebound(v.y,-E.y);return new G(j,H)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=le.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Rs,p=this._proxy.style[d];ji(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){De(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();ji(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function zo(s,l){return new Pe(s,l)}var sn=ne.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return se(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(De(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ui=function(s){return new sn(s)};Pe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ne("div",l+"control-container",this._container);function p(v,E){var j=l+v+" "+l+E;s[v+E]=Ne("div",j,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)De(this._controlCorners[s]);De(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Rc=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){k(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return sn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ne("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Os(l),vl(l);var p=this._section=Ne("section",s+"-list");d&&(this._map.on("click",this.collapse,this),ye(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Ne("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),ye(v,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){ft(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ne("div",s+"-base",p),this._separator=Ne("div",s+"-separator",p),this._overlaysList=Ne("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Gt(this._baseLayersList),Gt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(c(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+c(this),d),this._layerControlInputs.push(p),p.layerId=c(s.layer),ye(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(v);var j=s.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(E=0;E<v.length;E++)this._map.hasLayer(v[E])&&this._map.removeLayer(v[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ye(s,"click",ft),this.expand();var l=this;setTimeout(function(){ze(s,"click",ft),l._preventClick=!1})}}),Lc=function(s,l,d){return new Rc(s,l,d)},zi=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ne("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var E=Ne("a",d,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Os(E),ye(E,"click",ai),ye(E,"click",v,this),ye(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";We(this._zoomInButton,l),We(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(se(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(se(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pe.mergeOptions({zoomControl:!0}),Pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zi,this.addControl(this.zoomControl))});var Nc=function(s){return new zi(s)},Pl=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ne("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ne("div",l,d)),s.imperial&&(this._iScale=Ne("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Sl=function(s){return new Pl(s)},Il='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Uo=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?Il+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),Os(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Pe.mergeOptions({attributionControl:!0}),Pe.addInitHook(function(){this.options.attributionControl&&new Uo().addTo(this)});var Ho=function(s){return new Uo(s)};sn.Layers=Rc,sn.Zoom=zi,sn.Scale=Pl,sn.Attribution=Uo,ui.layers=Lc,ui.zoom=Nc,ui.scale=Sl,ui.attribution=Ho;var _n=ne.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_n.addTo=function(s,l){return s.addHandler(l,this),this};var Mc={Events:ce},ci=le.touch?"touchstart mousedown":"mousedown",$n=Ae.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){k(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(ye(this._dragStartTarget,ci,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&($n._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,ci,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ls(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){$n._dragging===this&&this.finishDrag();return}if(!($n._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&($n._dragging=this,this._preventOutline&&yl(this._element),Vo(),Wn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=bc(this._element);this._startPoint=new G(l.clientX,l.clientY),this._startPos=Fi(this._element),this._parentScale=An(d);var p=s.type==="mousedown";ye(document,p?"mousemove":"touchmove",this._onMove,this),ye(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new G(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,ft(s),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ot(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),jo(),gn();var l=this._moved&&this._moving;this._moving=!1,$n._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Cl(s,l,d){var p,v=[1,4,2,8],E,j,H,$,Q,ie,pe,Se;for(E=0,ie=s.length;E<ie;E++)s[E]._code=W(s[E],l);for(H=0;H<4;H++){for(pe=v[H],p=[],E=0,ie=s.length,j=ie-1;E<ie;j=E++)$=s[E],Q=s[j],$._code&pe?Q._code&pe||(Se=U(Q,$,pe,l,d),Se._code=W(Se,l),p.push(Se)):(Q._code&pe&&(Se=U(Q,$,pe,l,d),Se._code=W(Se,l),p.push(Se)),p.push($));s=p}return s}function Al(s,l){var d,p,v,E,j,H,$,Q,ie;if(!s||s.length===0)throw new Error("latlngs not passed");Ve(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var pe=de([0,0]),Se=ke(s),Kt=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());Kt<1700&&(pe=Wo(s));var Ct=s.length,Rn=[];for(d=0;d<Ct;d++){var on=de(s[d]);Rn.push(l.project(de([on.lat-pe.lat,on.lng-pe.lng])))}for(H=$=Q=0,d=0,p=Ct-1;d<Ct;p=d++)v=Rn[d],E=Rn[p],j=v.y*E.x-E.y*v.x,$+=(v.x+E.x)*j,Q+=(v.y+E.y)*j,H+=j*3;H===0?ie=Rn[0]:ie=[$/H,Q/H];var Jo=l.unproject(J(ie));return de([Jo.lat+pe.lat,Jo.lng+pe.lng])}function Wo(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var E=de(s[v]);l+=E.lat,d+=E.lng,p++}return de([l/p,d/p])}var $o={__proto__:null,clipPolygon:Cl,polygonCenter:Al,centroid:Wo};function Vt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=_(s,d),s=Er(s,d),s}function kl(s,l,d){return Math.sqrt(ve(s,l,d,!0))}function Oc(s,l,d){return ve(s,l,d)}function Er(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,h(s,v,l,0,d-1);var E,j=[];for(E=0;E<d;E++)v[E]&&j.push(s[E]);return j}function h(s,l,d,p,v){var E=0,j,H,$;for(H=p+1;H<=v-1;H++)$=ve(s[H],s[p],s[v],!0),$>E&&(j=H,E=$);E>d&&(l[j]=1,h(s,l,d,p,j),h(s,l,d,j,v))}function _(s,l){for(var d=[s[0]],p=1,v=0,E=s.length;p<E;p++)ee(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<E-1&&d.push(s[E-1]),d}var w;function A(s,l,d,p,v){var E=p?w:W(s,d),j=W(l,d),H,$,Q;for(w=j;;){if(!(E|j))return[s,l];if(E&j)return!1;H=E||j,$=U(s,l,H,d,v),Q=W($,d),H===E?(s=$,E=Q):(l=$,j=Q)}}function U(s,l,d,p,v){var E=l.x-s.x,j=l.y-s.y,H=p.min,$=p.max,Q,ie;return d&8?(Q=s.x+E*($.y-s.y)/j,ie=$.y):d&4?(Q=s.x+E*(H.y-s.y)/j,ie=H.y):d&2?(Q=$.x,ie=s.y+j*($.x-s.x)/E):d&1&&(Q=H.x,ie=s.y+j*(H.x-s.x)/E),new G(Q,ie,v)}function W(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ee(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function ve(s,l,d,p){var v=l.x,E=l.y,j=d.x-v,H=d.y-E,$=j*j+H*H,Q;return $>0&&(Q=((s.x-v)*j+(s.y-E)*H)/$,Q>1?(v=d.x,E=d.y):Q>0&&(v+=j*Q,E+=H*Q)),j=s.x-v,H=s.y-E,p?j*j+H*H:new G(v,E)}function Ve(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Fe(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ve(s)}function ut(s,l){var d,p,v,E,j,H,$,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Ve(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ie=de([0,0]),pe=ke(s),Se=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());Se<1700&&(ie=Wo(s));var Kt=s.length,Ct=[];for(d=0;d<Kt;d++){var Rn=de(s[d]);Ct.push(l.project(de([Rn.lat-ie.lat,Rn.lng-ie.lng])))}for(d=0,p=0;d<Kt-1;d++)p+=Ct[d].distanceTo(Ct[d+1])/2;if(p===0)Q=Ct[0];else for(d=0,E=0;d<Kt-1;d++)if(j=Ct[d],H=Ct[d+1],v=j.distanceTo(H),E+=v,E>p){$=(E-p)/v,Q=[H.x-$*(H.x-j.x),H.y-$*(H.y-j.y)];break}var on=l.unproject(J(Q));return de([on.lat+ie.lat,on.lng+ie.lng])}var kn={__proto__:null,simplify:Vt,pointToSegmentDistance:kl,closestPointOnSegment:Oc,clipSegment:A,_getEdgeIntersection:U,_getBitCode:W,_sqClosestPointOnSegment:ve,isFlat:Ve,_flat:Fe,polylineCenter:ut},qn={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new Ee(s.y,s.x)},bounds:new te([-180,-90],[180,90])},bn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,E=Math.sqrt(1-v*v),j=E*Math.sin(p),H=Math.tan(Math.PI/4-p/2)/Math.pow((1-j)/(1+j),E/2);return p=-d*Math.log(Math.max(H,1e-10)),new G(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),E=Math.exp(-s.y/d),j=Math.PI/2-2*Math.atan(E),H=0,$=.1,Q;H<15&&Math.abs($)>1e-7;H++)Q=v*Math.sin(j),Q=Math.pow((1-Q)/(1+Q),v/2),$=Math.PI/2-2*Math.atan(E*Q)-j,j+=$;return new Ee(j*l,s.x*l/d)}},hi={__proto__:null,LonLat:qn,Mercator:bn,SphericalMercator:ri},qo=r({},tn,{code:"EPSG:3395",projection:bn,transformation:function(){var s=.5/(Math.PI*bn.R);return Ni(s,.5,-s,.5)}()}),Go=r({},tn,{code:"EPSG:4326",projection:qn,transformation:Ni(1/180,1,-1/180,.5)}),yA=r({},lt,{projection:qn,transformation:Ni(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});lt.Earth=tn,lt.EPSG3395=qo,lt.EPSG3857=xs,lt.EPSG900913=fc,lt.EPSG4326=Go,lt.Simple=yA;var Gn=Ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[c(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[c(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Pe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=c(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return c(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[c(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=c(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zo=Gn.extend({initialize:function(s,l){k(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return c(s)}}),vA=function(s,l){return new Zo(s,l)},Ui=Zo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Zo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Zo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ge;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),wA=function(s,l){return new Ui(s,l)},Ko=ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=J(p),E=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return le.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function TA(s){return new Ko(s)}var bl=Ko.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof bl.imagePath!="string"&&(bl.imagePath=this._detectIconPath()),(this.options.imagePath||bl.imagePath)+Ko.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var E=p.exec(d);return E&&E[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ne("div","leaflet-default-icon-path",document.body),l=wr(s,"background-image")||wr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),dv=_n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new $n(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,E=Fi(l._icon),j=d.getPixelBounds(),H=d.getPixelOrigin(),$=xe(j.min._subtract(H).add(v),j.max._subtract(H).subtract(v));if(!$.contains(E)){var Q=J((Math.max($.max.x,E.x)-$.max.x)/(j.max.x-$.max.x)-(Math.min($.min.x,E.x)-$.min.x)/(j.min.x-$.min.x),(Math.max($.max.y,E.y)-$.max.y)/(j.max.y-$.max.y)-(Math.min($.min.y,E.y)-$.min.y)/(j.min.y-$.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),ot(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Fi(l._icon),v=l._map.layerPointToLatLng(p);d&&ot(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Dc=Gn.extend({options:{icon:new bl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=de(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=de(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),se(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),E=!1;v!==this._shadow&&(this._removeShadow(),E=!0),v&&(se(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),De(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&De(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ot(this._icon,s),this._shadow&&ot(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),dv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new dv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&rn(this._icon,s),this._shadow&&rn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xA(s,l){return new Dc(s,l)}var Pr=Gn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vc=Pr.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=de(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=de(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Pr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new te(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function EA(s,l){return new Vc(s,l)}var sp=Vc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),k(this,l),this._latlng=de(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ge(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Pr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===tn.distance){var v=Math.PI/180,E=this._mRadius/tn.R/v,j=d.project([l+E,s]),H=d.project([l-E,s]),$=j.add(H).divideBy(2),Q=d.unproject($).lat,ie=Math.acos((Math.cos(E*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(ie)||ie===0)&&(ie=E/Math.cos(Math.PI/180*l)),this._point=$.subtract(d.getPixelOrigin()),this._radius=isNaN(ie)?0:$.x-d.project([Q,s-ie]).x,this._radiusY=$.y-j.y}else{var pe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(pe).x}this._updateBounds()}});function PA(s,l,d){return new sp(s,l,d)}var Hi=Pr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=ve,v,E,j=0,H=this._parts.length;j<H;j++)for(var $=this._parts[j],Q=1,ie=$.length;Q<ie;Q++){v=$[Q-1],E=$[Q];var pe=p(s,v,E,!0);pe<l&&(l=pe,d=p(s,v,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ut(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=de(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ge,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ve(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Ve(s),p=0,v=s.length;p<v;p++)d?(l[p]=de(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new G(s,s);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Ee,v=s.length,E,j;if(p){for(j=[],E=0;E<v;E++)j[E]=this._map.latLngToLayerPoint(s[E]),d.extend(j[E]);l.push(j)}else for(E=0;E<v;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,E,j,H,$;for(d=0,v=0,E=this._rings.length;d<E;d++)for($=this._rings[d],p=0,j=$.length;p<j-1;p++)H=A($[p],$[p+1],s,p,!0),H&&(l[v]=l[v]||[],l[v].push(H[0]),(H[1]!==$[p+1]||p===j-2)&&(l[v].push(H[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Vt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,E,j,H,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for(H=this._parts[d],p=0,j=H.length,v=j-1;p<j;v=p++)if(!(!l&&p===0)&&kl(s,H[v],H[p])<=$)return!0;return!1}});function SA(s,l){return new Hi(s,l)}Hi._flat=Fe;var Qo=Hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Al(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Hi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Ee&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Hi.prototype._setLatLngs.call(this,s),Ve(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ve(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new G(l,l);if(s=new te(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,E;p<v;p++)E=Cl(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,E,j,H,$,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,$=this._parts.length;E<$;E++)for(d=this._parts[E],j=0,Q=d.length,H=Q-1;j<Q;H=j++)p=d[j],v=d[H],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Hi.prototype._containsPoint.call(this,s,!0)}});function IA(s,l){return new Qo(s,l)}var Wi=Ui.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var j=jc(s,E);return j?(j.feature=zc(s),j.defaultOptions=j.options,this.resetStyle(j),E.onEachFeature&&E.onEachFeature(s,j),this.addLayer(j)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function jc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],E=l&&l.pointToLayer,j=l&&l.coordsToLatLng||op,H,$,Q,ie;if(!p&&!d)return null;switch(d.type){case"Point":return H=j(p),fv(E,s,H,l);case"MultiPoint":for(Q=0,ie=p.length;Q<ie;Q++)H=j(p[Q]),v.push(fv(E,s,H,l));return new Ui(v);case"LineString":case"MultiLineString":return $=Fc(p,d.type==="LineString"?0:1,j),new Hi($,l);case"Polygon":case"MultiPolygon":return $=Fc(p,d.type==="Polygon"?1:2,j),new Qo($,l);case"GeometryCollection":for(Q=0,ie=d.geometries.length;Q<ie;Q++){var pe=jc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);pe&&v.push(pe)}return new Ui(v);case"FeatureCollection":for(Q=0,ie=d.features.length;Q<ie;Q++){var Se=jc(d.features[Q],l);Se&&v.push(Se)}return new Ui(v);default:throw new Error("Invalid GeoJSON object.")}}function fv(s,l,d,p){return s?s(l,d):new Dc(d,p&&p.markersInheritOptions&&p)}function op(s){return new Ee(s[1],s[0],s[2])}function Fc(s,l,d){for(var p=[],v=0,E=s.length,j;v<E;v++)j=l?Fc(s[v],l-1,d):(d||op)(s[v]),p.push(j);return p}function ap(s,l){return s=de(s),s.alt!==void 0?[y(s.lng,l),y(s.lat,l),y(s.alt,l)]:[y(s.lng,l),y(s.lat,l)]}function Bc(s,l,d,p){for(var v=[],E=0,j=s.length;E<j;E++)v.push(l?Bc(s[E],Ve(s[E])?0:l-1,d,p):ap(s[E],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function Yo(s,l){return s.feature?r({},s.feature,{geometry:l}):zc(l)}function zc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var lp={toGeoJSON:function(s){return Yo(this,{type:"Point",coordinates:ap(this.getLatLng(),s)})}};Dc.include(lp),sp.include(lp),Vc.include(lp),Hi.include({toGeoJSON:function(s){var l=!Ve(this._latlngs),d=Bc(this._latlngs,l?1:0,!1,s);return Yo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Qo.include({toGeoJSON:function(s){var l=!Ve(this._latlngs),d=l&&!Ve(this._latlngs[0]),p=Bc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Yo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Zo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Yo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var E=v.toGeoJSON(s);if(d)p.push(E.geometry);else{var j=zc(E);j.type==="FeatureCollection"?p.push.apply(p,j.features):p.push(j)}}}),d?Yo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function pv(s,l){return new Wi(s,l)}var CA=pv,Uc=Gn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=ke(l),k(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){De(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&In(this._image),this},bringToBack:function(){return this._map&&Cn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ke(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ne("img");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ji(this._image,d,l)},_reset:function(){var s=this._image,l=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();ot(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),AA=function(s,l,d){return new Uc(s,l,d)},mv=Uc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ne("video");if(se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var j=Ne("source");j.src=this._url[E],l.appendChild(j)}}});function kA(s,l,d){return new mv(s,l,d)}var gv=Uc.extend({_initImage:function(){var s=this._image=this._url;se(s,"leaflet-image-layer"),this._zoomAnimated&&se(s,"leaflet-zoom-animated"),this.options.className&&se(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function bA(s,l,d){return new gv(s,l,d)}var di=Gn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ee||S(s))?(this._latlng=de(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&rn(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(rn(this._container,0),this._removeTimeout=setTimeout(a(De,void 0,this._container),200)):De(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=de(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&In(this._container),this},bringToBack:function(){return this._map&&Cn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Ui){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?ot(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Pe.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),Gn.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(k(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var Hc=di.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,di.prototype.openOn.call(this,s)},onAdd:function(s){di.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Pr||this._source.on("preclick",je))},onRemove:function(s){di.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Pr||this._source.off("preclick",je))},getEvents:function(){var s=di.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ne("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ne("div",s+"-content-wrapper",l);if(this._contentNode=Ne("div",s+"-content",d),Os(l),vl(this._contentNode),ye(l,"contextmenu",je),this._tipContainer=Ne("div",s+"-tip-container",l),this._tip=Ne("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ne("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ye(p,"click",function(v){ft(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,E="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",se(s,E)):We(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();ot(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(wr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new G(this._containerLeft,-d-this._containerBottom);v._add(Fi(this._container));var E=s.layerPointToContainerPoint(v),j=J(this.options.autoPanPadding),H=J(this.options.autoPanPaddingTopLeft||j),$=J(this.options.autoPanPaddingBottomRight||j),Q=s.getSize(),ie=0,pe=0;E.x+p+$.x>Q.x&&(ie=E.x+p-Q.x+$.x),E.x-ie-H.x<0&&(ie=E.x-H.x),E.y+d+$.y>Q.y&&(pe=E.y+d-Q.y+$.y),E.y-pe-H.y<0&&(pe=E.y-H.y),(ie||pe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ie,pe]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),RA=function(s,l){return new Hc(s,l)};Pe.mergeOptions({closePopupOnClick:!0}),Pe.include({openPopup:function(s,l,d){return this._initOverlay(Hc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Gn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Hc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Ui||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ai(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Pr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Wc=di.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){di.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){di.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=di.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,E=p.latLngToContainerPoint(p.getCenter()),j=p.layerPointToContainerPoint(s),H=this.options.direction,$=v.offsetWidth,Q=v.offsetHeight,ie=J(this.options.offset),pe=this._getAnchor();H==="top"?(l=$/2,d=Q):H==="bottom"?(l=$/2,d=0):H==="center"?(l=$/2,d=Q/2):H==="right"?(l=0,d=Q/2):H==="left"?(l=$,d=Q/2):j.x<E.x?(H="right",l=0,d=Q/2):(H="left",l=$+(ie.x+pe.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ie).add(pe),We(v,"leaflet-tooltip-right"),We(v,"leaflet-tooltip-left"),We(v,"leaflet-tooltip-top"),We(v,"leaflet-tooltip-bottom"),se(v,"leaflet-tooltip-"+H),ot(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&rn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),LA=function(s,l){return new Wc(s,l)};Pe.include({openTooltip:function(s,l,d){return this._initOverlay(Wc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Gn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Wc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Ui||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(ye(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ye(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var _v=Ko.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Gt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function NA(s){return new _v(s)}Ko.Default=bl;var Rl=Gn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),De(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Cn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,E;p<v;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){rn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var E=Math.min(1,(s-v.loaded)/200);rn(v.el,E),E<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(De(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)De(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),E=Math.floor(l/2),j=d-1,H=new G(+v,+E);H.z=+j;var $=this._tileCoordsToKey(H),Q=this._tiles[$];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),j>p?this._retainParent(v,E,j,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var E=2*l;E<2*l+2;E++){var j=new G(v,E);j.z=d+1;var H=this._tileCoordsToKey(j),$=this._tiles[H];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);d+1<p&&this._retainChildren(v,E,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var E=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||E)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();le.any3d?ji(s.el,v,p):ot(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new te(v.subtract(E),v.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),E=v.getCenter(),j=[],H=this.options.keepBuffer,$=new te(v.getBottomLeft().subtract([H,-H]),v.getTopRight().add([H,-H]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ie=this._tiles[Q].coords;(ie.z!==this._tileZoom||!$.contains(new G(ie.x,ie.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var pe=v.min.y;pe<=v.max.y;pe++)for(var Se=v.min.x;Se<=v.max.x;Se++){var Kt=new G(Se,pe);if(Kt.z=this._tileZoom,!!this._isValidTile(Kt)){var Ct=this._tiles[this._tileCoordsToKey(Kt)];Ct?Ct.current=!0:j.push(Kt)}}if(j.sort(function(on,Jo){return on.distanceTo(E)-Jo.distanceTo(E)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Rn=document.createDocumentFragment();for(Se=0;Se<j.length;Se++)this._addTile(j[Se],Rn);this._level.el.appendChild(Rn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return ke(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),E=l.unproject(p,s.z),j=l.unproject(v,s.z);return[E,j]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Ge(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new G(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(De(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){se(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,le.ielt9&&this.options.opacity<1&&rn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&V(a(this._tileReady,this,s,null,v)),ot(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(rn(d.el,0),z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(se(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new G(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new te(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function MA(s){return new Rl(s)}var Xo=Rl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&le.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return ye(d,"load",a(this._tileOnLoad,this,l,d)),ye(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:le.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(s,l){le.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=q;var d=this._tiles[s].coords;De(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),Rl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===q))return Rl.prototype._tileReady.call(this,s,l,d)}});function yv(s,l){return new Xo(s,l)}var vv=Xo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=k(this,l);var v=l.detectRetina&&le.retina?2:1,E=this.getTileSize();d.width=E.x*v,d.height=E.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Xo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=xe(d.project(l[0]),d.project(l[1])),v=p.min,E=p.max,j=(this._wmsVersion>=1.3&&this._crs===Go?[v.y,v.x,E.y,E.x]:[v.x,v.y,E.x,E.y]).join(","),H=Xo.prototype.getTileUrl.call(this,s);return H+D(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function OA(s,l){return new vv(s,l)}Xo.WMS=vv,yv.wms=OA;var $i=Gn.extend({options:{padding:.1},initialize:function(s){k(this,s),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),E=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));le.any3d?ji(this._container,E,d):ot(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new te(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),wv=$i.extend({options:{tolerance:0},getEvents:function(){var s=$i.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ye(s,"mousemove",this._onMouseMove,this),ye(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,De(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=le.retina?2:1;ot(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){$i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[c(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[c(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,E,j=s._parts,H=j.length,$=this._ctx;if(H){for($.beginPath(),d=0;d<H;d++){for(p=0,v=j[d].length;p<v;p++)E=j[d][p],$[p?"lineTo":"moveTo"](E.x,E.y);l&&$.closePath()}this._fillStroke($,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(We(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(se(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Tv(s){return le.canvas?new wv(s):null}var Ll=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),DA={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($i.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Ll("shape");se(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Ll("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;De(l),s.removeInteractiveTarget(l),delete this._layers[c(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Ll("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=S(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Ll("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){In(s._container)},_bringToBack:function(s){Cn(s._container)}},$c=le.vml?Ll:pc,Nl=$i.extend({_initContainer:function(){this._container=$c("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=$c("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){De(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),ot(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=$c("path");s.options.className&&se(l,s.options.className),s.options.interactive&&se(l,"leaflet-interactive"),this._updateStyle(s),this._layers[c(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){De(s._path),s.removeInteractiveTarget(s._path),delete this._layers[c(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Io(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){In(s._path)},_bringToBack:function(s){Cn(s._path)}});le.vml&&Nl.include(DA);function xv(s){return le.svg||le.vml?new Nl(s):null}Pe.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Tv(s)||xv(s)}});var Ev=Qo.extend({initialize:function(s,l){Qo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ke(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function VA(s,l){return new Ev(s,l)}Nl.create=$c,Nl.pointsToPath=Io,Wi.geometryToLayer=jc,Wi.coordsToLatLng=op,Wi.coordsToLatLngs=Fc,Wi.latLngToCoords=ap,Wi.latLngsToCoords=Bc,Wi.getFeature=Yo,Wi.asFeature=zc,Pe.mergeOptions({boxZoom:!0});var Pv=_n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){De(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Wn(),Vo(),this._startPoint=this._map.mouseEventToContainerPoint(s),ye(document,{contextmenu:ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new te(this._point,this._startPoint),d=l.getSize();ot(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(De(this._box),We(this._container,"leaflet-crosshair")),gn(),jo(),ze(document,{contextmenu:ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pe.addInitHook("addHandler","boxZoom",Pv),Pe.mergeOptions({doubleClickZoom:!0});var Sv=_n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Pe.addInitHook("addHandler","doubleClickZoom",Sv),Pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Iv=_n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new $n(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ke(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,E=(p+l+d)%s-l-d,j=Math.abs(v+d)<Math.abs(E+d)?v:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,j=d.easeLinearity,H=v.multiplyBy(j/E),$=H.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,$),ie=H.multiplyBy(Q/$),pe=Q/(d.inertiaDeceleration*j),Se=ie.multiplyBy(-pe/2).round();!Se.x&&!Se.y?l.fire("moveend"):(Se=l._limitOffset(Se,l.options.maxBounds),V(function(){l.panBy(Se,{duration:pe,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Pe.addInitHook("addHandler","dragging",Iv),Pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Cv=_n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ye(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;ai(s)}}});Pe.addInitHook("addHandler","keyboard",Cv),Pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Av=_n.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Tl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),ai(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=d?Math.ceil(v/d)*d:v,j=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,j&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+j):s.setZoomAround(this._lastMousePos,l+j))}});Pe.addInitHook("addHandler","scrollWheelZoom",Av);var jA=600;Pe.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var kv=_n.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new G(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",ft),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),jA),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ze(document,"touchend",ft),ze(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new G(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Pe.addInitHook("addHandler","tapHold",kv),Pe.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var bv=_n.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),ft(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var E=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var j=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(j,this,!0),ft(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pe.addInitHook("addHandler","touchZoom",bv),Pe.BoxZoom=Pv,Pe.DoubleClickZoom=Sv,Pe.Drag=Iv,Pe.Keyboard=Cv,Pe.ScrollWheelZoom=Av,Pe.TapHold=kv,Pe.TouchZoom=bv,n.Bounds=te,n.Browser=le,n.CRS=lt,n.Canvas=wv,n.Circle=sp,n.CircleMarker=Vc,n.Class=ne,n.Control=sn,n.DivIcon=_v,n.DivOverlay=di,n.DomEvent=Vs,n.DomUtil=rp,n.Draggable=$n,n.Evented=Ae,n.FeatureGroup=Ui,n.GeoJSON=Wi,n.GridLayer=Rl,n.Handler=_n,n.Icon=Ko,n.ImageOverlay=Uc,n.LatLng=Ee,n.LatLngBounds=Ge,n.Layer=Gn,n.LayerGroup=Zo,n.LineUtil=kn,n.Map=Pe,n.Marker=Dc,n.Mixin=Mc,n.Path=Pr,n.Point=G,n.PolyUtil=$o,n.Polygon=Qo,n.Polyline=Hi,n.Popup=Hc,n.PosAnimation=El,n.Projection=hi,n.Rectangle=Ev,n.Renderer=$i,n.SVG=Nl,n.SVGOverlay=gv,n.TileLayer=Xo,n.Tooltip=Wc,n.Transformation=mn,n.Util=M,n.VideoOverlay=mv,n.bind=a,n.bounds=xe,n.canvas=Tv,n.circle=PA,n.circleMarker=EA,n.control=ui,n.divIcon=NA,n.extend=r,n.featureGroup=wA,n.geoJSON=pv,n.geoJson=CA,n.gridLayer=MA,n.icon=TA,n.imageOverlay=AA,n.latLng=de,n.latLngBounds=ke,n.layerGroup=vA,n.map=zo,n.marker=xA,n.point=J,n.polygon=IA,n.polyline=SA,n.popup=RA,n.rectangle=VA,n.setOptions=k,n.stamp=c,n.svg=xv,n.svgOverlay=bA,n.tileLayer=yv,n.tooltip=LA,n.transformation=Ni,n.version=i,n.videoOverlay=kA;var FA=window.L;n.noConflict=function(){return window.L=FA,this},window.L=n})})(Yg,Yg.exports);var al=Yg.exports;const mA=z1(al);function Kf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function gA(t,e){return e==null?function(i,r){const o=F.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=F.useRef();o.current||(o.current=t(i,r));const a=F.useRef(i),{instance:u}=o.current;return F.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function _A(t,e){F.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function n6(t){return function(n){const i=uv(),r=t(cv(n,i),i);return QB(i.map,n.attribution),pA(r.current,n.eventHandlers),_A(r.current,i),r}}function i6(t,e){const n=F.useRef();F.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function r6(t){return function(n){const i=uv(),r=t(cv(n,i),i);return pA(r.current,n.eventHandlers),_A(r.current,i),i6(r.current,n),r}}function hv(t,e){const n=gA(t,e),i=r6(n);return e6(i)}function s6(t,e){const n=gA(t,e),i=n6(n);return t6(i)}function o6(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Qf(){return uv().map}function a6(t){const e=Qf();return F.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const Xg=hv(function({center:e,children:n,...i},r){const o=new al.CircleMarker(e,i);return Kf(o,lv(r,{overlayContainer:o}))},YB);function Jg(){return Jg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Jg.apply(this,arguments)}function l6({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:c,zoom:f,...m},g){const[y]=F.useState({className:r,id:o,style:u}),[T,b]=F.useState(null);F.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const k=F.useCallback(C=>{if(C!==null&&T===null){const P=new al.Map(C,m);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),c!=null&&P.whenReady(c),b(JB(P))}},[]);F.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const D=T?no.createElement(fA,{value:T},i):a??null;return no.createElement("div",Jg({},y,{ref:k}),D)}const u6=F.forwardRef(l6),c6=hv(function({positions:e,...n},i){const r=new al.Polygon(e,n);return Kf(r,lv(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),h6=hv(function({positions:e,...n},i){const r=new al.Polyline(e,n);return Kf(r,lv(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),d6=s6(function({url:e,...n},i){const r=new al.TileLayer(e,cv(n,i));return Kf(r,i)},function(e,n,i){o6(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete mA.Icon.Default.prototype._getIconUrl;mA.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function f6({devMode:t}){const[e,n]=F.useState(iA),[i,r]=F.useState(nA);return a6({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?x.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:x.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[x.jsxs("div",{children:["zoom: ",e]}),x.jsxs("div",{children:["lat: ",i[0]]}),x.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function p6({hood:t}){const e=Qf();return F.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function m6({onShow:t}){const e=Qf(),[n,i]=F.useState(null);if(F.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o){const a=JSON.parse(o);i(a),localStorage.removeItem("streetart-ctf-lastCapture"),a.location&&setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500)}},[e,t]),!n)return null;const r=n.team==="red"?"#ff6b6b":"#4dabf7";return x.jsx(Xg,{center:n.location,radius:30,pathOptions:{color:r,fillColor:r,fillOpacity:.3,weight:3,className:"capture-pulse"}})}function g6(){const t=Qf(),[e,n]=F.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return x.jsx(fe.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:x.jsx(fe.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:x.jsx(OB,{size:20,className:"text-white"})})})}function _6({point:t,onClose:e}){const n=t.capturedBy?sa(t.capturedBy):"#495057",i=sv(t),r=t.status==="ghost";return x.jsx(fe.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:x.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${n}40`},children:[x.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:x.jsx(qB,{size:16,className:"text-white/50"})}),x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${n}20`,border:`1px solid ${n}40`},children:r?x.jsx(jB,{size:20,className:"text-white/30"}):t.capturedBy?x.jsx(av,{size:20,style:{color:n}}):x.jsx(aA,{size:20,style:{color:n}})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),r&&x.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),x.jsx("p",{className:"text-sm text-white/40",children:t.area}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&x.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),x.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[x.jsxs("span",{className:"text-lg font-bold",style:{color:n},children:[i," pts"]}),t.capturedBy?x.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:n},children:["Captured by ",t.capturedBy]}):x.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:r?"Gone":"Unclaimed"})]})]})]})]})})}const fm=[null,...is];function y6(){const{player:t,artPoints:e,captureArt:n}=Ts(),[i,r]=F.useState(null),[o,a]=F.useState(!1),[u,c]=F.useState(e),[f,m]=F.useState(Qg.vysocany);F.useEffect(()=>{c(e)},[e]);const g=C=>{o?c(P=>P.map(S=>{if(S.id===C.id){const q=(fm.indexOf(S.capturedBy)+1)%fm.length;return{...S,capturedBy:fm[q]}}return S})):r(C)},y=()=>{c(e.map(C=>({...C,capturedBy:null})))},T=o?u:e,b=F.useMemo(()=>IB(T),[T]),k=F.useMemo(()=>rA(T),[T]),D=Object.values(k).reduce((C,P)=>C+P,0)||1;return x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:Object.entries(k).map(([C,P])=>{const S=P/D*100;return x.jsx(fe.div,{className:"h-full",style:{backgroundColor:sa(C)},initial:{width:0},animate:{width:`${S}%`},transition:{duration:.8}},C)})}),x.jsxs("div",{className:"absolute top-10 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Teams"}),x.jsx("div",{className:"space-y-1.5",children:is.map(C=>x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:sa(C)}}),x.jsx("span",{className:"text-xs text-white/70 capitalize font-medium",children:C}),x.jsxs("span",{className:"text-xs text-white/40 ml-auto",children:[k[C]||0," pts"]})]},C))}),x.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Points"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white/40"}),x.jsx("span",{className:"text-xs text-white/40",children:"Active"})]}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-dashed border-white/20"}),x.jsx("span",{className:"text-xs text-white/30",children:"Ghost"})]})]}),x.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),x.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),x.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(Qg).map(C=>x.jsx(fe.button,{onClick:()=>m(C),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f.id===C.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:C.name},C.id))}),x.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[x.jsx(fe.button,{onClick:()=>a(!o),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${o?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:x.jsx(MB,{size:18})}),o&&x.jsx(fe.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:y,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:x.jsx(lA,{size:18})})]}),x.jsx(Cd,{children:o&&x.jsx(fe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:x.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),x.jsxs(u6,{center:nA,zoom:iA,minZoom:wB,maxZoom:TB,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[x.jsx(d6,{url:D1.tileUrl,attribution:D1.attribution}),x.jsx(g6,{}),x.jsx(f6,{devMode:o}),x.jsx(p6,{hood:f}),x.jsx(m6,{}),x.jsx(h6,{positions:V1.map(C=>C.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),V1.map(C=>x.jsx(Xg,{center:C.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},C.name)),Object.entries(b).map(([C,P])=>P.map((S,B)=>x.jsx(c6,{positions:S.polygon,pathOptions:{color:sa(C),fillColor:sa(C),fillOpacity:.25,weight:2,opacity:.7,interactive:!1}},`${C}-territory-${B}`))),T.map(C=>{const P=C.capturedBy?sa(C.capturedBy):"#ffffff",S=!!C.capturedBy,B=C.status==="ghost";return x.jsx(Xg,{center:C.location,radius:8,pathOptions:{color:o?"#a855f7":B?"#6b7280":P,fillColor:S?P:B?"#374151":"#0a0a0f",fillOpacity:B?.4:S?.8:1,weight:o?3:2,opacity:B?.5:1,dashArray:B?"3, 3":void 0},eventHandlers:{click:q=>{q.originalEvent.stopPropagation(),g(C)}}},C.id)})]}),x.jsx(Cd,{children:i&&x.jsx(_6,{point:i,onClose:()=>r(null)})})]})}function v6(){return x.jsx(fe.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:x.jsx(y6,{})})}const w6=51,T6=50;function x6({size:t=120,className:e=""}){const[n,i]=F.useState(0);F.useEffect(()=>{const a=setInterval(()=>{i(u=>(u+1)%w6)},T6);return()=>clearInterval(a)},[]);const r=String(n).padStart(5,"0");return x.jsx("div",{className:`flex items-center justify-center ${e}`,children:x.jsx("img",{src:`/street-art-ctf/chump/frame_${r}.png`,alt:"Loading...",width:t,height:t,style:{imageRendering:"pixelated"}})})}function E6(){const{player:t}=Ts(),[e,n]=F.useState(!1);return F.useEffect(()=>{t.team&&!e&&(n(!0),setTimeout(()=>{const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"},300))},[t.team,e]),t.team?x.jsx(fe.div,{className:"flex-1 flex items-center justify-center p-8 bg-black",initial:{opacity:0},animate:{opacity:1},children:x.jsxs("div",{className:"text-center",children:[x.jsx(x6,{size:150,className:"mb-4"}),x.jsx("h2",{className:"text-xl font-bold text-white",children:"Opening Scanner..."})]})}):x.jsx(fe.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:x.jsx(RB,{size:36,className:"text-amber-500"})}),x.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),x.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start scanning street art"})]})})}const P6=[{id:1,name:"StreetKing",team:"red",score:1250,captures:12},{id:2,name:"ArtHunter",team:"blue",score:980,captures:9},{id:3,name:"SprayQueen",team:"red",score:650,captures:6},{id:4,name:"UrbanExplorer",team:"blue",score:580,captures:5},{id:5,name:"WallWalker",team:"red",score:420,captures:4},{id:6,name:"NightOwl",team:"blue",score:380,captures:3}],S6={red:"Crimson",blue:"Azure"};function I6({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return x.jsxs(fe.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[x.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${Xe[t].hex}15 0%, transparent 60%)`}}),x.jsx(fe.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:Xe[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),x.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${Xe[t].hex}30`},children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?x.jsx(DB,{size:20,className:"text-white"}):x.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-semibold text-white",children:S6[t]}),x.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[x.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Xe[t].hex}}),x.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-2xl font-bold",style:{color:Xe[t].hex},children:e.toLocaleString()}),x.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function C6({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return x.jsxs(fe.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[x.jsx("div",{className:"w-8 flex justify-center",children:i?x.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:x.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):x.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),x.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${Xe[t.team].hex}20`,color:Xe[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&x.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),x.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),x.jsx("div",{className:"text-right",children:x.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function A6(){var c;const{teamScores:t,player:e}=Ts(),i=Object.entries(t).filter(([f])=>Xe[f]).sort((f,m)=>m[1]-f[1]),r=Object.values(t).reduce((f,m)=>f+m,0)||1,o=P6.filter(f=>Xe[f.team]);e.team&&e.score>0&&o.push({id:"current",name:e.name,team:e.team,score:e.score,captures:((c=e.capturedArt)==null?void 0:c.length)||0});const a=o.sort((f,m)=>m.score-f.score),u={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return x.jsxs(fe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:u,children:[x.jsx(fe.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:x.jsx(Zf,{size:20,className:"text-white"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),x.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(WB,{size:16,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),x.jsx("div",{className:"space-y-3",children:i.map(([f,m],g)=>x.jsx(I6,{team:f,score:m,rank:g,totalScore:r},f))})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(VB,{size:16,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),x.jsx("div",{className:"space-y-2",children:a.map((f,m)=>x.jsx(C6,{player:f,rank:m,isCurrentPlayer:f.id==="current"},f.id))})]})]})}function pm({icon:t,label:e,value:n,color:i}){return x.jsxs(fe.div,{className:"glass rounded-xl p-4 text-center",whileHover:{scale:1.02},children:[x.jsx(t,{size:24,className:"mx-auto mb-2",style:{color:i}}),x.jsx("p",{className:"text-2xl font-bold",children:n}),x.jsx("p",{className:"text-xs text-gray-400",children:e})]})}function k6({art:t}){var e,n;return x.jsxs(fe.div,{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[x.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${(e=Xe[t.capturedBy])==null?void 0:e.hex}30`},children:x.jsx(Yd,{size:20,style:{color:(n=Xe[t.capturedBy])==null?void 0:n.hex}})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-sm",children:t.name}),x.jsxs("p",{className:"text-xs text-gray-400",children:[t.points," pts"]})]}),x.jsx(Oa,{size:18,className:"text-gray-500"})]})}function mm({icon:t,label:e,onClick:n}){return x.jsxs(fe.button,{onClick:n,className:"w-full flex items-center gap-3 p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-colors",whileTap:{scale:.98},children:[x.jsx(t,{size:20,className:"text-gray-400"}),x.jsx("span",{className:"flex-1 text-left",children:e}),x.jsx(Oa,{size:18,className:"text-gray-500"})]})}function b6(){const{player:t,artPoints:e,joinTeam:n,resetAll:i}=Ts(),[r,o]=F.useState(!1),[a,u]=F.useState(t.name),c=(e==null?void 0:e.filter(m=>t.capturedArt.includes(m.id)))||[],f=t.team?Xe[t.team].hex:"#64748b";return x.jsxs(fe.div,{className:"flex-1 overflow-y-auto pb-20 px-4 pt-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[x.jsxs("div",{className:"text-center mb-6",children:[x.jsxs(fe.div,{className:"relative inline-block",whileHover:{scale:1.05},children:[x.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-3",style:{background:`linear-gradient(135deg, ${f}50, ${f}20)`,border:`3px solid ${f}`},children:x.jsx(cA,{size:40,style:{color:f}})}),x.jsx("button",{className:"absolute bottom-2 right-0 w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:x.jsx(oA,{size:14})})]}),r?x.jsx("input",{type:"text",value:a,onChange:m=>u(m.target.value),onBlur:()=>o(!1),className:"text-xl font-bold bg-transparent border-b-2 border-white/30 text-center outline-none",autoFocus:!0}):x.jsx("h1",{className:"text-xl font-bold cursor-pointer",onClick:()=>o(!0),children:t.name}),t.team&&x.jsxs("p",{className:"text-sm mt-1",style:{color:f},children:[t.team.charAt(0).toUpperCase()+t.team.slice(1)," Team"]})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[x.jsx(pm,{icon:Zf,label:"Score",value:t.score,color:"#eab308"}),x.jsx(pm,{icon:Yd,label:"Captures",value:c.length,color:"#22c55e"}),x.jsx(pm,{icon:aA,label:"Sectors",value:"3",color:"#3b82f6"})]}),c.length>0&&x.jsxs("div",{className:"mb-6",children:[x.jsxs("h2",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[x.jsx(Yd,{size:16})," YOUR CAPTURES"]}),x.jsx("div",{className:"space-y-2",children:c.map(m=>x.jsx(k6,{art:m},m.id))})]}),!t.team&&x.jsxs("div",{className:"mb-6",children:[x.jsx("h2",{className:"text-sm font-medium text-gray-400 mb-3",children:"SELECT YOUR TEAM"}),x.jsx("div",{className:"grid grid-cols-2 gap-2",children:["red","blue"].map(m=>x.jsxs(fe.button,{onClick:()=>n(m),className:"p-4 rounded-xl bg-white/5 text-center",style:{borderColor:Xe[m].hex,borderWidth:2},whileTap:{scale:.95},children:[x.jsx("div",{className:"w-8 h-8 rounded-full mx-auto mb-2",style:{backgroundColor:Xe[m].hex}}),x.jsx("p",{className:"text-sm font-medium capitalize",children:m==="red"?"Crimson":"Azure"})]},m))})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("h2",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[x.jsx(zB,{size:16})," SETTINGS"]}),x.jsx(mm,{icon:LB,label:"Notifications"}),x.jsx(mm,{icon:UB,label:"Privacy"}),x.jsx(mm,{icon:BB,label:"Reset Game Data",onClick:i})]}),x.jsx("p",{className:"text-center text-xs text-gray-500 mt-6",children:"Street Art CTF v1.0.0"})]})}const R6=[{path:"/",icon:FB,label:"Home"},{path:"/map",icon:ov,label:"Map"},{path:"/scanner",icon:uA,label:"Scan"},{path:"/leaderboard",icon:Zf,label:"Ranks"},{path:"/profile",icon:cA,label:"You"}];function L6(){return x.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[x.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),x.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:R6.map(({path:t,icon:e,label:n})=>x.jsx(P2,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>x.jsxs(fe.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&x.jsx(fe.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),x.jsx(fe.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:x.jsx(e,{size:20,strokeWidth:i?2.5:2})}),x.jsx(fe.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function xh({children:t}){const{player:e}=Ts();return e.team&&e.name&&e.name!=="Street Artist"?t:x.jsx(uP,{to:"/onboarding",replace:!0})}function N6(){const t=_o(),{player:e}=Ts(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding"||t.pathname==="/scanner";return x.jsxs("div",{className:"h-full w-full flex flex-col",children:[x.jsx(Cd,{mode:"wait",children:x.jsxs(d2,{location:t,children:[x.jsx(zs,{path:"/onboarding",element:x.jsx(ZB,{})}),x.jsx(zs,{path:"/",element:n?x.jsx(KB,{}):x.jsx(uP,{to:"/onboarding",replace:!0})}),x.jsx(zs,{path:"/map",element:x.jsx(xh,{children:x.jsx(v6,{})})}),x.jsx(zs,{path:"/scanner",element:x.jsx(xh,{children:x.jsx(E6,{})})}),x.jsx(zs,{path:"/leaderboard",element:x.jsx(xh,{children:x.jsx(A6,{})})}),x.jsx(zs,{path:"/profile",element:x.jsx(xh,{children:x.jsx(b6,{})})})]},t.pathname)}),!i&&n&&x.jsx(L6,{})]})}function M6(){return x.jsx(AB,{children:x.jsx(N6,{})})}gm.createRoot(document.getElementById("root")).render(x.jsx(no.StrictMode,{children:x.jsx(w2,{children:x.jsx(M6,{})})}));
