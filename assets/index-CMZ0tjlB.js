function kA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var bA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var T1={exports:{}},Kd={},E1={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=Symbol.for("react.element"),RA=Symbol.for("react.portal"),LA=Symbol.for("react.fragment"),NA=Symbol.for("react.strict_mode"),MA=Symbol.for("react.profiler"),OA=Symbol.for("react.provider"),DA=Symbol.for("react.context"),VA=Symbol.for("react.forward_ref"),jA=Symbol.for("react.suspense"),FA=Symbol.for("react.memo"),BA=Symbol.for("react.lazy"),Ev=Symbol.iterator;function zA(t){return t===null||typeof t!="object"?null:(t=Ev&&t[Ev]||t["@@iterator"],typeof t=="function"?t:null)}var P1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S1=Object.assign,C1={};function Qa(t,e,n){this.props=t,this.context=e,this.refs=C1,this.updater=n||P1}Qa.prototype.isReactComponent={};Qa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function I1(){}I1.prototype=Qa.prototype;function Gg(t,e,n){this.props=t,this.context=e,this.refs=C1,this.updater=n||P1}var Zg=Gg.prototype=new I1;Zg.constructor=Gg;S1(Zg,Qa.prototype);Zg.isPureReactComponent=!0;var Pv=Array.isArray,A1=Object.prototype.hasOwnProperty,Kg={current:null},k1={key:!0,ref:!0,__self:!0,__source:!0};function b1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)A1.call(e,i)&&!k1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Qu,type:t,key:o,ref:a,props:r,_owner:Kg.current}}function UA(t,e){return{$$typeof:Qu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qu}function HA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sv=/\/+/g;function rp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HA(""+t.key):e.toString(36)}function Ph(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Qu:case RA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+rp(a,0):i,Pv(r)?(n="",t!=null&&(n=t.replace(Sv,"$&/")+"/"),Ph(r,e,n,"",function(f){return f})):r!=null&&(Qg(r)&&(r=UA(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Sv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Pv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+rp(o,u);a+=Ph(o,e,n,h,r)}else if(h=zA(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+rp(o,u++),a+=Ph(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Kc(t,e,n){if(t==null)return t;var i=[],r=0;return Ph(t,i,"","",function(o){return e.call(n,o,r++)}),i}function WA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},Sh={transition:null},$A={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:Sh,ReactCurrentOwner:Kg};function R1(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Kc,forEach:function(t,e,n){Kc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kc(t,function(){e++}),e},toArray:function(t){return Kc(t,function(e){return e})||[]},only:function(t){if(!Qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=Qa;be.Fragment=LA;be.Profiler=MA;be.PureComponent=Gg;be.StrictMode=NA;be.Suspense=jA;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$A;be.act=R1;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=S1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Kg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)A1.call(e,h)&&!k1.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Qu,type:t.type,key:r,ref:o,props:i,_owner:a}};be.createContext=function(t){return t={$$typeof:DA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OA,_context:t},t.Consumer=t};be.createElement=b1;be.createFactory=function(t){var e=b1.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:VA,render:t}};be.isValidElement=Qg;be.lazy=function(t){return{$$typeof:BA,_payload:{_status:-1,_result:t},_init:WA}};be.memo=function(t,e){return{$$typeof:FA,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Sh.transition;Sh.transition={};try{t()}finally{Sh.transition=e}};be.unstable_act=R1;be.useCallback=function(t,e){return on.current.useCallback(t,e)};be.useContext=function(t){return on.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return on.current.useDeferredValue(t)};be.useEffect=function(t,e){return on.current.useEffect(t,e)};be.useId=function(){return on.current.useId()};be.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return on.current.useMemo(t,e)};be.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};be.useRef=function(t){return on.current.useRef(t)};be.useState=function(t){return on.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return on.current.useTransition()};be.version="18.3.1";E1.exports=be;var j=E1.exports;const eo=x1(j),qA=kA({__proto__:null,default:eo},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GA=j,ZA=Symbol.for("react.element"),KA=Symbol.for("react.fragment"),QA=Object.prototype.hasOwnProperty,YA=GA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XA={key:!0,ref:!0,__self:!0,__source:!0};function L1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)QA.call(e,i)&&!XA.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:ZA,type:t,key:o,ref:a,props:r,_owner:YA.current}}Kd.Fragment=KA;Kd.jsx=L1;Kd.jsxs=L1;T1.exports=Kd;var x=T1.exports,am={},N1={exports:{}},An={},M1={exports:{}},O1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,de){var ee=G.length;G.push(de);e:for(;0<ee;){var ie=ee-1>>>1,te=G[ie];if(0<r(te,de))G[ie]=de,G[ee]=te,ee=ie;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var de=G[0],ee=G.pop();if(ee!==de){G[0]=ee;e:for(var ie=0,te=G.length,re=te>>>1;ie<re;){var le=2*(ie+1)-1,ae=G[le],J=le+1,me=G[J];if(0>r(ae,ee))J<te&&0>r(me,ae)?(G[ie]=me,G[J]=ee,ie=J):(G[ie]=ae,G[le]=ee,ie=le);else if(J<te&&0>r(me,ee))G[ie]=me,G[J]=ee,ie=J;else break e}}return de}function r(G,de){var ee=G.sortIndex-de.sortIndex;return ee!==0?ee:G.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,v=3,T=!1,k=!1,b=!1,F=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var de=n(f);de!==null;){if(de.callback===null)i(f);else if(de.startTime<=G)i(f),de.sortIndex=de.expirationTime,e(h,de);else break;de=n(f)}}function B(G){if(b=!1,S(G),!k)if(n(h)!==null)k=!0,Ie(q);else{var de=n(f);de!==null&&ct(B,de.startTime-G)}}function q(G,de){k=!1,b&&(b=!1,I(C),C=-1),T=!0;var ee=v;try{for(S(de),g=n(h);g!==null&&(!(g.expirationTime>de)||G&&!D());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,v=g.priorityLevel;var te=ie(g.expirationTime<=de);de=t.unstable_now(),typeof te=="function"?g.callback=te:g===n(h)&&i(h),S(de)}else i(h);g=n(h)}if(g!==null)var re=!0;else{var le=n(f);le!==null&&ct(B,le.startTime-de),re=!1}return re}finally{g=null,v=ee,T=!1}}var Z=!1,R=null,C=-1,N=5,O=-1;function D(){return!(t.unstable_now()-O<N)}function z(){if(R!==null){var G=t.unstable_now();O=G;var de=!0;try{de=R(!0,G)}finally{de?M():(Z=!1,R=null)}}else Z=!1}var M;if(typeof P=="function")M=function(){P(z)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ft=xe.port2;xe.port1.onmessage=z,M=function(){ft.postMessage(null)}}else M=function(){F(z,0)};function Ie(G){R=G,Z||(Z=!0,M())}function ct(G,de){C=F(function(){G(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){k||T||(k=!0,Ie(q))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var de=3;break;default:de=v}var ee=v;v=de;try{return G()}finally{v=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,de){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ee=v;v=G;try{return de()}finally{v=ee}},t.unstable_scheduleCallback=function(G,de,ee){var ie=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ie+ee:ie):ee=ie,G){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ee+te,G={id:m++,callback:de,priorityLevel:G,startTime:ee,expirationTime:te,sortIndex:-1},ee>ie?(G.sortIndex=ee,e(f,G),n(h)===null&&G===n(f)&&(b?(I(C),C=-1):b=!0,ct(B,ee-ie))):(G.sortIndex=te,e(h,G),k||T||(k=!0,Ie(q))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var de=v;return function(){var ee=v;v=de;try{return G.apply(this,arguments)}finally{v=ee}}}})(O1);M1.exports=O1;var JA=M1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek=j,Sn=JA;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D1=new Set,_u={};function ho(t,e){Na(t,e),Na(t+"Capture",e)}function Na(t,e){for(_u[t]=e,t=0;t<e.length;t++)D1.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lm=Object.prototype.hasOwnProperty,tk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cv={},Iv={};function nk(t){return lm.call(Iv,t)?!0:lm.call(Cv,t)?!1:tk.test(t)?Iv[t]=!0:(Cv[t]=!0,!1)}function ik(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rk(t,e,n,i){if(e===null||typeof e>"u"||ik(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zt[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zt[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zt[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zt[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zt[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zt[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zt[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zt[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zt[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yg=/[\-:]([a-z])/g;function Xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yg,Xg);zt[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yg,Xg);zt[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yg,Xg);zt[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zt[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});zt.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zt[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jg(t,e,n,i){var r=zt.hasOwnProperty(e)?zt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rk(e,n,r,i)&&(n=null),i||r===null?nk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var hr=ek.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qc=Symbol.for("react.element"),na=Symbol.for("react.portal"),ia=Symbol.for("react.fragment"),ey=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),V1=Symbol.for("react.provider"),j1=Symbol.for("react.context"),ty=Symbol.for("react.forward_ref"),cm=Symbol.for("react.suspense"),hm=Symbol.for("react.suspense_list"),ny=Symbol.for("react.memo"),kr=Symbol.for("react.lazy"),F1=Symbol.for("react.offscreen"),Av=Symbol.iterator;function Nl(t){return t===null||typeof t!="object"?null:(t=Av&&t[Av]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,sp;function Hl(t){if(sp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sp=e&&e[1]||""}return`
`+sp+t}var op=!1;function ap(t,e){if(!t||op)return"";op=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{op=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Hl(t):""}function sk(t){switch(t.tag){case 5:return Hl(t.type);case 16:return Hl("Lazy");case 13:return Hl("Suspense");case 19:return Hl("SuspenseList");case 0:case 2:case 15:return t=ap(t.type,!1),t;case 11:return t=ap(t.type.render,!1),t;case 1:return t=ap(t.type,!0),t;default:return""}}function dm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ia:return"Fragment";case na:return"Portal";case um:return"Profiler";case ey:return"StrictMode";case cm:return"Suspense";case hm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j1:return(t.displayName||"Context")+".Consumer";case V1:return(t._context.displayName||"Context")+".Provider";case ty:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ny:return e=t.displayName||null,e!==null?e:dm(t.type)||"Memo";case kr:e=t._payload,t=t._init;try{return dm(t(e))}catch{}}return null}function ok(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dm(e);case 8:return e===ey?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ss(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ak(t){var e=B1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yc(t){t._valueTracker||(t._valueTracker=ak(t))}function z1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=B1(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Zh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fm(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ss(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function U1(t,e){e=e.checked,e!=null&&Jg(t,"checked",e,!1)}function pm(t,e){U1(t,e);var n=ss(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mm(t,e.type,n):e.hasOwnProperty("defaultValue")&&mm(t,e.type,ss(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mm(t,e,n){(e!=="number"||Zh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wl=Array.isArray;function va(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ss(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function gm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Wl(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ss(n)}}function H1(t,e){var n=ss(e.value),i=ss(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Lv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function W1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ym(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?W1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xc,$1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xc=Xc||document.createElement("div"),Xc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lk=["Webkit","ms","Moz","O"];Object.keys(Jl).forEach(function(t){lk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jl[e]=Jl[t]})});function q1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jl.hasOwnProperty(t)&&Jl[t]?(""+e).trim():e+"px"}function G1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=q1(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var uk=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _m(t,e){if(e){if(uk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function vm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wm=null;function iy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xm=null,wa=null,xa=null;function Nv(t){if(t=Ju(t)){if(typeof xm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=ef(e),xm(t.stateNode,t.type,e))}}function Z1(t){wa?xa?xa.push(t):xa=[t]:wa=t}function K1(){if(wa){var t=wa,e=xa;if(xa=wa=null,Nv(t),e)for(t=0;t<e.length;t++)Nv(e[t])}}function Q1(t,e){return t(e)}function Y1(){}var lp=!1;function X1(t,e,n){if(lp)return t(e,n);lp=!0;try{return Q1(t,e,n)}finally{lp=!1,(wa!==null||xa!==null)&&(Y1(),K1())}}function wu(t,e){var n=t.stateNode;if(n===null)return null;var i=ef(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Tm=!1;if(tr)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){Tm=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{Tm=!1}function ck(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var eu=!1,Kh=null,Qh=!1,Em=null,hk={onError:function(t){eu=!0,Kh=t}};function dk(t,e,n,i,r,o,a,u,h){eu=!1,Kh=null,ck.apply(hk,arguments)}function fk(t,e,n,i,r,o,a,u,h){if(dk.apply(this,arguments),eu){if(eu){var f=Kh;eu=!1,Kh=null}else throw Error(X(198));Qh||(Qh=!0,Em=f)}}function fo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function J1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mv(t){if(fo(t)!==t)throw Error(X(188))}function pk(t){var e=t.alternate;if(!e){if(e=fo(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Mv(r),t;if(o===i)return Mv(r),e;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function eT(t){return t=pk(t),t!==null?tT(t):null}function tT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tT(t);if(e!==null)return e;t=t.sibling}return null}var nT=Sn.unstable_scheduleCallback,Ov=Sn.unstable_cancelCallback,mk=Sn.unstable_shouldYield,gk=Sn.unstable_requestPaint,gt=Sn.unstable_now,yk=Sn.unstable_getCurrentPriorityLevel,ry=Sn.unstable_ImmediatePriority,iT=Sn.unstable_UserBlockingPriority,Yh=Sn.unstable_NormalPriority,_k=Sn.unstable_LowPriority,rT=Sn.unstable_IdlePriority,Qd=null,wi=null;function vk(t){if(wi&&typeof wi.onCommitFiberRoot=="function")try{wi.onCommitFiberRoot(Qd,t,void 0,(t.current.flags&128)===128)}catch{}}var si=Math.clz32?Math.clz32:Tk,wk=Math.log,xk=Math.LN2;function Tk(t){return t>>>=0,t===0?32:31-(wk(t)/xk|0)|0}var Jc=64,eh=4194304;function $l(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=$l(u):(o&=a,o!==0&&(i=$l(o)))}else a=n&~r,a!==0?i=$l(a):o!==0&&(i=$l(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-si(e),r=1<<n,i|=t[n],e&=~r;return i}function Ek(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-si(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=Ek(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Pm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sT(){var t=Jc;return Jc<<=1,!(Jc&4194240)&&(Jc=64),t}function up(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-si(e),t[e]=n}function Sk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-si(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function sy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-si(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var qe=0;function oT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aT,oy,lT,uT,cT,Sm=!1,th=[],Ur=null,Hr=null,Wr=null,xu=new Map,Tu=new Map,Lr=[],Ck="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dv(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":xu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(e.pointerId)}}function Ol(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Ju(e),e!==null&&oy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Ik(t,e,n,i,r){switch(e){case"focusin":return Ur=Ol(Ur,t,e,n,i,r),!0;case"dragenter":return Hr=Ol(Hr,t,e,n,i,r),!0;case"mouseover":return Wr=Ol(Wr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return xu.set(o,Ol(xu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Tu.set(o,Ol(Tu.get(o)||null,t,e,n,i,r)),!0}return!1}function hT(t){var e=Ws(t.target);if(e!==null){var n=fo(e);if(n!==null){if(e=n.tag,e===13){if(e=J1(n),e!==null){t.blockedOn=e,cT(t.priority,function(){lT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ch(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);wm=i,n.target.dispatchEvent(i),wm=null}else return e=Ju(n),e!==null&&oy(e),t.blockedOn=n,!1;e.shift()}return!0}function Vv(t,e,n){Ch(t)&&n.delete(e)}function Ak(){Sm=!1,Ur!==null&&Ch(Ur)&&(Ur=null),Hr!==null&&Ch(Hr)&&(Hr=null),Wr!==null&&Ch(Wr)&&(Wr=null),xu.forEach(Vv),Tu.forEach(Vv)}function Dl(t,e){t.blockedOn===e&&(t.blockedOn=null,Sm||(Sm=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,Ak)))}function Eu(t){function e(r){return Dl(r,t)}if(0<th.length){Dl(th[0],t);for(var n=1;n<th.length;n++){var i=th[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ur!==null&&Dl(Ur,t),Hr!==null&&Dl(Hr,t),Wr!==null&&Dl(Wr,t),xu.forEach(e),Tu.forEach(e),n=0;n<Lr.length;n++)i=Lr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)hT(n),n.blockedOn===null&&Lr.shift()}var Ta=hr.ReactCurrentBatchConfig,Jh=!0;function kk(t,e,n,i){var r=qe,o=Ta.transition;Ta.transition=null;try{qe=1,ay(t,e,n,i)}finally{qe=r,Ta.transition=o}}function bk(t,e,n,i){var r=qe,o=Ta.transition;Ta.transition=null;try{qe=4,ay(t,e,n,i)}finally{qe=r,Ta.transition=o}}function ay(t,e,n,i){if(Jh){var r=Cm(t,e,n,i);if(r===null)vp(t,e,i,ed,n),Dv(t,i);else if(Ik(r,t,e,n,i))i.stopPropagation();else if(Dv(t,i),e&4&&-1<Ck.indexOf(t)){for(;r!==null;){var o=Ju(r);if(o!==null&&aT(o),o=Cm(t,e,n,i),o===null&&vp(t,e,i,ed,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else vp(t,e,i,null,n)}}var ed=null;function Cm(t,e,n,i){if(ed=null,t=iy(i),t=Ws(t),t!==null)if(e=fo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=J1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ed=t,null}function dT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yk()){case ry:return 1;case iT:return 4;case Yh:case _k:return 16;case rT:return 536870912;default:return 16}default:return 16}}var jr=null,ly=null,Ih=null;function fT(){if(Ih)return Ih;var t,e=ly,n=e.length,i,r="value"in jr?jr.value:jr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Ih=r.slice(t,1<i?1-i:void 0)}function Ah(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nh(){return!0}function jv(){return!1}function kn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?nh:jv,this.isPropagationStopped=jv,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nh)},persist:function(){},isPersistent:nh}),e}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uy=kn(Ya),Xu=lt({},Ya,{view:0,detail:0}),Rk=kn(Xu),cp,hp,Vl,Yd=lt({},Xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vl&&(Vl&&t.type==="mousemove"?(cp=t.screenX-Vl.screenX,hp=t.screenY-Vl.screenY):hp=cp=0,Vl=t),cp)},movementY:function(t){return"movementY"in t?t.movementY:hp}}),Fv=kn(Yd),Lk=lt({},Yd,{dataTransfer:0}),Nk=kn(Lk),Mk=lt({},Xu,{relatedTarget:0}),dp=kn(Mk),Ok=lt({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=kn(Ok),Vk=lt({},Ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jk=kn(Vk),Fk=lt({},Ya,{data:0}),Bv=kn(Fk),Bk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Uk[t])?!!e[t]:!1}function cy(){return Hk}var Wk=lt({},Xu,{key:function(t){if(t.key){var e=Bk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ah(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cy,charCode:function(t){return t.type==="keypress"?Ah(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ah(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$k=kn(Wk),qk=lt({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zv=kn(qk),Gk=lt({},Xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cy}),Zk=kn(Gk),Kk=lt({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qk=kn(Kk),Yk=lt({},Yd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xk=kn(Yk),Jk=[9,13,27,32],hy=tr&&"CompositionEvent"in window,tu=null;tr&&"documentMode"in document&&(tu=document.documentMode);var eb=tr&&"TextEvent"in window&&!tu,pT=tr&&(!hy||tu&&8<tu&&11>=tu),Uv=" ",Hv=!1;function mT(t,e){switch(t){case"keyup":return Jk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ra=!1;function tb(t,e){switch(t){case"compositionend":return gT(e);case"keypress":return e.which!==32?null:(Hv=!0,Uv);case"textInput":return t=e.data,t===Uv&&Hv?null:t;default:return null}}function nb(t,e){if(ra)return t==="compositionend"||!hy&&mT(t,e)?(t=fT(),Ih=ly=jr=null,ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pT&&e.locale!=="ko"?null:e.data;default:return null}}var ib={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ib[t.type]:e==="textarea"}function yT(t,e,n,i){Z1(i),e=td(e,"onChange"),0<e.length&&(n=new uy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var nu=null,Pu=null;function rb(t){AT(t,0)}function Xd(t){var e=aa(t);if(z1(e))return t}function sb(t,e){if(t==="change")return e}var _T=!1;if(tr){var fp;if(tr){var pp="oninput"in document;if(!pp){var $v=document.createElement("div");$v.setAttribute("oninput","return;"),pp=typeof $v.oninput=="function"}fp=pp}else fp=!1;_T=fp&&(!document.documentMode||9<document.documentMode)}function qv(){nu&&(nu.detachEvent("onpropertychange",vT),Pu=nu=null)}function vT(t){if(t.propertyName==="value"&&Xd(Pu)){var e=[];yT(e,Pu,t,iy(t)),X1(rb,e)}}function ob(t,e,n){t==="focusin"?(qv(),nu=e,Pu=n,nu.attachEvent("onpropertychange",vT)):t==="focusout"&&qv()}function ab(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xd(Pu)}function lb(t,e){if(t==="click")return Xd(e)}function ub(t,e){if(t==="input"||t==="change")return Xd(e)}function cb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ai=typeof Object.is=="function"?Object.is:cb;function Su(t,e){if(ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!lm.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function Gv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zv(t,e){var n=Gv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gv(n)}}function wT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xT(){for(var t=window,e=Zh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zh(t.document)}return e}function dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hb(t){var e=xT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wT(n.ownerDocument.documentElement,n)){if(i!==null&&dy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Zv(n,o);var a=Zv(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var db=tr&&"documentMode"in document&&11>=document.documentMode,sa=null,Im=null,iu=null,Am=!1;function Kv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Am||sa==null||sa!==Zh(i)||(i=sa,"selectionStart"in i&&dy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),iu&&Su(iu,i)||(iu=i,i=td(Im,"onSelect"),0<i.length&&(e=new uy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=sa)))}function ih(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oa={animationend:ih("Animation","AnimationEnd"),animationiteration:ih("Animation","AnimationIteration"),animationstart:ih("Animation","AnimationStart"),transitionend:ih("Transition","TransitionEnd")},mp={},TT={};tr&&(TT=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function Jd(t){if(mp[t])return mp[t];if(!oa[t])return t;var e=oa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in TT)return mp[t]=e[n];return t}var ET=Jd("animationend"),PT=Jd("animationiteration"),ST=Jd("animationstart"),CT=Jd("transitionend"),IT=new Map,Qv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(t,e){IT.set(t,e),ho(e,[t])}for(var gp=0;gp<Qv.length;gp++){var yp=Qv[gp],fb=yp.toLowerCase(),pb=yp[0].toUpperCase()+yp.slice(1);gs(fb,"on"+pb)}gs(ET,"onAnimationEnd");gs(PT,"onAnimationIteration");gs(ST,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(CT,"onTransitionEnd");Na("onMouseEnter",["mouseout","mouseover"]);Na("onMouseLeave",["mouseout","mouseover"]);Na("onPointerEnter",["pointerout","pointerover"]);Na("onPointerLeave",["pointerout","pointerover"]);ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function Yv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,fk(i,e,void 0,t),t.currentTarget=null}function AT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;Yv(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;Yv(r,u,f),o=h}}}if(Qh)throw t=Em,Qh=!1,Em=null,t}function Xe(t,e){var n=e[Nm];n===void 0&&(n=e[Nm]=new Set);var i=t+"__bubble";n.has(i)||(kT(e,t,2,!1),n.add(i))}function _p(t,e,n){var i=0;e&&(i|=4),kT(n,t,i,e)}var rh="_reactListening"+Math.random().toString(36).slice(2);function Cu(t){if(!t[rh]){t[rh]=!0,D1.forEach(function(n){n!=="selectionchange"&&(mb.has(n)||_p(n,!1,t),_p(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rh]||(e[rh]=!0,_p("selectionchange",!1,e))}}function kT(t,e,n,i){switch(dT(e)){case 1:var r=kk;break;case 4:r=bk;break;default:r=ay}n=r.bind(null,e,n,t),r=void 0,!Tm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function vp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Ws(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}X1(function(){var f=o,m=iy(n),g=[];e:{var v=IT.get(t);if(v!==void 0){var T=uy,k=t;switch(t){case"keypress":if(Ah(n)===0)break e;case"keydown":case"keyup":T=$k;break;case"focusin":k="focus",T=dp;break;case"focusout":k="blur",T=dp;break;case"beforeblur":case"afterblur":T=dp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Nk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Zk;break;case ET:case PT:case ST:T=Dk;break;case CT:T=Qk;break;case"scroll":T=Rk;break;case"wheel":T=Xk;break;case"copy":case"cut":case"paste":T=jk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=zv}var b=(e&4)!==0,F=!b&&t==="scroll",I=b?v!==null?v+"Capture":null:v;b=[];for(var P=f,S;P!==null;){S=P;var B=S.stateNode;if(S.tag===5&&B!==null&&(S=B,I!==null&&(B=wu(P,I),B!=null&&b.push(Iu(P,B,S)))),F)break;P=P.return}0<b.length&&(v=new T(v,k,null,n,m),g.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==wm&&(k=n.relatedTarget||n.fromElement)&&(Ws(k)||k[nr]))break e;if((T||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,T?(k=n.relatedTarget||n.toElement,T=f,k=k?Ws(k):null,k!==null&&(F=fo(k),k!==F||k.tag!==5&&k.tag!==6)&&(k=null)):(T=null,k=f),T!==k)){if(b=Fv,B="onMouseLeave",I="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(b=zv,B="onPointerLeave",I="onPointerEnter",P="pointer"),F=T==null?v:aa(T),S=k==null?v:aa(k),v=new b(B,P+"leave",T,n,m),v.target=F,v.relatedTarget=S,B=null,Ws(m)===f&&(b=new b(I,P+"enter",k,n,m),b.target=S,b.relatedTarget=F,B=b),F=B,T&&k)t:{for(b=T,I=k,P=0,S=b;S;S=Qo(S))P++;for(S=0,B=I;B;B=Qo(B))S++;for(;0<P-S;)b=Qo(b),P--;for(;0<S-P;)I=Qo(I),S--;for(;P--;){if(b===I||I!==null&&b===I.alternate)break t;b=Qo(b),I=Qo(I)}b=null}else b=null;T!==null&&Xv(g,v,T,b,!1),k!==null&&F!==null&&Xv(g,F,k,b,!0)}}e:{if(v=f?aa(f):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var q=sb;else if(Wv(v))if(_T)q=ub;else{q=ab;var Z=ob}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(q=lb);if(q&&(q=q(t,f))){yT(g,q,n,m);break e}Z&&Z(t,v,f),t==="focusout"&&(Z=v._wrapperState)&&Z.controlled&&v.type==="number"&&mm(v,"number",v.value)}switch(Z=f?aa(f):window,t){case"focusin":(Wv(Z)||Z.contentEditable==="true")&&(sa=Z,Im=f,iu=null);break;case"focusout":iu=Im=sa=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,Kv(g,n,m);break;case"selectionchange":if(db)break;case"keydown":case"keyup":Kv(g,n,m)}var R;if(hy)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ra?mT(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(pT&&n.locale!=="ko"&&(ra||C!=="onCompositionStart"?C==="onCompositionEnd"&&ra&&(R=fT()):(jr=m,ly="value"in jr?jr.value:jr.textContent,ra=!0)),Z=td(f,C),0<Z.length&&(C=new Bv(C,t,null,n,m),g.push({event:C,listeners:Z}),R?C.data=R:(R=gT(n),R!==null&&(C.data=R)))),(R=eb?tb(t,n):nb(t,n))&&(f=td(f,"onBeforeInput"),0<f.length&&(m=new Bv("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=R))}AT(g,e)})}function Iu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function td(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=wu(t,n),o!=null&&i.unshift(Iu(t,o,r)),o=wu(t,e),o!=null&&i.push(Iu(t,o,r))),t=t.return}return i}function Qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xv(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=wu(n,o),h!=null&&a.unshift(Iu(n,h,u))):r||(h=wu(n,o),h!=null&&a.push(Iu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var gb=/\r\n?/g,yb=/\u0000|\uFFFD/g;function Jv(t){return(typeof t=="string"?t:""+t).replace(gb,`
`).replace(yb,"")}function sh(t,e,n){if(e=Jv(e),Jv(t)!==e&&n)throw Error(X(425))}function nd(){}var km=null,bm=null;function Rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lm=typeof setTimeout=="function"?setTimeout:void 0,_b=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,vb=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(t){return e0.resolve(null).then(t).catch(wb)}:Lm;function wb(t){setTimeout(function(){throw t})}function wp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Eu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Eu(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function t0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),vi="__reactFiber$"+Xa,Au="__reactProps$"+Xa,nr="__reactContainer$"+Xa,Nm="__reactEvents$"+Xa,xb="__reactListeners$"+Xa,Tb="__reactHandles$"+Xa;function Ws(t){var e=t[vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=t0(t);t!==null;){if(n=t[vi])return n;t=t0(t)}return e}t=n,n=t.parentNode}return null}function Ju(t){return t=t[vi]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function ef(t){return t[Au]||null}var Mm=[],la=-1;function ys(t){return{current:t}}function nt(t){0>la||(t.current=Mm[la],Mm[la]=null,la--)}function Qe(t,e){la++,Mm[la]=t.current,t.current=e}var os={},Yt=ys(os),gn=ys(!1),to=os;function Ma(t,e){var n=t.type.contextTypes;if(!n)return os;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function yn(t){return t=t.childContextTypes,t!=null}function id(){nt(gn),nt(Yt)}function n0(t,e,n){if(Yt.current!==os)throw Error(X(168));Qe(Yt,e),Qe(gn,n)}function bT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,ok(t)||"Unknown",r));return lt({},n,i)}function rd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||os,to=Yt.current,Qe(Yt,t),Qe(gn,gn.current),!0}function i0(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=bT(t,e,to),i.__reactInternalMemoizedMergedChildContext=t,nt(gn),nt(Yt),Qe(Yt,t)):nt(gn),Qe(gn,n)}var Wi=null,tf=!1,xp=!1;function RT(t){Wi===null?Wi=[t]:Wi.push(t)}function Eb(t){tf=!0,RT(t)}function _s(){if(!xp&&Wi!==null){xp=!0;var t=0,e=qe;try{var n=Wi;for(qe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Wi=null,tf=!1}catch(r){throw Wi!==null&&(Wi=Wi.slice(t+1)),nT(ry,_s),r}finally{qe=e,xp=!1}}return null}var ua=[],ca=0,sd=null,od=0,Fn=[],Bn=0,no=null,qi=1,Gi="";function Vs(t,e){ua[ca++]=od,ua[ca++]=sd,sd=t,od=e}function LT(t,e,n){Fn[Bn++]=qi,Fn[Bn++]=Gi,Fn[Bn++]=no,no=t;var i=qi;t=Gi;var r=32-si(i)-1;i&=~(1<<r),n+=1;var o=32-si(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,qi=1<<32-si(e)+r|n<<r|i,Gi=o+t}else qi=1<<o|n<<r|i,Gi=t}function fy(t){t.return!==null&&(Vs(t,1),LT(t,1,0))}function py(t){for(;t===sd;)sd=ua[--ca],ua[ca]=null,od=ua[--ca],ua[ca]=null;for(;t===no;)no=Fn[--Bn],Fn[Bn]=null,Gi=Fn[--Bn],Fn[Bn]=null,qi=Fn[--Bn],Fn[Bn]=null}var Pn=null,En=null,it=!1,ti=null;function NT(t,e){var n=Hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function r0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,En=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=no!==null?{id:qi,overflow:Gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pn=t,En=null,!0):!1;default:return!1}}function Om(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dm(t){if(it){var e=En;if(e){var n=e;if(!r0(t,e)){if(Om(t))throw Error(X(418));e=$r(n.nextSibling);var i=Pn;e&&r0(t,e)?NT(i,n):(t.flags=t.flags&-4097|2,it=!1,Pn=t)}}else{if(Om(t))throw Error(X(418));t.flags=t.flags&-4097|2,it=!1,Pn=t}}}function s0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function oh(t){if(t!==Pn)return!1;if(!it)return s0(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rm(t.type,t.memoizedProps)),e&&(e=En)){if(Om(t))throw MT(),Error(X(418));for(;e;)NT(t,e),e=$r(e.nextSibling)}if(s0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=$r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=Pn?$r(t.stateNode.nextSibling):null;return!0}function MT(){for(var t=En;t;)t=$r(t.nextSibling)}function Oa(){En=Pn=null,it=!1}function my(t){ti===null?ti=[t]:ti.push(t)}var Pb=hr.ReactCurrentBatchConfig;function jl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function ah(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function o0(t){var e=t._init;return e(t._payload)}function OT(t){function e(I,P){if(t){var S=I.deletions;S===null?(I.deletions=[P],I.flags|=16):S.push(P)}}function n(I,P){if(!t)return null;for(;P!==null;)e(I,P),P=P.sibling;return null}function i(I,P){for(I=new Map;P!==null;)P.key!==null?I.set(P.key,P):I.set(P.index,P),P=P.sibling;return I}function r(I,P){return I=Kr(I,P),I.index=0,I.sibling=null,I}function o(I,P,S){return I.index=S,t?(S=I.alternate,S!==null?(S=S.index,S<P?(I.flags|=2,P):S):(I.flags|=2,P)):(I.flags|=1048576,P)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,P,S,B){return P===null||P.tag!==6?(P=Ap(S,I.mode,B),P.return=I,P):(P=r(P,S),P.return=I,P)}function h(I,P,S,B){var q=S.type;return q===ia?m(I,P,S.props.children,B,S.key):P!==null&&(P.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===kr&&o0(q)===P.type)?(B=r(P,S.props),B.ref=jl(I,P,S),B.return=I,B):(B=Oh(S.type,S.key,S.props,null,I.mode,B),B.ref=jl(I,P,S),B.return=I,B)}function f(I,P,S,B){return P===null||P.tag!==4||P.stateNode.containerInfo!==S.containerInfo||P.stateNode.implementation!==S.implementation?(P=kp(S,I.mode,B),P.return=I,P):(P=r(P,S.children||[]),P.return=I,P)}function m(I,P,S,B,q){return P===null||P.tag!==7?(P=Qs(S,I.mode,B,q),P.return=I,P):(P=r(P,S),P.return=I,P)}function g(I,P,S){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Ap(""+P,I.mode,S),P.return=I,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Qc:return S=Oh(P.type,P.key,P.props,null,I.mode,S),S.ref=jl(I,null,P),S.return=I,S;case na:return P=kp(P,I.mode,S),P.return=I,P;case kr:var B=P._init;return g(I,B(P._payload),S)}if(Wl(P)||Nl(P))return P=Qs(P,I.mode,S,null),P.return=I,P;ah(I,P)}return null}function v(I,P,S,B){var q=P!==null?P.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return q!==null?null:u(I,P,""+S,B);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Qc:return S.key===q?h(I,P,S,B):null;case na:return S.key===q?f(I,P,S,B):null;case kr:return q=S._init,v(I,P,q(S._payload),B)}if(Wl(S)||Nl(S))return q!==null?null:m(I,P,S,B,null);ah(I,S)}return null}function T(I,P,S,B,q){if(typeof B=="string"&&B!==""||typeof B=="number")return I=I.get(S)||null,u(P,I,""+B,q);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Qc:return I=I.get(B.key===null?S:B.key)||null,h(P,I,B,q);case na:return I=I.get(B.key===null?S:B.key)||null,f(P,I,B,q);case kr:var Z=B._init;return T(I,P,S,Z(B._payload),q)}if(Wl(B)||Nl(B))return I=I.get(S)||null,m(P,I,B,q,null);ah(P,B)}return null}function k(I,P,S,B){for(var q=null,Z=null,R=P,C=P=0,N=null;R!==null&&C<S.length;C++){R.index>C?(N=R,R=null):N=R.sibling;var O=v(I,R,S[C],B);if(O===null){R===null&&(R=N);break}t&&R&&O.alternate===null&&e(I,R),P=o(O,P,C),Z===null?q=O:Z.sibling=O,Z=O,R=N}if(C===S.length)return n(I,R),it&&Vs(I,C),q;if(R===null){for(;C<S.length;C++)R=g(I,S[C],B),R!==null&&(P=o(R,P,C),Z===null?q=R:Z.sibling=R,Z=R);return it&&Vs(I,C),q}for(R=i(I,R);C<S.length;C++)N=T(R,I,C,S[C],B),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?C:N.key),P=o(N,P,C),Z===null?q=N:Z.sibling=N,Z=N);return t&&R.forEach(function(D){return e(I,D)}),it&&Vs(I,C),q}function b(I,P,S,B){var q=Nl(S);if(typeof q!="function")throw Error(X(150));if(S=q.call(S),S==null)throw Error(X(151));for(var Z=q=null,R=P,C=P=0,N=null,O=S.next();R!==null&&!O.done;C++,O=S.next()){R.index>C?(N=R,R=null):N=R.sibling;var D=v(I,R,O.value,B);if(D===null){R===null&&(R=N);break}t&&R&&D.alternate===null&&e(I,R),P=o(D,P,C),Z===null?q=D:Z.sibling=D,Z=D,R=N}if(O.done)return n(I,R),it&&Vs(I,C),q;if(R===null){for(;!O.done;C++,O=S.next())O=g(I,O.value,B),O!==null&&(P=o(O,P,C),Z===null?q=O:Z.sibling=O,Z=O);return it&&Vs(I,C),q}for(R=i(I,R);!O.done;C++,O=S.next())O=T(R,I,C,O.value,B),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?C:O.key),P=o(O,P,C),Z===null?q=O:Z.sibling=O,Z=O);return t&&R.forEach(function(z){return e(I,z)}),it&&Vs(I,C),q}function F(I,P,S,B){if(typeof S=="object"&&S!==null&&S.type===ia&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Qc:e:{for(var q=S.key,Z=P;Z!==null;){if(Z.key===q){if(q=S.type,q===ia){if(Z.tag===7){n(I,Z.sibling),P=r(Z,S.props.children),P.return=I,I=P;break e}}else if(Z.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===kr&&o0(q)===Z.type){n(I,Z.sibling),P=r(Z,S.props),P.ref=jl(I,Z,S),P.return=I,I=P;break e}n(I,Z);break}else e(I,Z);Z=Z.sibling}S.type===ia?(P=Qs(S.props.children,I.mode,B,S.key),P.return=I,I=P):(B=Oh(S.type,S.key,S.props,null,I.mode,B),B.ref=jl(I,P,S),B.return=I,I=B)}return a(I);case na:e:{for(Z=S.key;P!==null;){if(P.key===Z)if(P.tag===4&&P.stateNode.containerInfo===S.containerInfo&&P.stateNode.implementation===S.implementation){n(I,P.sibling),P=r(P,S.children||[]),P.return=I,I=P;break e}else{n(I,P);break}else e(I,P);P=P.sibling}P=kp(S,I.mode,B),P.return=I,I=P}return a(I);case kr:return Z=S._init,F(I,P,Z(S._payload),B)}if(Wl(S))return k(I,P,S,B);if(Nl(S))return b(I,P,S,B);ah(I,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,P!==null&&P.tag===6?(n(I,P.sibling),P=r(P,S),P.return=I,I=P):(n(I,P),P=Ap(S,I.mode,B),P.return=I,I=P),a(I)):n(I,P)}return F}var Da=OT(!0),DT=OT(!1),ad=ys(null),ld=null,ha=null,gy=null;function yy(){gy=ha=ld=null}function _y(t){var e=ad.current;nt(ad),t._currentValue=e}function Vm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ea(t,e){ld=t,gy=ha=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(gy!==t)if(t={context:t,memoizedValue:e,next:null},ha===null){if(ld===null)throw Error(X(308));ha=t,ld.dependencies={lanes:0,firstContext:t}}else ha=ha.next=t;return e}var $s=null;function vy(t){$s===null?$s=[t]:$s.push(t)}function VT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,vy(e)):(n.next=r.next,r.next=n),e.interleaved=n,ir(t,i)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var br=!1;function wy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ve&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ir(t,n)}return r=i.interleaved,r===null?(e.next=e,vy(i)):(e.next=r.next,r.next=e),i.interleaved=e,ir(t,n)}function kh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,sy(t,n)}}function a0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ud(t,e,n,i){var r=t.updateQueue;br=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var v=u.lane,T=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,b=u;switch(v=e,T=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){g=k.call(T,g,v);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,v=typeof k=="function"?k.call(T,g,v):k,v==null)break e;g=lt({},g,v);break e;case 2:br=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else T={eventTime:T,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,h=g):m=m.next=T,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);ro|=a,t.lanes=a,t.memoizedState=g}}function l0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var ec={},xi=ys(ec),ku=ys(ec),bu=ys(ec);function qs(t){if(t===ec)throw Error(X(174));return t}function xy(t,e){switch(Qe(bu,e),Qe(ku,t),Qe(xi,ec),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ym(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ym(e,t)}nt(xi),Qe(xi,e)}function Va(){nt(xi),nt(ku),nt(bu)}function FT(t){qs(bu.current);var e=qs(xi.current),n=ym(e,t.type);e!==n&&(Qe(ku,t),Qe(xi,n))}function Ty(t){ku.current===t&&(nt(xi),nt(ku))}var rt=ys(0);function cd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tp=[];function Ey(){for(var t=0;t<Tp.length;t++)Tp[t]._workInProgressVersionPrimary=null;Tp.length=0}var bh=hr.ReactCurrentDispatcher,Ep=hr.ReactCurrentBatchConfig,io=0,ot=null,St=null,Ot=null,hd=!1,ru=!1,Ru=0,Sb=0;function Wt(){throw Error(X(321))}function Py(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function Sy(t,e,n,i,r,o){if(io=o,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bh.current=t===null||t.memoizedState===null?kb:bb,t=n(i,r),ru){o=0;do{if(ru=!1,Ru=0,25<=o)throw Error(X(301));o+=1,Ot=St=null,e.updateQueue=null,bh.current=Rb,t=n(i,r)}while(ru)}if(bh.current=dd,e=St!==null&&St.next!==null,io=0,Ot=St=ot=null,hd=!1,e)throw Error(X(300));return t}function Cy(){var t=Ru!==0;return Ru=0,t}function yi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ot.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function qn(){if(St===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=Ot===null?ot.memoizedState:Ot.next;if(e!==null)Ot=e,St=t;else{if(t===null)throw Error(X(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Ot===null?ot.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Lu(t,e){return typeof e=="function"?e(t):e}function Pp(t){var e=qn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=St,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((io&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,ot.lanes|=m,ro|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,ai(i,e.memoizedState)||(mn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,ot.lanes|=o,ro|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sp(t){var e=qn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);ai(o,e.memoizedState)||(mn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function BT(){}function zT(t,e){var n=ot,i=qn(),r=e(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,mn=!0),i=i.queue,Iy(WT.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,Nu(9,HT.bind(null,n,i,r,e),void 0,null),Dt===null)throw Error(X(349));io&30||UT(n,e,r)}return r}function UT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function HT(t,e,n,i){e.value=n,e.getSnapshot=i,$T(e)&&qT(t)}function WT(t,e,n){return n(function(){$T(e)&&qT(t)})}function $T(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch{return!0}}function qT(t){var e=ir(t,1);e!==null&&oi(e,t,1,-1)}function u0(t){var e=yi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lu,lastRenderedState:t},e.queue=t,t=t.dispatch=Ab.bind(null,ot,t),[e.memoizedState,t]}function Nu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function GT(){return qn().memoizedState}function Rh(t,e,n,i){var r=yi();ot.flags|=t,r.memoizedState=Nu(1|e,n,void 0,i===void 0?null:i)}function nf(t,e,n,i){var r=qn();i=i===void 0?null:i;var o=void 0;if(St!==null){var a=St.memoizedState;if(o=a.destroy,i!==null&&Py(i,a.deps)){r.memoizedState=Nu(e,n,o,i);return}}ot.flags|=t,r.memoizedState=Nu(1|e,n,o,i)}function c0(t,e){return Rh(8390656,8,t,e)}function Iy(t,e){return nf(2048,8,t,e)}function ZT(t,e){return nf(4,2,t,e)}function KT(t,e){return nf(4,4,t,e)}function QT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YT(t,e,n){return n=n!=null?n.concat([t]):null,nf(4,4,QT.bind(null,e,t),n)}function Ay(){}function XT(t,e){var n=qn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Py(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function JT(t,e){var n=qn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Py(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function eE(t,e,n){return io&21?(ai(n,e)||(n=sT(),ot.lanes|=n,ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function Cb(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var i=Ep.transition;Ep.transition={};try{t(!1),e()}finally{qe=n,Ep.transition=i}}function tE(){return qn().memoizedState}function Ib(t,e,n){var i=Zr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},nE(t))iE(e,n);else if(n=VT(t,e,n,i),n!==null){var r=sn();oi(n,t,i,r),rE(n,e,i)}}function Ab(t,e,n){var i=Zr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(nE(t))iE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,ai(u,a)){var h=e.interleaved;h===null?(r.next=r,vy(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=VT(t,e,r,i),n!==null&&(r=sn(),oi(n,t,i,r),rE(n,e,i))}}function nE(t){var e=t.alternate;return t===ot||e!==null&&e===ot}function iE(t,e){ru=hd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,sy(t,n)}}var dd={readContext:$n,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},kb={readContext:$n,useCallback:function(t,e){return yi().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:c0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rh(4194308,4,QT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rh(4,2,t,e)},useMemo:function(t,e){var n=yi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=yi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ib.bind(null,ot,t),[i.memoizedState,t]},useRef:function(t){var e=yi();return t={current:t},e.memoizedState=t},useState:u0,useDebugValue:Ay,useDeferredValue:function(t){return yi().memoizedState=t},useTransition:function(){var t=u0(!1),e=t[0];return t=Cb.bind(null,t[1]),yi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ot,r=yi();if(it){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Dt===null)throw Error(X(349));io&30||UT(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,c0(WT.bind(null,i,o,t),[t]),i.flags|=2048,Nu(9,HT.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=yi(),e=Dt.identifierPrefix;if(it){var n=Gi,i=qi;n=(i&~(1<<32-si(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ru++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bb={readContext:$n,useCallback:XT,useContext:$n,useEffect:Iy,useImperativeHandle:YT,useInsertionEffect:ZT,useLayoutEffect:KT,useMemo:JT,useReducer:Pp,useRef:GT,useState:function(){return Pp(Lu)},useDebugValue:Ay,useDeferredValue:function(t){var e=qn();return eE(e,St.memoizedState,t)},useTransition:function(){var t=Pp(Lu)[0],e=qn().memoizedState;return[t,e]},useMutableSource:BT,useSyncExternalStore:zT,useId:tE,unstable_isNewReconciler:!1},Rb={readContext:$n,useCallback:XT,useContext:$n,useEffect:Iy,useImperativeHandle:YT,useInsertionEffect:ZT,useLayoutEffect:KT,useMemo:JT,useReducer:Sp,useRef:GT,useState:function(){return Sp(Lu)},useDebugValue:Ay,useDeferredValue:function(t){var e=qn();return St===null?e.memoizedState=t:eE(e,St.memoizedState,t)},useTransition:function(){var t=Sp(Lu)[0],e=qn().memoizedState;return[t,e]},useMutableSource:BT,useSyncExternalStore:zT,useId:tE,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rf={isMounted:function(t){return(t=t._reactInternals)?fo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=sn(),r=Zr(t),o=Yi(i,r);o.payload=e,n!=null&&(o.callback=n),e=qr(t,o,r),e!==null&&(oi(e,t,r,i),kh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=sn(),r=Zr(t),o=Yi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=qr(t,o,r),e!==null&&(oi(e,t,r,i),kh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),i=Zr(t),r=Yi(n,i);r.tag=2,e!=null&&(r.callback=e),e=qr(t,r,i),e!==null&&(oi(e,t,i,n),kh(e,t,i))}};function h0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Su(n,i)||!Su(r,o):!0}function sE(t,e,n){var i=!1,r=os,o=e.contextType;return typeof o=="object"&&o!==null?o=$n(o):(r=yn(e)?to:Yt.current,i=e.contextTypes,o=(i=i!=null)?Ma(t,r):os),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function d0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&rf.enqueueReplaceState(e,e.state,null)}function Fm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},wy(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=$n(o):(o=yn(e)?to:Yt.current,r.context=Ma(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(jm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&rf.enqueueReplaceState(r,r.state,null),ud(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ja(t,e){try{var n="",i=e;do n+=sk(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Cp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lb=typeof WeakMap=="function"?WeakMap:Map;function oE(t,e,n){n=Yi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){pd||(pd=!0,Qm=i),Bm(t,e)},n}function aE(t,e,n){n=Yi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Bm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bm(t,e),typeof i!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function f0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Lb;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=qb.bind(null,t,e,n),e.then(t,t))}function p0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yi(-1,1),e.tag=2,qr(n,e,1))),n.lanes|=1),t)}var Nb=hr.ReactCurrentOwner,mn=!1;function rn(t,e,n,i){e.child=t===null?DT(e,null,n,i):Da(e,t.child,n,i)}function g0(t,e,n,i,r){n=n.render;var o=e.ref;return Ea(e,r),i=Sy(t,e,n,i,o,r),n=Cy(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,rr(t,e,r)):(it&&n&&fy(e),e.flags|=1,rn(t,e,i,r),e.child)}function y0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Dy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,lE(t,e,o,i,r)):(t=Oh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Su,n(a,i)&&t.ref===e.ref)return rr(t,e,r)}return e.flags|=1,t=Kr(o,i),t.ref=e.ref,t.return=e,e.child=t}function lE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Su(o,i)&&t.ref===e.ref)if(mn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,rr(t,e,r)}return zm(t,e,n,i,r)}function uE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(fa,Tn),Tn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(fa,Tn),Tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Qe(fa,Tn),Tn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Qe(fa,Tn),Tn|=i;return rn(t,e,r,n),e.child}function cE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zm(t,e,n,i,r){var o=yn(n)?to:Yt.current;return o=Ma(e,o),Ea(e,r),n=Sy(t,e,n,i,o,r),i=Cy(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,rr(t,e,r)):(it&&i&&fy(e),e.flags|=1,rn(t,e,n,r),e.child)}function _0(t,e,n,i,r){if(yn(n)){var o=!0;rd(e)}else o=!1;if(Ea(e,r),e.stateNode===null)Lh(t,e),sE(e,n,i),Fm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=$n(f):(f=yn(n)?to:Yt.current,f=Ma(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&d0(e,a,i,f),br=!1;var v=e.memoizedState;a.state=v,ud(e,i,a,r),h=e.memoizedState,u!==i||v!==h||gn.current||br?(typeof m=="function"&&(jm(e,n,m,i),h=e.memoizedState),(u=br||h0(e,n,u,i,v,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,jT(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Jn(e.type,u),a.props=f,g=e.pendingProps,v=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=$n(h):(h=yn(n)?to:Yt.current,h=Ma(e,h));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||v!==h)&&d0(e,a,i,h),br=!1,v=e.memoizedState,a.state=v,ud(e,i,a,r);var k=e.memoizedState;u!==g||v!==k||gn.current||br?(typeof T=="function"&&(jm(e,n,T,i),k=e.memoizedState),(f=br||h0(e,n,f,i,v,k,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return Um(t,e,n,i,o,r)}function Um(t,e,n,i,r,o){cE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&i0(e,n,!1),rr(t,e,o);i=e.stateNode,Nb.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Da(e,t.child,null,o),e.child=Da(e,null,u,o)):rn(t,e,u,o),e.memoizedState=i.state,r&&i0(e,n,!0),e.child}function hE(t){var e=t.stateNode;e.pendingContext?n0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&n0(t,e.context,!1),xy(t,e.containerInfo)}function v0(t,e,n,i,r){return Oa(),my(r),e.flags|=256,rn(t,e,n,i),e.child}var Hm={dehydrated:null,treeContext:null,retryLane:0};function Wm(t){return{baseLanes:t,cachePool:null,transitions:null}}function dE(t,e,n){var i=e.pendingProps,r=rt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Qe(rt,r&1),t===null)return Dm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=af(a,i,0,null),t=Qs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Wm(n),e.memoizedState=Hm,t):ky(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Mb(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Kr(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Kr(u,o):(o=Qs(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Wm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Hm,i}return o=t.child,t=o.sibling,i=Kr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function ky(t,e){return e=af({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lh(t,e,n,i){return i!==null&&my(i),Da(e,t.child,null,n),t=ky(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mb(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Cp(Error(X(422))),lh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=af({mode:"visible",children:i.children},r,0,null),o=Qs(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Da(e,t.child,null,a),e.child.memoizedState=Wm(a),e.memoizedState=Hm,o);if(!(e.mode&1))return lh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(X(419)),i=Cp(o,i,void 0),lh(t,e,a,i)}if(u=(a&t.childLanes)!==0,mn||u){if(i=Dt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,ir(t,r),oi(i,t,r,-1))}return Oy(),i=Cp(Error(X(421))),lh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Gb.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,En=$r(r.nextSibling),Pn=e,it=!0,ti=null,t!==null&&(Fn[Bn++]=qi,Fn[Bn++]=Gi,Fn[Bn++]=no,qi=t.id,Gi=t.overflow,no=e),e=ky(e,i.children),e.flags|=4096,e)}function w0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Vm(t.return,e,n)}function Ip(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function fE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(rn(t,e,i.children,n),i=rt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&w0(t,n,e);else if(t.tag===19)w0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Qe(rt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&cd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ip(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&cd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ip(e,!0,n,null,o);break;case"together":Ip(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ob(t,e,n){switch(e.tag){case 3:hE(e),Oa();break;case 5:FT(e);break;case 1:yn(e.type)&&rd(e);break;case 4:xy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Qe(ad,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Qe(rt,rt.current&1),e.flags|=128,null):n&e.child.childLanes?dE(t,e,n):(Qe(rt,rt.current&1),t=rr(t,e,n),t!==null?t.sibling:null);Qe(rt,rt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return fE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Qe(rt,rt.current),i)break;return null;case 22:case 23:return e.lanes=0,uE(t,e,n)}return rr(t,e,n)}var pE,$m,mE,gE;pE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};mE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,qs(xi.current);var o=null;switch(n){case"input":r=fm(t,r),i=fm(t,i),o=[];break;case"select":r=lt({},r,{value:void 0}),i=lt({},i,{value:void 0}),o=[];break;case"textarea":r=gm(t,r),i=gm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=nd)}_m(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(_u.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(_u.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Xe("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};gE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Fl(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Db(t,e,n){var i=e.pendingProps;switch(py(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return yn(e.type)&&id(),$t(e),null;case 3:return i=e.stateNode,Va(),nt(gn),nt(Yt),Ey(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(oh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ti!==null&&(Jm(ti),ti=null))),$m(t,e),$t(e),null;case 5:Ty(e);var r=qs(bu.current);if(n=e.type,t!==null&&e.stateNode!=null)mE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return $t(e),null}if(t=qs(xi.current),oh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[vi]=e,i[Au]=o,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":case"embed":Xe("load",i);break;case"video":case"audio":for(r=0;r<ql.length;r++)Xe(ql[r],i);break;case"source":Xe("error",i);break;case"img":case"image":case"link":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"input":kv(i,o),Xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Xe("invalid",i);break;case"textarea":Rv(i,o),Xe("invalid",i)}_m(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&sh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&sh(i.textContent,u,t),r=["children",""+u]):_u.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Xe("scroll",i)}switch(n){case"input":Yc(i),bv(i,o,!0);break;case"textarea":Yc(i),Lv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=nd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=W1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[vi]=e,t[Au]=i,pE(t,e,!1,!1),e.stateNode=t;e:{switch(a=vm(n,i),n){case"dialog":Xe("cancel",t),Xe("close",t),r=i;break;case"iframe":case"object":case"embed":Xe("load",t),r=i;break;case"video":case"audio":for(r=0;r<ql.length;r++)Xe(ql[r],t);r=i;break;case"source":Xe("error",t),r=i;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),r=i;break;case"details":Xe("toggle",t),r=i;break;case"input":kv(t,i),r=fm(t,i),Xe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=lt({},i,{value:void 0}),Xe("invalid",t);break;case"textarea":Rv(t,i),r=gm(t,i),Xe("invalid",t);break;default:r=i}_m(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?G1(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&$1(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&vu(t,h):typeof h=="number"&&vu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_u.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Xe("scroll",t):h!=null&&Jg(t,o,h,a))}switch(n){case"input":Yc(t),bv(t,i,!1);break;case"textarea":Yc(t),Lv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ss(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?va(t,!!i.multiple,o,!1):i.defaultValue!=null&&va(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=nd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)gE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=qs(bu.current),qs(xi.current),oh(e)){if(i=e.stateNode,n=e.memoizedProps,i[vi]=e,(o=i.nodeValue!==n)&&(t=Pn,t!==null))switch(t.tag){case 3:sh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[vi]=e,e.stateNode=i}return $t(e),null;case 13:if(nt(rt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&En!==null&&e.mode&1&&!(e.flags&128))MT(),Oa(),e.flags|=98560,o=!1;else if(o=oh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[vi]=e}else Oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),o=!1}else ti!==null&&(Jm(ti),ti=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?It===0&&(It=3):Oy())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Va(),$m(t,e),t===null&&Cu(e.stateNode.containerInfo),$t(e),null;case 10:return _y(e.type._context),$t(e),null;case 17:return yn(e.type)&&id(),$t(e),null;case 19:if(nt(rt),o=e.memoizedState,o===null)return $t(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Fl(o,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=cd(t),a!==null){for(e.flags|=128,Fl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(rt,rt.current&1|2),e.child}t=t.sibling}o.tail!==null&&gt()>Fa&&(e.flags|=128,i=!0,Fl(o,!1),e.lanes=4194304)}else{if(!i)if(t=cd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!it)return $t(e),null}else 2*gt()-o.renderingStartTime>Fa&&n!==1073741824&&(e.flags|=128,i=!0,Fl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=gt(),e.sibling=null,n=rt.current,Qe(rt,i?n&1|2:n&1),e):($t(e),null);case 22:case 23:return My(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Tn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function Vb(t,e){switch(py(e),e.tag){case 1:return yn(e.type)&&id(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Va(),nt(gn),nt(Yt),Ey(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ty(e),null;case 13:if(nt(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(rt),null;case 4:return Va(),null;case 10:return _y(e.type._context),null;case 22:case 23:return My(),null;case 24:return null;default:return null}}var uh=!1,Kt=!1,jb=typeof WeakSet=="function"?WeakSet:Set,ce=null;function da(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){dt(t,e,i)}else n.current=null}function qm(t,e,n){try{n()}catch(i){dt(t,e,i)}}var x0=!1;function Fb(t,e){if(km=Jh,t=xT(),dy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,v=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)v=g,g=T;for(;;){if(g===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++m===i&&(h=a),(T=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(bm={focusedElem:t,selectionRange:n},Jh=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,F=k.memoizedState,I=e.stateNode,P=I.getSnapshotBeforeUpdate(e.elementType===e.type?b:Jn(e.type,b),F);I.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(B){dt(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return k=x0,x0=!1,k}function su(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&qm(e,n,o)}r=r.next}while(r!==i)}}function sf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Gm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yE(t){var e=t.alternate;e!==null&&(t.alternate=null,yE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vi],delete e[Au],delete e[Nm],delete e[xb],delete e[Tb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _E(t){return t.tag===5||t.tag===3||t.tag===4}function T0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_E(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nd));else if(i!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}function Km(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Km(t,e,n),t=t.sibling;t!==null;)Km(t,e,n),t=t.sibling}var Vt=null,ei=!1;function Sr(t,e,n){for(n=n.child;n!==null;)vE(t,e,n),n=n.sibling}function vE(t,e,n){if(wi&&typeof wi.onCommitFiberUnmount=="function")try{wi.onCommitFiberUnmount(Qd,n)}catch{}switch(n.tag){case 5:Kt||da(n,e);case 6:var i=Vt,r=ei;Vt=null,Sr(t,e,n),Vt=i,ei=r,Vt!==null&&(ei?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(ei?(t=Vt,n=n.stateNode,t.nodeType===8?wp(t.parentNode,n):t.nodeType===1&&wp(t,n),Eu(t)):wp(Vt,n.stateNode));break;case 4:i=Vt,r=ei,Vt=n.stateNode.containerInfo,ei=!0,Sr(t,e,n),Vt=i,ei=r;break;case 0:case 11:case 14:case 15:if(!Kt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&qm(n,e,a),r=r.next}while(r!==i)}Sr(t,e,n);break;case 1:if(!Kt&&(da(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){dt(n,e,u)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(Kt=(i=Kt)||n.memoizedState!==null,Sr(t,e,n),Kt=i):Sr(t,e,n);break;default:Sr(t,e,n)}}function E0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jb),e.forEach(function(i){var r=Zb.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Vt=u.stateNode,ei=!1;break e;case 3:Vt=u.stateNode.containerInfo,ei=!0;break e;case 4:Vt=u.stateNode.containerInfo,ei=!0;break e}u=u.return}if(Vt===null)throw Error(X(160));vE(o,a,r),Vt=null,ei=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){dt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wE(e,t),e=e.sibling}function wE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),gi(t),i&4){try{su(3,t,t.return),sf(3,t)}catch(b){dt(t,t.return,b)}try{su(5,t,t.return)}catch(b){dt(t,t.return,b)}}break;case 1:Xn(e,t),gi(t),i&512&&n!==null&&da(n,n.return);break;case 5:if(Xn(e,t),gi(t),i&512&&n!==null&&da(n,n.return),t.flags&32){var r=t.stateNode;try{vu(r,"")}catch(b){dt(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&U1(r,o),vm(u,a);var f=vm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?G1(r,g):m==="dangerouslySetInnerHTML"?$1(r,g):m==="children"?vu(r,g):Jg(r,m,g,f)}switch(u){case"input":pm(r,o);break;case"textarea":H1(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?va(r,!!o.multiple,T,!1):v!==!!o.multiple&&(o.defaultValue!=null?va(r,!!o.multiple,o.defaultValue,!0):va(r,!!o.multiple,o.multiple?[]:"",!1))}r[Au]=o}catch(b){dt(t,t.return,b)}}break;case 6:if(Xn(e,t),gi(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){dt(t,t.return,b)}}break;case 3:if(Xn(e,t),gi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Eu(e.containerInfo)}catch(b){dt(t,t.return,b)}break;case 4:Xn(e,t),gi(t);break;case 13:Xn(e,t),gi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Ly=gt())),i&4&&E0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Kt=(f=Kt)||m,Xn(e,t),Kt=f):Xn(e,t),gi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(ce=t,m=t.child;m!==null;){for(g=ce=m;ce!==null;){switch(v=ce,T=v.child,v.tag){case 0:case 11:case 14:case 15:su(4,v,v.return);break;case 1:da(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(b){dt(i,n,b)}}break;case 5:da(v,v.return);break;case 22:if(v.memoizedState!==null){S0(g);continue}}T!==null?(T.return=v,ce=T):S0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=q1("display",a))}catch(b){dt(t,t.return,b)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(b){dt(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Xn(e,t),gi(t),i&4&&E0(t);break;case 21:break;default:Xn(e,t),gi(t)}}function gi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_E(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(vu(r,""),i.flags&=-33);var o=T0(t);Km(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=T0(t);Zm(t,u,a);break;default:throw Error(X(161))}}catch(h){dt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bb(t,e,n){ce=t,xE(t)}function xE(t,e,n){for(var i=(t.mode&1)!==0;ce!==null;){var r=ce,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||uh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Kt;u=uh;var f=Kt;if(uh=a,(Kt=h)&&!f)for(ce=r;ce!==null;)a=ce,h=a.child,a.tag===22&&a.memoizedState!==null?C0(r):h!==null?(h.return=a,ce=h):C0(r);for(;o!==null;)ce=o,xE(o),o=o.sibling;ce=r,uh=u,Kt=f}P0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ce=o):P0(t)}}function P0(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||sf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Kt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&l0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}l0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Eu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Kt||e.flags&512&&Gm(e)}catch(v){dt(e,e.return,v)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function S0(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function C0(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sf(4,e)}catch(h){dt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){dt(e,r,h)}}var o=e.return;try{Gm(e)}catch(h){dt(e,o,h)}break;case 5:var a=e.return;try{Gm(e)}catch(h){dt(e,a,h)}}}catch(h){dt(e,e.return,h)}if(e===t){ce=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ce=u;break}ce=e.return}}var zb=Math.ceil,fd=hr.ReactCurrentDispatcher,by=hr.ReactCurrentOwner,Wn=hr.ReactCurrentBatchConfig,Ve=0,Dt=null,Et=null,Bt=0,Tn=0,fa=ys(0),It=0,Mu=null,ro=0,of=0,Ry=0,ou=null,pn=null,Ly=0,Fa=1/0,Hi=null,pd=!1,Qm=null,Gr=null,ch=!1,Fr=null,md=0,au=0,Ym=null,Nh=-1,Mh=0;function sn(){return Ve&6?gt():Nh!==-1?Nh:Nh=gt()}function Zr(t){return t.mode&1?Ve&2&&Bt!==0?Bt&-Bt:Pb.transition!==null?(Mh===0&&(Mh=sT()),Mh):(t=qe,t!==0||(t=window.event,t=t===void 0?16:dT(t.type)),t):1}function oi(t,e,n,i){if(50<au)throw au=0,Ym=null,Error(X(185));Yu(t,n,i),(!(Ve&2)||t!==Dt)&&(t===Dt&&(!(Ve&2)&&(of|=n),It===4&&Nr(t,Bt)),_n(t,i),n===1&&Ve===0&&!(e.mode&1)&&(Fa=gt()+500,tf&&_s()))}function _n(t,e){var n=t.callbackNode;Pk(t,e);var i=Xh(t,t===Dt?Bt:0);if(i===0)n!==null&&Ov(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Ov(n),e===1)t.tag===0?Eb(I0.bind(null,t)):RT(I0.bind(null,t)),vb(function(){!(Ve&6)&&_s()}),n=null;else{switch(oT(i)){case 1:n=ry;break;case 4:n=iT;break;case 16:n=Yh;break;case 536870912:n=rT;break;default:n=Yh}n=kE(n,TE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TE(t,e){if(Nh=-1,Mh=0,Ve&6)throw Error(X(327));var n=t.callbackNode;if(Pa()&&t.callbackNode!==n)return null;var i=Xh(t,t===Dt?Bt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=gd(t,i);else{e=i;var r=Ve;Ve|=2;var o=PE();(Dt!==t||Bt!==e)&&(Hi=null,Fa=gt()+500,Ks(t,e));do try{Wb();break}catch(u){EE(t,u)}while(!0);yy(),fd.current=o,Ve=r,Et!==null?e=0:(Dt=null,Bt=0,e=It)}if(e!==0){if(e===2&&(r=Pm(t),r!==0&&(i=r,e=Xm(t,r))),e===1)throw n=Mu,Ks(t,0),Nr(t,i),_n(t,gt()),n;if(e===6)Nr(t,i);else{if(r=t.current.alternate,!(i&30)&&!Ub(r)&&(e=gd(t,i),e===2&&(o=Pm(t),o!==0&&(i=o,e=Xm(t,o))),e===1))throw n=Mu,Ks(t,0),Nr(t,i),_n(t,gt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:js(t,pn,Hi);break;case 3:if(Nr(t,i),(i&130023424)===i&&(e=Ly+500-gt(),10<e)){if(Xh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){sn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Lm(js.bind(null,t,pn,Hi),e);break}js(t,pn,Hi);break;case 4:if(Nr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-si(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=gt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zb(i/1960))-i,10<i){t.timeoutHandle=Lm(js.bind(null,t,pn,Hi),i);break}js(t,pn,Hi);break;case 5:js(t,pn,Hi);break;default:throw Error(X(329))}}}return _n(t,gt()),t.callbackNode===n?TE.bind(null,t):null}function Xm(t,e){var n=ou;return t.current.memoizedState.isDehydrated&&(Ks(t,e).flags|=256),t=gd(t,e),t!==2&&(e=pn,pn=n,e!==null&&Jm(e)),t}function Jm(t){pn===null?pn=t:pn.push.apply(pn,t)}function Ub(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~Ry,e&=~of,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-si(e),i=1<<n;t[n]=-1,e&=~i}}function I0(t){if(Ve&6)throw Error(X(327));Pa();var e=Xh(t,0);if(!(e&1))return _n(t,gt()),null;var n=gd(t,e);if(t.tag!==0&&n===2){var i=Pm(t);i!==0&&(e=i,n=Xm(t,i))}if(n===1)throw n=Mu,Ks(t,0),Nr(t,e),_n(t,gt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,js(t,pn,Hi),_n(t,gt()),null}function Ny(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(Fa=gt()+500,tf&&_s())}}function so(t){Fr!==null&&Fr.tag===0&&!(Ve&6)&&Pa();var e=Ve;Ve|=1;var n=Wn.transition,i=qe;try{if(Wn.transition=null,qe=1,t)return t()}finally{qe=i,Wn.transition=n,Ve=e,!(Ve&6)&&_s()}}function My(){Tn=fa.current,nt(fa)}function Ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_b(n)),Et!==null)for(n=Et.return;n!==null;){var i=n;switch(py(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&id();break;case 3:Va(),nt(gn),nt(Yt),Ey();break;case 5:Ty(i);break;case 4:Va();break;case 13:nt(rt);break;case 19:nt(rt);break;case 10:_y(i.type._context);break;case 22:case 23:My()}n=n.return}if(Dt=t,Et=t=Kr(t.current,null),Bt=Tn=e,It=0,Mu=null,Ry=of=ro=0,pn=ou=null,$s!==null){for(e=0;e<$s.length;e++)if(n=$s[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}$s=null}return t}function EE(t,e){do{var n=Et;try{if(yy(),bh.current=dd,hd){for(var i=ot.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}hd=!1}if(io=0,Ot=St=ot=null,ru=!1,Ru=0,by.current=null,n===null||n.return===null){It=1,Mu=e,Et=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Bt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=p0(a);if(T!==null){T.flags&=-257,m0(T,a,u,o,e),T.mode&1&&f0(o,f,e),e=T,h=f;var k=e.updateQueue;if(k===null){var b=new Set;b.add(h),e.updateQueue=b}else k.add(h);break e}else{if(!(e&1)){f0(o,f,e),Oy();break e}h=Error(X(426))}}else if(it&&u.mode&1){var F=p0(a);if(F!==null){!(F.flags&65536)&&(F.flags|=256),m0(F,a,u,o,e),my(ja(h,u));break e}}o=h=ja(h,u),It!==4&&(It=2),ou===null?ou=[o]:ou.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var I=oE(o,h,e);a0(o,I);break e;case 1:u=h;var P=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Gr===null||!Gr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=aE(o,u,e);a0(o,B);break e}}o=o.return}while(o!==null)}CE(n)}catch(q){e=q,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function PE(){var t=fd.current;return fd.current=dd,t===null?dd:t}function Oy(){(It===0||It===3||It===2)&&(It=4),Dt===null||!(ro&268435455)&&!(of&268435455)||Nr(Dt,Bt)}function gd(t,e){var n=Ve;Ve|=2;var i=PE();(Dt!==t||Bt!==e)&&(Hi=null,Ks(t,e));do try{Hb();break}catch(r){EE(t,r)}while(!0);if(yy(),Ve=n,fd.current=i,Et!==null)throw Error(X(261));return Dt=null,Bt=0,It}function Hb(){for(;Et!==null;)SE(Et)}function Wb(){for(;Et!==null&&!mk();)SE(Et)}function SE(t){var e=AE(t.alternate,t,Tn);t.memoizedProps=t.pendingProps,e===null?CE(t):Et=e,by.current=null}function CE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Vb(n,e),n!==null){n.flags&=32767,Et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,Et=null;return}}else if(n=Db(n,e,Tn),n!==null){Et=n;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=t}while(e!==null);It===0&&(It=5)}function js(t,e,n){var i=qe,r=Wn.transition;try{Wn.transition=null,qe=1,$b(t,e,n,i)}finally{Wn.transition=r,qe=i}return null}function $b(t,e,n,i){do Pa();while(Fr!==null);if(Ve&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Sk(t,o),t===Dt&&(Et=Dt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ch||(ch=!0,kE(Yh,function(){return Pa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Wn.transition,Wn.transition=null;var a=qe;qe=1;var u=Ve;Ve|=4,by.current=null,Fb(t,n),wE(n,t),hb(bm),Jh=!!km,bm=km=null,t.current=n,Bb(n),gk(),Ve=u,qe=a,Wn.transition=o}else t.current=n;if(ch&&(ch=!1,Fr=t,md=r),o=t.pendingLanes,o===0&&(Gr=null),vk(n.stateNode),_n(t,gt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(pd)throw pd=!1,t=Qm,Qm=null,t;return md&1&&t.tag!==0&&Pa(),o=t.pendingLanes,o&1?t===Ym?au++:(au=0,Ym=t):au=0,_s(),null}function Pa(){if(Fr!==null){var t=oT(md),e=Wn.transition,n=qe;try{if(Wn.transition=null,qe=16>t?16:t,Fr===null)var i=!1;else{if(t=Fr,Fr=null,md=0,Ve&6)throw Error(X(331));var r=Ve;for(Ve|=4,ce=t.current;ce!==null;){var o=ce,a=o.child;if(ce.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(ce=f;ce!==null;){var m=ce;switch(m.tag){case 0:case 11:case 15:su(8,m,o)}var g=m.child;if(g!==null)g.return=m,ce=g;else for(;ce!==null;){m=ce;var v=m.sibling,T=m.return;if(yE(m),m===f){ce=null;break}if(v!==null){v.return=T,ce=v;break}ce=T}}}var k=o.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var F=b.sibling;b.sibling=null,b=F}while(b!==null)}}ce=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ce=a;else e:for(;ce!==null;){if(o=ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:su(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,ce=I;break e}ce=o.return}}var P=t.current;for(ce=P;ce!==null;){a=ce;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,ce=S;else e:for(a=P;ce!==null;){if(u=ce,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:sf(9,u)}}catch(q){dt(u,u.return,q)}if(u===a){ce=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,ce=B;break e}ce=u.return}}if(Ve=r,_s(),wi&&typeof wi.onPostCommitFiberRoot=="function")try{wi.onPostCommitFiberRoot(Qd,t)}catch{}i=!0}return i}finally{qe=n,Wn.transition=e}}return!1}function A0(t,e,n){e=ja(n,e),e=oE(t,e,1),t=qr(t,e,1),e=sn(),t!==null&&(Yu(t,1,e),_n(t,e))}function dt(t,e,n){if(t.tag===3)A0(t,t,n);else for(;e!==null;){if(e.tag===3){A0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Gr===null||!Gr.has(i))){t=ja(n,t),t=aE(e,t,1),e=qr(e,t,1),t=sn(),e!==null&&(Yu(e,1,t),_n(e,t));break}}e=e.return}}function qb(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Bt&n)===n&&(It===4||It===3&&(Bt&130023424)===Bt&&500>gt()-Ly?Ks(t,0):Ry|=n),_n(t,e)}function IE(t,e){e===0&&(t.mode&1?(e=eh,eh<<=1,!(eh&130023424)&&(eh=4194304)):e=1);var n=sn();t=ir(t,e),t!==null&&(Yu(t,e,n),_n(t,n))}function Gb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),IE(t,n)}function Zb(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),IE(t,n)}var AE;AE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,Ob(t,e,n);mn=!!(t.flags&131072)}else mn=!1,it&&e.flags&1048576&&LT(e,od,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Lh(t,e),t=e.pendingProps;var r=Ma(e,Yt.current);Ea(e,n),r=Sy(null,e,i,t,r,n);var o=Cy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(i)?(o=!0,rd(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,wy(e),r.updater=rf,e.stateNode=r,r._reactInternals=e,Fm(e,i,t,n),e=Um(null,e,i,!0,o,n)):(e.tag=0,it&&o&&fy(e),rn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Lh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Qb(i),t=Jn(i,t),r){case 0:e=zm(null,e,i,t,n);break e;case 1:e=_0(null,e,i,t,n);break e;case 11:e=g0(null,e,i,t,n);break e;case 14:e=y0(null,e,i,Jn(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),zm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),_0(t,e,i,r,n);case 3:e:{if(hE(e),t===null)throw Error(X(387));i=e.pendingProps,o=e.memoizedState,r=o.element,jT(t,e),ud(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=ja(Error(X(423)),e),e=v0(t,e,i,n,r);break e}else if(i!==r){r=ja(Error(X(424)),e),e=v0(t,e,i,n,r);break e}else for(En=$r(e.stateNode.containerInfo.firstChild),Pn=e,it=!0,ti=null,n=DT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oa(),i===r){e=rr(t,e,n);break e}rn(t,e,i,n)}e=e.child}return e;case 5:return FT(e),t===null&&Dm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Rm(i,r)?a=null:o!==null&&Rm(i,o)&&(e.flags|=32),cE(t,e),rn(t,e,a,n),e.child;case 6:return t===null&&Dm(e),null;case 13:return dE(t,e,n);case 4:return xy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Da(e,null,i,n):rn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),g0(t,e,i,r,n);case 7:return rn(t,e,e.pendingProps,n),e.child;case 8:return rn(t,e,e.pendingProps.children,n),e.child;case 12:return rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Qe(ad,i._currentValue),i._currentValue=a,o!==null)if(ai(o.value,a)){if(o.children===r.children&&!gn.current){e=rr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=Yi(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Vm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Vm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}rn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ea(e,n),r=$n(r),i=i(r),e.flags|=1,rn(t,e,i,n),e.child;case 14:return i=e.type,r=Jn(i,e.pendingProps),r=Jn(i.type,r),y0(t,e,i,r,n);case 15:return lE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Jn(i,r),Lh(t,e),e.tag=1,yn(i)?(t=!0,rd(e)):t=!1,Ea(e,n),sE(e,i,r),Fm(e,i,r,n),Um(null,e,i,!0,t,n);case 19:return fE(t,e,n);case 22:return uE(t,e,n)}throw Error(X(156,e.tag))};function kE(t,e){return nT(t,e)}function Kb(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,e,n,i){return new Kb(t,e,n,i)}function Dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qb(t){if(typeof t=="function")return Dy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ty)return 11;if(t===ny)return 14}return 2}function Kr(t,e){var n=t.alternate;return n===null?(n=Hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Dy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ia:return Qs(n.children,r,o,e);case ey:a=8,r|=8;break;case um:return t=Hn(12,n,e,r|2),t.elementType=um,t.lanes=o,t;case cm:return t=Hn(13,n,e,r),t.elementType=cm,t.lanes=o,t;case hm:return t=Hn(19,n,e,r),t.elementType=hm,t.lanes=o,t;case F1:return af(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V1:a=10;break e;case j1:a=9;break e;case ty:a=11;break e;case ny:a=14;break e;case kr:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Hn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Qs(t,e,n,i){return t=Hn(7,t,i,e),t.lanes=n,t}function af(t,e,n,i){return t=Hn(22,t,i,e),t.elementType=F1,t.lanes=n,t.stateNode={isHidden:!1},t}function Ap(t,e,n){return t=Hn(6,t,null,e),t.lanes=n,t}function kp(t,e,n){return e=Hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yb(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=up(0),this.expirationTimes=up(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=up(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vy(t,e,n,i,r,o,a,u,h){return t=new Yb(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Hn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wy(o),t}function Xb(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:na,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function bE(t){if(!t)return os;t=t._reactInternals;e:{if(fo(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(yn(n))return bT(t,n,e)}return e}function RE(t,e,n,i,r,o,a,u,h){return t=Vy(n,i,!0,t,r,o,a,u,h),t.context=bE(null),n=t.current,i=sn(),r=Zr(n),o=Yi(i,r),o.callback=e??null,qr(n,o,r),t.current.lanes=r,Yu(t,r,i),_n(t,i),t}function lf(t,e,n,i){var r=e.current,o=sn(),a=Zr(r);return n=bE(n),e.context===null?e.context=n:e.pendingContext=n,e=Yi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=qr(r,e,a),t!==null&&(oi(t,r,a,o),kh(t,r,a)),a}function yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function k0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jy(t,e){k0(t,e),(t=t.alternate)&&k0(t,e)}function Jb(){return null}var LE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fy(t){this._internalRoot=t}uf.prototype.render=Fy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));lf(t,e,null,null)};uf.prototype.unmount=Fy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;so(function(){lf(null,t,null,null)}),e[nr]=null}};function uf(t){this._internalRoot=t}uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=uT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lr.length&&e!==0&&e<Lr[n].priority;n++);Lr.splice(n,0,t),n===0&&hT(t)}};function By(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function b0(){}function eR(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=yd(a);o.call(f)}}var a=RE(e,i,t,0,null,!1,!1,"",b0);return t._reactRootContainer=a,t[nr]=a.current,Cu(t.nodeType===8?t.parentNode:t),so(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=yd(h);u.call(f)}}var h=Vy(t,0,!1,null,null,!1,!1,"",b0);return t._reactRootContainer=h,t[nr]=h.current,Cu(t.nodeType===8?t.parentNode:t),so(function(){lf(e,h,n,i)}),h}function hf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=yd(a);u.call(h)}}lf(e,a,t,r)}else a=eR(n,e,t,r,i);return yd(a)}aT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$l(e.pendingLanes);n!==0&&(sy(e,n|1),_n(e,gt()),!(Ve&6)&&(Fa=gt()+500,_s()))}break;case 13:so(function(){var i=ir(t,1);if(i!==null){var r=sn();oi(i,t,1,r)}}),jy(t,1)}};oy=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=sn();oi(e,t,134217728,n)}jy(t,134217728)}};lT=function(t){if(t.tag===13){var e=Zr(t),n=ir(t,e);if(n!==null){var i=sn();oi(n,t,e,i)}jy(t,e)}};uT=function(){return qe};cT=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};xm=function(t,e,n){switch(e){case"input":if(pm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=ef(i);if(!r)throw Error(X(90));z1(i),pm(i,r)}}}break;case"textarea":H1(t,n);break;case"select":e=n.value,e!=null&&va(t,!!n.multiple,e,!1)}};Q1=Ny;Y1=so;var tR={usingClientEntryPoint:!1,Events:[Ju,aa,ef,Z1,K1,Ny]},Bl={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nR={bundleType:Bl.bundleType,version:Bl.version,rendererPackageName:Bl.rendererPackageName,rendererConfig:Bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eT(t),t===null?null:t.stateNode},findFiberByHostInstance:Bl.findFiberByHostInstance||Jb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{Qd=hh.inject(nR),wi=hh}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tR;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!By(e))throw Error(X(200));return Xb(t,e,null,n)};An.createRoot=function(t,e){if(!By(t))throw Error(X(299));var n=!1,i="",r=LE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Vy(t,1,!1,null,null,n,!1,i,r),t[nr]=e.current,Cu(t.nodeType===8?t.parentNode:t),new Fy(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=eT(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return so(t)};An.hydrate=function(t,e,n){if(!cf(e))throw Error(X(200));return hf(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!By(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=LE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=RE(e,null,t,1,n??null,r,!1,o,a),t[nr]=e.current,Cu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new uf(e)};An.render=function(t,e,n){if(!cf(e))throw Error(X(200));return hf(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!cf(t))throw Error(X(40));return t._reactRootContainer?(so(function(){hf(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};An.unstable_batchedUpdates=Ny;An.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!cf(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return hf(t,e,n,!1,i)};An.version="18.3.1-next-f1338f8080-20240426";function NE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NE)}catch(t){console.error(t)}}NE(),N1.exports=An;var iR=N1.exports,R0=iR;am.createRoot=R0.createRoot,am.hydrateRoot=R0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ou.apply(this,arguments)}var Br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Br||(Br={}));const L0="popstate";function rR(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=po(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),eg("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:_d(o))}function i(r,o){df(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return oR(e,n,i,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function df(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sR(){return Math.random().toString(36).substr(2,8)}function N0(t,e){return{usr:t.state,key:t.key,idx:e}}function eg(t,e,n,i){return n===void 0&&(n=null),Ou({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?po(e):e,{state:n,key:e&&e.key||i||sR()})}function _d(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function po(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function oR(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Br.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(Ou({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Br.Pop;let F=m(),I=F==null?null:F-f;f=F,h&&h({action:u,location:b.location,delta:I})}function v(F,I){u=Br.Push;let P=eg(b.location,F,I);n&&n(P,F),f=m()+1;let S=N0(P,f),B=b.createHref(P);try{a.pushState(S,"",B)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;r.location.assign(B)}o&&h&&h({action:u,location:b.location,delta:1})}function T(F,I){u=Br.Replace;let P=eg(b.location,F,I);n&&n(P,F),f=m();let S=N0(P,f),B=b.createHref(P);a.replaceState(S,"",B),o&&h&&h({action:u,location:b.location,delta:0})}function k(F){let I=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof F=="string"?F:_d(F);return P=P.replace(/ $/,"%20"),at(I,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,I)}let b={get action(){return u},get location(){return t(r,a)},listen(F){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(L0,g),h=F,()=>{r.removeEventListener(L0,g),h=null}},createHref(F){return e(r,F)},createURL:k,encodeLocation(F){let I=k(F);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:v,replace:T,go(F){return a.go(F)}};return b}var M0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(M0||(M0={}));function aR(t,e,n){return n===void 0&&(n="/"),lR(t,e,n)}function lR(t,e,n,i){let r=typeof e=="string"?po(e):e,o=Ba(r.pathname||"/",n);if(o==null)return null;let a=ME(t);uR(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=wR(o);u=_R(a[h],f)}return u}function ME(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(at(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=Qr([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(at(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),ME(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:gR(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of OE(o.path))r(o,a,h)}),e}function OE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=OE(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function uR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const cR=/^:[\w-]+$/,hR=3,dR=2,fR=1,pR=10,mR=-2,O0=t=>t==="*";function gR(t,e){let n=t.split("/"),i=n.length;return n.some(O0)&&(i+=mR),e&&(i+=dR),n.filter(r=>!O0(r)).reduce((r,o)=>r+(cR.test(o)?hR:o===""?fR:pR),i)}function yR(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function _R(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=tg({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),v=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:Qr([o,g.pathname]),pathnameBase:SR(Qr([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=Qr([o,g.pathnameBase]))}return a}function tg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=vR(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:v,isOptional:T}=m;if(v==="*"){let b=u[g]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const k=u[g];return T&&!k?f[v]=void 0:f[v]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function vR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),df(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function wR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return df(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ba(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const xR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TR=t=>xR.test(t);function ER(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?po(t):t,o;if(n)if(TR(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),df(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=D0(n.substring(1),"/"):o=D0(n,e)}else o=e;return{pathname:o,search:CR(i),hash:IR(r)}}function D0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function bp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zy(t,e){let n=PR(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Uy(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=po(t):(r=Ou({},t),at(!r.pathname||!r.pathname.includes("?"),bp("?","pathname","search",r)),at(!r.pathname||!r.pathname.includes("#"),bp("#","pathname","hash",r)),at(!r.search||!r.search.includes("#"),bp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}u=g>=0?e[g]:"/"}let h=ER(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const Qr=t=>t.join("/").replace(/\/\/+/g,"/"),SR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const DE=["post","put","patch","delete"];new Set(DE);const kR=["get",...DE];new Set(kR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Du.apply(this,arguments)}const ff=j.createContext(null),VE=j.createContext(null),dr=j.createContext(null),pf=j.createContext(null),vs=j.createContext({outlet:null,matches:[],isDataRoute:!1}),jE=j.createContext(null);function bR(t,e){let{relative:n}=e===void 0?{}:e;Ja()||at(!1);let{basename:i,navigator:r}=j.useContext(dr),{hash:o,pathname:a,search:u}=mf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:Qr([i,a])),r.createHref({pathname:h,search:u,hash:o})}function Ja(){return j.useContext(pf)!=null}function mo(){return Ja()||at(!1),j.useContext(pf).location}function FE(t){j.useContext(dr).static||j.useLayoutEffect(t)}function Hy(){let{isDataRoute:t}=j.useContext(vs);return t?HR():RR()}function RR(){Ja()||at(!1);let t=j.useContext(ff),{basename:e,future:n,navigator:i}=j.useContext(dr),{matches:r}=j.useContext(vs),{pathname:o}=mo(),a=JSON.stringify(zy(r,n.v7_relativeSplatPath)),u=j.useRef(!1);return FE(()=>{u.current=!0}),j.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=Uy(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Qr([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function mf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=j.useContext(dr),{matches:r}=j.useContext(vs),{pathname:o}=mo(),a=JSON.stringify(zy(r,i.v7_relativeSplatPath));return j.useMemo(()=>Uy(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function LR(t,e){return NR(t,e)}function NR(t,e,n,i){Ja()||at(!1);let{navigator:r}=j.useContext(dr),{matches:o}=j.useContext(vs),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=mo(),m;if(e){var g;let F=typeof e=="string"?po(e):e;h==="/"||(g=F.pathname)!=null&&g.startsWith(h)||at(!1),m=F}else m=f;let v=m.pathname||"/",T=v;if(h!=="/"){let F=h.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(F.length).join("/")}let k=aR(t,{pathname:T}),b=jR(k&&k.map(F=>Object.assign({},F,{params:Object.assign({},u,F.params),pathname:Qr([h,r.encodeLocation?r.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?h:Qr([h,r.encodeLocation?r.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),o,n,i);return e&&b?j.createElement(pf.Provider,{value:{location:Du({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Br.Pop}},b):b}function MR(){let t=UR(),e=AR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:r},n):null,null)}const OR=j.createElement(MR,null);class DR extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(vs.Provider,{value:this.props.routeContext},j.createElement(jE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VR(t){let{routeContext:e,match:n,children:i}=t,r=j.useContext(ff);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(vs.Provider,{value:e},i)}function jR(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||at(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:v,errors:T}=n,k=g.route.loader&&v[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||k){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let T,k=!1,b=null,F=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,b=g.route.errorElement||OR,h&&(f<0&&v===0?(WR("route-fallback"),k=!0,F=null):f===v&&(k=!0,F=g.route.hydrateFallbackElement||null)));let I=e.concat(a.slice(0,v+1)),P=()=>{let S;return T?S=b:k?S=F:g.route.Component?S=j.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=m,j.createElement(VR,{match:g,routeContext:{outlet:m,matches:I,isDataRoute:n!=null},children:S})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?j.createElement(DR,{location:n.location,revalidation:n.revalidation,component:b,error:T,children:P(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):P()},null)}var BE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(BE||{}),zE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zE||{});function FR(t){let e=j.useContext(ff);return e||at(!1),e}function BR(t){let e=j.useContext(VE);return e||at(!1),e}function zR(t){let e=j.useContext(vs);return e||at(!1),e}function UE(t){let e=zR(),n=e.matches[e.matches.length-1];return n.route.id||at(!1),n.route.id}function UR(){var t;let e=j.useContext(jE),n=BR(),i=UE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function HR(){let{router:t}=FR(BE.UseNavigateStable),e=UE(zE.UseNavigateStable),n=j.useRef(!1);return FE(()=>{n.current=!0}),j.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Du({fromRouteId:e},o)))},[t,e])}const V0={};function WR(t,e,n){V0[t]||(V0[t]=!0)}function $R(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function HE(t){let{to:e,replace:n,state:i,relative:r}=t;Ja()||at(!1);let{future:o,static:a}=j.useContext(dr),{matches:u}=j.useContext(vs),{pathname:h}=mo(),f=Hy(),m=Uy(e,zy(u,o.v7_relativeSplatPath),h,r==="path"),g=JSON.stringify(m);return j.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function Fs(t){at(!1)}function qR(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Br.Pop,navigator:o,static:a=!1,future:u}=t;Ja()&&at(!1);let h=e.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:h,navigator:o,static:a,future:Du({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=po(i));let{pathname:m="/",search:g="",hash:v="",state:T=null,key:k="default"}=i,b=j.useMemo(()=>{let F=Ba(m,h);return F==null?null:{location:{pathname:F,search:g,hash:v,state:T,key:k},navigationType:r}},[h,m,g,v,T,k,r]);return b==null?null:j.createElement(dr.Provider,{value:f},j.createElement(pf.Provider,{children:n,value:b}))}function GR(t){let{children:e,location:n}=t;return LR(ng(e),n)}new Promise(()=>{});function ng(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(i,r)=>{if(!j.isValidElement(i))return;let o=[...e,r];if(i.type===j.Fragment){n.push.apply(n,ng(i.props.children,o));return}i.type!==Fs&&at(!1),!i.props.index||!i.props.children||at(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=ng(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vd.apply(this,arguments)}function WE(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ZR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KR(t,e){return t.button===0&&(!e||e==="_self")&&!ZR(t)}const QR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],XR="6";try{window.__reactRouterVersion=XR}catch{}const JR=j.createContext({isTransitioning:!1}),e2="startTransition",j0=qA[e2];function t2(t){let{basename:e,children:n,future:i,window:r}=t,o=j.useRef();o.current==null&&(o.current=rR({window:r,v5Compat:!0}));let a=o.current,[u,h]=j.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=j.useCallback(g=>{f&&j0?j0(()=>h(g)):h(g)},[h,f]);return j.useLayoutEffect(()=>a.listen(m),[a,m]),j.useEffect(()=>$R(i),[i]),j.createElement(qR,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const n2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,r2=j.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,v=WE(e,QR),{basename:T}=j.useContext(dr),k,b=!1;if(typeof f=="string"&&i2.test(f)&&(k=f,n2))try{let S=new URL(window.location.href),B=f.startsWith("//")?new URL(S.protocol+f):new URL(f),q=Ba(B.pathname,T);B.origin===S.origin&&q!=null?f=q+B.search+B.hash:b=!0}catch{}let F=bR(f,{relative:r}),I=a2(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function P(S){i&&i(S),S.defaultPrevented||I(S)}return j.createElement("a",vd({},v,{href:k||F,onClick:b||o?i:P,ref:n,target:h}))}),s2=j.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=WE(e,YR),v=mf(h,{relative:g.relative}),T=mo(),k=j.useContext(VE),{navigator:b,basename:F}=j.useContext(dr),I=k!=null&&l2(v)&&f===!0,P=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,S=T.pathname,B=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;r||(S=S.toLowerCase(),B=B?B.toLowerCase():null,P=P.toLowerCase()),B&&F&&(B=Ba(B,F)||B);const q=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let Z=S===P||!a&&S.startsWith(P)&&S.charAt(q)==="/",R=B!=null&&(B===P||!a&&B.startsWith(P)&&B.charAt(P.length)==="/"),C={isActive:Z,isPending:R,isTransitioning:I},N=Z?i:void 0,O;typeof o=="function"?O=o(C):O=[o,Z?"active":null,R?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(C):u;return j.createElement(r2,vd({},g,{"aria-current":N,className:O,ref:n,style:D,to:h,viewTransition:f}),typeof m=="function"?m(C):m)});var ig;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ig||(ig={}));var F0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(F0||(F0={}));function o2(t){let e=j.useContext(ff);return e||at(!1),e}function a2(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=Hy(),f=mo(),m=mf(t,{relative:a});return j.useCallback(g=>{if(KR(g,n)){g.preventDefault();let v=i!==void 0?i:_d(f)===_d(m);h(t,{replace:v,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function l2(t,e){e===void 0&&(e={});let n=j.useContext(JR);n==null&&at(!1);let{basename:i}=o2(ig.useViewTransitionState),r=mf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ba(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Ba(n.nextLocation.pathname,i)||n.nextLocation.pathname;return tg(r.pathname,a)!=null||tg(r.pathname,o)!=null}const $E=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),gf=j.createContext({}),yf=j.createContext(null),_f=typeof document<"u",Wy=_f?j.useLayoutEffect:j.useEffect,qE=j.createContext({strict:!1}),$y=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),u2="framerAppearId",GE="data-"+$y(u2);function c2(t,e,n,i){const{visualElement:r}=j.useContext(gf),o=j.useContext(qE),a=j.useContext(yf),u=j.useContext($E).reducedMotion,h=j.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;j.useInsertionEffect(()=>{f&&f.update(n,a)});const m=j.useRef(!!(n[GE]&&!window.HandoffComplete));return Wy(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),j.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function pa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function h2(t,e,n){return j.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):pa(n)&&(n.current=i))},[e])}function Vu(t){return typeof t=="string"||Array.isArray(t)}function vf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const qy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gy=["initial",...qy];function wf(t){return vf(t.animate)||Gy.some(e=>Vu(t[e]))}function ZE(t){return!!(wf(t)||t.variants)}function d2(t,e){if(wf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Vu(n)?n:void 0,animate:Vu(i)?i:void 0}}return t.inherit!==!1?e:{}}function f2(t){const{initial:e,animate:n}=d2(t,j.useContext(gf));return j.useMemo(()=>({initial:e,animate:n}),[B0(e),B0(n)])}function B0(t){return Array.isArray(t)?t.join(" "):t}const z0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ju={};for(const t in z0)ju[t]={isEnabled:e=>z0[t].some(n=>!!e[n])};function p2(t){for(const e in t)ju[e]={...ju[e],...t[e]}}const Zy=j.createContext({}),KE=j.createContext({}),m2=Symbol.for("motionComponentSymbol");function g2({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&p2(t);function o(u,h){let f;const m={...j.useContext($E),...u,layoutId:y2(u)},{isStatic:g}=m,v=f2(u),T=i(u,g);if(!g&&_f){v.visualElement=c2(r,T,m,e);const k=j.useContext(KE),b=j.useContext(qE).strict;v.visualElement&&(f=v.visualElement.loadFeatures(m,b,t,k))}return j.createElement(gf.Provider,{value:v},f&&v.visualElement?j.createElement(f,{visualElement:v.visualElement,...m}):null,n(r,u,h2(T,v.visualElement,h),T,g,v.visualElement))}const a=j.forwardRef(o);return a[m2]=r,a}function y2({layoutId:t}){const e=j.useContext(Zy).id;return e&&t!==void 0?e+"-"+t:t}function _2(t){function e(i,r={}){return g2(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const v2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ky(t){return typeof t!="string"||t.includes("-")?!1:!!(v2.indexOf(t)>-1||/[A-Z]/.test(t))}const wd={};function w2(t){Object.assign(wd,t)}const tc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],go=new Set(tc);function QE(t,{layout:e,layoutId:n}){return go.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!wd[t]||t==="opacity")}const vn=t=>!!(t&&t.getVelocity),x2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},T2=tc.length;function E2(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<T2;a++){const u=tc[a];if(t[u]!==void 0){const h=x2[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const YE=t=>e=>typeof e=="string"&&e.startsWith(t),XE=YE("--"),rg=YE("var(--"),P2=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,S2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,as=(t,e,n)=>Math.min(Math.max(n,t),e),yo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},lu={...yo,transform:t=>as(0,1,t)},dh={...yo,default:1},uu=t=>Math.round(t*1e5)/1e5,xf=/(-)?([\d]*\.?[\d])+/g,JE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,C2=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function nc(t){return typeof t=="string"}const ic=t=>({test:e=>nc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ar=ic("deg"),Ti=ic("%"),ve=ic("px"),I2=ic("vh"),A2=ic("vw"),U0={...Ti,parse:t=>Ti.parse(t)/100,transform:t=>Ti.transform(t*100)},H0={...yo,transform:Math.round},eP={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,size:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,rotate:Ar,rotateX:Ar,rotateY:Ar,rotateZ:Ar,scale:dh,scaleX:dh,scaleY:dh,scaleZ:dh,skew:Ar,skewX:Ar,skewY:Ar,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:lu,originX:U0,originY:U0,originZ:ve,zIndex:H0,fillOpacity:lu,strokeOpacity:lu,numOctaves:H0};function Qy(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const v=e[g];if(XE(g)){o[g]=v;continue}const T=eP[g],k=S2(v,T);if(go.has(g)){if(h=!0,a[g]=k,!m)continue;v!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=k):r[g]=k}if(e.transform||(h||i?r.transform=E2(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:v="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${v} ${T}`}}const Yy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tP(t,e,n){for(const i in e)!vn(e[i])&&!QE(i,n)&&(t[i]=e[i])}function k2({transformTemplate:t},e,n){return j.useMemo(()=>{const i=Yy();return Qy(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function b2(t,e,n){const i=t.style||{},r={};return tP(r,i,t),Object.assign(r,k2(t,e,n)),t.transformValues?t.transformValues(r):r}function R2(t,e,n){const i={},r=b2(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const L2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||L2.has(t)}let nP=t=>!xd(t);function N2(t){t&&(nP=e=>e.startsWith("on")?!xd(e):t(e))}try{N2(require("@emotion/is-prop-valid").default)}catch{}function M2(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(nP(r)||n===!0&&xd(r)||!e&&!xd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function W0(t,e,n){return typeof t=="string"?t:ve.transform(e+n*t)}function O2(t,e,n){const i=W0(e,t.x,t.width),r=W0(n,t.y,t.height);return`${i} ${r}`}const D2={offset:"stroke-dashoffset",array:"stroke-dasharray"},V2={offset:"strokeDashoffset",array:"strokeDasharray"};function j2(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?D2:V2;t[o.offset]=ve.transform(-i);const a=ve.transform(e),u=ve.transform(n);t[o.array]=`${a} ${u}`}function Xy(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,v){if(Qy(t,f,m,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:k,dimensions:b}=t;T.transform&&(b&&(k.transform=T.transform),delete T.transform),b&&(r!==void 0||o!==void 0||k.transform)&&(k.transformOrigin=O2(b,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&j2(T,a,u,h,!1)}const iP=()=>({...Yy(),attrs:{}}),Jy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function F2(t,e,n,i){const r=j.useMemo(()=>{const o=iP();return Xy(o,e,{enableHardwareAcceleration:!1},Jy(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};tP(o,t.style,t),r.style={...o,...r.style}}return r}function B2(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Ky(n)?F2:R2)(i,o,a,n),m={...M2(i,typeof n=="string",t),...h,ref:r},{children:g}=i,v=j.useMemo(()=>vn(g)?g.get():g,[g]);return j.createElement(n,{...m,children:v})}}function rP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const sP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oP(t,e,n,i){rP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(sP.has(r)?r:$y(r),e.attrs[r])}function e_(t,e){const{style:n}=t,i={};for(const r in n)(vn(n[r])||e.style&&vn(e.style[r])||QE(r,t))&&(i[r]=n[r]);return i}function aP(t,e){const n=e_(t,e);for(const i in t)if(vn(t[i])||vn(e[i])){const r=tc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function t_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function lP(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const Td=t=>Array.isArray(t),z2=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),U2=t=>Td(t)?t[t.length-1]||0:t;function Dh(t){const e=vn(t)?t.get():t;return z2(e)?e.toValue():e}function H2({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:W2(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const uP=t=>(e,n)=>{const i=j.useContext(gf),r=j.useContext(yf),o=()=>H2(t,e,i,r);return n?o():lP(o)};function W2(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=Dh(o[v]);let{initial:a,animate:u}=t;const h=wf(t),f=ZE(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!vf(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const k=t_(t,T);if(!k)return;const{transitionEnd:b,transition:F,...I}=k;for(const P in I){let S=I[P];if(Array.isArray(S)){const B=m?S.length-1:0;S=S[B]}S!==null&&(r[P]=S)}for(const P in b)r[P]=b[P]}),r}const yt=t=>t;class $0{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function $2(t){let e=new $0,n=new $0,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,v=g?e:n;return f&&a.add(h),v.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const fh=["prepare","read","update","preRender","render","postRender"],q2=40;function G2(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=fh.reduce((g,v)=>(g[v]=$2(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,q2),1),r.timestamp=g,r.isProcessing=!0,fh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:fh.reduce((g,v)=>{const T=o[v];return g[v]=(k,b=!1,F=!1)=>(n||h(),T.schedule(k,b,F)),g},{}),cancel:g=>fh.forEach(v=>o[v].cancel(g)),state:r,steps:o}}const{schedule:Ye,cancel:sr,state:Gt,steps:Rp}=G2(typeof requestAnimationFrame<"u"?requestAnimationFrame:yt,!0),Z2={useVisualState:uP({scrapeMotionValuesFromProps:aP,createRenderState:iP,onMount:(t,e,{renderState:n,latestValues:i})=>{Ye.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ye.render(()=>{Xy(n,i,{enableHardwareAcceleration:!1},Jy(e.tagName),t.transformTemplate),oP(e,n)})}})},K2={useVisualState:uP({scrapeMotionValuesFromProps:e_,createRenderState:Yy})};function Q2(t,{forwardMotionProps:e=!1},n,i){return{...Ky(t)?Z2:K2,preloadedFeatures:n,useRender:B2(e),createVisualElement:i,Component:t}}function Zi(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const cP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Tf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Y2=t=>e=>cP(e)&&t(e,Tf(e));function Xi(t,e,n,i){return Zi(t,e,Y2(n),i)}const X2=(t,e)=>n=>e(t(n)),Yr=(...t)=>t.reduce(X2);function hP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const q0=hP("dragHorizontal"),G0=hP("dragVertical");function dP(t){let e=!1;if(t==="y")e=G0();else if(t==="x")e=q0();else{const n=q0(),i=G0();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function fP(){const t=dP(!0);return t?(t(),!1):!0}class ws{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Z0(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||fP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&Ye.update(()=>u[i](o,a))};return Xi(t.current,n,r,{passive:!t.getProps()[i]})}class J2 extends ws{mount(){this.unmount=Yr(Z0(this.node,!0),Z0(this.node,!1))}unmount(){}}class eL extends ws{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yr(Zi(this.node.current,"focus",()=>this.onFocus()),Zi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const pP=(t,e)=>e?t===e?!0:pP(t,e.parentElement):!1;function Lp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Tf(n))}class tL extends ws{constructor(){super(...arguments),this.removeStartListeners=yt,this.removeEndListeners=yt,this.removeAccessibleListeners=yt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=Xi(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Ye.update(()=>{!g&&!pP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=Xi(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Yr(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Lp("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&Ye.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=Zi(this.node.current,"keyup",a),Lp("down",(u,h)=>{this.startPress(u,h)})},n=Zi(this.node.current,"keydown",e),i=()=>{this.isPressing&&Lp("cancel",(o,a)=>this.cancelPress(o,a))},r=Zi(this.node.current,"blur",i);this.removeAccessibleListeners=Yr(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Ye.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!fP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Ye.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Xi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Zi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Yr(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const sg=new WeakMap,Np=new WeakMap,nL=t=>{const e=sg.get(t.target);e&&e(t)},iL=t=>{t.forEach(nL)};function rL({root:t,...e}){const n=t||document;Np.has(n)||Np.set(n,{});const i=Np.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(iL,{root:t,...e})),i[r]}function sL(t,e,n){const i=rL(e);return sg.set(t,n),i.observe(t),()=>{sg.delete(t),i.unobserve(t)}}const oL={some:0,all:1};class aL extends ws{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:oL[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=f?m:g;v&&v(h)};return sL(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(lL(e,n))&&this.startObserver()}unmount(){}}function lL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const uL={inView:{Feature:aL},tap:{Feature:tL},focus:{Feature:eL},hover:{Feature:J2}};function mP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function cL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function hL(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Ef(t,e,n){const i=t.getProps();return t_(i,e,n!==void 0?n:i.custom,cL(t),hL(t))}let n_=yt;const Ys=t=>t*1e3,Ji=t=>t/1e3,dL={current:!1},gP=t=>Array.isArray(t)&&typeof t[0]=="number";function yP(t){return!!(!t||typeof t=="string"&&_P[t]||gP(t)||Array.isArray(t)&&t.every(yP))}const Gl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,_P={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gl([0,.65,.55,1]),circOut:Gl([.55,0,1,.45]),backIn:Gl([.31,.01,.66,-.59]),backOut:Gl([.33,1.53,.69,.99])};function vP(t){if(t)return gP(t)?Gl(t):Array.isArray(t)?t.map(vP):_P[t]}function fL(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=vP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function pL(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const wP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,mL=1e-7,gL=12;function yL(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=wP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>mL&&++u<gL);return a}function rc(t,e,n,i){if(t===e&&n===i)return yt;const r=o=>yL(o,0,1,t,n);return o=>o===0||o===1?o:wP(r(o),e,i)}const _L=rc(.42,0,1,1),vL=rc(0,0,.58,1),xP=rc(.42,0,.58,1),wL=t=>Array.isArray(t)&&typeof t[0]!="number",TP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,EP=t=>e=>1-t(1-e),i_=t=>1-Math.sin(Math.acos(t)),PP=EP(i_),xL=TP(i_),SP=rc(.33,1.53,.69,.99),r_=EP(SP),TL=TP(r_),EL=t=>(t*=2)<1?.5*r_(t):.5*(2-Math.pow(2,-10*(t-1))),PL={linear:yt,easeIn:_L,easeInOut:xP,easeOut:vL,circIn:i_,circInOut:xL,circOut:PP,backIn:r_,backInOut:TL,backOut:SP,anticipate:EL},K0=t=>{if(Array.isArray(t)){n_(t.length===4);const[e,n,i,r]=t;return rc(e,n,i,r)}else if(typeof t=="string")return PL[t];return t},s_=(t,e)=>n=>!!(nc(n)&&C2.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),CP=(t,e,n)=>i=>{if(!nc(i))return i;const[r,o,a,u]=i.match(xf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},SL=t=>as(0,255,t),Mp={...yo,transform:t=>Math.round(SL(t))},Gs={test:s_("rgb","red"),parse:CP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Mp.transform(t)+", "+Mp.transform(e)+", "+Mp.transform(n)+", "+uu(lu.transform(i))+")"};function CL(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const og={test:s_("#"),parse:CL,transform:Gs.transform},ma={test:s_("hsl","hue"),parse:CP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ti.transform(uu(e))+", "+Ti.transform(uu(n))+", "+uu(lu.transform(i))+")"},nn={test:t=>Gs.test(t)||og.test(t)||ma.test(t),parse:t=>Gs.test(t)?Gs.parse(t):ma.test(t)?ma.parse(t):og.parse(t),transform:t=>nc(t)?t:t.hasOwnProperty("red")?Gs.transform(t):ma.transform(t)},st=(t,e,n)=>-n*t+n*e+t;function Op(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function IL({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=Op(h,u,t+1/3),o=Op(h,u,t),a=Op(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Dp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},AL=[og,Gs,ma],kL=t=>AL.find(e=>e.test(t));function Q0(t){const e=kL(t);let n=e.parse(t);return e===ma&&(n=IL(n)),n}const IP=(t,e)=>{const n=Q0(t),i=Q0(e),r={...n};return o=>(r.red=Dp(n.red,i.red,o),r.green=Dp(n.green,i.green,o),r.blue=Dp(n.blue,i.blue,o),r.alpha=st(n.alpha,i.alpha,o),Gs.transform(r))};function bL(t){var e,n;return isNaN(t)&&nc(t)&&(((e=t.match(xf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(JE))===null||n===void 0?void 0:n.length)||0)>0}const AP={regex:P2,countKey:"Vars",token:"${v}",parse:yt},kP={regex:JE,countKey:"Colors",token:"${c}",parse:nn.parse},bP={regex:xf,countKey:"Numbers",token:"${n}",parse:yo.parse};function Vp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Ed(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Vp(n,AP),Vp(n,kP),Vp(n,bP),n}function RP(t){return Ed(t).values}function LP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Ed(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(AP.token,a[h]):h<i+n?u=u.replace(kP.token,nn.transform(a[h])):u=u.replace(bP.token,uu(a[h]));return u}}const RL=t=>typeof t=="number"?0:t;function LL(t){const e=RP(t);return LP(t)(e.map(RL))}const ls={test:bL,parse:RP,createTransformer:LP,getAnimatableNone:LL},NP=(t,e)=>n=>`${n>0?e:t}`;function MP(t,e){return typeof t=="number"?n=>st(t,e,n):nn.test(t)?IP(t,e):t.startsWith("var(")?NP(t,e):DP(t,e)}const OP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>MP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},NL=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=MP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},DP=(t,e)=>{const n=ls.createTransformer(e),i=Ed(t),r=Ed(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Yr(OP(i.values,r.values),n):NP(t,e)},Fu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Y0=(t,e)=>n=>st(t,e,n);function ML(t){return typeof t=="number"?Y0:typeof t=="string"?nn.test(t)?IP:DP:Array.isArray(t)?OP:typeof t=="object"?NL:Y0}function OL(t,e,n){const i=[],r=n||ML(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||yt:e;u=Yr(h,u)}i.push(u)}return i}function VP(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(n_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=OL(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Fu(t[m],t[m+1],f);return a[m](g)};return n?f=>h(as(t[0],t[o-1],f)):h}function DL(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Fu(0,e,i);t.push(st(n,1,r))}}function VL(t){const e=[0];return DL(e,t.length-1),e}function jL(t,e){return t.map(n=>n*e)}function FL(t,e){return t.map(()=>e||xP).splice(0,t.length-1)}function Pd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=wL(i)?i.map(K0):K0(i),o={done:!1,value:e[0]},a=jL(n&&n.length===e.length?n:VL(e),t),u=VP(a,e,{ease:Array.isArray(r)?r:FL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function jP(t,e){return e?t*(1e3/e):0}const BL=5;function FP(t,e,n){const i=Math.max(e-BL,0);return jP(n-t(i),e-i)}const jp=.001,zL=.01,UL=10,HL=.05,WL=1;function $L({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=as(HL,WL,a),t=as(zL,UL,Ji(t)),a<1?(r=f=>{const m=f*a,g=m*t,v=m-n,T=ag(f,a),k=Math.exp(-g);return jp-v/T*k},o=f=>{const g=f*a*t,v=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-g),b=ag(Math.pow(f,2),a);return(-r(f)+jp>0?-1:1)*((v-T)*k)/b}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-jp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=GL(r,o,u);if(t=Ys(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const qL=12;function GL(t,e,n){let i=n;for(let r=1;r<qL;r++)i=i-t(i)/e(i);return i}function ag(t,e){return t*Math.sqrt(1-e*e)}const ZL=["duration","bounce"],KL=["stiffness","damping","mass"];function X0(t,e){return e.some(n=>t[n]!==void 0)}function QL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!X0(t,KL)&&X0(t,ZL)){const n=$L(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function BP({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:v}=QL({...i,velocity:-Ji(i.velocity||0)}),T=g||0,k=h/(2*Math.sqrt(u*f)),b=o-r,F=Ji(Math.sqrt(u/f)),I=Math.abs(b)<5;n||(n=I?.01:2),e||(e=I?.005:.5);let P;if(k<1){const S=ag(F,k);P=B=>{const q=Math.exp(-k*F*B);return o-q*((T+k*F*b)/S*Math.sin(S*B)+b*Math.cos(S*B))}}else if(k===1)P=S=>o-Math.exp(-F*S)*(b+(T+F*b)*S);else{const S=F*Math.sqrt(k*k-1);P=B=>{const q=Math.exp(-k*F*B),Z=Math.min(S*B,300);return o-q*((T+k*F*b)*Math.sinh(Z)+S*b*Math.cosh(Z))/S}}return{calculatedDuration:v&&m||null,next:S=>{const B=P(S);if(v)a.done=S>=m;else{let q=T;S!==0&&(k<1?q=FP(P,S,B):q=0);const Z=Math.abs(q)<=n,R=Math.abs(o-B)<=e;a.done=Z&&R}return a.value=a.done?o:B,a}}}function J0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],v={done:!1,value:g},T=C=>u!==void 0&&C<u||h!==void 0&&C>h,k=C=>u===void 0?h:h===void 0||Math.abs(u-C)<Math.abs(h-C)?u:h;let b=n*e;const F=g+b,I=a===void 0?F:a(F);I!==F&&(b=I-g);const P=C=>-b*Math.exp(-C/i),S=C=>I+P(C),B=C=>{const N=P(C),O=S(C);v.done=Math.abs(N)<=f,v.value=v.done?I:O};let q,Z;const R=C=>{T(v.value)&&(q=C,Z=BP({keyframes:[v.value,k(v.value)],velocity:FP(S,C,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:C=>{let N=!1;return!Z&&q===void 0&&(N=!0,B(C),R(C)),q!==void 0&&C>q?Z.next(C-q):(!N&&B(C),v)}}}const YL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ye.update(e,!0),stop:()=>sr(e),now:()=>Gt.isProcessing?Gt.timestamp:performance.now()}},ew=2e4;function tw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<ew;)e+=n,i=t.next(e);return e>=ew?1/0:e}const XL={decay:J0,inertia:J0,tween:Pd,keyframes:Pd,spring:BP};function Sd({autoplay:t=!0,delay:e=0,driver:n=YL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,...v}){let T=1,k=!1,b,F;const I=()=>{F=new Promise(ie=>{b=ie})};I();let P;const S=XL[r]||Pd;let B;S!==Pd&&typeof i[0]!="number"&&(B=VP([0,100],i,{clamp:!1}),i=[0,100]);const q=S({...v,keyframes:i});let Z;u==="mirror"&&(Z=S({...v,keyframes:[...i].reverse(),velocity:-(v.velocity||0)}));let R="idle",C=null,N=null,O=null;q.calculatedDuration===null&&o&&(q.calculatedDuration=tw(q));const{calculatedDuration:D}=q;let z=1/0,M=1/0;D!==null&&(z=D+a,M=z*(o+1)-a);let xe=0;const ft=ie=>{if(N===null)return;T>0&&(N=Math.min(N,ie)),T<0&&(N=Math.min(ie-M/T,N)),C!==null?xe=C:xe=Math.round(ie-N)*T;const te=xe-e*(T>=0?1:-1),re=T>=0?te<0:te>M;xe=Math.max(te,0),R==="finished"&&C===null&&(xe=M);let le=xe,ae=q;if(o){const Me=Math.min(xe,M)/z;let ge=Math.floor(Me),We=Me%1;!We&&Me>=1&&(We=1),We===1&&ge--,ge=Math.min(ge,o+1),!!(ge%2)&&(u==="reverse"?(We=1-We,a&&(We-=a/z)):u==="mirror"&&(ae=Z)),le=as(0,1,We)*z}const J=re?{done:!1,value:i[0]}:ae.next(le);B&&(J.value=B(J.value));let{done:me}=J;!re&&D!==null&&(me=T>=0?xe>=M:xe<=0);const Ze=C===null&&(R==="finished"||R==="running"&&me);return g&&g(J.value),Ze&&G(),J},Ie=()=>{P&&P.stop(),P=void 0},ct=()=>{R="idle",Ie(),b(),I(),N=O=null},G=()=>{R="finished",m&&m(),Ie(),b()},de=()=>{if(k)return;P||(P=n(ft));const ie=P.now();h&&h(),C!==null?N=ie-C:(!N||R==="finished")&&(N=ie),R==="finished"&&I(),O=N,C=null,R="running",P.start()};t&&de();const ee={then(ie,te){return F.then(ie,te)},get time(){return Ji(xe)},set time(ie){ie=Ys(ie),xe=ie,C!==null||!P||T===0?C=ie:N=P.now()-ie/T},get duration(){const ie=q.calculatedDuration===null?tw(q):q.calculatedDuration;return Ji(ie)},get speed(){return T},set speed(ie){ie===T||!P||(T=ie,ee.time=Ji(xe))},get state(){return R},play:de,pause:()=>{R="paused",C=xe},stop:()=>{k=!0,R!=="idle"&&(R="idle",f&&f(),ct())},cancel:()=>{O!==null&&ft(O),ct()},complete:()=>{R="finished"},sample:ie=>(N=0,ft(ie))};return ee}function JL(t){let e;return()=>(e===void 0&&(e=t()),e)}const eN=JL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tN=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ph=10,nN=2e4,iN=(t,e)=>e.type==="spring"||t==="backgroundColor"||!yP(e.ease);function rN(t,e,{onUpdate:n,onComplete:i,...r}){if(!(eN()&&tN.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(S=>{u=S})};m();let{keyframes:g,duration:v=300,ease:T,times:k}=r;if(iN(e,r)){const S=Sd({...r,repeat:0,delay:0});let B={done:!1,value:g[0]};const q=[];let Z=0;for(;!B.done&&Z<nN;)B=S.sample(Z),q.push(B.value),Z+=ph;k=void 0,g=q,v=Z-ph,T="linear"}const b=fL(t.owner.current,e,g,{...r,duration:v,ease:T,times:k}),F=()=>{f=!1,b.cancel()},I=()=>{f=!0,Ye.update(F),u(),m()};return b.onfinish=()=>{f||(t.set(pL(g,r)),i&&i(),I())},{then(S,B){return h.then(S,B)},attachTimeline(S){return b.timeline=S,b.onfinish=null,yt},get time(){return Ji(b.currentTime||0)},set time(S){b.currentTime=Ys(S)},get speed(){return b.playbackRate},set speed(S){b.playbackRate=S},get duration(){return Ji(v)},play:()=>{a||(b.play(),sr(F))},pause:()=>b.pause(),stop:()=>{if(a=!0,b.playState==="idle")return;const{currentTime:S}=b;if(S){const B=Sd({...r,autoplay:!1});t.setWithVelocity(B.sample(S-ph).value,B.sample(S).value,ph)}I()},complete:()=>{f||b.finish()},cancel:I}}function sN({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:yt,pause:yt,stop:yt,then:o=>(o(),Promise.resolve()),cancel:yt,complete:yt});return e?Sd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const oN={type:"spring",stiffness:500,damping:25,restSpeed:10},aN=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),lN={type:"keyframes",duration:.8},uN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cN=(t,{keyframes:e})=>e.length>2?lN:go.has(t)?t.startsWith("scale")?aN(e[1]):oN:uN,lg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ls.test(e)||e==="0")&&!e.startsWith("url(")),hN=new Set(["brightness","contrast","saturate","opacity"]);function dN(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(xf)||[];if(!i)return t;const r=n.replace(i,"");let o=hN.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const fN=/([a-z-]*)\(.*?\)/g,ug={...ls,getAnimatableNone:t=>{const e=t.match(fN);return e?e.map(dN).join(" "):t}},pN={...eP,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:ug,WebkitFilter:ug},o_=t=>pN[t];function zP(t,e){let n=o_(t);return n!==ug&&(n=ls),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const UP=t=>/^0[^.\s]+$/.test(t);function mN(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||UP(t)}function gN(t,e,n,i){const r=lg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),mN(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=zP(e,u)}return o}function yN({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function a_(t,e){return t[e]||t.default||t}const _N={skipAnimations:!1},l_=(t,e,n,i={})=>r=>{const o=a_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Ys(a);const h=gN(e,t,n,o),f=h[0],m=h[h.length-1],g=lg(t,f),v=lg(t,m);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:k=>{e.set(k),o.onUpdate&&o.onUpdate(k)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(yN(o)||(T={...T,...cN(t,T)}),T.duration&&(T.duration=Ys(T.duration)),T.repeatDelay&&(T.repeatDelay=Ys(T.repeatDelay)),!g||!v||dL.current||o.type===!1||_N.skipAnimations)return sN(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const k=rN(e,t,T);if(k)return k}return Sd(T)};function Cd(t){return!!(vn(t)&&t.add)}const HP=t=>/^\-?\d*\.?\d+$/.test(t);function u_(t,e){t.indexOf(e)===-1&&t.push(e)}function c_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class h_{constructor(){this.subscriptions=[]}add(e){return u_(this.subscriptions,e),()=>c_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vN=t=>!isNaN(parseFloat(t));class wN{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Gt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Ye.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ye.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=vN(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new h_);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ye.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?jP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function za(t,e){return new wN(t,e)}const WP=t=>e=>e.test(t),xN={test:t=>t==="auto",parse:t=>t},$P=[yo,ve,Ti,Ar,A2,I2,xN],zl=t=>$P.find(WP(t)),TN=[...$P,nn,ls],EN=t=>TN.find(WP(t));function PN(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,za(n))}function SN(t,e){const n=Ef(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=U2(o[a]);PN(t,a,u)}}function CN(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(HP(m)||UP(m))?m=parseFloat(m):!EN(m)&&ls.test(f)&&(m=zP(h,f)),t.addValue(h,za(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function IN(t,e){return e?(e[t]||e.default||e).from:void 0}function AN(t,e,n){const i={};for(const r in t){const o=IN(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function kN({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function bN(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function qP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const v=t.getValue(g),T=u[g];if(!v||T===void 0||m&&kN(m,g))continue;const k={delay:n,elapsed:0,...a_(o||{},g)};if(window.HandoffAppearAnimations){const I=t.getProps()[GE];if(I){const P=window.HandoffAppearAnimations(I,g,v,Ye);P!==null&&(k.elapsed=P,k.isHandoff=!0)}}let b=!k.isHandoff&&!bN(v,T);if(k.type==="spring"&&(v.getVelocity()||k.velocity)&&(b=!1),v.animation&&(b=!1),b)continue;v.start(l_(g,v,T,t.shouldReduceMotion&&go.has(g)?{type:!1}:k));const F=v.animation;Cd(h)&&(h.add(g),F.then(()=>h.remove(g))),f.push(F)}return a&&Promise.all(f).then(()=>{a&&SN(t,a)}),f}function cg(t,e,n={}){const i=Ef(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(qP(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return RN(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function RN(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(LN).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(cg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function LN(t,e){return t.sortNodePosition(e)}function NN(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>cg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=cg(t,e,n);else{const r=typeof e=="function"?Ef(t,e,n.custom):e;i=Promise.all(qP(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const MN=[...qy].reverse(),ON=qy.length;function DN(t){return e=>Promise.all(e.map(({animation:n,options:i})=>NN(t,n,i)))}function VN(t){let e=DN(t);const n=FN();let i=!0;const r=(h,f)=>{const m=Ef(t,f);if(m){const{transition:g,transitionEnd:v,...T}=m;h={...h,...T,...v}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},v=[],T=new Set;let k={},b=1/0;for(let I=0;I<ON;I++){const P=MN[I],S=n[P],B=m[P]!==void 0?m[P]:g[P],q=Vu(B),Z=P===f?S.isActive:null;Z===!1&&(b=I);let R=B===g[P]&&B!==m[P]&&q;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),S.protectedKeys={...k},!S.isActive&&Z===null||!B&&!S.prevProp||vf(B)||typeof B=="boolean")continue;let N=jN(S.prevProp,B)||P===f&&S.isActive&&!R&&q||I>b&&q,O=!1;const D=Array.isArray(B)?B:[B];let z=D.reduce(r,{});Z===!1&&(z={});const{prevResolvedValues:M={}}=S,xe={...M,...z},ft=Ie=>{N=!0,T.has(Ie)&&(O=!0,T.delete(Ie)),S.needsAnimating[Ie]=!0};for(const Ie in xe){const ct=z[Ie],G=M[Ie];if(k.hasOwnProperty(Ie))continue;let de=!1;Td(ct)&&Td(G)?de=!mP(ct,G):de=ct!==G,de?ct!==void 0?ft(Ie):T.add(Ie):ct!==void 0&&T.has(Ie)?ft(Ie):S.protectedKeys[Ie]=!0}S.prevProp=B,S.prevResolvedValues=z,S.isActive&&(k={...k,...z}),i&&t.blockInitialAnimation&&(N=!1),N&&(!R||O)&&v.push(...D.map(Ie=>({animation:Ie,options:{type:P,...h}})))}if(T.size){const I={};T.forEach(P=>{const S=t.getBaseTarget(P);S!==void 0&&(I[P]=S)}),v.push({animation:I})}let F=!!v.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(F=!1),i=!1,F?e(v):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var k;return(k=T.animationState)===null||k===void 0?void 0:k.setActive(h,f)}),n[h].isActive=f;const v=a(m,h);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function jN(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!mP(e,t):!1}function Ds(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function FN(){return{animate:Ds(!0),whileInView:Ds(),whileHover:Ds(),whileTap:Ds(),whileDrag:Ds(),whileFocus:Ds(),exit:Ds()}}class BN extends ws{constructor(e){super(e),e.animationState||(e.animationState=VN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),vf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let zN=0;class UN extends ws{constructor(){super(...arguments),this.id=zN++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const HN={animation:{Feature:BN},exit:{Feature:UN}},nw=(t,e)=>Math.abs(t-e);function WN(t,e){const n=nw(t.x,e.x),i=nw(t.y,e.y);return Math.sqrt(n**2+i**2)}class GP{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Bp(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=WN(g.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:k}=g,{timestamp:b}=Gt;this.history.push({...k,timestamp:b});const{onStart:F,onMove:I}=this.handlers;v||(F&&F(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Fp(v,this.transformPagePoint),Ye.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:T,onSessionEnd:k,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=Bp(g.type==="pointercancel"?this.lastMoveEventInfo:Fp(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,F),k&&k(g,F)},!cP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Tf(e),u=Fp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Gt;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,Bp(u,this.history)),this.removeListeners=Yr(Xi(this.contextWindow,"pointermove",this.handlePointerMove),Xi(this.contextWindow,"pointerup",this.handlePointerUp),Xi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),sr(this.updatePoint)}}function Fp(t,e){return e?{point:e(t.point)}:t}function iw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Bp({point:t},e){return{point:t,delta:iw(t,ZP(e)),offset:iw(t,$N(e)),velocity:qN(e,.1)}}function $N(t){return t[0]}function ZP(t){return t[t.length-1]}function qN(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=ZP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ys(e)));)n--;if(!i)return{x:0,y:0};const o=Ji(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Cn(t){return t.max-t.min}function hg(t,e=0,n=.01){return Math.abs(t-e)<=n}function rw(t,e,n,i=.5){t.origin=i,t.originPoint=st(e.min,e.max,t.origin),t.scale=Cn(n)/Cn(e),(hg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=st(n.min,n.max,t.origin)-t.originPoint,(hg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function cu(t,e,n,i){rw(t.x,e.x,n.x,i?i.originX:void 0),rw(t.y,e.y,n.y,i?i.originY:void 0)}function sw(t,e,n){t.min=n.min+e.min,t.max=t.min+Cn(e)}function GN(t,e,n){sw(t.x,e.x,n.x),sw(t.y,e.y,n.y)}function ow(t,e,n){t.min=e.min-n.min,t.max=t.min+Cn(e)}function hu(t,e,n){ow(t.x,e.x,n.x),ow(t.y,e.y,n.y)}function ZN(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?st(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?st(n,t,i.max):Math.min(t,n)),t}function aw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function KN(t,{top:e,left:n,bottom:i,right:r}){return{x:aw(t.x,n,r),y:aw(t.y,e,i)}}function lw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function QN(t,e){return{x:lw(t.x,e.x),y:lw(t.y,e.y)}}function YN(t,e){let n=.5;const i=Cn(t),r=Cn(e);return r>i?n=Fu(e.min,e.max-i,t.min):i>r&&(n=Fu(t.min,t.max-r,e.min)),as(0,1,n)}function XN(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const dg=.35;function JN(t=dg){return t===!1?t=0:t===!0&&(t=dg),{x:uw(t,"left","right"),y:uw(t,"top","bottom")}}function uw(t,e,n){return{min:cw(t,e),max:cw(t,n)}}function cw(t,e){return typeof t=="number"?t:t[e]||0}const hw=()=>({translate:0,scale:1,origin:0,originPoint:0}),ga=()=>({x:hw(),y:hw()}),dw=()=>({min:0,max:0}),Tt=()=>({x:dw(),y:dw()});function jn(t){return[t("x"),t("y")]}function KP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function eM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function tM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function zp(t){return t===void 0||t===1}function fg({scale:t,scaleX:e,scaleY:n}){return!zp(t)||!zp(e)||!zp(n)}function Bs(t){return fg(t)||QP(t)||t.z||t.rotate||t.rotateX||t.rotateY}function QP(t){return fw(t.x)||fw(t.y)}function fw(t){return t&&t!=="0%"}function Id(t,e,n){const i=t-n,r=e*i;return n+r}function pw(t,e,n,i,r){return r!==void 0&&(t=Id(t,r,i)),Id(t,n,i)+e}function pg(t,e=0,n=1,i,r){t.min=pw(t.min,e,n,i,r),t.max=pw(t.max,e,n,i,r)}function YP(t,{x:e,y:n}){pg(t.x,e.translate,e.scale,e.originPoint),pg(t.y,n.translate,n.scale,n.originPoint)}function nM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ya(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,YP(t,a)),i&&Bs(o.latestValues)&&ya(t,o.latestValues))}e.x=mw(e.x),e.y=mw(e.y)}function mw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Rr(t,e){t.min=t.min+e,t.max=t.max+e}function gw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=st(t.min,t.max,o);pg(t,e[n],e[i],a,e.scale)}const iM=["x","scaleX","originX"],rM=["y","scaleY","originY"];function ya(t,e){gw(t.x,e,iM),gw(t.y,e,rM)}function XP(t,e){return KP(tM(t.getBoundingClientRect(),e))}function sM(t,e,n){const i=XP(t,n),{scroll:r}=e;return r&&(Rr(i.x,r.offset.x),Rr(i.y,r.offset.y)),i}const JP=({current:t})=>t?t.ownerDocument.defaultView:null,oM=new WeakMap;class aM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Tf(m,"page").point)},o=(m,g)=>{const{drag:v,dragPropagation:T,onDragStart:k}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=dP(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jn(F=>{let I=this.getAxisMotionValue(F).get()||0;if(Ti.test(I)){const{projection:P}=this.visualElement;if(P&&P.layout){const S=P.layout.layoutBox[F];S&&(I=Cn(S)*(parseFloat(I)/100))}}this.originPoint[F]=I}),k&&Ye.update(()=>k(m,g),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:k,onDrag:b}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:F}=g;if(T&&this.currentDirection===null){this.currentDirection=lM(F),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",g.point,F),this.updateAxis("y",g.point,F),this.visualElement.render(),b&&b(m,g)},u=(m,g)=>this.stop(m,g),h=()=>jn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new GP(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:JP(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Ye.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!mh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=ZN(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&pa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=KN(r.layoutBox,n):this.constraints=!1,this.elastic=JN(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&jn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=XN(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!pa(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=sM(i,r.root,this.visualElement.getTransformPagePoint());let a=QN(r.layout.layoutBox,o);if(n){const u=n(eM(a));this.hasMutatedConstraints=!!u,u&&(a=KP(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=jn(m=>{if(!mh(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const v=r?200:1e6,T=r?40:1e7,k={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(l_(e,i,0,n))}stopAnimation(){jn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){jn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){jn(n=>{const{drag:i}=this.getProps();if(!mh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-st(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!pa(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};jn(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=YN({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),jn(a=>{if(!mh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(st(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;oM.set(this.visualElement,this);const e=this.visualElement.current,n=Xi(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();pa(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=Zi(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(jn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=dg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function mh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class uM extends ws{constructor(e){super(e),this.removeGroupControls=yt,this.removeListeners=yt,this.controls=new aM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yt}unmount(){this.removeGroupControls(),this.removeListeners()}}const yw=t=>(e,n)=>{t&&Ye.update(()=>t(e,n))};class cM extends ws{constructor(){super(...arguments),this.removePointerDownListener=yt}onPointerDown(e){this.session=new GP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:yw(e),onStart:yw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Ye.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=Xi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function hM(){const t=j.useContext(yf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=j.useId();return j.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Vh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _w(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ul={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ve.test(t))t=parseFloat(t);else return t;const n=_w(t,e.target.x),i=_w(t,e.target.y);return`${n}% ${i}%`}},dM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ls.parse(t);if(r.length>5)return i;const o=ls.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=st(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class fM extends eo.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;w2(pM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Vh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Ye.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eS(t){const[e,n]=hM(),i=j.useContext(Zy);return eo.createElement(fM,{...t,layoutGroup:i,switchLayoutGroup:j.useContext(KE),isPresent:e,safeToRemove:n})}const pM={borderRadius:{...Ul,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ul,borderTopRightRadius:Ul,borderBottomLeftRadius:Ul,borderBottomRightRadius:Ul,boxShadow:dM},tS=["TopLeft","TopRight","BottomLeft","BottomRight"],mM=tS.length,vw=t=>typeof t=="string"?parseFloat(t):t,ww=t=>typeof t=="number"||ve.test(t);function gM(t,e,n,i,r,o){r?(t.opacity=st(0,n.opacity!==void 0?n.opacity:1,yM(i)),t.opacityExit=st(e.opacity!==void 0?e.opacity:1,0,_M(i))):o&&(t.opacity=st(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<mM;a++){const u=`border${tS[a]}Radius`;let h=xw(e,u),f=xw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||ww(h)===ww(f)?(t[u]=Math.max(st(vw(h),vw(f),i),0),(Ti.test(f)||Ti.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=st(e.rotate||0,n.rotate||0,i))}function xw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const yM=nS(0,.5,PP),_M=nS(.5,.95,yt);function nS(t,e,n){return i=>i<t?0:i>e?1:n(Fu(t,e,i))}function Tw(t,e){t.min=e.min,t.max=e.max}function Vn(t,e){Tw(t.x,e.x),Tw(t.y,e.y)}function Ew(t,e,n,i,r){return t-=e,t=Id(t,1/n,i),r!==void 0&&(t=Id(t,1/r,i)),t}function vM(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ti.test(e)&&(e=parseFloat(e),e=st(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=st(o.min,o.max,i);t===o&&(u-=e),t.min=Ew(t.min,e,n,u,r),t.max=Ew(t.max,e,n,u,r)}function Pw(t,e,[n,i,r],o,a){vM(t,e[n],e[i],e[r],e.scale,o,a)}const wM=["x","scaleX","originX"],xM=["y","scaleY","originY"];function Sw(t,e,n,i){Pw(t.x,e,wM,n?n.x:void 0,i?i.x:void 0),Pw(t.y,e,xM,n?n.y:void 0,i?i.y:void 0)}function Cw(t){return t.translate===0&&t.scale===1}function iS(t){return Cw(t.x)&&Cw(t.y)}function TM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function rS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Iw(t){return Cn(t.x)/Cn(t.y)}class EM{constructor(){this.members=[]}add(e){u_(this.members,e),e.scheduleRender()}remove(e){if(c_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Aw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const PM=(t,e)=>t.depth-e.depth;class SM{constructor(){this.children=[],this.isDirty=!1}add(e){u_(this.children,e),this.isDirty=!0}remove(e){c_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PM),this.isDirty=!1,this.children.forEach(e)}}function CM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(sr(i),t(o-e))};return Ye.read(i,!0),()=>sr(i)}function IM(t){window.MotionDebug&&window.MotionDebug.record(t)}function AM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function kM(t,e,n){const i=vn(t)?t:za(t);return i.start(l_("",i,e,n)),i.animation}const kw=["","X","Y","Z"],bM={visibility:"hidden"},bw=1e3;let RM=0;const zs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function sS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=RM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zs.totalNodes=zs.resolvedTargetDeltas=zs.recalculatedProjection=0,this.nodes.forEach(MM),this.nodes.forEach(FM),this.nodes.forEach(BM),this.nodes.forEach(OM),IM(zs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new SM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new h_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=AM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=CM(v,250),Vh.hasAnimatedSinceResize&&(Vh.hasAnimatedSinceResize=!1,this.nodes.forEach(Lw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||$M,{onLayoutAnimationStart:F,onLayoutAnimationComplete:I}=m.getProps(),P=!this.targetLayout||!rS(this.targetLayout,k)||T,S=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,S);const B={...a_(b,"layout"),onPlay:F,onComplete:I};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||Lw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,sr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zM),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Rw);return}this.isUpdating||this.nodes.forEach(VM),this.isUpdating=!1,this.nodes.forEach(jM),this.nodes.forEach(LM),this.nodes.forEach(NM),this.clearAllSnapshots();const u=performance.now();Gt.delta=as(0,1e3/60,u-Gt.timestamp),Gt.timestamp=u,Gt.isProcessing=!0,Rp.update.process(Gt),Rp.preRender.process(Gt),Rp.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(DM),this.sharedNodes.forEach(UM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!iS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Bs(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),qM(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Tt();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Rr(u.x,h.offset.x),Rr(u.y,h.offset.y)),u}removeElementScroll(a){const u=Tt();Vn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){Vn(u,a);const{scroll:v}=this.root;v&&(Rr(u.x,-v.offset.x),Rr(u.y,-v.offset.y))}Rr(u.x,m.offset.x),Rr(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=Tt();Vn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ya(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Bs(m.latestValues)&&ya(h,m.latestValues)}return Bs(this.latestValues)&&ya(h,this.latestValues),h}removeTransform(a){const u=Tt();Vn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Bs(f.latestValues))continue;fg(f.latestValues)&&f.updateSnapshot();const m=Tt(),g=f.measurePageBox();Vn(m,g),Sw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Bs(this.latestValues)&&Sw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Gt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),hu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vn(this.target,this.layout.layoutBox),YP(this.target,this.targetDelta)):Vn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),hu(this.relativeTargetOrigin,this.target,T.target),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}zs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||fg(this.parent.latestValues)||QP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Vn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;nM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:k}=u;if(!k){this.projectionTransform&&(this.projectionDelta=ga(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ga(),this.projectionDeltaWithTransform=ga());const b=this.projectionTransform;cu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),this.projectionTransform=Aw(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),zs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=ga();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=Tt(),T=h?h.source:void 0,k=this.layout?this.layout.source:void 0,b=T!==k,F=this.getStack(),I=!F||F.members.length<=1,P=!!(b&&!I&&this.options.crossfade===!0&&!this.path.some(WM));this.animationProgress=0;let S;this.mixTargetDelta=B=>{const q=B/1e3;Nw(g.x,a.x,q),Nw(g.y,a.y,q),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hu(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HM(this.relativeTarget,this.relativeTargetOrigin,v,q),S&&TM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Tt()),Vn(S,this.relativeTarget)),b&&(this.animationValues=m,gM(m,f,this.latestValues,q,P,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(sr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ye.update(()=>{Vh.hasAnimatedSinceResize=!0,this.currentAnimation=kM(0,bw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&oS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Tt();const g=Cn(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const v=Cn(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}Vn(u,h),ya(u,m),cu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new EM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<kw.length;m++){const g="rotate"+kw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Dh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Dh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Bs(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=Aw(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:T,y:k}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${k.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in wd){if(v[b]===void 0)continue;const{correct:F,applyTo:I}=wd[b],P=f.transform==="none"?v[b]:F(v[b],g);if(I){const S=I.length;for(let B=0;B<S;B++)f[I[B]]=P}else f[b]=P}return this.options.layoutId&&(f.pointerEvents=g===this?Dh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Rw),this.root.sharedNodes.clear()}}}function LM(t){t.updateLayout()}function NM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?jn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=Cn(v);v.min=i[g].min,v.max=v.min+T}):oS(o,n.layoutBox,i)&&jn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],T=Cn(i[g]);v.max=v.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=ga();cu(u,i,n.layoutBox);const h=ga();a?cu(h,t.applyTransform(r,!0),n.measuredBox):cu(h,i,n.layoutBox);const f=!iS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:T}=g;if(v&&T){const k=Tt();hu(k,n.layoutBox,v.layoutBox);const b=Tt();hu(b,i,T.layoutBox),rS(k,b)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=k,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function MM(t){zs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function OM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function DM(t){t.clearSnapshot()}function Rw(t){t.clearMeasurements()}function VM(t){t.isLayoutDirty=!1}function jM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Lw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function FM(t){t.resolveTargetDelta()}function BM(t){t.calcProjection()}function zM(t){t.resetRotation()}function UM(t){t.removeLeadSnapshot()}function Nw(t,e,n){t.translate=st(e.translate,0,n),t.scale=st(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Mw(t,e,n,i){t.min=st(e.min,n.min,i),t.max=st(e.max,n.max,i)}function HM(t,e,n,i){Mw(t.x,e.x,n.x,i),Mw(t.y,e.y,n.y,i)}function WM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const $M={duration:.45,ease:[.4,0,.1,1]},Ow=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Dw=Ow("applewebkit/")&&!Ow("chrome/")?Math.round:yt;function Vw(t){t.min=Dw(t.min),t.max=Dw(t.max)}function qM(t){Vw(t.x),Vw(t.y)}function oS(t,e,n){return t==="position"||t==="preserve-aspect"&&!hg(Iw(e),Iw(n),.2)}const GM=sS({attachResizeListener:(t,e)=>Zi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Up={current:void 0},aS=sS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Up.current){const t=new GM({});t.mount(window),t.setOptions({layoutScroll:!0}),Up.current=t}return Up.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ZM={pan:{Feature:cM},drag:{Feature:uM,ProjectionNode:aS,MeasureLayout:eS}},KM=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function QM(t){const e=KM.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function mg(t,e,n=1){const[i,r]=QM(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return HP(a)?parseFloat(a):a}else return rg(r)?mg(r,e,n+1):r}function YM(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!rg(o))return;const a=mg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!rg(o))continue;const a=mg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const XM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),lS=t=>XM.has(t),JM=t=>Object.keys(t).some(lS),jw=t=>t===yo||t===ve,Fw=(t,e)=>parseFloat(t.split(", ")[e]),Bw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Fw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Fw(o[1],t):0}},eO=new Set(["x","y","z"]),tO=tc.filter(t=>!eO.has(t));function nO(t){const e=[];return tO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ua={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Bw(4,13),y:Bw(5,14)};Ua.translateX=Ua.x;Ua.translateY=Ua.y;const iO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Ua[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=Ua[f](h,o)}),t},rO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(lS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=zl(m);const v=e[h];let T;if(Td(v)){const k=v.length,b=v[0]===null?1:0;m=v[b],g=zl(m);for(let F=b;F<k&&v[F]!==null;F++)T?n_(zl(v[F])===T):T=zl(v[F])}else T=zl(v);if(g!==T)if(jw(g)&&jw(T)){const k=f.get();typeof k=="string"&&f.set(parseFloat(k)),typeof v=="string"?e[h]=parseFloat(v):Array.isArray(v)&&T===ve&&(e[h]=v.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||v===0)?m===0?f.set(T.transform(m)):e[h]=g.transform(v):(a||(o=nO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(v))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=iO(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),_f&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function sO(t,e,n,i){return JM(e)?rO(t,e,n,i):{target:e,transitionEnd:i}}const oO=(t,e,n,i)=>{const r=YM(t,e,i);return e=r.target,i=r.transitionEnd,sO(t,e,n,i)},gg={current:null},uS={current:!1};function aO(){if(uS.current=!0,!!_f)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>gg.current=t.matches;t.addListener(e),e()}else gg.current=!1}function lO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(vn(o))t.addValue(r,o),Cd(i)&&i.add(r);else if(vn(a))t.addValue(r,za(o,{owner:t})),Cd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,za(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const zw=new WeakMap,cS=Object.keys(ju),uO=cS.length,Uw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cO=Gy.length;class hO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ye.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=wf(n),this.isVariantNode=ZE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const v=m[g];u[g]!==void 0&&vn(v)&&(v.set(u[g],!1),Cd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,zw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),uS.current||aO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){zw.delete(this.current),this.projection&&this.projection.unmount(),sr(this.notifyUpdate),sr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=go.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ye.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<uO;h++){const f=cS[h],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:T}=ju[f];v&&(a=v),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&pa(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Uw.length;i++){const r=Uw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=lO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<cO;i++){const r=Gy[i],o=this.props[r];(Vu(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=za(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=t_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!vn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new h_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class hS extends hO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=AN(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){CN(this,i,a);const u=oO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function dO(t){return window.getComputedStyle(t)}class fO extends hS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(go.has(n)){const i=o_(n);return i&&i.default||0}else{const i=dO(e),r=(XE(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return XP(e,n)}build(e,n,i,r){Qy(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return e_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;vn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){rP(e,n,i,r)}}class pO extends hS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(go.has(n)){const i=o_(n);return i&&i.default||0}return n=sP.has(n)?n:$y(n),e.getAttribute(n)}measureInstanceViewportBox(){return Tt()}scrapeMotionValuesFromProps(e,n){return aP(e,n)}build(e,n,i,r){Xy(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){oP(e,n,i,r)}mount(e){this.isSVGTag=Jy(e.tagName),super.mount(e)}}const mO=(t,e)=>Ky(t)?new pO(e,{enableHardwareAcceleration:!1}):new fO(e,{enableHardwareAcceleration:!0}),gO={layout:{ProjectionNode:aS,MeasureLayout:eS}},yO={...HN,...uL,...ZM,...gO},pe=_2((t,e)=>Q2(t,e,yO,mO));function dS(){const t=j.useRef(!1);return Wy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function _O(){const t=dS(),[e,n]=j.useState(0),i=j.useCallback(()=>{t.current&&n(e+1)},[e]);return[j.useCallback(()=>Ye.postRender(i),[i]),e]}class vO extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function wO({children:t,isPresent:e}){const n=j.useId(),i=j.useRef(null),r=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),j.createElement(vO,{isPresent:e,childRef:i,sizeRef:r},j.cloneElement(t,{ref:i}))}const Hp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=lP(xO),h=j.useId(),f=j.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return j.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),j.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=j.createElement(wO,{isPresent:n},t)),j.createElement(yf.Provider,{value:f},t)};function xO(){return new Map}function TO(t){return j.useEffect(()=>()=>t(),[])}const Us=t=>t.key||"";function EO(t,e){t.forEach(n=>{const i=Us(n);e.set(i,n)})}function PO(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const Bu=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=j.useContext(Zy).forceRender||_O()[0],h=dS(),f=PO(t);let m=f;const g=j.useRef(new Map).current,v=j.useRef(m),T=j.useRef(new Map).current,k=j.useRef(!0);if(Wy(()=>{k.current=!1,EO(f,T),v.current=m}),TO(()=>{k.current=!0,T.clear(),g.clear()}),k.current)return j.createElement(j.Fragment,null,m.map(P=>j.createElement(Hp,{key:Us(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},P)));m=[...m];const b=v.current.map(Us),F=f.map(Us),I=b.length;for(let P=0;P<I;P++){const S=b[P];F.indexOf(S)===-1&&!g.has(S)&&g.set(S,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((P,S)=>{if(F.indexOf(S)!==-1)return;const B=T.get(S);if(!B)return;const q=b.indexOf(S);let Z=P;if(!Z){const R=()=>{g.delete(S);const C=Array.from(T.keys()).filter(N=>!F.includes(N));if(C.forEach(N=>T.delete(N)),v.current=f.filter(N=>{const O=Us(N);return O===S||C.includes(O)}),!g.size){if(h.current===!1)return;u(),i&&i()}};Z=j.createElement(Hp,{key:Us(B),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:o,mode:a},B),g.set(S,Z)}m.splice(q,0,Z)}),m=m.map(P=>{const S=P.key;return g.has(S)?P:j.createElement(Hp,{key:Us(P),isPresent:!0,presenceAffectsLayout:o,mode:a},P)}),j.createElement(j.Fragment,null,g.size?m:m.map(P=>j.cloneElement(P)))},SO=()=>{};var Hw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},CO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},pS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(v=64)),i.push(n[m],n[g],n[v],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new IO;const v=o<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const k=f<<6&192|g;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AO=function(t){const e=fS(t);return pS.encodeByteArray(e,!0)},Ad=function(t){return AO(t).replace(/\./g,"")},mS=function(t){try{return pS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=()=>kO().__FIREBASE_DEFAULTS__,RO=()=>{if(typeof process>"u"||typeof Hw>"u")return;const t=Hw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mS(t[1]);return e&&JSON.parse(e)},Pf=()=>{try{return SO()||bO()||RO()||LO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gS=t=>{var e,n;return(n=(e=Pf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},NO=t=>{const e=gS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},yS=()=>{var t;return(t=Pf())==null?void 0:t.config},_S=t=>{var e;return(e=Pf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ad(JSON.stringify(n)),Ad(JSON.stringify(a)),""].join(".")}const du={};function DO(){const t={prod:[],emulator:[]};for(const e of Object.keys(du))du[e]?t.emulator.push(e):t.prod.push(e);return t}function VO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ww=!1;function wS(t,e){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||du[t]===e||du[t]||Ww)return;du[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=DO().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Ww=!0,a()},v}function m(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=VO(i),T=n("text"),k=document.getElementById(T)||document.createElement("span"),b=n("learnmore"),F=document.getElementById(b)||document.createElement("a"),I=n("preprendIcon"),P=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const S=v.element;u(S),m(F,b);const B=f();h(P,I),S.append(P,k,F,B),document.body.appendChild(S)}o?(k.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function FO(){var e;const t=(e=Pf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HO(){const t=Xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WO(){return!FO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $O(){try{return typeof indexedDB=="object"}catch{return!1}}function qO(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="FirebaseError";class fr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=GO,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sc.prototype.create)}}class sc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?ZO(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new fr(r,u,i)}}function ZO(t,e){return t.replace(KO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const KO=/\{\$([^}]+)}/g;function QO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if($w(o)&&$w(a)){if(!oo(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function $w(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function YO(t,e){const n=new XO(t,e);return n.subscribe.bind(n)}class XO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");JO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Wp),r.error===void 0&&(r.error=Wp),r.complete===void 0&&(r.complete=Wp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){return t&&t._delegate?t._delegate:t}class ao{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new MO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nD(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tD(t){return t===Hs?void 0:t}function nD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const rD={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},sD=Re.INFO,oD={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},aD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=oD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class d_{constructor(e){this.name=e,this._logLevel=sD,this._logHandler=aD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const lD=(t,e)=>e.some(n=>t instanceof n);let qw,Gw;function uD(){return qw||(qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cD(){return Gw||(Gw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xS=new WeakMap,yg=new WeakMap,TS=new WeakMap,$p=new WeakMap,f_=new WeakMap;function hD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Xr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&xS.set(n,t)}).catch(()=>{}),f_.set(e,t),e}function dD(t){if(yg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});yg.set(t,e)}let _g={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fD(t){_g=t(_g)}function pD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(qp(this),e,...n);return TS.set(i,e.sort?e.sort():[e]),Xr(i)}:cD().includes(t)?function(...e){return t.apply(qp(this),e),Xr(xS.get(this))}:function(...e){return Xr(t.apply(qp(this),e))}}function mD(t){return typeof t=="function"?pD(t):(t instanceof IDBTransaction&&dD(t),lD(t,uD())?new Proxy(t,_g):t)}function Xr(t){if(t instanceof IDBRequest)return hD(t);if($p.has(t))return $p.get(t);const e=mD(t);return e!==t&&($p.set(t,e),f_.set(e,t)),e}const qp=t=>f_.get(t);function gD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Xr(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Xr(a.result),h.oldVersion,h.newVersion,Xr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const yD=["get","getKey","getAll","getAllKeys","count"],_D=["put","add","delete","clear"],Gp=new Map;function Zw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gp.get(e))return Gp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=_D.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||yD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return Gp.set(e,o),o}fD(t=>({...t,get:(e,n,i)=>Zw(e,n)||t.get(e,n,i),has:(e,n)=>!!Zw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function wD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vg="@firebase/app",Kw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new d_("@firebase/app"),xD="@firebase/app-compat",TD="@firebase/analytics-compat",ED="@firebase/analytics",PD="@firebase/app-check-compat",SD="@firebase/app-check",CD="@firebase/auth",ID="@firebase/auth-compat",AD="@firebase/database",kD="@firebase/data-connect",bD="@firebase/database-compat",RD="@firebase/functions",LD="@firebase/functions-compat",ND="@firebase/installations",MD="@firebase/installations-compat",OD="@firebase/messaging",DD="@firebase/messaging-compat",VD="@firebase/performance",jD="@firebase/performance-compat",FD="@firebase/remote-config",BD="@firebase/remote-config-compat",zD="@firebase/storage",UD="@firebase/storage-compat",HD="@firebase/firestore",WD="@firebase/ai",$D="@firebase/firestore-compat",qD="firebase",GD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="[DEFAULT]",ZD={[vg]:"fire-core",[xD]:"fire-core-compat",[ED]:"fire-analytics",[TD]:"fire-analytics-compat",[SD]:"fire-app-check",[PD]:"fire-app-check-compat",[CD]:"fire-auth",[ID]:"fire-auth-compat",[AD]:"fire-rtdb",[kD]:"fire-data-connect",[bD]:"fire-rtdb-compat",[RD]:"fire-fn",[LD]:"fire-fn-compat",[ND]:"fire-iid",[MD]:"fire-iid-compat",[OD]:"fire-fcm",[DD]:"fire-fcm-compat",[VD]:"fire-perf",[jD]:"fire-perf-compat",[FD]:"fire-rc",[BD]:"fire-rc-compat",[zD]:"fire-gcs",[UD]:"fire-gcs-compat",[HD]:"fire-fst",[$D]:"fire-fst-compat",[WD]:"fire-vertex","fire-js":"fire-js",[qD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Map,KD=new Map,xg=new Map;function Qw(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ha(t){const e=t.name;if(xg.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;xg.set(e,t);for(const n of kd.values())Qw(n,t);for(const n of KD.values())Qw(n,t);return!0}function p_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ni(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new sc("app","Firebase",QD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=GD;function ES(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:wg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Jr.create("bad-app-name",{appName:String(r)});if(n||(n=yS()),!n)throw Jr.create("no-options");const o=kd.get(r);if(o){if(oo(n,o.options)&&oo(i,o.config))return o;throw Jr.create("duplicate-app",{appName:r})}const a=new iD(r);for(const h of xg.values())a.addComponent(h);const u=new YD(n,i,a);return kd.set(r,u),u}function PS(t=wg){const e=kd.get(t);if(!e&&t===wg&&yS())return ES();if(!e)throw Jr.create("no-app",{appName:t});return e}function es(t,e,n){let i=ZD[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(a.join(" "));return}Ha(new ao(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="firebase-heartbeat-database",JD=1,zu="firebase-heartbeat-store";let Zp=null;function SS(){return Zp||(Zp=gD(XD,JD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Jr.create("idb-open",{originalErrorMessage:t.message})})),Zp}async function eV(t){try{const n=(await SS()).transaction(zu),i=await n.objectStore(zu).get(CS(t));return await n.done,i}catch(e){if(e instanceof fr)or.warn(e.message);else{const n=Jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function Yw(t,e){try{const i=(await SS()).transaction(zu,"readwrite");await i.objectStore(zu).put(e,CS(t)),await i.done}catch(n){if(n instanceof fr)or.warn(n.message);else{const i=Jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(i.message)}}}function CS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=1024,nV=30;class iV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Xw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>nV){const a=oV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){or.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xw(),{heartbeatsToSend:i,unsentEntries:r}=rV(this._heartbeatsCache.heartbeats),o=Ad(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return or.warn(n),""}}}function Xw(){return new Date().toISOString().substring(0,10)}function rV(t,e=tV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Jw(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Jw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class sV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $O()?qO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jw(t){return Ad(JSON.stringify({version:2,heartbeats:t})).length}function oV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){Ha(new ao("platform-logger",e=>new vD(e),"PRIVATE")),Ha(new ao("heartbeat",e=>new iV(e),"PRIVATE")),es(vg,Kw,t),es(vg,Kw,"esm2020"),es("fire-js","")}aV("");var ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ts,IS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function N(){}N.prototype=C.prototype,R.F=C.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(O,D,z){for(var M=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)M[xe-2]=arguments[xe];return C.prototype[D].apply(O,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,C,N){N||(N=0);const O=Array(16);if(typeof C=="string")for(var D=0;D<16;++D)O[D]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(D=0;D<16;++D)O[D]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=R.g[0],N=R.g[1],D=R.g[2];let z=R.g[3],M;M=C+(z^N&(D^z))+O[0]+3614090360&4294967295,C=N+(M<<7&4294967295|M>>>25),M=z+(D^C&(N^D))+O[1]+3905402710&4294967295,z=C+(M<<12&4294967295|M>>>20),M=D+(N^z&(C^N))+O[2]+606105819&4294967295,D=z+(M<<17&4294967295|M>>>15),M=N+(C^D&(z^C))+O[3]+3250441966&4294967295,N=D+(M<<22&4294967295|M>>>10),M=C+(z^N&(D^z))+O[4]+4118548399&4294967295,C=N+(M<<7&4294967295|M>>>25),M=z+(D^C&(N^D))+O[5]+1200080426&4294967295,z=C+(M<<12&4294967295|M>>>20),M=D+(N^z&(C^N))+O[6]+2821735955&4294967295,D=z+(M<<17&4294967295|M>>>15),M=N+(C^D&(z^C))+O[7]+4249261313&4294967295,N=D+(M<<22&4294967295|M>>>10),M=C+(z^N&(D^z))+O[8]+1770035416&4294967295,C=N+(M<<7&4294967295|M>>>25),M=z+(D^C&(N^D))+O[9]+2336552879&4294967295,z=C+(M<<12&4294967295|M>>>20),M=D+(N^z&(C^N))+O[10]+4294925233&4294967295,D=z+(M<<17&4294967295|M>>>15),M=N+(C^D&(z^C))+O[11]+2304563134&4294967295,N=D+(M<<22&4294967295|M>>>10),M=C+(z^N&(D^z))+O[12]+1804603682&4294967295,C=N+(M<<7&4294967295|M>>>25),M=z+(D^C&(N^D))+O[13]+4254626195&4294967295,z=C+(M<<12&4294967295|M>>>20),M=D+(N^z&(C^N))+O[14]+2792965006&4294967295,D=z+(M<<17&4294967295|M>>>15),M=N+(C^D&(z^C))+O[15]+1236535329&4294967295,N=D+(M<<22&4294967295|M>>>10),M=C+(D^z&(N^D))+O[1]+4129170786&4294967295,C=N+(M<<5&4294967295|M>>>27),M=z+(N^D&(C^N))+O[6]+3225465664&4294967295,z=C+(M<<9&4294967295|M>>>23),M=D+(C^N&(z^C))+O[11]+643717713&4294967295,D=z+(M<<14&4294967295|M>>>18),M=N+(z^C&(D^z))+O[0]+3921069994&4294967295,N=D+(M<<20&4294967295|M>>>12),M=C+(D^z&(N^D))+O[5]+3593408605&4294967295,C=N+(M<<5&4294967295|M>>>27),M=z+(N^D&(C^N))+O[10]+38016083&4294967295,z=C+(M<<9&4294967295|M>>>23),M=D+(C^N&(z^C))+O[15]+3634488961&4294967295,D=z+(M<<14&4294967295|M>>>18),M=N+(z^C&(D^z))+O[4]+3889429448&4294967295,N=D+(M<<20&4294967295|M>>>12),M=C+(D^z&(N^D))+O[9]+568446438&4294967295,C=N+(M<<5&4294967295|M>>>27),M=z+(N^D&(C^N))+O[14]+3275163606&4294967295,z=C+(M<<9&4294967295|M>>>23),M=D+(C^N&(z^C))+O[3]+4107603335&4294967295,D=z+(M<<14&4294967295|M>>>18),M=N+(z^C&(D^z))+O[8]+1163531501&4294967295,N=D+(M<<20&4294967295|M>>>12),M=C+(D^z&(N^D))+O[13]+2850285829&4294967295,C=N+(M<<5&4294967295|M>>>27),M=z+(N^D&(C^N))+O[2]+4243563512&4294967295,z=C+(M<<9&4294967295|M>>>23),M=D+(C^N&(z^C))+O[7]+1735328473&4294967295,D=z+(M<<14&4294967295|M>>>18),M=N+(z^C&(D^z))+O[12]+2368359562&4294967295,N=D+(M<<20&4294967295|M>>>12),M=C+(N^D^z)+O[5]+4294588738&4294967295,C=N+(M<<4&4294967295|M>>>28),M=z+(C^N^D)+O[8]+2272392833&4294967295,z=C+(M<<11&4294967295|M>>>21),M=D+(z^C^N)+O[11]+1839030562&4294967295,D=z+(M<<16&4294967295|M>>>16),M=N+(D^z^C)+O[14]+4259657740&4294967295,N=D+(M<<23&4294967295|M>>>9),M=C+(N^D^z)+O[1]+2763975236&4294967295,C=N+(M<<4&4294967295|M>>>28),M=z+(C^N^D)+O[4]+1272893353&4294967295,z=C+(M<<11&4294967295|M>>>21),M=D+(z^C^N)+O[7]+4139469664&4294967295,D=z+(M<<16&4294967295|M>>>16),M=N+(D^z^C)+O[10]+3200236656&4294967295,N=D+(M<<23&4294967295|M>>>9),M=C+(N^D^z)+O[13]+681279174&4294967295,C=N+(M<<4&4294967295|M>>>28),M=z+(C^N^D)+O[0]+3936430074&4294967295,z=C+(M<<11&4294967295|M>>>21),M=D+(z^C^N)+O[3]+3572445317&4294967295,D=z+(M<<16&4294967295|M>>>16),M=N+(D^z^C)+O[6]+76029189&4294967295,N=D+(M<<23&4294967295|M>>>9),M=C+(N^D^z)+O[9]+3654602809&4294967295,C=N+(M<<4&4294967295|M>>>28),M=z+(C^N^D)+O[12]+3873151461&4294967295,z=C+(M<<11&4294967295|M>>>21),M=D+(z^C^N)+O[15]+530742520&4294967295,D=z+(M<<16&4294967295|M>>>16),M=N+(D^z^C)+O[2]+3299628645&4294967295,N=D+(M<<23&4294967295|M>>>9),M=C+(D^(N|~z))+O[0]+4096336452&4294967295,C=N+(M<<6&4294967295|M>>>26),M=z+(N^(C|~D))+O[7]+1126891415&4294967295,z=C+(M<<10&4294967295|M>>>22),M=D+(C^(z|~N))+O[14]+2878612391&4294967295,D=z+(M<<15&4294967295|M>>>17),M=N+(z^(D|~C))+O[5]+4237533241&4294967295,N=D+(M<<21&4294967295|M>>>11),M=C+(D^(N|~z))+O[12]+1700485571&4294967295,C=N+(M<<6&4294967295|M>>>26),M=z+(N^(C|~D))+O[3]+2399980690&4294967295,z=C+(M<<10&4294967295|M>>>22),M=D+(C^(z|~N))+O[10]+4293915773&4294967295,D=z+(M<<15&4294967295|M>>>17),M=N+(z^(D|~C))+O[1]+2240044497&4294967295,N=D+(M<<21&4294967295|M>>>11),M=C+(D^(N|~z))+O[8]+1873313359&4294967295,C=N+(M<<6&4294967295|M>>>26),M=z+(N^(C|~D))+O[15]+4264355552&4294967295,z=C+(M<<10&4294967295|M>>>22),M=D+(C^(z|~N))+O[6]+2734768916&4294967295,D=z+(M<<15&4294967295|M>>>17),M=N+(z^(D|~C))+O[13]+1309151649&4294967295,N=D+(M<<21&4294967295|M>>>11),M=C+(D^(N|~z))+O[4]+4149444226&4294967295,C=N+(M<<6&4294967295|M>>>26),M=z+(N^(C|~D))+O[11]+3174756917&4294967295,z=C+(M<<10&4294967295|M>>>22),M=D+(C^(z|~N))+O[2]+718787259&4294967295,D=z+(M<<15&4294967295|M>>>17),M=N+(z^(D|~C))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.v=function(R,C){C===void 0&&(C=R.length);const N=C-this.blockSize,O=this.C;let D=this.h,z=0;for(;z<C;){if(D==0)for(;z<=N;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<C;)if(O[D++]=R.charCodeAt(z++),D==this.blockSize){r(this,O),D=0;break}}else for(;z<C;)if(O[D++]=R[z++],D==this.blockSize){r(this,O),D=0;break}}this.h=D,this.o+=C},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;C=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=C&255,C/=256;for(this.v(R),R=Array(16),C=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)R[C++]=this.g[N]>>>O&255;return R};function o(R,C){var N=u;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=C(R)}function a(R,C){this.h=C;const N=[];let O=!0;for(let D=R.length-1;D>=0;D--){const z=R[D]|0;O&&z==C||(N[D]=z,O=!1)}this.g=N}var u={};function h(R){return-128<=R&&R<128?o(R,function(C){return new a([C|0],C<0?-1:0)}):new a([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return F(f(-R));const C=[];let N=1;for(let O=0;R>=N;O++)C[O]=R/N|0,N*=4294967296;return new a(C,0)}function m(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return F(m(R.substring(1),C));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(C,8));let O=g;for(let z=0;z<R.length;z+=8){var D=Math.min(8,R.length-z);const M=parseInt(R.substring(z,z+D),C);D<8?(D=f(Math.pow(C,D)),O=O.j(D).add(f(M))):(O=O.j(N),O=O.add(f(M)))}return O}var g=h(0),v=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(b(this))return-F(this).m();let R=0,C=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);R+=(O>=0?O:4294967296+O)*C,C*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(b(this))return"-"+F(this).toString(R);const C=f(Math.pow(R,6));var N=this;let O="";for(;;){const D=B(N,C).g;N=I(N,D.j(C));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=D,k(N))return z+O;for(;z.length<6;)z="0"+z;O=z+O}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(let C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=I(this,R),b(R)?-1:k(R)?0:1};function F(R){const C=R.g.length,N=[];for(let O=0;O<C;O++)N[O]=~R.g[O];return new a(N,~R.h).add(v)}t.abs=function(){return b(this)?F(this):this},t.add=function(R){const C=Math.max(this.g.length,R.g.length),N=[];let O=0;for(let D=0;D<=C;D++){let z=O+(this.i(D)&65535)+(R.i(D)&65535),M=(z>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);O=M>>>16,z&=65535,M&=65535,N[D]=M<<16|z}return new a(N,N[N.length-1]&-2147483648?-1:0)};function I(R,C){return R.add(F(C))}t.j=function(R){if(k(this)||k(R))return g;if(b(this))return b(R)?F(this).j(F(R)):F(F(this).j(R));if(b(R))return F(this.j(F(R)));if(this.l(T)<0&&R.l(T)<0)return f(this.m()*R.m());const C=this.g.length+R.g.length,N=[];for(var O=0;O<2*C;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<R.g.length;D++){const z=this.i(O)>>>16,M=this.i(O)&65535,xe=R.i(D)>>>16,ft=R.i(D)&65535;N[2*O+2*D]+=M*ft,P(N,2*O+2*D),N[2*O+2*D+1]+=z*ft,P(N,2*O+2*D+1),N[2*O+2*D+1]+=M*xe,P(N,2*O+2*D+1),N[2*O+2*D+2]+=z*xe,P(N,2*O+2*D+2)}for(R=0;R<C;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=C;R<2*C;R++)N[R]=0;return new a(N,0)};function P(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function S(R,C){this.g=R,this.h=C}function B(R,C){if(k(C))throw Error("division by zero");if(k(R))return new S(g,g);if(b(R))return C=B(F(R),C),new S(F(C.g),F(C.h));if(b(C))return C=B(R,F(C)),new S(F(C.g),C.h);if(R.g.length>30){if(b(R)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var N=v,O=C;O.l(R)<=0;)N=q(N),O=q(O);var D=Z(N,1),z=Z(O,1);for(O=Z(O,2),N=Z(N,2);!k(O);){var M=z.add(O);M.l(R)<=0&&(D=D.add(N),z=M),O=Z(O,1),N=Z(N,1)}return C=I(R,D.j(C)),new S(D,C)}for(D=g;R.l(C)>=0;){for(N=Math.max(1,Math.floor(R.m()/C.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),z=f(N),M=z.j(C);b(M)||M.l(R)>0;)N-=O,z=f(N),M=z.j(C);k(z)&&(z=v),D=D.add(z),R=I(R,M)}return new S(D,R)}t.B=function(R){return B(this,R).h},t.and=function(R){const C=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<C;O++)N[O]=this.i(O)&R.i(O);return new a(N,this.h&R.h)},t.or=function(R){const C=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<C;O++)N[O]=this.i(O)|R.i(O);return new a(N,this.h|R.h)},t.xor=function(R){const C=Math.max(this.g.length,R.g.length),N=[];for(let O=0;O<C;O++)N[O]=this.i(O)^R.i(O);return new a(N,this.h^R.h)};function q(R){const C=R.g.length+1,N=[];for(let O=0;O<C;O++)N[O]=R.i(O)<<1|R.i(O-1)>>>31;return new a(N,R.h)}function Z(R,C){const N=C>>5;C%=32;const O=R.g.length-N,D=[];for(let z=0;z<O;z++)D[z]=C>0?R.i(z+N)>>>C|R.i(z+N+1)<<32-C:R.i(z+N);return new a(D,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,IS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ts=a}).apply(typeof ex<"u"?ex:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AS,Zl,kS,jh,Tg,bS,RS,LS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var y=0;y<c.length;++y){var w=c[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var w=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in w))break e;w=w[U]}c=c[c.length-1],A=w[c],y=y(A),y!=A&&y!=null&&e(w,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var w=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&w.push([A,y[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,w){return c.call.apply(c.bind,arguments)}function f(c,y,w){return f=h,f.apply(null,arguments)}function m(c,y){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function g(c,y){function w(){}w.prototype=y.prototype,c.Z=y.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(A,U,W){for(var ne=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ne[Pe-2]=arguments[Pe];return y.prototype[U].apply(A,ne)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const w=Array(y);for(let A=0;A<y;A++)w[A]=c[A];return w}return[]}function k(c,y){for(let A=1;A<arguments.length;A++){const U=arguments[A];var w=typeof U;if(w=w!="object"?w:U?Array.isArray(U)?"array":w:"null",w=="array"||w=="object"&&typeof U.length=="number"){w=c.length||0;const W=U.length||0;c.length=w+W;for(let ne=0;ne<W;ne++)c[w+ne]=U[ne]}else c.push(U)}}class b{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(c){a.setTimeout(()=>{throw c},0)}function I(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class P{constructor(){this.h=this.g=null}add(y,w){const A=S.get();A.set(y,w),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new b(()=>new B,c=>c.reset());class B{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,Z=!1,R=new P,C=()=>{const c=Promise.resolve(void 0);q=()=>{c.then(N)}};function N(){for(var c;c=I();){try{c.h.call(c.g)}catch(w){F(w)}var y=S;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}Z=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return c}();function M(c){return/^[\s\xa0]*$/.test(c)}function xe(c,y){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(xe,D),xe.prototype.init=function(c,y){const w=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(w=="mouseover"?y=c.fromElement:w=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),Ie=0;function ct(c,y,w,A,U){this.listener=c,this.proxy=null,this.src=y,this.type=w,this.capture=!!A,this.ha=U,this.key=++Ie,this.da=this.fa=!1}function G(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function de(c,y,w){for(const A in c)y.call(w,c[A],A,c)}function ee(c,y){for(const w in c)y.call(void 0,c[w],w,c)}function ie(c){const y={};for(const w in c)y[w]=c[w];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(c,y){let w,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(w in A)c[w]=A[w];for(let W=0;W<te.length;W++)w=te[W],Object.prototype.hasOwnProperty.call(A,w)&&(c[w]=A[w])}}function le(c){this.src=c,this.g={},this.h=0}le.prototype.add=function(c,y,w,A,U){const W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);const ne=J(c,y,A,U);return ne>-1?(y=c[ne],w||(y.fa=!1)):(y=new ct(y,this.src,W,!!A,U),y.fa=w,c.push(y)),y};function ae(c,y){const w=y.type;if(w in c.g){var A=c.g[w],U=Array.prototype.indexOf.call(A,y,void 0),W;(W=U>=0)&&Array.prototype.splice.call(A,U,1),W&&(G(y),c.g[w].length==0&&(delete c.g[w],c.h--))}}function J(c,y,w,A){for(let U=0;U<c.length;++U){const W=c[U];if(!W.da&&W.listener==y&&W.capture==!!w&&W.ha==A)return U}return-1}var me="closure_lm_"+(Math.random()*1e6|0),Ze={};function Me(c,y,w,A,U){if(Array.isArray(y)){for(let W=0;W<y.length;W++)Me(c,y[W],w,A,U);return null}return w=Ts(w),c&&c[ft]?c.J(y,w,u(A)?!!A.capture:!1,U):ge(c,y,w,!1,A,U)}function ge(c,y,w,A,U,W){if(!y)throw Error("Invalid event type");const ne=u(U)?!!U.capture:!!U;let Pe=To(c);if(Pe||(c[me]=Pe=new le(c)),w=Pe.add(y,w,A,ne,W),w.proxy)return w;if(A=We(),w.proxy=A,A.src=c,A.listener=w,c.addEventListener)z||(U=ne),U===void 0&&(U=!1),c.addEventListener(y.toString(),A,U);else if(c.attachEvent)c.attachEvent(ln(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function We(){function c(w){return y.call(c.src,c.listener,w)}const y=gc;return c}function _t(c,y,w,A,U){if(Array.isArray(y))for(var W=0;W<y.length;W++)_t(c,y[W],w,A,U);else A=u(A)?!!A.capture:!!A,w=Ts(w),c&&c[ft]?(c=c.i,W=String(y).toString(),W in c.g&&(y=c.g[W],w=J(y,w,A,U),w>-1&&(G(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete c.g[W],c.h--)))):c&&(c=To(c))&&(y=c.g[y.toString()],c=-1,y&&(c=J(y,w,A,U)),(w=c>-1?y[c]:null)&&Be(w))}function Be(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[ft])ae(y.i,c);else{var w=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(w,A,c.capture):y.detachEvent?y.detachEvent(ln(w),A):y.addListener&&y.removeListener&&y.removeListener(A),(w=To(y))?(ae(w,c),w.h==0&&(w.src=null,y[me]=null)):G(c)}}}function ln(c){return c in Ze?Ze[c]:Ze[c]="on"+c}function gc(c,y){if(c.da)c=!0;else{y=new xe(y,this);const w=c.listener,A=c.ha||c.src;c.fa&&Be(c),c=w.call(A,y)}return c}function To(c){return c=c[me],c instanceof le?c:null}var xs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ts(c){return typeof c=="function"?c:(c[xs]||(c[xs]=function(y){return c.handleEvent(y)}),c[xs])}function bt(){O.call(this),this.i=new le(this),this.M=this,this.G=null}g(bt,O),bt.prototype[ft]=!0,bt.prototype.removeEventListener=function(c,y,w,A){_t(this,c,y,w,A)};function Rt(c,y){var w,A=c.G;if(A)for(w=[];A;A=A.G)w.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new D(y,c);else if(y instanceof D)y.target=y.target||c;else{var U=y;y=new D(A,c),re(y,U)}U=!0;let W,ne;if(w)for(ne=w.length-1;ne>=0;ne--)W=y.g=w[ne],U=mr(W,A,!0,y)&&U;if(W=y.g=c,U=mr(W,A,!0,y)&&U,U=mr(W,A,!1,y)&&U,w)for(ne=0;ne<w.length;ne++)W=y.g=w[ne],U=mr(W,A,!1,y)&&U}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const w=c.g[y];for(let A=0;A<w.length;A++)G(w[A]);delete c.g[y],c.h--}}this.G=null},bt.prototype.J=function(c,y,w,A){return this.i.add(String(c),y,!1,w,A)},bt.prototype.K=function(c,y,w,A){return this.i.add(String(c),y,!0,w,A)};function mr(c,y,w,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let W=0;W<y.length;++W){const ne=y[W];if(ne&&!ne.da&&ne.capture==w){const Pe=ne.listener,Fe=ne.ha||ne.src;ne.fa&&ae(c.i,ne),U=Pe.call(Fe,A)!==!1&&U}}return U&&!A.defaultPrevented}function yc(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function al(c){c.g=yc(()=>{c.g=null,c.i&&(c.i=!1,al(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class $f extends O{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:al(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(c){O.call(this),this.h=c,this.g={}}g(Es,O);var Eo=[];function ll(c){de(c.g,function(y,w){this.g.hasOwnProperty(w)&&Be(y)},c),c.g={}}Es.prototype.N=function(){Es.Z.N.call(this),ll(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Po=a.JSON.stringify,qf=a.JSON.parse,_c=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ul(){}function vc(){}var gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ps(){D.call(this,"d")}g(Ps,D);function So(){D.call(this,"c")}g(So,D);var Ri={},yr=null;function Co(){return yr=yr||new bt}Ri.Ia="serverreachability";function wc(c){D.call(this,Ri.Ia,c)}g(wc,D);function _r(c){const y=Co();Rt(y,new wc(y))}Ri.STAT_EVENT="statevent";function cl(c,y){D.call(this,Ri.STAT_EVENT,c),this.stat=y}g(cl,D);function Lt(c){const y=Co();Rt(y,new cl(y,c))}Ri.Ja="timingevent";function xc(c,y){D.call(this,Ri.Ja,c),this.size=y}g(xc,D);function Ss(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Cs(){this.g=!0}Cs.prototype.ua=function(){this.g=!1};function Gf(c,y,w,A,U,W){c.info(function(){if(c.g)if(W){var ne="",Pe=W.split("&");for(let Ue=0;Ue<Pe.length;Ue++){var Fe=Pe[Ue].split("=");if(Fe.length>1){const pt=Fe[0];Fe=Fe[1];const Mn=pt.split("_");ne=Mn.length>=2&&Mn[1]=="type"?ne+(pt+"="+Fe+"&"):ne+(pt+"=redacted&")}}}else ne=null;else ne=W;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+y+`
`+w+`
`+ne})}function Zf(c,y,w,A,U,W,ne){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+y+`
`+w+`
`+W+" "+ne})}function vr(c,y,w,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Kf(c,w)+(A?" "+A:"")})}function hl(c,y){c.info(function(){return"TIMEOUT: "+y})}Cs.prototype.info=function(){};function Kf(c,y){if(!c.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(c=0;c<W.length;c++)if(Array.isArray(W[c])){var w=W[c];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ne=1;ne<A.length;ne++)A[ne]=""}}}}return Po(W)}catch{return y}}var Io={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Tc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ec;function un(){}g(un,ul),un.prototype.g=function(){return new XMLHttpRequest},Ec=new un;function he(c){return encodeURIComponent(String(c))}function Pc(c){var y=1;c=c.split(":");const w=[];for(;y>0&&c.length;)w.push(c.shift()),y--;return c.length&&w.push(c.join(":")),w}function Gn(c,y,w,A){this.j=c,this.i=y,this.l=w,this.S=A||1,this.V=new Es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dl}function dl(){this.i=null,this.g="",this.h=!1}var fl={},Is={};function Ao(c,y,w){c.M=1,c.A=Ke(Jt(y)),c.u=w,c.R=!0,Li(c,null)}function Li(c,y){c.F=Date.now(),ko(c),c.B=Jt(c.A);var w=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Mo(w.i,"t",A),c.C=0,w=c.j.L,c.h=new dl,c.g=Il(c.j,w?y:null,!c.u),c.P>0&&(c.O=new $f(f(c.Y,c,c.g),c.P)),y=c.V,w=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(Eo[0]=U.toString()),U=Eo);for(let W=0;W<U.length;W++){const ne=Me(w,U[W],A||y.handleEvent,!1,y.h||y);if(!ne)break;y.g[ne.key]=ne}y=c.J?ie(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),_r(),Gf(c.i,c.v,c.B,c.l,c.S,c.u)}Gn.prototype.ba=function(c){c=c.target;const y=this.O;y&&hi(c)==3?y.j():this.Y(c)},Gn.prototype.Y=function(c){try{if(c==this.g)e:{const Pe=hi(this.g),Fe=this.g.ya(),Ue=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||wl(this.g)))){this.K||Pe!=4||Fe==7||(Fe==8||Ue<=0?_r(3):_r(2)),bo(this);var y=this.g.ca();this.X=y;var w=Sc(this);if(this.o=y==200,Zf(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(A)){var W=A;break t}}W=null}if(c=W)vr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pl(this,c);else{this.o=!1,this.m=3,Lt(12),bn(this),As(this);break e}}if(this.R){c=!0;let pt;for(;!this.K&&this.C<w.length;)if(pt=Qf(this,w),pt==Is){Pe==4&&(this.m=4,Lt(14),c=!1),vr(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==fl){this.m=4,Lt(15),vr(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else vr(this.i,this.l,pt,null),pl(this,pt);if(Cc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||w.length!=0||this.h.h||(this.m=1,Lt(16),c=!1),this.o=this.o&&c,!c)vr(this.i,this.l,w,"[Invalid Chunked Response]"),bn(this),As(this);else if(w.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Sl(ne),ne.P=!0,Lt(11))}}else vr(this.i,this.l,w,null),pl(this,w);Pe==4&&bn(this),this.o&&!this.K&&(Pe==4?xn(this.j,this):(this.o=!1,ko(this)))}else xl(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),bn(this),As(this)}}}catch{}finally{}};function Sc(c){if(!Cc(c))return c.g.la();const y=wl(c.g);if(y==="")return"";let w="";const A=y.length,U=hi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return bn(c),As(c),"";c.h.i=new a.TextDecoder}for(let W=0;W<A;W++)c.h.h=!0,w+=c.h.i.decode(y[W],{stream:!(U&&W==A-1)});return y.length=0,c.h.g+=w,c.C=0,c.h.g}function Cc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Qf(c,y){var w=c.C,A=y.indexOf(`
`,w);return A==-1?Is:(w=Number(y.substring(w,A)),isNaN(w)?fl:(A+=1,A+w>y.length?Is:(y=y.slice(A,A+w),c.C=A+w,y)))}Gn.prototype.cancel=function(){this.K=!0,bn(this)};function ko(c){c.T=Date.now()+c.H,Ic(c,c.H)}function Ic(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ss(f(c.aa,c),y)}function bo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}Gn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(hl(this.i,this.B),this.M!=2&&(_r(),Lt(17)),bn(this),this.m=2,As(this)):Ic(this,this.T-c)};function As(c){c.j.I==0||c.K||xn(c.j,c)}function bn(c){bo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,ll(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function pl(c,y){try{var w=c.j;if(w.I!=0&&(w.g==c||ks(w.h,c))){if(!c.L&&ks(w.h,c)&&w.I==3){try{var A=w.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Fo(w),Vo(w);else break e;Pl(w),Lt(18)}}else w.xa=U[1],0<w.xa-w.K&&U[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ss(f(w.Va,w),6e3));bc(w.h)<=1&&w.ta&&(w.ta=void 0)}else fi(w,11)}else if((c.L||w.g==c)&&Fo(w),!M(y))for(U=w.Ba.g.parse(y),y=0;y<U.length;y++){let Ue=U[y];const pt=Ue[0];if(!(pt<=w.K))if(w.K=pt,Ue=Ue[1],w.I==2)if(Ue[0]=="c"){w.M=Ue[1],w.ba=Ue[2];const Mn=Ue[3];Mn!=null&&(w.ka=Mn,w.j.info("VER="+w.ka));const Qn=Ue[4];Qn!=null&&(w.za=Qn,w.j.info("SVER="+w.za));const On=Ue[5];On!=null&&typeof On=="number"&&On>0&&(A=1.5*On,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const pi=c.g;if(pi){const Uo=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uo){var W=A.h;W.g||Uo.indexOf("spdy")==-1&&Uo.indexOf("quic")==-1&&Uo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ni(W,W.h),W.h=null))}if(A.G){const Ho=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(A.wa=Ho,ue(A.J,A.G,Ho))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var ne=c;if(A.na=Cl(A,A.L?A.ba:null,A.W),ne.L){ml(A.h,ne);var Pe=ne,Fe=A.O;Fe&&(Pe.H=Fe),Pe.D&&(bo(Pe),ko(Pe)),A.g=ne}else El(A);w.i.length>0&&di(w)}else Ue[0]!="stop"&&Ue[0]!="close"||fi(w,7);else w.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?fi(w,7):Ae(w):Ue[0]!="noop"&&w.l&&w.l.qa(Ue),w.A=0)}}_r(4)}catch{}}var Yf=class{constructor(c,y){this.g=c,this.map=y}};function Ac(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function bc(c){return c.h?1:c.g?c.g.size:0}function ks(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ni(c,y){c.g?c.g.add(y):c.h=y}function ml(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ac.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function gl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const w of c.g.values())y=y.concat(w.G);return y}return T(c.i)}var wr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oe(c,y){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const A=c[w].indexOf("=");let U,W=null;A>=0?(U=c[w].substring(0,A),W=c[w].substring(A+1)):U=c[w],y(U,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function je(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof je?(this.l=c.l,Rn(this,c.j),this.o=c.o,this.g=c.g,Ln(this,c.u),this.h=c.h,bs(this,Rs(c.i)),this.m=c.m):c&&(y=String(c).match(wr))?(this.l=!1,Rn(this,y[1]||"",!0),this.o=Mi(y[2]||""),this.g=Mi(y[3]||"",!0),Ln(this,y[4]),this.h=Mi(y[5]||"",!0),bs(this,y[6]||"",!0),this.m=Mi(y[7]||"")):(this.l=!1,this.i=new Zn(null,this.l))}je.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(li(y,Rc,!0),":");var w=this.g;return(w||y=="file")&&(c.push("//"),(y=this.o)&&c.push(li(y,Rc,!0),"@"),c.push(he(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(li(w,w.charAt(0)=="/"?Oi:Ro,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",li(w,Di)),c.join("")},je.prototype.resolve=function(c){const y=Jt(this);let w=!!c.j;w?Rn(y,c.j):w=!!c.o,w?y.o=c.o:w=!!c.g,w?y.g=c.g:w=c.u!=null;var A=c.h;if(w)Ln(y,c.u);else if(w=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=y.h.lastIndexOf("/");U!=-1&&(A=y.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const W=[];for(let ne=0;ne<U.length;){const Pe=U[ne++];Pe=="."?A&&ne==U.length&&W.push(""):Pe==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&ne==U.length&&W.push("")):(W.push(Pe),A=!0)}A=W.join("/")}else A=U}return w?y.h=A:w=c.i.toString()!=="",w?bs(y,Rs(c.i)):w=!!c.m,w&&(y.m=c.m),y};function Jt(c){return new je(c)}function Rn(c,y,w){c.j=w?Mi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Ln(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function bs(c,y,w){y instanceof Zn?(c.i=y,yl(c.i,c.l)):(w||(y=li(y,ht)),c.i=new Zn(y,c.l))}function ue(c,y,w){c.i.set(y,w)}function Ke(c){return ue(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Mi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function li(c,y,w){return typeof c=="string"?(c=encodeURI(c).replace(y,cn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function cn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Rc=/[#\/\?@]/g,Ro=/[#\?:]/g,Oi=/[#\?]/g,ht=/[#\?@]/g,Di=/#/g;function Zn(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function wn(c){c.g||(c.g=new Map,c.h=0,c.i&&Oe(c.i,function(y,w){c.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=Zn.prototype,t.add=function(c,y){wn(this),this.i=null,c=ui(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(y),this.h+=1,this};function Lo(c,y){wn(c),y=ui(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function xr(c,y){return wn(c),y=ui(c,y),c.g.has(y)}t.forEach=function(c,y){wn(this),this.g.forEach(function(w,A){w.forEach(function(U){c.call(y,U,A,this)},this)},this)};function No(c,y){wn(c);let w=[];if(typeof y=="string")xr(c,y)&&(w=w.concat(c.g.get(ui(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)w=w.concat(c[y]);return w}t.set=function(c,y){return wn(this),this.i=null,c=ui(this,c),xr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=No(this,c),c.length>0?String(c[0]):y):y};function Mo(c,y,w){Lo(c,y),w.length>0&&(c.i=null,c.g.set(ui(c,y),T(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var w=y[A];const U=he(w);w=No(this,w);for(let W=0;W<w.length;W++){let ne=U;w[W]!==""&&(ne+="="+he(w[W])),c.push(ne)}}return this.i=c.join("&")};function Rs(c){const y=new Zn;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function ui(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function yl(c,y){y&&!c.j&&(wn(c),c.i=null,c.g.forEach(function(w,A){const U=A.toLowerCase();A!=U&&(Lo(this,A),Mo(this,U,w))},c)),c.j=y}function Oo(c,y){const w=new Cs;if(a.Image){const A=new Image;A.onload=m(Nn,w,"TestLoadImage: loaded",!0,y,A),A.onerror=m(Nn,w,"TestLoadImage: error",!1,y,A),A.onabort=m(Nn,w,"TestLoadImage: abort",!1,y,A),A.ontimeout=m(Nn,w,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Lc(c,y){const w=new Cs,A=new AbortController,U=setTimeout(()=>{A.abort(),Nn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(W=>{clearTimeout(U),W.ok?Nn(w,"TestPingServer: ok",!0,y):Nn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Nn(w,"TestPingServer: error",!1,y)})}function Nn(c,y,w,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(w)}catch{}}function Xf(){this.g=new _c}function Ee(c){this.i=c.Sb||null,this.h=c.ab||!1}g(Ee,ul),Ee.prototype.g=function(){return new en(this.i,this.h)};function en(c,y){bt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(en,bt),t=en.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Vi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$e(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function $e(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Tr(this):Vi(this),this.readyState==3&&$e(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Tr(this))},t.Na=function(c){this.g&&(this.response=c,Tr(this))},t.ga=function(){this.g&&Tr(this)};function Tr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Vi(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=y.next();return c.join(`\r
`)};function Vi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(en.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Do(c){let y="";return de(c,function(w,A){y+=A,y+=":",y+=w,y+=`\r
`}),y}function Ls(c,y,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Do(w),typeof c=="string"?w!=null&&he(w):ue(c,y,w))}function ze(c){bt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ze,bt);var _l=/^https?$/i,Ns=["POST","PUT"];t=ze.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ec.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(W){vt(this,W);return}if(c=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)w.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())w.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Ns,y,void 0)>=0)||A||U||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ne]of w)this.g.setRequestHeader(W,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(W){vt(this,W)}};function vt(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,ci(c),Ms(c)}function ci(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Rt(this,"complete"),Rt(this,"abort"),Ms(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?vl(this):this.Xa())},t.Xa=function(){vl(this)};function vl(c){if(c.h&&typeof o<"u"){if(c.v&&hi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Rt(c,"readystatechange"),hi(c)==4){c.h=!1;try{const W=c.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var A;if(A=W===0){let ne=String(c.D).match(wr)[1]||null;!ne&&a.self&&a.self.location&&(ne=a.self.location.protocol.slice(0,-1)),A=!_l.test(ne?ne.toLowerCase():"")}w=A}if(w)Rt(c,"complete"),Rt(c,"success");else{c.o=6;try{var U=hi(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",ci(c)}}finally{Ms(c)}}}}function Ms(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,y||Rt(c,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function hi(c){return c.g?c.g.readyState:0}t.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),qf(y)}};function wl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function xl(c){const y={};c=(c.g&&hi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(M(c[A]))continue;var w=Pc(c[A]);const U=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=y[U]||[];y[U]=W,W.push(w)}ee(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(c,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||y}function Tl(c){this.za=0,this.i=[],this.j=new Cs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Os("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Os("baseRetryDelayMs",5e3,c),this.Za=Os("retryDelaySeedMs",1e4,c),this.Ta=Os("forwardChannelMaxRetries",2,c),this.va=Os("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ac(c&&c.concurrentRequestLimit),this.Ba=new Xf,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Tl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,w,A){Lt(0),this.W=c,this.H=y||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=Cl(this,null,this.W),di(this)};function Ae(c){if(hn(c),c.I==3){var y=c.V++,w=Jt(c.J);if(ue(w,"SID",c.M),ue(w,"RID",y),ue(w,"TYPE","terminate"),ji(c,w),y=new Gn(c,c.j,y),y.M=2,y.A=Ke(Jt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.A,w=!0),w||(y.g=Il(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ko(y)}Kn(c)}function Vo(c){c.g&&(Sl(c),c.g.cancel(),c.g=null)}function hn(c){Vo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Fo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function di(c){if(!kc(c.h)&&!c.m){c.m=!0;var y=c.Ea;q||C(),Z||(q(),Z=!0),R.add(y,c),c.D=0}}function Nc(c,y){return bc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ss(f(c.Ea,c,y),Dc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new Gn(this,this.j,c);let W=this.o;if(this.U&&(W?(W=ie(W),re(W,this.U)):W=this.U),this.u!==null||this.R||(U.J=W,W=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Oc(this,U,y),w=Jt(this.J),ue(w,"RID",c),ue(w,"CVER",22),this.G&&ue(w,"X-HTTP-Session-Id",this.G),ji(this,w),W&&(this.R?y="headers="+he(Do(W))+"&"+y:this.u&&Ls(w,this.u,W)),Ni(this.h,U),this.Ra&&ue(w,"TYPE","init"),this.S?(ue(w,"$req",y),ue(w,"SID","null"),U.U=!0,Ao(U,w,null)):Ao(U,w,y),this.I=2}}else this.I==3&&(c?Mc(this,c):this.i.length==0||kc(this.h)||Mc(this))};function Mc(c,y){var w;y?w=y.l:w=c.V++;const A=Jt(c.J);ue(A,"SID",c.M),ue(A,"RID",w),ue(A,"AID",c.K),ji(c,A),c.u&&c.o&&Ls(A,c.u,c.o),w=new Gn(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Oc(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ni(c.h,w),Ao(w,A,y)}function ji(c,y){c.H&&de(c.H,function(w,A){ue(y,A,w)}),c.l&&de({},function(w,A){ue(y,A,w)})}function Oc(c,y,w){w=Math.min(c.i.length,w);const A=c.l?f(c.l.Ka,c.l,c):null;e:{var U=c.i;let Pe=-1;for(;;){const Fe=["count="+w];Pe==-1?w>0?(Pe=U[0].g,Fe.push("ofs="+Pe)):Pe=0:Fe.push("ofs="+Pe);let Ue=!0;for(let pt=0;pt<w;pt++){var W=U[pt].g;const Mn=U[pt].map;if(W-=Pe,W<0)Pe=Math.max(0,U[pt].g-100),Ue=!1;else try{W="req"+W+"_"||"";try{var ne=Mn instanceof Map?Mn:Object.entries(Mn);for(const[Qn,On]of ne){let pi=On;u(On)&&(pi=Po(On)),Fe.push(W+Qn+"="+encodeURIComponent(pi))}}catch(Qn){throw Fe.push(W+"type="+encodeURIComponent("_badmap")),Qn}}catch{A&&A(Mn)}}if(Ue){ne=Fe.join("&");break e}}ne=void 0}return c=c.i.splice(0,w),y.G=c,ne}function El(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;q||C(),Z||(q(),Z=!0),R.add(y,c),c.A=0}}function Pl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ss(f(c.Da,c),Dc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,jo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ss(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Vo(this),jo(this))};function Sl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function jo(c){c.g=new Gn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Jt(c.na);ue(y,"RID","rpc"),ue(y,"SID",c.M),ue(y,"AID",c.K),ue(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&ue(y,"TO",c.ia),ue(y,"TYPE","xmlhttp"),ji(c,y),c.u&&c.o&&Ls(y,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=Ke(Jt(y)),w.u=null,w.R=!0,Li(w,c)}t.Va=function(){this.C!=null&&(this.C=null,Vo(this),Pl(this),Lt(19))};function Fo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function xn(c,y){var w=null;if(c.g==y){Fo(c),Sl(c),c.g=null;var A=2}else if(ks(c.h,y))w=y.G,ml(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var U=c.D;A=Co(),Rt(A,new xc(A,w)),di(c)}else El(c);else if(U=y.m,U==3||U==0&&y.X>0||!(A==1&&Nc(c,y)||A==2&&Pl(c)))switch(w&&w.length>0&&(y=c.h,y.i=y.i.concat(w)),U){case 1:fi(c,5);break;case 4:fi(c,10);break;case 3:fi(c,6);break;default:fi(c,2)}}}function Dc(c,y){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*y}function fi(c,y){if(c.j.info("Error code "+y),y==2){var w=f(c.bb,c),A=c.Ua;const U=!A;A=new je(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rn(A,"https"),Ke(A),U?Oo(A.toString(),w):Lc(A.toString(),w)}else Lt(2);c.I=0,c.l&&c.l.pa(y),Kn(c),hn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Kn(c){if(c.I=0,c.ja=[],c.l){const y=gl(c.h);(y.length!=0||c.i.length!=0)&&(k(c.ja,y),k(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function Cl(c,y,w){var A=w instanceof je?Jt(w):new je(w);if(A.g!="")y&&(A.g=y+"."+A.g),Ln(A,A.u);else{var U=a.location;A=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const W=new je(null);A&&Rn(W,A),y&&(W.g=y),U&&Ln(W,U),w&&(W.h=w),A=W}return w=c.G,y=c.wa,w&&y&&ue(A,w,y),ue(A,"VER",c.ka),ji(c,A),A}function Il(c,y,w){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new ze(new Ee({ab:w})):new ze(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bo(){}t=Bo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function zo(){}zo.prototype.g=function(c,y){return new Ht(c,y)};function Ht(c,y){bt.call(this),this.g=new Tl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!M(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Er(this)}g(Ht,bt),Ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Ae(this.g)},Ht.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=Po(c),c=w);y.i.push(new Yf(y.Ya++,c)),y.I==3&&di(y)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Ae(this.g),delete this.g,Ht.Z.N.call(this)};function Al(c){Ps.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const w in y){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(Al,Ps);function Vc(){So.call(this),this.status=1}g(Vc,So);function Er(c){this.g=c}g(Er,Bo),Er.prototype.ra=function(){Rt(this.g,"a")},Er.prototype.qa=function(c){Rt(this.g,new Al(c))},Er.prototype.pa=function(c){Rt(this.g,new Vc)},Er.prototype.oa=function(){Rt(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,LS=function(){return new zo},RS=function(){return Co()},bS=Ri,Tg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Io.NO_ERROR=0,Io.TIMEOUT=8,Io.HTTP_ERROR=6,jh=Io,Tc.COMPLETE="complete",kS=Tc,vc.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Zl=vc,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,AS=ze}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});const tx="@firebase/firestore",nx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new d_("@firebase/firestore");function Yo(){return lo.logLevel}function oe(t,...e){if(lo.logLevel<=Re.DEBUG){const n=e.map(m_);lo.debug(`Firestore (${nl}): ${t}`,...n)}}function ar(t,...e){if(lo.logLevel<=Re.ERROR){const n=e.map(m_);lo.error(`Firestore (${nl}): ${t}`,...n)}}function Wa(t,...e){if(lo.logLevel<=Re.WARN){const n=e.map(m_);lo.warn(`Firestore (${nl}): ${t}`,...n)}}function m_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,NS(t,i,n)}function NS(t,e,n){let i=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ar(i),new Error(i)}function He(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||NS(e,r,i)}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class uV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cV{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new MS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class hV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new hV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ix{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ni(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const i=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ix(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ix(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=pV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Le(t,e){return t<e?-1:t>e?1:0}function Eg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return Kp(r)===Kp(o)?Le(r,o):Kp(r)?1:-1}return Le(t.length,e.length)}const mV=55296,gV=57343;function Kp(t){const e=t.charCodeAt(0);return e>=mV&&e<=gV}function $a(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="__name__";class _i{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return _i.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _i?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=_i.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Le(e.length,n.length)}static compareSegments(e,n){const i=_i.isNumericId(e),r=_i.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?_i.extractNumericId(e).compare(_i.extractNumericId(n)):Eg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ts.fromString(e.substring(4,e.length-2))}}class et extends _i{construct(e,n,i){return new et(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new et(n)}static emptyPath(){return new et([])}}const yV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends _i{construct(e,n,i){return new Ft(e,n,i)}static isValidIdentifier(e){return yV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rx}static keyField(){return new Ft([rx])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new fe(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new fe(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new fe(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(et.fromString(e))}static fromName(e){return new ye(et.fromString(e).popFirst(5))}static empty(){return new ye(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t,e,n){if(!n)throw new fe(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _V(t,e,n,i){if(e===!0&&i===!0)throw new fe(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sx(t){if(!ye.isDocumentKey(t))throw new fe(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ox(t){if(ye.isDocumentKey(t))throw new fe(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function DS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function y_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function Sa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=y_(t);throw new fe(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ac(t,e){if(!DS(t))throw new fe(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new fe(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=-62135596800,lx=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*lx);return new tt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ax)throw new fe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lx}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ac(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ax;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:Pt("string",tt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new tt(0,0))}static max(){return new Se(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=-1;function vV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new tt(n+1,0):new tt(n,i));return new us(r,ye.empty(),e)}function wV(t){return new us(t.readTime,t.key,Uu)}class us{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new us(Se.min(),ye.empty(),Uu)}static max(){return new us(Se.max(),ye.empty(),Uu)}}function xV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==TV)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function PV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=-1;function Cf(t){return t==null}function bd(t){return t===0&&1/t==-1/0}function SV(t){return typeof t=="number"&&Number.isInteger(t)&&!bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="";function CV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ux(e)),e=IV(t.get(n),e);return ux(e)}function IV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case VS:n+="";break;default:n+=o}}return n}function ux(t){return t+VS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _o(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yh(this.root,e,this.comparator,!0)}}class yh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??jt.RED,this.left=r??jt.EMPTY,this.right=o??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new jt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return jt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hx(this.data.getIterator())}getIteratorFrom(e){return new hx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class hx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ii([])}unionWith(e){let n=new kt(Ft.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ii(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new FS("Invalid base64 string: "+o):o}}(e);return new Ut(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const AV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(t){if(He(!!t,39018),typeof t=="string"){let e=0;const n=AV.exec(t);if(He(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hs(t){return typeof t=="string"?Ut.fromBase64String(t):Ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="server_timestamp",zS="__type__",US="__previous_value__",HS="__local_write_time__";function v_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[zS])==null?void 0:i.stringValue)===BS}function If(t){const e=t.mapValue.fields[US];return v_(e)?If(e):e}function Hu(t){const e=cs(t.mapValue.fields[HS].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Rd="(default)";class Wu{constructor(e,n){this.projectId=e,this.database=n||Rd}static empty(){return new Wu("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof Wu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="__type__",bV="__max__",_h={mapValue:{}},$S="__vector__",Ld="value";function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?v_(t)?4:LV(t)?9007199254740991:RV(t)?10:11:we(28295,{value:t})}function ki(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hu(t).isEqual(Hu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=cs(r.timestampValue),u=cs(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return hs(r.bytesValue).isEqual(hs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return mt(r.geoPointValue.latitude)===mt(o.geoPointValue.latitude)&&mt(r.geoPointValue.longitude)===mt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return mt(r.integerValue)===mt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=mt(r.doubleValue),u=mt(o.doubleValue);return a===u?bd(a)===bd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return $a(t.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(cx(a)!==cx(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!ki(a[h],u[h])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function $u(t,e){return(t.values||[]).find(n=>ki(n,e))!==void 0}function qa(t,e){if(t===e)return 0;const n=ds(t),i=ds(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=mt(o.integerValue||o.doubleValue),h=mt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return dx(t.timestampValue,e.timestampValue);case 4:return dx(Hu(t),Hu(e));case 5:return Eg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=hs(o),h=hs(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=Le(u[f],h[f]);if(m!==0)return m}return Le(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Le(mt(o.latitude),mt(a.latitude));return u!==0?u:Le(mt(o.longitude),mt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fx(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,T,k,b;const u=o.fields||{},h=a.fields||{},f=(v=u[Ld])==null?void 0:v.arrayValue,m=(T=h[Ld])==null?void 0:T.arrayValue,g=Le(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((b=m==null?void 0:m.values)==null?void 0:b.length)||0);return g!==0?g:fx(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===_h.mapValue&&a===_h.mapValue)return 0;if(o===_h.mapValue)return 1;if(a===_h.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const v=Eg(h[g],m[g]);if(v!==0)return v;const T=qa(u[h[g]],f[m[g]]);if(T!==0)return T}return Le(h.length,m.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function dx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=cs(t),i=cs(e),r=Le(n.seconds,i.seconds);return r!==0?r:Le(n.nanos,i.nanos)}function fx(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=qa(n[r],i[r]);if(o)return o}return Le(n.length,i.length)}function Ga(t){return Pg(t)}function Pg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=cs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Pg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Pg(n.fields[a])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function Fh(t){switch(ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=If(t);return e?16+Fh(e):16;case 5:return 2*t.stringValue.length;case 6:return hs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Fh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return _o(i.fields,(o,a)=>{r+=o.length+Fh(a)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function Sg(t){return!!t&&"integerValue"in t}function w_(t){return!!t&&"arrayValue"in t}function px(t){return!!t&&"nullValue"in t}function mx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bh(t){return!!t&&"mapValue"in t}function RV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[WS])==null?void 0:i.stringValue)===$S}function fu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _o(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=fu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fu(t.arrayValue.values[n]);return e}return{...t}}function LV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Bh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(n)}setAll(e){let n=Ft.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=fu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Bh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Bh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){_o(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new zn(fu(this.value))}}function qS(t){const e=[];return _o(t.fields,(n,i)=>{const r=new Ft([n]);if(Bh(i)){const o=qS(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Qt(e,0,Se.min(),Se.min(),Se.min(),zn.empty(),0)}static newFoundDocument(e,n,i,r){return new Qt(e,1,n,Se.min(),i,r,0)}static newNoDocument(e,n){return new Qt(e,2,n,Se.min(),Se.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,Se.min(),Se.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.position=e,this.inclusive=n}}function gx(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ye.comparator(ye.fromName(a.referenceValue),n.key):i=qa(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function yx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ki(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n="asc"){this.field=e,this.dir=n}}function NV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{}class Ct extends GS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new OV(e,n,i):n==="array-contains"?new jV(e,i):n==="in"?new FV(e,i):n==="not-in"?new BV(e,i):n==="array-contains-any"?new zV(e,i):new Ct(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new DV(e,i):new VV(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qa(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bi extends GS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new bi(e,n)}matches(e){return ZS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZS(t){return t.op==="and"}function KS(t){return MV(t)&&ZS(t)}function MV(t){for(const e of t.filters)if(e instanceof bi)return!1;return!0}function Cg(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+Ga(t.value);if(KS(t))return t.filters.map(e=>Cg(e)).join(",");{const e=t.filters.map(n=>Cg(n)).join(",");return`${t.op}(${e})`}}function QS(t,e){return t instanceof Ct?function(i,r){return r instanceof Ct&&i.op===r.op&&i.field.isEqual(r.field)&&ki(i.value,r.value)}(t,e):t instanceof bi?function(i,r){return r instanceof bi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&QS(a,r.filters[u]),!0):!1}(t,e):void we(19439)}function YS(t){return t instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Ga(n.value)}`}(t):t instanceof bi?function(n){return n.op.toString()+" {"+n.getFilters().map(YS).join(" ,")+"}"}(t):"Filter"}class OV extends Ct{constructor(e,n,i){super(e,n,i),this.key=ye.fromName(i.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class DV extends Ct{constructor(e,n){super(e,"in",n),this.keys=XS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VV extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=XS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ye.fromName(i.referenceValue))}class jV extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return w_(n)&&$u(n.arrayValue,this.value)}}class FV extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$u(this.value.arrayValue,n)}}class BV extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$u(this.value.arrayValue,n)}}class zV extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!w_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>$u(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function _x(t,e=null,n=[],i=[],r=null,o=null,a=null){return new UV(t,e,n,i,r,o,a)}function x_(t){const e=Ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Cg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ga(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ga(i)).join(",")),e.Te=n}return e.Te}function T_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yx(t.startAt,e.startAt)&&yx(t.endAt,e.endAt)}function Ig(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HV(t,e,n,i,r,o,a,u){return new Af(t,e,n,i,r,o,a,u)}function E_(t){return new Af(t)}function vx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WV(t){return t.collectionGroup!==null}function pu(t){const e=Ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new kt(Ft.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Md(o,i))}),n.has(Ft.keyField().canonicalString())||e.Ie.push(new Md(Ft.keyField(),i))}return e.Ie}function Ei(t){const e=Ce(t);return e.Ee||(e.Ee=$V(e,pu(t))),e.Ee}function $V(t,e){if(t.limitType==="F")return _x(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Md(r.field,o)});const n=t.endAt?new Nd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Nd(t.startAt.position,t.startAt.inclusive):null;return _x(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ag(t,e,n){return new Af(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kf(t,e){return T_(Ei(t),Ei(e))&&t.limitType===e.limitType}function JS(t){return`${x_(Ei(t))}|lt:${t.limitType}`}function Xo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>YS(r)).join(", ")}]`),Cf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ga(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ga(r)).join(",")),`Target(${i})`}(Ei(t))}; limitType=${t.limitType})`}function bf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ye.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of pu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=gx(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,pu(i),r)||i.endAt&&!function(a,u,h){const f=gx(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,pu(i),r))}(t,e)}function qV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eC(t){return(e,n)=>{let i=!1;for(const r of pu(t)){const o=GV(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function GV(t,e,n){const i=t.field.isKeyField()?ye.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?qa(h,f):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return jS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=new ut(ye.comparator);function lr(){return ZV}const tC=new ut(ye.comparator);function Kl(...t){let e=tC;for(const n of t)e=e.insert(n.key,n);return e}function nC(t){let e=tC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Zs(){return mu()}function iC(){return mu()}function mu(){return new vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const KV=new ut(ye.comparator),QV=new kt(ye.comparator);function Ne(...t){let e=QV;for(const n of t)e=e.add(n);return e}const YV=new kt(Le);function XV(){return YV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function rC(t){return{integerValue:""+t}}function JV(t,e){return SV(e)?rC(e):P_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this._=void 0}}function e4(t,e,n){return t instanceof Od?function(r,o){const a={fields:{[zS]:{stringValue:BS},[HS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&v_(o)&&(o=If(o)),o&&(a.fields[US]=o),{mapValue:a}}(n,e):t instanceof qu?oC(t,e):t instanceof Gu?aC(t,e):function(r,o){const a=sC(r,o),u=wx(a)+wx(r.Ae);return Sg(a)&&Sg(r.Ae)?rC(u):P_(r.serializer,u)}(t,e)}function t4(t,e,n){return t instanceof qu?oC(t,e):t instanceof Gu?aC(t,e):n}function sC(t,e){return t instanceof Dd?function(i){return Sg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Od extends Rf{}class qu extends Rf{constructor(e){super(),this.elements=e}}function oC(t,e){const n=lC(e);for(const i of t.elements)n.some(r=>ki(r,i))||n.push(i);return{arrayValue:{values:n}}}class Gu extends Rf{constructor(e){super(),this.elements=e}}function aC(t,e){let n=lC(e);for(const i of t.elements)n=n.filter(r=>!ki(r,i));return{arrayValue:{values:n}}}class Dd extends Rf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function wx(t){return mt(t.integerValue||t.doubleValue)}function lC(t){return w_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function n4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof qu&&r instanceof qu||i instanceof Gu&&r instanceof Gu?$a(i.elements,r.elements,ki):i instanceof Dd&&r instanceof Dd?ki(i.Ae,r.Ae):i instanceof Od&&r instanceof Od}(t.transform,e.transform)}class i4{constructor(e,n){this.version=e,this.transformResults=n}}class er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lf{}function uC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hC(t.key,er.none()):new lc(t.key,t.data,er.none());{const n=t.data,i=zn.empty();let r=new kt(Ft.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new wo(t.key,i,new ii(r.toArray()),er.none())}}function r4(t,e,n){t instanceof lc?function(r,o,a){const u=r.value.clone(),h=Tx(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof wo?function(r,o,a){if(!zh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Tx(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(cC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function gu(t,e,n,i){return t instanceof lc?function(o,a,u,h){if(!zh(o.precondition,a))return u;const f=o.value.clone(),m=Ex(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof wo?function(o,a,u,h){if(!zh(o.precondition,a))return u;const f=Ex(o.fieldTransforms,h,a),m=a.data;return m.setAll(cC(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return zh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function s4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=sC(i.transform,r||null);o!=null&&(n===null&&(n=zn.empty()),n.set(i.field,o))}return n||null}function xx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&$a(i,r,(o,a)=>n4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lc extends Lf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wo extends Lf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function cC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Tx(t,e,n){const i=new Map;He(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,t4(a,u,n[r]))}return i}function Ex(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,e4(o,a,e))}return i}class hC extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o4 extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&r4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=gu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=gu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=iC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=uC(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,(n,i)=>xx(n,i))&&$a(this.baseMutations,e.baseMutations,(n,i)=>xx(n,i))}}class S_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return KV}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new S_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,De;function c4(t){switch(t){case Y.OK:return we(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function dC(t){if(t===void 0)return ar("GRPC error has no .code"),Y.UNKNOWN;switch(t){case xt.OK:return Y.OK;case xt.CANCELLED:return Y.CANCELLED;case xt.UNKNOWN:return Y.UNKNOWN;case xt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case xt.INTERNAL:return Y.INTERNAL;case xt.UNAVAILABLE:return Y.UNAVAILABLE;case xt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case xt.NOT_FOUND:return Y.NOT_FOUND;case xt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case xt.ABORTED:return Y.ABORTED;case xt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case xt.DATA_LOSS:return Y.DATA_LOSS;default:return we(39323,{code:t})}}(De=xt||(xt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new ts([4294967295,4294967295],0);function Px(t){const e=h4().encode(t),n=new IS;return n.update(e),new Uint8Array(n.digest())}function Sx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ts([n,i],0),new ts([r,o],0)]}class C_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ql(`Invalid padding: ${n}`);if(i<0)throw new Ql(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ts.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(ts.fromNumber(i)));return r.compare(d4)===1&&(r=new ts([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Px(e),[i,r]=Sx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new C_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Px(e),[i,r]=Sx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Nf(Se.min(),r,new ut(Le),lr(),Ne())}}class uc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new uc(i,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class fC{constructor(e,n){this.targetId=e,this.Ce=n}}class pC{constructor(e,n,i=Ut.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Cx{constructor(){this.ve=0,this.Fe=Ix(),this.Me=Ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),n=Ne(),i=Ne();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:we(38017,{changeType:o})}}),new uc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Ix()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class f4{constructor(e){this.Ge=e,this.ze=new Map,this.je=lr(),this.Je=vh(),this.He=vh(),this.Ye=new ut(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Ig(o))if(i===0){const a=new ye(o.path);this.et(n,a,Qt.newNoDocument(a,Se.min()))}else He(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=hs(i).toUint8Array()}catch(h){if(h instanceof FS)return Wa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new C_(a,r,o)}catch(h){return Wa(h instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Ig(u.target)){const h=new ye(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,Qt.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Ne();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Nf(e,n,this.Ye,this.je,i);return this.je=lr(),this.Je=vh(),this.He=vh(),this.Ye=new ut(Le),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Cx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new kt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new kt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vh(){return new ut(ye.comparator)}function Ix(){return new ut(ye.comparator)}const p4={asc:"ASCENDING",desc:"DESCENDING"},m4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g4={and:"AND",or:"OR"};class y4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kg(t,e){return t.useProto3Json||Cf(e)?e:{value:e}}function Vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _4(t,e){return Vd(t,e.toTimestamp())}function Pi(t){return He(!!t,49232),Se.fromTimestamp(function(n){const i=cs(n);return new tt(i.seconds,i.nanos)}(t))}function I_(t,e){return bg(t,e).canonicalString()}function bg(t,e){const n=function(r){return new et(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gC(t){const e=et.fromString(t);return He(xC(e),10190,{key:e.toString()}),e}function Rg(t,e){return I_(t.databaseId,e.path)}function Qp(t,e){const n=gC(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(_C(n))}function yC(t,e){return I_(t.databaseId,e)}function v4(t){const e=gC(t);return e.length===4?et.emptyPath():_C(e)}function Lg(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _C(t){return He(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ax(t,e,n){return{name:Rg(t,e),fields:n.value.mapValue.fields}}function w4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(He(m===void 0||typeof m=="string",58123),Ut.fromBase64String(m||"")):(He(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ut.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?Y.UNKNOWN:dC(f.code);return new fe(m,f.message||"")}(a);n=new pC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Qp(t,i.document.name),o=Pi(i.document.updateTime),a=i.document.createTime?Pi(i.document.createTime):Se.min(),u=new zn({mapValue:{fields:i.document.fields}}),h=Qt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Uh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Qp(t,i.document),o=i.readTime?Pi(i.readTime):Se.min(),a=Qt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Uh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Qp(t,i.document),o=i.removedTargetIds||[];n=new Uh([],o,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new u4(r,o),u=i.targetId;n=new fC(u,a)}}return n}function x4(t,e){let n;if(e instanceof lc)n={update:Ax(t,e.key,e.value)};else if(e instanceof hC)n={delete:Rg(t,e.key)};else if(e instanceof wo)n={update:Ax(t,e.key,e.data),updateMask:b4(e.fieldMask)};else{if(!(e instanceof o4))return we(16599,{Vt:e.type});n={verify:Rg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Od)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof qu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Gu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Dd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw we(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:_4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(t,e.precondition)),n}function T4(t,e){return t&&t.length>0?(He(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Pi(r.updateTime):Pi(o);return a.isEqual(Se.min())&&(a=Pi(o)),new i4(a,r.transformResults||[])}(n,e))):[]}function E4(t,e){return{documents:[yC(t,e.path)]}}function P4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=yC(t,r);const o=function(f){if(f.length!==0)return wC(bi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(v){return{field:Jo(v.field),direction:I4(v.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=kg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function S4(t){let e=v4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){He(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const v=vC(g);return v instanceof bi&&KS(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(v=>function(k){return new Md(ea(k.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(g){let v;return v=typeof g=="object"?g.value:g,Cf(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(g){const v=!!g.before,T=g.values||[];return new Nd(T,v)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const v=!g.before,T=g.values||[];return new Nd(T,v)}(n.endAt)),HV(e,r,a,o,u,"F",h,f)}function C4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ea(n.unaryFilter.field);return Ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ea(n.unaryFilter.field);return Ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ea(n.unaryFilter.field);return Ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ea(n.unaryFilter.field);return Ct.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ct.create(ea(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bi.create(n.compositeFilter.filters.map(i=>vC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function I4(t){return p4[t]}function A4(t){return m4[t]}function k4(t){return g4[t]}function Jo(t){return{fieldPath:t.canonicalString()}}function ea(t){return Ft.fromServerFormat(t.fieldPath)}function wC(t){return t instanceof Ct?function(n){if(n.op==="=="){if(mx(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NAN"}};if(px(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mx(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NOT_NAN"}};if(px(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(n.field),op:A4(n.op),value:n.value}}}(t):t instanceof bi?function(n){const i=n.getFilters().map(r=>wC(r));return i.length===1?i[0]:{compositeFilter:{op:k4(n.op),filters:i}}}(t):we(54877,{filter:t})}function b4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,i,r,o=Se.min(),a=Se.min(),u=Ut.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.yt=e}}function L4(t){const e=S4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ag(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this.Cn=new M4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(us.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class M4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new kt(et.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new kt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TC=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(TC,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Za(0)}static cr(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="LruGarbageCollector",O4=1048576;function Rx([t,e],[n,i]){const r=Le(t,n);return r===0?Le(e,i):r}class D4{constructor(e){this.Ir=e,this.buffer=new kt(Rx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Rx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(bx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rl(n)?oe(bx,"Ignoring IndexedDB error during garbage collection: ",n):await il(n)}await this.Vr(3e5)})}}class j4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Sf.ce);const i=new D4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(kx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),Yo()<=Re.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function F4(t,e){return new j4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&gu(i.mutation,r,ii.empty(),tt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ne()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ne()){const r=Zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Kl();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Zs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ne()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=lr();const a=mu(),u=function(){return mu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof wo)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),gu(m.mutation,f,m.mutation.getFieldMask(),tt.now())):a.set(f.key,ii.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new z4(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=mu();let r=new ut((a,u)=>a-u),o=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||ii.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||Ne()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=iC();m.forEach(v=>{if(!o.has(v)){const T=uC(n.get(v),i.get(v));T!==null&&g.set(v,T),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(Zs());let u=Uu,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Ne())).next(m=>({batchId:u,changes:nC(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(i=>{let r=Kl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Kl();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,v){return new Af(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Qt.newInvalidDocument(m)))});let u=Kl();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&gu(m.mutation,f,ii.empty(),tt.now()),bf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Pi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:L4(r.bundledQuery),readTime:Pi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.overlays=new ut(ye.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Zs();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=Zs(),o=n.length+1,a=new ye(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new ut((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Zs(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Zs(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new l4(n,i));let o=this.qr.get(n);o===void 0&&(o=Ne(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.Qr=new kt(Mt.$r),this.Ur=new kt(Mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Mt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Mt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ye(new et([])),i=new Mt(n,e),r=new Mt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new et([])),i=new Mt(n,e),r=new Mt(n,e+1);let o=Ne();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Mt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Mt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new kt(Mt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new a4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new Mt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?__:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Mt(n,0),r=new Mt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new kt(Le);return n.forEach(r=>{const o=new Mt(r,0),a=new Mt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ye.isDocumentKey(o)||(o=o.child(""));const a=new Mt(new ye(o),0);let u=new kt(Le);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new Mt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Mt(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.ri=e,this.docs=function(){return new ut(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let i=lr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Qt.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=lr();const a=n.path,u=new ye(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||xV(wV(m),i)<=0||(r.has(m.key)||bf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){we(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Z4(this)}getSize(e){return K.resolve(this.size)}}class Z4 extends B4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.persistence=e,this.si=new vo(n=>x_(n),T_),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new A_,this.targetCount=0,this.ai=Za.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Za(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sf(0),this.li=!1,this.li=!0,this.hi=new $4,this.referenceDelegate=e(this),this.Pi=new K4(this),this.indexManager=new N4,this.remoteDocumentCache=function(r){return new G4(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new R4(n),this.Ii=new H4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new q4(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){oe("MemoryPersistence","Starting transaction:",e);const r=new Q4(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class Q4 extends EV{constructor(e){super(),this.currentSequenceNumber=e}}class k_{constructor(e){this.persistence=e,this.Ri=new A_,this.Vi=null}static mi(e){return new k_(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=ye.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jd{constructor(e,n){this.persistence=e,this.pi=new vo(i=>CV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=F4(this,n)}static mi(e,n){return new jd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Se.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Ne(),r=Ne();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new b_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return WO()?8:PV(Xt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new Y4;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(Yo()<=Re.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Yo()<=Re.DEBUG&&oe("QueryEngine","Query:",Xo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Yo()<=Re.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(n))):K.resolve())}ys(e,n){if(vx(n))return K.resolve(null);let i=Ei(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ag(n,null,"F"),i=Ei(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Ne(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Ag(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return vx(n)||r.isEqual(Se.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(Yo()<=Re.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xo(n)),this.vs(e,a,n,vV(r,Uu)).next(u=>u))})}Ds(e,n){let i=new kt(eC(e));return n.forEach((r,o)=>{bf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return Yo()<=Re.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Xo(n)),this.ps.getDocumentsMatchingQuery(e,n,us.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="LocalStore",J4=3e8;class e3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new ut(Le),this.xs=new vo(o=>x_(o),T_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function t3(t,e,n,i){return new e3(t,e,n,i)}async function PC(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Ne();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function n3(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,v=g.keys();let T=K.resolve();return v.forEach(k=>{T=T.next(()=>m.getEntry(h,k)).next(b=>{const F=f.docVersions.get(k);He(F!==null,48541),b.version.compareTo(F)<0&&(g.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),m.addEntry(b)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Ne();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function SC(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function i3(t,e){const n=Ce(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const v=r.get(g);if(!v)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Ut.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(b,F,I){return b.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=J4?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(v,T,m)&&u.push(n.Pi.updateTargetData(o,T))});let h=lr(),f=Ne();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(r3(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Se.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function r3(t,e,n){let i=Ne(),r=Ne();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=lr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Se.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):oe(R_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function s3(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=__),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function o3(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new zr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Ng(t,e,n){const i=Ce(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!rl(a))throw a;oe(R_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Lx(t,e,n){const i=Ce(t);let r=Se.min(),o=Ne();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=Ce(h),v=g.xs.get(m);return v!==void 0?K.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,m)}(i,a,Ei(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Se.min(),n?o:Ne())).next(u=>(a3(i,qV(e),u),{documents:u,Qs:o})))}function a3(t,e,n){let i=t.Os.get(e)||Se.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Nx{constructor(){this.activeTargetIds=XV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l3{constructor(){this.Mo=new Nx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Nx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="ConnectivityMonitor";class Ox{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(Mx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(Mx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh=null;function Mg(){return wh===null?wh=function(){return 268435456+Math.round(2147483648*Math.random())}():wh++,"0x"+wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="RestConnection",c3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class h3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Rd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Mg(),u=this.zo(e,n.toUriEncodedString());oe(Yp,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=el(f);return this.Jo(e,u,h,i,m).then(g=>(oe(Yp,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Wa(Yp,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=c3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class f3 extends h3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Mg();return new Promise((u,h)=>{const f=new AS;f.setWithCredentials(!0),f.listenOnce(kS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case jh.NO_ERROR:const g=f.getResponseJson();oe(qt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case jh.TIMEOUT:oe(qt,`RPC '${e}' ${a} timed out`),h(new fe(Y.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const v=f.getStatus();if(oe(qt,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const b=function(I){const P=I.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(P)>=0?P:Y.UNKNOWN}(k.status);h(new fe(b,k.message))}else h(new fe(Y.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new fe(Y.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{oe(qt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);oe(qt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Mg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LS(),u=RS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");oe(qt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let v=!1,T=!1;const k=new d3({Yo:F=>{T?oe(qt,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(v||(oe(qt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),v=!0),oe(qt,`RPC '${e}' stream ${r} sending:`,F),g.send(F))},Zo:()=>g.close()}),b=(F,I,P)=>{F.listen(I,S=>{try{P(S)}catch(B){setTimeout(()=>{throw B},0)}})};return b(g,Zl.EventType.OPEN,()=>{T||(oe(qt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),b(g,Zl.EventType.CLOSE,()=>{T||(T=!0,oe(qt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(g))}),b(g,Zl.EventType.ERROR,F=>{T||(T=!0,Wa(qt,`RPC '${e}' stream ${r} transport errored. Name:`,F.name,"Message:",F.message),k.a_(new fe(Y.UNAVAILABLE,"The operation could not be completed")))}),b(g,Zl.EventType.MESSAGE,F=>{var I;if(!T){const P=F.data[0];He(!!P,16349);const S=P,B=(S==null?void 0:S.error)||((I=S[0])==null?void 0:I.error);if(B){oe(qt,`RPC '${e}' stream ${r} received error:`,B);const q=B.status;let Z=function(N){const O=xt[N];if(O!==void 0)return dC(O)}(q),R=B.message;Z===void 0&&(Z=Y.INTERNAL,R="Unknown error status: "+q+" with message "+B.message),T=!0,k.a_(new fe(Z,R)),g.close()}else oe(qt,`RPC '${e}' stream ${r} received:`,P),k.u_(P)}}),b(u,bS.STAT_EVENT,F=>{F.stat===Tg.PROXY?oe(qt,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===Tg.NOPROXY&&oe(qt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Xp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){return new y4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="PersistentStream";class IC{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new fe(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(Dx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(Dx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p3 extends IC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=w4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?Pi(a.readTime):Se.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Lg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Ig(h)?{documents:E4(o,h)}:{query:P4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=mC(o,a.resumeToken);const f=kg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=Vd(o,a.snapshotVersion.toTimestamp());const f=kg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=C4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Lg(this.serializer),n.removeTarget=e,this.q_(n)}}class m3 extends IC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=T4(e.writeResults,e.commitTime),i=Pi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Lg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>x4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{}class y3 extends g3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new fe(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,bg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(Y.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,bg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(Y.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class _3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ar(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="RemoteStore";class v3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{xo(this)&&(oe(uo,"Restarting streams for network reachability change."),await async function(h){const f=Ce(h);f.Ea.add(4),await cc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Of(f)}(this))})}),this.Ra=new _3(i,r)}}async function Of(t){if(xo(t))for(const e of t.da)await e(!0)}async function cc(t){for(const e of t.da)await e(!1)}function AC(t,e){const n=Ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),O_(n)?M_(n):sl(n).O_()&&N_(n,e))}function L_(t,e){const n=Ce(t),i=sl(n);n.Ia.delete(e),i.O_()&&kC(n,e),n.Ia.size===0&&(i.O_()?i.L_():xo(n)&&n.Ra.set("Unknown"))}function N_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sl(t).Y_(e)}function kC(t,e){t.Va.Ue(e),sl(t).Z_(e)}function M_(t){t.Va=new f4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),sl(t).start(),t.Ra.ua()}function O_(t){return xo(t)&&!sl(t).x_()&&t.Ia.size>0}function xo(t){return Ce(t).Ea.size===0}function bC(t){t.Va=void 0}async function w3(t){t.Ra.set("Online")}async function x3(t){t.Ia.forEach((e,n)=>{N_(t,e)})}async function T3(t,e){bC(t),O_(t)?(t.Ra.ha(e),M_(t)):t.Ra.set("Unknown")}async function E3(t,e,n){if(t.Ra.set("Online"),e instanceof pC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){oe(uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fd(t,i)}else if(e instanceof Uh?t.Va.Ze(e):e instanceof fC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const i=await SC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Ut.EMPTY_BYTE_STRING,m.snapshotVersion)),kC(o,h);const g=new zr(m.target,h,f,m.sequenceNumber);N_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){oe(uo,"Failed to raise snapshot:",i),await Fd(t,i)}}async function Fd(t,e,n){if(!rl(e))throw e;t.Ea.add(1),await cc(t),t.Ra.set("Offline"),n||(n=()=>SC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(uo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Of(t)})}function RC(t,e){return e().catch(n=>Fd(t,n,e))}async function Df(t){const e=Ce(t),n=fs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:__;for(;P3(e);)try{const r=await s3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,S3(e,r)}catch(r){await Fd(e,r)}LC(e)&&NC(e)}function P3(t){return xo(t)&&t.Ta.length<10}function S3(t,e){t.Ta.push(e);const n=fs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function LC(t){return xo(t)&&!fs(t).x_()&&t.Ta.length>0}function NC(t){fs(t).start()}async function C3(t){fs(t).ra()}async function I3(t){const e=fs(t);for(const n of t.Ta)e.ea(n.mutations)}async function A3(t,e,n){const i=t.Ta.shift(),r=S_.from(i,e,n);await RC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Df(t)}async function k3(t,e){e&&fs(t).X_&&await async function(i,r){if(function(a){return c4(a)&&a!==Y.ABORTED}(r.code)){const o=i.Ta.shift();fs(i).B_(),await RC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Df(i)}}(t,e),LC(t)&&NC(t)}async function Vx(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),oe(uo,"RemoteStore received new credentials");const i=xo(n);n.Ea.add(3),await cc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Of(n)}async function b3(t,e){const n=Ce(t);e?(n.Ea.delete(2),await Of(n)):e||(n.Ea.add(2),await cc(n),n.Ra.set("Unknown"))}function sl(t){return t.ma||(t.ma=function(n,i,r){const o=Ce(n);return o.sa(),new p3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:w3.bind(null,t),t_:x3.bind(null,t),r_:T3.bind(null,t),H_:E3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),O_(t)?M_(t):t.Ra.set("Unknown")):(await t.ma.stop(),bC(t))})),t.ma}function fs(t){return t.fa||(t.fa=function(n,i,r){const o=Ce(n);return o.sa(),new m3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:C3.bind(null,t),r_:k3.bind(null,t),ta:I3.bind(null,t),na:A3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Df(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(uo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new D_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function V_(t,e){if(ar("AsyncQueue",`${e}: ${t}`),rl(t))return new fe(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{static emptySet(e){return new Ca(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ye.comparator(n.key,i.key):(n,i)=>ye.comparator(n.key,i.key),this.keyedMap=Kl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ca)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ca;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.ga=new ut(ye.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ka{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ka(e,n,Ca.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class L3{constructor(){this.queries=Fx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ce(n),o=r.queries;r.queries=Fx(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new fe(Y.ABORTED,"Firestore shutting down"))}}function Fx(){return new vo(t=>JS(t),kf)}async function N3(t,e){const n=Ce(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new R3,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=V_(a,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&j_(n)}async function M3(t,e){const n=Ce(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function O3(t,e){const n=Ce(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&j_(n)}function D3(t,e,n){const i=Ce(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function j_(t){t.Ca.forEach(e=>{e.next()})}var Og,Bx;(Bx=Og||(Og={})).Ma="default",Bx.Cache="cache";class V3{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ka(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Og.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.key=e}}class OC{constructor(e){this.key=e}}class j3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=eC(e),this.tu=new Ca(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new jx,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const v=r.get(m),T=bf(this.query,g)?g:null,k=!!v&&this.mutatedKeys.has(v.key),b=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let F=!1;v&&T?v.data.isEqual(T.data)?k!==b&&(i.track({type:3,doc:T}),F=!0):this.su(v,T)||(i.track({type:2,doc:T}),F=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),F=!0):v&&!T&&(i.track({type:1,doc:v}),F=!0,(h||f)&&(u=!0)),F&&(T?(a=a.add(T),o=b?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(T,k){const b=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:F})}};return b(T)-b(k)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new Ka(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new OC(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new MC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ka.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const F_="SyncEngine";class F3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class B3{constructor(e){this.key=e,this.hu=!1}}class z3{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new vo(u=>JS(u),kf),this.Iu=new Map,this.Eu=new Set,this.du=new ut(ye.comparator),this.Au=new Map,this.Ru=new A_,this.Vu={},this.mu=new Map,this.fu=Za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U3(t,e,n=!0){const i=zC(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await DC(i,e,n,!0),r}async function H3(t,e){const n=zC(t);await DC(n,e,!0,!1)}async function DC(t,e,n,i){const r=await o3(t.localStore,Ei(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await W3(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&AC(t.remoteStore,r),u}async function W3(t,e,n,i,r){t.pu=(g,v,T)=>async function(b,F,I,P){let S=F.view.ru(I);S.Cs&&(S=await Lx(b.localStore,F.query,!1).then(({documents:R})=>F.view.ru(R,S)));const B=P&&P.targetChanges.get(F.targetId),q=P&&P.targetMismatches.get(F.targetId)!=null,Z=F.view.applyChanges(S,b.isPrimaryClient,B,q);return Ux(b,F.targetId,Z.au),Z.snapshot}(t,g,v,T);const o=await Lx(t.localStore,e,!0),a=new j3(e,o.Qs),u=a.ru(o.documents),h=uc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);Ux(t,n,f.au);const m=new F3(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function $3(t,e,n){const i=Ce(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!kf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ng(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&L_(i.remoteStore,r.targetId),Dg(i,r.targetId)}).catch(il)):(Dg(i,r.targetId),await Ng(i.localStore,r.targetId,!0))}async function q3(t,e){const n=Ce(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),L_(n.remoteStore,i.targetId))}async function G3(t,e,n){const i=e5(t);try{const r=await function(a,u){const h=Ce(a),f=tt.now(),m=u.reduce((T,k)=>T.add(k.key),Ne());let g,v;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=lr(),b=Ne();return h.Ns.getEntries(T,m).next(F=>{k=F,k.forEach((I,P)=>{P.isValidDocument()||(b=b.add(I))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,k)).next(F=>{g=F;const I=[];for(const P of u){const S=s4(P,g.get(P.key).overlayedDocument);S!=null&&I.push(new wo(P.key,S,qS(S.value.mapValue),er.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,I,u)}).next(F=>{v=F;const I=F.applyToLocalDocumentSet(g,b);return h.documentOverlayCache.saveOverlays(T,F.batchId,I)})}).then(()=>({batchId:v.batchId,changes:nC(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new ut(Le)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await hc(i,r.changes),await Df(i.remoteStore)}catch(r){const o=V_(r,"Failed to persist write");n.reject(o)}}async function VC(t,e){const n=Ce(t);try{const i=await i3(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(He(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?He(a.hu,14607):r.removedDocuments.size>0&&(He(a.hu,42227),a.hu=!1))}),await hc(n,i,e)}catch(i){await il(i)}}function zx(t,e,n){const i=Ce(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Ce(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const v of g.Sa)v.va(u)&&(f=!0)}),f&&j_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Z3(t,e,n){const i=Ce(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new ut(ye.comparator);a=a.insert(o,Qt.newNoDocument(o,Se.min()));const u=Ne().add(o),h=new Nf(Se.min(),new Map,new ut(Le),a,u);await VC(i,h),i.du=i.du.remove(o),i.Au.delete(e),B_(i)}else await Ng(i.localStore,e,!1).then(()=>Dg(i,e,n)).catch(il)}async function K3(t,e){const n=Ce(t),i=e.batch.batchId;try{const r=await n3(n.localStore,e);FC(n,i,null),jC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await hc(n,r)}catch(r){await il(r)}}async function Q3(t,e,n){const i=Ce(t);try{const r=await function(a,u){const h=Ce(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(He(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);FC(i,e,n),jC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await hc(i,r)}catch(r){await il(r)}}function jC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function FC(t,e,n){const i=Ce(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Dg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||BC(t,i)})}function BC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(L_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),B_(t))}function Ux(t,e,n){for(const i of n)i instanceof MC?(t.Ru.addReference(i.key,e),Y3(t,i)):i instanceof OC?(oe(F_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||BC(t,i.key)):we(19791,{wu:i})}function Y3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(oe(F_,"New document in limbo: "+n),t.Eu.add(i),B_(t))}function B_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(et.fromString(e)),i=t.fu.next();t.Au.set(i,new B3(n)),t.du=t.du.insert(n,i),AC(t.remoteStore,new zr(Ei(E_(n.path)),i,"TargetPurposeLimboResolution",Sf.ce))}}async function hc(t,e,n){const i=Ce(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=b_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Ce(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,v=>K.forEach(v.Es,T=>m.persistence.referenceDelegate.addReference(g,v.targetId,T)).next(()=>K.forEach(v.ds,T=>m.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))}catch(g){if(!rl(g))throw g;oe(R_,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const T=m.Ms.get(v),k=T.snapshotVersion,b=T.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(v,b)}}}(i.localStore,o))}async function X3(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){oe(F_,"User change. New user:",e.toKey());const i=await PC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new fe(Y.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await hc(n,i.Ls)}}function J3(t,e){const n=Ce(t),i=n.Au.get(e);if(i&&i.hu)return Ne().add(i.key);{let r=Ne();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function zC(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z3.bind(null,e),e.Pu.H_=O3.bind(null,e.eventManager),e.Pu.yu=D3.bind(null,e.eventManager),e}function e5(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q3.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return t3(this.persistence,new X4,e.initialUser,this.serializer)}Cu(e){return new EC(k_.mi,this.serializer)}Du(e){return new l3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class t5 extends Bd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof jd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new V4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new EC(i=>jd.mi(i,n),this.serializer)}}class Vg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=X3.bind(null,this.syncEngine),await b3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new L3}()}createDatastore(e){const n=Mf(e.databaseInfo.databaseId),i=function(o){return new f3(o)}(e.databaseInfo);return function(o,a,u,h){return new y3(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new v3(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>zx(this.syncEngine,n,0),function(){return Ox.v()?new Ox:new u3}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new z3(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ce(r);oe(uo,"RemoteStore shutting down."),o.Ea.add(5),await cc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vg.provider={build:()=>new Vg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="FirestoreClient";class i5{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Zt.UNAUTHENTICATED,this.clientId=g_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{oe(ps,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(oe(ps,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=V_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Jp(t,e){t.asyncQueue.verifyOperationInProgress(),oe(ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await PC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await r5(t);oe(ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Vx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Vx(e.remoteStore,r)),t._onlineComponents=e}async function r5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(ps,"Using user provided OfflineComponentProvider");try{await Jp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Wa("Error using user provided cache. Falling back to memory cache: "+n),await Jp(t,new Bd)}}else oe(ps,"Using default OfflineComponentProvider"),await Jp(t,new t5(void 0));return t._offlineComponents}async function UC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(ps,"Using user provided OnlineComponentProvider"),await Hx(t,t._uninitializedComponentsProvider._online)):(oe(ps,"Using default OnlineComponentProvider"),await Hx(t,new Vg))),t._onlineComponents}function s5(t){return UC(t).then(e=>e.syncEngine)}async function Wx(t){const e=await UC(t),n=e.eventManager;return n.onListen=U3.bind(null,e.syncEngine),n.onUnlisten=$3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=H3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=q3.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="firestore.googleapis.com",qx=!0;class Gx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WC,this.ssl=qx}else this.host=e.host,this.ssl=e.ssl??qx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O4)throw new fe(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_V("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HC(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new lV;switch(i.type){case"firstParty":return new dV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=$x.get(n);i&&(oe("ComponentProvider","Removing Datastore"),$x.delete(n),i.terminate())}(this),Promise.resolve()}}function o5(t,e,n,i={}){var f;t=Sa(t,Vf);const r=el(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(vS(`https://${u}`),wS("Firestore",!0)),o.host!==WC&&o.host!==u&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!oo(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Zt.MOCK_USER;else{m=OO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new fe(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Zt(v)}t._authCredentials=new uV(new MS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new jf(this.firestore,e,this._query)}}class At{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(ac(n,At._jsonSchema))return new At(e,i||null,new ye(et.fromString(n.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Pt("string",At._jsonSchemaVersion),referencePath:Pt("string")};class ns extends jf{constructor(e,n,i){super(e,n,E_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ye(e))}withConverter(e){return new ns(this.firestore,e,this._path)}}function em(t,e,...n){if(t=In(t),OS("collection","path",e),t instanceof Vf){const i=et.fromString(e,...n);return ox(i),new ns(t,null,i)}{if(!(t instanceof At||t instanceof ns))throw new fe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(et.fromString(e,...n));return ox(i),new ns(t.firestore,null,i)}}function Ia(t,e,...n){if(t=In(t),arguments.length===1&&(e=g_.newId()),OS("doc","path",e),t instanceof Vf){const i=et.fromString(e,...n);return sx(i),new At(t,null,new ye(i))}{if(!(t instanceof At||t instanceof ns))throw new fe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(et.fromString(e,...n));return sx(i),new At(t.firestore,t instanceof ns?t.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="AsyncQueue";class Kx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CC(this,"async_queue_retry"),this._c=()=>{const i=Xp();i&&oe(Zx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Xp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Xs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rl(e))throw e;oe(Zx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,ar("INTERNAL UNHANDLED ERROR: ",Qx(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=D_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:Qx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Qx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class zd extends Vf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Kx,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kx(e),this._firestoreClient=void 0,await e}}}function a5(t,e){const n=typeof t=="object"?t:PS(),i=typeof t=="string"?t:Rd,r=p_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=NO("firestore");o&&o5(r,...o)}return r}function $C(t){if(t._terminated)throw new fe(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||l5(t),t._firestoreClient}function l5(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new kV(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,HC(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new i5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(Ut.fromBase64String(e))}catch(n){throw new fe(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Un(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ac(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:Pt("string",Un._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Si._jsonSchemaVersion}}static fromJSON(e){if(ac(e,Si._jsonSchema))return new Si(e.latitude,e.longitude)}}Si._jsonSchemaVersion="firestore/geoPoint/1.0",Si._jsonSchema={type:Pt("string",Si._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ac(e,Ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ci(e.vectorValues);throw new fe(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ci._jsonSchemaVersion="firestore/vectorValue/1.0",Ci._jsonSchema={type:Pt("string",Ci._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=/^__.*__$/;class c5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new wo(e,this.data,this.fieldMask,n,this.fieldTransforms):new lc(e,this.data,n,this.fieldTransforms)}}function GC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class U_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new U_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ud(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GC(this.Ac)&&u5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class h5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Mf(e)}Cc(e,n,i,r=!1){return new U_({Ac:e,methodName:n,Dc:i,path:Ft.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function d5(t){const e=t._freezeSettings(),n=Mf(t._databaseId);return new h5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function f5(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);YC("Data must be an object, but it was:",a,i);const u=KC(i,a);let h,f;if(o.merge)h=new ii(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const v=p5(e,g,n);if(!a.contains(v))throw new fe(Y.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);g5(m,v)||m.push(v)}h=new ii(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new c5(new zn(u),h,f)}function ZC(t,e){if(QC(t=In(t)))return YC("Unsupported field value:",e,t),KC(t,e);if(t instanceof qC)return function(i,r){if(!GC(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=ZC(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=In(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return JV(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=tt.fromDate(i);return{timestampValue:Vd(r.serializer,o)}}if(i instanceof tt){const o=new tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vd(r.serializer,o)}}if(i instanceof Si)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Un)return{bytesValue:mC(r.serializer,i._byteString)};if(i instanceof At){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:I_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ci)return function(a,u){return{mapValue:{fields:{[WS]:{stringValue:$S},[Ld]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return P_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${y_(i)}`)}(t,e)}function KC(t,e){const n={};return jS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(t,(i,r)=>{const o=ZC(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function QC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof Si||t instanceof Un||t instanceof At||t instanceof qC||t instanceof Ci)}function YC(t,e,n){if(!QC(n)||!DS(n)){const i=y_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function p5(t,e,n){if((e=In(e))instanceof z_)return e._internalPath;if(typeof e=="string")return XC(t,e);throw Ud("Field path arguments must be of type string or ",t,!1,void 0,n)}const m5=new RegExp("[~\\*/\\[\\]]");function XC(t,e,n){if(e.search(m5)>=0)throw Ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new z_(...e.split("."))._internalPath}catch{throw Ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ud(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new fe(Y.INVALID_ARGUMENT,u+t+h)}function g5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(eI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y5 extends JC{data(){return super.data()}}function eI(t,e){return typeof e=="string"?XC(t,e):e instanceof z_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class v5{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return _o(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Ld].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>mt(a.doubleValue));return new Ci(n)}convertGeoPoint(e){return new Si(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=If(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const n=cs(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=et.fromString(e);He(xC(i),9688,{name:e});const r=new Wu(i.get(1),i.get(3)),o=new ye(i.popFirst(5));return r.isEqual(n)||ar(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Yl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends JC{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(eI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:Pt("string",Js._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Hh extends Js{data(e={}){return super.data(e)}}class Aa{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Yl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Hh(this._firestore,this._userDataWriter,i.key,i,new Yl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new Hh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Yl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Hh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Yl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:x5(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=g_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function x5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}Aa._jsonSchemaVersion="firestore/querySnapshot/1.0",Aa._jsonSchema={type:Pt("string",Aa._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class tI extends v5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function ka(t,e,n){t=Sa(t,At);const i=Sa(t.firestore,zd),r=w5(t.converter,e,n);return T5(i,[f5(d5(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,er.none())])}function tm(t,...e){var h,f,m;t=In(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Yx(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Yx(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof At)a=Sa(t.firestore,zd),u=E_(t._key.path),o={next:g=>{e[i]&&e[i](E5(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=Sa(t,jf);a=Sa(g.firestore,zd),u=g._query;const v=new tI(a);o={next:T=>{e[i]&&e[i](new Aa(a,v,g,T))},error:e[i+1],complete:e[i+2]},_5(t._query)}return function(v,T,k,b){const F=new n5(b),I=new V3(T,F,k);return v.asyncQueue.enqueueAndForget(async()=>N3(await Wx(v),I)),()=>{F.Nu(),v.asyncQueue.enqueueAndForget(async()=>M3(await Wx(v),I))}}($C(a),u,r,o)}function T5(t,e){return function(i,r){const o=new Xs;return i.asyncQueue.enqueueAndForget(async()=>G3(await s5(i),r,o)),o.promise}($C(t),e)}function E5(t,e,n){const i=n.docs.get(e._key),r=new tI(t);return new Js(t,r,e._key,i,new Yl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){nl=r})(tl),Ha(new ao("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new zd(new cV(i.getProvider("auth-internal")),new fV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new fe(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),es(tx,nx,e),es(tx,nx,"esm2020")})();function nI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P5=nI,iI=new sc("auth","Firebase",nI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new d_("@firebase/auth");function S5(t,...e){Hd.logLevel<=Re.WARN&&Hd.warn(`Auth (${tl}): ${t}`,...e)}function Wh(t,...e){Hd.logLevel<=Re.ERROR&&Hd.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,...e){throw H_(t,...e)}function Ii(t,...e){return H_(t,...e)}function rI(t,e,n){const i={...P5(),[e]:n};return new sc("auth","Firebase",i).create(e,{appName:t.name})}function is(t){return rI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return iI.create(t,...e)}function Te(t,e,...n){if(!t)throw H_(e,...n)}function Ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wh(e),new Error(e)}function cr(t,e){t||Ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function C5(){return Xx()==="http:"||Xx()==="https:"}function Xx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(C5()||zO()||"connection"in navigator)?navigator.onLine:!0}function A5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,cr(n>e,"Short delay should be less than long delay!"),this.isMobile=jO()||UO()}get(){return I5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e){cr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R5=new dc(3e4,6e4);function Ff(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ol(t,e,n,i,r={}){return oI(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=oc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return BO()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&el(t.emulatorConfig.host)&&(f.credentials="include"),sI.fetch()(await lI(t,t.config.apiHost,n,u),f)})}async function oI(t,e,n){t._canInitEmulator=!1;const i={...k5,...e};try{const r=new L5(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw xh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw xh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw xh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw xh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw rI(t,m,f);ur(t,m)}}catch(r){if(r instanceof fr)throw r;ur(t,"network-request-failed",{message:String(r)})}}async function aI(t,e,n,i,r={}){const o=await ol(t,e,n,i,r);return"mfaPendingCredential"in o&&ur(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function lI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?W_(t.config,r):`${t.config.apiScheme}://${r}`;return b5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class L5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ii(this.auth,"network-request-failed")),R5.get())})}}function xh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ii(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t,e){return ol(t,"POST","/v1/accounts:delete",e)}async function Wd(t,e){return ol(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M5(t,e=!1){const n=In(t),i=await n.getIdToken(e),r=$_(i);Te(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:yu(nm(r.auth_time)),issuedAtTime:yu(nm(r.iat)),expirationTime:yu(nm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function nm(t){return Number(t)*1e3}function $_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Wh("JWT malformed, contained fewer than 3 sections"),null;try{const r=mS(n);return r?JSON.parse(r):(Wh("Failed to decode base64 JWT payload"),null)}catch(r){return Wh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Jx(t){const e=$_(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof fr&&O5(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function O5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Zu(t,Wd(e,{idToken:n}));Te(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?uI(r.providerUserInfo):[],a=j5(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Fg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function V5(t){const e=In(t);await $d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function j5(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function uI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F5(t,e){const n=await oI(t,{},async()=>{const i=oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await lI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&el(t.emulatorConfig.host)&&(h.credentials="include"),sI.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function B5(t,e){return ol(t,"POST","/v2/accounts:revokeToken",Ff(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=Jx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await F5(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new ba;return i&&(Te(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Te(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(Te(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ri{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new D5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Fg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Zu(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return M5(this,e)}reload(){return V5(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await $d(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Zu(this,N5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:T,providerData:k,stsTokenManager:b}=n;Te(g&&b,e,"internal-error");const F=ba.fromJSON(this.name,b);Te(typeof g=="string",e,"internal-error"),Cr(i,e.name),Cr(r,e.name),Te(typeof v=="boolean",e,"internal-error"),Te(typeof T=="boolean",e,"internal-error"),Cr(o,e.name),Cr(a,e.name),Cr(u,e.name),Cr(h,e.name),Cr(f,e.name),Cr(m,e.name);const I=new ri({uid:g,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:F,createdAt:f,lastLoginAt:m});return k&&Array.isArray(k)&&(I.providerData=k.map(P=>({...P}))),h&&(I._redirectEventId=h),I}static async _fromIdTokenResponse(e,n,i=!1){const r=new ba;r.updateFromServerResponse(n);const o=new ri({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await $d(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Te(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?uI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new ba;u.updateFromIdToken(i);const h=new ri({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Fg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new Map;function Qi(t){cr(t instanceof Function,"Expected a class definition");let e=e1.get(t);return e?(cr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,e1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cI.type="NONE";const t1=cI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t,e,n){return`firebase:${t}:${e}:${n}`}class Ra{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=$h(this.userKey,r.apiKey,o),this.fullPersistenceKey=$h("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wd(this.auth,{idToken:e}).catch(()=>{});return n?ri._fromGetAccountInfoResponse(this.auth,n,e):null}return ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ra(Qi(t1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Qi(t1);const a=$h(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const v=await Wd(e,{idToken:m}).catch(()=>{});if(!v)break;g=await ri._fromGetAccountInfoResponse(e,v,m)}else g=ri._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ra(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ra(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gI(e))return"Blackberry";if(yI(e))return"Webos";if(dI(e))return"Safari";if((e.includes("chrome/")||fI(e))&&!e.includes("edge/"))return"Chrome";if(mI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function hI(t=Xt()){return/firefox\//i.test(t)}function dI(t=Xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fI(t=Xt()){return/crios\//i.test(t)}function pI(t=Xt()){return/iemobile/i.test(t)}function mI(t=Xt()){return/android/i.test(t)}function gI(t=Xt()){return/blackberry/i.test(t)}function yI(t=Xt()){return/webos/i.test(t)}function q_(t=Xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function z5(t=Xt()){var e;return q_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function U5(){return HO()&&document.documentMode===10}function _I(t=Xt()){return q_(t)||mI(t)||yI(t)||gI(t)||/windows phone/i.test(t)||pI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t,e=[]){let n;switch(t){case"Browser":n=n1(Xt());break;case"Worker":n=`${n1(Xt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t,e={}){return ol(t,"GET","/v2/passwordPolicy",Ff(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=6;class q5{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i1(this),this.idTokenSubscription=new i1(this),this.beforeStateQueue=new H5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qi(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Ra.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wd(this,{idToken:e}),i=await ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ni(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $d(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(is(this));const n=e?In(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W5(this),n=new q5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await B5(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qi(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Ra.create(this,[Qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&S5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bf(t){return In(t)}class i1{constructor(e){this.auth=e,this.observer=null,this.addObserver=YO(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z5(t){G_=t}function K5(t){return G_.loadJS(t)}function Q5(){return G_.gapiScript}function Y5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(t,e){const n=p_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(oo(o,e??{}))return r;ur(r,"already-initialized")}return n.initialize({options:e})}function J5(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Qi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ej(t,e,n){const i=Bf(t);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=wI(e),{host:a,port:u}=tj(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(oo(f,i.config.emulator)&&oo(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,el(a)?(vS(`${o}//${a}${h}`),wS("Auth",!0)):nj()}function wI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tj(t){const e=wI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:r1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:r1(a)}}}function r1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,n){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t,e){return aI(t,"POST","/v1/accounts:signInWithIdp",Ff(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="http://localhost";class co extends xI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new co(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return La(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,La(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,La(e,n)}buildRequest(){const e={requestUri:ij,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends TI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends fc{constructor(){super("facebook.com")}static credential(e){return co._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return co._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Or.credential(n,i)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends fc{constructor(){super("github.com")}static credential(e){return co._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends fc{constructor(){super("twitter.com")}static credential(e,n){return co._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Vr.credential(n,i)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e){return aI(t,"POST","/v1/accounts:signUp",Ff(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await ri._fromIdTokenResponse(e,i,r),a=s1(i);return new ms({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=s1(i);return new ms({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function s1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(t){var r;if(ni(t.app))return Promise.reject(is(t));const e=Bf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new ms({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await rj(e,{returnSecureToken:!0}),i=await ms._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends fr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,qd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new qd(e,n,i,r)}}function EI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qd._fromErrorAndOperation(t,o,e,i):o})}async function oj(t,e,n=!1){const i=await Zu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ms._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(t,e,n=!1){const{auth:i}=t;if(ni(i.app))return Promise.reject(is(i));const r="reauthenticate";try{const o=await Zu(t,EI(i,r,e,t),n);Te(o.idToken,i,"internal-error");const a=$_(o.idToken);Te(a,i,"internal-error");const{sub:u}=a;return Te(t.uid===u,i,"user-mismatch"),ms._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ur(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e,n=!1){if(ni(t.app))return Promise.reject(is(t));const i="signIn",r=await EI(t,i,e),o=await ms._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function uj(t,e,n,i){return In(t).onIdTokenChanged(e,n,i)}function cj(t,e,n){return In(t).beforeAuthStateChanged(e,n)}function hj(t,e,n,i){return In(t).onAuthStateChanged(e,n,i)}const Gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=1e3,fj=10;class SI extends PI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_I(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);U5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,fj):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},dj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SI.type="LOCAL";const pj=SI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI extends PI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CI.type="SESSION";const II=CI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new zf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await mj(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=Z_("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(){return window}function yj(t){Ai().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function _j(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function wj(){return AI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="firebaseLocalStorageDb",xj=1,Zd="firebaseLocalStorage",bI="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uf(t,e){return t.transaction([Zd],e?"readwrite":"readonly").objectStore(Zd)}function Tj(){const t=indexedDB.deleteDatabase(kI);return new pc(t).toPromise()}function Bg(){const t=indexedDB.open(kI,xj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Zd,{keyPath:bI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Zd)?e(i):(i.close(),await Tj(),e(await Bg()))})})}async function o1(t,e,n){const i=Uf(t,!0).put({[bI]:e,value:n});return new pc(i).toPromise()}async function Ej(t,e){const n=Uf(t,!1).get(e),i=await new pc(n).toPromise();return i===void 0?null:i.value}function a1(t,e){const n=Uf(t,!0).delete(e);return new pc(n).toPromise()}const Pj=800,Sj=3;class RI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Sj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zf._getInstance(wj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await _j(),!this.activeServiceWorker)return;this.sender=new gj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bg();return await o1(e,Gd,"1"),await a1(e,Gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>o1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Ej(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>a1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Uf(r,!1).getAll();return new pc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Pj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RI.type="LOCAL";const Cj=RI;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t,e){return e?Qi(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_ extends xI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return La(e,this._buildIdpRequest())}_linkToIdToken(e,n){return La(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return La(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Aj(t){return lj(t.auth,new K_(t),t.bypassAuthState)}function kj(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),aj(n,new K_(t),t.bypassAuthState)}async function bj(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),oj(n,new K_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Aj;case"linkViaPopup":case"linkViaRedirect":return bj;case"reauthViaPopup":case"reauthViaRedirect":return kj;default:ur(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=new dc(2e3,1e4);class _a extends LI{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){cr(this.filter.length===1,"Popup operations only handle one event");const e=Z_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Rj.get())};e()}}_a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="pendingRedirect",qh=new Map;class Nj extends LI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=qh.get(this.auth._key());if(!e){try{const i=await Mj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}qh.set(this.auth._key(),e)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mj(t,e){const n=Vj(e),i=Dj(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Oj(t,e){qh.set(t._key(),e)}function Dj(t){return Qi(t._redirectPersistence)}function Vj(t){return $h(Lj,t.config.apiKey,t.name)}async function jj(t,e,n=!1){if(ni(t.app))return Promise.reject(is(t));const i=Bf(t),r=Ij(i,e),a=await new Nj(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=10*60*1e3;class Bj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!NI(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ii(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fj&&this.cachedEventUids.clear(),this.cachedEventUids.has(l1(e))}saveEventToCache(e){this.cachedEventUids.add(l1(e)),this.lastProcessedEventTime=Date.now()}}function l1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e={}){return ol(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wj=/^https?/;async function $j(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Uj(t);for(const n of e)try{if(qj(n))return}catch{}ur(t,"unauthorized-domain")}function qj(t){const e=jg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Wj.test(n))return!1;if(Hj.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new dc(3e4,6e4);function u1(){const t=Ai().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Zj(t){return new Promise((e,n)=>{var r,o,a;function i(){u1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u1(),n(Ii(t,"network-request-failed"))},timeout:Gj.get()})}if((o=(r=Ai().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Ai().gapi)!=null&&a.load)i();else{const u=Y5("iframefcb");return Ai()[u]=()=>{gapi.load?i():n(Ii(t,"network-request-failed"))},K5(`${Q5()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Gh=null,e})}let Gh=null;function Kj(t){return Gh=Gh||Zj(t),Gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=new dc(5e3,15e3),Yj="__/auth/iframe",Xj="emulator/auth/iframe",Jj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tF(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?W_(e,Xj):`https://${t.config.authDomain}/${Yj}`,i={apiKey:e.apiKey,appName:t.name,v:tl},r=eF.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${oc(i).slice(1)}`}async function nF(t){const e=await Kj(t),n=Ai().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:tF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jj,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Ii(t,"network-request-failed"),u=Ai().setTimeout(()=>{o(a)},Qj.get());function h(){Ai().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rF=500,sF=600,oF="_blank",aF="http://localhost";class c1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lF(t,e,n,i=rF,r=sF){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...iF,width:i.toString(),height:r.toString(),top:o,left:a},f=Xt().toLowerCase();n&&(u=fI(f)?oF:n),hI(f)&&(e=e||aF,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[T,k])=>`${v}${T}=${k},`,"");if(z5(f)&&u!=="_self")return uF(e||"",u),new c1(null);const g=window.open(e||"",u,m);Te(g,t,"popup-blocked");try{g.focus()}catch{}return new c1(g)}function uF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF="__/auth/handler",hF="emulator/auth/handler",dF=encodeURIComponent("fac");async function h1(t,e,n,i,r,o){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:tl,eventId:r};if(e instanceof TI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",QO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof fc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${dF}=${encodeURIComponent(h)}`:"";return`${fF(t)}?${oc(u).slice(1)}${f}`}function fF({config:t}){return t.emulator?W_(t,hF):`https://${t.authDomain}/${cF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="webStorageSupport";class pF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=II,this._completeRedirectFn=jj,this._overrideRedirectResult=Oj}async _openPopup(e,n,i,r){var a;cr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await h1(e,n,i,jg(),r);return lF(e,o,Z_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await h1(e,n,i,jg(),r);return yj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(cr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await nF(e),i=new Bj(e);return n.register("authEvent",r=>(Te(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(im,{type:im},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[im];o!==void 0&&n(!!o),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$j(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _I()||dI()||q_()}}const mF=pF;var d1="@firebase/auth",f1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _F(t){Ha(new ao("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;Te(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vI(t)},f=new G5(i,r,o,h);return J5(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ha(new ao("auth-internal",e=>{const n=Bf(e.getProvider("auth").getImmediate());return(i=>new gF(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(d1,f1,yF(t)),es(d1,f1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=5*60,wF=_S("authIdTokenMaxAge")||vF;let p1=null;const xF=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>wF)return;const r=n==null?void 0:n.token;p1!==r&&(p1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function TF(t=PS()){const e=p_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=X5(t,{popupRedirectResolver:mF,persistence:[Cj,pj,II]}),i=_S("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=xF(o.toString());cj(n,a,()=>a(n.currentUser)),uj(n,u=>a(u))}}const r=gS("auth");return r&&ej(n,`http://${r}`),n}function EF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Z5({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Ii("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",EF().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_F("Browser");var PF="firebase",SF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(PF,SF,"app");const CF={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},MI=ES(CF),$i=a5(MI),m1=TF(MI),zg={palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},IF="vysocany",OI=zg[IF].center,DI=15,AF=13,kF=18,g1={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},rs=["red","blue"],bF={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},y1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],ta=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function Ku(t){var e;return((e=bF[t.size])==null?void 0:e.points)||100}function RF(t,e=.008){const n={};rs.forEach(r=>n[r]=[]);const i={};return rs.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),rs.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],m=o[h],g=`${f.id}-${m.id}`,v=f.location[0]-m.location[0],T=(f.location[1]-m.location[1])*1.6,k=Math.sqrt(v*v+T*T);k<=e&&!a.has(g)&&(a.add(g),n[r].push({from:f.location,to:m.location,distance:k}))}}),n}function Xl(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function VI(t){const e={};return rs.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=Ku(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const jI=j.createContext(null),Ir={player:"streetart-ctf-player",captures:"streetart-ctf-captures"},Th="streetart-captures",LF="streetart-players",NF="streetart-teams",Je={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function rm(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function sm(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function MF({children:t}){const[e,n]=j.useState(null),[i,r]=j.useState(!0),[o,a]=j.useState(()=>rm(Ir.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,totalDistance:0,lastCaptureTime:null,lastCaptureLocation:null,captureCount:0,recaptureCount:0,firstCaptureCount:0})),[u,h]=j.useState(()=>{const te=rm(Ir.captures,{});return ta.map(re=>({...re,capturedBy:te[re.id]||null}))}),[f,m]=j.useState(null),[g,v]=j.useState(!1),[T,k]=j.useState(null);j.useEffect(()=>{const te=hj(m1,re=>{re?(n(re),a(le=>({...le,id:re.uid}))):sj(m1).catch(le=>{console.log("Auth not available, using local mode")})});return()=>te()},[]);const[b,F]=j.useState(null),[I,P]=j.useState([]),S=j.useRef({});j.useEffect(()=>{let te=!0;const re=em($i,Th),le=tm(re,ae=>{const J={},me=[];ae.forEach(Me=>{var We,_t;const ge=Me.data();if(ge.capturedBy){J[Me.id]=ge.capturedBy;const Be=ta.find(ln=>ln.id===Me.id);me.push({id:Me.id,artName:(Be==null?void 0:Be.name)||Me.id,area:(Be==null?void 0:Be.area)||"Unknown",team:ge.capturedBy,playerName:ge.playerName||"Unknown",capturedAt:((_t=(We=ge.capturedAt)==null?void 0:We.toDate)==null?void 0:_t.call(We))||new Date,points:ge.points||100,isRecapture:ge.isRecapture||!1})}});const Ze=me.sort((Me,ge)=>ge.capturedAt-Me.capturedAt).slice(0,10);P(Ze),te||ae.docChanges().forEach(Me=>{if(Me.type==="added"||Me.type==="modified"){const ge=Me.doc.data(),We=S.current[Me.doc.id];if(ge.capturedBy&&We!==ge.capturedBy){const _t=ta.find(Be=>Be.id===Me.doc.id);_t&&(F({artName:_t.name,team:ge.capturedBy,playerName:ge.playerName||"Someone",points:ge.points||Ku(_t),streak:ge.streak||0,isRecapture:ge.isRecapture||!!We,timestamp:Date.now()}),setTimeout(()=>F(null),4e3))}}}),te=!1,S.current=J,h(ta.map(Me=>({...Me,capturedBy:J[Me.id]||null}))),sm(Ir.captures,J),r(!0),console.log("Firebase: Synced",Object.keys(J).length,"captures")},ae=>{console.warn("Firestore sync error:",ae),r(!1)});return()=>le()},[]);const[B,q]=j.useState({red:0,blue:0});j.useEffect(()=>{const te=em($i,NF),re=tm(te,le=>{const ae={red:0,blue:0};le.forEach(J=>{const me=J.data();(J.id==="red"||J.id==="blue")&&(ae[J.id]=me.score||0)}),q(ae),console.log("Team scores:",ae)});return()=>re()},[]);const[Z,R]=j.useState([]);j.useEffect(()=>{const te=em($i,LF),re=tm(te,le=>{const ae=[];le.forEach(J=>{const me=J.data();me.name&&me.team&&ae.push({id:J.id,name:me.name,team:me.team,score:me.score||0,captures:me.captures||0})}),R(ae.sort((J,me)=>me.score-J.score)),console.log("Players loaded:",ae.length)});return()=>re()},[]),j.useEffect(()=>{sm(Ir.player,o)},[o]);const C=j.useCallback(async(te,re)=>{if(i)try{await ka(Ia($i,Th,te),{artId:te,capturedBy:re.team,capturedAt:new Date,playerId:o.id,playerName:o.name,points:re.points,streak:re.streak,isFirstCapture:re.isFirstCapture,isRecapture:re.isRecapture})}catch(le){console.warn("Failed to sync capture to Firebase:",le)}},[i,o.id,o.name]);j.useCallback(async te=>{if(i)try{await ka(Ia($i,Th,"global"),te,{merge:!0})}catch(re){console.warn("Failed to sync to Firebase:",re)}},[i]);const N=VI(u),O={red:Math.max(B.red,N.red),blue:Math.max(B.blue,N.blue)},D=j.useCallback(te=>{rs.includes(te)&&a(re=>({...re,team:te}))},[]),z=j.useCallback(te=>{a(re=>({...re,name:te}))},[]),M=j.useCallback((te,re,le=50)=>{let ae=null,J=1/0;return u.forEach(me=>{const Ze=(me.location[0]-te)*111e3,Me=(me.location[1]-re)*111e3*Math.cos(te*Math.PI/180),ge=Math.sqrt(Ze*Ze+Me*Me);ge<J&&ge<=le&&(J=ge,ae={...me,distance:Math.round(ge)})}),ae},[u]),xe=j.useCallback((te,re,le,ae)=>{const J=(le-te)*111e3,me=(ae-re)*111e3*Math.cos(te*Math.PI/180);return Math.sqrt(J*J+me*me)},[]),ft=j.useCallback((te,re,le=null)=>{const ae=Ku(te),J=[];let me=ae;const Ze=te.capturedBy&&te.capturedBy!==re.team,Me=!te.capturedBy,ge=Date.now(),We=re.lastCaptureTime?(ge-re.lastCaptureTime)/1e3/60:1/0,_t=re.streak||0;if(_t>0){const Be=Math.min(_t*.1,1),ln=Math.round(ae*Be);ln>0&&(me+=ln,J.push({type:"streak",label:` ${_t}x Streak`,points:ln}))}if(Ze){const Be=Math.round(ae*.5);me+=Be,J.push({type:"recapture",label:" Recapture",points:Be})}if(Me){const Be=Math.round(ae*.25);me+=Be,J.push({type:"first",label:" First Capture",points:Be})}if(We<5){const Be=Math.round(ae*.2);me+=Be,J.push({type:"speed",label:" Speed Bonus",points:Be})}if(le&&re.lastCaptureLocation){const Be=xe(re.lastCaptureLocation[0],re.lastCaptureLocation[1],le[0],le[1]);if(Be>50){const ln=Math.min(Math.round(Be/100)*5,50);ln>0&&(me+=ln,J.push({type:"distance",label:` ${Math.round(Be)}m walked`,points:ln}))}}return{basePoints:ae,totalPoints:me,bonuses:J,isRecapture:Ze,isFirstCapture:Me}},[xe]),Ie=j.useCallback((te,re=null)=>{if(!o.team)return{success:!1,message:"Join a team first!"};const le=u.find(ge=>ge.id===te);if(!le)return{success:!1,message:"Art not found"};if(le.capturedBy===o.team)return{success:!1,message:"Already yours!"};if(le.status==="ghost")return{success:!1,message:"This art no longer exists"};const ae=re||le.location,J=ft(le,o,ae),me=le.capturedBy;h(ge=>ge.map(We=>We.id===te?{...We,capturedBy:o.team}:We));const Ze=o.streak+1;a(ge=>({...ge,score:ge.score+J.totalPoints,capturedArt:[...ge.capturedArt.filter(We=>We!==te),te],streak:Ze,maxStreak:Math.max(ge.maxStreak,Ze),lastCaptureTime:Date.now(),lastCaptureLocation:ae,captureCount:ge.captureCount+1,recaptureCount:J.isRecapture?ge.recaptureCount+1:ge.recaptureCount,firstCaptureCount:J.isFirstCapture?ge.firstCaptureCount+1:ge.firstCaptureCount,totalDistance:ge.totalDistance+(re&&ge.lastCaptureLocation?xe(ge.lastCaptureLocation[0],ge.lastCaptureLocation[1],re[0],re[1]):0)})),C(te,{team:o.team,points:J.totalPoints,streak:Ze,isFirstCapture:J.isFirstCapture,isRecapture:J.isRecapture});const Me=rm(Ir.captures,{});return sm(Ir.captures,{...Me,[te]:o.team}),{success:!0,art:le,points:J.totalPoints,basePoints:J.basePoints,bonuses:J.bonuses,streak:Ze,previousTeam:me,message:me?`Stolen from ${me}!`:"Captured!"}},[o,u,C,ft,xe]),ct=j.useCallback(async(te,re)=>{v(!0);const le=M(re.lat,re.lng,100);if(!le){v(!1),m({success:!1,message:"No street art nearby. Get closer!"});return}k({art:le,photo:te,location:re}),v(!1)},[M]),G=j.useCallback(()=>{if(!T)return;const te=Ie(T.art.id);m(te),k(null)},[T,Ie]),de=j.useCallback(()=>{k(null),m(null)},[]),ee=j.useCallback(async()=>{if(localStorage.removeItem(Ir.player),localStorage.removeItem(Ir.captures),e&&i)try{await ka(Ia($i,Th,"global"),{})}catch(te){console.warn("Failed to reset Firebase:",te)}a({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),h(ta.map(te=>({...te,capturedBy:null}))),m(null),k(null)},[e,i]),ie={player:o,artPoints:u,teamScores:O,globalTeamScores:B,allPlayers:Z,recentCaptures:I,captureNotification:b,scanResult:f,isScanning:g,pendingCapture:T,isOnline:i,teams:rs,joinTeam:D,setPlayerName:z,captureArt:Ie,startCapture:ct,confirmCapture:G,cancelCapture:de,findNearestArt:M,setScanResult:m,resetAll:ee,TEAM_COLORS:Je};return x.jsx(jI.Provider,{value:ie,children:t})}function pr(){const t=j.useContext(jI);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ge=(t,e)=>{const n=j.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>j.createElement("svg",{ref:m,...OF,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${DF(t)}`,u].join(" "),...f},[...e.map(([g,v])=>j.createElement(g,v)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=Ge("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=Ge("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=Ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=Ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=Ge("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=Ge("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=Ge("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=Ge("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Ge("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=Ge("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=Ge("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=Ge("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=Ge("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=Ge("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=Ge("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=Ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Ge("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=Ge("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=Ge("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Ge("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=Ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=Ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=Ge("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=Ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=Ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=Ge("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=Ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Ge("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),tB=51,nB=24;function Hg({size:t=120,className:e=""}){const[n,i]=j.useState(0);j.useEffect(()=>{const a=setInterval(()=>{i(u=>(u+1)%tB)},1e3/nB);return()=>clearInterval(a)},[]);const r=String(n).padStart(5,"0");return x.jsx("img",{src:`/street-art-ctf/animation/frame_${r}.png`,alt:"Loading",width:t,height:t,className:e,style:{imageRendering:"pixelated",objectFit:"contain"}})}const _1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],v1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function iB(){const t=_1[Math.floor(Math.random()*_1.length)],e=v1[Math.floor(Math.random()*v1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function rB(){const t=Hy(),{player:e,joinTeam:n,setPlayerName:i}=pr(),[r,o]=j.useState(0),[a,u]=j.useState(e.name||""),[h,f]=j.useState(null);j.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]);const m=()=>{u(iB())},g=()=>{if(r===1&&a.trim()&&i(a.trim()),r===2&&h&&n(h),r===3){t("/map");return}o(r+1)},v=()=>r===1?a.trim().length>=2:r===2?h!==null:!0;return x.jsxs("div",{className:"h-screen bg-[#0a0a0f] flex flex-col overflow-hidden",children:[x.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:[0,1,2,3].map(T=>x.jsx("div",{className:`h-1.5 rounded-sm transition-all duration-300 ${T===r?"bg-white w-8":T<r?"bg-white/60 w-1.5":"bg-white/20 w-1.5"}`},T))}),x.jsxs(Bu,{mode:"wait",children:[r===0&&x.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx(pe.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},className:"mb-6",children:x.jsx(Hg,{size:140})}),x.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Street Art CTF"}),x.jsx("p",{className:"text-white/40 max-w-xs mb-8",children:"Scan real street art to capture territory for your team. The city is your battlefield."}),x.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[x.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:x.jsx(jF,{size:20,className:"text-white/70"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium text-sm",children:"Scan Art"}),x.jsx("div",{className:"text-xs text-white/40",children:"Find and capture street art"})]})]}),x.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:x.jsx(Ug,{size:20,className:"text-white/70"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium text-sm",children:"Control Territory"}),x.jsx("div",{className:"text-xs text-white/40",children:"Expand your team's area"})]})]}),x.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:x.jsx(HI,{size:20,className:"text-white/70"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium text-sm",children:"Win Together"}),x.jsx("div",{className:"text-xs text-white/40",children:"Lead your team to victory"})]})]})]})]},"intro"),r===1&&x.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx("h1",{className:"text-2xl font-bold mb-2",children:"What's your name?"}),x.jsx("p",{className:"text-white/40 mb-8",children:"This is how others will see you"}),x.jsx("div",{className:"w-full max-w-xs mb-4",children:x.jsx("input",{type:"text",value:a,onChange:T=>u(T.target.value),placeholder:"Enter your name...",maxLength:20,className:"w-full px-4 py-4 rounded-lg bg-white/5 border border-white/10 text-center text-xl font-medium placeholder:text-white/30 focus:outline-none focus:border-white/30"})}),x.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white/50 hover:bg-white/10 transition-colors",children:[x.jsx(zI,{size:16}),"Generate random name"]})]},"name"),r===2&&x.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Choose your team"}),x.jsx("p",{className:"text-white/40 mb-8",children:"Fight for territory together"}),x.jsxs("div",{className:"flex gap-4 w-full max-w-sm",children:[x.jsxs(pe.button,{whileTap:{scale:.95},onClick:()=>f("red"),className:`flex-1 p-5 rounded-lg border-2 transition-all ${h==="red"?"bg-red-500/20 border-red-500":"bg-white/5 border-white/10 hover:border-red-500/50"}`,children:[x.jsx("div",{className:`w-14 h-14 mx-auto rounded-lg flex items-center justify-center mb-3 ${h==="red"?"bg-red-500":"bg-red-500/30"}`,children:x.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90"})}),x.jsx("div",{className:"font-bold text-lg mb-1",style:{color:"#ff6b6b"},children:"Red Team"}),x.jsx("div",{className:"text-xs text-white/40",children:"The Flames"})]}),x.jsxs(pe.button,{whileTap:{scale:.95},onClick:()=>f("blue"),className:`flex-1 p-5 rounded-lg border-2 transition-all ${h==="blue"?"bg-blue-500/20 border-blue-500":"bg-white/5 border-white/10 hover:border-blue-500/50"}`,children:[x.jsx("div",{className:`w-14 h-14 mx-auto rounded-lg flex items-center justify-center mb-3 ${h==="blue"?"bg-blue-500":"bg-blue-500/30"}`,children:x.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90"})}),x.jsx("div",{className:"font-bold text-lg mb-1",style:{color:"#4dabf7"},children:"Blue Team"}),x.jsx("div",{className:"text-xs text-white/40",children:"The Waves"})]})]})]},"team"),r===3&&x.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[x.jsx("div",{className:"mb-4",children:x.jsx(Hg,{size:100})}),x.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome, ",a,"!"]}),x.jsxs("p",{className:"text-white/40 mb-8",children:["You're on Team ",x.jsx("span",{style:{color:h==="red"?"#ff6b6b":"#4dabf7"},className:"font-bold",children:h==="red"?"Red":"Blue"})]}),x.jsxs("div",{className:"w-full max-w-xs space-y-3 mb-8",children:[x.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 text-left",children:[x.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[x.jsx(Hf,{size:14,className:"text-white/50"}),"How to Play"]}),x.jsx("div",{className:"text-xs text-white/40",children:"Find street art around you. Point your camera at it to scan and capture it for your team."})]}),x.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 text-left",children:[x.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[x.jsx(Ug,{size:14,className:"text-white/50"}),"Check the Map"]}),x.jsx("div",{className:"text-xs text-white/40",children:"See which art is nearby and which territories each team controls."})]}),x.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 text-left",children:[x.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:[x.jsx(WI,{size:14,className:"text-white/50"}),"Score Points"]}),x.jsx("div",{className:"text-xs text-white/40",children:"Each capture earns points. Big murals = more points. Steal from enemies for bonus!"})]})]})]},"tutorial")]}),x.jsx("div",{className:"p-4 pb-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:x.jsxs(pe.button,{whileTap:{scale:.98},onClick:g,disabled:!v(),className:`w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition-all ${v()?"bg-white text-black":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:[r===3?"Let's Go":"Continue",x.jsx(FF,{size:20})]})})]})}const sB=[{color:"red",name:"Red Team"},{color:"blue",name:"Blue Team"}];function oB(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"just now";const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const i=Math.floor(n/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function aB(){const{player:t,joinTeam:e,teamScores:n,recentCaptures:i,isOnline:r}=pr(),o=f=>{e(f)},a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},u={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},h=Object.values(n).reduce((f,m)=>f+m,0);return x.jsxs(pe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:a,children:[x.jsxs(pe.div,{className:"text-center mb-6",variants:u,children:[x.jsx(pe.div,{className:"relative inline-block mb-3",animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:x.jsx(Hg,{size:70})}),x.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Street Art CTF"}),x.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] ${r?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[r?x.jsx(zF,{size:10}):x.jsx(JF,{size:10}),r?"Live":"Offline"]})]}),x.jsxs(pe.div,{variants:u,className:"mb-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"text-xs text-white/40",children:"Red Team"}),x.jsx("span",{className:"text-xs text-white/40",children:"Blue Team"})]}),x.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-white/10",children:[x.jsx(pe.div,{className:"h-full",style:{backgroundColor:Je.red.hex},initial:{width:"50%"},animate:{width:h>0?`${n.red/h*100}%`:"50%"},transition:{duration:.8}}),x.jsx(pe.div,{className:"h-full",style:{backgroundColor:Je.blue.hex},initial:{width:"50%"},animate:{width:h>0?`${n.blue/h*100}%`:"50%"},transition:{duration:.8}})]}),x.jsxs("div",{className:"flex items-center justify-between mt-2",children:[x.jsxs("span",{className:"text-sm font-bold",style:{color:Je.red.hex},children:[n.red," pts"]}),x.jsxs("span",{className:"text-sm font-bold",style:{color:Je.blue.hex},children:[n.blue," pts"]})]})]}),t.team?x.jsx(pe.div,{className:"mb-6 p-4 rounded-xl border-2",variants:u,style:{borderColor:Je[t.team].hex+"50",backgroundColor:Je[t.team].hex+"10"},children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:Je[t.team].hex+"30"},children:x.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Je[t.team].hex}})}),x.jsxs("div",{children:[x.jsx("p",{className:"font-bold text-white",children:t.name}),x.jsx("p",{className:"text-xs",style:{color:Je[t.team].hex},children:t.team==="red"?"Red Team":"Blue Team"})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),x.jsx("p",{className:"text-[10px] text-white/40",children:"points"})]})]})}):x.jsxs(pe.div,{variants:u,className:"mb-6",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[x.jsx(HI,{size:14,className:"text-white/40"}),x.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),x.jsx("div",{className:"grid grid-cols-2 gap-3",children:sB.map(({color:f,name:m})=>x.jsxs(pe.button,{onClick:()=>o(f),className:"p-4 rounded-xl text-center border-2 transition-all",style:{borderColor:Je[f].hex+"50",backgroundColor:Je[f].hex+"10"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[x.jsx("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:Je[f].hex+"30"},children:x.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:Je[f].hex}})}),x.jsx("p",{className:"font-semibold text-white",children:m})]},f))})]}),x.jsxs(pe.div,{variants:u,children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[x.jsx(BF,{size:14,className:"text-white/40"}),x.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Live Activity"})]}),i.length===0?x.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:"No captures yet. Be the first!"}):x.jsx("div",{className:"space-y-2",children:i.map((f,m)=>{var v;const g=((v=Je[f.team])==null?void 0:v.hex)||"#888";return x.jsxs(pe.div,{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.05},children:[x.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${g}20`},children:f.isRecapture?x.jsx(UI,{size:14,style:{color:g}}):x.jsx(FI,{size:14,style:{color:g}})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium text-white truncate",children:f.artName}),x.jsxs("p",{className:"text-[10px] text-white/40",children:[x.jsx("span",{style:{color:g},children:f.playerName}),"  ",f.area]})]}),x.jsxs("div",{className:"text-right flex-shrink-0",children:[x.jsxs("p",{className:"text-xs font-semibold",style:{color:g},children:["+",f.points]}),x.jsx("p",{className:"text-[10px] text-white/30",children:oB(f.capturedAt)})]})]},f.id)})})]})]})}function lB(t,e){const n=j.useRef(e);j.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function uB(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const cB=1;function hB(t){return Object.freeze({__version:cB,map:t})}function $I(t,e){return Object.freeze({...t,...e})}const qI=j.createContext(null),GI=qI.Provider;function X_(){const t=j.useContext(qI);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function dB(t){function e(n,i){const{instance:r,context:o}=t(n).current;return j.useImperativeHandle(i,()=>r),n.children==null?null:eo.createElement(GI,{value:o},n.children)}return j.forwardRef(e)}function fB(t){function e(n,i){const{instance:r}=t(n).current;return j.useImperativeHandle(i,()=>r),null}return j.forwardRef(e)}function ZI(t,e){const n=j.useRef();j.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function J_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Wg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(bA,function(n){var i="1.9.4";function r(s){var l,d,p,_;for(d=1,p=arguments.length;d<p;d++){_=arguments[d];for(l in _)s[l]=_[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,_,E,V;return V=function(){p=!1,_&&(E.apply(d,_),_=!1)},E=function(){p?_=arguments:(s.apply(d,arguments),setTimeout(V,l),p=!0)},E}function m(s,l,d){var p=l[1],_=l[0],E=p-_;return s===p&&d?s:((s-_)%E+E)%E+_}function g(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return T(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function F(s,l,d){var p=[];for(var _ in s)p.push(encodeURIComponent(d?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function P(s,l){return s.replace(I,function(d,p){var _=l[p];if(_===void 0)throw new Error("No value provided for variable "+d);return typeof _=="function"&&(_=_(l)),_})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function C(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||Z("RequestAnimationFrame")||C,O=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,l,d){if(d&&N===C)s.call(l);else return N.call(window,a(s,l))}function z(s){s&&O.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:v,trim:T,splitWords:k,setOptions:b,getParamString:F,template:P,isArray:S,indexOf:B,emptyImageUrl:q,requestFn:N,cancelFn:O,requestAnimFrame:D,cancelAnimFrame:z};function xe(){}xe.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(l[_]=this[_]);return s.statics&&r(l,s.statics),s.includes&&(ft(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,V=p._initHooks.length;E<V;E++)p._initHooks[E].call(this)}},l},xe.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},xe.mergeOptions=function(s){return r(this.prototype.options,s),this},xe.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function ft(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ie={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var _=0,E=s.length;_<E;_++)this._on(s[_],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var _=arguments.length===1,E=0,V=s.length;E<V;E++)_?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var _={fn:l,ctx:d};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,l,d){var p,_,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,E=p.length;_<E;_++)p[_].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var V=this._listens(s,l,d);if(V!==!1){var H=p[V];this._firingCount&&(H.fn=g,this._events[s]=p=p.slice()),p.splice(V,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var E=0,V=_.length;E<V;E++){var H=_[E],$=H.fn;H.once&&this.off(s,$,H.ctx),$.call(H.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=l;typeof l!="function"&&(p=!!l,_=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,_,d)!==!1)return!0;if(p){for(var V in this._eventParents)if(this._eventParents[V].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var _=0,E=p.length;_<E;_++)if(p[_].fn===l&&p[_].ctx===d)return _;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var _=0,E=s.length;_<E;_++)this._on(s[_],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ie.addEventListener=Ie.on,Ie.removeEventListener=Ie.clearAllEventListeners=Ie.off,Ie.addOneTimeEventListener=Ie.once,Ie.fireEvent=Ie.fire,Ie.hasEventListeners=Ie.listens;var ct=xe.extend(Ie);function G(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var de=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(ee(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ee(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(s){s=ee(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=ee(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ee(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ee(s,l,d){return s instanceof G?s:S(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,l,d)}function ie(s,l){if(s)for(var d=l?[s,l]:s,p=0,_=d.length;p<_;p++)this.extend(d[p])}ie.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)l=d=ee(s);else if(s=te(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof G?s=ee(s):s=te(s),s instanceof ie?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=te(s);var l=this.min,d=this.max,p=s.min,_=s.max,E=_.x>=l.x&&p.x<=d.x,V=_.y>=l.y&&p.y<=d.y;return E&&V},overlaps:function(s){s=te(s);var l=this.min,d=this.max,p=s.min,_=s.max,E=_.x>l.x&&p.x<d.x,V=_.y>l.y&&p.y<d.y;return E&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,_=Math.abs(l.y-d.y)*s;return te(ee(l.x-p,l.y-_),ee(d.x+p,d.y+_))},equals:function(s){return s?(s=te(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function te(s,l){return!s||s instanceof ie?s:new ie(s,l)}function re(s,l){if(s)for(var d=l?[s,l]:s,p=0,_=d.length;p<_;p++)this.extend(d[p])}re.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,_;if(s instanceof ae)p=s,_=s;else if(s instanceof re){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(J(s)||le(s)):this;return!l&&!d?(this._southWest=new ae(p.lat,p.lng),this._northEast=new ae(_.lat,_.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(_.lat,d.lat),d.lng=Math.max(_.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,_=Math.abs(l.lng-d.lng)*s;return new re(new ae(l.lat-p,l.lng-_),new ae(d.lat+p,d.lng+_))},getCenter:function(){return new ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ae||"lat"in s?s=J(s):s=le(s);var l=this._southWest,d=this._northEast,p,_;return s instanceof re?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=l.lat&&_.lat<=d.lat&&p.lng>=l.lng&&_.lng<=d.lng},intersects:function(s){s=le(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),E=_.lat>=l.lat&&p.lat<=d.lat,V=_.lng>=l.lng&&p.lng<=d.lng;return E&&V},overlaps:function(s){s=le(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),E=_.lat>l.lat&&p.lat<d.lat,V=_.lng>l.lng&&p.lng<d.lng;return E&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=le(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function le(s,l){return s instanceof re?s:new re(s,l)}function ae(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}ae.prototype={equals:function(s,l){if(!s)return!1;s=J(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return Ze.distance(this,J(s))},wrap:function(){return Ze.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return le([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new ae(this.lat,this.lng,this.alt)}};function J(s,l,d){return s instanceof ae?s:S(s)&&typeof s[0]!="object"?s.length===3?new ae(s[0],s[1],s[2]):s.length===2?new ae(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ae(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new ae(s,l,d)}var me={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),_=this.transformation.transform(l.max,d);return new ie(p,_)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ae(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,_=l.lng-d.lng;if(p===0&&_===0)return s;var E=s.getSouthWest(),V=s.getNorthEast(),H=new ae(E.lat-p,E.lng-_),$=new ae(V.lat-p,V.lng-_);return new re(H,$)}},Ze=r({},me,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,_=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),V=Math.sin((l.lng-s.lng)*d/2),H=E*E+Math.cos(p)*Math.cos(_)*V*V,$=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*$}}),Me=6378137,ge={R:Me,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),_=Math.sin(p*l);return new G(this.R*s.lng*l,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var l=180/Math.PI;return new ae((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Me*Math.PI;return new ie([-s,-s],[s,s])}()};function We(s,l,d,p){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}We.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new G((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function _t(s,l,d,p){return new We(s,l,d,p)}var Be=r({},Ze,{code:"EPSG:3857",projection:ge,transformation:function(){var s=.5/(Math.PI*ge.R);return _t(s,.5,-s,.5)}()}),ln=r({},Be,{code:"EPSG:900913"});function gc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function To(s,l){var d="",p,_,E,V,H,$;for(p=0,E=s.length;p<E;p++){for(H=s[p],_=0,V=H.length;_<V;_++)$=H[_],d+=(_?"L":"M")+$.x+" "+$.y;d+=l?he.svg?"z":"x":""}return d||"M0 0"}var xs=document.documentElement.style,Ts="ActiveXObject"in window,bt=Ts&&!document.addEventListener,Rt="msLaunchUri"in navigator&&!("documentMode"in document),mr=un("webkit"),yc=un("android"),al=un("android 2")||un("android 3"),$f=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Es=yc&&un("Google")&&$f<537&&!("AudioNode"in window),Eo=!!window.opera,ll=!Rt&&un("chrome"),Po=un("gecko")&&!mr&&!Eo&&!Ts,qf=!ll&&un("safari"),_c=un("phantom"),ul="OTransition"in xs,vc=navigator.platform.indexOf("Win")===0,gr=Ts&&"transition"in xs,Ps="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!al,So="MozPerspective"in xs,Ri=!window.L_DISABLE_3D&&(gr||Ps||So)&&!ul&&!_c,yr=typeof orientation<"u"||un("mobile"),Co=yr&&mr,wc=yr&&Ps,_r=!window.PointerEvent&&window.MSPointerEvent,cl=!!(window.PointerEvent||_r),Lt="ontouchstart"in window||!!window.TouchEvent,xc=!window.L_NO_TOUCH&&(Lt||cl),Ss=yr&&Eo,Cs=yr&&Po,Gf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Zf=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),vr=function(){return!!document.createElement("canvas").getContext}(),hl=!!(document.createElementNS&&gc("svg").createSVGRect),Kf=!!hl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Io=!hl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Tc=navigator.platform.indexOf("Mac")===0,Ec=navigator.platform.indexOf("Linux")===0;function un(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var he={ie:Ts,ielt9:bt,edge:Rt,webkit:mr,android:yc,android23:al,androidStock:Es,opera:Eo,chrome:ll,gecko:Po,safari:qf,phantom:_c,opera12:ul,win:vc,ie3d:gr,webkit3d:Ps,gecko3d:So,any3d:Ri,mobile:yr,mobileWebkit:Co,mobileWebkit3d:wc,msPointer:_r,pointer:cl,touch:xc,touchNative:Lt,mobileOpera:Ss,mobileGecko:Cs,retina:Gf,passiveEvents:Zf,canvas:vr,svg:hl,vml:Io,inlineSvg:Kf,mac:Tc,linux:Ec},Pc=he.msPointer?"MSPointerDown":"pointerdown",Gn=he.msPointer?"MSPointerMove":"pointermove",dl=he.msPointer?"MSPointerUp":"pointerup",fl=he.msPointer?"MSPointerCancel":"pointercancel",Is={touchstart:Pc,touchmove:Gn,touchend:dl,touchcancel:fl},Ao={touchstart:pl,touchmove:bn,touchend:bn,touchcancel:bn},Li={},Sc=!1;function Cc(s,l,d){return l==="touchstart"&&As(),Ao[l]?(d=Ao[l].bind(this,d),s.addEventListener(Is[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function Qf(s,l,d){if(!Is[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Is[l],d,!1)}function ko(s){Li[s.pointerId]=s}function Ic(s){Li[s.pointerId]&&(Li[s.pointerId]=s)}function bo(s){delete Li[s.pointerId]}function As(){Sc||(document.addEventListener(Pc,ko,!0),document.addEventListener(Gn,Ic,!0),document.addEventListener(dl,bo,!0),document.addEventListener(fl,bo,!0),Sc=!0)}function bn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Li)l.touches.push(Li[d]);l.changedTouches=[l],s(l)}}function pl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&vt(l),bn(s,l)}function Yf(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ac=200;function kc(s,l){s.addEventListener("dblclick",l);var d=0,p;function _(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var V=vl(E);if(!(V.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!V.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var H=Date.now();H-d<=Ac?(p++,p===2&&l(Yf(E))):p=1,d=H}}}return s.addEventListener("click",_),{dblclick:l,simDblclick:_}}function bc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var ks=Ro(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ni=Ro(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ml=Ni==="webkitTransition"||Ni==="OTransition"?Ni+"End":"transitionend";function gl(s){return typeof s=="string"?document.getElementById(s):s}function wr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Oe(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function je(s){var l=s.parentNode;l&&l.removeChild(s)}function Jt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Rn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Ln(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function bs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=li(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function ue(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,_=d.length;p<_;p++)s.classList.add(d[p]);else if(!bs(s,l)){var E=li(s);Mi(s,(E?E+" ":"")+l)}}function Ke(s,l){s.classList!==void 0?s.classList.remove(l):Mi(s,T((" "+li(s)+" ").replace(" "+l+" "," ")))}function Mi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function li(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function cn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Rc(s,l)}function Rc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Ro(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Oi(s,l,d){var p=l||new G(0,0);s.style[ks]=(he.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function ht(s,l){s._leaflet_pos=l,he.any3d?Oi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Di(s){return s._leaflet_pos||new G(0,0)}var Zn,wn,Lo;if("onselectstart"in document)Zn=function(){Ee(window,"selectstart",vt)},wn=function(){$e(window,"selectstart",vt)};else{var xr=Ro(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zn=function(){if(xr){var s=document.documentElement.style;Lo=s[xr],s[xr]="none"}},wn=function(){xr&&(document.documentElement.style[xr]=Lo,Lo=void 0)}}function No(){Ee(window,"dragstart",vt)}function Mo(){$e(window,"dragstart",vt)}var Rs,ui;function yl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Oo(),Rs=s,ui=s.style.outlineStyle,s.style.outlineStyle="none",Ee(window,"keydown",Oo))}function Oo(){Rs&&(Rs.style.outlineStyle=ui,Rs=void 0,ui=void 0,$e(window,"keydown",Oo))}function Lc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Nn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Xf={__proto__:null,TRANSFORM:ks,TRANSITION:Ni,TRANSITION_END:ml,get:gl,getStyle:wr,create:Oe,remove:je,empty:Jt,toFront:Rn,toBack:Ln,hasClass:bs,addClass:ue,removeClass:Ke,setClass:Mi,getClass:li,setOpacity:cn,testProp:Ro,setTransform:Oi,setPosition:ht,getPosition:Di,get disableTextSelection(){return Zn},get enableTextSelection(){return wn},disableImageDrag:No,enableImageDrag:Mo,preventOutline:yl,restoreOutline:Oo,getSizedParentNode:Lc,getScale:Nn};function Ee(s,l,d,p){if(l&&typeof l=="object")for(var _ in l)Do(s,_,l[_],d);else{l=k(l);for(var E=0,V=l.length;E<V;E++)Do(s,l[E],d,p)}return this}var en="_leaflet_events";function $e(s,l,d,p){if(arguments.length===1)Tr(s),delete s[en];else if(l&&typeof l=="object")for(var _ in l)Ls(s,_,l[_],d);else if(l=k(l),arguments.length===2)Tr(s,function(H){return B(l,H)!==-1});else for(var E=0,V=l.length;E<V;E++)Ls(s,l[E],d,p);return this}function Tr(s,l){for(var d in s[en]){var p=d.split(/\d/)[0];(!l||l(p))&&Ls(s,p,null,null,d)}}var Vi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Do(s,l,d,p){var _=l+h(d)+(p?"_"+h(p):"");if(s[en]&&s[en][_])return this;var E=function(H){return d.call(p||s,H||window.event)},V=E;!he.touchNative&&he.pointer&&l.indexOf("touch")===0?E=Cc(s,l,E):he.touch&&l==="dblclick"?E=kc(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Vi[l]||l,E,he.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(H){H=H||window.event,xl(s,H)&&V(H)},s.addEventListener(Vi[l],E,!1)):s.addEventListener(l,V,!1):s.attachEvent("on"+l,E),s[en]=s[en]||{},s[en][_]=E}function Ls(s,l,d,p,_){_=_||l+h(d)+(p?"_"+h(p):"");var E=s[en]&&s[en][_];if(!E)return this;!he.touchNative&&he.pointer&&l.indexOf("touch")===0?Qf(s,l,E):he.touch&&l==="dblclick"?bc(s,E):"removeEventListener"in s?s.removeEventListener(Vi[l]||l,E,!1):s.detachEvent("on"+l,E),s[en][_]=null}function ze(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function _l(s){return Do(s,"wheel",ze),this}function Ns(s){return Ee(s,"mousedown touchstart dblclick contextmenu",ze),s._leaflet_disable_click=!0,this}function vt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ci(s){return vt(s),ze(s),this}function vl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Ms(s,l){if(!l)return new G(s.clientX,s.clientY);var d=Nn(l),p=d.boundingClientRect;return new G((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var hi=he.linux&&he.chrome?window.devicePixelRatio:he.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wl(s){return he.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/hi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function xl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Os={__proto__:null,on:Ee,off:$e,stopPropagation:ze,disableScrollPropagation:_l,disableClickPropagation:Ns,preventDefault:vt,stop:ci,getPropagationPath:vl,getMousePosition:Ms,getWheelDelta:wl,isExternalTarget:xl,addListener:Ee,removeListener:$e},Tl=ct.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Di(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),ht(this._el,d),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ae=ct.extend({options:{crs:Be,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(J(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ni&&he.any3d&&!he.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,ml,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(J(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(he.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(he.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),_=this.getSize().divideBy(2),E=s instanceof G?s:this.latLngToContainerPoint(s),V=E.subtract(_).multiplyBy(1-1/p),H=this.containerPointToLatLng(_.add(V));return this.setView(H,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():le(s);var d=ee(l.paddingTopLeft||l.padding||[0,0]),p=ee(l.paddingBottomRight||l.padding||[0,0]),_=this.getBoundsZoom(s,!1,d.add(p));if(_=typeof l.maxZoom=="number"?Math.min(l.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var E=p.subtract(d).divideBy(2),V=this.project(s.getSouthWest(),_),H=this.project(s.getNorthEast(),_),$=this.unproject(V.add(H).divideBy(2).add(E),_);return{center:$,zoom:_}},fitBounds:function(s,l){if(s=le(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=ee(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Tl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ue(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!he.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),_=this.project(s),E=this.getSize(),V=this._zoom;s=J(s),l=l===void 0?V:l;var H=Math.max(E.x,E.y),$=H*this.getZoomScale(V,l),Q=_.distanceTo(p)||1,se=1.42,_e=se*se;function ke(wt){var Zc=wt?-1:1,SA=wt?$:H,CA=$*$-H*H+Zc*_e*_e*Q*Q,IA=2*SA*_e*Q,ip=CA/IA,Tv=Math.sqrt(ip*ip+1)-ip,AA=Tv<1e-9?-18:Math.log(Tv);return AA}function tn(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function Nt(wt){return(Math.exp(wt)+Math.exp(-wt))/2}function Dn(wt){return tn(wt)/Nt(wt)}var dn=ke(0);function Ko(wt){return H*(Nt(dn)/Nt(dn+se*wt))}function xA(wt){return H*(Nt(dn)*Dn(dn+se*wt)-tn(dn))/_e}function TA(wt){return 1-Math.pow(1-wt,1.5)}var EA=Date.now(),wv=(ke(1)-dn)/se,PA=d.duration?1e3*d.duration:1e3*wv*.8;function xv(){var wt=(Date.now()-EA)/PA,Zc=TA(wt)*wv;wt<=1?(this._flyToFrame=D(xv,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(xA(Zc)/Q)),V),this.getScaleZoom(H/Ko(Zc),V),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),xv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=le(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,le(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=ee(l.paddingTopLeft||l.padding||[0,0]),p=ee(l.paddingBottomRight||l.padding||[0,0]),_=this.project(this.getCenter()),E=this.project(s),V=this.getPixelBounds(),H=te([V.min.add(d),V.max.subtract(p)]),$=H.getSize();if(!H.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(H.getCenter()),se=H.extend(E).getSize().subtract($);_.x+=Q.x<0?-se.x:se.x,_.y+=Q.y<0?-se.y:se.y,this.panTo(this.unproject(_),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),_=d.divideBy(2).round(),E=p.subtract(_);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new ae(l,d),_=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var V=this.getBoundsZoom(_);this.setView(p,E.maxZoom?Math.min(V,E.maxZoom):V)}var H={latlng:p,bounds:_,timestamp:s.timestamp};for(var $ in s.coords)typeof s.coords[$]=="number"&&(H[$]=s.coords[$]);this.fire("locationfound",H)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)je(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Oe("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new re(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=le(s),d=ee(d||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),E=this.getMaxZoom(),V=s.getNorthWest(),H=s.getSouthEast(),$=this.getSize().subtract(d),Q=te(this.project(H,p),this.project(V,p)).getSize(),se=he.any3d?this.options.zoomSnap:1,_e=$.x/Q.x,ke=$.y/Q.y,tn=l?Math.max(_e,ke):Math.min(_e,ke);return p=this.getScaleZoom(tn,p),se&&(p=Math.round(p/(se/100))*(se/100),p=l?Math.ceil(p/se)*se:Math.floor(p/se)*se),Math.max(_,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new ie(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(J(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ee(s),l)},layerPointToLatLng:function(s){var l=ee(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(J(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(J(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(le(s))},distance:function(s,l){return this.options.crs.distance(J(s),J(l))},containerPointToLayerPoint:function(s){return ee(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ee(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(ee(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(s)))},mouseEventToContainerPoint:function(s){return Ms(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=gl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&he.any3d,ue(s,"leaflet-container"+(he.touch?" leaflet-touch":"")+(he.retina?" leaflet-retina":"")+(he.ielt9?" leaflet-oldie":"")+(he.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=wr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ht(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ue(s.markerPane,"leaflet-zoom-hide"),ue(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){ht(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var _=this._zoom!==l;this._moveStart(_,d)._move(s,l)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var _=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((_||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ht(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?$e:Ee;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),he.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,_=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,V=!1;E;){if(p=this._targets[h(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){V=!0;break}if(p&&p.listens(l,!0)&&(_&&!xl(E,s)||(d.push(p),_))||E===this._container)break;E=E.parentNode}return!d.length&&!V&&!_&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&yl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var _=this._findEventTargets(s,l);if(d){for(var E=[],V=0;V<d.length;V++)d[V].listens(l,!0)&&E.push(d[V]);_=E.concat(_)}if(_.length){l==="contextmenu"&&vt(s);var H=_[0],$={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=H.getLatLng&&(!H._radius||H._radius<=10);$.containerPoint=Q?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(s),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Q?H.getLatLng():this.layerPointToLatLng($.layerPoint)}for(V=0;V<_.length;V++)if(_[V].fire(l,$,!0),$.originalEvent._stopped||_[V].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Di(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return te([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),_=this.getSize().divideBy(2),E=new ie(p.subtract(_),p.add(_)),V=this._getBoundsOffset(E,d,l);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?s:this.unproject(p.add(V),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new ie(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=te(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),_=p.min.subtract(s.min),E=p.max.subtract(s.max),V=this._rebound(_.x,-E.x),H=this._rebound(_.y,-E.y);return new G(V,H)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=he.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Oe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=ks,p=this._proxy.style[d];Oi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Oi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),_=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vo(s,l){return new Ae(s,l)}var hn=xe.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return ue(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),di=function(s){return new hn(s)};Ae.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Oe("div",l+"control-container",this._container);function p(_,E){var V=l+_+" "+l+E;s[_+E]=Oe("div",V,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)je(this._controlCorners[s]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Nc=hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){b(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return hn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Oe("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ns(l),_l(l);var p=this._section=Oe("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Ee(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Oe("a",s+"-toggle",l);_.href="#",_.title="Layers",_.setAttribute("role","button"),Ee(_,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){vt(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Oe("div",s+"-base",p),this._separator=Oe("div",s+"-separator",p),this._overlaysList=Oe("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Jt(this._baseLayersList),Jt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,_=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),Ee(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(_);var V=s.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],_=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||_.push(d);for(E=0;E<_.length;E++)this._map.hasLayer(_[E])&&this._map.removeLayer(_[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),_=s.length-1;_>=0;_--)l=s[_],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ee(s,"click",vt),this.expand();var l=this;setTimeout(function(){$e(s,"click",vt),l._preventClick=!1})}}),Mc=function(s,l,d){return new Nc(s,l,d)},ji=hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Oe("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,_){var E=Oe("a",d,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Ns(E),Ee(E,"click",ci),Ee(E,"click",_,this),Ee(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ke(this._zoomInButton,l),Ke(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ue(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ue(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ae.mergeOptions({zoomControl:!0}),Ae.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ji,this.addControl(this.zoomControl))});var Oc=function(s){return new ji(s)},El=hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Oe("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Oe("div",l,d)),s.imperial&&(this._iScale=Oe("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,_;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(_=this._getRoundNum(l),this._updateScale(this._iScale,_+" ft",_/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Pl=function(s){return new El(s)},Sl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',jo=hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(he.inlineSvg?Sl+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Oe("div","leaflet-control-attribution"),Ns(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ae.mergeOptions({attributionControl:!0}),Ae.addInitHook(function(){this.options.attributionControl&&new jo().addTo(this)});var Fo=function(s){return new jo(s)};hn.Layers=Nc,hn.Zoom=ji,hn.Scale=El,hn.Attribution=jo,di.layers=Mc,di.zoom=Oc,di.scale=Pl,di.attribution=Fo;var xn=xe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xn.addTo=function(s,l){return s.addHandler(l,this),this};var Dc={Events:Ie},fi=he.touch?"touchstart mousedown":"mousedown",Kn=ct.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){b(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Ee(this._dragStartTarget,fi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Kn._dragging===this&&this.finishDrag(!0),$e(this._dragStartTarget,fi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!bs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Kn._dragging===this&&this.finishDrag();return}if(!(Kn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Kn._dragging=this,this._preventOutline&&yl(this._element),No(),Zn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Lc(this._element);this._startPoint=new G(l.clientX,l.clientY),this._startPos=Di(this._element),this._parentScale=Nn(d);var p=s.type==="mousedown";Ee(document,p?"mousemove":"touchmove",this._onMove,this),Ee(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new G(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,vt(s),this._moved||(this.fire("dragstart"),this._moved=!0,ue(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ht(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ke(document.body,"leaflet-dragging"),this._lastTarget&&(Ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$e(document,"mousemove touchmove",this._onMove,this),$e(document,"mouseup touchend touchcancel",this._onUp,this),Mo(),wn();var l=this._moved&&this._moving;this._moving=!1,Kn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Cl(s,l,d){var p,_=[1,4,2,8],E,V,H,$,Q,se,_e,ke;for(E=0,se=s.length;E<se;E++)s[E]._code=W(s[E],l);for(H=0;H<4;H++){for(_e=_[H],p=[],E=0,se=s.length,V=se-1;E<se;V=E++)$=s[E],Q=s[V],$._code&_e?Q._code&_e||(ke=U(Q,$,_e,l,d),ke._code=W(ke,l),p.push(ke)):(Q._code&_e&&(ke=U(Q,$,_e,l,d),ke._code=W(ke,l),p.push(ke)),p.push($));s=p}return s}function Il(s,l){var d,p,_,E,V,H,$,Q,se;if(!s||s.length===0)throw new Error("latlngs not passed");Fe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var _e=J([0,0]),ke=le(s),tn=ke.getNorthWest().distanceTo(ke.getSouthWest())*ke.getNorthEast().distanceTo(ke.getNorthWest());tn<1700&&(_e=Bo(s));var Nt=s.length,Dn=[];for(d=0;d<Nt;d++){var dn=J(s[d]);Dn.push(l.project(J([dn.lat-_e.lat,dn.lng-_e.lng])))}for(H=$=Q=0,d=0,p=Nt-1;d<Nt;p=d++)_=Dn[d],E=Dn[p],V=_.y*E.x-E.y*_.x,$+=(_.x+E.x)*V,Q+=(_.y+E.y)*V,H+=V*3;H===0?se=Dn[0]:se=[$/H,Q/H];var Ko=l.unproject(ee(se));return J([Ko.lat+_e.lat,Ko.lng+_e.lng])}function Bo(s){for(var l=0,d=0,p=0,_=0;_<s.length;_++){var E=J(s[_]);l+=E.lat,d+=E.lng,p++}return J([l/p,d/p])}var zo={__proto__:null,clipPolygon:Cl,polygonCenter:Il,centroid:Bo};function Ht(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Er(s,d),s}function Al(s,l,d){return Math.sqrt(Pe(s,l,d,!0))}function Vc(s,l,d){return Pe(s,l,d)}function Er(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(d);_[0]=_[d-1]=1,c(s,_,l,0,d-1);var E,V=[];for(E=0;E<d;E++)_[E]&&V.push(s[E]);return V}function c(s,l,d,p,_){var E=0,V,H,$;for(H=p+1;H<=_-1;H++)$=Pe(s[H],s[p],s[_],!0),$>E&&(V=H,E=$);E>d&&(l[V]=1,c(s,l,d,p,V),c(s,l,d,V,_))}function y(s,l){for(var d=[s[0]],p=1,_=0,E=s.length;p<E;p++)ne(s[p],s[_])>l&&(d.push(s[p]),_=p);return _<E-1&&d.push(s[E-1]),d}var w;function A(s,l,d,p,_){var E=p?w:W(s,d),V=W(l,d),H,$,Q;for(w=V;;){if(!(E|V))return[s,l];if(E&V)return!1;H=E||V,$=U(s,l,H,d,_),Q=W($,d),H===E?(s=$,E=Q):(l=$,V=Q)}}function U(s,l,d,p,_){var E=l.x-s.x,V=l.y-s.y,H=p.min,$=p.max,Q,se;return d&8?(Q=s.x+E*($.y-s.y)/V,se=$.y):d&4?(Q=s.x+E*(H.y-s.y)/V,se=H.y):d&2?(Q=$.x,se=s.y+V*($.x-s.x)/E):d&1&&(Q=H.x,se=s.y+V*(H.x-s.x)/E),new G(Q,se,_)}function W(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ne(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Pe(s,l,d,p){var _=l.x,E=l.y,V=d.x-_,H=d.y-E,$=V*V+H*H,Q;return $>0&&(Q=((s.x-_)*V+(s.y-E)*H)/$,Q>1?(_=d.x,E=d.y):Q>0&&(_+=V*Q,E+=H*Q)),V=s.x-_,H=s.y-E,p?V*V+H*H:new G(_,E)}function Fe(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ue(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fe(s)}function pt(s,l){var d,p,_,E,V,H,$,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Fe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=J([0,0]),_e=le(s),ke=_e.getNorthWest().distanceTo(_e.getSouthWest())*_e.getNorthEast().distanceTo(_e.getNorthWest());ke<1700&&(se=Bo(s));var tn=s.length,Nt=[];for(d=0;d<tn;d++){var Dn=J(s[d]);Nt.push(l.project(J([Dn.lat-se.lat,Dn.lng-se.lng])))}for(d=0,p=0;d<tn-1;d++)p+=Nt[d].distanceTo(Nt[d+1])/2;if(p===0)Q=Nt[0];else for(d=0,E=0;d<tn-1;d++)if(V=Nt[d],H=Nt[d+1],_=V.distanceTo(H),E+=_,E>p){$=(E-p)/_,Q=[H.x-$*(H.x-V.x),H.y-$*(H.y-V.y)];break}var dn=l.unproject(ee(Q));return J([dn.lat+se.lat,dn.lng+se.lng])}var Mn={__proto__:null,simplify:Ht,pointToSegmentDistance:Al,closestPointOnSegment:Vc,clipSegment:A,_getEdgeIntersection:U,_getBitCode:W,_sqClosestPointOnSegment:Pe,isFlat:Fe,_flat:Ue,polylineCenter:pt},Qn={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new ae(s.y,s.x)},bounds:new ie([-180,-90],[180,90])},On={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,_=this.R_MINOR/d,E=Math.sqrt(1-_*_),V=E*Math.sin(p),H=Math.tan(Math.PI/4-p/2)/Math.pow((1-V)/(1+V),E/2);return p=-d*Math.log(Math.max(H,1e-10)),new G(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,_=Math.sqrt(1-p*p),E=Math.exp(-s.y/d),V=Math.PI/2-2*Math.atan(E),H=0,$=.1,Q;H<15&&Math.abs($)>1e-7;H++)Q=_*Math.sin(V),Q=Math.pow((1-Q)/(1+Q),_/2),$=Math.PI/2-2*Math.atan(E*Q)-V,V+=$;return new ae(V*l,s.x*l/d)}},pi={__proto__:null,LonLat:Qn,Mercator:On,SphericalMercator:ge},Uo=r({},Ze,{code:"EPSG:3395",projection:On,transformation:function(){var s=.5/(Math.PI*On.R);return _t(s,.5,-s,.5)}()}),Ho=r({},Ze,{code:"EPSG:4326",projection:Qn,transformation:_t(1/180,1,-1/180,.5)}),JI=r({},me,{projection:Qn,transformation:_t(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});me.Earth=Ze,me.EPSG3395=Uo,me.EPSG3857=Be,me.EPSG900913=ln,me.EPSG4326=Ho,me.Simple=JI;var Yn=ct.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ae.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),l=_.maxZoom===void 0?l:Math.max(l,_.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wo=Yn.extend({initialize:function(s,l){b(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),eA=function(s,l){return new Wo(s,l)},Fi=Wo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Wo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Wo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new re;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),tA=function(s,l){return new Fi(s,l)},$o=xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var _=ee(p),E=ee(l==="shadow"&&d.shadowAnchor||d.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return he.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function nA(s){return new $o(s)}var kl=$o.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof kl.imagePath!="string"&&(kl.imagePath=this._detectIconPath()),(this.options.imagePath||kl.imagePath)+$o.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,_){var E=p.exec(d);return E&&E[_]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Oe("div","leaflet-default-icon-path",document.body),l=wr(s,"background-image")||wr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),tv=xn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Kn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ue(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,E=Di(l._icon),V=d.getPixelBounds(),H=d.getPixelOrigin(),$=te(V.min._subtract(H).add(_),V.max._subtract(H).subtract(_));if(!$.contains(E)){var Q=ee((Math.max($.max.x,E.x)-$.max.x)/(V.max.x-$.max.x)-(Math.min($.min.x,E.x)-$.min.x)/(V.min.x-$.min.x),(Math.max($.max.y,E.y)-$.max.y)/(V.max.y-$.max.y)-(Math.min($.min.y,E.y)-$.min.y)/(V.min.y-$.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),ht(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Di(l._icon),_=l._map.layerPointToLatLng(p);d&&ht(d,p),l._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),jc=Yn.extend({options:{icon:new kl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=J(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=J(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),ue(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(d,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),E=!1;_!==this._shadow&&(this._removeShadow(),E=!0),_&&(ue(_,l),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$e(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ht(this._icon,s),this._shadow&&ht(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),tv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new tv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&cn(this._icon,s),this._shadow&&cn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?ee(l.iconSize):ee(0,0),p=l.iconAnchor?ee(l.iconAnchor):ee(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function iA(s,l){return new jc(s,l)}var Pr=Yn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Fc=Pr.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=J(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=J(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Pr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new ie(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function rA(s,l){return new Fc(s,l)}var Jf=Fc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),b(this,l),this._latlng=J(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new re(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Pr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Ze.distance){var _=Math.PI/180,E=this._mRadius/Ze.R/_,V=d.project([l+E,s]),H=d.project([l-E,s]),$=V.add(H).divideBy(2),Q=d.unproject($).lat,se=Math.acos((Math.cos(E*_)-Math.sin(l*_)*Math.sin(Q*_))/(Math.cos(l*_)*Math.cos(Q*_)))/_;(isNaN(se)||se===0)&&(se=E/Math.cos(Math.PI/180*l)),this._point=$.subtract(d.getPixelOrigin()),this._radius=isNaN(se)?0:$.x-d.project([Q,s-se]).x,this._radiusY=$.y-V.y}else{var _e=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(_e).x}this._updateBounds()}});function sA(s,l,d){return new Jf(s,l,d)}var Bi=Pr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Pe,_,E,V=0,H=this._parts.length;V<H;V++)for(var $=this._parts[V],Q=1,se=$.length;Q<se;Q++){_=$[Q-1],E=$[Q];var _e=p(s,_,E,!0);_e<l&&(l=_e,d=p(s,_,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=J(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new re,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Fe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Fe(s),p=0,_=s.length;p<_;p++)d?(l[p]=J(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new G(s,s);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof ae,_=s.length,E,V;if(p){for(V=[],E=0;E<_;E++)V[E]=this._map.latLngToLayerPoint(s[E]),d.extend(V[E]);l.push(V)}else for(E=0;E<_;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,_,E,V,H,$;for(d=0,_=0,E=this._rings.length;d<E;d++)for($=this._rings[d],p=0,V=$.length;p<V-1;p++)H=A($[p],$[p+1],s,p,!0),H&&(l[_]=l[_]||[],l[_].push(H[0]),(H[1]!==$[p+1]||p===V-2)&&(l[_].push(H[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Ht(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,_,E,V,H,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for(H=this._parts[d],p=0,V=H.length,_=V-1;p<V;_=p++)if(!(!l&&p===0)&&Al(s,H[_],H[p])<=$)return!0;return!1}});function oA(s,l){return new Bi(s,l)}Bi._flat=Ue;var qo=Bi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Il(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Bi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof ae&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Bi.prototype._setLatLngs.call(this,s),Fe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new G(l,l);if(s=new ie(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,E;p<_;p++)E=Cl(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,_,E,V,H,$,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,$=this._parts.length;E<$;E++)for(d=this._parts[E],V=0,Q=d.length,H=Q-1;V<Q;H=V++)p=d[V],_=d[H],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(l=!l);return l||Bi.prototype._containsPoint.call(this,s,!0)}});function aA(s,l){return new qo(s,l)}var zi=Fi.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,d,p,_;if(l){for(d=0,p=l.length;d<p;d++)_=l[d],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var V=Bc(s,E);return V?(V.feature=Hc(s),V.defaultOptions=V.options,this.resetStyle(V),E.onEachFeature&&E.onEachFeature(s,V),this.addLayer(V)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Bc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,_=[],E=l&&l.pointToLayer,V=l&&l.coordsToLatLng||ep,H,$,Q,se;if(!p&&!d)return null;switch(d.type){case"Point":return H=V(p),nv(E,s,H,l);case"MultiPoint":for(Q=0,se=p.length;Q<se;Q++)H=V(p[Q]),_.push(nv(E,s,H,l));return new Fi(_);case"LineString":case"MultiLineString":return $=zc(p,d.type==="LineString"?0:1,V),new Bi($,l);case"Polygon":case"MultiPolygon":return $=zc(p,d.type==="Polygon"?1:2,V),new qo($,l);case"GeometryCollection":for(Q=0,se=d.geometries.length;Q<se;Q++){var _e=Bc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);_e&&_.push(_e)}return new Fi(_);case"FeatureCollection":for(Q=0,se=d.features.length;Q<se;Q++){var ke=Bc(d.features[Q],l);ke&&_.push(ke)}return new Fi(_);default:throw new Error("Invalid GeoJSON object.")}}function nv(s,l,d,p){return s?s(l,d):new jc(d,p&&p.markersInheritOptions&&p)}function ep(s){return new ae(s[1],s[0],s[2])}function zc(s,l,d){for(var p=[],_=0,E=s.length,V;_<E;_++)V=l?zc(s[_],l-1,d):(d||ep)(s[_]),p.push(V);return p}function tp(s,l){return s=J(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function Uc(s,l,d,p){for(var _=[],E=0,V=s.length;E<V;E++)_.push(l?Uc(s[E],Fe(s[E])?0:l-1,d,p):tp(s[E],p));return!l&&d&&_.length>0&&_.push(_[0].slice()),_}function Go(s,l){return s.feature?r({},s.feature,{geometry:l}):Hc(l)}function Hc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var np={toGeoJSON:function(s){return Go(this,{type:"Point",coordinates:tp(this.getLatLng(),s)})}};jc.include(np),Jf.include(np),Fc.include(np),Bi.include({toGeoJSON:function(s){var l=!Fe(this._latlngs),d=Uc(this._latlngs,l?1:0,!1,s);return Go(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),qo.include({toGeoJSON:function(s){var l=!Fe(this._latlngs),d=l&&!Fe(this._latlngs[0]),p=Uc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Go(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Wo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Go(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var E=_.toGeoJSON(s);if(d)p.push(E.geometry);else{var V=Hc(E);V.type==="FeatureCollection"?p.push.apply(p,V.features):p.push(V)}}}),d?Go(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function iv(s,l){return new zi(s,l)}var lA=iv,Wc=Yn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=le(l),b(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Rn(this._image),this},bringToBack:function(){return this._map&&Ln(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=le(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Oe("img");if(ue(l,"leaflet-image-layer"),this._zoomAnimated&&ue(l,"leaflet-zoom-animated"),this.options.className&&ue(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Oi(this._image,d,l)},_reset:function(){var s=this._image,l=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();ht(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){cn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),uA=function(s,l,d){return new Wc(s,l,d)},rv=Wc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Oe("video");if(ue(l,"leaflet-image-layer"),this._zoomAnimated&&ue(l,"leaflet-zoom-animated"),this.options.className&&ue(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],_=0;_<d.length;_++)p.push(d[_].src);this._url=d.length>0?p:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var V=Oe("source");V.src=this._url[E],l.appendChild(V)}}});function cA(s,l,d){return new rv(s,l,d)}var sv=Wc.extend({_initImage:function(){var s=this._image=this._url;ue(s,"leaflet-image-layer"),this._zoomAnimated&&ue(s,"leaflet-zoom-animated"),this.options.className&&ue(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function hA(s,l,d){return new sv(s,l,d)}var mi=Yn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof ae||S(s))?(this._latlng=J(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&cn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&cn(this._container,1),this.bringToFront(),this.options.interactive&&(ue(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(cn(this._container,0),this._removeTimeout=setTimeout(a(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=J(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Rn(this._container),this},bringToBack:function(){return this._map&&Ln(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Fi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=ee(this.options.offset),d=this._getAnchor();this._zoomAnimated?ht(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ae.include({_initOverlay:function(s,l,d,p){var _=l;return _ instanceof s||(_=new s(p).setContent(l)),d&&_.setLatLng(d),_}}),Yn.include({_initOverlay:function(s,l,d,p){var _=d;return _ instanceof s?(b(_,p),_._source=this):(_=l&&!p?l:new s(p,this),_.setContent(d)),_}});var $c=mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,mi.prototype.openOn.call(this,s)},onAdd:function(s){mi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Pr||this._source.on("preclick",ze))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Pr||this._source.off("preclick",ze))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Oe("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Oe("div",s+"-content-wrapper",l);if(this._contentNode=Oe("div",s+"-content",d),Ns(l),_l(this._contentNode),Ee(l,"contextmenu",ze),this._tipContainer=Oe("div",s+"-tip-container",l),this._tip=Oe("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Oe("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(p,"click",function(_){vt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,_=this.options.maxHeight,E="leaflet-popup-scrolled";_&&p>_?(l.height=_+"px",ue(s,E)):Ke(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();ht(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(wr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,_=new G(this._containerLeft,-d-this._containerBottom);_._add(Di(this._container));var E=s.layerPointToContainerPoint(_),V=ee(this.options.autoPanPadding),H=ee(this.options.autoPanPaddingTopLeft||V),$=ee(this.options.autoPanPaddingBottomRight||V),Q=s.getSize(),se=0,_e=0;E.x+p+$.x>Q.x&&(se=E.x+p-Q.x+$.x),E.x-se-H.x<0&&(se=E.x-H.x),E.y+d+$.y>Q.y&&(_e=E.y+d-Q.y+$.y),E.y-_e-H.y<0&&(_e=E.y-H.y),(se||_e)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,_e]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),dA=function(s,l){return new $c(s,l)};Ae.mergeOptions({closePopupOnClick:!0}),Ae.include({openPopup:function(s,l,d){return this._initOverlay($c,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Yn.include({bindPopup:function(s,l){return this._popup=this._initOverlay($c,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Fi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ci(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Pr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var qc=mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){mi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Oe("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,_=this._container,E=p.latLngToContainerPoint(p.getCenter()),V=p.layerPointToContainerPoint(s),H=this.options.direction,$=_.offsetWidth,Q=_.offsetHeight,se=ee(this.options.offset),_e=this._getAnchor();H==="top"?(l=$/2,d=Q):H==="bottom"?(l=$/2,d=0):H==="center"?(l=$/2,d=Q/2):H==="right"?(l=0,d=Q/2):H==="left"?(l=$,d=Q/2):V.x<E.x?(H="right",l=0,d=Q/2):(H="left",l=$+(se.x+_e.x)*2,d=Q/2),s=s.subtract(ee(l,d,!0)).add(se).add(_e),Ke(_,"leaflet-tooltip-right"),Ke(_,"leaflet-tooltip-left"),Ke(_,"leaflet-tooltip-top"),Ke(_,"leaflet-tooltip-bottom"),ue(_,"leaflet-tooltip-"+H),ht(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&cn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fA=function(s,l){return new qc(s,l)};Ae.include({openTooltip:function(s,l,d){return this._initOverlay(qc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Yn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(qc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Fi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Ee(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ee(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var ov=$o.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Jt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=ee(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function pA(s){return new ov(s)}$o.Default=kl;var bl=Yn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:he.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),je(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Rn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,_=l.length,E;p<_;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!he.ielt9){cn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var E=Math.min(1,(s-_.loaded)/200);cn(_.el,E),E<1?l=!0:(_.active?d=!0:this._onOpaqueTile(_),_.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Oe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(je(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=Oe("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)je(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var _=Math.floor(s/2),E=Math.floor(l/2),V=d-1,H=new G(+_,+E);H.z=+V;var $=this._tileCoordsToKey(H),Q=this._tiles[$];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),V>p?this._retainParent(_,E,V,p):!1)},_retainChildren:function(s,l,d,p){for(var _=2*s;_<2*s+2;_++)for(var E=2*l;E<2*l+2;E++){var V=new G(_,E);V.z=d+1;var H=this._tileCoordsToKey(V),$=this._tiles[H];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);d+1<p&&this._retainChildren(_,E,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var _=Math.round(l);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var E=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||E)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();he.any3d?Oi(s.el,_,p):ht(s.el,_)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),_=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new ie(_.subtract(E),_.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),E=_.getCenter(),V=[],H=this.options.keepBuffer,$=new ie(_.getBottomLeft().subtract([H,-H]),_.getTopRight().add([H,-H]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var se=this._tiles[Q].coords;(se.z!==this._tileZoom||!$.contains(new G(se.x,se.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var _e=_.min.y;_e<=_.max.y;_e++)for(var ke=_.min.x;ke<=_.max.x;ke++){var tn=new G(ke,_e);if(tn.z=this._tileZoom,!!this._isValidTile(tn)){var Nt=this._tiles[this._tileCoordsToKey(tn)];Nt?Nt.current=!0:V.push(tn)}}if(V.sort(function(dn,Ko){return dn.distanceTo(E)-Ko.distanceTo(E)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Dn=document.createDocumentFragment();for(ke=0;ke<V.length;ke++)this._addTile(V[ke],Dn);this._level.el.appendChild(Dn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return le(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),_=p.add(d),E=l.unproject(p,s.z),V=l.unproject(_,s.z);return[E,V]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new re(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new G(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(je(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ue(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,he.ielt9&&this.options.opacity<1&&cn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(a(this._tileReady,this,s,null,_)),ht(_,d),this._tiles[p]={el:_,coords:s,current:!0},l.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(cn(d.el,0),z(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(ue(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),he.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new G(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ie(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function mA(s){return new bl(s)}var Zo=bl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&he.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Ee(d,"load",a(this._tileOnLoad,this,l,d)),Ee(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:he.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(s,l){he.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=q;var d=this._tiles[s].coords;je(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),bl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===q))return bl.prototype._tileReady.call(this,s,l,d)}});function av(s,l){return new Zo(s,l)}var lv=Zo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=b(this,l);var _=l.detectRetina&&he.retina?2:1,E=this.getTileSize();d.width=E.x*_,d.height=E.y*_,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Zo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=te(d.project(l[0]),d.project(l[1])),_=p.min,E=p.max,V=(this._wmsVersion>=1.3&&this._crs===Ho?[_.y,_.x,E.y,E.x]:[_.x,_.y,E.x,E.y]).join(","),H=Zo.prototype.getTileUrl.call(this,s);return H+F(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function gA(s,l){return new lv(s,l)}Zo.WMS=lv,av.wms=gA;var Ui=Yn.extend({options:{padding:.1},initialize:function(s){b(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,l),E=p.multiplyBy(-d).add(_).subtract(this._map._getNewPixelOrigin(s,l));he.any3d?Oi(this._container,E,d):ht(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ie(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),uv=Ui.extend({options:{tolerance:0},getEvents:function(){var s=Ui.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ee(s,"mousemove",this._onMouseMove,this),Ee(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,je(this._container),$e(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=he.retina?2:1;ht(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",he.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,_;for(_=0;_<l.length;_++){if(p=Number(l[_]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,_,E,V=s._parts,H=V.length,$=this._ctx;if(H){for($.beginPath(),d=0;d<H;d++){for(p=0,_=V[d].length;p<_;p++)E=V[d][p],$[p?"lineTo":"moveTo"](E.x,E.y);l&&$.closePath()}this._fillStroke($,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(d.save(),d.scale(1,_)),d.beginPath(),d.arc(l.x,l.y/_,p,0,Math.PI*2,!1),_!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(ue(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function cv(s){return he.canvas?new uv(s):null}var Rl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),yA={_initContainer:function(){this._container=Oe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ui.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Rl("shape");ue(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Rl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;je(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Rl("stroke")),_.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=S(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(_.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Rl("fill")),_.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(_.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Rn(s._container)},_bringToBack:function(s){Ln(s._container)}},Gc=he.vml?Rl:gc,Ll=Ui.extend({_initContainer:function(){this._container=Gc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),$e(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),ht(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Gc("path");s.options.className&&ue(l,s.options.className),s.options.interactive&&ue(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){je(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,To(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,_="a"+d+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+_+d*2+",0 "+_+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Rn(s._path)},_bringToBack:function(s){Ln(s._path)}});he.vml&&Ll.include(yA);function hv(s){return he.svg||he.vml?new Ll(s):null}Ae.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&cv(s)||hv(s)}});var dv=qo.extend({initialize:function(s,l){qo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=le(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function _A(s,l){return new dv(s,l)}Ll.create=Gc,Ll.pointsToPath=To,zi.geometryToLayer=Bc,zi.coordsToLatLng=ep,zi.coordsToLatLngs=zc,zi.latLngToCoords=tp,zi.latLngsToCoords=Uc,zi.getFeature=Go,zi.asFeature=Hc,Ae.mergeOptions({boxZoom:!0});var fv=xn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$e(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zn(),No(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ee(document,{contextmenu:ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Oe("div","leaflet-zoom-box",this._container),ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ie(this._point,this._startPoint),d=l.getSize();ht(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(je(this._box),Ke(this._container,"leaflet-crosshair")),wn(),Mo(),$e(document,{contextmenu:ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ae.addInitHook("addHandler","boxZoom",fv),Ae.mergeOptions({doubleClickZoom:!0});var pv=xn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,_=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(_):l.setZoomAround(s.containerPoint,_)}});Ae.addInitHook("addHandler","doubleClickZoom",pv),Ae.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mv=xn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Kn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ke(this._map._container,"leaflet-grab"),Ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=le(this._map.options.maxBounds);this._offsetLimit=te(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-l+d)%s+l-d,E=(p+l+d)%s-l-d,V=Math.abs(_+d)<Math.abs(E+d)?_:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,V=d.easeLinearity,H=_.multiplyBy(V/E),$=H.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,$),se=H.multiplyBy(Q/$),_e=Q/(d.inertiaDeceleration*V),ke=se.multiplyBy(-_e/2).round();!ke.x&&!ke.y?l.fire("moveend"):(ke=l._limitOffset(ke,l.options.maxBounds),D(function(){l.panBy(ke,{duration:_e,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Ae.addInitHook("addHandler","dragging",mv),Ae.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gv=xn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ee(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$e(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,_;for(p=0,_=d.left.length;p<_;p++)l[d.left[p]]=[-1*s,0];for(p=0,_=d.right.length;p<_;p++)l[d.right[p]]=[s,0];for(p=0,_=d.down.length;p<_;p++)l[d.down[p]]=[0,s];for(p=0,_=d.up.length;p<_;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,_;for(p=0,_=d.zoomIn.length;p<_;p++)l[d.zoomIn[p]]=s;for(p=0,_=d.zoomOut.length;p<_;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$e(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=ee(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(ee(p),d.options.maxBounds)),d.options.worldCopyJump){var _=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(_)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;ci(s)}}});Ae.addInitHook("addHandler","keyboard",gv),Ae.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yv=xn.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$e(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=wl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),ci(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=d?Math.ceil(_/d)*d:_,V=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,V&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+V):s.setZoomAround(this._lastMousePos,l+V))}});Ae.addInitHook("addHandler","scrollWheelZoom",yv);var vA=600;Ae.mergeOptions({tapHold:he.touchNative&&he.safari&&he.mobile,tapTolerance:15});var _v=xn.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$e(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new G(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",vt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),vA),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){$e(document,"touchend",vt),$e(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),$e(document,"touchend touchcancel contextmenu",this._cancel,this),$e(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new G(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Ae.addInitHook("addHandler","tapHold",_v),Ae.mergeOptions({touchZoom:he.touch,bounceAtZoomLimits:!0});var vv=xn.extend({addHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),$e(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),vt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),_=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(_,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&_<1||this._zoom>l.getMaxZoom()&&_>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var E=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var V=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(V,this,!0),vt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),$e(document,"touchmove",this._onTouchMove,this),$e(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ae.addInitHook("addHandler","touchZoom",vv),Ae.BoxZoom=fv,Ae.DoubleClickZoom=pv,Ae.Drag=mv,Ae.Keyboard=gv,Ae.ScrollWheelZoom=yv,Ae.TapHold=_v,Ae.TouchZoom=vv,n.Bounds=ie,n.Browser=he,n.CRS=me,n.Canvas=uv,n.Circle=Jf,n.CircleMarker=Fc,n.Class=xe,n.Control=hn,n.DivIcon=ov,n.DivOverlay=mi,n.DomEvent=Os,n.DomUtil=Xf,n.Draggable=Kn,n.Evented=ct,n.FeatureGroup=Fi,n.GeoJSON=zi,n.GridLayer=bl,n.Handler=xn,n.Icon=$o,n.ImageOverlay=Wc,n.LatLng=ae,n.LatLngBounds=re,n.Layer=Yn,n.LayerGroup=Wo,n.LineUtil=Mn,n.Map=Ae,n.Marker=jc,n.Mixin=Dc,n.Path=Pr,n.Point=G,n.PolyUtil=zo,n.Polygon=qo,n.Polyline=Bi,n.Popup=$c,n.PosAnimation=Tl,n.Projection=pi,n.Rectangle=dv,n.Renderer=Ui,n.SVG=Ll,n.SVGOverlay=sv,n.TileLayer=Zo,n.Tooltip=qc,n.Transformation=We,n.Util=M,n.VideoOverlay=rv,n.bind=a,n.bounds=te,n.canvas=cv,n.circle=sA,n.circleMarker=rA,n.control=di,n.divIcon=pA,n.extend=r,n.featureGroup=tA,n.geoJSON=iv,n.geoJson=lA,n.gridLayer=mA,n.icon=nA,n.imageOverlay=uA,n.latLng=J,n.latLngBounds=le,n.layerGroup=eA,n.map=Vo,n.marker=iA,n.point=ee,n.polygon=aA,n.polyline=oA,n.popup=dA,n.rectangle=_A,n.setOptions=b,n.stamp=h,n.svg=hv,n.svgOverlay=hA,n.tileLayer=av,n.tooltip=fA,n.transformation=_t,n.version=i,n.videoOverlay=cA;var wA=window.L;n.noConflict=function(){return window.L=wA,this},window.L=n})})(Wg,Wg.exports);var mc=Wg.exports;const KI=x1(mc);function ev(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function QI(t,e){return e==null?function(i,r){const o=j.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=j.useRef();o.current||(o.current=t(i,r));const a=j.useRef(i),{instance:u}=o.current;return j.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function YI(t,e){j.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function pB(t){return function(n){const i=X_(),r=t(J_(n,i),i);return lB(i.map,n.attribution),ZI(r.current,n.eventHandlers),YI(r.current,i),r}}function mB(t,e){const n=j.useRef();j.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function gB(t){return function(n){const i=X_(),r=t(J_(n,i),i);return ZI(r.current,n.eventHandlers),YI(r.current,i),mB(r.current,n),r}}function XI(t,e){const n=QI(t,e),i=gB(n);return dB(i)}function yB(t,e){const n=QI(t,e),i=pB(n);return fB(i)}function _B(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Wf(){return X_().map}function vB(t){const e=Wf();return j.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const $g=XI(function({center:e,children:n,...i},r){const o=new mc.CircleMarker(e,i);return ev(o,$I(r,{overlayContainer:o}))},uB);function qg(){return qg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qg.apply(this,arguments)}function wB({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[v]=j.useState({className:r,id:o,style:u}),[T,k]=j.useState(null);j.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const b=j.useCallback(I=>{if(I!==null&&T===null){const P=new mc.Map(I,m);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),k(hB(P))}},[]);j.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const F=T?eo.createElement(GI,{value:T},i):a??null;return eo.createElement("div",qg({},v,{ref:b}),F)}const xB=j.forwardRef(wB),w1=XI(function({positions:e,...n},i){const r=new mc.Polyline(e,n);return ev(r,$I(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),TB=yB(function({url:e,...n},i){const r=new mc.TileLayer(e,J_(n,i));return ev(r,i)},function(e,n,i){_B(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete KI.Icon.Default.prototype._getIconUrl;KI.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function EB({devMode:t}){const[e,n]=j.useState(DI),[i,r]=j.useState(OI);return vB({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?x.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:x.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[x.jsxs("div",{children:["zoom: ",e]}),x.jsxs("div",{children:["lat: ",i[0]]}),x.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function PB({hood:t}){const e=Wf();return j.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function SB({onShow:t}){const e=Wf(),[n,i]=j.useState(null);if(j.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o){const a=JSON.parse(o);i(a),localStorage.removeItem("streetart-ctf-lastCapture"),a.location&&setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500)}},[e,t]),!n)return null;const r=n.team==="red"?"#ff6b6b":"#4dabf7";return x.jsx($g,{center:n.location,radius:30,pathOptions:{color:r,fillColor:r,fillOpacity:.3,weight:3,className:"capture-pulse"}})}function CB(){const t=Wf(),[e,n]=j.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return x.jsx(pe.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:x.jsx(pe.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:x.jsx(HF,{size:20,className:"text-white"})})})}function IB({point:t,onClose:e}){const n=t.capturedBy?Xl(t.capturedBy):"#495057",i=Ku(t),r=t.status==="ghost";return x.jsx(pe.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:x.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${n}40`},children:[x.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:x.jsx(eB,{size:16,className:"text-white/50"})}),x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${n}20`,border:`1px solid ${n}40`},children:r?x.jsx($F,{size:20,className:"text-white/30"}):t.capturedBy?x.jsx(QF,{size:20,style:{color:n}}):x.jsx(ZF,{size:20,style:{color:n}})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),r&&x.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),x.jsx("p",{className:"text-sm text-white/40",children:t.area}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&x.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),x.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[x.jsxs("span",{className:"text-lg font-bold",style:{color:n},children:[i," pts"]}),t.capturedBy?x.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:n},children:["Captured by ",t.capturedBy]}):x.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:r?"Gone":"Unclaimed"})]})]})]})]})})}const om=[null,...rs];function AB(){const{player:t,artPoints:e,captureArt:n}=pr(),[i,r]=j.useState(null),[o,a]=j.useState(!1),[u,h]=j.useState(e),[f,m]=j.useState(zg.vysocany);j.useEffect(()=>{h(e)},[e]);const g=I=>{o?h(P=>P.map(S=>{if(S.id===I.id){const q=(om.indexOf(S.capturedBy)+1)%om.length;return{...S,capturedBy:om[q]}}return S})):r(I)},v=()=>{h(e.map(I=>({...I,capturedBy:null})))},T=o?u:e,k=j.useMemo(()=>RF(T),[T]),b=j.useMemo(()=>VI(T),[T]),F=Object.values(b).reduce((I,P)=>I+P,0)||1;return x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:Object.entries(b).map(([I,P])=>{const S=P/F*100;return x.jsx(pe.div,{className:"h-full",style:{backgroundColor:Xl(I)},initial:{width:0},animate:{width:`${S}%`},transition:{duration:.8}},I)})}),x.jsxs("div",{className:"absolute top-10 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Teams"}),x.jsx("div",{className:"space-y-1.5",children:rs.map(I=>x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:Xl(I)}}),x.jsx("span",{className:"text-xs text-white/70 capitalize font-medium",children:I}),x.jsxs("span",{className:"text-xs text-white/40 ml-auto",children:[b[I]||0," pts"]})]},I))}),x.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Points"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white/40"}),x.jsx("span",{className:"text-xs text-white/40",children:"Active"})]}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-dashed border-white/20"}),x.jsx("span",{className:"text-xs text-white/30",children:"Ghost"})]})]}),x.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[x.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),x.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),x.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(zg).map(I=>x.jsx(pe.button,{onClick:()=>m(I),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f.id===I.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:I.name},I.id))}),x.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[x.jsx(pe.button,{onClick:()=>a(!o),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${o?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:x.jsx(UF,{size:18})}),o&&x.jsx(pe.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:v,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:x.jsx(BI,{size:18})})]}),x.jsx(Bu,{children:o&&x.jsx(pe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:x.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),x.jsxs(xB,{center:OI,zoom:DI,minZoom:AF,maxZoom:kF,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[x.jsx(TB,{url:g1.tileUrl,attribution:g1.attribution}),x.jsx(CB,{}),x.jsx(EB,{devMode:o}),x.jsx(PB,{hood:f}),x.jsx(SB,{}),x.jsx(w1,{positions:y1.map(I=>I.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),y1.map(I=>x.jsx($g,{center:I.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},I.name)),Object.entries(k).map(([I,P])=>P.map((S,B)=>x.jsx(w1,{positions:[S.from,S.to],pathOptions:{color:Xl(I),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${I}-line-${B}`))),T.map(I=>{const P=I.capturedBy?Xl(I.capturedBy):"#ffffff",S=!!I.capturedBy,B=I.status==="ghost";return x.jsx($g,{center:I.location,radius:8,pathOptions:{color:o?"#a855f7":B?"#6b7280":P,fillColor:S?P:B?"#374151":"#0a0a0f",fillOpacity:B?.4:S?.8:1,weight:o?3:2,opacity:B?.5:1,dashArray:B?"3, 3":void 0},eventHandlers:{click:q=>{q.originalEvent.stopPropagation(),g(I)}}},I.id)})]}),x.jsx(Bu,{children:i&&x.jsx(IB,{point:i,onClose:()=>r(null)})})]})}function kB(){return x.jsx(pe.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:x.jsx(AB,{})})}function bB(){const{player:t}=pr(),[e,n]=j.useState(!1);return j.useEffect(()=>{t.team&&!e&&(n(!0),setTimeout(()=>{const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"},500))},[t.team,e]),t.team?x.jsx(pe.div,{className:"flex-1 flex items-center justify-center p-8 bg-black",initial:{opacity:0},animate:{opacity:1},children:x.jsxs("div",{className:"text-center",children:[x.jsx(pe.div,{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:x.jsx(Hf,{size:48,className:"text-white"})}),x.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Opening AR Scanner"}),x.jsx("p",{className:"text-white/40 text-sm mb-4",children:"Point your camera at street art to capture it"}),x.jsx(GF,{className:"w-6 h-6 animate-spin mx-auto text-purple-400"})]})}):x.jsx(pe.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:x.jsx(VF,{size:36,className:"text-amber-500"})}),x.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),x.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start scanning street art"})]})})}const RB={red:"Red Team",blue:"Blue Team"};function LB({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return x.jsxs(pe.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[x.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${Je[t].hex}15 0%, transparent 60%)`}}),x.jsx(pe.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:Je[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),x.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${Je[t].hex}30`},children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?x.jsx(WF,{size:20,className:"text-white"}):x.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-semibold text-white",children:RB[t]}),x.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[x.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Je[t].hex}}),x.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-2xl font-bold",style:{color:Je[t].hex},children:e.toLocaleString()}),x.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function NB({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return x.jsxs(pe.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[x.jsx("div",{className:"w-8 flex justify-center",children:i?x.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:x.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):x.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),x.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${Je[t.team].hex}20`,color:Je[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&x.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),x.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),x.jsx("div",{className:"text-right",children:x.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function MB(){var m;const{teamScores:t,player:e,allPlayers:n}=pr(),r=Object.entries(t).filter(([g])=>Je[g]).sort((g,v)=>v[1]-g[1]),o=Object.values(t).reduce((g,v)=>g+v,0)||1,a=[...n];!a.find(g=>g.name===e.name)&&e.team&&e.name&&a.push({id:"current",name:e.name,team:e.team,score:e.score||0,captures:((m=e.capturedArt)==null?void 0:m.length)||0});const h=a.sort((g,v)=>v.score-g.score),f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return x.jsxs(pe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:f,children:[x.jsx(pe.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:x.jsx(Y_,{size:20,className:"text-white"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),x.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(YF,{size:16,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),x.jsx("div",{className:"space-y-3",children:r.map(([g,v],T)=>x.jsx(LB,{team:g,score:v,rank:T,totalScore:o},g))})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Q_,{size:16,className:"text-white/40"}),x.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),x.jsx("div",{className:"space-y-2",children:h.map((g,v)=>x.jsx(NB,{player:g,rank:v,isCurrentPlayer:g.id==="current"},g.id))})]})]})}function OB(){var f,m;const{player:t,artPoints:e,resetAll:n}=pr(),[i,r]=j.useState(!1),o=(e==null?void 0:e.filter(g=>t.capturedArt.includes(g.id)))||[],a=t.team?Je[t.team].hex:"#64748b",u=t.team==="red"?"Red Team":"Blue Team",h=async()=>{if(!i){r(!0);try{const g=["red","blue"];let v=0,T=0;for(const k of ta){const b=g[Math.floor(Math.random()*g.length)],F=Ku(k);b==="red"?v+=F:T+=F,await ka(Ia($i,"streetart-captures",k.id),{artId:k.id,capturedBy:b,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:F,isFirstCapture:!0,isRecapture:!1})}await ka(Ia($i,"streetart-teams","red"),{score:v},{merge:!0}),await ka(Ia($i,"streetart-teams","blue"),{score:T},{merge:!0})}catch(g){console.error("Failed to randomize:",g)}r(!1)}};return x.jsxs(pe.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx(pe.div,{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${a}, ${a}50)`},whileHover:{scale:1.05},children:x.jsx("span",{className:"text-3xl font-black text-white",children:((m=(f=t.name)==null?void 0:f.charAt(0))==null?void 0:m.toUpperCase())||"?"})}),x.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:t.name}),x.jsx("p",{className:"text-sm",style:{color:a},children:u})]}),x.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[x.jsxs(pe.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#eab30815",border:"1px solid #eab30830"},whileHover:{scale:1.02},children:[x.jsx(Y_,{size:24,className:"mx-auto mb-2 text-yellow-500"}),x.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),x.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Score"})]}),x.jsxs(pe.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#22c55e15",border:"1px solid #22c55e30"},whileHover:{scale:1.02},children:[x.jsx(Hf,{size:24,className:"mx-auto mb-2 text-green-500"}),x.jsx("p",{className:"text-2xl font-bold text-white",children:t.captureCount||o.length}),x.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Captures"})]}),x.jsxs(pe.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#f9731615",border:"1px solid #f9731630"},whileHover:{scale:1.02},children:[x.jsx(Q_,{size:24,className:"mx-auto mb-2 text-orange-500"}),x.jsx("p",{className:"text-2xl font-bold text-white",children:t.maxStreak||0}),x.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Best Streak"})]})]}),x.jsxs("div",{className:"mb-8",children:[x.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Lifetime Stats"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[x.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center",children:x.jsx("span",{className:"text-sm",children:""})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-lg font-bold text-white",children:t.recaptureCount||0}),x.jsx("p",{className:"text-[10px] text-white/40",children:"Recaptures"})]})]}),x.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:x.jsx("span",{className:"text-sm",children:""})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-lg font-bold text-white",children:t.firstCaptureCount||0}),x.jsx("p",{className:"text-[10px] text-white/40",children:"First Captures"})]})]}),x.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:x.jsx("span",{className:"text-sm",children:""})}),x.jsxs("div",{children:[x.jsxs("p",{className:"text-lg font-bold text-white",children:[t.totalDistance?(t.totalDistance/1e3).toFixed(1):"0","km"]}),x.jsx("p",{className:"text-[10px] text-white/40",children:"Distance Walked"})]})]}),x.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:x.jsx("span",{className:"text-sm",children:""})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-lg font-bold text-white",children:t.streak||0}),x.jsx("p",{className:"text-[10px] text-white/40",children:"Current Streak"})]})]})]})]}),o.length>0&&x.jsxs("div",{className:"mb-8",children:[x.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Your Captures"}),x.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.slice(0,8).map((g,v)=>x.jsx(pe.div,{className:"aspect-square rounded-xl flex items-center justify-center",style:{backgroundColor:`${a}20`,border:`1px solid ${a}30`},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:v*.05},children:x.jsx("span",{className:"text-lg",children:""})},g.id)),o.length>8&&x.jsx("div",{className:"aspect-square rounded-xl flex items-center justify-center bg-white/5",children:x.jsxs("span",{className:"text-xs text-white/40",children:["+",o.length-8]})})]})]}),x.jsxs("div",{className:"mb-6",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[x.jsx(WI,{size:14,className:"text-purple-400"}),x.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Game Master"})]}),x.jsxs(pe.button,{onClick:h,disabled:i,className:"w-full p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 flex items-center gap-3 disabled:opacity-50",whileTap:{scale:.98},children:[x.jsx(zI,{size:20,className:"text-purple-400"}),x.jsx("span",{className:"text-sm text-purple-300",children:i?"Randomizing...":"Randomize All Territories"})]})]}),x.jsxs(pe.button,{onClick:n,className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center gap-2 text-white/40 hover:text-white/60 transition-colors",whileTap:{scale:.98},children:[x.jsx(BI,{size:14}),x.jsx("span",{className:"text-xs",children:"Reset Game Data"})]}),x.jsx("p",{className:"text-center text-[10px] text-white/20 mt-6",children:"Street Art CTF v1.2.0"})]})}const DB=[{path:"/",icon:qF,label:"Home"},{path:"/map",icon:Ug,label:"Map"},{path:"/scanner",icon:KF,label:"Scan"},{path:"/leaderboard",icon:Y_,label:"Ranks"},{path:"/profile",icon:XF,label:"You"}];function VB(){return x.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[x.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),x.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:DB.map(({path:t,icon:e,label:n})=>x.jsx(s2,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>x.jsxs(pe.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&x.jsx(pe.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),x.jsx(pe.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:x.jsx(e,{size:20,strokeWidth:i?2.5:2})}),x.jsx(pe.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function jB({color:t}){const e=Array.from({length:12},(n,i)=>({id:i,angle:i/12*360,delay:i*.02}));return x.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.map(n=>x.jsx(pe.div,{className:"absolute left-1/2 top-1/2 w-3 h-3 rounded-full",style:{backgroundColor:t},initial:{x:0,y:0,opacity:1,scale:1},animate:{x:Math.cos(n.angle*Math.PI/180)*150,y:Math.sin(n.angle*Math.PI/180)*150,opacity:0,scale:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"}},n.id))})}function FB(){var o;const{captureNotification:t}=pr();if(!t)return null;const e=((o=Je[t.team])==null?void 0:o.hex)||"#888",n=t.team==="red"?"RED":"BLUE",i=t.points||100,r=t.streak||0;return x.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden",children:[x.jsx(pe.div,{className:"absolute inset-0",style:{backgroundColor:e},initial:{opacity:.3},animate:{opacity:[.3,.15,.2]},transition:{duration:.5}}),x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Array.from({length:8}).map((a,u)=>x.jsx(pe.div,{className:"absolute w-1 origin-bottom",style:{backgroundColor:e,height:"50vh",transform:`rotate(${u*45}deg)`,opacity:.2},initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.3,delay:u*.02}},u))}),x.jsxs(pe.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},exit:{scale:.5,opacity:0},transition:{type:"spring",damping:12,stiffness:200},className:"relative text-center p-8",children:[x.jsx(jB,{color:e}),x.jsxs(pe.div,{className:"relative w-28 h-28 mx-auto mb-4",animate:{scale:[1,1.1,1]},transition:{duration:.5,repeat:2},children:[x.jsx("div",{className:"absolute inset-0 rounded-full blur-xl",style:{backgroundColor:e,opacity:.5}}),x.jsx("div",{className:"relative w-full h-full rounded-full flex items-center justify-center",style:{backgroundColor:e},children:t.isRecapture?x.jsx(UI,{size:56,className:"text-white"}):x.jsx(FI,{size:56,className:"text-white"})})]}),x.jsxs(pe.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[x.jsx("h1",{className:"text-4xl font-black text-white tracking-tight mb-1",children:t.isRecapture?"STOLEN!":"CAPTURED!"}),x.jsx("p",{className:"text-lg font-semibold text-white/80",children:t.artName})]}),x.jsxs(pe.div,{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"rgba(0,0,0,0.4)"},initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:[x.jsx(Hf,{size:20,className:"text-white"}),x.jsxs("span",{className:"text-2xl font-black text-white",children:["+",i]}),r>1&&x.jsxs("span",{className:"flex items-center gap-1 text-orange-400 font-bold",children:[x.jsx(Q_,{size:18}),r,"x"]})]}),x.jsxs(pe.div,{className:"mt-4 flex items-center justify-center gap-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[x.jsx("span",{className:"text-white/60 text-sm",children:"by"}),x.jsx("span",{className:"font-bold text-white",children:t.playerName}),x.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-black",style:{backgroundColor:e},children:n})]})]})]})}function Eh({children:t}){const{player:e}=pr();return e.team&&e.name&&e.name!=="Street Artist"?t:x.jsx(HE,{to:"/onboarding",replace:!0})}function BB(){const t=mo(),{player:e}=pr(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding";return x.jsxs("div",{className:"h-full w-full flex flex-col",children:[x.jsx(Bu,{children:x.jsx(FB,{})}),x.jsx(Bu,{mode:"wait",children:x.jsxs(GR,{location:t,children:[x.jsx(Fs,{path:"/onboarding",element:x.jsx(rB,{})}),x.jsx(Fs,{path:"/",element:n?x.jsx(aB,{}):x.jsx(HE,{to:"/onboarding",replace:!0})}),x.jsx(Fs,{path:"/map",element:x.jsx(Eh,{children:x.jsx(kB,{})})}),x.jsx(Fs,{path:"/scanner",element:x.jsx(Eh,{children:x.jsx(bB,{})})}),x.jsx(Fs,{path:"/leaderboard",element:x.jsx(Eh,{children:x.jsx(MB,{})})}),x.jsx(Fs,{path:"/profile",element:x.jsx(Eh,{children:x.jsx(OB,{})})})]},t.pathname)}),!i&&n&&x.jsx(VB,{})]})}function zB(){return x.jsx(MF,{children:x.jsx(BB,{})})}am.createRoot(document.getElementById("root")).render(x.jsx(eo.StrictMode,{children:x.jsx(t2,{children:x.jsx(zB,{})})}));
