function KA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var QA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z1={exports:{}},af={},F1={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc=Symbol.for("react.element"),YA=Symbol.for("react.portal"),XA=Symbol.for("react.fragment"),JA=Symbol.for("react.strict_mode"),eb=Symbol.for("react.profiler"),tb=Symbol.for("react.provider"),nb=Symbol.for("react.context"),ib=Symbol.for("react.forward_ref"),rb=Symbol.for("react.suspense"),sb=Symbol.for("react.memo"),ob=Symbol.for("react.lazy"),Ov=Symbol.iterator;function ab(t){return t===null||typeof t!="object"?null:(t=Ov&&t[Ov]||t["@@iterator"],typeof t=="function"?t:null)}var B1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U1=Object.assign,H1={};function sl(t,e,n){this.props=t,this.context=e,this.refs=H1,this.updater=n||B1}sl.prototype.isReactComponent={};sl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function W1(){}W1.prototype=sl.prototype;function Jg(t,e,n){this.props=t,this.context=e,this.refs=H1,this.updater=n||B1}var ey=Jg.prototype=new W1;ey.constructor=Jg;U1(ey,sl.prototype);ey.isPureReactComponent=!0;var Dv=Array.isArray,$1=Object.prototype.hasOwnProperty,ty={current:null},q1={key:!0,ref:!0,__self:!0,__source:!0};function G1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)$1.call(e,i)&&!q1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:oc,type:t,key:o,ref:a,props:r,_owner:ty.current}}function lb(t,e){return{$$typeof:oc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ny(t){return typeof t=="object"&&t!==null&&t.$$typeof===oc}function ub(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vv=/\/+/g;function mp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ub(""+t.key):e.toString(36)}function Mh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case oc:case YA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+mp(a,0):i,Dv(r)?(n="",t!=null&&(n=t.replace(Vv,"$&/")+"/"),Mh(r,e,n,"",function(f){return f})):r!=null&&(ny(r)&&(r=lb(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Vv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Dv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+mp(o,u);a+=Mh(o,e,n,h,r)}else if(h=ab(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+mp(o,u++),a+=Mh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function rh(t,e,n){if(t==null)return t;var i=[],r=0;return Mh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function cb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},Oh={transition:null},hb={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:Oh,ReactCurrentOwner:ty};function Z1(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:rh,forEach:function(t,e,n){rh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rh(t,function(){e++}),e},toArray:function(t){return rh(t,function(e){return e})||[]},only:function(t){if(!ny(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=sl;Ve.Fragment=XA;Ve.Profiler=eb;Ve.PureComponent=Jg;Ve.StrictMode=JA;Ve.Suspense=rb;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hb;Ve.act=Z1;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=U1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=ty.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)$1.call(e,h)&&!q1.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:oc,type:t.type,key:r,ref:o,props:i,_owner:a}};Ve.createContext=function(t){return t={$$typeof:nb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tb,_context:t},t.Consumer=t};Ve.createElement=G1;Ve.createFactory=function(t){var e=G1.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:ib,render:t}};Ve.isValidElement=ny;Ve.lazy=function(t){return{$$typeof:ob,_payload:{_status:-1,_result:t},_init:cb}};Ve.memo=function(t,e){return{$$typeof:sb,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=Oh.transition;Oh.transition={};try{t()}finally{Oh.transition=e}};Ve.unstable_act=Z1;Ve.useCallback=function(t,e){return fn.current.useCallback(t,e)};Ve.useContext=function(t){return fn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return fn.current.useEffect(t,e)};Ve.useId=function(){return fn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return fn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};Ve.useRef=function(t){return fn.current.useRef(t)};Ve.useState=function(t){return fn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return fn.current.useTransition()};Ve.version="18.3.1";F1.exports=Ve;var O=F1.exports;const co=j1(O),db=KA({__proto__:null,default:co},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb=O,pb=Symbol.for("react.element"),mb=Symbol.for("react.fragment"),gb=Object.prototype.hasOwnProperty,yb=fb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_b={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)gb.call(e,i)&&!_b.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:pb,type:t,key:o,ref:a,props:r,_owner:yb.current}}af.Fragment=mb;af.jsx=K1;af.jsxs=K1;z1.exports=af;var _=z1.exports,gm={},Q1={exports:{}},On={},Y1={exports:{}},X1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,ce){var J=Z.length;Z.push(ce);e:for(;0<J;){var ne=J-1>>>1,Ce=Z[ne];if(0<r(Ce,ce))Z[ne]=ce,Z[J]=Ce,J=ne;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ce=Z[0],J=Z.pop();if(J!==ce){Z[0]=J;e:for(var ne=0,Ce=Z.length,tt=Ce>>>1;ne<tt;){var Me=2*(ne+1)-1,Re=Z[Me],fe=Me+1,dt=Z[fe];if(0>r(Re,J))fe<Ce&&0>r(dt,Re)?(Z[ne]=dt,Z[fe]=J,ne=fe):(Z[ne]=Re,Z[Me]=J,ne=Me);else if(fe<Ce&&0>r(dt,J))Z[ne]=dt,Z[fe]=J,ne=fe;else break e}}return ce}function r(Z,ce){var J=Z.sortIndex-ce.sortIndex;return J!==0?J:Z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],g=1,m=null,v=3,T=!1,k=!1,R=!1,j=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Z){for(var ce=n(f);ce!==null;){if(ce.callback===null)i(f);else if(ce.startTime<=Z)i(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=n(f)}}function F(Z){if(R=!1,C(Z),!k)if(n(h)!==null)k=!0,ge(q);else{var ce=n(f);ce!==null&&Xe(F,ce.startTime-Z)}}function q(Z,ce){k=!1,R&&(R=!1,b(S),S=-1),T=!0;var J=v;try{for(C(ce),m=n(h);m!==null&&(!(m.expirationTime>ce)||Z&&!V());){var ne=m.callback;if(typeof ne=="function"){m.callback=null,v=m.priorityLevel;var Ce=ne(m.expirationTime<=ce);ce=t.unstable_now(),typeof Ce=="function"?m.callback=Ce:m===n(h)&&i(h),C(ce)}else i(h);m=n(h)}if(m!==null)var tt=!0;else{var Me=n(f);Me!==null&&Xe(F,Me.startTime-ce),tt=!1}return tt}finally{m=null,v=J,T=!1}}var B=!1,A=null,S=-1,N=5,D=-1;function V(){return!(t.unstable_now()-D<N)}function U(){if(A!==null){var Z=t.unstable_now();D=Z;var ce=!0;try{ce=A(!0,Z)}finally{ce?M():(B=!1,A=null)}}else B=!1}var M;if(typeof P=="function")M=function(){P(U)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,We=ee.port2;ee.port1.onmessage=U,M=function(){We.postMessage(null)}}else M=function(){j(U,0)};function ge(Z){A=Z,B||(B=!0,M())}function Xe(Z,ce){S=j(function(){Z(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){k||T||(k=!0,ge(q))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var J=v;v=ce;try{return Z()}finally{v=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var J=v;v=Z;try{return ce()}finally{v=J}},t.unstable_scheduleCallback=function(Z,ce,J){var ne=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,Z){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=J+Ce,Z={id:g++,callback:ce,priorityLevel:Z,startTime:J,expirationTime:Ce,sortIndex:-1},J>ne?(Z.sortIndex=J,e(f,Z),n(h)===null&&Z===n(f)&&(R?(b(S),S=-1):R=!0,Xe(F,J-ne))):(Z.sortIndex=Ce,e(h,Z),k||T||(k=!0,ge(q))),Z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Z){var ce=v;return function(){var J=v;v=ce;try{return Z.apply(this,arguments)}finally{v=J}}}})(X1);Y1.exports=X1;var vb=Y1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wb=O,Nn=vb;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J1=new Set,Au={};function To(t,e){Ba(t,e),Ba(t+"Capture",e)}function Ba(t,e){for(Au[t]=e,t=0;t<e.length;t++)J1.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ym=Object.prototype.hasOwnProperty,xb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jv={},zv={};function Tb(t){return ym.call(zv,t)?!0:ym.call(jv,t)?!1:xb.test(t)?zv[t]=!0:(jv[t]=!0,!1)}function Eb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Pb(t,e,n,i){if(e===null||typeof e>"u"||Eb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var iy=/[\-:]([a-z])/g;function ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iy,ry);Gt[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iy,ry);Gt[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iy,ry);Gt[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function sy(t,e,n,i){var r=Gt.hasOwnProperty(e)?Gt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Pb(e,n,r,i)&&(n=null),i||r===null?Tb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Er=wb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sh=Symbol.for("react.element"),da=Symbol.for("react.portal"),fa=Symbol.for("react.fragment"),oy=Symbol.for("react.strict_mode"),_m=Symbol.for("react.profiler"),eT=Symbol.for("react.provider"),tT=Symbol.for("react.context"),ay=Symbol.for("react.forward_ref"),vm=Symbol.for("react.suspense"),wm=Symbol.for("react.suspense_list"),ly=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),nT=Symbol.for("react.offscreen"),Fv=Symbol.iterator;function Bl(t){return t===null||typeof t!="object"?null:(t=Fv&&t[Fv]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,gp;function Jl(t){if(gp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gp=e&&e[1]||""}return`
`+gp+t}var yp=!1;function _p(t,e){if(!t||yp)return"";yp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{yp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jl(t):""}function Sb(t){switch(t.tag){case 5:return Jl(t.type);case 16:return Jl("Lazy");case 13:return Jl("Suspense");case 19:return Jl("SuspenseList");case 0:case 2:case 15:return t=_p(t.type,!1),t;case 11:return t=_p(t.type.render,!1),t;case 1:return t=_p(t.type,!0),t;default:return""}}function xm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fa:return"Fragment";case da:return"Portal";case _m:return"Profiler";case oy:return"StrictMode";case vm:return"Suspense";case wm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tT:return(t.displayName||"Context")+".Consumer";case eT:return(t._context.displayName||"Context")+".Provider";case ay:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ly:return e=t.displayName||null,e!==null?e:xm(t.type)||"Memo";case zr:e=t._payload,t=t._init;try{return xm(t(e))}catch{}}return null}function Cb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xm(e);case 8:return e===oy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ib(t){var e=iT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oh(t){t._valueTracker||(t._valueTracker=Ib(t))}function rT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=iT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function sd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tm(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sT(t,e){e=e.checked,e!=null&&sy(t,"checked",e,!1)}function Em(t,e){sT(t,e);var n=gs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pm(t,e.type,gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pm(t,e,n){(e!=="number"||sd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eu=Array.isArray;function ba(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+gs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Sm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(eu(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gs(n)}}function oT(t,e){var n=gs(e.value),i=gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Wv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ah,lT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ah=ah||document.createElement("div"),ah.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ah.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ab=["Webkit","ms","Moz","O"];Object.keys(lu).forEach(function(t){Ab.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lu[e]=lu[t]})});function uT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||lu.hasOwnProperty(t)&&lu[t]?(""+e).trim():e+"px"}function cT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=uT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var bb=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Im(t,e){if(e){if(bb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Am(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=null;function uy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var km=null,ka=null,Ra=null;function $v(t){if(t=uc(t)){if(typeof km!="function")throw Error(X(280));var e=t.stateNode;e&&(e=df(e),km(t.stateNode,t.type,e))}}function hT(t){ka?Ra?Ra.push(t):Ra=[t]:ka=t}function dT(){if(ka){var t=ka,e=Ra;if(Ra=ka=null,$v(t),e)for(t=0;t<e.length;t++)$v(e[t])}}function fT(t,e){return t(e)}function pT(){}var vp=!1;function mT(t,e,n){if(vp)return t(e,n);vp=!0;try{return fT(t,e,n)}finally{vp=!1,(ka!==null||Ra!==null)&&(pT(),dT())}}function ku(t,e){var n=t.stateNode;if(n===null)return null;var i=df(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Rm=!1;if(fr)try{var Ul={};Object.defineProperty(Ul,"passive",{get:function(){Rm=!0}}),window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{Rm=!1}function kb(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(g){this.onError(g)}}var uu=!1,od=null,ad=!1,Nm=null,Rb={onError:function(t){uu=!0,od=t}};function Nb(t,e,n,i,r,o,a,u,h){uu=!1,od=null,kb.apply(Rb,arguments)}function Lb(t,e,n,i,r,o,a,u,h){if(Nb.apply(this,arguments),uu){if(uu){var f=od;uu=!1,od=null}else throw Error(X(198));ad||(ad=!0,Nm=f)}}function Eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qv(t){if(Eo(t)!==t)throw Error(X(188))}function Mb(t){var e=t.alternate;if(!e){if(e=Eo(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return qv(r),t;if(o===i)return qv(r),e;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function yT(t){return t=Mb(t),t!==null?_T(t):null}function _T(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_T(t);if(e!==null)return e;t=t.sibling}return null}var vT=Nn.unstable_scheduleCallback,Gv=Nn.unstable_cancelCallback,Ob=Nn.unstable_shouldYield,Db=Nn.unstable_requestPaint,Pt=Nn.unstable_now,Vb=Nn.unstable_getCurrentPriorityLevel,cy=Nn.unstable_ImmediatePriority,wT=Nn.unstable_UserBlockingPriority,ld=Nn.unstable_NormalPriority,jb=Nn.unstable_LowPriority,xT=Nn.unstable_IdlePriority,lf=null,ki=null;function zb(t){if(ki&&typeof ki.onCommitFiberRoot=="function")try{ki.onCommitFiberRoot(lf,t,void 0,(t.current.flags&128)===128)}catch{}}var pi=Math.clz32?Math.clz32:Ub,Fb=Math.log,Bb=Math.LN2;function Ub(t){return t>>>=0,t===0?32:31-(Fb(t)/Bb|0)|0}var lh=64,uh=4194304;function tu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ud(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=tu(u):(o&=a,o!==0&&(i=tu(o)))}else a=n&~r,a!==0?i=tu(a):o!==0&&(i=tu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-pi(e),r=1<<n,i|=t[n],e&=~r;return i}function Hb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-pi(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=Hb(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Lm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function TT(){var t=lh;return lh<<=1,!(lh&4194240)&&(lh=64),t}function wp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ac(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pi(e),t[e]=n}function $b(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-pi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function hy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-pi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var et=0;function ET(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PT,dy,ST,CT,IT,Mm=!1,ch=[],Xr=null,Jr=null,es=null,Ru=new Map,Nu=new Map,Ur=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zv(t,e){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Ru.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(e.pointerId)}}function Hl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=uc(e),e!==null&&dy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Gb(t,e,n,i,r){switch(e){case"focusin":return Xr=Hl(Xr,t,e,n,i,r),!0;case"dragenter":return Jr=Hl(Jr,t,e,n,i,r),!0;case"mouseover":return es=Hl(es,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Ru.set(o,Hl(Ru.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Nu.set(o,Hl(Nu.get(o)||null,t,e,n,i,r)),!0}return!1}function AT(t){var e=eo(t.target);if(e!==null){var n=Eo(e);if(n!==null){if(e=n.tag,e===13){if(e=gT(n),e!==null){t.blockedOn=e,IT(t.priority,function(){ST(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Om(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bm=i,n.target.dispatchEvent(i),bm=null}else return e=uc(n),e!==null&&dy(e),t.blockedOn=n,!1;e.shift()}return!0}function Kv(t,e,n){Dh(t)&&n.delete(e)}function Zb(){Mm=!1,Xr!==null&&Dh(Xr)&&(Xr=null),Jr!==null&&Dh(Jr)&&(Jr=null),es!==null&&Dh(es)&&(es=null),Ru.forEach(Kv),Nu.forEach(Kv)}function Wl(t,e){t.blockedOn===e&&(t.blockedOn=null,Mm||(Mm=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,Zb)))}function Lu(t){function e(r){return Wl(r,t)}if(0<ch.length){Wl(ch[0],t);for(var n=1;n<ch.length;n++){var i=ch[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Xr!==null&&Wl(Xr,t),Jr!==null&&Wl(Jr,t),es!==null&&Wl(es,t),Ru.forEach(e),Nu.forEach(e),n=0;n<Ur.length;n++)i=Ur[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ur.length&&(n=Ur[0],n.blockedOn===null);)AT(n),n.blockedOn===null&&Ur.shift()}var Na=Er.ReactCurrentBatchConfig,cd=!0;function Kb(t,e,n,i){var r=et,o=Na.transition;Na.transition=null;try{et=1,fy(t,e,n,i)}finally{et=r,Na.transition=o}}function Qb(t,e,n,i){var r=et,o=Na.transition;Na.transition=null;try{et=4,fy(t,e,n,i)}finally{et=r,Na.transition=o}}function fy(t,e,n,i){if(cd){var r=Om(t,e,n,i);if(r===null)kp(t,e,i,hd,n),Zv(t,i);else if(Gb(r,t,e,n,i))i.stopPropagation();else if(Zv(t,i),e&4&&-1<qb.indexOf(t)){for(;r!==null;){var o=uc(r);if(o!==null&&PT(o),o=Om(t,e,n,i),o===null&&kp(t,e,i,hd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else kp(t,e,i,null,n)}}var hd=null;function Om(t,e,n,i){if(hd=null,t=uy(i),t=eo(t),t!==null)if(e=Eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hd=t,null}function bT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vb()){case cy:return 1;case wT:return 4;case ld:case jb:return 16;case xT:return 536870912;default:return 16}default:return 16}}var Zr=null,py=null,Vh=null;function kT(){if(Vh)return Vh;var t,e=py,n=e.length,i,r="value"in Zr?Zr.value:Zr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Vh=r.slice(t,1<i?1-i:void 0)}function jh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hh(){return!0}function Qv(){return!1}function Dn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hh:Qv,this.isPropagationStopped=Qv,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hh)},persist:function(){},isPersistent:hh}),e}var ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},my=Dn(ol),lc=yt({},ol,{view:0,detail:0}),Yb=Dn(lc),xp,Tp,$l,uf=yt({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$l&&($l&&t.type==="mousemove"?(xp=t.screenX-$l.screenX,Tp=t.screenY-$l.screenY):Tp=xp=0,$l=t),xp)},movementY:function(t){return"movementY"in t?t.movementY:Tp}}),Yv=Dn(uf),Xb=yt({},uf,{dataTransfer:0}),Jb=Dn(Xb),ek=yt({},lc,{relatedTarget:0}),Ep=Dn(ek),tk=yt({},ol,{animationName:0,elapsedTime:0,pseudoElement:0}),nk=Dn(tk),ik=yt({},ol,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rk=Dn(ik),sk=yt({},ol,{data:0}),Xv=Dn(sk),ok={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ak={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lk[t])?!!e[t]:!1}function gy(){return uk}var ck=yt({},lc,{key:function(t){if(t.key){var e=ok[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ak[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gy,charCode:function(t){return t.type==="keypress"?jh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hk=Dn(ck),dk=yt({},uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jv=Dn(dk),fk=yt({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gy}),pk=Dn(fk),mk=yt({},ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),gk=Dn(mk),yk=yt({},uf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_k=Dn(yk),vk=[9,13,27,32],yy=fr&&"CompositionEvent"in window,cu=null;fr&&"documentMode"in document&&(cu=document.documentMode);var wk=fr&&"TextEvent"in window&&!cu,RT=fr&&(!yy||cu&&8<cu&&11>=cu),e0=" ",t0=!1;function NT(t,e){switch(t){case"keyup":return vk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pa=!1;function xk(t,e){switch(t){case"compositionend":return LT(e);case"keypress":return e.which!==32?null:(t0=!0,e0);case"textInput":return t=e.data,t===e0&&t0?null:t;default:return null}}function Tk(t,e){if(pa)return t==="compositionend"||!yy&&NT(t,e)?(t=kT(),Vh=py=Zr=null,pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RT&&e.locale!=="ko"?null:e.data;default:return null}}var Ek={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ek[t.type]:e==="textarea"}function MT(t,e,n,i){hT(i),e=dd(e,"onChange"),0<e.length&&(n=new my("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var hu=null,Mu=null;function Pk(t){$T(t,0)}function cf(t){var e=ya(t);if(rT(e))return t}function Sk(t,e){if(t==="change")return e}var OT=!1;if(fr){var Pp;if(fr){var Sp="oninput"in document;if(!Sp){var i0=document.createElement("div");i0.setAttribute("oninput","return;"),Sp=typeof i0.oninput=="function"}Pp=Sp}else Pp=!1;OT=Pp&&(!document.documentMode||9<document.documentMode)}function r0(){hu&&(hu.detachEvent("onpropertychange",DT),Mu=hu=null)}function DT(t){if(t.propertyName==="value"&&cf(Mu)){var e=[];MT(e,Mu,t,uy(t)),mT(Pk,e)}}function Ck(t,e,n){t==="focusin"?(r0(),hu=e,Mu=n,hu.attachEvent("onpropertychange",DT)):t==="focusout"&&r0()}function Ik(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cf(Mu)}function Ak(t,e){if(t==="click")return cf(e)}function bk(t,e){if(t==="input"||t==="change")return cf(e)}function kk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gi=typeof Object.is=="function"?Object.is:kk;function Ou(t,e){if(gi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ym.call(e,r)||!gi(t[r],e[r]))return!1}return!0}function s0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o0(t,e){var n=s0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s0(n)}}function VT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?VT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jT(){for(var t=window,e=sd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sd(t.document)}return e}function _y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rk(t){var e=jT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&VT(n.ownerDocument.documentElement,n)){if(i!==null&&_y(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=o0(n,o);var a=o0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Nk=fr&&"documentMode"in document&&11>=document.documentMode,ma=null,Dm=null,du=null,Vm=!1;function a0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vm||ma==null||ma!==sd(i)||(i=ma,"selectionStart"in i&&_y(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),du&&Ou(du,i)||(du=i,i=dd(Dm,"onSelect"),0<i.length&&(e=new my("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ma)))}function dh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ga={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},Cp={},zT={};fr&&(zT=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function hf(t){if(Cp[t])return Cp[t];if(!ga[t])return t;var e=ga[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zT)return Cp[t]=e[n];return t}var FT=hf("animationend"),BT=hf("animationiteration"),UT=hf("animationstart"),HT=hf("transitionend"),WT=new Map,l0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(t,e){WT.set(t,e),To(e,[t])}for(var Ip=0;Ip<l0.length;Ip++){var Ap=l0[Ip],Lk=Ap.toLowerCase(),Mk=Ap[0].toUpperCase()+Ap.slice(1);Is(Lk,"on"+Mk)}Is(FT,"onAnimationEnd");Is(BT,"onAnimationIteration");Is(UT,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(HT,"onTransitionEnd");Ba("onMouseEnter",["mouseout","mouseover"]);Ba("onMouseLeave",["mouseout","mouseover"]);Ba("onPointerEnter",["pointerout","pointerover"]);Ba("onPointerLeave",["pointerout","pointerover"]);To("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));To("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));To("onBeforeInput",["compositionend","keypress","textInput","paste"]);To("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));To("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));To("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ok=new Set("cancel close invalid load scroll toggle".split(" ").concat(nu));function u0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Lb(i,e,void 0,t),t.currentTarget=null}function $T(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;u0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;u0(r,u,f),o=h}}}if(ad)throw t=Nm,ad=!1,Nm=null,t}function st(t,e){var n=e[Um];n===void 0&&(n=e[Um]=new Set);var i=t+"__bubble";n.has(i)||(qT(e,t,2,!1),n.add(i))}function bp(t,e,n){var i=0;e&&(i|=4),qT(n,t,i,e)}var fh="_reactListening"+Math.random().toString(36).slice(2);function Du(t){if(!t[fh]){t[fh]=!0,J1.forEach(function(n){n!=="selectionchange"&&(Ok.has(n)||bp(n,!1,t),bp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fh]||(e[fh]=!0,bp("selectionchange",!1,e))}}function qT(t,e,n,i){switch(bT(e)){case 1:var r=Kb;break;case 4:r=Qb;break;default:r=fy}n=r.bind(null,e,n,t),r=void 0,!Rm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function kp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=eo(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}mT(function(){var f=o,g=uy(n),m=[];e:{var v=WT.get(t);if(v!==void 0){var T=my,k=t;switch(t){case"keypress":if(jh(n)===0)break e;case"keydown":case"keyup":T=hk;break;case"focusin":k="focus",T=Ep;break;case"focusout":k="blur",T=Ep;break;case"beforeblur":case"afterblur":T=Ep;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Yv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=pk;break;case FT:case BT:case UT:T=nk;break;case HT:T=gk;break;case"scroll":T=Yb;break;case"wheel":T=_k;break;case"copy":case"cut":case"paste":T=rk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Jv}var R=(e&4)!==0,j=!R&&t==="scroll",b=R?v!==null?v+"Capture":null:v;R=[];for(var P=f,C;P!==null;){C=P;var F=C.stateNode;if(C.tag===5&&F!==null&&(C=F,b!==null&&(F=ku(P,b),F!=null&&R.push(Vu(P,F,C)))),j)break;P=P.return}0<R.length&&(v=new T(v,k,null,n,g),m.push({event:v,listeners:R}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",v&&n!==bm&&(k=n.relatedTarget||n.fromElement)&&(eo(k)||k[pr]))break e;if((T||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,T?(k=n.relatedTarget||n.toElement,T=f,k=k?eo(k):null,k!==null&&(j=Eo(k),k!==j||k.tag!==5&&k.tag!==6)&&(k=null)):(T=null,k=f),T!==k)){if(R=Yv,F="onMouseLeave",b="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(R=Jv,F="onPointerLeave",b="onPointerEnter",P="pointer"),j=T==null?v:ya(T),C=k==null?v:ya(k),v=new R(F,P+"leave",T,n,g),v.target=j,v.relatedTarget=C,F=null,eo(g)===f&&(R=new R(b,P+"enter",k,n,g),R.target=C,R.relatedTarget=j,F=R),j=F,T&&k)t:{for(R=T,b=k,P=0,C=R;C;C=oa(C))P++;for(C=0,F=b;F;F=oa(F))C++;for(;0<P-C;)R=oa(R),P--;for(;0<C-P;)b=oa(b),C--;for(;P--;){if(R===b||b!==null&&R===b.alternate)break t;R=oa(R),b=oa(b)}R=null}else R=null;T!==null&&c0(m,v,T,R,!1),k!==null&&j!==null&&c0(m,j,k,R,!0)}}e:{if(v=f?ya(f):window,T=v.nodeName&&v.nodeName.toLowerCase(),T==="select"||T==="input"&&v.type==="file")var q=Sk;else if(n0(v))if(OT)q=bk;else{q=Ik;var B=Ck}else(T=v.nodeName)&&T.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(q=Ak);if(q&&(q=q(t,f))){MT(m,q,n,g);break e}B&&B(t,v,f),t==="focusout"&&(B=v._wrapperState)&&B.controlled&&v.type==="number"&&Pm(v,"number",v.value)}switch(B=f?ya(f):window,t){case"focusin":(n0(B)||B.contentEditable==="true")&&(ma=B,Dm=f,du=null);break;case"focusout":du=Dm=ma=null;break;case"mousedown":Vm=!0;break;case"contextmenu":case"mouseup":case"dragend":Vm=!1,a0(m,n,g);break;case"selectionchange":if(Nk)break;case"keydown":case"keyup":a0(m,n,g)}var A;if(yy)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else pa?NT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(RT&&n.locale!=="ko"&&(pa||S!=="onCompositionStart"?S==="onCompositionEnd"&&pa&&(A=kT()):(Zr=g,py="value"in Zr?Zr.value:Zr.textContent,pa=!0)),B=dd(f,S),0<B.length&&(S=new Xv(S,t,null,n,g),m.push({event:S,listeners:B}),A?S.data=A:(A=LT(n),A!==null&&(S.data=A)))),(A=wk?xk(t,n):Tk(t,n))&&(f=dd(f,"onBeforeInput"),0<f.length&&(g=new Xv("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:f}),g.data=A))}$T(m,e)})}function Vu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=ku(t,n),o!=null&&i.unshift(Vu(t,o,r)),o=ku(t,e),o!=null&&i.push(Vu(t,o,r))),t=t.return}return i}function oa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=ku(n,o),h!=null&&a.unshift(Vu(n,h,u))):r||(h=ku(n,o),h!=null&&a.push(Vu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Dk=/\r\n?/g,Vk=/\u0000|\uFFFD/g;function h0(t){return(typeof t=="string"?t:""+t).replace(Dk,`
`).replace(Vk,"")}function ph(t,e,n){if(e=h0(e),h0(t)!==e&&n)throw Error(X(425))}function fd(){}var jm=null,zm=null;function Fm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bm=typeof setTimeout=="function"?setTimeout:void 0,jk=typeof clearTimeout=="function"?clearTimeout:void 0,d0=typeof Promise=="function"?Promise:void 0,zk=typeof queueMicrotask=="function"?queueMicrotask:typeof d0<"u"?function(t){return d0.resolve(null).then(t).catch(Fk)}:Bm;function Fk(t){setTimeout(function(){throw t})}function Rp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Lu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Lu(e)}function ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function f0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var al=Math.random().toString(36).slice(2),Ai="__reactFiber$"+al,ju="__reactProps$"+al,pr="__reactContainer$"+al,Um="__reactEvents$"+al,Bk="__reactListeners$"+al,Uk="__reactHandles$"+al;function eo(t){var e=t[Ai];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[Ai]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=f0(t);t!==null;){if(n=t[Ai])return n;t=f0(t)}return e}t=n,n=t.parentNode}return null}function uc(t){return t=t[Ai]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ya(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function df(t){return t[ju]||null}var Hm=[],_a=-1;function As(t){return{current:t}}function ut(t){0>_a||(t.current=Hm[_a],Hm[_a]=null,_a--)}function it(t,e){_a++,Hm[_a]=t.current,t.current=e}var ys={},rn=As(ys),Tn=As(!1),ho=ys;function Ua(t,e){var n=t.type.contextTypes;if(!n)return ys;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function En(t){return t=t.childContextTypes,t!=null}function pd(){ut(Tn),ut(rn)}function p0(t,e,n){if(rn.current!==ys)throw Error(X(168));it(rn,e),it(Tn,n)}function GT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,Cb(t)||"Unknown",r));return yt({},n,i)}function md(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ys,ho=rn.current,it(rn,t),it(Tn,Tn.current),!0}function m0(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=GT(t,e,ho),i.__reactInternalMemoizedMergedChildContext=t,ut(Tn),ut(rn),it(rn,t)):ut(Tn),it(Tn,n)}var nr=null,ff=!1,Np=!1;function ZT(t){nr===null?nr=[t]:nr.push(t)}function Hk(t){ff=!0,ZT(t)}function bs(){if(!Np&&nr!==null){Np=!0;var t=0,e=et;try{var n=nr;for(et=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}nr=null,ff=!1}catch(r){throw nr!==null&&(nr=nr.slice(t+1)),vT(cy,bs),r}finally{et=e,Np=!1}}return null}var va=[],wa=0,gd=null,yd=0,Gn=[],Zn=0,fo=null,rr=1,sr="";function Gs(t,e){va[wa++]=yd,va[wa++]=gd,gd=t,yd=e}function KT(t,e,n){Gn[Zn++]=rr,Gn[Zn++]=sr,Gn[Zn++]=fo,fo=t;var i=rr;t=sr;var r=32-pi(i)-1;i&=~(1<<r),n+=1;var o=32-pi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,rr=1<<32-pi(e)+r|n<<r|i,sr=o+t}else rr=1<<o|n<<r|i,sr=t}function vy(t){t.return!==null&&(Gs(t,1),KT(t,1,0))}function wy(t){for(;t===gd;)gd=va[--wa],va[wa]=null,yd=va[--wa],va[wa]=null;for(;t===fo;)fo=Gn[--Zn],Gn[Zn]=null,sr=Gn[--Zn],Gn[Zn]=null,rr=Gn[--Zn],Gn[Zn]=null}var Rn=null,kn=null,ht=!1,ci=null;function QT(t,e){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function g0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rn=t,kn=ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rn=t,kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fo!==null?{id:rr,overflow:sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rn=t,kn=null,!0):!1;default:return!1}}function Wm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $m(t){if(ht){var e=kn;if(e){var n=e;if(!g0(t,e)){if(Wm(t))throw Error(X(418));e=ts(n.nextSibling);var i=Rn;e&&g0(t,e)?QT(i,n):(t.flags=t.flags&-4097|2,ht=!1,Rn=t)}}else{if(Wm(t))throw Error(X(418));t.flags=t.flags&-4097|2,ht=!1,Rn=t}}}function y0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function mh(t){if(t!==Rn)return!1;if(!ht)return y0(t),ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fm(t.type,t.memoizedProps)),e&&(e=kn)){if(Wm(t))throw YT(),Error(X(418));for(;e;)QT(t,e),e=ts(e.nextSibling)}if(y0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kn=ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kn=null}}else kn=Rn?ts(t.stateNode.nextSibling):null;return!0}function YT(){for(var t=kn;t;)t=ts(t.nextSibling)}function Ha(){kn=Rn=null,ht=!1}function xy(t){ci===null?ci=[t]:ci.push(t)}var Wk=Er.ReactCurrentBatchConfig;function ql(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function gh(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _0(t){var e=t._init;return e(t._payload)}function XT(t){function e(b,P){if(t){var C=b.deletions;C===null?(b.deletions=[P],b.flags|=16):C.push(P)}}function n(b,P){if(!t)return null;for(;P!==null;)e(b,P),P=P.sibling;return null}function i(b,P){for(b=new Map;P!==null;)P.key!==null?b.set(P.key,P):b.set(P.index,P),P=P.sibling;return b}function r(b,P){return b=ss(b,P),b.index=0,b.sibling=null,b}function o(b,P,C){return b.index=C,t?(C=b.alternate,C!==null?(C=C.index,C<P?(b.flags|=2,P):C):(b.flags|=2,P)):(b.flags|=1048576,P)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function u(b,P,C,F){return P===null||P.tag!==6?(P=zp(C,b.mode,F),P.return=b,P):(P=r(P,C),P.return=b,P)}function h(b,P,C,F){var q=C.type;return q===fa?g(b,P,C.props.children,F,C.key):P!==null&&(P.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===zr&&_0(q)===P.type)?(F=r(P,C.props),F.ref=ql(b,P,C),F.return=b,F):(F=$h(C.type,C.key,C.props,null,b.mode,F),F.ref=ql(b,P,C),F.return=b,F)}function f(b,P,C,F){return P===null||P.tag!==4||P.stateNode.containerInfo!==C.containerInfo||P.stateNode.implementation!==C.implementation?(P=Fp(C,b.mode,F),P.return=b,P):(P=r(P,C.children||[]),P.return=b,P)}function g(b,P,C,F,q){return P===null||P.tag!==7?(P=oo(C,b.mode,F,q),P.return=b,P):(P=r(P,C),P.return=b,P)}function m(b,P,C){if(typeof P=="string"&&P!==""||typeof P=="number")return P=zp(""+P,b.mode,C),P.return=b,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case sh:return C=$h(P.type,P.key,P.props,null,b.mode,C),C.ref=ql(b,null,P),C.return=b,C;case da:return P=Fp(P,b.mode,C),P.return=b,P;case zr:var F=P._init;return m(b,F(P._payload),C)}if(eu(P)||Bl(P))return P=oo(P,b.mode,C,null),P.return=b,P;gh(b,P)}return null}function v(b,P,C,F){var q=P!==null?P.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return q!==null?null:u(b,P,""+C,F);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case sh:return C.key===q?h(b,P,C,F):null;case da:return C.key===q?f(b,P,C,F):null;case zr:return q=C._init,v(b,P,q(C._payload),F)}if(eu(C)||Bl(C))return q!==null?null:g(b,P,C,F,null);gh(b,C)}return null}function T(b,P,C,F,q){if(typeof F=="string"&&F!==""||typeof F=="number")return b=b.get(C)||null,u(P,b,""+F,q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case sh:return b=b.get(F.key===null?C:F.key)||null,h(P,b,F,q);case da:return b=b.get(F.key===null?C:F.key)||null,f(P,b,F,q);case zr:var B=F._init;return T(b,P,C,B(F._payload),q)}if(eu(F)||Bl(F))return b=b.get(C)||null,g(P,b,F,q,null);gh(P,F)}return null}function k(b,P,C,F){for(var q=null,B=null,A=P,S=P=0,N=null;A!==null&&S<C.length;S++){A.index>S?(N=A,A=null):N=A.sibling;var D=v(b,A,C[S],F);if(D===null){A===null&&(A=N);break}t&&A&&D.alternate===null&&e(b,A),P=o(D,P,S),B===null?q=D:B.sibling=D,B=D,A=N}if(S===C.length)return n(b,A),ht&&Gs(b,S),q;if(A===null){for(;S<C.length;S++)A=m(b,C[S],F),A!==null&&(P=o(A,P,S),B===null?q=A:B.sibling=A,B=A);return ht&&Gs(b,S),q}for(A=i(b,A);S<C.length;S++)N=T(A,b,S,C[S],F),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?S:N.key),P=o(N,P,S),B===null?q=N:B.sibling=N,B=N);return t&&A.forEach(function(V){return e(b,V)}),ht&&Gs(b,S),q}function R(b,P,C,F){var q=Bl(C);if(typeof q!="function")throw Error(X(150));if(C=q.call(C),C==null)throw Error(X(151));for(var B=q=null,A=P,S=P=0,N=null,D=C.next();A!==null&&!D.done;S++,D=C.next()){A.index>S?(N=A,A=null):N=A.sibling;var V=v(b,A,D.value,F);if(V===null){A===null&&(A=N);break}t&&A&&V.alternate===null&&e(b,A),P=o(V,P,S),B===null?q=V:B.sibling=V,B=V,A=N}if(D.done)return n(b,A),ht&&Gs(b,S),q;if(A===null){for(;!D.done;S++,D=C.next())D=m(b,D.value,F),D!==null&&(P=o(D,P,S),B===null?q=D:B.sibling=D,B=D);return ht&&Gs(b,S),q}for(A=i(b,A);!D.done;S++,D=C.next())D=T(A,b,S,D.value,F),D!==null&&(t&&D.alternate!==null&&A.delete(D.key===null?S:D.key),P=o(D,P,S),B===null?q=D:B.sibling=D,B=D);return t&&A.forEach(function(U){return e(b,U)}),ht&&Gs(b,S),q}function j(b,P,C,F){if(typeof C=="object"&&C!==null&&C.type===fa&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case sh:e:{for(var q=C.key,B=P;B!==null;){if(B.key===q){if(q=C.type,q===fa){if(B.tag===7){n(b,B.sibling),P=r(B,C.props.children),P.return=b,b=P;break e}}else if(B.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===zr&&_0(q)===B.type){n(b,B.sibling),P=r(B,C.props),P.ref=ql(b,B,C),P.return=b,b=P;break e}n(b,B);break}else e(b,B);B=B.sibling}C.type===fa?(P=oo(C.props.children,b.mode,F,C.key),P.return=b,b=P):(F=$h(C.type,C.key,C.props,null,b.mode,F),F.ref=ql(b,P,C),F.return=b,b=F)}return a(b);case da:e:{for(B=C.key;P!==null;){if(P.key===B)if(P.tag===4&&P.stateNode.containerInfo===C.containerInfo&&P.stateNode.implementation===C.implementation){n(b,P.sibling),P=r(P,C.children||[]),P.return=b,b=P;break e}else{n(b,P);break}else e(b,P);P=P.sibling}P=Fp(C,b.mode,F),P.return=b,b=P}return a(b);case zr:return B=C._init,j(b,P,B(C._payload),F)}if(eu(C))return k(b,P,C,F);if(Bl(C))return R(b,P,C,F);gh(b,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,P!==null&&P.tag===6?(n(b,P.sibling),P=r(P,C),P.return=b,b=P):(n(b,P),P=zp(C,b.mode,F),P.return=b,b=P),a(b)):n(b,P)}return j}var Wa=XT(!0),JT=XT(!1),_d=As(null),vd=null,xa=null,Ty=null;function Ey(){Ty=xa=vd=null}function Py(t){var e=_d.current;ut(_d),t._currentValue=e}function qm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function La(t,e){vd=t,Ty=xa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(Ty!==t)if(t={context:t,memoizedValue:e,next:null},xa===null){if(vd===null)throw Error(X(308));xa=t,vd.dependencies={lanes:0,firstContext:t}}else xa=xa.next=t;return e}var to=null;function Sy(t){to===null?to=[t]:to.push(t)}function eE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Sy(e)):(n.next=r.next,r.next=n),e.interleaved=n,mr(t,i)}function mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fr=!1;function Cy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ns(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,$e&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,mr(t,n)}return r=i.interleaved,r===null?(e.next=e,Sy(i)):(e.next=r.next,r.next=e),i.interleaved=e,mr(t,n)}function zh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hy(t,n)}}function v0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wd(t,e,n,i){var r=t.updateQueue;Fr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==a&&(u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=h))}if(o!==null){var m=r.baseState;a=0,g=f=h=null,u=o;do{var v=u.lane,T=u.eventTime;if((i&v)===v){g!==null&&(g=g.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,R=u;switch(v=e,T=n,R.tag){case 1:if(k=R.payload,typeof k=="function"){m=k.call(T,m,v);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,v=typeof k=="function"?k.call(T,m,v):k,v==null)break e;m=yt({},m,v);break e;case 2:Fr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else T={eventTime:T,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(f=g=T,h=m):g=g.next=T,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(g===null&&(h=m),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);mo|=a,t.lanes=a,t.memoizedState=m}}function w0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var cc={},Ri=As(cc),zu=As(cc),Fu=As(cc);function no(t){if(t===cc)throw Error(X(174));return t}function Iy(t,e){switch(it(Fu,e),it(zu,t),it(Ri,cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cm(e,t)}ut(Ri),it(Ri,e)}function $a(){ut(Ri),ut(zu),ut(Fu)}function nE(t){no(Fu.current);var e=no(Ri.current),n=Cm(e,t.type);e!==n&&(it(zu,t),it(Ri,n))}function Ay(t){zu.current===t&&(ut(Ri),ut(zu))}var ft=As(0);function xd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lp=[];function by(){for(var t=0;t<Lp.length;t++)Lp[t]._workInProgressVersionPrimary=null;Lp.length=0}var Fh=Er.ReactCurrentDispatcher,Mp=Er.ReactCurrentBatchConfig,po=0,mt=null,Lt=null,Bt=null,Td=!1,fu=!1,Bu=0,$k=0;function Qt(){throw Error(X(321))}function ky(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gi(t[n],e[n]))return!1;return!0}function Ry(t,e,n,i,r,o){if(po=o,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=t===null||t.memoizedState===null?Kk:Qk,t=n(i,r),fu){o=0;do{if(fu=!1,Bu=0,25<=o)throw Error(X(301));o+=1,Bt=Lt=null,e.updateQueue=null,Fh.current=Yk,t=n(i,r)}while(fu)}if(Fh.current=Ed,e=Lt!==null&&Lt.next!==null,po=0,Bt=Lt=mt=null,Td=!1,e)throw Error(X(300));return t}function Ny(){var t=Bu!==0;return Bu=0,t}function Ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?mt.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function ei(){if(Lt===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var e=Bt===null?mt.memoizedState:Bt.next;if(e!==null)Bt=e,Lt=t;else{if(t===null)throw Error(X(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Bt===null?mt.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Uu(t,e){return typeof e=="function"?e(t):e}function Op(t){var e=ei(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=Lt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var g=f.lane;if((po&g)===g)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var m={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=m,a=i):h=h.next=m,mt.lanes|=g,mo|=g}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,gi(i,e.memoizedState)||(xn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,mt.lanes|=o,mo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dp(t){var e=ei(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);gi(o,e.memoizedState)||(xn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function iE(){}function rE(t,e){var n=mt,i=ei(),r=e(),o=!gi(i.memoizedState,r);if(o&&(i.memoizedState=r,xn=!0),i=i.queue,Ly(aE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Hu(9,oE.bind(null,n,i,r,e),void 0,null),Ut===null)throw Error(X(349));po&30||sE(n,e,r)}return r}function sE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function oE(t,e,n,i){e.value=n,e.getSnapshot=i,lE(e)&&uE(t)}function aE(t,e,n){return n(function(){lE(e)&&uE(t)})}function lE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gi(t,n)}catch{return!0}}function uE(t){var e=mr(t,1);e!==null&&mi(e,t,1,-1)}function x0(t){var e=Ci();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:t},e.queue=t,t=t.dispatch=Zk.bind(null,mt,t),[e.memoizedState,t]}function Hu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function cE(){return ei().memoizedState}function Bh(t,e,n,i){var r=Ci();mt.flags|=t,r.memoizedState=Hu(1|e,n,void 0,i===void 0?null:i)}function pf(t,e,n,i){var r=ei();i=i===void 0?null:i;var o=void 0;if(Lt!==null){var a=Lt.memoizedState;if(o=a.destroy,i!==null&&ky(i,a.deps)){r.memoizedState=Hu(e,n,o,i);return}}mt.flags|=t,r.memoizedState=Hu(1|e,n,o,i)}function T0(t,e){return Bh(8390656,8,t,e)}function Ly(t,e){return pf(2048,8,t,e)}function hE(t,e){return pf(4,2,t,e)}function dE(t,e){return pf(4,4,t,e)}function fE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pE(t,e,n){return n=n!=null?n.concat([t]):null,pf(4,4,fE.bind(null,e,t),n)}function My(){}function mE(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ky(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function gE(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&ky(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function yE(t,e,n){return po&21?(gi(n,e)||(n=TT(),mt.lanes|=n,mo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xn=!0),t.memoizedState=n)}function qk(t,e){var n=et;et=n!==0&&4>n?n:4,t(!0);var i=Mp.transition;Mp.transition={};try{t(!1),e()}finally{et=n,Mp.transition=i}}function _E(){return ei().memoizedState}function Gk(t,e,n){var i=rs(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},vE(t))wE(e,n);else if(n=eE(t,e,n,i),n!==null){var r=dn();mi(n,t,i,r),xE(n,e,i)}}function Zk(t,e,n){var i=rs(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(vE(t))wE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,gi(u,a)){var h=e.interleaved;h===null?(r.next=r,Sy(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=eE(t,e,r,i),n!==null&&(r=dn(),mi(n,t,i,r),xE(n,e,i))}}function vE(t){var e=t.alternate;return t===mt||e!==null&&e===mt}function wE(t,e){fu=Td=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hy(t,n)}}var Ed={readContext:Jn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},Kk={readContext:Jn,useCallback:function(t,e){return Ci().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:T0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4194308,4,fE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bh(4,2,t,e)},useMemo:function(t,e){var n=Ci();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ci();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Gk.bind(null,mt,t),[i.memoizedState,t]},useRef:function(t){var e=Ci();return t={current:t},e.memoizedState=t},useState:x0,useDebugValue:My,useDeferredValue:function(t){return Ci().memoizedState=t},useTransition:function(){var t=x0(!1),e=t[0];return t=qk.bind(null,t[1]),Ci().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=mt,r=Ci();if(ht){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ut===null)throw Error(X(349));po&30||sE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,T0(aE.bind(null,i,o,t),[t]),i.flags|=2048,Hu(9,oE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Ci(),e=Ut.identifierPrefix;if(ht){var n=sr,i=rr;n=(i&~(1<<32-pi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$k++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qk={readContext:Jn,useCallback:mE,useContext:Jn,useEffect:Ly,useImperativeHandle:pE,useInsertionEffect:hE,useLayoutEffect:dE,useMemo:gE,useReducer:Op,useRef:cE,useState:function(){return Op(Uu)},useDebugValue:My,useDeferredValue:function(t){var e=ei();return yE(e,Lt.memoizedState,t)},useTransition:function(){var t=Op(Uu)[0],e=ei().memoizedState;return[t,e]},useMutableSource:iE,useSyncExternalStore:rE,useId:_E,unstable_isNewReconciler:!1},Yk={readContext:Jn,useCallback:mE,useContext:Jn,useEffect:Ly,useImperativeHandle:pE,useInsertionEffect:hE,useLayoutEffect:dE,useMemo:gE,useReducer:Dp,useRef:cE,useState:function(){return Dp(Uu)},useDebugValue:My,useDeferredValue:function(t){var e=ei();return Lt===null?e.memoizedState=t:yE(e,Lt.memoizedState,t)},useTransition:function(){var t=Dp(Uu)[0],e=ei().memoizedState;return[t,e]},useMutableSource:iE,useSyncExternalStore:rE,useId:_E,unstable_isNewReconciler:!1};function li(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mf={isMounted:function(t){return(t=t._reactInternals)?Eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=dn(),r=rs(t),o=ur(i,r);o.payload=e,n!=null&&(o.callback=n),e=ns(t,o,r),e!==null&&(mi(e,t,r,i),zh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=dn(),r=rs(t),o=ur(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ns(t,o,r),e!==null&&(mi(e,t,r,i),zh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),i=rs(t),r=ur(n,i);r.tag=2,e!=null&&(r.callback=e),e=ns(t,r,i),e!==null&&(mi(e,t,i,n),zh(e,t,i))}};function E0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ou(n,i)||!Ou(r,o):!0}function TE(t,e,n){var i=!1,r=ys,o=e.contextType;return typeof o=="object"&&o!==null?o=Jn(o):(r=En(e)?ho:rn.current,i=e.contextTypes,o=(i=i!=null)?Ua(t,r):ys),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function P0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&mf.enqueueReplaceState(e,e.state,null)}function Zm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Cy(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Jn(o):(o=En(e)?ho:rn.current,r.context=Ua(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Gm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&mf.enqueueReplaceState(r,r.state,null),wd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function qa(t,e){try{var n="",i=e;do n+=Sb(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Vp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Km(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Xk=typeof WeakMap=="function"?WeakMap:Map;function EE(t,e,n){n=ur(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Sd||(Sd=!0,sg=i),Km(t,e)},n}function PE(t,e,n){n=ur(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Km(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Km(t,e),typeof i!="function"&&(is===null?is=new Set([this]):is.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function S0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Xk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=d2.bind(null,t,e,n),e.then(t,t))}function C0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function I0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ur(-1,1),e.tag=2,ns(n,e,1))),n.lanes|=1),t)}var Jk=Er.ReactCurrentOwner,xn=!1;function cn(t,e,n,i){e.child=t===null?JT(e,null,n,i):Wa(e,t.child,n,i)}function A0(t,e,n,i,r){n=n.render;var o=e.ref;return La(e,r),i=Ry(t,e,n,i,o,r),n=Ny(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gr(t,e,r)):(ht&&n&&vy(e),e.flags|=1,cn(t,e,i,r),e.child)}function b0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Uy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,SE(t,e,o,i,r)):(t=$h(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ou,n(a,i)&&t.ref===e.ref)return gr(t,e,r)}return e.flags|=1,t=ss(o,i),t.ref=e.ref,t.return=e,e.child=t}function SE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Ou(o,i)&&t.ref===e.ref)if(xn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(xn=!0);else return e.lanes=t.lanes,gr(t,e,r)}return Qm(t,e,n,i,r)}function CE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Ea,bn),bn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,it(Ea,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,it(Ea,bn),bn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,it(Ea,bn),bn|=i;return cn(t,e,r,n),e.child}function IE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qm(t,e,n,i,r){var o=En(n)?ho:rn.current;return o=Ua(e,o),La(e,r),n=Ry(t,e,n,i,o,r),i=Ny(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gr(t,e,r)):(ht&&i&&vy(e),e.flags|=1,cn(t,e,n,r),e.child)}function k0(t,e,n,i,r){if(En(n)){var o=!0;md(e)}else o=!1;if(La(e,r),e.stateNode===null)Uh(t,e),TE(e,n,i),Zm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Jn(f):(f=En(n)?ho:rn.current,f=Ua(e,f));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&P0(e,a,i,f),Fr=!1;var v=e.memoizedState;a.state=v,wd(e,i,a,r),h=e.memoizedState,u!==i||v!==h||Tn.current||Fr?(typeof g=="function"&&(Gm(e,n,g,i),h=e.memoizedState),(u=Fr||E0(e,n,u,i,v,h,f))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,tE(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:li(e.type,u),a.props=f,m=e.pendingProps,v=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Jn(h):(h=En(n)?ho:rn.current,h=Ua(e,h));var T=n.getDerivedStateFromProps;(g=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==m||v!==h)&&P0(e,a,i,h),Fr=!1,v=e.memoizedState,a.state=v,wd(e,i,a,r);var k=e.memoizedState;u!==m||v!==k||Tn.current||Fr?(typeof T=="function"&&(Gm(e,n,T,i),k=e.memoizedState),(f=Fr||E0(e,n,f,i,v,k,h)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return Ym(t,e,n,i,o,r)}function Ym(t,e,n,i,r,o){IE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&m0(e,n,!1),gr(t,e,o);i=e.stateNode,Jk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Wa(e,t.child,null,o),e.child=Wa(e,null,u,o)):cn(t,e,u,o),e.memoizedState=i.state,r&&m0(e,n,!0),e.child}function AE(t){var e=t.stateNode;e.pendingContext?p0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&p0(t,e.context,!1),Iy(t,e.containerInfo)}function R0(t,e,n,i,r){return Ha(),xy(r),e.flags|=256,cn(t,e,n,i),e.child}var Xm={dehydrated:null,treeContext:null,retryLane:0};function Jm(t){return{baseLanes:t,cachePool:null,transitions:null}}function bE(t,e,n){var i=e.pendingProps,r=ft.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),it(ft,r&1),t===null)return $m(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=_f(a,i,0,null),t=oo(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Jm(n),e.memoizedState=Xm,t):Oy(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return e2(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=ss(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=ss(u,o):(o=oo(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Jm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Xm,i}return o=t.child,t=o.sibling,i=ss(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Oy(t,e){return e=_f({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yh(t,e,n,i){return i!==null&&xy(i),Wa(e,t.child,null,n),t=Oy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function e2(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Vp(Error(X(422))),yh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=_f({mode:"visible",children:i.children},r,0,null),o=oo(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Wa(e,t.child,null,a),e.child.memoizedState=Jm(a),e.memoizedState=Xm,o);if(!(e.mode&1))return yh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(X(419)),i=Vp(o,i,void 0),yh(t,e,a,i)}if(u=(a&t.childLanes)!==0,xn||u){if(i=Ut,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,mr(t,r),mi(i,t,r,-1))}return By(),i=Vp(Error(X(421))),yh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=f2.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,kn=ts(r.nextSibling),Rn=e,ht=!0,ci=null,t!==null&&(Gn[Zn++]=rr,Gn[Zn++]=sr,Gn[Zn++]=fo,rr=t.id,sr=t.overflow,fo=e),e=Oy(e,i.children),e.flags|=4096,e)}function N0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),qm(t.return,e,n)}function jp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function kE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(cn(t,e,i.children,n),i=ft.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N0(t,n,e);else if(t.tag===19)N0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(it(ft,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&xd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),jp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&xd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}jp(e,!0,n,null,o);break;case"together":jp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function t2(t,e,n){switch(e.tag){case 3:AE(e),Ha();break;case 5:nE(e);break;case 1:En(e.type)&&md(e);break;case 4:Iy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;it(_d,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(it(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?bE(t,e,n):(it(ft,ft.current&1),t=gr(t,e,n),t!==null?t.sibling:null);it(ft,ft.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return kE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),it(ft,ft.current),i)break;return null;case 22:case 23:return e.lanes=0,CE(t,e,n)}return gr(t,e,n)}var RE,eg,NE,LE;RE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eg=function(){};NE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,no(Ri.current);var o=null;switch(n){case"input":r=Tm(t,r),i=Tm(t,i),o=[];break;case"select":r=yt({},r,{value:void 0}),i=yt({},i,{value:void 0}),o=[];break;case"textarea":r=Sm(t,r),i=Sm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=fd)}Im(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Au.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Au.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&st("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};LE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Gl(t,e){if(!ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function n2(t,e,n){var i=e.pendingProps;switch(wy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return En(e.type)&&pd(),Yt(e),null;case 3:return i=e.stateNode,$a(),ut(Tn),ut(rn),by(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(mh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ci!==null&&(lg(ci),ci=null))),eg(t,e),Yt(e),null;case 5:Ay(e);var r=no(Fu.current);if(n=e.type,t!==null&&e.stateNode!=null)NE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Yt(e),null}if(t=no(Ri.current),mh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Ai]=e,i[ju]=o,t=(e.mode&1)!==0,n){case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":case"embed":st("load",i);break;case"video":case"audio":for(r=0;r<nu.length;r++)st(nu[r],i);break;case"source":st("error",i);break;case"img":case"image":case"link":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"input":Bv(i,o),st("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},st("invalid",i);break;case"textarea":Hv(i,o),st("invalid",i)}Im(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&ph(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&ph(i.textContent,u,t),r=["children",""+u]):Au.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&st("scroll",i)}switch(n){case"input":oh(i),Uv(i,o,!0);break;case"textarea":oh(i),Wv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=fd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Ai]=e,t[ju]=i,RE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Am(n,i),n){case"dialog":st("cancel",t),st("close",t),r=i;break;case"iframe":case"object":case"embed":st("load",t),r=i;break;case"video":case"audio":for(r=0;r<nu.length;r++)st(nu[r],t);r=i;break;case"source":st("error",t),r=i;break;case"img":case"image":case"link":st("error",t),st("load",t),r=i;break;case"details":st("toggle",t),r=i;break;case"input":Bv(t,i),r=Tm(t,i),st("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=yt({},i,{value:void 0}),st("invalid",t);break;case"textarea":Hv(t,i),r=Sm(t,i),st("invalid",t);break;default:r=i}Im(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?cT(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&lT(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&bu(t,h):typeof h=="number"&&bu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Au.hasOwnProperty(o)?h!=null&&o==="onScroll"&&st("scroll",t):h!=null&&sy(t,o,h,a))}switch(n){case"input":oh(t),Uv(t,i,!1);break;case"textarea":oh(t),Wv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+gs(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ba(t,!!i.multiple,o,!1):i.defaultValue!=null&&ba(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=fd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)LE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=no(Fu.current),no(Ri.current),mh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ai]=e,(o=i.nodeValue!==n)&&(t=Rn,t!==null))switch(t.tag){case 3:ph(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ph(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ai]=e,e.stateNode=i}return Yt(e),null;case 13:if(ut(ft),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ht&&kn!==null&&e.mode&1&&!(e.flags&128))YT(),Ha(),e.flags|=98560,o=!1;else if(o=mh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[Ai]=e}else Ha(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),o=!1}else ci!==null&&(lg(ci),ci=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?Ot===0&&(Ot=3):By())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return $a(),eg(t,e),t===null&&Du(e.stateNode.containerInfo),Yt(e),null;case 10:return Py(e.type._context),Yt(e),null;case 17:return En(e.type)&&pd(),Yt(e),null;case 19:if(ut(ft),o=e.memoizedState,o===null)return Yt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Gl(o,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=xd(t),a!==null){for(e.flags|=128,Gl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return it(ft,ft.current&1|2),e.child}t=t.sibling}o.tail!==null&&Pt()>Ga&&(e.flags|=128,i=!0,Gl(o,!1),e.lanes=4194304)}else{if(!i)if(t=xd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ht)return Yt(e),null}else 2*Pt()-o.renderingStartTime>Ga&&n!==1073741824&&(e.flags|=128,i=!0,Gl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Pt(),e.sibling=null,n=ft.current,it(ft,i?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return Fy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?bn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function i2(t,e){switch(wy(e),e.tag){case 1:return En(e.type)&&pd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $a(),ut(Tn),ut(rn),by(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ay(e),null;case 13:if(ut(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Ha()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(ft),null;case 4:return $a(),null;case 10:return Py(e.type._context),null;case 22:case 23:return Fy(),null;case 24:return null;default:return null}}var _h=!1,tn=!1,r2=typeof WeakSet=="function"?WeakSet:Set,le=null;function Ta(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){xt(t,e,i)}else n.current=null}function tg(t,e,n){try{n()}catch(i){xt(t,e,i)}}var L0=!1;function s2(t,e){if(jm=cd,t=jT(),_y(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,g=0,m=t,v=null;t:for(;;){for(var T;m!==n||r!==0&&m.nodeType!==3||(u=a+r),m!==o||i!==0&&m.nodeType!==3||(h=a+i),m.nodeType===3&&(a+=m.nodeValue.length),(T=m.firstChild)!==null;)v=m,m=T;for(;;){if(m===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++g===i&&(h=a),(T=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(zm={focusedElem:t,selectionRange:n},cd=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,j=k.memoizedState,b=e.stateNode,P=b.getSnapshotBeforeUpdate(e.elementType===e.type?R:li(e.type,R),j);b.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(F){xt(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return k=L0,L0=!1,k}function pu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&tg(e,n,o)}r=r.next}while(r!==i)}}function gf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ng(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ME(t){var e=t.alternate;e!==null&&(t.alternate=null,ME(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ai],delete e[ju],delete e[Um],delete e[Bk],delete e[Uk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OE(t){return t.tag===5||t.tag===3||t.tag===4}function M0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ig(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fd));else if(i!==4&&(t=t.child,t!==null))for(ig(t,e,n),t=t.sibling;t!==null;)ig(t,e,n),t=t.sibling}function rg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(rg(t,e,n),t=t.sibling;t!==null;)rg(t,e,n),t=t.sibling}var Ht=null,ui=!1;function Or(t,e,n){for(n=n.child;n!==null;)DE(t,e,n),n=n.sibling}function DE(t,e,n){if(ki&&typeof ki.onCommitFiberUnmount=="function")try{ki.onCommitFiberUnmount(lf,n)}catch{}switch(n.tag){case 5:tn||Ta(n,e);case 6:var i=Ht,r=ui;Ht=null,Or(t,e,n),Ht=i,ui=r,Ht!==null&&(ui?(t=Ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(ui?(t=Ht,n=n.stateNode,t.nodeType===8?Rp(t.parentNode,n):t.nodeType===1&&Rp(t,n),Lu(t)):Rp(Ht,n.stateNode));break;case 4:i=Ht,r=ui,Ht=n.stateNode.containerInfo,ui=!0,Or(t,e,n),Ht=i,ui=r;break;case 0:case 11:case 14:case 15:if(!tn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&tg(n,e,a),r=r.next}while(r!==i)}Or(t,e,n);break;case 1:if(!tn&&(Ta(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){xt(n,e,u)}Or(t,e,n);break;case 21:Or(t,e,n);break;case 22:n.mode&1?(tn=(i=tn)||n.memoizedState!==null,Or(t,e,n),tn=i):Or(t,e,n);break;default:Or(t,e,n)}}function O0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new r2),e.forEach(function(i){var r=p2.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ai(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ht=u.stateNode,ui=!1;break e;case 3:Ht=u.stateNode.containerInfo,ui=!0;break e;case 4:Ht=u.stateNode.containerInfo,ui=!0;break e}u=u.return}if(Ht===null)throw Error(X(160));DE(o,a,r),Ht=null,ui=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){xt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VE(e,t),e=e.sibling}function VE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ai(e,t),Si(t),i&4){try{pu(3,t,t.return),gf(3,t)}catch(R){xt(t,t.return,R)}try{pu(5,t,t.return)}catch(R){xt(t,t.return,R)}}break;case 1:ai(e,t),Si(t),i&512&&n!==null&&Ta(n,n.return);break;case 5:if(ai(e,t),Si(t),i&512&&n!==null&&Ta(n,n.return),t.flags&32){var r=t.stateNode;try{bu(r,"")}catch(R){xt(t,t.return,R)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&sT(r,o),Am(u,a);var f=Am(u,o);for(a=0;a<h.length;a+=2){var g=h[a],m=h[a+1];g==="style"?cT(r,m):g==="dangerouslySetInnerHTML"?lT(r,m):g==="children"?bu(r,m):sy(r,g,m,f)}switch(u){case"input":Em(r,o);break;case"textarea":oT(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?ba(r,!!o.multiple,T,!1):v!==!!o.multiple&&(o.defaultValue!=null?ba(r,!!o.multiple,o.defaultValue,!0):ba(r,!!o.multiple,o.multiple?[]:"",!1))}r[ju]=o}catch(R){xt(t,t.return,R)}}break;case 6:if(ai(e,t),Si(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(R){xt(t,t.return,R)}}break;case 3:if(ai(e,t),Si(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Lu(e.containerInfo)}catch(R){xt(t,t.return,R)}break;case 4:ai(e,t),Si(t);break;case 13:ai(e,t),Si(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(jy=Pt())),i&4&&O0(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(f=tn)||g,ai(e,t),tn=f):ai(e,t),Si(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!g&&t.mode&1)for(le=t,g=t.child;g!==null;){for(m=le=g;le!==null;){switch(v=le,T=v.child,v.tag){case 0:case 11:case 14:case 15:pu(4,v,v.return);break;case 1:Ta(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(R){xt(i,n,R)}}break;case 5:Ta(v,v.return);break;case 22:if(v.memoizedState!==null){V0(m);continue}}T!==null?(T.return=v,le=T):V0(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{r=m.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=m.stateNode,h=m.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=uT("display",a))}catch(R){xt(t,t.return,R)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(R){xt(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ai(e,t),Si(t),i&4&&O0(t);break;case 21:break;default:ai(e,t),Si(t)}}function Si(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OE(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(bu(r,""),i.flags&=-33);var o=M0(t);rg(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=M0(t);ig(t,u,a);break;default:throw Error(X(161))}}catch(h){xt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function o2(t,e,n){le=t,jE(t)}function jE(t,e,n){for(var i=(t.mode&1)!==0;le!==null;){var r=le,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||_h;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||tn;u=_h;var f=tn;if(_h=a,(tn=h)&&!f)for(le=r;le!==null;)a=le,h=a.child,a.tag===22&&a.memoizedState!==null?j0(r):h!==null?(h.return=a,le=h):j0(r);for(;o!==null;)le=o,jE(o),o=o.sibling;le=r,_h=u,tn=f}D0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,le=o):D0(t)}}function D0(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||gf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!tn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:li(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&w0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}w0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&Lu(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}tn||e.flags&512&&ng(e)}catch(v){xt(e,e.return,v)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function V0(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function j0(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gf(4,e)}catch(h){xt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){xt(e,r,h)}}var o=e.return;try{ng(e)}catch(h){xt(e,o,h)}break;case 5:var a=e.return;try{ng(e)}catch(h){xt(e,a,h)}}}catch(h){xt(e,e.return,h)}if(e===t){le=null;break}var u=e.sibling;if(u!==null){u.return=e.return,le=u;break}le=e.return}}var a2=Math.ceil,Pd=Er.ReactCurrentDispatcher,Dy=Er.ReactCurrentOwner,Xn=Er.ReactCurrentBatchConfig,$e=0,Ut=null,Rt=null,qt=0,bn=0,Ea=As(0),Ot=0,Wu=null,mo=0,yf=0,Vy=0,mu=null,wn=null,jy=0,Ga=1/0,tr=null,Sd=!1,sg=null,is=null,vh=!1,Kr=null,Cd=0,gu=0,og=null,Hh=-1,Wh=0;function dn(){return $e&6?Pt():Hh!==-1?Hh:Hh=Pt()}function rs(t){return t.mode&1?$e&2&&qt!==0?qt&-qt:Wk.transition!==null?(Wh===0&&(Wh=TT()),Wh):(t=et,t!==0||(t=window.event,t=t===void 0?16:bT(t.type)),t):1}function mi(t,e,n,i){if(50<gu)throw gu=0,og=null,Error(X(185));ac(t,n,i),(!($e&2)||t!==Ut)&&(t===Ut&&(!($e&2)&&(yf|=n),Ot===4&&Hr(t,qt)),Pn(t,i),n===1&&$e===0&&!(e.mode&1)&&(Ga=Pt()+500,ff&&bs()))}function Pn(t,e){var n=t.callbackNode;Wb(t,e);var i=ud(t,t===Ut?qt:0);if(i===0)n!==null&&Gv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Gv(n),e===1)t.tag===0?Hk(z0.bind(null,t)):ZT(z0.bind(null,t)),zk(function(){!($e&6)&&bs()}),n=null;else{switch(ET(i)){case 1:n=cy;break;case 4:n=wT;break;case 16:n=ld;break;case 536870912:n=xT;break;default:n=ld}n=qE(n,zE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zE(t,e){if(Hh=-1,Wh=0,$e&6)throw Error(X(327));var n=t.callbackNode;if(Ma()&&t.callbackNode!==n)return null;var i=ud(t,t===Ut?qt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Id(t,i);else{e=i;var r=$e;$e|=2;var o=BE();(Ut!==t||qt!==e)&&(tr=null,Ga=Pt()+500,so(t,e));do try{c2();break}catch(u){FE(t,u)}while(!0);Ey(),Pd.current=o,$e=r,Rt!==null?e=0:(Ut=null,qt=0,e=Ot)}if(e!==0){if(e===2&&(r=Lm(t),r!==0&&(i=r,e=ag(t,r))),e===1)throw n=Wu,so(t,0),Hr(t,i),Pn(t,Pt()),n;if(e===6)Hr(t,i);else{if(r=t.current.alternate,!(i&30)&&!l2(r)&&(e=Id(t,i),e===2&&(o=Lm(t),o!==0&&(i=o,e=ag(t,o))),e===1))throw n=Wu,so(t,0),Hr(t,i),Pn(t,Pt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:Zs(t,wn,tr);break;case 3:if(Hr(t,i),(i&130023424)===i&&(e=jy+500-Pt(),10<e)){if(ud(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){dn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Bm(Zs.bind(null,t,wn,tr),e);break}Zs(t,wn,tr);break;case 4:if(Hr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-pi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=Pt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*a2(i/1960))-i,10<i){t.timeoutHandle=Bm(Zs.bind(null,t,wn,tr),i);break}Zs(t,wn,tr);break;case 5:Zs(t,wn,tr);break;default:throw Error(X(329))}}}return Pn(t,Pt()),t.callbackNode===n?zE.bind(null,t):null}function ag(t,e){var n=mu;return t.current.memoizedState.isDehydrated&&(so(t,e).flags|=256),t=Id(t,e),t!==2&&(e=wn,wn=n,e!==null&&lg(e)),t}function lg(t){wn===null?wn=t:wn.push.apply(wn,t)}function l2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!gi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~Vy,e&=~yf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pi(e),i=1<<n;t[n]=-1,e&=~i}}function z0(t){if($e&6)throw Error(X(327));Ma();var e=ud(t,0);if(!(e&1))return Pn(t,Pt()),null;var n=Id(t,e);if(t.tag!==0&&n===2){var i=Lm(t);i!==0&&(e=i,n=ag(t,i))}if(n===1)throw n=Wu,so(t,0),Hr(t,e),Pn(t,Pt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zs(t,wn,tr),Pn(t,Pt()),null}function zy(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(Ga=Pt()+500,ff&&bs())}}function go(t){Kr!==null&&Kr.tag===0&&!($e&6)&&Ma();var e=$e;$e|=1;var n=Xn.transition,i=et;try{if(Xn.transition=null,et=1,t)return t()}finally{et=i,Xn.transition=n,$e=e,!($e&6)&&bs()}}function Fy(){bn=Ea.current,ut(Ea)}function so(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jk(n)),Rt!==null)for(n=Rt.return;n!==null;){var i=n;switch(wy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&pd();break;case 3:$a(),ut(Tn),ut(rn),by();break;case 5:Ay(i);break;case 4:$a();break;case 13:ut(ft);break;case 19:ut(ft);break;case 10:Py(i.type._context);break;case 22:case 23:Fy()}n=n.return}if(Ut=t,Rt=t=ss(t.current,null),qt=bn=e,Ot=0,Wu=null,Vy=yf=mo=0,wn=mu=null,to!==null){for(e=0;e<to.length;e++)if(n=to[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}to=null}return t}function FE(t,e){do{var n=Rt;try{if(Ey(),Fh.current=Ed,Td){for(var i=mt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Td=!1}if(po=0,Bt=Lt=mt=null,fu=!1,Bu=0,Dy.current=null,n===null||n.return===null){Ot=1,Wu=e,Rt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=qt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,g=u,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var T=C0(a);if(T!==null){T.flags&=-257,I0(T,a,u,o,e),T.mode&1&&S0(o,f,e),e=T,h=f;var k=e.updateQueue;if(k===null){var R=new Set;R.add(h),e.updateQueue=R}else k.add(h);break e}else{if(!(e&1)){S0(o,f,e),By();break e}h=Error(X(426))}}else if(ht&&u.mode&1){var j=C0(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),I0(j,a,u,o,e),xy(qa(h,u));break e}}o=h=qa(h,u),Ot!==4&&(Ot=2),mu===null?mu=[o]:mu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=EE(o,h,e);v0(o,b);break e;case 1:u=h;var P=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(is===null||!is.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=PE(o,u,e);v0(o,F);break e}}o=o.return}while(o!==null)}HE(n)}catch(q){e=q,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function BE(){var t=Pd.current;return Pd.current=Ed,t===null?Ed:t}function By(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Ut===null||!(mo&268435455)&&!(yf&268435455)||Hr(Ut,qt)}function Id(t,e){var n=$e;$e|=2;var i=BE();(Ut!==t||qt!==e)&&(tr=null,so(t,e));do try{u2();break}catch(r){FE(t,r)}while(!0);if(Ey(),$e=n,Pd.current=i,Rt!==null)throw Error(X(261));return Ut=null,qt=0,Ot}function u2(){for(;Rt!==null;)UE(Rt)}function c2(){for(;Rt!==null&&!Ob();)UE(Rt)}function UE(t){var e=$E(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?HE(t):Rt=e,Dy.current=null}function HE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=i2(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,Rt=null;return}}else if(n=n2(n,e,bn),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Ot===0&&(Ot=5)}function Zs(t,e,n){var i=et,r=Xn.transition;try{Xn.transition=null,et=1,h2(t,e,n,i)}finally{Xn.transition=r,et=i}return null}function h2(t,e,n,i){do Ma();while(Kr!==null);if($e&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if($b(t,o),t===Ut&&(Rt=Ut=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vh||(vh=!0,qE(ld,function(){return Ma(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xn.transition,Xn.transition=null;var a=et;et=1;var u=$e;$e|=4,Dy.current=null,s2(t,n),VE(n,t),Rk(zm),cd=!!jm,zm=jm=null,t.current=n,o2(n),Db(),$e=u,et=a,Xn.transition=o}else t.current=n;if(vh&&(vh=!1,Kr=t,Cd=r),o=t.pendingLanes,o===0&&(is=null),zb(n.stateNode),Pn(t,Pt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Sd)throw Sd=!1,t=sg,sg=null,t;return Cd&1&&t.tag!==0&&Ma(),o=t.pendingLanes,o&1?t===og?gu++:(gu=0,og=t):gu=0,bs(),null}function Ma(){if(Kr!==null){var t=ET(Cd),e=Xn.transition,n=et;try{if(Xn.transition=null,et=16>t?16:t,Kr===null)var i=!1;else{if(t=Kr,Kr=null,Cd=0,$e&6)throw Error(X(331));var r=$e;for($e|=4,le=t.current;le!==null;){var o=le,a=o.child;if(le.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(le=f;le!==null;){var g=le;switch(g.tag){case 0:case 11:case 15:pu(8,g,o)}var m=g.child;if(m!==null)m.return=g,le=m;else for(;le!==null;){g=le;var v=g.sibling,T=g.return;if(ME(g),g===f){le=null;break}if(v!==null){v.return=T,le=v;break}le=T}}}var k=o.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var j=R.sibling;R.sibling=null,R=j}while(R!==null)}}le=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,le=a;else e:for(;le!==null;){if(o=le,o.flags&2048)switch(o.tag){case 0:case 11:case 15:pu(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,le=b;break e}le=o.return}}var P=t.current;for(le=P;le!==null;){a=le;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,le=C;else e:for(a=P;le!==null;){if(u=le,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:gf(9,u)}}catch(q){xt(u,u.return,q)}if(u===a){le=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,le=F;break e}le=u.return}}if($e=r,bs(),ki&&typeof ki.onPostCommitFiberRoot=="function")try{ki.onPostCommitFiberRoot(lf,t)}catch{}i=!0}return i}finally{et=n,Xn.transition=e}}return!1}function F0(t,e,n){e=qa(n,e),e=EE(t,e,1),t=ns(t,e,1),e=dn(),t!==null&&(ac(t,1,e),Pn(t,e))}function xt(t,e,n){if(t.tag===3)F0(t,t,n);else for(;e!==null;){if(e.tag===3){F0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(is===null||!is.has(i))){t=qa(n,t),t=PE(e,t,1),e=ns(e,t,1),t=dn(),e!==null&&(ac(e,1,t),Pn(e,t));break}}e=e.return}}function d2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&n,Ut===t&&(qt&n)===n&&(Ot===4||Ot===3&&(qt&130023424)===qt&&500>Pt()-jy?so(t,0):Vy|=n),Pn(t,e)}function WE(t,e){e===0&&(t.mode&1?(e=uh,uh<<=1,!(uh&130023424)&&(uh=4194304)):e=1);var n=dn();t=mr(t,e),t!==null&&(ac(t,e,n),Pn(t,n))}function f2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WE(t,n)}function p2(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),WE(t,n)}var $E;$E=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xn=!1,t2(t,e,n);xn=!!(t.flags&131072)}else xn=!1,ht&&e.flags&1048576&&KT(e,yd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Uh(t,e),t=e.pendingProps;var r=Ua(e,rn.current);La(e,n),r=Ry(null,e,i,t,r,n);var o=Ny();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(i)?(o=!0,md(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Cy(e),r.updater=mf,e.stateNode=r,r._reactInternals=e,Zm(e,i,t,n),e=Ym(null,e,i,!0,o,n)):(e.tag=0,ht&&o&&vy(e),cn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Uh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=g2(i),t=li(i,t),r){case 0:e=Qm(null,e,i,t,n);break e;case 1:e=k0(null,e,i,t,n);break e;case 11:e=A0(null,e,i,t,n);break e;case 14:e=b0(null,e,i,li(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:li(i,r),Qm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:li(i,r),k0(t,e,i,r,n);case 3:e:{if(AE(e),t===null)throw Error(X(387));i=e.pendingProps,o=e.memoizedState,r=o.element,tE(t,e),wd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=qa(Error(X(423)),e),e=R0(t,e,i,n,r);break e}else if(i!==r){r=qa(Error(X(424)),e),e=R0(t,e,i,n,r);break e}else for(kn=ts(e.stateNode.containerInfo.firstChild),Rn=e,ht=!0,ci=null,n=JT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ha(),i===r){e=gr(t,e,n);break e}cn(t,e,i,n)}e=e.child}return e;case 5:return nE(e),t===null&&$m(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Fm(i,r)?a=null:o!==null&&Fm(i,o)&&(e.flags|=32),IE(t,e),cn(t,e,a,n),e.child;case 6:return t===null&&$m(e),null;case 13:return bE(t,e,n);case 4:return Iy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Wa(e,null,i,n):cn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:li(i,r),A0(t,e,i,r,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,it(_d,i._currentValue),i._currentValue=a,o!==null)if(gi(o.value,a)){if(o.children===r.children&&!Tn.current){e=gr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=ur(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?h.next=h:(h.next=g.next,g.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),qm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),qm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}cn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,La(e,n),r=Jn(r),i=i(r),e.flags|=1,cn(t,e,i,n),e.child;case 14:return i=e.type,r=li(i,e.pendingProps),r=li(i.type,r),b0(t,e,i,r,n);case 15:return SE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:li(i,r),Uh(t,e),e.tag=1,En(i)?(t=!0,md(e)):t=!1,La(e,n),TE(e,i,r),Zm(e,i,r,n),Ym(null,e,i,!0,t,n);case 19:return kE(t,e,n);case 22:return CE(t,e,n)}throw Error(X(156,e.tag))};function qE(t,e){return vT(t,e)}function m2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,n,i){return new m2(t,e,n,i)}function Uy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function g2(t){if(typeof t=="function")return Uy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ay)return 11;if(t===ly)return 14}return 2}function ss(t,e){var n=t.alternate;return n===null?(n=Yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $h(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Uy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case fa:return oo(n.children,r,o,e);case oy:a=8,r|=8;break;case _m:return t=Yn(12,n,e,r|2),t.elementType=_m,t.lanes=o,t;case vm:return t=Yn(13,n,e,r),t.elementType=vm,t.lanes=o,t;case wm:return t=Yn(19,n,e,r),t.elementType=wm,t.lanes=o,t;case nT:return _f(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eT:a=10;break e;case tT:a=9;break e;case ay:a=11;break e;case ly:a=14;break e;case zr:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Yn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function oo(t,e,n,i){return t=Yn(7,t,i,e),t.lanes=n,t}function _f(t,e,n,i){return t=Yn(22,t,i,e),t.elementType=nT,t.lanes=n,t.stateNode={isHidden:!1},t}function zp(t,e,n){return t=Yn(6,t,null,e),t.lanes=n,t}function Fp(t,e,n){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function y2(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wp(0),this.expirationTimes=wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Hy(t,e,n,i,r,o,a,u,h){return t=new y2(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Yn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cy(o),t}function _2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:da,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function GE(t){if(!t)return ys;t=t._reactInternals;e:{if(Eo(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(En(n))return GT(t,n,e)}return e}function ZE(t,e,n,i,r,o,a,u,h){return t=Hy(n,i,!0,t,r,o,a,u,h),t.context=GE(null),n=t.current,i=dn(),r=rs(n),o=ur(i,r),o.callback=e??null,ns(n,o,r),t.current.lanes=r,ac(t,r,i),Pn(t,i),t}function vf(t,e,n,i){var r=e.current,o=dn(),a=rs(r);return n=GE(n),e.context===null?e.context=n:e.pendingContext=n,e=ur(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ns(r,e,a),t!==null&&(mi(t,r,a,o),zh(t,r,a)),a}function Ad(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function B0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wy(t,e){B0(t,e),(t=t.alternate)&&B0(t,e)}function v2(){return null}var KE=typeof reportError=="function"?reportError:function(t){console.error(t)};function $y(t){this._internalRoot=t}wf.prototype.render=$y.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));vf(t,e,null,null)};wf.prototype.unmount=$y.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;go(function(){vf(null,t,null,null)}),e[pr]=null}};function wf(t){this._internalRoot=t}wf.prototype.unstable_scheduleHydration=function(t){if(t){var e=CT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ur.length&&e!==0&&e<Ur[n].priority;n++);Ur.splice(n,0,t),n===0&&AT(t)}};function qy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U0(){}function w2(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Ad(a);o.call(f)}}var a=ZE(e,i,t,0,null,!1,!1,"",U0);return t._reactRootContainer=a,t[pr]=a.current,Du(t.nodeType===8?t.parentNode:t),go(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Ad(h);u.call(f)}}var h=Hy(t,0,!1,null,null,!1,!1,"",U0);return t._reactRootContainer=h,t[pr]=h.current,Du(t.nodeType===8?t.parentNode:t),go(function(){vf(e,h,n,i)}),h}function Tf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=Ad(a);u.call(h)}}vf(e,a,t,r)}else a=w2(n,e,t,r,i);return Ad(a)}PT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tu(e.pendingLanes);n!==0&&(hy(e,n|1),Pn(e,Pt()),!($e&6)&&(Ga=Pt()+500,bs()))}break;case 13:go(function(){var i=mr(t,1);if(i!==null){var r=dn();mi(i,t,1,r)}}),Wy(t,1)}};dy=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var n=dn();mi(e,t,134217728,n)}Wy(t,134217728)}};ST=function(t){if(t.tag===13){var e=rs(t),n=mr(t,e);if(n!==null){var i=dn();mi(n,t,e,i)}Wy(t,e)}};CT=function(){return et};IT=function(t,e){var n=et;try{return et=t,e()}finally{et=n}};km=function(t,e,n){switch(e){case"input":if(Em(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=df(i);if(!r)throw Error(X(90));rT(i),Em(i,r)}}}break;case"textarea":oT(t,n);break;case"select":e=n.value,e!=null&&ba(t,!!n.multiple,e,!1)}};fT=zy;pT=go;var x2={usingClientEntryPoint:!1,Events:[uc,ya,df,hT,dT,zy]},Zl={findFiberByHostInstance:eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T2={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yT(t),t===null?null:t.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||v2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{lf=wh.inject(T2),ki=wh}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x2;On.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qy(e))throw Error(X(200));return _2(t,e,null,n)};On.createRoot=function(t,e){if(!qy(t))throw Error(X(299));var n=!1,i="",r=KE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Hy(t,1,!1,null,null,n,!1,i,r),t[pr]=e.current,Du(t.nodeType===8?t.parentNode:t),new $y(e)};On.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=yT(e),t=t===null?null:t.stateNode,t};On.flushSync=function(t){return go(t)};On.hydrate=function(t,e,n){if(!xf(e))throw Error(X(200));return Tf(null,t,e,!0,n)};On.hydrateRoot=function(t,e,n){if(!qy(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=KE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=ZE(e,null,t,1,n??null,r,!1,o,a),t[pr]=e.current,Du(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new wf(e)};On.render=function(t,e,n){if(!xf(e))throw Error(X(200));return Tf(null,t,e,!1,n)};On.unmountComponentAtNode=function(t){if(!xf(t))throw Error(X(40));return t._reactRootContainer?(go(function(){Tf(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};On.unstable_batchedUpdates=zy;On.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!xf(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Tf(t,e,n,!1,i)};On.version="18.3.1-next-f1338f8080-20240426";function QE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QE)}catch(t){console.error(t)}}QE(),Q1.exports=On;var E2=Q1.exports,H0=E2;gm.createRoot=H0.createRoot,gm.hydrateRoot=H0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $u(){return $u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$u.apply(this,arguments)}var Qr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qr||(Qr={}));const W0="popstate";function P2(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=Po(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),ug("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:bd(o))}function i(r,o){Ef(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return C2(e,n,i,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ef(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function S2(){return Math.random().toString(36).substr(2,8)}function $0(t,e){return{usr:t.state,key:t.key,idx:e}}function ug(t,e,n,i){return n===void 0&&(n=null),$u({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Po(e):e,{state:n,key:e&&e.key||i||S2()})}function bd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Po(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function C2(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Qr.Pop,h=null,f=g();f==null&&(f=0,a.replaceState($u({},a.state,{idx:f}),""));function g(){return(a.state||{idx:null}).idx}function m(){u=Qr.Pop;let j=g(),b=j==null?null:j-f;f=j,h&&h({action:u,location:R.location,delta:b})}function v(j,b){u=Qr.Push;let P=ug(R.location,j,b);n&&n(P,j),f=g()+1;let C=$0(P,f),F=R.createHref(P);try{a.pushState(C,"",F)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;r.location.assign(F)}o&&h&&h({action:u,location:R.location,delta:1})}function T(j,b){u=Qr.Replace;let P=ug(R.location,j,b);n&&n(P,j),f=g();let C=$0(P,f),F=R.createHref(P);a.replaceState(C,"",F),o&&h&&h({action:u,location:R.location,delta:0})}function k(j){let b=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof j=="string"?j:bd(j);return P=P.replace(/ $/,"%20"),gt(b,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,b)}let R={get action(){return u},get location(){return t(r,a)},listen(j){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(W0,m),h=j,()=>{r.removeEventListener(W0,m),h=null}},createHref(j){return e(r,j)},createURL:k,encodeLocation(j){let b=k(j);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:v,replace:T,go(j){return a.go(j)}};return R}var q0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(q0||(q0={}));function I2(t,e,n){return n===void 0&&(n="/"),A2(t,e,n)}function A2(t,e,n,i){let r=typeof e=="string"?Po(e):e,o=Za(r.pathname||"/",n);if(o==null)return null;let a=YE(t);b2(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=F2(o);u=j2(a[h],f)}return u}function YE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(gt(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=os([i,h.relativePath]),g=n.concat(h);o.children&&o.children.length>0&&(gt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),YE(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:D2(f,o.index),routesMeta:g})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of XE(o.path))r(o,a,h)}),e}function XE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=XE(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function b2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:V2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const k2=/^:[\w-]+$/,R2=3,N2=2,L2=1,M2=10,O2=-2,G0=t=>t==="*";function D2(t,e){let n=t.split("/"),i=n.length;return n.some(G0)&&(i+=O2),e&&(i+=N2),n.filter(r=>!G0(r)).reduce((r,o)=>r+(k2.test(o)?R2:o===""?L2:M2),i)}function V2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function j2(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",m=cg({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!m)return null;Object.assign(r,m.params),a.push({params:r,pathname:os([o,m.pathname]),pathnameBase:$2(os([o,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(o=os([o,m.pathnameBase]))}return a}function cg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=z2(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,g,m)=>{let{paramName:v,isOptional:T}=g;if(v==="*"){let R=u[m]||"";a=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const k=u[m];return T&&!k?f[v]=void 0:f[v]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function z2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ef(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function F2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ef(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Za(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const B2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,U2=t=>B2.test(t);function H2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Po(t):t,o;if(n)if(U2(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ef(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=Z0(n.substring(1),"/"):o=Z0(n,e)}else o=e;return{pathname:o,search:q2(i),hash:G2(r)}}function Z0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Bp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function W2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gy(t,e){let n=W2(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Zy(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Po(t):(r=$u({},t),gt(!r.pathname||!r.pathname.includes("?"),Bp("?","pathname","search",r)),gt(!r.pathname||!r.pathname.includes("#"),Bp("#","pathname","hash",r)),gt(!r.search||!r.search.includes("#"),Bp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let m=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;r.pathname=v.join("/")}u=m>=0?e[m]:"/"}let h=H2(r,u),f=a&&a!=="/"&&a.endsWith("/"),g=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}const os=t=>t.join("/").replace(/\/\/+/g,"/"),$2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,G2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Z2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JE=["post","put","patch","delete"];new Set(JE);const K2=["get",...JE];new Set(K2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qu.apply(this,arguments)}const Pf=O.createContext(null),eP=O.createContext(null),Pr=O.createContext(null),Sf=O.createContext(null),ks=O.createContext({outlet:null,matches:[],isDataRoute:!1}),tP=O.createContext(null);function Q2(t,e){let{relative:n}=e===void 0?{}:e;ll()||gt(!1);let{basename:i,navigator:r}=O.useContext(Pr),{hash:o,pathname:a,search:u}=If(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:os([i,a])),r.createHref({pathname:h,search:u,hash:o})}function ll(){return O.useContext(Sf)!=null}function So(){return ll()||gt(!1),O.useContext(Sf).location}function nP(t){O.useContext(Pr).static||O.useLayoutEffect(t)}function Cf(){let{isDataRoute:t}=O.useContext(ks);return t?uR():Y2()}function Y2(){ll()||gt(!1);let t=O.useContext(Pf),{basename:e,future:n,navigator:i}=O.useContext(Pr),{matches:r}=O.useContext(ks),{pathname:o}=So(),a=JSON.stringify(Gy(r,n.v7_relativeSplatPath)),u=O.useRef(!1);return nP(()=>{u.current=!0}),O.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let m=Zy(f,JSON.parse(a),o,g.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:os([e,m.pathname])),(g.replace?i.replace:i.push)(m,g.state,g)},[e,i,a,o,t])}function If(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(Pr),{matches:r}=O.useContext(ks),{pathname:o}=So(),a=JSON.stringify(Gy(r,i.v7_relativeSplatPath));return O.useMemo(()=>Zy(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function X2(t,e){return J2(t,e)}function J2(t,e,n,i){ll()||gt(!1);let{navigator:r}=O.useContext(Pr),{matches:o}=O.useContext(ks),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=So(),g;if(e){var m;let j=typeof e=="string"?Po(e):e;h==="/"||(m=j.pathname)!=null&&m.startsWith(h)||gt(!1),g=j}else g=f;let v=g.pathname||"/",T=v;if(h!=="/"){let j=h.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(j.length).join("/")}let k=I2(t,{pathname:T}),R=rR(k&&k.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:os([h,r.encodeLocation?r.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?h:os([h,r.encodeLocation?r.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,i);return e&&R?O.createElement(Sf.Provider,{value:{location:qu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Qr.Pop}},R):R}function eR(){let t=lR(),e=Z2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const tR=O.createElement(eR,null);class nR extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ks.Provider,{value:this.props.routeContext},O.createElement(tP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iR(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(Pf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ks.Provider,{value:e},i)}function rR(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let g=a.findIndex(m=>m.route.id&&(u==null?void 0:u[m.route.id])!==void 0);g>=0||gt(!1),a=a.slice(0,Math.min(a.length,g+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let g=0;g<a.length;g++){let m=a[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=g),m.route.id){let{loaderData:v,errors:T}=n,k=m.route.loader&&v[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||k){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((g,m,v)=>{let T,k=!1,R=null,j=null;n&&(T=u&&m.route.id?u[m.route.id]:void 0,R=m.route.errorElement||tR,h&&(f<0&&v===0?(cR("route-fallback"),k=!0,j=null):f===v&&(k=!0,j=m.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,v+1)),P=()=>{let C;return T?C=R:k?C=j:m.route.Component?C=O.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=g,O.createElement(iR,{match:m,routeContext:{outlet:g,matches:b,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?O.createElement(nR,{location:n.location,revalidation:n.revalidation,component:R,error:T,children:P(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):P()},null)}var iP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(iP||{}),rP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rP||{});function sR(t){let e=O.useContext(Pf);return e||gt(!1),e}function oR(t){let e=O.useContext(eP);return e||gt(!1),e}function aR(t){let e=O.useContext(ks);return e||gt(!1),e}function sP(t){let e=aR(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function lR(){var t;let e=O.useContext(tP),n=oR(),i=sP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function uR(){let{router:t}=sR(iP.UseNavigateStable),e=sP(rP.UseNavigateStable),n=O.useRef(!1);return nP(()=>{n.current=!0}),O.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,qu({fromRouteId:e},o)))},[t,e])}const K0={};function cR(t,e,n){K0[t]||(K0[t]=!0)}function hR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function oP(t){let{to:e,replace:n,state:i,relative:r}=t;ll()||gt(!1);let{future:o,static:a}=O.useContext(Pr),{matches:u}=O.useContext(ks),{pathname:h}=So(),f=Cf(),g=Zy(e,Gy(u,o.v7_relativeSplatPath),h,r==="path"),m=JSON.stringify(g);return O.useEffect(()=>f(JSON.parse(m),{replace:n,state:i,relative:r}),[f,m,r,n,i]),null}function Vr(t){gt(!1)}function dR(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Qr.Pop,navigator:o,static:a=!1,future:u}=t;ll()&&gt(!1);let h=e.replace(/^\/*/,"/"),f=O.useMemo(()=>({basename:h,navigator:o,static:a,future:qu({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=Po(i));let{pathname:g="/",search:m="",hash:v="",state:T=null,key:k="default"}=i,R=O.useMemo(()=>{let j=Za(g,h);return j==null?null:{location:{pathname:j,search:m,hash:v,state:T,key:k},navigationType:r}},[h,g,m,v,T,k,r]);return R==null?null:O.createElement(Pr.Provider,{value:f},O.createElement(Sf.Provider,{children:n,value:R}))}function fR(t){let{children:e,location:n}=t;return X2(hg(e),n)}new Promise(()=>{});function hg(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let o=[...e,r];if(i.type===O.Fragment){n.push.apply(n,hg(i.props.children,o));return}i.type!==Vr&&gt(!1),!i.props.index||!i.props.children||gt(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=hg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kd.apply(this,arguments)}function aP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function pR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mR(t,e){return t.button===0&&(!e||e==="_self")&&!pR(t)}const gR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_R="6";try{window.__reactRouterVersion=_R}catch{}const vR=O.createContext({isTransitioning:!1}),wR="startTransition",Q0=db[wR];function xR(t){let{basename:e,children:n,future:i,window:r}=t,o=O.useRef();o.current==null&&(o.current=P2({window:r,v5Compat:!0}));let a=o.current,[u,h]=O.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},g=O.useCallback(m=>{f&&Q0?Q0(()=>h(m)):h(m)},[h,f]);return O.useLayoutEffect(()=>a.listen(g),[a,g]),O.useEffect(()=>hR(i),[i]),O.createElement(dR,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const TR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ER=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PR=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:g,viewTransition:m}=e,v=aP(e,gR),{basename:T}=O.useContext(Pr),k,R=!1;if(typeof f=="string"&&ER.test(f)&&(k=f,TR))try{let C=new URL(window.location.href),F=f.startsWith("//")?new URL(C.protocol+f):new URL(f),q=Za(F.pathname,T);F.origin===C.origin&&q!=null?f=q+F.search+F.hash:R=!0}catch{}let j=Q2(f,{relative:r}),b=IR(f,{replace:a,state:u,target:h,preventScrollReset:g,relative:r,viewTransition:m});function P(C){i&&i(C),C.defaultPrevented||b(C)}return O.createElement("a",kd({},v,{href:k||j,onClick:R||o?i:P,ref:n,target:h}))}),SR=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:g}=e,m=aP(e,yR),v=If(h,{relative:m.relative}),T=So(),k=O.useContext(eP),{navigator:R,basename:j}=O.useContext(Pr),b=k!=null&&AR(v)&&f===!0,P=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,C=T.pathname,F=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;r||(C=C.toLowerCase(),F=F?F.toLowerCase():null,P=P.toLowerCase()),F&&j&&(F=Za(F,j)||F);const q=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let B=C===P||!a&&C.startsWith(P)&&C.charAt(q)==="/",A=F!=null&&(F===P||!a&&F.startsWith(P)&&F.charAt(P.length)==="/"),S={isActive:B,isPending:A,isTransitioning:b},N=B?i:void 0,D;typeof o=="function"?D=o(S):D=[o,B?"active":null,A?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(S):u;return O.createElement(PR,kd({},m,{"aria-current":N,className:D,ref:n,style:V,to:h,viewTransition:f}),typeof g=="function"?g(S):g)});var dg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dg||(dg={}));var Y0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Y0||(Y0={}));function CR(t){let e=O.useContext(Pf);return e||gt(!1),e}function IR(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=Cf(),f=So(),g=If(t,{relative:a});return O.useCallback(m=>{if(mR(m,n)){m.preventDefault();let v=i!==void 0?i:bd(f)===bd(g);h(t,{replace:v,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,g,i,r,n,t,o,a,u])}function AR(t,e){e===void 0&&(e={});let n=O.useContext(vR);n==null&&gt(!1);let{basename:i}=CR(dg.useViewTransitionState),r=If(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Za(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Za(n.nextLocation.pathname,i)||n.nextLocation.pathname;return cg(r.pathname,a)!=null||cg(r.pathname,o)!=null}const lP=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Af=O.createContext({}),bf=O.createContext(null),kf=typeof document<"u",Ky=kf?O.useLayoutEffect:O.useEffect,uP=O.createContext({strict:!1}),Qy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),bR="framerAppearId",cP="data-"+Qy(bR);function kR(t,e,n,i){const{visualElement:r}=O.useContext(Af),o=O.useContext(uP),a=O.useContext(bf),u=O.useContext(lP).reducedMotion,h=O.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;O.useInsertionEffect(()=>{f&&f.update(n,a)});const g=O.useRef(!!(n[cP]&&!window.HandoffComplete));return Ky(()=>{f&&(f.render(),g.current&&f.animationState&&f.animationState.animateChanges())}),O.useEffect(()=>{f&&(f.updateFeatures(),!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(g.current=!1,window.HandoffComplete=!0))}),f}function Pa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function RR(t,e,n){return O.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Pa(n)&&(n.current=i))},[e])}function Gu(t){return typeof t=="string"||Array.isArray(t)}function Rf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Yy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xy=["initial",...Yy];function Nf(t){return Rf(t.animate)||Xy.some(e=>Gu(t[e]))}function hP(t){return!!(Nf(t)||t.variants)}function NR(t,e){if(Nf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Gu(n)?n:void 0,animate:Gu(i)?i:void 0}}return t.inherit!==!1?e:{}}function LR(t){const{initial:e,animate:n}=NR(t,O.useContext(Af));return O.useMemo(()=>({initial:e,animate:n}),[X0(e),X0(n)])}function X0(t){return Array.isArray(t)?t.join(" "):t}const J0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zu={};for(const t in J0)Zu[t]={isEnabled:e=>J0[t].some(n=>!!e[n])};function MR(t){for(const e in t)Zu[e]={...Zu[e],...t[e]}}const Jy=O.createContext({}),dP=O.createContext({}),OR=Symbol.for("motionComponentSymbol");function DR({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&MR(t);function o(u,h){let f;const g={...O.useContext(lP),...u,layoutId:VR(u)},{isStatic:m}=g,v=LR(u),T=i(u,m);if(!m&&kf){v.visualElement=kR(r,T,g,e);const k=O.useContext(dP),R=O.useContext(uP).strict;v.visualElement&&(f=v.visualElement.loadFeatures(g,R,t,k))}return O.createElement(Af.Provider,{value:v},f&&v.visualElement?O.createElement(f,{visualElement:v.visualElement,...g}):null,n(r,u,RR(T,v.visualElement,h),T,m,v.visualElement))}const a=O.forwardRef(o);return a[OR]=r,a}function VR({layoutId:t}){const e=O.useContext(Jy).id;return e&&t!==void 0?e+"-"+t:t}function jR(t){function e(i,r={}){return DR(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const zR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function e_(t){return typeof t!="string"||t.includes("-")?!1:!!(zR.indexOf(t)>-1||/[A-Z]/.test(t))}const Rd={};function FR(t){Object.assign(Rd,t)}const hc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Co=new Set(hc);function fP(t,{layout:e,layoutId:n}){return Co.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Rd[t]||t==="opacity")}const Sn=t=>!!(t&&t.getVelocity),BR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},UR=hc.length;function HR(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<UR;a++){const u=hc[a];if(t[u]!==void 0){const h=BR[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const pP=t=>e=>typeof e=="string"&&e.startsWith(t),mP=pP("--"),fg=pP("var(--"),WR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,$R=(t,e)=>e&&typeof t=="number"?e.transform(t):t,_s=(t,e,n)=>Math.min(Math.max(n,t),e),Io={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yu={...Io,transform:t=>_s(0,1,t)},xh={...Io,default:1},_u=t=>Math.round(t*1e5)/1e5,Lf=/(-)?([\d]*\.?[\d])+/g,gP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,qR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function dc(t){return typeof t=="string"}const fc=t=>({test:e=>dc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),jr=fc("deg"),Ni=fc("%"),we=fc("px"),GR=fc("vh"),ZR=fc("vw"),ew={...Ni,parse:t=>Ni.parse(t)/100,transform:t=>Ni.transform(t*100)},tw={...Io,transform:Math.round},yP={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,size:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,rotate:jr,rotateX:jr,rotateY:jr,rotateZ:jr,scale:xh,scaleX:xh,scaleY:xh,scaleZ:xh,skew:jr,skewX:jr,skewY:jr,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:yu,originX:ew,originY:ew,originZ:we,zIndex:tw,fillOpacity:yu,strokeOpacity:yu,numOctaves:tw};function t_(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,g=!0;for(const m in e){const v=e[m];if(mP(m)){o[m]=v;continue}const T=yP[m],k=$R(v,T);if(Co.has(m)){if(h=!0,a[m]=k,!g)continue;v!==(T.default||0)&&(g=!1)}else m.startsWith("origin")?(f=!0,u[m]=k):r[m]=k}if(e.transform||(h||i?r.transform=HR(t.transform,n,g,i):r.transform&&(r.transform="none")),f){const{originX:m="50%",originY:v="50%",originZ:T=0}=u;r.transformOrigin=`${m} ${v} ${T}`}}const n_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _P(t,e,n){for(const i in e)!Sn(e[i])&&!fP(i,n)&&(t[i]=e[i])}function KR({transformTemplate:t},e,n){return O.useMemo(()=>{const i=n_();return t_(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function QR(t,e,n){const i=t.style||{},r={};return _P(r,i,t),Object.assign(r,KR(t,e,n)),t.transformValues?t.transformValues(r):r}function YR(t,e,n){const i={},r=QR(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const XR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||XR.has(t)}let vP=t=>!Nd(t);function JR(t){t&&(vP=e=>e.startsWith("on")?!Nd(e):t(e))}try{JR(require("@emotion/is-prop-valid").default)}catch{}function eN(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(vP(r)||n===!0&&Nd(r)||!e&&!Nd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function nw(t,e,n){return typeof t=="string"?t:we.transform(e+n*t)}function tN(t,e,n){const i=nw(e,t.x,t.width),r=nw(n,t.y,t.height);return`${i} ${r}`}const nN={offset:"stroke-dashoffset",array:"stroke-dasharray"},iN={offset:"strokeDashoffset",array:"strokeDasharray"};function rN(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?nN:iN;t[o.offset]=we.transform(-i);const a=we.transform(e),u=we.transform(n);t[o.array]=`${a} ${u}`}function i_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},g,m,v){if(t_(t,f,g,v),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:k,dimensions:R}=t;T.transform&&(R&&(k.transform=T.transform),delete T.transform),R&&(r!==void 0||o!==void 0||k.transform)&&(k.transformOrigin=tN(R,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&rN(T,a,u,h,!1)}const wP=()=>({...n_(),attrs:{}}),r_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sN(t,e,n,i){const r=O.useMemo(()=>{const o=wP();return i_(o,e,{enableHardwareAcceleration:!1},r_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};_P(o,t.style,t),r.style={...o,...r.style}}return r}function oN(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(e_(n)?sN:YR)(i,o,a,n),g={...eN(i,typeof n=="string",t),...h,ref:r},{children:m}=i,v=O.useMemo(()=>Sn(m)?m.get():m,[m]);return O.createElement(n,{...g,children:v})}}function xP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const TP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EP(t,e,n,i){xP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(TP.has(r)?r:Qy(r),e.attrs[r])}function s_(t,e){const{style:n}=t,i={};for(const r in n)(Sn(n[r])||e.style&&Sn(e.style[r])||fP(r,t))&&(i[r]=n[r]);return i}function PP(t,e){const n=s_(t,e);for(const i in t)if(Sn(t[i])||Sn(e[i])){const r=hc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function o_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function SP(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ld=t=>Array.isArray(t),aN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),lN=t=>Ld(t)?t[t.length-1]||0:t;function qh(t){const e=Sn(t)?t.get():t;return aN(e)?e.toValue():e}function uN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:cN(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const CP=t=>(e,n)=>{const i=O.useContext(Af),r=O.useContext(bf),o=()=>uN(t,e,i,r);return n?o():SP(o)};function cN(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=qh(o[v]);let{initial:a,animate:u}=t;const h=Nf(t),f=hP(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||a===!1;const m=g?u:a;return m&&typeof m!="boolean"&&!Rf(m)&&(Array.isArray(m)?m:[m]).forEach(T=>{const k=o_(t,T);if(!k)return;const{transitionEnd:R,transition:j,...b}=k;for(const P in b){let C=b[P];if(Array.isArray(C)){const F=g?C.length-1:0;C=C[F]}C!==null&&(r[P]=C)}for(const P in R)r[P]=R[P]}),r}const St=t=>t;class iw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function hN(t){let e=new iw,n=new iw,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,g=!1)=>{const m=g&&r,v=m?e:n;return f&&a.add(h),v.add(h)&&m&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const g=e.order[f];g(h),a.has(g)&&(u.schedule(g),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const Th=["prepare","read","update","preRender","render","postRender"],dN=40;function fN(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=Th.reduce((m,v)=>(m[v]=hN(()=>n=!0),m),{}),a=m=>o[m].process(r),u=()=>{const m=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(m-r.timestamp,dN),1),r.timestamp=m,r.isProcessing=!0,Th.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:Th.reduce((m,v)=>{const T=o[v];return m[v]=(k,R=!1,j=!1)=>(n||h(),T.schedule(k,R,j)),m},{}),cancel:m=>Th.forEach(v=>o[v].cancel(m)),state:r,steps:o}}const{schedule:rt,cancel:yr,state:Jt,steps:Up}=fN(typeof requestAnimationFrame<"u"?requestAnimationFrame:St,!0),pN={useVisualState:CP({scrapeMotionValuesFromProps:PP,createRenderState:wP,onMount:(t,e,{renderState:n,latestValues:i})=>{rt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),rt.render(()=>{i_(n,i,{enableHardwareAcceleration:!1},r_(e.tagName),t.transformTemplate),EP(e,n)})}})},mN={useVisualState:CP({scrapeMotionValuesFromProps:s_,createRenderState:n_})};function gN(t,{forwardMotionProps:e=!1},n,i){return{...e_(t)?pN:mN,preloadedFeatures:n,useRender:oN(e),createVisualElement:i,Component:t}}function or(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const IP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Mf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const yN=t=>e=>IP(e)&&t(e,Mf(e));function cr(t,e,n,i){return or(t,e,yN(n),i)}const _N=(t,e)=>n=>e(t(n)),as=(...t)=>t.reduce(_N);function AP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const rw=AP("dragHorizontal"),sw=AP("dragVertical");function bP(t){let e=!1;if(t==="y")e=sw();else if(t==="x")e=rw();else{const n=rw(),i=sw();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function kP(){const t=bP(!0);return t?(t(),!1):!0}class Rs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ow(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||kP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&rt.update(()=>u[i](o,a))};return cr(t.current,n,r,{passive:!t.getProps()[i]})}class vN extends Rs{mount(){this.unmount=as(ow(this.node,!0),ow(this.node,!1))}unmount(){}}class wN extends Rs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=as(or(this.node.current,"focus",()=>this.onFocus()),or(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const RP=(t,e)=>e?t===e?!0:RP(t,e.parentElement):!1;function Hp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Mf(n))}class xN extends Rs{constructor(){super(...arguments),this.removeStartListeners=St,this.removeEndListeners=St,this.removeAccessibleListeners=St,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=cr(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:g,globalTapTarget:m}=this.node.getProps();rt.update(()=>{!m&&!RP(this.node.current,u.target)?g&&g(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=cr(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=as(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Hp("up",(h,f)=>{const{onTap:g}=this.node.getProps();g&&rt.update(()=>g(h,f))})};this.removeEndListeners(),this.removeEndListeners=or(this.node.current,"keyup",a),Hp("down",(u,h)=>{this.startPress(u,h)})},n=or(this.node.current,"keydown",e),i=()=>{this.isPressing&&Hp("cancel",(o,a)=>this.cancelPress(o,a))},r=or(this.node.current,"blur",i);this.removeAccessibleListeners=as(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&rt.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!kP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&rt.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=cr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=or(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=as(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const pg=new WeakMap,Wp=new WeakMap,TN=t=>{const e=pg.get(t.target);e&&e(t)},EN=t=>{t.forEach(TN)};function PN({root:t,...e}){const n=t||document;Wp.has(n)||Wp.set(n,{});const i=Wp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(EN,{root:t,...e})),i[r]}function SN(t,e,n){const i=PN(e);return pg.set(t,n),i.observe(t),()=>{pg.delete(t),i.unobserve(t)}}const CN={some:0,all:1};class IN extends Rs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:CN[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:m}=this.node.getProps(),v=f?g:m;v&&v(h)};return SN(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(AN(e,n))&&this.startObserver()}unmount(){}}function AN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bN={inView:{Feature:IN},tap:{Feature:xN},focus:{Feature:wN},hover:{Feature:vN}};function NP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function kN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function RN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Of(t,e,n){const i=t.getProps();return o_(i,e,n!==void 0?n:i.custom,kN(t),RN(t))}let a_=St;const ao=t=>t*1e3,hr=t=>t/1e3,NN={current:!1},LP=t=>Array.isArray(t)&&typeof t[0]=="number";function MP(t){return!!(!t||typeof t=="string"&&OP[t]||LP(t)||Array.isArray(t)&&t.every(MP))}const iu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,OP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:iu([0,.65,.55,1]),circOut:iu([.55,0,1,.45]),backIn:iu([.31,.01,.66,-.59]),backOut:iu([.33,1.53,.69,.99])};function DP(t){if(t)return LP(t)?iu(t):Array.isArray(t)?t.map(DP):OP[t]}function LN(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const g=DP(u);return Array.isArray(g)&&(f.easing=g),t.animate(f,{delay:i,duration:r,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function MN(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const VP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ON=1e-7,DN=12;function VN(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=VP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>ON&&++u<DN);return a}function pc(t,e,n,i){if(t===e&&n===i)return St;const r=o=>VN(o,0,1,t,n);return o=>o===0||o===1?o:VP(r(o),e,i)}const jN=pc(.42,0,1,1),zN=pc(0,0,.58,1),jP=pc(.42,0,.58,1),FN=t=>Array.isArray(t)&&typeof t[0]!="number",zP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,FP=t=>e=>1-t(1-e),l_=t=>1-Math.sin(Math.acos(t)),BP=FP(l_),BN=zP(l_),UP=pc(.33,1.53,.69,.99),u_=FP(UP),UN=zP(u_),HN=t=>(t*=2)<1?.5*u_(t):.5*(2-Math.pow(2,-10*(t-1))),WN={linear:St,easeIn:jN,easeInOut:jP,easeOut:zN,circIn:l_,circInOut:BN,circOut:BP,backIn:u_,backInOut:UN,backOut:UP,anticipate:HN},aw=t=>{if(Array.isArray(t)){a_(t.length===4);const[e,n,i,r]=t;return pc(e,n,i,r)}else if(typeof t=="string")return WN[t];return t},c_=(t,e)=>n=>!!(dc(n)&&qR.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),HP=(t,e,n)=>i=>{if(!dc(i))return i;const[r,o,a,u]=i.match(Lf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},$N=t=>_s(0,255,t),$p={...Io,transform:t=>Math.round($N(t))},io={test:c_("rgb","red"),parse:HP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+$p.transform(t)+", "+$p.transform(e)+", "+$p.transform(n)+", "+_u(yu.transform(i))+")"};function qN(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const mg={test:c_("#"),parse:qN,transform:io.transform},Sa={test:c_("hsl","hue"),parse:HP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ni.transform(_u(e))+", "+Ni.transform(_u(n))+", "+_u(yu.transform(i))+")"},un={test:t=>io.test(t)||mg.test(t)||Sa.test(t),parse:t=>io.test(t)?io.parse(t):Sa.test(t)?Sa.parse(t):mg.parse(t),transform:t=>dc(t)?t:t.hasOwnProperty("red")?io.transform(t):Sa.transform(t)},pt=(t,e,n)=>-n*t+n*e+t;function qp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function GN({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=qp(h,u,t+1/3),o=qp(h,u,t),a=qp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Gp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},ZN=[mg,io,Sa],KN=t=>ZN.find(e=>e.test(t));function lw(t){const e=KN(t);let n=e.parse(t);return e===Sa&&(n=GN(n)),n}const WP=(t,e)=>{const n=lw(t),i=lw(e),r={...n};return o=>(r.red=Gp(n.red,i.red,o),r.green=Gp(n.green,i.green,o),r.blue=Gp(n.blue,i.blue,o),r.alpha=pt(n.alpha,i.alpha,o),io.transform(r))};function QN(t){var e,n;return isNaN(t)&&dc(t)&&(((e=t.match(Lf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(gP))===null||n===void 0?void 0:n.length)||0)>0}const $P={regex:WR,countKey:"Vars",token:"${v}",parse:St},qP={regex:gP,countKey:"Colors",token:"${c}",parse:un.parse},GP={regex:Lf,countKey:"Numbers",token:"${n}",parse:Io.parse};function Zp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Md(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Zp(n,$P),Zp(n,qP),Zp(n,GP),n}function ZP(t){return Md(t).values}function KP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Md(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace($P.token,a[h]):h<i+n?u=u.replace(qP.token,un.transform(a[h])):u=u.replace(GP.token,_u(a[h]));return u}}const YN=t=>typeof t=="number"?0:t;function XN(t){const e=ZP(t);return KP(t)(e.map(YN))}const vs={test:QN,parse:ZP,createTransformer:KP,getAnimatableNone:XN},QP=(t,e)=>n=>`${n>0?e:t}`;function YP(t,e){return typeof t=="number"?n=>pt(t,e,n):un.test(t)?WP(t,e):t.startsWith("var(")?QP(t,e):JP(t,e)}const XP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>YP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},JN=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=YP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},JP=(t,e)=>{const n=vs.createTransformer(e),i=Md(t),r=Md(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?as(XP(i.values,r.values),n):QP(t,e)},Ku=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},uw=(t,e)=>n=>pt(t,e,n);function eL(t){return typeof t=="number"?uw:typeof t=="string"?un.test(t)?WP:JP:Array.isArray(t)?XP:typeof t=="object"?JN:uw}function tL(t,e,n){const i=[],r=n||eL(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||St:e;u=as(h,u)}i.push(u)}return i}function eS(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(a_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=tL(e,i,r),u=a.length,h=f=>{let g=0;if(u>1)for(;g<t.length-2&&!(f<t[g+1]);g++);const m=Ku(t[g],t[g+1],f);return a[g](m)};return n?f=>h(_s(t[0],t[o-1],f)):h}function nL(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Ku(0,e,i);t.push(pt(n,1,r))}}function iL(t){const e=[0];return nL(e,t.length-1),e}function rL(t,e){return t.map(n=>n*e)}function sL(t,e){return t.map(()=>e||jP).splice(0,t.length-1)}function Od({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=FN(i)?i.map(aw):aw(i),o={done:!1,value:e[0]},a=rL(n&&n.length===e.length?n:iL(e),t),u=eS(a,e,{ease:Array.isArray(r)?r:sL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function tS(t,e){return e?t*(1e3/e):0}const oL=5;function nS(t,e,n){const i=Math.max(e-oL,0);return tS(n-t(i),e-i)}const Kp=.001,aL=.01,lL=10,uL=.05,cL=1;function hL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=_s(uL,cL,a),t=_s(aL,lL,hr(t)),a<1?(r=f=>{const g=f*a,m=g*t,v=g-n,T=gg(f,a),k=Math.exp(-m);return Kp-v/T*k},o=f=>{const m=f*a*t,v=m*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-m),R=gg(Math.pow(f,2),a);return(-r(f)+Kp>0?-1:1)*((v-T)*k)/R}):(r=f=>{const g=Math.exp(-f*t),m=(f-n)*t+1;return-Kp+g*m},o=f=>{const g=Math.exp(-f*t),m=(n-f)*(t*t);return g*m});const u=5/t,h=fL(r,o,u);if(t=ao(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const dL=12;function fL(t,e,n){let i=n;for(let r=1;r<dL;r++)i=i-t(i)/e(i);return i}function gg(t,e){return t*Math.sqrt(1-e*e)}const pL=["duration","bounce"],mL=["stiffness","damping","mass"];function cw(t,e){return e.some(n=>t[n]!==void 0)}function gL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!cw(t,mL)&&cw(t,pL)){const n=hL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function iS({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:g,velocity:m,isResolvedFromDuration:v}=gL({...i,velocity:-hr(i.velocity||0)}),T=m||0,k=h/(2*Math.sqrt(u*f)),R=o-r,j=hr(Math.sqrt(u/f)),b=Math.abs(R)<5;n||(n=b?.01:2),e||(e=b?.005:.5);let P;if(k<1){const C=gg(j,k);P=F=>{const q=Math.exp(-k*j*F);return o-q*((T+k*j*R)/C*Math.sin(C*F)+R*Math.cos(C*F))}}else if(k===1)P=C=>o-Math.exp(-j*C)*(R+(T+j*R)*C);else{const C=j*Math.sqrt(k*k-1);P=F=>{const q=Math.exp(-k*j*F),B=Math.min(C*F,300);return o-q*((T+k*j*R)*Math.sinh(B)+C*R*Math.cosh(B))/C}}return{calculatedDuration:v&&g||null,next:C=>{const F=P(C);if(v)a.done=C>=g;else{let q=T;C!==0&&(k<1?q=nS(P,C,F):q=0);const B=Math.abs(q)<=n,A=Math.abs(o-F)<=e;a.done=B&&A}return a.value=a.done?o:F,a}}}function hw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:g}){const m=t[0],v={done:!1,value:m},T=S=>u!==void 0&&S<u||h!==void 0&&S>h,k=S=>u===void 0?h:h===void 0||Math.abs(u-S)<Math.abs(h-S)?u:h;let R=n*e;const j=m+R,b=a===void 0?j:a(j);b!==j&&(R=b-m);const P=S=>-R*Math.exp(-S/i),C=S=>b+P(S),F=S=>{const N=P(S),D=C(S);v.done=Math.abs(N)<=f,v.value=v.done?b:D};let q,B;const A=S=>{T(v.value)&&(q=S,B=iS({keyframes:[v.value,k(v.value)],velocity:nS(C,S,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:g}))};return A(0),{calculatedDuration:null,next:S=>{let N=!1;return!B&&q===void 0&&(N=!0,F(S),A(S)),q!==void 0&&S>q?B.next(S-q):(!N&&F(S),v)}}}const yL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>rt.update(e,!0),stop:()=>yr(e),now:()=>Jt.isProcessing?Jt.timestamp:performance.now()}},dw=2e4;function fw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<dw;)e+=n,i=t.next(e);return e>=dw?1/0:e}const _L={decay:hw,inertia:hw,tween:Od,keyframes:Od,spring:iS};function Dd({autoplay:t=!0,delay:e=0,driver:n=yL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:g,onUpdate:m,...v}){let T=1,k=!1,R,j;const b=()=>{j=new Promise(ne=>{R=ne})};b();let P;const C=_L[r]||Od;let F;C!==Od&&typeof i[0]!="number"&&(F=eS([0,100],i,{clamp:!1}),i=[0,100]);const q=C({...v,keyframes:i});let B;u==="mirror"&&(B=C({...v,keyframes:[...i].reverse(),velocity:-(v.velocity||0)}));let A="idle",S=null,N=null,D=null;q.calculatedDuration===null&&o&&(q.calculatedDuration=fw(q));const{calculatedDuration:V}=q;let U=1/0,M=1/0;V!==null&&(U=V+a,M=U*(o+1)-a);let ee=0;const We=ne=>{if(N===null)return;T>0&&(N=Math.min(N,ne)),T<0&&(N=Math.min(ne-M/T,N)),S!==null?ee=S:ee=Math.round(ne-N)*T;const Ce=ee-e*(T>=0?1:-1),tt=T>=0?Ce<0:Ce>M;ee=Math.max(Ce,0),A==="finished"&&S===null&&(ee=M);let Me=ee,Re=q;if(o){const he=Math.min(ee,M)/U;let _e=Math.floor(he),Ie=he%1;!Ie&&he>=1&&(Ie=1),Ie===1&&_e--,_e=Math.min(_e,o+1),!!(_e%2)&&(u==="reverse"?(Ie=1-Ie,a&&(Ie-=a/U)):u==="mirror"&&(Re=B)),Me=_s(0,1,Ie)*U}const fe=tt?{done:!1,value:i[0]}:Re.next(Me);F&&(fe.value=F(fe.value));let{done:dt}=fe;!tt&&V!==null&&(dt=T>=0?ee>=M:ee<=0);const re=S===null&&(A==="finished"||A==="running"&&dt);return m&&m(fe.value),re&&Z(),fe},ge=()=>{P&&P.stop(),P=void 0},Xe=()=>{A="idle",ge(),R(),b(),N=D=null},Z=()=>{A="finished",g&&g(),ge(),R()},ce=()=>{if(k)return;P||(P=n(We));const ne=P.now();h&&h(),S!==null?N=ne-S:(!N||A==="finished")&&(N=ne),A==="finished"&&b(),D=N,S=null,A="running",P.start()};t&&ce();const J={then(ne,Ce){return j.then(ne,Ce)},get time(){return hr(ee)},set time(ne){ne=ao(ne),ee=ne,S!==null||!P||T===0?S=ne:N=P.now()-ne/T},get duration(){const ne=q.calculatedDuration===null?fw(q):q.calculatedDuration;return hr(ne)},get speed(){return T},set speed(ne){ne===T||!P||(T=ne,J.time=hr(ee))},get state(){return A},play:ce,pause:()=>{A="paused",S=ee},stop:()=>{k=!0,A!=="idle"&&(A="idle",f&&f(),Xe())},cancel:()=>{D!==null&&We(D),Xe()},complete:()=>{A="finished"},sample:ne=>(N=0,We(ne))};return J}function vL(t){let e;return()=>(e===void 0&&(e=t()),e)}const wL=vL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Eh=10,TL=2e4,EL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!MP(e.ease);function PL(t,e,{onUpdate:n,onComplete:i,...r}){if(!(wL()&&xL.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const g=()=>{h=new Promise(C=>{u=C})};g();let{keyframes:m,duration:v=300,ease:T,times:k}=r;if(EL(e,r)){const C=Dd({...r,repeat:0,delay:0});let F={done:!1,value:m[0]};const q=[];let B=0;for(;!F.done&&B<TL;)F=C.sample(B),q.push(F.value),B+=Eh;k=void 0,m=q,v=B-Eh,T="linear"}const R=LN(t.owner.current,e,m,{...r,duration:v,ease:T,times:k}),j=()=>{f=!1,R.cancel()},b=()=>{f=!0,rt.update(j),u(),g()};return R.onfinish=()=>{f||(t.set(MN(m,r)),i&&i(),b())},{then(C,F){return h.then(C,F)},attachTimeline(C){return R.timeline=C,R.onfinish=null,St},get time(){return hr(R.currentTime||0)},set time(C){R.currentTime=ao(C)},get speed(){return R.playbackRate},set speed(C){R.playbackRate=C},get duration(){return hr(v)},play:()=>{a||(R.play(),yr(j))},pause:()=>R.pause(),stop:()=>{if(a=!0,R.playState==="idle")return;const{currentTime:C}=R;if(C){const F=Dd({...r,autoplay:!1});t.setWithVelocity(F.sample(C-Eh).value,F.sample(C).value,Eh)}b()},complete:()=>{f||R.finish()},cancel:b}}function SL({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:St,pause:St,stop:St,then:o=>(o(),Promise.resolve()),cancel:St,complete:St});return e?Dd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const CL={type:"spring",stiffness:500,damping:25,restSpeed:10},IL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),AL={type:"keyframes",duration:.8},bL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kL=(t,{keyframes:e})=>e.length>2?AL:Co.has(t)?t.startsWith("scale")?IL(e[1]):CL:bL,yg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(vs.test(e)||e==="0")&&!e.startsWith("url(")),RL=new Set(["brightness","contrast","saturate","opacity"]);function NL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Lf)||[];if(!i)return t;const r=n.replace(i,"");let o=RL.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const LL=/([a-z-]*)\(.*?\)/g,_g={...vs,getAnimatableNone:t=>{const e=t.match(LL);return e?e.map(NL).join(" "):t}},ML={...yP,color:un,backgroundColor:un,outlineColor:un,fill:un,stroke:un,borderColor:un,borderTopColor:un,borderRightColor:un,borderBottomColor:un,borderLeftColor:un,filter:_g,WebkitFilter:_g},h_=t=>ML[t];function rS(t,e){let n=h_(t);return n!==_g&&(n=vs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const sS=t=>/^0[^.\s]+$/.test(t);function OL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||sS(t)}function DL(t,e,n,i){const r=yg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),OL(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const g=h[f];o[g]=rS(e,u)}return o}function VL({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...g}){return!!Object.keys(g).length}function d_(t,e){return t[e]||t.default||t}const jL={skipAnimations:!1},f_=(t,e,n,i={})=>r=>{const o=d_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-ao(a);const h=DL(e,t,n,o),f=h[0],g=h[h.length-1],m=yg(t,f),v=yg(t,g);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:k=>{e.set(k),o.onUpdate&&o.onUpdate(k)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(VL(o)||(T={...T,...kL(t,T)}),T.duration&&(T.duration=ao(T.duration)),T.repeatDelay&&(T.repeatDelay=ao(T.repeatDelay)),!m||!v||NN.current||o.type===!1||jL.skipAnimations)return SL(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const k=PL(e,t,T);if(k)return k}return Dd(T)};function Vd(t){return!!(Sn(t)&&t.add)}const oS=t=>/^\-?\d*\.?\d+$/.test(t);function p_(t,e){t.indexOf(e)===-1&&t.push(e)}function m_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class g_{constructor(){this.subscriptions=[]}add(e){return p_(this.subscriptions,e),()=>m_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zL=t=>!isNaN(parseFloat(t));class FL{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Jt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,rt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>rt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=zL(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new g_);const i=this.events[e].add(n);return e==="change"?()=>{i(),rt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?tS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ka(t,e){return new FL(t,e)}const aS=t=>e=>e.test(t),BL={test:t=>t==="auto",parse:t=>t},lS=[Io,we,Ni,jr,ZR,GR,BL],Kl=t=>lS.find(aS(t)),UL=[...lS,un,vs],HL=t=>UL.find(aS(t));function WL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ka(n))}function $L(t,e){const n=Of(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=lN(o[a]);WL(t,a,u)}}function qL(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let g=null;Array.isArray(f)&&(g=f[0]),g===null&&(g=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),g!=null&&(typeof g=="string"&&(oS(g)||sS(g))?g=parseFloat(g):!HL(g)&&vs.test(f)&&(g=rS(h,f)),t.addValue(h,Ka(g,{owner:t})),n[h]===void 0&&(n[h]=g),g!==null&&t.setBaseTarget(h,g))}}function GL(t,e){return e?(e[t]||e.default||e).from:void 0}function ZL(t,e,n){const i={};for(const r in t){const o=GL(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function KL({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function QL(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function uS(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],g=r&&t.animationState&&t.animationState.getState()[r];for(const m in u){const v=t.getValue(m),T=u[m];if(!v||T===void 0||g&&KL(g,m))continue;const k={delay:n,elapsed:0,...d_(o||{},m)};if(window.HandoffAppearAnimations){const b=t.getProps()[cP];if(b){const P=window.HandoffAppearAnimations(b,m,v,rt);P!==null&&(k.elapsed=P,k.isHandoff=!0)}}let R=!k.isHandoff&&!QL(v,T);if(k.type==="spring"&&(v.getVelocity()||k.velocity)&&(R=!1),v.animation&&(R=!1),R)continue;v.start(f_(m,v,T,t.shouldReduceMotion&&Co.has(m)?{type:!1}:k));const j=v.animation;Vd(h)&&(h.add(m),j.then(()=>h.remove(m))),f.push(j)}return a&&Promise.all(f).then(()=>{a&&$L(t,a)}),f}function vg(t,e,n={}){const i=Of(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(uS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:m}=r;return YL(t,e,f+h,g,m,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function YL(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(XL).forEach((f,g)=>{f.notify("AnimationStart",e),a.push(vg(f,e,{...o,delay:n+h(g)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function XL(t,e){return t.sortNodePosition(e)}function JL(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>vg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=vg(t,e,n);else{const r=typeof e=="function"?Of(t,e,n.custom):e;i=Promise.all(uS(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const eM=[...Yy].reverse(),tM=Yy.length;function nM(t){return e=>Promise.all(e.map(({animation:n,options:i})=>JL(t,n,i)))}function iM(t){let e=nM(t);const n=sM();let i=!0;const r=(h,f)=>{const g=Of(t,f);if(g){const{transition:m,transitionEnd:v,...T}=g;h={...h,...T,...v}}return h};function o(h){e=h(t)}function a(h,f){const g=t.getProps(),m=t.getVariantContext(!0)||{},v=[],T=new Set;let k={},R=1/0;for(let b=0;b<tM;b++){const P=eM[b],C=n[P],F=g[P]!==void 0?g[P]:m[P],q=Gu(F),B=P===f?C.isActive:null;B===!1&&(R=b);let A=F===m[P]&&F!==g[P]&&q;if(A&&i&&t.manuallyAnimateOnMount&&(A=!1),C.protectedKeys={...k},!C.isActive&&B===null||!F&&!C.prevProp||Rf(F)||typeof F=="boolean")continue;let N=rM(C.prevProp,F)||P===f&&C.isActive&&!A&&q||b>R&&q,D=!1;const V=Array.isArray(F)?F:[F];let U=V.reduce(r,{});B===!1&&(U={});const{prevResolvedValues:M={}}=C,ee={...M,...U},We=ge=>{N=!0,T.has(ge)&&(D=!0,T.delete(ge)),C.needsAnimating[ge]=!0};for(const ge in ee){const Xe=U[ge],Z=M[ge];if(k.hasOwnProperty(ge))continue;let ce=!1;Ld(Xe)&&Ld(Z)?ce=!NP(Xe,Z):ce=Xe!==Z,ce?Xe!==void 0?We(ge):T.add(ge):Xe!==void 0&&T.has(ge)?We(ge):C.protectedKeys[ge]=!0}C.prevProp=F,C.prevResolvedValues=U,C.isActive&&(k={...k,...U}),i&&t.blockInitialAnimation&&(N=!1),N&&(!A||D)&&v.push(...V.map(ge=>({animation:ge,options:{type:P,...h}})))}if(T.size){const b={};T.forEach(P=>{const C=t.getBaseTarget(P);C!==void 0&&(b[P]=C)}),v.push({animation:b})}let j=!!v.length;return i&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(j=!1),i=!1,j?e(v):Promise.resolve()}function u(h,f,g){var m;if(n[h].isActive===f)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(T=>{var k;return(k=T.animationState)===null||k===void 0?void 0:k.setActive(h,f)}),n[h].isActive=f;const v=a(g,h);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function rM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!NP(e,t):!1}function qs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sM(){return{animate:qs(!0),whileInView:qs(),whileHover:qs(),whileTap:qs(),whileDrag:qs(),whileFocus:qs(),exit:qs()}}class oM extends Rs{constructor(e){super(e),e.animationState||(e.animationState=iM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Rf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let aM=0;class lM extends Rs{constructor(){super(...arguments),this.id=aM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const uM={animation:{Feature:oM},exit:{Feature:lM}},pw=(t,e)=>Math.abs(t-e);function cM(t,e){const n=pw(t.x,e.x),i=pw(t.y,e.y);return Math.sqrt(n**2+i**2)}class cS{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Yp(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=cM(m.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:k}=m,{timestamp:R}=Jt;this.history.push({...k,timestamp:R});const{onStart:j,onMove:b}=this.handlers;v||(j&&j(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Qp(v,this.transformPagePoint),rt.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:T,onSessionEnd:k,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Yp(m.type==="pointercancel"?this.lastMoveEventInfo:Qp(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(m,j),k&&k(m,j)},!IP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Mf(e),u=Qp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Jt;this.history=[{...h,timestamp:f}];const{onSessionStart:g}=n;g&&g(e,Yp(u,this.history)),this.removeListeners=as(cr(this.contextWindow,"pointermove",this.handlePointerMove),cr(this.contextWindow,"pointerup",this.handlePointerUp),cr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yr(this.updatePoint)}}function Qp(t,e){return e?{point:e(t.point)}:t}function mw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yp({point:t},e){return{point:t,delta:mw(t,hS(e)),offset:mw(t,hM(e)),velocity:dM(e,.1)}}function hM(t){return t[0]}function hS(t){return t[t.length-1]}function dM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=hS(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>ao(e)));)n--;if(!i)return{x:0,y:0};const o=hr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Ln(t){return t.max-t.min}function wg(t,e=0,n=.01){return Math.abs(t-e)<=n}function gw(t,e,n,i=.5){t.origin=i,t.originPoint=pt(e.min,e.max,t.origin),t.scale=Ln(n)/Ln(e),(wg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=pt(n.min,n.max,t.origin)-t.originPoint,(wg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function vu(t,e,n,i){gw(t.x,e.x,n.x,i?i.originX:void 0),gw(t.y,e.y,n.y,i?i.originY:void 0)}function yw(t,e,n){t.min=n.min+e.min,t.max=t.min+Ln(e)}function fM(t,e,n){yw(t.x,e.x,n.x),yw(t.y,e.y,n.y)}function _w(t,e,n){t.min=e.min-n.min,t.max=t.min+Ln(e)}function wu(t,e,n){_w(t.x,e.x,n.x),_w(t.y,e.y,n.y)}function pM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?pt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?pt(n,t,i.max):Math.min(t,n)),t}function vw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function mM(t,{top:e,left:n,bottom:i,right:r}){return{x:vw(t.x,n,r),y:vw(t.y,e,i)}}function ww(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function gM(t,e){return{x:ww(t.x,e.x),y:ww(t.y,e.y)}}function yM(t,e){let n=.5;const i=Ln(t),r=Ln(e);return r>i?n=Ku(e.min,e.max-i,t.min):i>r&&(n=Ku(t.min,t.max-r,e.min)),_s(0,1,n)}function _M(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const xg=.35;function vM(t=xg){return t===!1?t=0:t===!0&&(t=xg),{x:xw(t,"left","right"),y:xw(t,"top","bottom")}}function xw(t,e,n){return{min:Tw(t,e),max:Tw(t,n)}}function Tw(t,e){return typeof t=="number"?t:t[e]||0}const Ew=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ca=()=>({x:Ew(),y:Ew()}),Pw=()=>({min:0,max:0}),kt=()=>({x:Pw(),y:Pw()});function qn(t){return[t("x"),t("y")]}function dS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function wM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Xp(t){return t===void 0||t===1}function Tg({scale:t,scaleX:e,scaleY:n}){return!Xp(t)||!Xp(e)||!Xp(n)}function Ks(t){return Tg(t)||fS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function fS(t){return Sw(t.x)||Sw(t.y)}function Sw(t){return t&&t!=="0%"}function jd(t,e,n){const i=t-n,r=e*i;return n+r}function Cw(t,e,n,i,r){return r!==void 0&&(t=jd(t,r,i)),jd(t,n,i)+e}function Eg(t,e=0,n=1,i,r){t.min=Cw(t.min,e,n,i,r),t.max=Cw(t.max,e,n,i,r)}function pS(t,{x:e,y:n}){Eg(t.x,e.translate,e.scale,e.originPoint),Eg(t.y,n.translate,n.scale,n.originPoint)}function TM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ia(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,pS(t,a)),i&&Ks(o.latestValues)&&Ia(t,o.latestValues))}e.x=Iw(e.x),e.y=Iw(e.y)}function Iw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Br(t,e){t.min=t.min+e,t.max=t.max+e}function Aw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=pt(t.min,t.max,o);Eg(t,e[n],e[i],a,e.scale)}const EM=["x","scaleX","originX"],PM=["y","scaleY","originY"];function Ia(t,e){Aw(t.x,e,EM),Aw(t.y,e,PM)}function mS(t,e){return dS(xM(t.getBoundingClientRect(),e))}function SM(t,e,n){const i=mS(t,n),{scroll:r}=e;return r&&(Br(i.x,r.offset.x),Br(i.y,r.offset.y)),i}const gS=({current:t})=>t?t.ownerDocument.defaultView:null,CM=new WeakMap;class IM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Mf(g,"page").point)},o=(g,m)=>{const{drag:v,dragPropagation:T,onDragStart:k}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=bP(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qn(j=>{let b=this.getAxisMotionValue(j).get()||0;if(Ni.test(b)){const{projection:P}=this.visualElement;if(P&&P.layout){const C=P.layout.layoutBox[j];C&&(b=Ln(C)*(parseFloat(b)/100))}}this.originPoint[j]=b}),k&&rt.update(()=>k(g,m),!1,!0);const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},a=(g,m)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:k,onDrag:R}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:j}=m;if(T&&this.currentDirection===null){this.currentDirection=AM(j),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",m.point,j),this.updateAxis("y",m.point,j),this.visualElement.render(),R&&R(g,m)},u=(g,m)=>this.stop(g,m),h=()=>qn(g=>{var m;return this.getAnimationState(g)==="paused"&&((m=this.getAxisMotionValue(g).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new cS(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:gS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&rt.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Ph(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=pM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Pa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=mM(r.layoutBox,n):this.constraints=!1,this.elastic=vM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=_M(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Pa(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=SM(i,r.root,this.visualElement.getTransformPagePoint());let a=gM(r.layout.layoutBox,o);if(n){const u=n(wM(a));this.hasMutatedConstraints=!!u,u&&(a=dS(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=qn(g=>{if(!Ph(g,n,this.currentDirection))return;let m=h&&h[g]||{};a&&(m={min:0,max:0});const v=r?200:1e6,T=r?40:1e7,k={type:"inertia",velocity:i?e[g]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(g,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(f_(e,i,0,n))}stopAnimation(){qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){qn(n=>{const{drag:i}=this.getProps();if(!Ph(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-pt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Pa(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};qn(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=yM({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),qn(a=>{if(!Ph(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(pt(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;CM.set(this.visualElement,this);const e=this.visualElement.current,n=cr(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Pa(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=or(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(qn(g=>{const m=this.getAxisMotionValue(g);m&&(this.originPoint[g]+=h[g].translate,m.set(m.get()+h[g].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=xg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function Ph(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function AM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class bM extends Rs{constructor(e){super(e),this.removeGroupControls=St,this.removeListeners=St,this.controls=new IM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||St}unmount(){this.removeGroupControls(),this.removeListeners()}}const bw=t=>(e,n)=>{t&&rt.update(()=>t(e,n))};class kM extends Rs{constructor(){super(...arguments),this.removePointerDownListener=St}onPointerDown(e){this.session=new cS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:bw(e),onStart:bw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&rt.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=cr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function RM(){const t=O.useContext(bf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=O.useId();return O.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Gh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ql={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(we.test(t))t=parseFloat(t);else return t;const n=kw(t,e.target.x),i=kw(t,e.target.y);return`${n}% ${i}%`}},NM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=vs.parse(t);if(r.length>5)return i;const o=vs.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=pt(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class LM extends co.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;FR(MM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Gh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||rt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yS(t){const[e,n]=RM(),i=O.useContext(Jy);return co.createElement(LM,{...t,layoutGroup:i,switchLayoutGroup:O.useContext(dP),isPresent:e,safeToRemove:n})}const MM={borderRadius:{...Ql,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ql,borderTopRightRadius:Ql,borderBottomLeftRadius:Ql,borderBottomRightRadius:Ql,boxShadow:NM},_S=["TopLeft","TopRight","BottomLeft","BottomRight"],OM=_S.length,Rw=t=>typeof t=="string"?parseFloat(t):t,Nw=t=>typeof t=="number"||we.test(t);function DM(t,e,n,i,r,o){r?(t.opacity=pt(0,n.opacity!==void 0?n.opacity:1,VM(i)),t.opacityExit=pt(e.opacity!==void 0?e.opacity:1,0,jM(i))):o&&(t.opacity=pt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<OM;a++){const u=`border${_S[a]}Radius`;let h=Lw(e,u),f=Lw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Nw(h)===Nw(f)?(t[u]=Math.max(pt(Rw(h),Rw(f),i),0),(Ni.test(f)||Ni.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=pt(e.rotate||0,n.rotate||0,i))}function Lw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const VM=vS(0,.5,BP),jM=vS(.5,.95,St);function vS(t,e,n){return i=>i<t?0:i>e?1:n(Ku(t,e,i))}function Mw(t,e){t.min=e.min,t.max=e.max}function Wn(t,e){Mw(t.x,e.x),Mw(t.y,e.y)}function Ow(t,e,n,i,r){return t-=e,t=jd(t,1/n,i),r!==void 0&&(t=jd(t,1/r,i)),t}function zM(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ni.test(e)&&(e=parseFloat(e),e=pt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=pt(o.min,o.max,i);t===o&&(u-=e),t.min=Ow(t.min,e,n,u,r),t.max=Ow(t.max,e,n,u,r)}function Dw(t,e,[n,i,r],o,a){zM(t,e[n],e[i],e[r],e.scale,o,a)}const FM=["x","scaleX","originX"],BM=["y","scaleY","originY"];function Vw(t,e,n,i){Dw(t.x,e,FM,n?n.x:void 0,i?i.x:void 0),Dw(t.y,e,BM,n?n.y:void 0,i?i.y:void 0)}function jw(t){return t.translate===0&&t.scale===1}function wS(t){return jw(t.x)&&jw(t.y)}function UM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function xS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function zw(t){return Ln(t.x)/Ln(t.y)}class HM{constructor(){this.members=[]}add(e){p_(this.members,e),e.scheduleRender()}remove(e){if(m_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Fw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:g}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),g&&(i+=`rotateY(${g}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const WM=(t,e)=>t.depth-e.depth;class $M{constructor(){this.children=[],this.isDirty=!1}add(e){p_(this.children,e),this.isDirty=!0}remove(e){m_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(WM),this.isDirty=!1,this.children.forEach(e)}}function qM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(yr(i),t(o-e))};return rt.read(i,!0),()=>yr(i)}function GM(t){window.MotionDebug&&window.MotionDebug.record(t)}function ZM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function KM(t,e,n){const i=Sn(t)?t:Ka(t);return i.start(f_("",i,e,n)),i.animation}const Bw=["","X","Y","Z"],QM={visibility:"hidden"},Uw=1e3;let YM=0;const Qs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function TS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=YM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qs.totalNodes=Qs.resolvedTargetDeltas=Qs.recalculatedProjection=0,this.nodes.forEach(eO),this.nodes.forEach(sO),this.nodes.forEach(oO),this.nodes.forEach(tO),GM(Qs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new $M)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new g_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ZM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let m;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=qM(v,250),Gh.hasAnimatedSinceResize&&(Gh.hasAnimatedSinceResize=!1,this.nodes.forEach(Ww))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||g.getDefaultTransition()||hO,{onLayoutAnimationStart:j,onLayoutAnimationComplete:b}=g.getProps(),P=!this.targetLayout||!xS(this.targetLayout,k)||T,C=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,C);const F={...d_(R,"layout"),onPlay:j,onComplete:b};(g.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else v||Ww(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const m=this.path[g];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Hw);return}this.isUpdating||this.nodes.forEach(iO),this.isUpdating=!1,this.nodes.forEach(rO),this.nodes.forEach(XM),this.nodes.forEach(JM),this.clearAllSnapshots();const u=performance.now();Jt.delta=_s(0,1e3/60,u-Jt.timestamp),Jt.timestamp=u,Jt.isProcessing=!0,Up.update.process(Jt),Up.preRender.process(Jt),Up.render.process(Jt),Jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(nO),this.sharedNodes.forEach(lO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!wS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;a&&(u||Ks(this.latestValues)||g)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),dO(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return kt();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Br(u.x,h.offset.x),Br(u.y,h.offset.y)),u}removeElementScroll(a){const u=kt();Wn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:g,options:m}=f;if(f!==this.root&&g&&m.layoutScroll){if(g.isRoot){Wn(u,a);const{scroll:v}=this.root;v&&(Br(u.x,-v.offset.x),Br(u.y,-v.offset.y))}Br(u.x,g.offset.x),Br(u.y,g.offset.y)}}return u}applyTransform(a,u=!1){const h=kt();Wn(h,a);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ia(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Ks(g.latestValues)&&Ia(h,g.latestValues)}return Ks(this.latestValues)&&Ia(h,this.latestValues),h}removeTransform(a){const u=kt();Wn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Ks(f.latestValues))continue;Tg(f.latestValues)&&f.updateSnapshot();const g=kt(),m=f.measurePageBox();Wn(g,m),Vw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Ks(this.latestValues)&&Vw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:v}=this.options;if(!(!this.layout||!(m||v))){if(this.resolvedRelativeTargetAt=Jt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),wu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=kt(),this.targetWithTransforms=kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wn(this.target,this.layout.layoutBox),pS(this.target,this.targetDelta)):Wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),wu(this.relativeTargetOrigin,this.target,T.target),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Tg(this.parent.latestValues)||fS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Jt.timestamp&&(f=!1),f)return;const{layout:g,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||m))return;Wn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;TM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:k}=u;if(!k){this.projectionTransform&&(this.projectionDelta=Ca(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ca(),this.projectionDeltaWithTransform=Ca());const R=this.projectionTransform;vu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),this.projectionTransform=Fw(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),Qs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},m=Ca();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=kt(),T=h?h.source:void 0,k=this.layout?this.layout.source:void 0,R=T!==k,j=this.getStack(),b=!j||j.members.length<=1,P=!!(R&&!b&&this.options.crossfade===!0&&!this.path.some(cO));this.animationProgress=0;let C;this.mixTargetDelta=F=>{const q=F/1e3;$w(m.x,a.x,q),$w(m.y,a.y,q),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wu(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),uO(this.relativeTarget,this.relativeTargetOrigin,v,q),C&&UM(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=kt()),Wn(C,this.relativeTarget)),R&&(this.animationValues=g,DM(g,f,this.latestValues,q,P,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rt.update(()=>{Gh.hasAnimatedSinceResize=!0,this.currentAnimation=KM(0,Uw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Uw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:g}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&ES(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||kt();const m=Ln(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+m;const v=Ln(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}Wn(u,h),Ia(u,g),vu(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new HM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let g=0;g<Bw.length;g++){const m="rotate"+Bw[g];h[m]&&(f[m]=h[m],a.setStaticValue(m,0))}a.render();for(const g in f)a.setStaticValue(g,f[g]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return QM;const f={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=qh(a==null?void 0:a.pointerEvents)||"",f.transform=g?g(this.latestValues,""):"none",f;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=qh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ks(this.latestValues)&&(R.transform=g?g({},""):"none",this.hasProjected=!1),R}const v=m.animationValues||m.latestValues;this.applyTransformsToTarget(),f.transform=Fw(this.projectionDeltaWithTransform,this.treeScale,v),g&&(f.transform=g(v,f.transform));const{x:T,y:k}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${k.origin*100}% 0`,m.animationValues?f.opacity=m===this?(h=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=m===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const R in Rd){if(v[R]===void 0)continue;const{correct:j,applyTo:b}=Rd[R],P=f.transform==="none"?v[R]:j(v[R],m);if(b){const C=b.length;for(let F=0;F<C;F++)f[b[F]]=P}else f[R]=P}return this.options.layoutId&&(f.pointerEvents=m===this?qh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Hw),this.root.sharedNodes.clear()}}}function XM(t){t.updateLayout()}function JM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?qn(m=>{const v=a?n.measuredBox[m]:n.layoutBox[m],T=Ln(v);v.min=i[m].min,v.max=v.min+T}):ES(o,n.layoutBox,i)&&qn(m=>{const v=a?n.measuredBox[m]:n.layoutBox[m],T=Ln(i[m]);v.max=v.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+T)});const u=Ca();vu(u,i,n.layoutBox);const h=Ca();a?vu(h,t.applyTransform(r,!0),n.measuredBox):vu(h,i,n.layoutBox);const f=!wS(u);let g=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:T}=m;if(v&&T){const k=kt();wu(k,n.layoutBox,v.layoutBox);const R=kt();wu(R,i,T.layoutBox),xS(k,R)||(g=!0),m.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=k,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:g})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function eO(t){Qs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function tO(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function nO(t){t.clearSnapshot()}function Hw(t){t.clearMeasurements()}function iO(t){t.isLayoutDirty=!1}function rO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ww(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function sO(t){t.resolveTargetDelta()}function oO(t){t.calcProjection()}function aO(t){t.resetRotation()}function lO(t){t.removeLeadSnapshot()}function $w(t,e,n){t.translate=pt(e.translate,0,n),t.scale=pt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qw(t,e,n,i){t.min=pt(e.min,n.min,i),t.max=pt(e.max,n.max,i)}function uO(t,e,n,i){qw(t.x,e.x,n.x,i),qw(t.y,e.y,n.y,i)}function cO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const hO={duration:.45,ease:[.4,0,.1,1]},Gw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Zw=Gw("applewebkit/")&&!Gw("chrome/")?Math.round:St;function Kw(t){t.min=Zw(t.min),t.max=Zw(t.max)}function dO(t){Kw(t.x),Kw(t.y)}function ES(t,e,n){return t==="position"||t==="preserve-aspect"&&!wg(zw(e),zw(n),.2)}const fO=TS({attachResizeListener:(t,e)=>or(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jp={current:void 0},PS=TS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Jp.current){const t=new fO({});t.mount(window),t.setOptions({layoutScroll:!0}),Jp.current=t}return Jp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),pO={pan:{Feature:kM},drag:{Feature:bM,ProjectionNode:PS,MeasureLayout:yS}},mO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function gO(t){const e=mO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Pg(t,e,n=1){const[i,r]=gO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return oS(a)?parseFloat(a):a}else return fg(r)?Pg(r,e,n+1):r}function yO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!fg(o))return;const a=Pg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!fg(o))continue;const a=Pg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const _O=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),SS=t=>_O.has(t),vO=t=>Object.keys(t).some(SS),Qw=t=>t===Io||t===we,Yw=(t,e)=>parseFloat(t.split(", ")[e]),Xw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Yw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Yw(o[1],t):0}},wO=new Set(["x","y","z"]),xO=hc.filter(t=>!wO.has(t));function TO(t){const e=[];return xO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Qa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Xw(4,13),y:Xw(5,14)};Qa.translateX=Qa.x;Qa.translateY=Qa.y;const EO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Qa[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const g=e.getValue(f);g&&g.jump(u[f]),t[f]=Qa[f](h,o)}),t},PO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(SS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let g=n[h],m=Kl(g);const v=e[h];let T;if(Ld(v)){const k=v.length,R=v[0]===null?1:0;g=v[R],m=Kl(g);for(let j=R;j<k&&v[j]!==null;j++)T?a_(Kl(v[j])===T):T=Kl(v[j])}else T=Kl(v);if(m!==T)if(Qw(m)&&Qw(T)){const k=f.get();typeof k=="string"&&f.set(parseFloat(k)),typeof v=="string"?e[h]=parseFloat(v):Array.isArray(v)&&T===we&&(e[h]=v.map(parseFloat))}else m!=null&&m.transform&&(T!=null&&T.transform)&&(g===0||v===0)?g===0?f.set(T.transform(g)):e[h]=m.transform(v):(a||(o=TO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(v))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=EO(e,t,u);return o.length&&o.forEach(([g,m])=>{t.getValue(g).set(m)}),t.render(),kf&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function SO(t,e,n,i){return vO(e)?PO(t,e,n,i):{target:e,transitionEnd:i}}const CO=(t,e,n,i)=>{const r=yO(t,e,i);return e=r.target,i=r.transitionEnd,SO(t,e,n,i)},Sg={current:null},CS={current:!1};function IO(){if(CS.current=!0,!!kf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Sg.current=t.matches;t.addListener(e),e()}else Sg.current=!1}function AO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(Sn(o))t.addValue(r,o),Vd(i)&&i.add(r);else if(Sn(a))t.addValue(r,Ka(o,{owner:t})),Vd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Ka(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Jw=new WeakMap,IS=Object.keys(Zu),bO=IS.length,ex=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],kO=Xy.length;class RO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>rt.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Nf(n),this.isVariantNode=hP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...g}=this.scrapeMotionValuesFromProps(n,{});for(const m in g){const v=g[m];u[m]!==void 0&&Sn(v)&&(v.set(u[m],!1),Vd(f)&&f.add(m))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Jw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),CS.current||IO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Jw.delete(this.current),this.projection&&this.projection.unmount(),yr(this.notifyUpdate),yr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=Co.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&rt.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<bO;h++){const f=IS[h],{isEnabled:g,Feature:m,ProjectionNode:v,MeasureLayout:T}=Zu[f];v&&(a=v),g(n)&&(!this.features[f]&&m&&(this.features[f]=new m(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:g,dragConstraints:m,layoutScroll:v,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!g||m&&Pa(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<ex.length;i++){const r=ex[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=AO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<kO;i++){const r=Xy[i],o=this.props[r];(Gu(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ka(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=o_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Sn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new g_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class AS extends RO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=ZL(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){qL(this,i,a);const u=CO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function NO(t){return window.getComputedStyle(t)}class LO extends AS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Co.has(n)){const i=h_(n);return i&&i.default||0}else{const i=NO(e),r=(mP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return mS(e,n)}build(e,n,i,r){t_(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return s_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Sn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){xP(e,n,i,r)}}class MO extends AS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Co.has(n)){const i=h_(n);return i&&i.default||0}return n=TP.has(n)?n:Qy(n),e.getAttribute(n)}measureInstanceViewportBox(){return kt()}scrapeMotionValuesFromProps(e,n){return PP(e,n)}build(e,n,i,r){i_(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){EP(e,n,i,r)}mount(e){this.isSVGTag=r_(e.tagName),super.mount(e)}}const OO=(t,e)=>e_(t)?new MO(e,{enableHardwareAcceleration:!1}):new LO(e,{enableHardwareAcceleration:!0}),DO={layout:{ProjectionNode:PS,MeasureLayout:yS}},VO={...uM,...bN,...pO,...DO},ie=jR((t,e)=>gN(t,e,VO,OO));function bS(){const t=O.useRef(!1);return Ky(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function jO(){const t=bS(),[e,n]=O.useState(0),i=O.useCallback(()=>{t.current&&n(e+1)},[e]);return[O.useCallback(()=>rt.postRender(i),[i]),e]}class zO extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function FO({children:t,isPresent:e}){const n=O.useId(),i=O.useRef(null),r=O.useRef({width:0,height:0,top:0,left:0});return O.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),O.createElement(zO,{isPresent:e,childRef:i,sizeRef:r},O.cloneElement(t,{ref:i}))}const em=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=SP(BO),h=O.useId(),f=O.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:g=>{u.set(g,!0);for(const m of u.values())if(!m)return;i&&i()},register:g=>(u.set(g,!1),()=>u.delete(g))}),o?void 0:[n]);return O.useMemo(()=>{u.forEach((g,m)=>u.set(m,!1))},[n]),O.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=O.createElement(FO,{isPresent:n},t)),O.createElement(bf.Provider,{value:f},t)};function BO(){return new Map}function UO(t){return O.useEffect(()=>()=>t(),[])}const Ys=t=>t.key||"";function HO(t,e){t.forEach(n=>{const i=Ys(n);e.set(i,n)})}function WO(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const Oa=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=O.useContext(Jy).forceRender||jO()[0],h=bS(),f=WO(t);let g=f;const m=O.useRef(new Map).current,v=O.useRef(g),T=O.useRef(new Map).current,k=O.useRef(!0);if(Ky(()=>{k.current=!1,HO(f,T),v.current=g}),UO(()=>{k.current=!0,T.clear(),m.clear()}),k.current)return O.createElement(O.Fragment,null,g.map(P=>O.createElement(em,{key:Ys(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},P)));g=[...g];const R=v.current.map(Ys),j=f.map(Ys),b=R.length;for(let P=0;P<b;P++){const C=R[P];j.indexOf(C)===-1&&!m.has(C)&&m.set(C,void 0)}return a==="wait"&&m.size&&(g=[]),m.forEach((P,C)=>{if(j.indexOf(C)!==-1)return;const F=T.get(C);if(!F)return;const q=R.indexOf(C);let B=P;if(!B){const A=()=>{m.delete(C);const S=Array.from(T.keys()).filter(N=>!j.includes(N));if(S.forEach(N=>T.delete(N)),v.current=f.filter(N=>{const D=Ys(N);return D===C||S.includes(D)}),!m.size){if(h.current===!1)return;u(),i&&i()}};B=O.createElement(em,{key:Ys(F),isPresent:!1,onExitComplete:A,custom:e,presenceAffectsLayout:o,mode:a},F),m.set(C,B)}g.splice(q,0,B)}),g=g.map(P=>{const C=P.key;return m.has(C)?P:O.createElement(em,{key:Ys(P),isPresent:!0,presenceAffectsLayout:o,mode:a},P)}),O.createElement(O.Fragment,null,m.size?g:g.map(P=>O.cloneElement(P)))},$O=()=>{};var tx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},qO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},RS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,g=o>>2,m=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(v=64)),i.push(n[g],n[m],n[v],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||m==null)throw new GO;const v=o<<2|u>>4;if(i.push(v),f!==64){const T=u<<4&240|f>>2;if(i.push(T),m!==64){const k=f<<6&192|m;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZO=function(t){const e=kS(t);return RS.encodeByteArray(e,!0)},zd=function(t){return ZO(t).replace(/\./g,"")},NS=function(t){try{return RS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=()=>KO().__FIREBASE_DEFAULTS__,YO=()=>{if(typeof process>"u"||typeof tx>"u")return;const t=tx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NS(t[1]);return e&&JSON.parse(e)},Df=()=>{try{return $O()||QO()||YO()||XO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LS=t=>{var e,n;return(n=(e=Df())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},JO=t=>{const e=LS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},MS=()=>{var t;return(t=Df())==null?void 0:t.config},OS=t=>{var e;return(e=Df())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[zd(JSON.stringify(n)),zd(JSON.stringify(a)),""].join(".")}const xu={};function nD(){const t={prod:[],emulator:[]};for(const e of Object.keys(xu))xu[e]?t.emulator.push(e):t.prod.push(e);return t}function iD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let nx=!1;function VS(t,e){if(typeof window>"u"||typeof document>"u"||!ul(window.location.host)||xu[t]===e||xu[t]||nx)return;xu[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=nD().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{nx=!0,a()},v}function g(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=iD(i),T=n("text"),k=document.getElementById(T)||document.createElement("span"),R=n("learnmore"),j=document.getElementById(R)||document.createElement("a"),b=n("preprendIcon"),P=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const C=v.element;u(C),g(j,R);const F=f();h(P,b),C.append(P,k,j,F),document.body.appendChild(C)}o?(k.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function sD(){var e;const t=(e=Df())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uD(){const t=sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cD(){return!sD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hD(){try{return typeof indexedDB=="object"}catch{return!1}}function dD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="FirebaseError";class Sr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=fD,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?pD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Sr(r,u,i)}}function pD(t,e){return t.replace(mD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const mD=/\{\$([^}]+)}/g;function gD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(ix(o)&&ix(a)){if(!yo(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ix(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function yD(t,e){const n=new _D(t,e);return n.subscribe.bind(n)}class _D{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");vD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=tm),r.error===void 0&&(r.error=tm),r.complete===void 0&&(r.complete=tm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t){return t&&t._delegate?t._delegate:t}class _o{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new eD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TD(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:xD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xD(t){return t===Xs?void 0:t}function TD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const PD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},SD=je.INFO,CD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},ID=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=CD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y_{constructor(e){this.name=e,this._logLevel=SD,this._logHandler=ID,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const AD=(t,e)=>e.some(n=>t instanceof n);let rx,sx;function bD(){return rx||(rx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kD(){return sx||(sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jS=new WeakMap,Cg=new WeakMap,zS=new WeakMap,nm=new WeakMap,__=new WeakMap;function RD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(ls(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&jS.set(n,t)}).catch(()=>{}),__.set(e,t),e}function ND(t){if(Cg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Cg.set(t,e)}let Ig={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LD(t){Ig=t(Ig)}function MD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(im(this),e,...n);return zS.set(i,e.sort?e.sort():[e]),ls(i)}:kD().includes(t)?function(...e){return t.apply(im(this),e),ls(jS.get(this))}:function(...e){return ls(t.apply(im(this),e))}}function OD(t){return typeof t=="function"?MD(t):(t instanceof IDBTransaction&&ND(t),AD(t,bD())?new Proxy(t,Ig):t)}function ls(t){if(t instanceof IDBRequest)return RD(t);if(nm.has(t))return nm.get(t);const e=OD(t);return e!==t&&(nm.set(t,e),__.set(e,t)),e}const im=t=>__.get(t);function DD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=ls(a);return i&&a.addEventListener("upgradeneeded",h=>{i(ls(a.result),h.oldVersion,h.newVersion,ls(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const VD=["get","getKey","getAll","getAllKeys","count"],jD=["put","add","delete","clear"],rm=new Map;function ox(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rm.get(e))return rm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=jD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||VD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return rm.set(e,o),o}LD(t=>({...t,get:(e,n,i)=>ox(e,n)||t.get(e,n,i),has:(e,n)=>!!ox(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function FD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ag="@firebase/app",ax="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new y_("@firebase/app"),BD="@firebase/app-compat",UD="@firebase/analytics-compat",HD="@firebase/analytics",WD="@firebase/app-check-compat",$D="@firebase/app-check",qD="@firebase/auth",GD="@firebase/auth-compat",ZD="@firebase/database",KD="@firebase/data-connect",QD="@firebase/database-compat",YD="@firebase/functions",XD="@firebase/functions-compat",JD="@firebase/installations",eV="@firebase/installations-compat",tV="@firebase/messaging",nV="@firebase/messaging-compat",iV="@firebase/performance",rV="@firebase/performance-compat",sV="@firebase/remote-config",oV="@firebase/remote-config-compat",aV="@firebase/storage",lV="@firebase/storage-compat",uV="@firebase/firestore",cV="@firebase/ai",hV="@firebase/firestore-compat",dV="firebase",fV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="[DEFAULT]",pV={[Ag]:"fire-core",[BD]:"fire-core-compat",[HD]:"fire-analytics",[UD]:"fire-analytics-compat",[$D]:"fire-app-check",[WD]:"fire-app-check-compat",[qD]:"fire-auth",[GD]:"fire-auth-compat",[ZD]:"fire-rtdb",[KD]:"fire-data-connect",[QD]:"fire-rtdb-compat",[YD]:"fire-fn",[XD]:"fire-fn-compat",[JD]:"fire-iid",[eV]:"fire-iid-compat",[tV]:"fire-fcm",[nV]:"fire-fcm-compat",[iV]:"fire-perf",[rV]:"fire-perf-compat",[sV]:"fire-rc",[oV]:"fire-rc-compat",[aV]:"fire-gcs",[lV]:"fire-gcs-compat",[uV]:"fire-fst",[hV]:"fire-fst-compat",[cV]:"fire-vertex","fire-js":"fire-js",[dV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new Map,mV=new Map,kg=new Map;function lx(t,e){try{t.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ya(t){const e=t.name;if(kg.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;kg.set(e,t);for(const n of Fd.values())lx(n,t);for(const n of mV.values())lx(n,t);return!0}function v_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new mc("app","Firebase",gV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _o("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=fV;function FS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:bg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw us.create("bad-app-name",{appName:String(r)});if(n||(n=MS()),!n)throw us.create("no-options");const o=Fd.get(r);if(o){if(yo(n,o.options)&&yo(i,o.config))return o;throw us.create("duplicate-app",{appName:r})}const a=new ED(r);for(const h of kg.values())a.addComponent(h);const u=new yV(n,i,a);return Fd.set(r,u),u}function BS(t=bg){const e=Fd.get(t);if(!e&&t===bg&&MS())return FS();if(!e)throw us.create("no-app",{appName:t});return e}function cs(t,e,n){let i=pV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(a.join(" "));return}Ya(new _o(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V="firebase-heartbeat-database",vV=1,Qu="firebase-heartbeat-store";let sm=null;function US(){return sm||(sm=DD(_V,vV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qu)}catch(n){console.warn(n)}}}}).catch(t=>{throw us.create("idb-open",{originalErrorMessage:t.message})})),sm}async function wV(t){try{const n=(await US()).transaction(Qu),i=await n.objectStore(Qu).get(HS(t));return await n.done,i}catch(e){if(e instanceof Sr)_r.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function ux(t,e){try{const i=(await US()).transaction(Qu,"readwrite");await i.objectStore(Qu).put(e,HS(t)),await i.done}catch(n){if(n instanceof Sr)_r.warn(n.message);else{const i=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(i.message)}}}function HS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=1024,TV=30;class EV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=cx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>TV){const a=CV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){_r.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cx(),{heartbeatsToSend:i,unsentEntries:r}=PV(this._heartbeatsCache.heartbeats),o=zd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return _r.warn(n),""}}}function cx(){return new Date().toISOString().substring(0,10)}function PV(t,e=xV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),hx(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),hx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class SV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hD()?dD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ux(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ux(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function hx(t){return zd(JSON.stringify({version:2,heartbeats:t})).length}function CV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){Ya(new _o("platform-logger",e=>new zD(e),"PRIVATE")),Ya(new _o("heartbeat",e=>new EV(e),"PRIVATE")),cs(Ag,ax,t),cs(Ag,ax,"esm2020"),cs("fire-js","")}IV("");var dx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,WS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function N(){}N.prototype=S.prototype,A.F=S.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(D,V,U){for(var M=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)M[ee-2]=arguments[ee];return S.prototype[V].apply(D,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,S,N){N||(N=0);const D=Array(16);if(typeof S=="string")for(var V=0;V<16;++V)D[V]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(V=0;V<16;++V)D[V]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=A.g[0],N=A.g[1],V=A.g[2];let U=A.g[3],M;M=S+(U^N&(V^U))+D[0]+3614090360&4294967295,S=N+(M<<7&4294967295|M>>>25),M=U+(V^S&(N^V))+D[1]+3905402710&4294967295,U=S+(M<<12&4294967295|M>>>20),M=V+(N^U&(S^N))+D[2]+606105819&4294967295,V=U+(M<<17&4294967295|M>>>15),M=N+(S^V&(U^S))+D[3]+3250441966&4294967295,N=V+(M<<22&4294967295|M>>>10),M=S+(U^N&(V^U))+D[4]+4118548399&4294967295,S=N+(M<<7&4294967295|M>>>25),M=U+(V^S&(N^V))+D[5]+1200080426&4294967295,U=S+(M<<12&4294967295|M>>>20),M=V+(N^U&(S^N))+D[6]+2821735955&4294967295,V=U+(M<<17&4294967295|M>>>15),M=N+(S^V&(U^S))+D[7]+4249261313&4294967295,N=V+(M<<22&4294967295|M>>>10),M=S+(U^N&(V^U))+D[8]+1770035416&4294967295,S=N+(M<<7&4294967295|M>>>25),M=U+(V^S&(N^V))+D[9]+2336552879&4294967295,U=S+(M<<12&4294967295|M>>>20),M=V+(N^U&(S^N))+D[10]+4294925233&4294967295,V=U+(M<<17&4294967295|M>>>15),M=N+(S^V&(U^S))+D[11]+2304563134&4294967295,N=V+(M<<22&4294967295|M>>>10),M=S+(U^N&(V^U))+D[12]+1804603682&4294967295,S=N+(M<<7&4294967295|M>>>25),M=U+(V^S&(N^V))+D[13]+4254626195&4294967295,U=S+(M<<12&4294967295|M>>>20),M=V+(N^U&(S^N))+D[14]+2792965006&4294967295,V=U+(M<<17&4294967295|M>>>15),M=N+(S^V&(U^S))+D[15]+1236535329&4294967295,N=V+(M<<22&4294967295|M>>>10),M=S+(V^U&(N^V))+D[1]+4129170786&4294967295,S=N+(M<<5&4294967295|M>>>27),M=U+(N^V&(S^N))+D[6]+3225465664&4294967295,U=S+(M<<9&4294967295|M>>>23),M=V+(S^N&(U^S))+D[11]+643717713&4294967295,V=U+(M<<14&4294967295|M>>>18),M=N+(U^S&(V^U))+D[0]+3921069994&4294967295,N=V+(M<<20&4294967295|M>>>12),M=S+(V^U&(N^V))+D[5]+3593408605&4294967295,S=N+(M<<5&4294967295|M>>>27),M=U+(N^V&(S^N))+D[10]+38016083&4294967295,U=S+(M<<9&4294967295|M>>>23),M=V+(S^N&(U^S))+D[15]+3634488961&4294967295,V=U+(M<<14&4294967295|M>>>18),M=N+(U^S&(V^U))+D[4]+3889429448&4294967295,N=V+(M<<20&4294967295|M>>>12),M=S+(V^U&(N^V))+D[9]+568446438&4294967295,S=N+(M<<5&4294967295|M>>>27),M=U+(N^V&(S^N))+D[14]+3275163606&4294967295,U=S+(M<<9&4294967295|M>>>23),M=V+(S^N&(U^S))+D[3]+4107603335&4294967295,V=U+(M<<14&4294967295|M>>>18),M=N+(U^S&(V^U))+D[8]+1163531501&4294967295,N=V+(M<<20&4294967295|M>>>12),M=S+(V^U&(N^V))+D[13]+2850285829&4294967295,S=N+(M<<5&4294967295|M>>>27),M=U+(N^V&(S^N))+D[2]+4243563512&4294967295,U=S+(M<<9&4294967295|M>>>23),M=V+(S^N&(U^S))+D[7]+1735328473&4294967295,V=U+(M<<14&4294967295|M>>>18),M=N+(U^S&(V^U))+D[12]+2368359562&4294967295,N=V+(M<<20&4294967295|M>>>12),M=S+(N^V^U)+D[5]+4294588738&4294967295,S=N+(M<<4&4294967295|M>>>28),M=U+(S^N^V)+D[8]+2272392833&4294967295,U=S+(M<<11&4294967295|M>>>21),M=V+(U^S^N)+D[11]+1839030562&4294967295,V=U+(M<<16&4294967295|M>>>16),M=N+(V^U^S)+D[14]+4259657740&4294967295,N=V+(M<<23&4294967295|M>>>9),M=S+(N^V^U)+D[1]+2763975236&4294967295,S=N+(M<<4&4294967295|M>>>28),M=U+(S^N^V)+D[4]+1272893353&4294967295,U=S+(M<<11&4294967295|M>>>21),M=V+(U^S^N)+D[7]+4139469664&4294967295,V=U+(M<<16&4294967295|M>>>16),M=N+(V^U^S)+D[10]+3200236656&4294967295,N=V+(M<<23&4294967295|M>>>9),M=S+(N^V^U)+D[13]+681279174&4294967295,S=N+(M<<4&4294967295|M>>>28),M=U+(S^N^V)+D[0]+3936430074&4294967295,U=S+(M<<11&4294967295|M>>>21),M=V+(U^S^N)+D[3]+3572445317&4294967295,V=U+(M<<16&4294967295|M>>>16),M=N+(V^U^S)+D[6]+76029189&4294967295,N=V+(M<<23&4294967295|M>>>9),M=S+(N^V^U)+D[9]+3654602809&4294967295,S=N+(M<<4&4294967295|M>>>28),M=U+(S^N^V)+D[12]+3873151461&4294967295,U=S+(M<<11&4294967295|M>>>21),M=V+(U^S^N)+D[15]+530742520&4294967295,V=U+(M<<16&4294967295|M>>>16),M=N+(V^U^S)+D[2]+3299628645&4294967295,N=V+(M<<23&4294967295|M>>>9),M=S+(V^(N|~U))+D[0]+4096336452&4294967295,S=N+(M<<6&4294967295|M>>>26),M=U+(N^(S|~V))+D[7]+1126891415&4294967295,U=S+(M<<10&4294967295|M>>>22),M=V+(S^(U|~N))+D[14]+2878612391&4294967295,V=U+(M<<15&4294967295|M>>>17),M=N+(U^(V|~S))+D[5]+4237533241&4294967295,N=V+(M<<21&4294967295|M>>>11),M=S+(V^(N|~U))+D[12]+1700485571&4294967295,S=N+(M<<6&4294967295|M>>>26),M=U+(N^(S|~V))+D[3]+2399980690&4294967295,U=S+(M<<10&4294967295|M>>>22),M=V+(S^(U|~N))+D[10]+4293915773&4294967295,V=U+(M<<15&4294967295|M>>>17),M=N+(U^(V|~S))+D[1]+2240044497&4294967295,N=V+(M<<21&4294967295|M>>>11),M=S+(V^(N|~U))+D[8]+1873313359&4294967295,S=N+(M<<6&4294967295|M>>>26),M=U+(N^(S|~V))+D[15]+4264355552&4294967295,U=S+(M<<10&4294967295|M>>>22),M=V+(S^(U|~N))+D[6]+2734768916&4294967295,V=U+(M<<15&4294967295|M>>>17),M=N+(U^(V|~S))+D[13]+1309151649&4294967295,N=V+(M<<21&4294967295|M>>>11),M=S+(V^(N|~U))+D[4]+4149444226&4294967295,S=N+(M<<6&4294967295|M>>>26),M=U+(N^(S|~V))+D[11]+3174756917&4294967295,U=S+(M<<10&4294967295|M>>>22),M=V+(S^(U|~N))+D[2]+718787259&4294967295,V=U+(M<<15&4294967295|M>>>17),M=N+(U^(V|~S))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,A.g[2]=A.g[2]+V&4294967295,A.g[3]=A.g[3]+U&4294967295}i.prototype.v=function(A,S){S===void 0&&(S=A.length);const N=S-this.blockSize,D=this.C;let V=this.h,U=0;for(;U<S;){if(V==0)for(;U<=N;)r(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<S;)if(D[V++]=A.charCodeAt(U++),V==this.blockSize){r(this,D),V=0;break}}else for(;U<S;)if(D[V++]=A[U++],V==this.blockSize){r(this,D),V=0;break}}this.h=V,this.o+=S},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,N=0;N<4;++N)for(let D=0;D<32;D+=8)A[S++]=this.g[N]>>>D&255;return A};function o(A,S){var N=u;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=S(A)}function a(A,S){this.h=S;const N=[];let D=!0;for(let V=A.length-1;V>=0;V--){const U=A[V]|0;D&&U==S||(N[V]=U,D=!1)}this.g=N}var u={};function h(A){return-128<=A&&A<128?o(A,function(S){return new a([S|0],S<0?-1:0)}):new a([A|0],A<0?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return m;if(A<0)return j(f(-A));const S=[];let N=1;for(let D=0;A>=N;D++)S[D]=A/N|0,N*=4294967296;return new a(S,0)}function g(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return j(g(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(S,8));let D=m;for(let U=0;U<A.length;U+=8){var V=Math.min(8,A.length-U);const M=parseInt(A.substring(U,U+V),S);V<8?(V=f(Math.pow(S,V)),D=D.j(V).add(f(M))):(D=D.j(N),D=D.add(f(M)))}return D}var m=h(0),v=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(R(this))return-j(this).m();let A=0,S=1;for(let N=0;N<this.g.length;N++){const D=this.i(N);A+=(D>=0?D:4294967296+D)*S,S*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(R(this))return"-"+j(this).toString(A);const S=f(Math.pow(A,6));var N=this;let D="";for(;;){const V=F(N,S).g;N=b(N,V.j(S));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=V,k(N))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function R(A){return A.h==-1}t.l=function(A){return A=b(this,A),R(A)?-1:k(A)?0:1};function j(A){const S=A.g.length,N=[];for(let D=0;D<S;D++)N[D]=~A.g[D];return new a(N,~A.h).add(v)}t.abs=function(){return R(this)?j(this):this},t.add=function(A){const S=Math.max(this.g.length,A.g.length),N=[];let D=0;for(let V=0;V<=S;V++){let U=D+(this.i(V)&65535)+(A.i(V)&65535),M=(U>>>16)+(this.i(V)>>>16)+(A.i(V)>>>16);D=M>>>16,U&=65535,M&=65535,N[V]=M<<16|U}return new a(N,N[N.length-1]&-2147483648?-1:0)};function b(A,S){return A.add(j(S))}t.j=function(A){if(k(this)||k(A))return m;if(R(this))return R(A)?j(this).j(j(A)):j(j(this).j(A));if(R(A))return j(this.j(j(A)));if(this.l(T)<0&&A.l(T)<0)return f(this.m()*A.m());const S=this.g.length+A.g.length,N=[];for(var D=0;D<2*S;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<A.g.length;V++){const U=this.i(D)>>>16,M=this.i(D)&65535,ee=A.i(V)>>>16,We=A.i(V)&65535;N[2*D+2*V]+=M*We,P(N,2*D+2*V),N[2*D+2*V+1]+=U*We,P(N,2*D+2*V+1),N[2*D+2*V+1]+=M*ee,P(N,2*D+2*V+1),N[2*D+2*V+2]+=U*ee,P(N,2*D+2*V+2)}for(A=0;A<S;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=S;A<2*S;A++)N[A]=0;return new a(N,0)};function P(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function C(A,S){this.g=A,this.h=S}function F(A,S){if(k(S))throw Error("division by zero");if(k(A))return new C(m,m);if(R(A))return S=F(j(A),S),new C(j(S.g),j(S.h));if(R(S))return S=F(A,j(S)),new C(j(S.g),S.h);if(A.g.length>30){if(R(A)||R(S))throw Error("slowDivide_ only works with positive integers.");for(var N=v,D=S;D.l(A)<=0;)N=q(N),D=q(D);var V=B(N,1),U=B(D,1);for(D=B(D,2),N=B(N,2);!k(D);){var M=U.add(D);M.l(A)<=0&&(V=V.add(N),U=M),D=B(D,1),N=B(N,1)}return S=b(A,V.j(S)),new C(V,S)}for(V=m;A.l(S)>=0;){for(N=Math.max(1,Math.floor(A.m()/S.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=f(N),M=U.j(S);R(M)||M.l(A)>0;)N-=D,U=f(N),M=U.j(S);k(U)&&(U=v),V=V.add(U),A=b(A,M)}return new C(V,A)}t.B=function(A){return F(this,A).h},t.and=function(A){const S=Math.max(this.g.length,A.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)&A.i(D);return new a(N,this.h&A.h)},t.or=function(A){const S=Math.max(this.g.length,A.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)|A.i(D);return new a(N,this.h|A.h)},t.xor=function(A){const S=Math.max(this.g.length,A.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)^A.i(D);return new a(N,this.h^A.h)};function q(A){const S=A.g.length+1,N=[];for(let D=0;D<S;D++)N[D]=A.i(D)<<1|A.i(D-1)>>>31;return new a(N,A.h)}function B(A,S){const N=S>>5;S%=32;const D=A.g.length-N,V=[];for(let U=0;U<D;U++)V[U]=S>0?A.i(U+N)>>>S|A.i(U+N+1)<<32-S:A.i(U+N);return new a(V,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,WS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,hs=a}).apply(typeof dx<"u"?dx:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $S,ru,qS,Zh,Rg,GS,ZS,KS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var x=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var H=c[I];if(!(H in x))break e;x=x[H]}c=c[c.length-1],I=x[c],y=y(I),y!=I&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var x=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&x.push([I,y[I]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,x){return c.call.apply(c.bind,arguments)}function f(c,y,x){return f=h,f.apply(null,arguments)}function g(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function m(c,y){function x(){}x.prototype=y.prototype,c.Z=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Ob=function(I,H,$){for(var te=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)te[Pe-2]=arguments[Pe];return y.prototype[H].apply(I,te)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const x=Array(y);for(let I=0;I<y;I++)x[I]=c[I];return x}return[]}function k(c,y){for(let I=1;I<arguments.length;I++){const H=arguments[I];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=c.length||0;const $=H.length||0;c.length=x+$;for(let te=0;te<$;te++)c[x+te]=H[te]}else c.push(H)}}class R{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function j(c){a.setTimeout(()=>{throw c},0)}function b(){var c=A;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class P{constructor(){this.h=this.g=null}add(y,x){const I=C.get();I.set(y,x),this.h?this.h.next=I:this.g=I,this.h=I}}var C=new R(()=>new F,c=>c.reset());class F{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let q,B=!1,A=new P,S=()=>{const c=Promise.resolve(void 0);q=()=>{c.then(N)}};function N(){for(var c;c=b();){try{c.h.call(c.g)}catch(x){j(x)}var y=C;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}B=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};a.addEventListener("test",x,y),a.removeEventListener("test",x,y)}catch{}return c}();function M(c){return/^[\s\xa0]*$/.test(c)}function ee(c,y){V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}m(ee,V),ee.prototype.init=function(c,y){const x=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),ge=0;function Xe(c,y,x,I,H){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!I,this.ha=H,this.key=++ge,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ce(c,y,x){for(const I in c)y.call(x,c[I],I,c)}function J(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function ne(c){const y={};for(const x in c)y[x]=c[x];return y}const Ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(c,y){let x,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(x in I)c[x]=I[x];for(let $=0;$<Ce.length;$++)x=Ce[$],Object.prototype.hasOwnProperty.call(I,x)&&(c[x]=I[x])}}function Me(c){this.src=c,this.g={},this.h=0}Me.prototype.add=function(c,y,x,I,H){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const te=fe(c,y,I,H);return te>-1?(y=c[te],x||(y.fa=!1)):(y=new Xe(y,this.src,$,!!I,H),y.fa=x,c.push(y)),y};function Re(c,y){const x=y.type;if(x in c.g){var I=c.g[x],H=Array.prototype.indexOf.call(I,y,void 0),$;($=H>=0)&&Array.prototype.splice.call(I,H,1),$&&(Z(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function fe(c,y,x,I){for(let H=0;H<c.length;++H){const $=c[H];if(!$.da&&$.listener==y&&$.capture==!!x&&$.ha==I)return H}return-1}var dt="closure_lm_"+(Math.random()*1e6|0),re={};function he(c,y,x,I,H){if(Array.isArray(y)){for(let $=0;$<y.length;$++)he(c,y[$],x,I,H);return null}return x=ct(x),c&&c[We]?c.J(y,x,u(I)?!!I.capture:!1,H):_e(c,y,x,!1,I,H)}function _e(c,y,x,I,H,$){if(!y)throw Error("Invalid event type");const te=u(H)?!!H.capture:!!H;let Pe=ye(c);if(Pe||(c[dt]=Pe=new Me(c)),x=Pe.add(y,x,I,te,$),x.proxy)return x;if(I=Ie(),x.proxy=I,I.src=c,I.listener=x,c.addEventListener)U||(H=te),H===void 0&&(H=!1),c.addEventListener(y.toString(),I,H);else if(c.attachEvent)c.attachEvent(Ct(y.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ie(){function c(x){return y.call(c.src,c.listener,x)}const y=vt;return c}function pe(c,y,x,I,H){if(Array.isArray(y))for(var $=0;$<y.length;$++)pe(c,y[$],x,I,H);else I=u(I)?!!I.capture:!!I,x=ct(x),c&&c[We]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],x=fe(y,x,I,H),x>-1&&(Z(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=ye(c))&&(y=c.g[y.toString()],c=-1,y&&(c=fe(y,x,I,H)),(x=c>-1?y[c]:null)&&be(x))}function be(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[We])Re(y.i,c);else{var x=c.type,I=c.proxy;y.removeEventListener?y.removeEventListener(x,I,c.capture):y.detachEvent?y.detachEvent(Ct(x),I):y.addListener&&y.removeListener&&y.removeListener(I),(x=ye(y))?(Re(x,c),x.h==0&&(x.src=null,y[dt]=null)):Z(c)}}}function Ct(c){return c in re?re[c]:re[c]="on"+c}function vt(c,y){if(c.da)c=!0;else{y=new ee(y,this);const x=c.listener,I=c.ha||c.src;c.fa&&be(c),c=x.call(I,y)}return c}function ye(c){return c=c[dt],c instanceof Me?c:null}var ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function ct(c){return typeof c=="function"?c:(c[ke]||(c[ke]=function(y){return c.handleEvent(y)}),c[ke])}function Le(){D.call(this),this.i=new Me(this),this.M=this,this.G=null}m(Le,D),Le.prototype[We]=!0,Le.prototype.removeEventListener=function(c,y,x,I){pe(this,c,y,x,I)};function Be(c,y){var x,I=c.G;if(I)for(x=[];I;I=I.G)x.push(I);if(c=c.M,I=y.type||y,typeof y=="string")y=new V(y,c);else if(y instanceof V)y.target=y.target||c;else{var H=y;y=new V(I,c),tt(y,H)}H=!0;let $,te;if(x)for(te=x.length-1;te>=0;te--)$=y.g=x[te],H=Cn($,I,!0,y)&&H;if($=y.g=c,H=Cn($,I,!0,y)&&H,H=Cn($,I,!1,y)&&H,x)for(te=0;te<x.length;te++)$=y.g=x[te],H=Cn($,I,!1,y)&&H}Le.prototype.N=function(){if(Le.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const x=c.g[y];for(let I=0;I<x.length;I++)Z(x[I]);delete c.g[y],c.h--}}this.G=null},Le.prototype.J=function(c,y,x,I){return this.i.add(String(c),y,!1,x,I)},Le.prototype.K=function(c,y,x,I){return this.i.add(String(c),y,!0,x,I)};function Cn(c,y,x,I){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let $=0;$<y.length;++$){const te=y[$];if(te&&!te.da&&te.capture==x){const Pe=te.listener,Ge=te.ha||te.src;te.fa&&Re(c.i,te),H=Pe.call(Ge,I)!==!1&&H}}return H&&!I.defaultPrevented}function ti(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function Ns(c){c.g=ti(()=>{c.g=null,c.i&&(c.i=!1,Ns(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class np extends D{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ns(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(c){D.call(this),this.h=c,this.g={}}m(Ls,D);var Lo=[];function gl(c){ce(c.g,function(y,x){this.g.hasOwnProperty(x)&&be(y)},c),c.g={}}Ls.prototype.N=function(){Ls.Z.N.call(this),gl(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mo=a.JSON.stringify,ip=a.JSON.parse,Ic=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function yl(){}function Ac(){}var Cr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ms(){V.call(this,"d")}m(Ms,V);function Oo(){V.call(this,"c")}m(Oo,V);var Hi={},Ir=null;function Do(){return Ir=Ir||new Le}Hi.Ia="serverreachability";function bc(c){V.call(this,Hi.Ia,c)}m(bc,V);function Ar(c){const y=Do();Be(y,new bc(y))}Hi.STAT_EVENT="statevent";function _l(c,y){V.call(this,Hi.STAT_EVENT,c),this.stat=y}m(_l,V);function jt(c){const y=Do();Be(y,new _l(y,c))}Hi.Ja="timingevent";function kc(c,y){V.call(this,Hi.Ja,c),this.size=y}m(kc,V);function Os(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Ds(){this.g=!0}Ds.prototype.ua=function(){this.g=!1};function rp(c,y,x,I,H,$){c.info(function(){if(c.g)if($){var te="",Pe=$.split("&");for(let Qe=0;Qe<Pe.length;Qe++){var Ge=Pe[Qe].split("=");if(Ge.length>1){const Tt=Ge[0];Ge=Ge[1];const Bn=Tt.split("_");te=Bn.length>=2&&Bn[1]=="type"?te+(Tt+"="+Ge+"&"):te+(Tt+"=redacted&")}}}else te=null;else te=$;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+y+`
`+x+`
`+te})}function sp(c,y,x,I,H,$,te){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+y+`
`+x+`
`+$+" "+te})}function br(c,y,x,I){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+op(c,x)+(I?" "+I:"")})}function vl(c,y){c.info(function(){return"TIMEOUT: "+y})}Ds.prototype.info=function(){};function op(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var x=$[c];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var H=I[0];if(H!="noop"&&H!="stop"&&H!="close")for(let te=1;te<I.length;te++)I[te]=""}}}}return Mo($)}catch{return y}}var Vo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nc;function mn(){}m(mn,yl),mn.prototype.g=function(){return new XMLHttpRequest},Nc=new mn;function ue(c){return encodeURIComponent(String(c))}function Lc(c){var y=1;c=c.split(":");const x=[];for(;y>0&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function ni(c,y,x,I){this.j=c,this.i=y,this.l=x,this.S=I||1,this.V=new Ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wl}function wl(){this.i=null,this.g="",this.h=!1}var xl={},Vs={};function jo(c,y,x){c.M=1,c.A=nt(on(y)),c.u=x,c.R=!0,Wi(c,null)}function Wi(c,y){c.F=Date.now(),zo(c),c.B=on(c.A);var x=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Wo(x.i,"t",I),c.C=0,x=c.j.L,c.h=new wl,c.g=Ol(c.j,x?y:null,!c.u),c.P>0&&(c.O=new np(f(c.Y,c,c.g),c.P)),y=c.V,x=c.g,I=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(Lo[0]=H.toString()),H=Lo);for(let $=0;$<H.length;$++){const te=he(x,H[$],I||y.handleEvent,!1,y.h||y);if(!te)break;y.g[te.key]=te}y=c.J?ne(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Ar(),rp(c.i,c.v,c.B,c.l,c.S,c.u)}ni.prototype.ba=function(c){c=c.target;const y=this.O;y&&wi(c)==3?y.j():this.Y(c)},ni.prototype.Y=function(c){try{if(c==this.g)e:{const Pe=wi(this.g),Ge=this.g.ya(),Qe=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Al(this.g)))){this.K||Pe!=4||Ge==7||(Ge==8||Qe<=0?Ar(3):Ar(2)),Fo(this);var y=this.g.ca();this.X=y;var x=Mc(this);if(this.o=y==200,sp(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,H=this.g;if((I=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(I)){var $=I;break t}}$=null}if(c=$)br(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tl(this,c);else{this.o=!1,this.m=3,jt(12),Vn(this),js(this);break e}}if(this.R){c=!0;let Tt;for(;!this.K&&this.C<x.length;)if(Tt=ap(this,x),Tt==Vs){Pe==4&&(this.m=4,jt(14),c=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==xl){this.m=4,jt(15),br(this.i,this.l,x,"[Invalid Chunk]"),c=!1;break}else br(this.i,this.l,Tt,null),Tl(this,Tt);if(Oc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||x.length!=0||this.h.h||(this.m=1,jt(16),c=!1),this.o=this.o&&c,!c)br(this.i,this.l,x,"[Invalid Chunked Response]"),Vn(this),js(this);else if(x.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ll(te),te.P=!0,jt(11))}}else br(this.i,this.l,x,null),Tl(this,x);Pe==4&&Vn(this),this.o&&!this.K&&(Pe==4?An(this.j,this):(this.o=!1,zo(this)))}else bl(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),Vn(this),js(this)}}}catch{}finally{}};function Mc(c){if(!Oc(c))return c.g.la();const y=Al(c.g);if(y==="")return"";let x="";const I=y.length,H=wi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Vn(c),js(c),"";c.h.i=new a.TextDecoder}for(let $=0;$<I;$++)c.h.h=!0,x+=c.h.i.decode(y[$],{stream:!(H&&$==I-1)});return y.length=0,c.h.g+=x,c.C=0,c.h.g}function Oc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ap(c,y){var x=c.C,I=y.indexOf(`
`,x);return I==-1?Vs:(x=Number(y.substring(x,I)),isNaN(x)?xl:(I+=1,I+x>y.length?Vs:(y=y.slice(I,I+x),c.C=I+x,y)))}ni.prototype.cancel=function(){this.K=!0,Vn(this)};function zo(c){c.T=Date.now()+c.H,Dc(c,c.H)}function Dc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Os(f(c.aa,c),y)}function Fo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}ni.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(vl(this.i,this.B),this.M!=2&&(Ar(),jt(17)),Vn(this),this.m=2,js(this)):Dc(this,this.T-c)};function js(c){c.j.I==0||c.K||An(c.j,c)}function Vn(c){Fo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,gl(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Tl(c,y){try{var x=c.j;if(x.I!=0&&(x.g==c||zs(x.h,c))){if(!c.L&&zs(x.h,c)&&x.I==3){try{var I=x.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<c.F)Ko(x),Go(x);else break e;Nl(x),jt(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Os(f(x.Va,x),6e3));zc(x.h)<=1&&x.ta&&(x.ta=void 0)}else Ti(x,11)}else if((c.L||x.g==c)&&Ko(x),!M(y))for(H=x.Ba.g.parse(y),y=0;y<H.length;y++){let Qe=H[y];const Tt=Qe[0];if(!(Tt<=x.K))if(x.K=Tt,Qe=Qe[1],x.I==2)if(Qe[0]=="c"){x.M=Qe[1],x.ba=Qe[2];const Bn=Qe[3];Bn!=null&&(x.ka=Bn,x.j.info("VER="+x.ka));const si=Qe[4];si!=null&&(x.za=si,x.j.info("SVER="+x.za));const Un=Qe[5];Un!=null&&typeof Un=="number"&&Un>0&&(I=1.5*Un,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Ei=c.g;if(Ei){const Xo=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xo){var $=I.h;$.g||Xo.indexOf("spdy")==-1&&Xo.indexOf("quic")==-1&&Xo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&($i($,$.h),$.h=null))}if(I.G){const Jo=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(I.wa=Jo,ae(I.J,I.G,Jo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-c.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var te=c;if(I.na=Ml(I,I.L?I.ba:null,I.W),te.L){El(I.h,te);var Pe=te,Ge=I.O;Ge&&(Pe.H=Ge),Pe.D&&(Fo(Pe),zo(Pe)),I.g=te}else Rl(I);x.i.length>0&&xi(x)}else Qe[0]!="stop"&&Qe[0]!="close"||Ti(x,7);else x.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Ti(x,7):Oe(x):Qe[0]!="noop"&&x.l&&x.l.qa(Qe),x.A=0)}}Ar(4)}catch{}}var lp=class{constructor(c,y){this.g=c,this.map=y}};function Vc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function zc(c){return c.h?1:c.g?c.g.size:0}function zs(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function $i(c,y){c.g?c.g.add(y):c.h=y}function El(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Vc.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Pl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.G);return y}return T(c.i)}var kr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ue(c,y){if(c){c=c.split("&");for(let x=0;x<c.length;x++){const I=c[x].indexOf("=");let H,$=null;I>=0?(H=c[x].substring(0,I),$=c[x].substring(I+1)):H=c[x],y(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function qe(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof qe?(this.l=c.l,jn(this,c.j),this.o=c.o,this.g=c.g,zn(this,c.u),this.h=c.h,Fs(this,Bs(c.i)),this.m=c.m):c&&(y=String(c).match(kr))?(this.l=!1,jn(this,y[1]||"",!0),this.o=qi(y[2]||""),this.g=qi(y[3]||"",!0),zn(this,y[4]),this.h=qi(y[5]||"",!0),Fs(this,y[6]||"",!0),this.m=qi(y[7]||"")):(this.l=!1,this.i=new ii(null,this.l))}qe.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(yi(y,Fc,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(yi(y,Fc,!0),"@"),c.push(ue(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&c.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(yi(x,x.charAt(0)=="/"?Gi:Bo,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",yi(x,Zi)),c.join("")},qe.prototype.resolve=function(c){const y=on(this);let x=!!c.j;x?jn(y,c.j):x=!!c.o,x?y.o=c.o:x=!!c.g,x?y.g=c.g:x=c.u!=null;var I=c.h;if(x)zn(y,c.u);else if(x=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var H=y.h.lastIndexOf("/");H!=-1&&(I=y.h.slice(0,H+1)+I)}if(H=I,H==".."||H==".")I="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){I=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let te=0;te<H.length;){const Pe=H[te++];Pe=="."?I&&te==H.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),I&&te==H.length&&$.push("")):($.push(Pe),I=!0)}I=$.join("/")}else I=H}return x?y.h=I:x=c.i.toString()!=="",x?Fs(y,Bs(c.i)):x=!!c.m,x&&(y.m=c.m),y};function on(c){return new qe(c)}function jn(c,y,x){c.j=x?qi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function zn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Fs(c,y,x){y instanceof ii?(c.i=y,Sl(c.i,c.l)):(x||(y=yi(y,wt)),c.i=new ii(y,c.l))}function ae(c,y,x){c.i.set(y,x)}function nt(c){return ae(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function qi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function yi(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,gn),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function gn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Fc=/[#\/\?@]/g,Bo=/[#\?:]/g,Gi=/[#\?]/g,wt=/[#\?@]/g,Zi=/#/g;function ii(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function In(c){c.g||(c.g=new Map,c.h=0,c.i&&Ue(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=ii.prototype,t.add=function(c,y){In(this),this.i=null,c=_i(this,c);let x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function Uo(c,y){In(c),y=_i(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Rr(c,y){return In(c),y=_i(c,y),c.g.has(y)}t.forEach=function(c,y){In(this),this.g.forEach(function(x,I){x.forEach(function(H){c.call(y,H,I,this)},this)},this)};function Ho(c,y){In(c);let x=[];if(typeof y=="string")Rr(c,y)&&(x=x.concat(c.g.get(_i(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)x=x.concat(c[y]);return x}t.set=function(c,y){return In(this),this.i=null,c=_i(this,c),Rr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=Ho(this,c),c.length>0?String(c[0]):y):y};function Wo(c,y,x){Uo(c,y),x.length>0&&(c.i=null,c.g.set(_i(c,y),T(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var x=y[I];const H=ue(x);x=Ho(this,x);for(let $=0;$<x.length;$++){let te=H;x[$]!==""&&(te+="="+ue(x[$])),c.push(te)}}return this.i=c.join("&")};function Bs(c){const y=new ii;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function _i(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Sl(c,y){y&&!c.j&&(In(c),c.i=null,c.g.forEach(function(x,I){const H=I.toLowerCase();I!=H&&(Uo(this,I),Wo(this,H,x))},c)),c.j=y}function $o(c,y){const x=new Ds;if(a.Image){const I=new Image;I.onload=g(Fn,x,"TestLoadImage: loaded",!0,y,I),I.onerror=g(Fn,x,"TestLoadImage: error",!1,y,I),I.onabort=g(Fn,x,"TestLoadImage: abort",!1,y,I),I.ontimeout=g(Fn,x,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else y(!1)}function Bc(c,y){const x=new Ds,I=new AbortController,H=setTimeout(()=>{I.abort(),Fn(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:I.signal}).then($=>{clearTimeout(H),$.ok?Fn(x,"TestPingServer: ok",!0,y):Fn(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Fn(x,"TestPingServer: error",!1,y)})}function Fn(c,y,x,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(x)}catch{}}function up(){this.g=new Ic}function Ee(c){this.i=c.Sb||null,this.h=c.ab||!1}m(Ee,yl),Ee.prototype.g=function(){return new an(this.i,this.h)};function an(c,y){Le.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(an,Le),t=an.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Ki(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Je(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Je(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Nr(this):Ki(this),this.readyState==3&&Je(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Nr(this))},t.Na=function(c){this.g&&(this.response=c,Nr(this))},t.ga=function(){this.g&&Nr(this)};function Nr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Ki(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function Ki(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(an.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qo(c){let y="";return ce(c,function(x,I){y+=I,y+=":",y+=x,y+=`\r
`}),y}function Us(c,y,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=qo(x),typeof c=="string"?x!=null&&ue(x):ae(c,y,x))}function Ke(c){Le.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ke,Le);var Cl=/^https?$/i,Hs=["POST","PUT"];t=Ke.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){It(this,$);return}if(c=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)x.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())x.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find($=>$.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Hs,y,void 0)>=0)||I||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,te]of x)this.g.setRequestHeader($,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){It(this,$)}};function It(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,vi(c),Ws(c)}function vi(c){c.A||(c.A=!0,Be(c,"complete"),Be(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Be(this,"complete"),Be(this,"abort"),Ws(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ws(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Il(this):this.Xa())},t.Xa=function(){Il(this)};function Il(c){if(c.h&&typeof o<"u"){if(c.v&&wi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Be(c,"readystatechange"),wi(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var I;if(I=$===0){let te=String(c.D).match(kr)[1]||null;!te&&a.self&&a.self.location&&(te=a.self.location.protocol.slice(0,-1)),I=!Cl.test(te?te.toLowerCase():"")}x=I}if(x)Be(c,"complete"),Be(c,"success");else{c.o=6;try{var H=wi(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",vi(c)}}finally{Ws(c)}}}}function Ws(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const x=c.g;c.g=null,y||Be(c,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function wi(c){return c.g?c.g.readyState:0}t.ca=function(){try{return wi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),ip(y)}};function Al(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function bl(c){const y={};c=(c.g&&wi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(M(c[I]))continue;var x=Lc(c[I]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const $=y[H]||[];y[H]=$,$.push(x)}J(y,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $s(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function kl(c){this.za=0,this.i=[],this.j=new Ds,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$s("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$s("baseRetryDelayMs",5e3,c),this.Za=$s("retryDelaySeedMs",1e4,c),this.Ta=$s("forwardChannelMaxRetries",2,c),this.va=$s("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Vc(c&&c.concurrentRequestLimit),this.Ba=new up,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=kl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,x,I){jt(0),this.W=c,this.H=y||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=Ml(this,null,this.W),xi(this)};function Oe(c){if(yn(c),c.I==3){var y=c.V++,x=on(c.J);if(ae(x,"SID",c.M),ae(x,"RID",y),ae(x,"TYPE","terminate"),Qi(c,x),y=new ni(c,c.j,y),y.M=2,y.A=nt(on(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=y.A,x=!0),x||(y.g=Ol(y.j,null),y.g.ea(y.A)),y.F=Date.now(),zo(y)}ri(c)}function Go(c){c.g&&(Ll(c),c.g.cancel(),c.g=null)}function yn(c){Go(c),c.v&&(a.clearTimeout(c.v),c.v=null),Ko(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function xi(c){if(!jc(c.h)&&!c.m){c.m=!0;var y=c.Ea;q||S(),B||(q(),B=!0),A.add(y,c),c.D=0}}function Uc(c,y){return zc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Os(f(c.Ea,c,y),$c(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new ni(this,this.j,c);let $=this.o;if(this.U&&($?($=ne($),tt($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Wc(this,H,y),x=on(this.J),ae(x,"RID",c),ae(x,"CVER",22),this.G&&ae(x,"X-HTTP-Session-Id",this.G),Qi(this,x),$&&(this.R?y="headers="+ue(qo($))+"&"+y:this.u&&Us(x,this.u,$)),$i(this.h,H),this.Ra&&ae(x,"TYPE","init"),this.S?(ae(x,"$req",y),ae(x,"SID","null"),H.U=!0,jo(H,x,null)):jo(H,x,y),this.I=2}}else this.I==3&&(c?Hc(this,c):this.i.length==0||jc(this.h)||Hc(this))};function Hc(c,y){var x;y?x=y.l:x=c.V++;const I=on(c.J);ae(I,"SID",c.M),ae(I,"RID",x),ae(I,"AID",c.K),Qi(c,I),c.u&&c.o&&Us(I,c.u,c.o),x=new ni(c,c.j,x,c.D+1),c.u===null&&(x.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Wc(c,x,1e3),x.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),$i(c.h,x),jo(x,I,y)}function Qi(c,y){c.H&&ce(c.H,function(x,I){ae(y,I,x)}),c.l&&ce({},function(x,I){ae(y,I,x)})}function Wc(c,y,x){x=Math.min(c.i.length,x);const I=c.l?f(c.l.Ka,c.l,c):null;e:{var H=c.i;let Pe=-1;for(;;){const Ge=["count="+x];Pe==-1?x>0?(Pe=H[0].g,Ge.push("ofs="+Pe)):Pe=0:Ge.push("ofs="+Pe);let Qe=!0;for(let Tt=0;Tt<x;Tt++){var $=H[Tt].g;const Bn=H[Tt].map;if($-=Pe,$<0)Pe=Math.max(0,H[Tt].g-100),Qe=!1;else try{$="req"+$+"_"||"";try{var te=Bn instanceof Map?Bn:Object.entries(Bn);for(const[si,Un]of te){let Ei=Un;u(Un)&&(Ei=Mo(Un)),Ge.push($+si+"="+encodeURIComponent(Ei))}}catch(si){throw Ge.push($+"type="+encodeURIComponent("_badmap")),si}}catch{I&&I(Bn)}}if(Qe){te=Ge.join("&");break e}}te=void 0}return c=c.i.splice(0,x),y.G=c,te}function Rl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;q||S(),B||(q(),B=!0),A.add(y,c),c.A=0}}function Nl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Os(f(c.Da,c),$c(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Zo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Os(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),Go(this),Zo(this))};function Ll(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Zo(c){c.g=new ni(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=on(c.na);ae(y,"RID","rpc"),ae(y,"SID",c.M),ae(y,"AID",c.K),ae(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&ae(y,"TO",c.ia),ae(y,"TYPE","xmlhttp"),Qi(c,y),c.u&&c.o&&Us(y,c.u,c.o),c.O&&(c.g.H=c.O);var x=c.g;c=c.ba,x.M=1,x.A=nt(on(y)),x.u=null,x.R=!0,Wi(x,c)}t.Va=function(){this.C!=null&&(this.C=null,Go(this),Nl(this),jt(19))};function Ko(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function An(c,y){var x=null;if(c.g==y){Ko(c),Ll(c),c.g=null;var I=2}else if(zs(c.h,y))x=y.G,El(c.h,y),I=1;else return;if(c.I!=0){if(y.o)if(I==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;I=Do(),Be(I,new kc(I,x)),xi(c)}else Rl(c);else if(H=y.m,H==3||H==0&&y.X>0||!(I==1&&Uc(c,y)||I==2&&Nl(c)))switch(x&&x.length>0&&(y=c.h,y.i=y.i.concat(x)),H){case 1:Ti(c,5);break;case 4:Ti(c,10);break;case 3:Ti(c,6);break;default:Ti(c,2)}}}function $c(c,y){let x=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(x*=2),x*y}function Ti(c,y){if(c.j.info("Error code "+y),y==2){var x=f(c.bb,c),I=c.Ua;const H=!I;I=new qe(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jn(I,"https"),nt(I),H?$o(I.toString(),x):Bc(I.toString(),x)}else jt(2);c.I=0,c.l&&c.l.pa(y),ri(c),yn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function ri(c){if(c.I=0,c.ja=[],c.l){const y=Pl(c.h);(y.length!=0||c.i.length!=0)&&(k(c.ja,y),k(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function Ml(c,y,x){var I=x instanceof qe?on(x):new qe(x);if(I.g!="")y&&(I.g=y+"."+I.g),zn(I,I.u);else{var H=a.location;I=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const $=new qe(null);I&&jn($,I),y&&($.g=y),H&&zn($,H),x&&($.h=x),I=$}return x=c.G,y=c.wa,x&&y&&ae(I,x,y),ae(I,"VER",c.ka),Qi(c,I),I}function Ol(c,y,x){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ke(new Ee({ab:x})):new Ke(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qo(){}t=Qo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Yo(){}Yo.prototype.g=function(c,y){return new Kt(c,y)};function Kt(c,y){Le.call(this),this.g=new kl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!M(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Lr(this)}m(Kt,Le),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Oe(this.g)},Kt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.v&&(x={},x.__data__=Mo(c),c=x);y.i.push(new lp(y.Ya++,c)),y.I==3&&xi(y)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Oe(this.g),delete this.g,Kt.Z.N.call(this)};function Dl(c){Ms.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}m(Dl,Ms);function qc(){Oo.call(this),this.status=1}m(qc,Oo);function Lr(c){this.g=c}m(Lr,Qo),Lr.prototype.ra=function(){Be(this.g,"a")},Lr.prototype.qa=function(c){Be(this.g,new Dl(c))},Lr.prototype.pa=function(c){Be(this.g,new qc)},Lr.prototype.oa=function(){Be(this.g,"b")},Yo.prototype.createWebChannel=Yo.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,KS=function(){return new Yo},ZS=function(){return Do()},GS=Hi,Rg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vo.NO_ERROR=0,Vo.TIMEOUT=8,Vo.HTTP_ERROR=6,Zh=Vo,Rc.COMPLETE="complete",qS=Rc,Ac.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",Le.prototype.listen=Le.prototype.J,ru=Ac,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,$S=Ke}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});const fx="@firebase/firestore",px="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new y_("@firebase/firestore");function aa(){return vo.logLevel}function oe(t,...e){if(vo.logLevel<=je.DEBUG){const n=e.map(w_);vo.debug(`Firestore (${hl}): ${t}`,...n)}}function vr(t,...e){if(vo.logLevel<=je.ERROR){const n=e.map(w_);vo.error(`Firestore (${hl}): ${t}`,...n)}}function Xa(t,...e){if(vo.logLevel<=je.WARN){const n=e.map(w_);vo.warn(`Firestore (${hl}): ${t}`,...n)}}function w_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,QS(t,i,n)}function QS(t,e,n){let i=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw vr(i),new Error(i)}function Ye(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||QS(e,r,i)}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class bV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kV{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ds,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ds)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ye(typeof i.accessToken=="string",31837,{l:i}),new YS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class RV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new RV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const i=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=MV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function ze(t,e){return t<e?-1:t>e?1:0}function Ng(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return om(r)===om(o)?ze(r,o):om(r)?1:-1}return ze(t.length,e.length)}const OV=55296,DV=57343;function om(t){const e=t.charCodeAt(0);return e>=OV&&e<=DV}function Ja(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="__name__";class Ii{constructor(e,n,i){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&xe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Ii.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return ze(e.length,n.length)}static compareSegments(e,n){const i=Ii.isNumericId(e),r=Ii.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Ii.extractNumericId(e).compare(Ii.extractNumericId(n)):Ng(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class at extends Ii{construct(e,n,i){return new at(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new at(n)}static emptyPath(){return new at([])}}const VV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Ii{construct(e,n,i){return new $t(e,n,i)}static isValidIdentifier(e){return VV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gx}static keyField(){return new $t([gx])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new de(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new de(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new de(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new de(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(at.fromString(e))}static fromName(e){return new me(at.fromString(e).popFirst(5))}static empty(){return new me(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t,e,n){if(!n)throw new de(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jV(t,e,n,i){if(e===!0&&i===!0)throw new de(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yx(t){if(!me.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _x(t){if(me.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function T_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=T_(t);throw new de(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t,e){const n={typeString:t};return e&&(n.value=e),n}function yc(t,e){if(!JS(t))throw new de(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new de(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=-62135596800,wx=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*wx);return new lt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vx)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wx}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Nt("string",lt._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new lt(0,0))}static max(){return new Se(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=-1;function zV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new lt(n+1,0):new lt(n,i));return new ws(r,me.empty(),e)}function FV(t){return new ws(t.readTime,t.key,Yu)}class ws{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ws(Se.min(),me.empty(),Yu)}static max(){return new ws(Se.max(),me.empty(),Yu)}}function BV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==UV)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(g=>{a[f]=g,++u,u===o&&i(a)},g=>r(g))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function WV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=-1;function jf(t){return t==null}function Bd(t){return t===0&&1/t==-1/0}function $V(t){return typeof t=="number"&&Number.isInteger(t)&&!Bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="";function qV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xx(e)),e=GV(t.get(n),e);return xx(e)}function GV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case eC:n+="";break;default:n+=o}}return n}function xx(t){return t+eC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ch(this.root,e,this.comparator,!0)}}class Ch{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Wt.RED,this.left=r??Wt.EMPTY,this.right=o??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Wt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Wt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ex(this.data.getIterator())}getIteratorFrom(e){return new Ex(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class Ex{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new di([])}unionWith(e){let n=new Vt($t.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nC("Invalid base64 string: "+o):o}}(e);return new Zt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const ZV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(t){if(Ye(!!t,39018),typeof t=="string"){let e=0;const n=ZV.exec(t);if(Ye(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?Zt.fromBase64String(t):Zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="server_timestamp",rC="__type__",sC="__previous_value__",oC="__local_write_time__";function P_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rC])==null?void 0:i.stringValue)===iC}function zf(t){const e=t.mapValue.fields[sC];return P_(e)?zf(e):e}function Xu(t){const e=xs(t.mapValue.fields[oC].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n,i,r,o,a,u,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const Ud="(default)";class Ju{constructor(e,n){this.projectId=e,this.database=n||Ud}static empty(){return new Ju("","")}get isDefaultDatabase(){return this.database===Ud}isEqual(e){return e instanceof Ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="__type__",QV="__max__",Ih={mapValue:{}},lC="__vector__",Hd="value";function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?P_(t)?4:XV(t)?9007199254740991:YV(t)?10:11:xe(28295,{value:t})}function Fi(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xu(t).isEqual(Xu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=xs(r.timestampValue),u=xs(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Ts(r.bytesValue).isEqual(Ts(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Et(r.geoPointValue.latitude)===Et(o.geoPointValue.latitude)&&Et(r.geoPointValue.longitude)===Et(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Et(r.integerValue)===Et(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=Et(r.doubleValue),u=Et(o.doubleValue);return a===u?Bd(a)===Bd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ja(t.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(Tx(a)!==Tx(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Fi(a[h],u[h])))return!1;return!0}(t,e);default:return xe(52216,{left:t})}}function ec(t,e){return(t.values||[]).find(n=>Fi(n,e))!==void 0}function el(t,e){if(t===e)return 0;const n=Es(t),i=Es(e);if(n!==i)return ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=Et(o.integerValue||o.doubleValue),h=Et(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Px(t.timestampValue,e.timestampValue);case 4:return Px(Xu(t),Xu(e));case 5:return Ng(t.stringValue,e.stringValue);case 6:return function(o,a){const u=Ts(o),h=Ts(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=ze(u[f],h[f]);if(g!==0)return g}return ze(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=ze(Et(o.latitude),Et(a.latitude));return u!==0?u:ze(Et(o.longitude),Et(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sx(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,T,k,R;const u=o.fields||{},h=a.fields||{},f=(v=u[Hd])==null?void 0:v.arrayValue,g=(T=h[Hd])==null?void 0:T.arrayValue,m=ze(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((R=g==null?void 0:g.values)==null?void 0:R.length)||0);return m!==0?m:Sx(f,g)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ih.mapValue&&a===Ih.mapValue)return 0;if(o===Ih.mapValue)return 1;if(a===Ih.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let m=0;m<h.length&&m<g.length;++m){const v=Ng(h[m],g[m]);if(v!==0)return v;const T=el(u[h[m]],f[g[m]]);if(T!==0)return T}return ze(h.length,g.length)}(t.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function Px(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=xs(t),i=xs(e),r=ze(n.seconds,i.seconds);return r!==0?r:ze(n.nanos,i.nanos)}function Sx(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=el(n[r],i[r]);if(o)return o}return ze(n.length,i.length)}function tl(t){return Lg(t)}function Lg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=xs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Lg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Lg(n.fields[a])}`;return r+"}"}(t.mapValue):xe(61005,{value:t})}function Kh(t){switch(Es(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zf(t);return e?16+Kh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Kh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Ao(i.fields,(o,a)=>{r+=o.length+Kh(a)}),r}(t.mapValue);default:throw xe(13486,{value:t})}}function Mg(t){return!!t&&"integerValue"in t}function S_(t){return!!t&&"arrayValue"in t}function Cx(t){return!!t&&"nullValue"in t}function Ix(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qh(t){return!!t&&"mapValue"in t}function YV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[aC])==null?void 0:i.stringValue)===lC}function Tu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ao(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Tu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tu(t.arrayValue.values[n]);return e}return{...t}}function XV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===QV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(n)}setAll(e){let n=$t.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Tu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Qh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ao(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Kn(Tu(this.value))}}function uC(t){const e=[];return Ao(t.fields,(n,i)=>{const r=new $t([n]);if(Qh(i)){const o=uC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new nn(e,0,Se.min(),Se.min(),Se.min(),Kn.empty(),0)}static newFoundDocument(e,n,i,r){return new nn(e,1,n,Se.min(),i,r,0)}static newNoDocument(e,n){return new nn(e,2,n,Se.min(),Se.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Se.min(),Se.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n){this.position=e,this.inclusive=n}}function Ax(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=me.comparator(me.fromName(a.referenceValue),n.key):i=el(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function bx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n="asc"){this.field=e,this.dir=n}}function JV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{}class Mt extends cC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new t4(e,n,i):n==="array-contains"?new r4(e,i):n==="in"?new s4(e,i):n==="not-in"?new o4(e,i):n==="array-contains-any"?new a4(e,i):new Mt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new n4(e,i):new i4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(el(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(el(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends cC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Bi(e,n)}matches(e){return hC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hC(t){return t.op==="and"}function dC(t){return e4(t)&&hC(t)}function e4(t){for(const e of t.filters)if(e instanceof Bi)return!1;return!0}function Og(t){if(t instanceof Mt)return t.field.canonicalString()+t.op.toString()+tl(t.value);if(dC(t))return t.filters.map(e=>Og(e)).join(",");{const e=t.filters.map(n=>Og(n)).join(",");return`${t.op}(${e})`}}function fC(t,e){return t instanceof Mt?function(i,r){return r instanceof Mt&&i.op===r.op&&i.field.isEqual(r.field)&&Fi(i.value,r.value)}(t,e):t instanceof Bi?function(i,r){return r instanceof Bi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&fC(a,r.filters[u]),!0):!1}(t,e):void xe(19439)}function pC(t){return t instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${tl(n.value)}`}(t):t instanceof Bi?function(n){return n.op.toString()+" {"+n.getFilters().map(pC).join(" ,")+"}"}(t):"Filter"}class t4 extends Mt{constructor(e,n,i){super(e,n,i),this.key=me.fromName(i.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class n4 extends Mt{constructor(e,n){super(e,"in",n),this.keys=mC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class i4 extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=mC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>me.fromName(i.referenceValue))}class r4 extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return S_(n)&&ec(n.arrayValue,this.value)}}class s4 extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ec(this.value.arrayValue,n)}}class o4 extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ec(this.value.arrayValue,n)}}class a4 extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!S_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ec(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function kx(t,e=null,n=[],i=[],r=null,o=null,a=null){return new l4(t,e,n,i,r,o,a)}function C_(t){const e=Ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Og(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),jf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>tl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>tl(i)).join(",")),e.Te=n}return e.Te}function I_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bx(t.startAt,e.startAt)&&bx(t.endAt,e.endAt)}function Dg(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function u4(t,e,n,i,r,o,a,u){return new Ff(t,e,n,i,r,o,a,u)}function A_(t){return new Ff(t)}function Rx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function c4(t){return t.collectionGroup!==null}function Eu(t){const e=Ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Vt($t.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new $d(o,i))}),n.has($t.keyField().canonicalString())||e.Ie.push(new $d($t.keyField(),i))}return e.Ie}function Li(t){const e=Ae(t);return e.Ee||(e.Ee=h4(e,Eu(t))),e.Ee}function h4(t,e){if(t.limitType==="F")return kx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new $d(r.field,o)});const n=t.endAt?new Wd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Wd(t.startAt.position,t.startAt.inclusive):null;return kx(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Vg(t,e,n){return new Ff(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bf(t,e){return I_(Li(t),Li(e))&&t.limitType===e.limitType}function gC(t){return`${C_(Li(t))}|lt:${t.limitType}`}function la(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>pC(r)).join(", ")}]`),jf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>tl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>tl(r)).join(",")),`Target(${i})`}(Li(t))}; limitType=${t.limitType})`}function Uf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Eu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=Ax(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,Eu(i),r)||i.endAt&&!function(a,u,h){const f=Ax(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,Eu(i),r))}(t,e)}function d4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yC(t){return(e,n)=>{let i=!1;for(const r of Eu(t)){const o=f4(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function f4(t,e,n){const i=t.field.isKeyField()?me.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?el(h,f):xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return tC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=new _t(me.comparator);function wr(){return p4}const _C=new _t(me.comparator);function su(...t){let e=_C;for(const n of t)e=e.insert(n.key,n);return e}function vC(t){let e=_C;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ro(){return Pu()}function wC(){return Pu()}function Pu(){return new bo(t=>t.toString(),(t,e)=>t.isEqual(e))}const m4=new _t(me.comparator),g4=new Vt(me.comparator);function Fe(...t){let e=g4;for(const n of t)e=e.add(n);return e}const y4=new Vt(ze);function _4(){return y4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function xC(t){return{integerValue:""+t}}function v4(t,e){return $V(e)?xC(e):b_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this._=void 0}}function w4(t,e,n){return t instanceof qd?function(r,o){const a={fields:{[rC]:{stringValue:iC},[oC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&P_(o)&&(o=zf(o)),o&&(a.fields[sC]=o),{mapValue:a}}(n,e):t instanceof tc?EC(t,e):t instanceof nc?PC(t,e):function(r,o){const a=TC(r,o),u=Nx(a)+Nx(r.Ae);return Mg(a)&&Mg(r.Ae)?xC(u):b_(r.serializer,u)}(t,e)}function x4(t,e,n){return t instanceof tc?EC(t,e):t instanceof nc?PC(t,e):n}function TC(t,e){return t instanceof Gd?function(i){return Mg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class qd extends Hf{}class tc extends Hf{constructor(e){super(),this.elements=e}}function EC(t,e){const n=SC(e);for(const i of t.elements)n.some(r=>Fi(r,i))||n.push(i);return{arrayValue:{values:n}}}class nc extends Hf{constructor(e){super(),this.elements=e}}function PC(t,e){let n=SC(e);for(const i of t.elements)n=n.filter(r=>!Fi(r,i));return{arrayValue:{values:n}}}class Gd extends Hf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Nx(t){return Et(t.integerValue||t.doubleValue)}function SC(t){return S_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function T4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof tc&&r instanceof tc||i instanceof nc&&r instanceof nc?Ja(i.elements,r.elements,Fi):i instanceof Gd&&r instanceof Gd?Fi(i.Ae,r.Ae):i instanceof qd&&r instanceof qd}(t.transform,e.transform)}class E4{constructor(e,n){this.version=e,this.transformResults=n}}class Mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wf{}function CC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k_(t.key,Mi.none()):new _c(t.key,t.data,Mi.none());{const n=t.data,i=Kn.empty();let r=new Vt($t.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new ko(t.key,i,new di(r.toArray()),Mi.none())}}function P4(t,e,n){t instanceof _c?function(r,o,a){const u=r.value.clone(),h=Mx(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ko?function(r,o,a){if(!Yh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Mx(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(IC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Su(t,e,n,i){return t instanceof _c?function(o,a,u,h){if(!Yh(o.precondition,a))return u;const f=o.value.clone(),g=Ox(o.fieldTransforms,h,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof ko?function(o,a,u,h){if(!Yh(o.precondition,a))return u;const f=Ox(o.fieldTransforms,h,a),g=a.data;return g.setAll(IC(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(o,a,u){return Yh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function S4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=TC(i.transform,r||null);o!=null&&(n===null&&(n=Kn.empty()),n.set(i.field,o))}return n||null}function Lx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ja(i,r,(o,a)=>T4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _c extends Wf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ko extends Wf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function IC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Mx(t,e,n){const i=new Map;Ye(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,x4(a,u,n[r]))}return i}function Ox(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,w4(o,a,e))}return i}class k_ extends Wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C4 extends Wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&P4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Su(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Su(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=wC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=CC(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(n,i)=>Lx(n,i))&&Ja(this.baseMutations,e.baseMutations,(n,i)=>Lx(n,i))}}class R_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ye(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return m4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new R_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,He;function k4(t){switch(t){case Y.OK:return xe(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return xe(15467,{code:t})}}function AC(t){if(t===void 0)return vr("GRPC error has no .code"),Y.UNKNOWN;switch(t){case bt.OK:return Y.OK;case bt.CANCELLED:return Y.CANCELLED;case bt.UNKNOWN:return Y.UNKNOWN;case bt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case bt.INTERNAL:return Y.INTERNAL;case bt.UNAVAILABLE:return Y.UNAVAILABLE;case bt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case bt.NOT_FOUND:return Y.NOT_FOUND;case bt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case bt.ABORTED:return Y.ABORTED;case bt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case bt.DATA_LOSS:return Y.DATA_LOSS;default:return xe(39323,{code:t})}}(He=bt||(bt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=new hs([4294967295,4294967295],0);function Dx(t){const e=R4().encode(t),n=new WS;return n.update(e),new Uint8Array(n.digest())}function Vx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hs([n,i],0),new hs([r,o],0)]}class N_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ou(`Invalid padding: ${n}`);if(i<0)throw new ou(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ou(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(hs.fromNumber(i)));return r.compare(N4)===1&&(r=new hs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Dx(e),[i,r]=Vx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new N_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Dx(e),[i,r]=Vx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new $f(Se.min(),r,new _t(ze),wr(),Fe())}}class vc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new vc(i,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class bC{constructor(e,n){this.targetId=e,this.Ce=n}}class kC{constructor(e,n,i=Zt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class jx{constructor(){this.ve=0,this.Fe=zx(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),i=Fe();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:xe(38017,{changeType:o})}}),new vc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=zx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class L4{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=Ah(),this.He=Ah(),this.Ye=new _t(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Dg(o))if(i===0){const a=new me(o.path);this.et(n,a,nn.newNoDocument(a,Se.min()))}else Ye(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=Ts(i).toUint8Array()}catch(h){if(h instanceof nC)return Xa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new N_(a,r,o)}catch(h){return Xa(h instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Dg(u.target)){const h=new me(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,nn.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Fe();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new $f(e,n,this.Ye,this.je,i);return this.je=wr(),this.Je=Ah(),this.He=Ah(),this.Ye=new _t(ze),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new jx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ah(){return new _t(me.comparator)}function zx(){return new _t(me.comparator)}const M4={asc:"ASCENDING",desc:"DESCENDING"},O4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D4={and:"AND",or:"OR"};class V4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jg(t,e){return t.useProto3Json||jf(e)?e:{value:e}}function Zd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j4(t,e){return Zd(t,e.toTimestamp())}function Oi(t){return Ye(!!t,49232),Se.fromTimestamp(function(n){const i=xs(n);return new lt(i.seconds,i.nanos)}(t))}function L_(t,e){return zg(t,e).canonicalString()}function zg(t,e){const n=function(r){return new at(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NC(t){const e=at.fromString(t);return Ye(VC(e),10190,{key:e.toString()}),e}function Fg(t,e){return L_(t.databaseId,e.path)}function am(t,e){const n=NC(e);if(n.get(1)!==t.databaseId.projectId)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(MC(n))}function LC(t,e){return L_(t.databaseId,e)}function z4(t){const e=NC(t);return e.length===4?at.emptyPath():MC(e)}function Bg(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MC(t){return Ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Fx(t,e,n){return{name:Fg(t,e),fields:n.value.mapValue.fields}}function F4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:xe(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(Ye(g===void 0||typeof g=="string",58123),Zt.fromBase64String(g||"")):(Ye(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Zt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const g=f.code===void 0?Y.UNKNOWN:AC(f.code);return new de(g,f.message||"")}(a);n=new kC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=am(t,i.document.name),o=Oi(i.document.updateTime),a=i.document.createTime?Oi(i.document.createTime):Se.min(),u=new Kn({mapValue:{fields:i.document.fields}}),h=nn.newFoundDocument(r,o,a,u),f=i.targetIds||[],g=i.removedTargetIds||[];n=new Xh(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=am(t,i.document),o=i.readTime?Oi(i.readTime):Se.min(),a=nn.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Xh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=am(t,i.document),o=i.removedTargetIds||[];n=new Xh([],o,r,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new b4(r,o),u=i.targetId;n=new bC(u,a)}}return n}function B4(t,e){let n;if(e instanceof _c)n={update:Fx(t,e.key,e.value)};else if(e instanceof k_)n={delete:Fg(t,e.key)};else if(e instanceof ko)n={update:Fx(t,e.key,e.data),updateMask:Q4(e.fieldMask)};else{if(!(e instanceof C4))return xe(16599,{Vt:e.type});n={verify:Fg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof qd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof tc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof nc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Gd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw xe(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:j4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:xe(27497)}(t,e.precondition)),n}function U4(t,e){return t&&t.length>0?(Ye(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Oi(r.updateTime):Oi(o);return a.isEqual(Se.min())&&(a=Oi(o)),new E4(a,r.transformResults||[])}(n,e))):[]}function H4(t,e){return{documents:[LC(t,e.path)]}}function W4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=LC(t,r);const o=function(f){if(f.length!==0)return DC(Bi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(g=>function(v){return{field:ua(v.field),direction:G4(v.dir)}}(g))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=jg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function $4(t){let e=z4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ye(i===1,65062);const g=n.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(m){const v=OC(m);return v instanceof Bi&&dC(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(v=>function(k){return new $d(ca(k.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(m){let v;return v=typeof m=="object"?m.value:m,jf(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(m){const v=!!m.before,T=m.values||[];return new Wd(T,v)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const v=!m.before,T=m.values||[];return new Wd(T,v)}(n.endAt)),u4(e,r,a,o,u,"F",h,f)}function q4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ca(n.unaryFilter.field);return Mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ca(n.unaryFilter.field);return Mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ca(n.unaryFilter.field);return Mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ca(n.unaryFilter.field);return Mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Mt.create(ca(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bi.create(n.compositeFilter.filters.map(i=>OC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(t):xe(30097,{filter:t})}function G4(t){return M4[t]}function Z4(t){return O4[t]}function K4(t){return D4[t]}function ua(t){return{fieldPath:t.canonicalString()}}function ca(t){return $t.fromServerFormat(t.fieldPath)}function DC(t){return t instanceof Mt?function(n){if(n.op==="=="){if(Ix(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NAN"}};if(Cx(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ix(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NAN"}};if(Cx(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(n.field),op:Z4(n.op),value:n.value}}}(t):t instanceof Bi?function(n){const i=n.getFilters().map(r=>DC(r));return i.length===1?i[0]:{compositeFilter:{op:K4(n.op),filters:i}}}(t):xe(54877,{filter:t})}function Q4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n,i,r,o=Se.min(),a=Se.min(),u=Zt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.yt=e}}function X4(t){const e=$4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.Cn=new ej}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(ws.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class ej{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Vt(at.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Vt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jC=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(jC,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="LruGarbageCollector",tj=1048576;function Hx([t,e],[n,i]){const r=ze(t,n);return r===0?ze(e,i):r}class nj{constructor(e){this.Ir=e,this.buffer=new Vt(Hx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Hx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ij{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(Ux,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fl(n)?oe(Ux,"Ignoring IndexedDB error during garbage collection: ",n):await dl(n)}await this.Vr(3e5)})}}class rj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Vf.ce);const i=new nj(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Bx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,a=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(i=m,u=Date.now(),this.removeTargets(e,i,n))).next(m=>(o=m,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(f=Date.now(),aa()<=je.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${m} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:m})))}}function sj(t,e){return new rj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.changes=new bo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Su(i.mutation,r,di.empty(),lt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Fe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Fe()){const r=ro();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=su();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=ro();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Fe()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=wr();const a=Pu(),u=function(){return Pu()}();return n.forEach((h,f)=>{const g=i.get(f.key);r.has(f.key)&&(g===void 0||g.mutation instanceof ko)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),Su(g.mutation,f,g.mutation.getFieldMask(),lt.now())):a.set(f.key,di.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,g)=>a.set(f,g)),n.forEach((f,g)=>u.set(f,new aj(g,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=Pu();let r=new _t((a,u)=>a-u),o=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let g=i.get(h)||di.empty();g=u.applyToLocalView(f,g),i.set(h,g);const m=(r.get(u.batchId)||Fe()).add(h);r=r.insert(u.batchId,m)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,m=wC();g.forEach(v=>{if(!o.has(v)){const T=CC(n.get(v),i.get(v));T!==null&&m.set(v,T),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,m))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return me.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):c4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(ro());let u=Yu,h=o;return a.next(f=>K.forEach(f,(g,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),o.get(g)?K.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{h=h.insert(g,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Fe())).next(g=>({batchId:u,changes:vC(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(i=>{let r=su();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=su();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(m,v){return new Ff(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(g=>{g.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const g=f.getKey();a.get(g)===null&&(a=a.insert(g,nn.newInvalidDocument(g)))});let u=su();return a.forEach((h,f)=>{const g=o.get(h);g!==void 0&&Su(g.mutation,f,di.empty(),lt.now()),Uf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Oi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:X4(r.bundledQuery),readTime:Oi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.overlays=new _t(me.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ro();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=ro(),o=n.length+1,a=new me(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new _t((f,g)=>f-g);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=ro(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=ro(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new A4(n,i));let o=this.qr.get(n);o===void 0&&(o=Fe(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.Qr=new Vt(Ft.$r),this.Ur=new Vt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Ft(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new me(new at([])),i=new Ft(n,e),r=new Ft(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new at([])),i=new Ft(n,e),r=new Ft(n,e+1);let o=Fe();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Ft(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Ft.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new I4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new Ft(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?E_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ft(n,0),r=new Ft(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Vt(ze);return n.forEach(r=>{const o=new Ft(r,0),a=new Ft(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;me.isDocumentKey(o)||(o=o.child(""));const a=new Ft(new me(o),0);let u=new Vt(ze);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new Ft(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Ft(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.ri=e,this.docs=function(){return new _t(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let i=wr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():nn.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=wr();const a=n.path,u=new me(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||BV(FV(g),i)<=0||(r.has(g.key)||Uf(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){xe(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new pj(this)}getSize(e){return K.resolve(this.size)}}class pj extends oj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.persistence=e,this.si=new bo(n=>C_(n),I_),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new M_,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new nl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vf(0),this.li=!1,this.li=!0,this.hi=new hj,this.referenceDelegate=e(this),this.Pi=new mj(this),this.indexManager=new J4,this.remoteDocumentCache=function(r){return new fj(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new Y4(n),this.Ii=new uj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new dj(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){oe("MemoryPersistence","Starting transaction:",e);const r=new gj(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class gj extends HV{constructor(e){super(),this.currentSequenceNumber=e}}class O_{constructor(e){this.persistence=e,this.Ri=new M_,this.Vi=null}static mi(e){return new O_(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=me.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Kd{constructor(e,n){this.persistence=e,this.pi=new bo(i=>qV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=sj(this,n)}static mi(e,n){return new Kd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Se.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Fe(),r=Fe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new D_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return cD()?8:WV(sn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new yj;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(aa()<=je.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",la(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(aa()<=je.DEBUG&&oe("QueryEngine","Query:",la(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(aa()<=je.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",la(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(n))):K.resolve())}ys(e,n){if(Rx(n))return K.resolve(null);let i=Li(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Vg(n,null,"F"),i=Li(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Fe(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Vg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return Rx(n)||r.isEqual(Se.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(aa()<=je.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),la(n)),this.vs(e,a,n,zV(r,Yu)).next(u=>u))})}Ds(e,n){let i=new Vt(yC(e));return n.forEach((r,o)=>{Uf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return aa()<=je.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",la(n)),this.ps.getDocumentsMatchingQuery(e,n,ws.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="LocalStore",vj=3e8;class wj{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new _t(ze),this.xs=new bo(o=>C_(o),I_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function xj(t,e,n,i){return new wj(t,e,n,i)}async function FC(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Fe();for(const f of r){a.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function Tj(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,g){const m=f.batch,v=m.keys();let T=K.resolve();return v.forEach(k=>{T=T.next(()=>g.getEntry(h,k)).next(R=>{const j=f.docVersions.get(k);Ye(j!==null,48541),R.version.compareTo(j)<0&&(m.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),g.addEntry(R)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,m))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Fe();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function BC(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Ej(t,e){const n=Ae(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((g,m)=>{const v=r.get(m);if(!v)return;u.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(o,g.addedDocuments,m)));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(Zt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,i)),r=r.insert(m,T),function(R,j,b){return R.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=vj?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(v,T,g)&&u.push(n.Pi.updateTargetData(o,T))});let h=wr(),f=Fe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(Pj(o,a,e.documentUpdates).next(g=>{h=g.ks,f=g.qs})),!i.isEqual(Se.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next(m=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(g)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function Pj(t,e,n){let i=Fe(),r=Fe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=wr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Se.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):oe(V_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function Sj(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=E_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Cj(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Yr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Ug(t,e,n){const i=Ae(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!fl(a))throw a;oe(V_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Wx(t,e,n){const i=Ae(t);let r=Se.min(),o=Fe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,g){const m=Ae(h),v=m.xs.get(g);return v!==void 0?K.resolve(m.Ms.get(v)):m.Pi.getTargetData(f,g)}(i,a,Li(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Se.min(),n?o:Fe())).next(u=>(Ij(i,d4(e),u),{documents:u,Qs:o})))}function Ij(t,e,n){let i=t.Os.get(e)||Se.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class $x{constructor(){this.activeTargetIds=_4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Aj{constructor(){this.Mo=new $x,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $x,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="ConnectivityMonitor";class Gx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(qx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(qx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh=null;function Hg(){return bh===null?bh=function(){return 268435456+Math.round(2147483648*Math.random())}():bh++,"0x"+bh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="RestConnection",kj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Ud?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Hg(),u=this.zo(e,n.toUriEncodedString());oe(lm,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),g=ul(f);return this.Jo(e,u,h,i,g).then(m=>(oe(lm,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Xa(lm,`RPC '${e}' ${a} failed with error: `,m,"url: ",u,"request:",i),m})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=kj[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class Lj extends Rj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Hg();return new Promise((u,h)=>{const f=new $S;f.setWithCredentials(!0),f.listenOnce(qS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Zh.NO_ERROR:const m=f.getResponseJson();oe(Xt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),u(m);break;case Zh.TIMEOUT:oe(Xt,`RPC '${e}' ${a} timed out`),h(new de(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Zh.HTTP_ERROR:const v=f.getStatus();if(oe(Xt,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const R=function(b){const P=b.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(P)>=0?P:Y.UNKNOWN}(k.status);h(new de(R,k.message))}else h(new de(Y.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new de(Y.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{oe(Xt,`RPC '${e}' ${a} completed.`)}});const g=JSON.stringify(r);oe(Xt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",g,i,15)})}T_(e,n,i){const r=Hg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=KS(),u=ZS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const g=o.join("");oe(Xt,`Creating RPC '${e}' stream ${r}: ${g}`,h);const m=a.createWebChannel(g,h);this.I_(m);let v=!1,T=!1;const k=new Nj({Yo:j=>{T?oe(Xt,`Not sending because RPC '${e}' stream ${r} is closed:`,j):(v||(oe(Xt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),v=!0),oe(Xt,`RPC '${e}' stream ${r} sending:`,j),m.send(j))},Zo:()=>m.close()}),R=(j,b,P)=>{j.listen(b,C=>{try{P(C)}catch(F){setTimeout(()=>{throw F},0)}})};return R(m,ru.EventType.OPEN,()=>{T||(oe(Xt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),R(m,ru.EventType.CLOSE,()=>{T||(T=!0,oe(Xt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(m))}),R(m,ru.EventType.ERROR,j=>{T||(T=!0,Xa(Xt,`RPC '${e}' stream ${r} transport errored. Name:`,j.name,"Message:",j.message),k.a_(new de(Y.UNAVAILABLE,"The operation could not be completed")))}),R(m,ru.EventType.MESSAGE,j=>{var b;if(!T){const P=j.data[0];Ye(!!P,16349);const C=P,F=(C==null?void 0:C.error)||((b=C[0])==null?void 0:b.error);if(F){oe(Xt,`RPC '${e}' stream ${r} received error:`,F);const q=F.status;let B=function(N){const D=bt[N];if(D!==void 0)return AC(D)}(q),A=F.message;B===void 0&&(B=Y.INTERNAL,A="Unknown error status: "+q+" with message "+F.message),T=!0,k.a_(new de(B,A)),m.close()}else oe(Xt,`RPC '${e}' stream ${r} received:`,P),k.u_(P)}}),R(u,GS.STAT_EVENT,j=>{j.stat===Rg.PROXY?oe(Xt,`RPC '${e}' stream ${r} detected buffering proxy`):j.stat===Rg.NOPROXY&&oe(Xt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){return new V4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="PersistentStream";class HC{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new de(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(Zx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(Zx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mj extends HC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=F4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?Oi(a.readTime):Se.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Bg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Dg(h)?{documents:H4(o,h)}:{query:W4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=RC(o,a.resumeToken);const f=jg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=Zd(o,a.snapshotVersion.toTimestamp());const f=jg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=q4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Bg(this.serializer),n.removeTarget=e,this.q_(n)}}class Oj extends HC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=U4(e.writeResults,e.commitTime),i=Oi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Bg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>B4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{}class Vj extends Dj{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,zg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Y.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,zg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(Y.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vr(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="RemoteStore";class zj{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Ro(this)&&(oe(wo,"Restarting streams for network reachability change."),await async function(h){const f=Ae(h);f.Ea.add(4),await wc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Gf(f)}(this))})}),this.Ra=new jj(i,r)}}async function Gf(t){if(Ro(t))for(const e of t.da)await e(!0)}async function wc(t){for(const e of t.da)await e(!1)}function WC(t,e){const n=Ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),B_(n)?F_(n):pl(n).O_()&&z_(n,e))}function j_(t,e){const n=Ae(t),i=pl(n);n.Ia.delete(e),i.O_()&&$C(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ro(n)&&n.Ra.set("Unknown"))}function z_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pl(t).Y_(e)}function $C(t,e){t.Va.Ue(e),pl(t).Z_(e)}function F_(t){t.Va=new L4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pl(t).start(),t.Ra.ua()}function B_(t){return Ro(t)&&!pl(t).x_()&&t.Ia.size>0}function Ro(t){return Ae(t).Ea.size===0}function qC(t){t.Va=void 0}async function Fj(t){t.Ra.set("Online")}async function Bj(t){t.Ia.forEach((e,n)=>{z_(t,e)})}async function Uj(t,e){qC(t),B_(t)?(t.Ra.ha(e),F_(t)):t.Ra.set("Unknown")}async function Hj(t,e,n){if(t.Ra.set("Online"),e instanceof kC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){oe(wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Qd(t,i)}else if(e instanceof Xh?t.Va.Ze(e):e instanceof bC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const i=await BC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(Zt.EMPTY_BYTE_STRING,g.snapshotVersion)),$C(o,h);const m=new Yr(g.target,h,f,g.sequenceNumber);z_(o,m)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){oe(wo,"Failed to raise snapshot:",i),await Qd(t,i)}}async function Qd(t,e,n){if(!fl(e))throw e;t.Ea.add(1),await wc(t),t.Ra.set("Offline"),n||(n=()=>BC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(wo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Gf(t)})}function GC(t,e){return e().catch(n=>Qd(t,n,e))}async function Zf(t){const e=Ae(t),n=Ps(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:E_;for(;Wj(e);)try{const r=await Sj(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,$j(e,r)}catch(r){await Qd(e,r)}ZC(e)&&KC(e)}function Wj(t){return Ro(t)&&t.Ta.length<10}function $j(t,e){t.Ta.push(e);const n=Ps(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ZC(t){return Ro(t)&&!Ps(t).x_()&&t.Ta.length>0}function KC(t){Ps(t).start()}async function qj(t){Ps(t).ra()}async function Gj(t){const e=Ps(t);for(const n of t.Ta)e.ea(n.mutations)}async function Zj(t,e,n){const i=t.Ta.shift(),r=R_.from(i,e,n);await GC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Zf(t)}async function Kj(t,e){e&&Ps(t).X_&&await async function(i,r){if(function(a){return k4(a)&&a!==Y.ABORTED}(r.code)){const o=i.Ta.shift();Ps(i).B_(),await GC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Zf(i)}}(t,e),ZC(t)&&KC(t)}async function Kx(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),oe(wo,"RemoteStore received new credentials");const i=Ro(n);n.Ea.add(3),await wc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gf(n)}async function Qj(t,e){const n=Ae(t);e?(n.Ea.delete(2),await Gf(n)):e||(n.Ea.add(2),await wc(n),n.Ra.set("Unknown"))}function pl(t){return t.ma||(t.ma=function(n,i,r){const o=Ae(n);return o.sa(),new Mj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:Fj.bind(null,t),t_:Bj.bind(null,t),r_:Uj.bind(null,t),H_:Hj.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),B_(t)?F_(t):t.Ra.set("Unknown")):(await t.ma.stop(),qC(t))})),t.ma}function Ps(t){return t.fa||(t.fa=function(n,i,r){const o=Ae(n);return o.sa(),new Oj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:qj.bind(null,t),r_:Kj.bind(null,t),ta:Gj.bind(null,t),na:Zj.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zf(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(wo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new U_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H_(t,e){if(vr("AsyncQueue",`${e}: ${t}`),fl(t))return new de(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||me.comparator(n.key,i.key):(n,i)=>me.comparator(n.key,i.key),this.keyedMap=su(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Da;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.ga=new _t(me.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class il{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new il(e,n,Da.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Xj{constructor(){this.queries=Yx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ae(n),o=r.queries;r.queries=Yx(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new de(Y.ABORTED,"Firestore shutting down"))}}function Yx(){return new bo(t=>gC(t),Bf)}async function QC(t,e){const n=Ae(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new Yj,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=H_(a,`Initialization of query '${la(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&W_(n)}async function YC(t,e){const n=Ae(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Jj(t,e){const n=Ae(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&W_(n)}function e3(t,e,n){const i=Ae(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function W_(t){t.Ca.forEach(e=>{e.next()})}var Wg,Xx;(Xx=Wg||(Wg={})).Ma="default",Xx.Cache="cache";class XC{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new il(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.key=e}}class eI{constructor(e){this.key=e}}class t3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=yC(e),this.tu=new Da(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Qx,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,m)=>{const v=r.get(g),T=Uf(this.query,m)?m:null,k=!!v&&this.mutatedKeys.has(v.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let j=!1;v&&T?v.data.isEqual(T.data)?k!==R&&(i.track({type:3,doc:T}),j=!0):this.su(v,T)||(i.track({type:2,doc:T}),j=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!v&&T?(i.track({type:0,doc:T}),j=!0):v&&!T&&(i.track({type:1,doc:v}),j=!0,(h||f)&&(u=!0)),j&&(T?(a=a.add(T),o=R?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((g,m)=>function(T,k){const R=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:j})}};return R(T)-R(k)}(g.type,m.type)||this.eu(g.doc,m.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new il(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new eI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new JC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $_="SyncEngine";class n3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class i3{constructor(e){this.key=e,this.hu=!1}}class r3{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new bo(u=>gC(u),Bf),this.Iu=new Map,this.Eu=new Set,this.du=new _t(me.comparator),this.Au=new Map,this.Ru=new M_,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function s3(t,e,n=!0){const i=oI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await tI(i,e,n,!0),r}async function o3(t,e){const n=oI(t);await tI(n,e,!0,!1)}async function tI(t,e,n,i){const r=await Cj(t.localStore,Li(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await a3(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&WC(t.remoteStore,r),u}async function a3(t,e,n,i,r){t.pu=(m,v,T)=>async function(R,j,b,P){let C=j.view.ru(b);C.Cs&&(C=await Wx(R.localStore,j.query,!1).then(({documents:A})=>j.view.ru(A,C)));const F=P&&P.targetChanges.get(j.targetId),q=P&&P.targetMismatches.get(j.targetId)!=null,B=j.view.applyChanges(C,R.isPrimaryClient,F,q);return e1(R,j.targetId,B.au),B.snapshot}(t,m,v,T);const o=await Wx(t.localStore,e,!0),a=new t3(e,o.Qs),u=a.ru(o.documents),h=vc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);e1(t,n,f.au);const g=new n3(e,n,a);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function l3(t,e,n){const i=Ae(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Bf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ug(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&j_(i.remoteStore,r.targetId),$g(i,r.targetId)}).catch(dl)):($g(i,r.targetId),await Ug(i.localStore,r.targetId,!0))}async function u3(t,e){const n=Ae(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),j_(n.remoteStore,i.targetId))}async function c3(t,e,n){const i=y3(t);try{const r=await function(a,u){const h=Ae(a),f=lt.now(),g=u.reduce((T,k)=>T.add(k.key),Fe());let m,v;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=wr(),R=Fe();return h.Ns.getEntries(T,g).next(j=>{k=j,k.forEach((b,P)=>{P.isValidDocument()||(R=R.add(b))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,k)).next(j=>{m=j;const b=[];for(const P of u){const C=S4(P,m.get(P.key).overlayedDocument);C!=null&&b.push(new ko(P.key,C,uC(C.value.mapValue),Mi.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,b,u)}).next(j=>{v=j;const b=j.applyToLocalDocumentSet(m,R);return h.documentOverlayCache.saveOverlays(T,j.batchId,b)})}).then(()=>({batchId:v.batchId,changes:vC(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new _t(ze)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await xc(i,r.changes),await Zf(i.remoteStore)}catch(r){const o=H_(r,"Failed to persist write");n.reject(o)}}async function nI(t,e){const n=Ae(t);try{const i=await Ej(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Ye(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Ye(a.hu,14607):r.removedDocuments.size>0&&(Ye(a.hu,42227),a.hu=!1))}),await xc(n,i,e)}catch(i){await dl(i)}}function Jx(t,e,n){const i=Ae(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Ae(a);h.onlineState=u;let f=!1;h.queries.forEach((g,m)=>{for(const v of m.Sa)v.va(u)&&(f=!0)}),f&&W_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function h3(t,e,n){const i=Ae(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new _t(me.comparator);a=a.insert(o,nn.newNoDocument(o,Se.min()));const u=Fe().add(o),h=new $f(Se.min(),new Map,new _t(ze),a,u);await nI(i,h),i.du=i.du.remove(o),i.Au.delete(e),q_(i)}else await Ug(i.localStore,e,!1).then(()=>$g(i,e,n)).catch(dl)}async function d3(t,e){const n=Ae(t),i=e.batch.batchId;try{const r=await Tj(n.localStore,e);rI(n,i,null),iI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await xc(n,r)}catch(r){await dl(r)}}async function f3(t,e,n){const i=Ae(t);try{const r=await function(a,u){const h=Ae(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next(m=>(Ye(m!==null,37113),g=m.keys(),h.mutationQueue.removeMutationBatch(f,m))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>h.localDocuments.getDocuments(f,g))})}(i.localStore,e);rI(i,e,n),iI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await xc(i,r)}catch(r){await dl(r)}}function iI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rI(t,e,n){const i=Ae(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function $g(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||sI(t,i)})}function sI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(j_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),q_(t))}function e1(t,e,n){for(const i of n)i instanceof JC?(t.Ru.addReference(i.key,e),p3(t,i)):i instanceof eI?(oe($_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||sI(t,i.key)):xe(19791,{wu:i})}function p3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(oe($_,"New document in limbo: "+n),t.Eu.add(i),q_(t))}function q_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new me(at.fromString(e)),i=t.fu.next();t.Au.set(i,new i3(n)),t.du=t.du.insert(n,i),WC(t.remoteStore,new Yr(Li(A_(n.path)),i,"TargetPurposeLimboResolution",Vf.ce))}}async function xc(t,e,n){const i=Ae(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var g;if((f||n)&&i.isPrimaryClient){const m=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:g.current;i.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(f){r.push(f);const m=D_.As(h.targetId,f);o.push(m)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const g=Ae(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>K.forEach(f,v=>K.forEach(v.Es,T=>g.persistence.referenceDelegate.addReference(m,v.targetId,T)).next(()=>K.forEach(v.ds,T=>g.persistence.referenceDelegate.removeReference(m,v.targetId,T)))))}catch(m){if(!fl(m))throw m;oe(V_,"Failed to update sequence numbers: "+m)}for(const m of f){const v=m.targetId;if(!m.fromCache){const T=g.Ms.get(v),k=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(k);g.Ms=g.Ms.insert(v,R)}}}(i.localStore,o))}async function m3(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){oe($_,"User change. New user:",e.toKey());const i=await FC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new de(Y.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xc(n,i.Ls)}}function g3(t,e){const n=Ae(t),i=n.Au.get(e);if(i&&i.hu)return Fe().add(i.key);{let r=Fe();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function oI(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h3.bind(null,e),e.Pu.H_=Jj.bind(null,e.eventManager),e.Pu.yu=e3.bind(null,e.eventManager),e}function y3(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f3.bind(null,e),e}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return xj(this.persistence,new _j,e.initialUser,this.serializer)}Cu(e){return new zC(O_.mi,this.serializer)}Du(e){return new Aj}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class _3 extends Yd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof Kd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ij(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new zC(i=>Kd.mi(i,n),this.serializer)}}class qg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=m3.bind(null,this.syncEngine),await Qj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Xj}()}createDatastore(e){const n=qf(e.databaseInfo.databaseId),i=function(o){return new Lj(o)}(e.databaseInfo);return function(o,a,u,h){return new Vj(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new zj(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Jx(this.syncEngine,n,0),function(){return Gx.v()?new Gx:new bj}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,g){const m=new r3(r,o,a,u,h,f);return g&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ae(r);oe(wo,"RemoteStore shutting down."),o.Ea.add(5),await wc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}qg.provider={build:()=>new qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="FirestoreClient";class v3{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=en.UNAUTHENTICATED,this.clientId=x_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{oe(Ss,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(oe(Ss,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=H_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function cm(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Ss,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await FC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await w3(t);oe(Ss,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Kx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Kx(e.remoteStore,r)),t._onlineComponents=e}async function w3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Ss,"Using user provided OfflineComponentProvider");try{await cm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Xa("Error using user provided cache. Falling back to memory cache: "+n),await cm(t,new Yd)}}else oe(Ss,"Using default OfflineComponentProvider"),await cm(t,new _3(void 0));return t._offlineComponents}async function lI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Ss,"Using user provided OnlineComponentProvider"),await t1(t,t._uninitializedComponentsProvider._online)):(oe(Ss,"Using default OnlineComponentProvider"),await t1(t,new qg))),t._onlineComponents}function x3(t){return lI(t).then(e=>e.syncEngine)}async function Gg(t){const e=await lI(t),n=e.eventManager;return n.onListen=s3.bind(null,e.syncEngine),n.onUnlisten=l3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u3.bind(null,e.syncEngine),n}function T3(t,e,n={}){const i=new ds;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const g=new aI({next:v=>{g.Nu(),a.enqueueAndForget(()=>YC(o,m)),v.fromCache&&h.source==="server"?f.reject(new de(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),m=new XC(u,g,{includeMetadataChanges:!0,qa:!0});return QC(o,m)}(await Gg(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firestore.googleapis.com",i1=!0;class r1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cI,this.ssl=i1}else this.host=e.host,this.ssl=e.ssl??i1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tj)throw new de(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new AV;switch(i.type){case"firstParty":return new NV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=n1.get(n);i&&(oe("ComponentProvider","Removing Datastore"),n1.delete(n),i.terminate())}(this),Promise.resolve()}}function E3(t,e,n,i={}){var f;t=dr(t,Kf);const r=ul(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(DS(`https://${u}`),VS("Firestore",!0)),o.host!==cI&&o.host!==u&&Xa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!yo(h,a)&&(t._setSettings(h),i.mockUserToken)){let g,m;if(typeof i.mockUserToken=="string")g=i.mockUserToken,m=en.MOCK_USER;else{g=tD(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new de(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new en(v)}t._authCredentials=new bV(new YS(g,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Tc(this.firestore,e,this._query)}}class Dt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(yc(n,Dt._jsonSchema))return new Dt(e,i||null,new me(at.fromString(n.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:Nt("string",Dt._jsonSchemaVersion),referencePath:Nt("string")};class fs extends Tc{constructor(e,n,i){super(e,n,A_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new me(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function Cu(t,e,...n){if(t=Mn(t),XS("collection","path",e),t instanceof Kf){const i=at.fromString(e,...n);return _x(i),new fs(t,null,i)}{if(!(t instanceof Dt||t instanceof fs))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(at.fromString(e,...n));return _x(i),new fs(t.firestore,null,i)}}function bi(t,e,...n){if(t=Mn(t),arguments.length===1&&(e=x_.newId()),XS("doc","path",e),t instanceof Kf){const i=at.fromString(e,...n);return yx(i),new Dt(t,null,new me(i))}{if(!(t instanceof Dt||t instanceof fs))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(at.fromString(e,...n));return yx(i),new Dt(t.firestore,t instanceof fs?t.converter:null,new me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="AsyncQueue";class o1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UC(this,"async_queue_retry"),this._c=()=>{const i=um();i&&oe(s1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ds;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fl(e))throw e;oe(s1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,vr("INTERNAL UNHANDLED ERROR: ",a1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=U_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&xe(47125,{Pc:a1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function a1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class rl extends Kf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new o1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o1(e),this._firestoreClient=void 0,await e}}}function P3(t,e){const n=typeof t=="object"?t:BS(),i=typeof t=="string"?t:Ud,r=v_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=JO("firestore");o&&E3(r,...o)}return r}function G_(t){if(t._terminated)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||S3(t),t._firestoreClient}function S3(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,g){return new KV(u,h,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,uI(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new v3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(Zt.fromBase64String(e))}catch(n){throw new de(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Nt("string",Qn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(yc(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:Nt("string",Di._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Vi(e.vectorValues);throw new de(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:Nt("string",Vi._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=/^__.*__$/;class I3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ko(e,this.data,this.fieldMask,n,this.fieldTransforms):new _c(e,this.data,n,this.fieldTransforms)}}function dI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:t})}}class K_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new K_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dI(this.Ac)&&C3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class A3{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||qf(e)}Cc(e,n,i,r=!1){return new K_({Ac:e,methodName:n,Dc:i,path:$t.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function b3(t){const e=t._freezeSettings(),n=qf(t._databaseId);return new A3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function k3(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);gI("Data must be an object, but it was:",a,i);const u=pI(i,a);let h,f;if(o.merge)h=new di(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const g=[];for(const m of o.mergeFields){const v=R3(e,m,n);if(!a.contains(v))throw new de(Y.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);L3(g,v)||g.push(v)}h=new di(g),f=a.fieldTransforms.filter(m=>h.covers(m.field))}else h=null,f=a.fieldTransforms;return new I3(new Kn(u),h,f)}function fI(t,e){if(mI(t=Mn(t)))return gI("Unsupported field value:",e,t),pI(t,e);if(t instanceof hI)return function(i,r){if(!dI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=fI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Mn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return v4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=lt.fromDate(i);return{timestampValue:Zd(r.serializer,o)}}if(i instanceof lt){const o=new lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Zd(r.serializer,o)}}if(i instanceof Di)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qn)return{bytesValue:RC(r.serializer,i._byteString)};if(i instanceof Dt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:L_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Vi)return function(a,u){return{mapValue:{fields:{[aC]:{stringValue:lC},[Hd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return b_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${T_(i)}`)}(t,e)}function pI(t,e){const n={};return tC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(t,(i,r)=>{const o=fI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function mI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof Di||t instanceof Qn||t instanceof Dt||t instanceof hI||t instanceof Vi)}function gI(t,e,n){if(!mI(n)||!JS(n)){const i=T_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function R3(t,e,n){if((e=Mn(e))instanceof Z_)return e._internalPath;if(typeof e=="string")return yI(t,e);throw Xd("Field path arguments must be of type string or ",t,!1,void 0,n)}const N3=new RegExp("[~\\*/\\[\\]]");function yI(t,e,n){if(e.search(N3)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Z_(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new de(Y.INVALID_ARGUMENT,u+t+h)}function L3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class M3 extends _I{data(){return super.data()}}function vI(t,e){return typeof e=="string"?yI(t,e):e instanceof Z_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O3{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ao(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Hd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>Et(a.doubleValue));return new Vi(n)}convertGeoPoint(e){return new Di(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=zf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){const n=xs(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=at.fromString(e);Ye(VC(i),9688,{name:e});const r=new Ju(i.get(1),i.get(3)),o=new me(i.popFirst(5));return r.isEqual(n)||vr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class au{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends _I{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(vI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=lo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:Nt("string",lo._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Jh extends lo{data(e={}){return super.data(e)}}class uo{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new au(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Jh(this._firestore,this._userDataWriter,i.key,i,new au(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new Jh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new au(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Jh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new au(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,g=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:V3(u.type),doc:h,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=x_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function V3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:t})}}uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:Nt("string",uo._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Q_ extends O3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function u1(t){t=dr(t,Tc);const e=dr(t.firestore,rl),n=G_(e),i=new Q_(e);return wI(t._query),T3(n,t._query).then(r=>new uo(e,i,t,r))}function ir(t,e,n){t=dr(t,Dt);const i=dr(t.firestore,rl),r=D3(t.converter,e,n);return xI(i,[k3(b3(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Mi.none())])}function hm(t){return xI(dr(t.firestore,rl),[new k_(t._key,Mi.none())])}function dm(t,...e){var h,f,g;t=Mn(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||l1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(l1(e[i])){const m=e[i];e[i]=(h=m.next)==null?void 0:h.bind(m),e[i+1]=(f=m.error)==null?void 0:f.bind(m),e[i+2]=(g=m.complete)==null?void 0:g.bind(m)}let o,a,u;if(t instanceof Dt)a=dr(t.firestore,rl),u=A_(t._key.path),o={next:m=>{e[i]&&e[i](j3(a,t,m))},error:e[i+1],complete:e[i+2]};else{const m=dr(t,Tc);a=dr(m.firestore,rl),u=m._query;const v=new Q_(a);o={next:T=>{e[i]&&e[i](new uo(a,v,m,T))},error:e[i+1],complete:e[i+2]},wI(t._query)}return function(v,T,k,R){const j=new aI(R),b=new XC(T,j,k);return v.asyncQueue.enqueueAndForget(async()=>QC(await Gg(v),b)),()=>{j.Nu(),v.asyncQueue.enqueueAndForget(async()=>YC(await Gg(v),b))}}(G_(a),u,r,o)}function xI(t,e){return function(i,r){const o=new ds;return i.asyncQueue.enqueueAndForget(async()=>c3(await x3(i),r,o)),o.promise}(G_(t),e)}function j3(t,e,n){const i=n.docs.get(e._key),r=new Q_(t);return new lo(t,r,e._key,i,new au(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){hl=r})(cl),Ya(new _o("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new rl(new kV(i.getProvider("auth-internal")),new LV(a,i.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ju(f.options.projectId,g)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),cs(fx,px,e),cs(fx,px,"esm2020")})();function TI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z3=TI,EI=new mc("auth","Firebase",TI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=new y_("@firebase/auth");function F3(t,...e){Jd.logLevel<=je.WARN&&Jd.warn(`Auth (${cl}): ${t}`,...e)}function ed(t,...e){Jd.logLevel<=je.ERROR&&Jd.error(`Auth (${cl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,...e){throw Y_(t,...e)}function ji(t,...e){return Y_(t,...e)}function PI(t,e,n){const i={...z3(),[e]:n};return new mc("auth","Firebase",i).create(e,{appName:t.name})}function ps(t){return PI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return EI.create(t,...e)}function Te(t,e,...n){if(!t)throw Y_(e,...n)}function ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ed(e),new Error(e)}function Tr(t,e){t||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function B3(){return c1()==="http:"||c1()==="https:"}function c1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B3()||aD()||"connection"in navigator)?navigator.onLine:!0}function H3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tr(n>e,"Short delay should be less than long delay!"),this.isMobile=rD()||lD()}get(){return U3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t,e){Tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q3=new Ec(3e4,6e4);function Qf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ml(t,e,n,i,r={}){return CI(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=gc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return oD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ul(t.emulatorConfig.host)&&(f.credentials="include"),SI.fetch()(await AI(t,t.config.apiHost,n,u),f)})}async function CI(t,e,n){t._canInitEmulator=!1;const i={...W3,...e};try{const r=new G3(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw kh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw kh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw kh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw kh(t,"user-disabled",a);const g=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw PI(t,g,f);xr(t,g)}}catch(r){if(r instanceof Sr)throw r;xr(t,"network-request-failed",{message:String(r)})}}async function II(t,e,n,i,r={}){const o=await ml(t,e,n,i,r);return"mfaPendingCredential"in o&&xr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function AI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?X_(t.config,r):`${t.config.apiScheme}://${r}`;return $3.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class G3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ji(this.auth,"network-request-failed")),q3.get())})}}function kh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ji(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e){return ml(t,"POST","/v1/accounts:delete",e)}async function ef(t,e){return ml(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K3(t,e=!1){const n=Mn(t),i=await n.getIdToken(e),r=J_(i);Te(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Iu(fm(r.auth_time)),issuedAtTime:Iu(fm(r.iat)),expirationTime:Iu(fm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function fm(t){return Number(t)*1e3}function J_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ed("JWT malformed, contained fewer than 3 sections"),null;try{const r=NS(n);return r?JSON.parse(r):(ed("Failed to decode base64 JWT payload"),null)}catch(r){return ed("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function h1(t){const e=J_(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sr&&Q3(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Q3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tf(t){var m;const e=t.auth,n=await t.getIdToken(),i=await ic(t,ef(e,{idToken:n}));Te(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(m=r.providerUserInfo)!=null&&m.length?bI(r.providerUserInfo):[],a=J3(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Kg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function X3(t){const e=Mn(t);await tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J3(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function bI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t,e){const n=await CI(t,{},async()=>{const i=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await AI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&ul(t.emulatorConfig.host)&&(h.credentials="include"),SI.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function t5(t,e){return ml(t,"POST","/v2/accounts:revokeToken",Qf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=h1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await e5(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Va;return i&&(Te(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Te(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(Te(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Va,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Y3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Kg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await ic(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K3(this,e)}reload(){return X3(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await tf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await ic(this,Z3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:m,emailVerified:v,isAnonymous:T,providerData:k,stsTokenManager:R}=n;Te(m&&R,e,"internal-error");const j=Va.fromJSON(this.name,R);Te(typeof m=="string",e,"internal-error"),Dr(i,e.name),Dr(r,e.name),Te(typeof v=="boolean",e,"internal-error"),Te(typeof T=="boolean",e,"internal-error"),Dr(o,e.name),Dr(a,e.name),Dr(u,e.name),Dr(h,e.name),Dr(f,e.name),Dr(g,e.name);const b=new fi({uid:m,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:j,createdAt:f,lastLoginAt:g});return k&&Array.isArray(k)&&(b.providerData=k.map(P=>({...P}))),h&&(b._redirectEventId=h),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new Va;r.updateFromServerResponse(n);const o=new fi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await tf(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Te(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?bI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Va;u.updateFromIdToken(i);const h=new fi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Kg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Map;function lr(t){Tr(t instanceof Function,"Expected a class definition");let e=d1.get(t);return e?(Tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,d1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kI.type="NONE";const f1=kI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t,e,n){return`firebase:${t}:${e}:${n}`}class ja{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=td(this.userKey,r.apiKey,o),this.fullPersistenceKey=td("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ef(this.auth,{idToken:e}).catch(()=>{});return n?fi._fromGetAccountInfoResponse(this.auth,n,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ja(lr(f1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||lr(f1);const a=td(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(a);if(g){let m;if(typeof g=="string"){const v=await ef(e,{idToken:g}).catch(()=>{});if(!v)break;m=await fi._fromGetAccountInfoResponse(e,v,g)}else m=fi._fromJSON(e,g);f!==o&&(u=m),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new ja(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new ja(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DI(e))return"Blackberry";if(VI(e))return"Webos";if(NI(e))return"Safari";if((e.includes("chrome/")||LI(e))&&!e.includes("edge/"))return"Chrome";if(OI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function RI(t=sn()){return/firefox\//i.test(t)}function NI(t=sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LI(t=sn()){return/crios\//i.test(t)}function MI(t=sn()){return/iemobile/i.test(t)}function OI(t=sn()){return/android/i.test(t)}function DI(t=sn()){return/blackberry/i.test(t)}function VI(t=sn()){return/webos/i.test(t)}function ev(t=sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function n5(t=sn()){var e;return ev(t)&&!!((e=window.navigator)!=null&&e.standalone)}function i5(){return uD()&&document.documentMode===10}function jI(t=sn()){return ev(t)||OI(t)||VI(t)||DI(t)||/windows phone/i.test(t)||MI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e=[]){let n;switch(t){case"Browser":n=p1(sn());break;case"Worker":n=`${p1(sn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s5(t,e={}){return ml(t,"GET","/v2/passwordPolicy",Qf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=6;class a5{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??o5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m1(this),this.idTokenSubscription=new m1(this),this.beforeStateQueue=new r5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await ja.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ef(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(hi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(ps(this));const n=e?Mn(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await s5(this),n=new a5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await t5(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&F3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Yf(t){return Mn(t)}class m1{constructor(e){this.auth=e,this.observer=null,this.addObserver=yD(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u5(t){tv=t}function c5(t){return tv.loadJS(t)}function h5(){return tv.gapiScript}function d5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(t,e){const n=v_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(yo(o,e??{}))return r;xr(r,"already-initialized")}return n.initialize({options:e})}function p5(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function m5(t,e,n){const i=Yf(t);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=FI(e),{host:a,port:u}=g5(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},g=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(yo(f,i.config.emulator)&&yo(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,ul(a)?(DS(`${o}//${a}${h}`),VS("Auth",!0)):y5()}function FI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function g5(t){const e=FI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:g1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:g1(a)}}}function g1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function y5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t,e){return II(t,"POST","/v1/accounts:signInWithIdp",Qf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="http://localhost";class xo extends BI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new xo(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return za(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,za(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,za(e,n)}buildRequest(){const e={requestUri:_5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends UI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Pc{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xo._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return $r.credential(n,i)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Pc{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Pc{constructor(){super("twitter.com")}static credential(e,n){return xo._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Gr.credential(n,i)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t,e){return II(t,"POST","/v1/accounts:signUp",Qf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await fi._fromIdTokenResponse(e,i,r),a=y1(i);return new Cs({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=y1(i);return new Cs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function y1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(t){var r;if(hi(t.app))return Promise.reject(ps(t));const e=Yf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new Cs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await v5(e,{returnSecureToken:!0}),i=await Cs._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends Sr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new nf(e,n,i,r)}}function HI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?nf._fromErrorAndOperation(t,o,e,i):o})}async function x5(t,e,n=!1){const i=await ic(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(t,e,n=!1){const{auth:i}=t;if(hi(i.app))return Promise.reject(ps(i));const r="reauthenticate";try{const o=await ic(t,HI(i,r,e,t),n);Te(o.idToken,i,"internal-error");const a=J_(o.idToken);Te(a,i,"internal-error");const{sub:u}=a;return Te(t.uid===u,i,"user-mismatch"),Cs._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&xr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E5(t,e,n=!1){if(hi(t.app))return Promise.reject(ps(t));const i="signIn",r=await HI(t,i,e),o=await Cs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function P5(t,e,n,i){return Mn(t).onIdTokenChanged(e,n,i)}function S5(t,e,n){return Mn(t).beforeAuthStateChanged(e,n)}function C5(t,e,n,i){return Mn(t).onAuthStateChanged(e,n,i)}const rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rf,"1"),this.storage.removeItem(rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=1e3,A5=10;class $I extends WI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);i5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,A5):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},I5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$I.type="LOCAL";const b5=$I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI extends WI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qI.type="SESSION";const GI=qI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Xf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await k5(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=nv("",20);r.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(m){const v=m;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function N5(t){zi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function L5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function O5(){return ZI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="firebaseLocalStorageDb",D5=1,sf="firebaseLocalStorage",QI="fbase_key";class Sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jf(t,e){return t.transaction([sf],e?"readwrite":"readonly").objectStore(sf)}function V5(){const t=indexedDB.deleteDatabase(KI);return new Sc(t).toPromise()}function Qg(){const t=indexedDB.open(KI,D5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(sf,{keyPath:QI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(sf)?e(i):(i.close(),await V5(),e(await Qg()))})})}async function _1(t,e,n){const i=Jf(t,!0).put({[QI]:e,value:n});return new Sc(i).toPromise()}async function j5(t,e){const n=Jf(t,!1).get(e),i=await new Sc(n).toPromise();return i===void 0?null:i.value}function v1(t,e){const n=Jf(t,!0).delete(e);return new Sc(n).toPromise()}const z5=800,F5=3;class YI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>F5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(O5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await L5(),!this.activeServiceWorker)return;this.sender=new R5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qg();return await _1(e,rf,"1"),await v1(e,rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>_1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>j5(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>v1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Jf(r,!1).getAll();return new Sc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YI.type="LOCAL";const B5=YI;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t,e){return e?lr(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv extends BI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return za(e,this._buildIdpRequest())}_linkToIdToken(e,n){return za(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return za(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function H5(t){return E5(t.auth,new iv(t),t.bypassAuthState)}function W5(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),T5(n,new iv(t),t.bypassAuthState)}async function $5(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),x5(n,new iv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H5;case"linkViaPopup":case"linkViaRedirect":return $5;case"reauthViaPopup":case"reauthViaRedirect":return W5;default:xr(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new Ec(2e3,1e4);class Aa extends XI{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const e=nv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q5.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5="pendingRedirect",nd=new Map;class Z5 extends XI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=nd.get(this.auth._key());if(!e){try{const i=await K5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}nd.set(this.auth._key(),e)}return this.bypassAuthState||nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K5(t,e){const n=X5(e),i=Y5(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Q5(t,e){nd.set(t._key(),e)}function Y5(t){return lr(t._redirectPersistence)}function X5(t){return td(G5,t.config.apiKey,t.name)}async function J5(t,e,n=!1){if(hi(t.app))return Promise.reject(ps(t));const i=Yf(t),r=U5(i,e),a=await new Z5(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=10*60*1e3;class t6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!n6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!JI(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(ji(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=e6&&this.cachedEventUids.clear(),this.cachedEventUids.has(w1(e))}saveEventToCache(e){this.cachedEventUids.add(w1(e)),this.lastProcessedEventTime=Date.now()}}function w1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function n6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i6(t,e={}){return ml(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s6=/^https?/;async function o6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i6(t);for(const n of e)try{if(a6(n))return}catch{}xr(t,"unauthorized-domain")}function a6(t){const e=Zg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!s6.test(n))return!1;if(r6.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=new Ec(3e4,6e4);function x1(){const t=zi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function u6(t){return new Promise((e,n)=>{var r,o,a;function i(){x1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x1(),n(ji(t,"network-request-failed"))},timeout:l6.get()})}if((o=(r=zi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=zi().gapi)!=null&&a.load)i();else{const u=d5("iframefcb");return zi()[u]=()=>{gapi.load?i():n(ji(t,"network-request-failed"))},c5(`${h5()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw id=null,e})}let id=null;function c6(t){return id=id||u6(t),id}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=new Ec(5e3,15e3),d6="__/auth/iframe",f6="emulator/auth/iframe",p6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g6(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?X_(e,f6):`https://${t.config.authDomain}/${d6}`,i={apiKey:e.apiKey,appName:t.name,v:cl},r=m6.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${gc(i).slice(1)}`}async function y6(t){const e=await c6(t),n=zi().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:g6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p6,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=ji(t,"network-request-failed"),u=zi().setTimeout(()=>{o(a)},h6.get());function h(){zi().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},v6=500,w6=600,x6="_blank",T6="http://localhost";class T1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E6(t,e,n,i=v6,r=w6){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={..._6,width:i.toString(),height:r.toString(),top:o,left:a},f=sn().toLowerCase();n&&(u=LI(f)?x6:n),RI(f)&&(e=e||T6,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[T,k])=>`${v}${T}=${k},`,"");if(n5(f)&&u!=="_self")return P6(e||"",u),new T1(null);const m=window.open(e||"",u,g);Te(m,t,"popup-blocked");try{m.focus()}catch{}return new T1(m)}function P6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6="__/auth/handler",C6="emulator/auth/handler",I6=encodeURIComponent("fac");async function E1(t,e,n,i,r,o){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:cl,eventId:r};if(e instanceof UI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",gD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,m]of Object.entries({}))a[g]=m}if(e instanceof Pc){const g=e.getScopes().filter(m=>m!=="");g.length>0&&(a.scopes=g.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await t._getAppCheckToken(),f=h?`#${I6}=${encodeURIComponent(h)}`:"";return`${A6(t)}?${gc(u).slice(1)}${f}`}function A6({config:t}){return t.emulator?X_(t,C6):`https://${t.authDomain}/${S6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="webStorageSupport";class b6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GI,this._completeRedirectFn=J5,this._overrideRedirectResult=Q5}async _openPopup(e,n,i,r){var a;Tr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await E1(e,n,i,Zg(),r);return E6(e,o,nv())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await E1(e,n,i,Zg(),r);return N5(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Tr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await y6(e),i=new t6(e);return n.register("authEvent",r=>(Te(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pm,{type:pm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[pm];o!==void 0&&n(!!o),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=o6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jI()||NI()||ev()}}const k6=b6;var P1="@firebase/auth",S1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L6(t){Ya(new _o("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;Te(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zI(t)},f=new l5(i,r,o,h);return p5(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ya(new _o("auth-internal",e=>{const n=Yf(e.getProvider("auth").getImmediate());return(i=>new R6(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(P1,S1,N6(t)),cs(P1,S1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=5*60,O6=OS("authIdTokenMaxAge")||M6;let C1=null;const D6=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>O6)return;const r=n==null?void 0:n.token;C1!==r&&(C1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function V6(t=BS()){const e=v_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=f5(t,{popupRedirectResolver:k6,persistence:[B5,b5,GI]}),i=OS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=D6(o.toString());S5(n,a,()=>a(n.currentUser)),P5(n,u=>a(u))}}const r=LS("auth");return r&&m5(n,`http://${r}`),n}function j6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}u5({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=ji("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",j6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L6("Browser");var z6="firebase",F6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(z6,F6,"app");const B6={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},eA=FS(B6),hn=P3(eA),I1=V6(eA),of={palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},U6="vysocany",tA=of[U6].center,nA=15,H6=13,W6=18,A1={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},ms=["red","blue"],iA={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},b1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],Js=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function Fa(t){var e;return((e=iA[t.size])==null?void 0:e.points)||100}function $6(t,e=.008){const n={};ms.forEach(r=>n[r]=[]);const i={};return ms.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),ms.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],g=o[h],m=`${f.id}-${g.id}`,v=f.location[0]-g.location[0],T=(f.location[1]-g.location[1])*1.6,k=Math.sqrt(v*v+T*T);k<=e&&!a.has(m)&&(a.add(m),n[r].push({from:f.location,to:g.location,distance:k}))}}),n}function ha(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function rA(t){const e={};return ms.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=Fa(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const sA=O.createContext(null),$n={player:"streetart-ctf-player",captures:"streetart-ctf-captures",discoveries:"streetart-discoveries",gameMode:"streetart-game-mode"},Ze={SOLO:"solo",TEAM:"team"},Rh="streetart-captures",k1="streetart-players",q6="streetart-teams",ot={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function Yl(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function Xl(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function G6({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0),[o,a]=O.useState(()=>Yl($n.gameMode,Ze.SOLO)),[u,h]=O.useState(()=>Yl($n.discoveries,{})),[f,g]=O.useState(()=>Yl($n.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,totalDistance:0,lastCaptureTime:null,lastCaptureLocation:null,captureCount:0,recaptureCount:0,firstCaptureCount:0,discoveryCount:0,uniqueAreasVisited:[]})),[m,v]=O.useState(()=>{const re=Yl($n.captures,{});return Js.map(he=>({...he,capturedBy:re[he.id]||null}))}),[T,k]=O.useState(null),[R,j]=O.useState(!1),[b,P]=O.useState(null);O.useEffect(()=>{const re=C5(I1,he=>{he?(n(he),g(_e=>({..._e,id:he.uid}))):w5(I1).catch(_e=>{console.log("Auth not available, using local mode")})});return()=>re()},[]);const[C,F]=O.useState(null),[q,B]=O.useState([]),A=O.useRef({});O.useEffect(()=>{let re=!0;const he=Cu(hn,Rh),_e=dm(he,Ie=>{const pe={},be={},Ct=[];Ie.forEach(ye=>{var ct,Le,Be,Cn;const ke=ye.data();if(ke.status&&(be[ye.id]=ke.status),ke.capturedBy){pe[ye.id]={team:ke.capturedBy,playerName:ke.playerName||"Unknown",capturedAt:((Le=(ct=ke.capturedAt)==null?void 0:ct.toDate)==null?void 0:Le.call(ct))||null};const ti=Js.find(Ns=>Ns.id===ye.id);Ct.push({id:ye.id,artName:(ti==null?void 0:ti.name)||ye.id,area:(ti==null?void 0:ti.area)||"Unknown",team:ke.capturedBy,playerName:ke.playerName||"Unknown",capturedAt:((Cn=(Be=ke.capturedAt)==null?void 0:Be.toDate)==null?void 0:Cn.call(Be))||new Date,points:ke.points||100,isRecapture:ke.isRecapture||!1})}});const vt=Ct.sort((ye,ke)=>ke.capturedAt-ye.capturedAt).slice(0,10);B(vt),re||Ie.docChanges().forEach(ye=>{var ke;if(ye.type==="added"||ye.type==="modified"){const ct=ye.doc.data(),Le=(ke=A.current[ye.doc.id])==null?void 0:ke.team;if(ct.capturedBy&&Le!==ct.capturedBy){const Be=Js.find(Cn=>Cn.id===ye.doc.id);Be&&(F({artName:Be.name,team:ct.capturedBy,playerName:ct.playerName||"Someone",points:ct.points||Fa(Be),streak:ct.streak||0,isRecapture:ct.isRecapture||!!Le,timestamp:Date.now()}),setTimeout(()=>F(null),4e3))}}}),re=!1,A.current=pe,v(Js.map(ye=>{const ke=pe[ye.id];return{...ye,capturedBy:(ke==null?void 0:ke.team)||null,capturedByPlayer:(ke==null?void 0:ke.playerName)||null,capturedAt:(ke==null?void 0:ke.capturedAt)||null,status:be[ye.id]||ye.status}})),Xl($n.captures,pe),r(!0),console.log("Firebase: Synced",Object.keys(pe).length,"captures")},Ie=>{console.warn("Firestore sync error:",Ie),r(!1)});return()=>_e()},[]);const[S,N]=O.useState({red:0,blue:0});O.useEffect(()=>{const re=Cu(hn,q6),he=dm(re,_e=>{const Ie={red:0,blue:0};_e.forEach(pe=>{const be=pe.data();(pe.id==="red"||pe.id==="blue")&&(Ie[pe.id]=be.score||0)}),N(Ie),console.log("Team scores:",Ie)});return()=>he()},[]);const[D,V]=O.useState([]);O.useEffect(()=>{const re=Cu(hn,k1),he=dm(re,_e=>{const Ie=[];_e.forEach(pe=>{const be=pe.data();be.name&&be.team&&Ie.push({id:pe.id,name:be.name,team:be.team,score:be.score||0,captures:be.captures||0})}),V(Ie.sort((pe,be)=>be.score-pe.score)),console.log("Players loaded:",Ie.length)});return()=>he()},[]),O.useEffect(()=>{Xl($n.player,f)},[f]);const U=O.useCallback(async(re,he)=>{if(i)try{await ir(bi(hn,Rh,re),{artId:re,capturedBy:he.team,capturedAt:new Date,playerId:f.id,playerName:f.name,points:he.points,streak:he.streak,isFirstCapture:he.isFirstCapture,isRecapture:he.isRecapture})}catch(_e){console.warn("Failed to sync capture to Firebase:",_e)}},[i,f.id,f.name]);O.useCallback(async re=>{if(i)try{await ir(bi(hn,Rh,"global"),re,{merge:!0})}catch(he){console.warn("Failed to sync to Firebase:",he)}},[i]);const M=rA(m),ee={red:Math.max(S.red,M.red),blue:Math.max(S.blue,M.blue)},We=O.useCallback(async re=>{if(ms.includes(re)&&(g(he=>({...he,team:re})),i&&f.id))try{await ir(bi(hn,k1,f.id),{name:f.name,team:re,score:f.score||0,captures:f.captureCount||0,joinedAt:new Date},{merge:!0})}catch(he){console.warn("Failed to sync player to Firebase:",he)}},[i,f.id,f.name,f.score,f.captureCount]),ge=O.useCallback(re=>{g(he=>({...he,name:re}))},[]),Xe=O.useCallback((re,he,_e=50)=>{let Ie=null,pe=1/0;return m.forEach(be=>{const Ct=(be.location[0]-re)*111e3,vt=(be.location[1]-he)*111e3*Math.cos(re*Math.PI/180),ye=Math.sqrt(Ct*Ct+vt*vt);ye<pe&&ye<=_e&&(pe=ye,Ie={...be,distance:Math.round(ye)})}),Ie},[m]),Z=O.useCallback((re,he,_e,Ie)=>{const pe=(_e-re)*111e3,be=(Ie-he)*111e3*Math.cos(re*Math.PI/180);return Math.sqrt(pe*pe+be*be)},[]),ce=O.useCallback((re,he,_e=null)=>{const Ie=Fa(re),pe=[];let be=Ie;const Ct=re.capturedBy&&re.capturedBy!==he.team,vt=!re.capturedBy,ye=Date.now(),ke=he.lastCaptureTime?(ye-he.lastCaptureTime)/1e3/60:1/0,ct=he.streak||0;if(ct>0){const Le=Math.min(ct*.1,1),Be=Math.round(Ie*Le);Be>0&&(be+=Be,pe.push({type:"streak",label:` ${ct}x Streak`,points:Be}))}if(Ct){const Le=Math.round(Ie*.5);be+=Le,pe.push({type:"recapture",label:" Recapture",points:Le})}if(vt){const Le=Math.round(Ie*.25);be+=Le,pe.push({type:"first",label:" First Capture",points:Le})}if(ke<5){const Le=Math.round(Ie*.2);be+=Le,pe.push({type:"speed",label:" Speed Bonus",points:Le})}if(_e&&he.lastCaptureLocation){const Le=Z(he.lastCaptureLocation[0],he.lastCaptureLocation[1],_e[0],_e[1]);if(Le>50){const Be=Math.min(Math.round(Le/100)*5,50);Be>0&&(be+=Be,pe.push({type:"distance",label:` ${Math.round(Le)}m walked`,points:Be}))}}return{basePoints:Ie,totalPoints:be,bonuses:pe,isRecapture:Ct,isFirstCapture:vt}},[Z]),J=O.useCallback((re,he=null)=>{if(!f.team)return{success:!1,message:"Join a team first!"};const _e=m.find(ye=>ye.id===re);if(!_e)return{success:!1,message:"Art not found"};if(_e.capturedBy===f.team)return{success:!1,message:"Already yours!"};if(_e.status==="ghost")return{success:!1,message:"This art no longer exists"};const Ie=he||_e.location,pe=ce(_e,f,Ie),be=_e.capturedBy;v(ye=>ye.map(ke=>ke.id===re?{...ke,capturedBy:f.team}:ke));const Ct=f.streak+1;g(ye=>({...ye,score:ye.score+pe.totalPoints,capturedArt:[...ye.capturedArt.filter(ke=>ke!==re),re],streak:Ct,maxStreak:Math.max(ye.maxStreak,Ct),lastCaptureTime:Date.now(),lastCaptureLocation:Ie,captureCount:ye.captureCount+1,recaptureCount:pe.isRecapture?ye.recaptureCount+1:ye.recaptureCount,firstCaptureCount:pe.isFirstCapture?ye.firstCaptureCount+1:ye.firstCaptureCount,totalDistance:ye.totalDistance+(he&&ye.lastCaptureLocation?Z(ye.lastCaptureLocation[0],ye.lastCaptureLocation[1],he[0],he[1]):0)})),U(re,{team:f.team,points:pe.totalPoints,streak:Ct,isFirstCapture:pe.isFirstCapture,isRecapture:pe.isRecapture});const vt=Yl($n.captures,{});return Xl($n.captures,{...vt,[re]:f.team}),{success:!0,art:_e,points:pe.totalPoints,basePoints:pe.basePoints,bonuses:pe.bonuses,streak:Ct,previousTeam:be,message:be?`Stolen from ${be}!`:"Captured!"}},[f,m,U,ce,Z]),ne=O.useCallback(async(re,he)=>{j(!0);const _e=Xe(he.lat,he.lng,100);if(!_e){j(!1),k({success:!1,message:"No street art nearby. Get closer!"});return}P({art:_e,photo:re,location:he}),j(!1)},[Xe]),Ce=O.useCallback(()=>{if(!b)return;const re=J(b.art.id);k(re),P(null)},[b,J]),tt=O.useCallback(()=>{P(null),k(null)},[]),Me=O.useCallback(re=>{(re===Ze.SOLO||re===Ze.TEAM)&&(a(re),Xl($n.gameMode,re))},[]),Re=O.useCallback(async(re,he=null)=>{const _e=m.find(vt=>vt.id===re);if(!_e)return{success:!1,message:"Art not found"};if(u[re])return{success:!1,message:"Already discovered!",alreadyDiscovered:!0};const Ie=new Date,pe={artId:re,artName:_e.name,area:_e.area,size:_e.size,points:Fa(_e),discoveredAt:Ie.toISOString(),location:he||_e.location},be={...u,[re]:pe};h(be),Xl($n.discoveries,be);const Ct=new Set([...f.uniqueAreasVisited,_e.area]);if(g(vt=>({...vt,score:vt.score+pe.points,discoveryCount:vt.discoveryCount+1,uniqueAreasVisited:[...Ct],lastCaptureTime:Ie.getTime(),lastCaptureLocation:he||_e.location})),i&&f.id)try{await ir(bi(hn,"streetart-discoveries",`${f.id}_${re}`),{...pe,playerId:f.id,playerName:f.name})}catch(vt){console.warn("Failed to sync discovery to Firebase:",vt)}return{success:!0,message:"Discovered!",discovery:pe}},[m,u,f,i]),fe=O.useCallback(async()=>{if(localStorage.removeItem($n.player),localStorage.removeItem($n.captures),e&&i)try{await ir(bi(hn,Rh,"global"),{})}catch(re){console.warn("Failed to reset Firebase:",re)}g({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),v(Js.map(re=>({...re,capturedBy:null}))),k(null),P(null)},[e,i]),dt={player:f,artPoints:m,teamScores:ee,globalTeamScores:S,allPlayers:D,recentCaptures:q,captureNotification:C,scanResult:T,isScanning:R,pendingCapture:b,isOnline:i,teams:ms,gameMode:o,discoveries:u,discoveryCount:Object.keys(u).length,setGameMode:Me,joinTeam:We,setPlayerName:ge,captureArt:J,discoverArt:Re,startCapture:ne,confirmCapture:Ce,cancelCapture:tt,findNearestArt:Xe,setScanResult:k,resetAll:fe,TEAM_COLORS:ot,GAME_MODES:Ze};return _.jsx(sA.Provider,{value:dt,children:t})}function Ui(){const t=O.useContext(sA);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ne=(t,e)=>{const n=O.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},g)=>O.createElement("svg",{ref:g,...Z6,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${K6(t)}`,u].join(" "),...f},[...e.map(([m,v])=>O.createElement(m,v)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=Ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=Ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=Ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=Ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=Ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=Ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=Ne("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=Ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=Ne("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=Ne("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=Ne("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=Ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Ne("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Ne("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=Ne("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=Ne("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=Ne("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=Ne("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=Ne("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=Ne("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=Ne("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=Ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=Ne("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=Ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=Ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=Ne("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=Ne("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=Ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Ne("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=Ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=Ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=Ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=Ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=Ne("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=Ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=Ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Ne("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Tz=51,Ez=24;function cA({size:t=120,className:e=""}){const[n,i]=O.useState(0);O.useEffect(()=>{const a=setInterval(()=>{i(u=>(u+1)%Tz)},1e3/Ez);return()=>clearInterval(a)},[]);const r=String(n).padStart(5,"0");return _.jsx("img",{src:`/street-art-ctf/animation/frame_${r}.png`,alt:"Loading",width:t,height:t,className:e,style:{imageRendering:"pixelated",objectFit:"contain"}})}const M1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],O1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function D1(){const t=M1[Math.floor(Math.random()*M1.length)],e=O1[Math.floor(Math.random()*O1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function Pz(){const t=Cf(),{player:e,joinTeam:n,setPlayerName:i,setGameMode:r,gameMode:o,allPlayers:a}=Ui(),[u,h]=O.useState(0),[f,g]=O.useState(()=>e.name&&e.name!=="Street Artist"?e.name:D1()),[m,v]=O.useState(Ze.SOLO),[T,k]=O.useState(null);O.useEffect(()=>{e.name&&e.name!=="Street Artist"&&e.discoveryCount>0&&t("/map")},[]),O.useEffect(()=>{const q=a.filter(S=>S.team==="red").length,B=a.filter(S=>S.team==="blue").length,A=q<B?"red":B<q?"blue":Math.random()<.5?"red":"blue";k(A)},[a]);const R=()=>{g(D1())},j=()=>{if(u===1&&f.trim()&&i(f.trim()),u===2)if(r(m),m===Ze.TEAM&&T){n(T),h(3);return}else{h(4);return}if(m===Ze.TEAM&&u===4||m===Ze.SOLO&&u===4){t("/map");return}if(u===3){h(4);return}h(u+1)},b=()=>u===1?f.trim().length>=2:u===2?m!==null:!0,P=T==="red"?"#ff6b6b":"#4dabf7",C=T==="red"?"Red":"Blue";Ze.TEAM;const F=()=>m===Ze.SOLO&&u>2?u-1:u;return _.jsxs("div",{className:"h-screen bg-[#0a0a0f] flex flex-col overflow-hidden",children:[_.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:Array.from({length:4}).map((q,B)=>_.jsx("div",{className:`h-1.5 rounded-sm transition-all duration-300 ${F()===B?"bg-white w-8":F()>B?"bg-white/60 w-1.5":"bg-white/20 w-1.5"}`},B))}),_.jsxs(Oa,{mode:"wait",children:[u===0&&_.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[_.jsx(ie.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},className:"mb-6",children:_.jsx(cA,{size:140})}),_.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Street Art CTF"}),_.jsx("p",{className:"text-white/40 max-w-xs mb-8",children:"Scan real street art to capture territory for your team. The city is your battlefield."}),_.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[_.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[_.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:_.jsx(R1,{size:20,className:"text-white/70"})}),_.jsxs("div",{className:"text-left",children:[_.jsx("div",{className:"font-medium text-sm",children:"Scan Art"}),_.jsx("div",{className:"text-xs text-white/40",children:"Find and capture street art"})]})]}),_.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[_.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:_.jsx(rd,{size:20,className:"text-white/70"})}),_.jsxs("div",{className:"text-left",children:[_.jsx("div",{className:"font-medium text-sm",children:"Control Territory"}),_.jsx("div",{className:"text-xs text-white/40",children:"Expand your team's area"})]})]}),_.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[_.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:_.jsx(sc,{size:20,className:"text-white/70"})}),_.jsxs("div",{className:"text-left",children:[_.jsx("div",{className:"font-medium text-sm",children:"Win Together"}),_.jsx("div",{className:"text-xs text-white/40",children:"Lead your team to victory"})]})]})]})]},"intro"),u===1&&_.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[_.jsx("h1",{className:"text-2xl font-bold mb-2",children:"What's your name?"}),_.jsx("p",{className:"text-white/40 mb-8",children:"This is how others will see you"}),_.jsx("div",{className:"w-full max-w-xs mb-4",children:_.jsx("input",{type:"text",value:f,onChange:q=>g(q.target.value),placeholder:"Enter your name...",maxLength:20,className:"w-full px-4 py-4 rounded-lg bg-white/5 border border-white/10 text-center text-xl font-medium placeholder:text-white/30 focus:outline-none focus:border-white/30"})}),_.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white/50 hover:bg-white/10 transition-colors",children:[_.jsx(uA,{size:16}),"Generate random name"]})]},"name"),u===2&&_.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[_.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Choose Your Mode"}),_.jsx("p",{className:"text-white/40 mb-8 max-w-xs",children:"How do you want to explore?"}),_.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[_.jsx(ie.button,{onClick:()=>v(Ze.SOLO),className:`w-full p-5 rounded-2xl border-2 text-left transition-all ${m===Ze.SOLO?"bg-gradient-to-br from-purple-500/20 to-pink-500/20 border-purple-500/50":"bg-white/5 border-white/10 hover:border-white/20"}`,whileTap:{scale:.98},children:_.jsxs("div",{className:"flex items-start gap-4",children:[_.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${m===Ze.SOLO?"bg-gradient-to-br from-purple-500 to-pink-500":"bg-white/10"}`,children:_.jsx(iz,{size:28,className:"text-white"})}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("h3",{className:"font-bold text-lg",children:"Solo Explorer"}),_.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-500/30 text-purple-300",children:"Recommended"})]}),_.jsx("p",{className:"text-sm text-white/50 mt-1",children:"Discover street art at your own pace. Build your personal collection without competition."}),_.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-white/40",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(L1,{size:12})," Personal Portfolio"]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(rc,{size:12})," Achievements"]})]})]})]})}),_.jsx(ie.button,{onClick:()=>v(Ze.TEAM),className:`w-full p-5 rounded-2xl border-2 text-left transition-all ${m===Ze.TEAM?"bg-gradient-to-br from-red-500/20 to-blue-500/20 border-blue-500/50":"bg-white/5 border-white/10 hover:border-white/20"}`,whileTap:{scale:.98},children:_.jsxs("div",{className:"flex items-start gap-4",children:[_.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${m===Ze.TEAM?"bg-gradient-to-br from-red-500 to-blue-500":"bg-white/10"}`,children:_.jsx(sv,{size:28,className:"text-white"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"font-bold text-lg",children:"Team Battle"}),_.jsx("p",{className:"text-sm text-white/50 mt-1",children:"Join a team and compete for territory. Capture flags and defend your turf."}),_.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-white/40",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(sc,{size:12})," Team Play"]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(rd,{size:12})," Territory Control"]})]})]})]})})]}),_.jsx("p",{className:"text-xs text-white/30 mt-6",children:"You can switch modes anytime in settings"})]},"mode-select"),u===3&&m===Ze.TEAM&&_.jsxs(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative overflow-hidden",children:[_.jsx(ie.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:.15},transition:{delay:.3,duration:.8},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:_.jsx("div",{className:"w-[600px] h-[600px] rounded-full blur-3xl",style:{backgroundColor:P}})}),_.jsxs(ie.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:200},className:"relative z-10",children:[_.jsxs(ie.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-white/50 text-lg mb-2",children:["Welcome, ",f,"!"]}),_.jsx(ie.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-white/40 text-sm mb-6",children:"You've been assigned to"}),_.jsx(ie.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.8,type:"spring",stiffness:200},children:_.jsxs("h1",{className:"text-6xl font-bold mb-4",style:{color:P},children:["Team ",C]})}),_.jsx(ie.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"text-white/30 text-sm",children:T==="red"?"The Flames ":"The Waves "})]})]},"team-reveal"),u===4&&_.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[_.jsx("h1",{className:"text-2xl font-bold mb-2",children:m===Ze.SOLO?"How to Explore":"How to Play"}),_.jsx("p",{className:"text-white/40 mb-8 text-sm",children:"It's simple!"}),_.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[_.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[_.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center flex-shrink-0",children:_.jsx(R1,{size:24,className:"text-white"})}),_.jsxs("div",{className:"text-left",children:[_.jsx("h3",{className:"font-semibold text-base mb-1",children:"Find & Scan"}),_.jsxs("p",{className:"text-sm text-white/50 leading-relaxed",children:["Explore Prague to find street art. Use your camera to scan and ",m===Ze.SOLO?"discover":"capture"," it."]})]})]}),_.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[_.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${m===Ze.SOLO?"from-purple-500/30 to-pink-500/30":"from-blue-500/30 to-cyan-500/30"} flex items-center justify-center flex-shrink-0`,children:m===Ze.SOLO?_.jsx(L1,{size:24,className:"text-white"}):_.jsx(rd,{size:24,className:"text-white"})}),_.jsxs("div",{className:"text-left",children:[_.jsx("h3",{className:"font-semibold text-base mb-1",children:m===Ze.SOLO?"Build Your Collection":"Claim Territory"}),_.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:m===Ze.SOLO?"Every discovery is yours forever. Build a portfolio of the art you find.":"Each capture claims territory for your team. Check the map to see who controls what."})]})]}),_.jsxs(ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[_.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${m===Ze.SOLO?"from-green-500/30 to-emerald-500/30":"from-yellow-500/30 to-orange-500/30"} flex items-center justify-center flex-shrink-0`,children:m===Ze.SOLO?_.jsx(rc,{size:24,className:"text-white"}):_.jsx(av,{size:24,className:"text-white"})}),_.jsxs("div",{className:"text-left",children:[_.jsx("h3",{className:"font-semibold text-base mb-1",children:m===Ze.SOLO?"Earn Achievements":"Score Points"}),_.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:m===Ze.SOLO?"No pressure, no competition. Just explore and enjoy discovering hidden art.":"Bigger art = more points. Steal from enemies for bonus points!"})]})]})]})]},"tutorial")]}),_.jsx("div",{className:"p-4 pb-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:_.jsxs(ie.button,{whileTap:{scale:.98},onClick:j,disabled:!b(),className:`w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition-all ${b()?"bg-white text-black":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:[u===4?"Let's Go!":"Continue",_.jsx(X6,{size:20})]})})]})}const Sz=[{color:"red",name:"Red Team"},{color:"blue",name:"Blue Team"}];function Cz(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"just now";const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const i=Math.floor(n/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function Iz(){const{player:t,joinTeam:e,teamScores:n,recentCaptures:i,isOnline:r}=Ui(),o=f=>{e(f)},a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},u={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},h=Object.values(n).reduce((f,g)=>f+g,0);return _.jsxs(ie.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:a,children:[_.jsxs(ie.div,{className:"text-center mb-6",variants:u,children:[_.jsx(ie.div,{className:"relative inline-block mb-3",animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:_.jsx(cA,{size:70})}),_.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Street Art CTF"}),_.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] ${r?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[r?_.jsx(tz,{size:10}):_.jsx(vz,{size:10}),r?"Live":"Offline"]})]}),_.jsxs(ie.div,{variants:u,className:"mb-6",children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsx("span",{className:"text-xs text-white/40",children:"Red Team"}),_.jsx("span",{className:"text-xs text-white/40",children:"Blue Team"})]}),_.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-white/10",children:[_.jsx(ie.div,{className:"h-full",style:{backgroundColor:ot.red.hex},initial:{width:"50%"},animate:{width:h>0?`${n.red/h*100}%`:"50%"},transition:{duration:.8}}),_.jsx(ie.div,{className:"h-full",style:{backgroundColor:ot.blue.hex},initial:{width:"50%"},animate:{width:h>0?`${n.blue/h*100}%`:"50%"},transition:{duration:.8}})]}),_.jsxs("div",{className:"flex items-center justify-between mt-2",children:[_.jsxs("span",{className:"text-sm font-bold",style:{color:ot.red.hex},children:[n.red," pts"]}),_.jsxs("span",{className:"text-sm font-bold",style:{color:ot.blue.hex},children:[n.blue," pts"]})]})]}),t.team?_.jsx(ie.div,{className:"mb-6 p-4 rounded-xl border-2",variants:u,style:{borderColor:ot[t.team].hex+"50",backgroundColor:ot[t.team].hex+"10"},children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:ot[t.team].hex+"30"},children:_.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ot[t.team].hex}})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold text-white",children:t.name}),_.jsx("p",{className:"text-xs",style:{color:ot[t.team].hex},children:t.team==="red"?"Red Team":"Blue Team"})]})]}),_.jsxs("div",{className:"text-right",children:[_.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),_.jsx("p",{className:"text-[10px] text-white/40",children:"points"})]})]})}):_.jsxs(ie.div,{variants:u,className:"mb-6",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[_.jsx(sc,{size:14,className:"text-white/40"}),_.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),_.jsx("div",{className:"grid grid-cols-2 gap-3",children:Sz.map(({color:f,name:g})=>_.jsxs(ie.button,{onClick:()=>o(f),className:"p-4 rounded-xl text-center border-2 transition-all",style:{borderColor:ot[f].hex+"50",backgroundColor:ot[f].hex+"10"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[_.jsx("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:ot[f].hex+"30"},children:_.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:ot[f].hex}})}),_.jsx("p",{className:"font-semibold text-white",children:g})]},f))})]}),_.jsxs(ie.div,{variants:u,children:[_.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[_.jsx(ez,{size:14,className:"text-white/40"}),_.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Live Activity"})]}),i.length===0?_.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:"No captures yet. Be the first!"}):_.jsx("div",{className:"space-y-2",children:i.map((f,g)=>{var v;const m=((v=ot[f.team])==null?void 0:v.hex)||"#888";return _.jsxs(ie.div,{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.05},children:[_.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${m}20`},children:f.isRecapture?_.jsx(sv,{size:14,style:{color:m}}):_.jsx(oA,{size:14,style:{color:m}})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-sm font-medium text-white truncate",children:f.artName}),_.jsxs("p",{className:"text-[10px] text-white/40",children:[_.jsx("span",{style:{color:m},children:f.playerName}),"  ",f.area]})]}),_.jsxs("div",{className:"text-right flex-shrink-0",children:[_.jsxs("p",{className:"text-xs font-semibold",style:{color:m},children:["+",f.points]}),_.jsx("p",{className:"text-[10px] text-white/30",children:Cz(f.capturedAt)})]})]},f.id)})})]})]})}function Az(t,e){const n=O.useRef(e);O.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function bz(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const kz=1;function Rz(t){return Object.freeze({__version:kz,map:t})}function ep(t,e){return Object.freeze({...t,...e})}const hA=O.createContext(null),dA=hA.Provider;function lv(){const t=O.useContext(hA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function fA(t){function e(n,i){const{instance:r,context:o}=t(n).current;return O.useImperativeHandle(i,()=>r),n.children==null?null:co.createElement(dA,{value:o},n.children)}return O.forwardRef(e)}function Nz(t){function e(n,i){const{instance:r}=t(n).current;return O.useImperativeHandle(i,()=>r),null}return O.forwardRef(e)}function pA(t,e){const n=O.useRef();O.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function uv(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Yg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(QA,function(n){var i="1.9.4";function r(s){var l,d,p,w;for(d=1,p=arguments.length;d<p;d++){w=arguments[d];for(l in w)s[l]=w[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,w,E,z;return z=function(){p=!1,w&&(E.apply(d,w),w=!1)},E=function(){p?w=arguments:(s.apply(d,arguments),setTimeout(z,l),p=!0)},E}function g(s,l,d){var p=l[1],w=l[0],E=p-w;return s===p&&d?s:((s-w)%E+E)%E+w}function m(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return T(s).split(/\s+/)}function R(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function j(s,l,d){var p=[];for(var w in s)p.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(s[w]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function P(s,l){return s.replace(b,function(d,p){var w=l[p];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(l)),w})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function F(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var A=0;function S(s){var l=+new Date,d=Math.max(0,16-(l-A));return A=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||B("RequestAnimationFrame")||S,D=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,l,d){if(d&&N===S)s.call(l);else return N.call(window,a(s,l))}function U(s){s&&D.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:g,falseFn:m,formatNum:v,trim:T,splitWords:k,setOptions:R,getParamString:j,template:P,isArray:C,indexOf:F,emptyImageUrl:q,requestFn:N,cancelFn:D,requestAnimFrame:V,cancelAnimFrame:U};function ee(){}ee.extend=function(s){var l=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(l[w]=this[w]);return s.statics&&r(l,s.statics),s.includes&&(We(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,z=p._initHooks.length;E<z;E++)p._initHooks[E].call(this)}},l},ee.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ee.mergeOptions=function(s){return r(this.prototype.options,s),this},ee.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function We(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ge={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var w=0,E=s.length;w<E;w++)this._on(s[w],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var w=arguments.length===1,E=0,z=s.length;E<z;E++)w?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var w={fn:l,ctx:d};p&&(w.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(w)}},_off:function(s,l,d){var p,w,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(w=0,E=p.length;w<E;w++)p[w].fn=m;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var z=this._listens(s,l,d);if(z!==!1){var W=p[z];this._firingCount&&(W.fn=m,this._events[s]=p=p.slice()),p.splice(z,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var w=this._events[s];if(w){this._firingCount=this._firingCount+1||1;for(var E=0,z=w.length;E<z;E++){var W=w[E],G=W.fn;W.once&&this.off(s,G,W.ctx),G.call(W.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var w=l;typeof l!="function"&&(p=!!l,w=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,w,d)!==!1)return!0;if(p){for(var z in this._eventParents)if(this._eventParents[z].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var w=0,E=p.length;w<E;w++)if(p[w].fn===l&&p[w].ctx===d)return w;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var w=0,E=s.length;w<E;w++)this._on(s[w],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};ge.addEventListener=ge.on,ge.removeEventListener=ge.clearAllEventListeners=ge.off,ge.addOneTimeEventListener=ge.once,ge.fireEvent=ge.fire,ge.hasEventListeners=ge.listens;var Xe=ee.extend(ge);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function J(s,l,d){return s instanceof Z?s:C(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function ne(s,l){if(s)for(var d=l?[s,l]:s,p=0,w=d.length;p<w;p++)this.extend(d[p])}ne.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=Ce(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=J(s):s=Ce(s),s instanceof ne?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Ce(s);var l=this.min,d=this.max,p=s.min,w=s.max,E=w.x>=l.x&&p.x<=d.x,z=w.y>=l.y&&p.y<=d.y;return E&&z},overlaps:function(s){s=Ce(s);var l=this.min,d=this.max,p=s.min,w=s.max,E=w.x>l.x&&p.x<d.x,z=w.y>l.y&&p.y<d.y;return E&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,w=Math.abs(l.y-d.y)*s;return Ce(J(l.x-p,l.y-w),J(d.x+p,d.y+w))},equals:function(s){return s?(s=Ce(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Ce(s,l){return!s||s instanceof ne?s:new ne(s,l)}function tt(s,l){if(s)for(var d=l?[s,l]:s,p=0,w=d.length;p<w;p++)this.extend(d[p])}tt.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,w;if(s instanceof Re)p=s,w=s;else if(s instanceof tt){if(p=s._southWest,w=s._northEast,!p||!w)return this}else return s?this.extend(fe(s)||Me(s)):this;return!l&&!d?(this._southWest=new Re(p.lat,p.lng),this._northEast=new Re(w.lat,w.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,w=Math.abs(l.lng-d.lng)*s;return new tt(new Re(l.lat-p,l.lng-w),new Re(d.lat+p,d.lng+w))},getCenter:function(){return new Re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Re(this.getNorth(),this.getWest())},getSouthEast:function(){return new Re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Re||"lat"in s?s=fe(s):s=Me(s);var l=this._southWest,d=this._northEast,p,w;return s instanceof tt?(p=s.getSouthWest(),w=s.getNorthEast()):p=w=s,p.lat>=l.lat&&w.lat<=d.lat&&p.lng>=l.lng&&w.lng<=d.lng},intersects:function(s){s=Me(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),w=s.getNorthEast(),E=w.lat>=l.lat&&p.lat<=d.lat,z=w.lng>=l.lng&&p.lng<=d.lng;return E&&z},overlaps:function(s){s=Me(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),w=s.getNorthEast(),E=w.lat>l.lat&&p.lat<d.lat,z=w.lng>l.lng&&p.lng<d.lng;return E&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Me(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Me(s,l){return s instanceof tt?s:new tt(s,l)}function Re(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Re.prototype={equals:function(s,l){if(!s)return!1;s=fe(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return re.distance(this,fe(s))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Me([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Re(this.lat,this.lng,this.alt)}};function fe(s,l,d){return s instanceof Re?s:C(s)&&typeof s[0]!="object"?s.length===3?new Re(s[0],s[1],s[2]):s.length===2?new Re(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Re(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Re(s,l,d)}var dt={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),w=this.transformation.transform(l.max,d);return new ne(p,w)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Re(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,w=l.lng-d.lng;if(p===0&&w===0)return s;var E=s.getSouthWest(),z=s.getNorthEast(),W=new Re(E.lat-p,E.lng-w),G=new Re(z.lat-p,z.lng-w);return new tt(W,G)}},re=r({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,w=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),z=Math.sin((l.lng-s.lng)*d/2),W=E*E+Math.cos(p)*Math.cos(w)*z*z,G=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*G}}),he=6378137,_e={R:he,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),w=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(s){var l=180/Math.PI;return new Re((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=he*Math.PI;return new ne([-s,-s],[s,s])}()};function Ie(s,l,d,p){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}Ie.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function pe(s,l,d,p){return new Ie(s,l,d,p)}var be=r({},re,{code:"EPSG:3857",projection:_e,transformation:function(){var s=.5/(Math.PI*_e.R);return pe(s,.5,-s,.5)}()}),Ct=r({},be,{code:"EPSG:900913"});function vt(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ye(s,l){var d="",p,w,E,z,W,G;for(p=0,E=s.length;p<E;p++){for(W=s[p],w=0,z=W.length;w<z;w++)G=W[w],d+=(w?"L":"M")+G.x+" "+G.y;d+=l?ue.svg?"z":"x":""}return d||"M0 0"}var ke=document.documentElement.style,ct="ActiveXObject"in window,Le=ct&&!document.addEventListener,Be="msLaunchUri"in navigator&&!("documentMode"in document),Cn=mn("webkit"),ti=mn("android"),Ns=mn("android 2")||mn("android 3"),np=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ls=ti&&mn("Google")&&np<537&&!("AudioNode"in window),Lo=!!window.opera,gl=!Be&&mn("chrome"),Mo=mn("gecko")&&!Cn&&!Lo&&!ct,ip=!gl&&mn("safari"),Ic=mn("phantom"),yl="OTransition"in ke,Ac=navigator.platform.indexOf("Win")===0,Cr=ct&&"transition"in ke,Ms="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ns,Oo="MozPerspective"in ke,Hi=!window.L_DISABLE_3D&&(Cr||Ms||Oo)&&!yl&&!Ic,Ir=typeof orientation<"u"||mn("mobile"),Do=Ir&&Cn,bc=Ir&&Ms,Ar=!window.PointerEvent&&window.MSPointerEvent,_l=!!(window.PointerEvent||Ar),jt="ontouchstart"in window||!!window.TouchEvent,kc=!window.L_NO_TOUCH&&(jt||_l),Os=Ir&&Lo,Ds=Ir&&Mo,rp=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,sp=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",m,l),window.removeEventListener("testPassiveEventSupport",m,l)}catch{}return s}(),br=function(){return!!document.createElement("canvas").getContext}(),vl=!!(document.createElementNS&&vt("svg").createSVGRect),op=!!vl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Vo=!vl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Rc=navigator.platform.indexOf("Mac")===0,Nc=navigator.platform.indexOf("Linux")===0;function mn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ue={ie:ct,ielt9:Le,edge:Be,webkit:Cn,android:ti,android23:Ns,androidStock:Ls,opera:Lo,chrome:gl,gecko:Mo,safari:ip,phantom:Ic,opera12:yl,win:Ac,ie3d:Cr,webkit3d:Ms,gecko3d:Oo,any3d:Hi,mobile:Ir,mobileWebkit:Do,mobileWebkit3d:bc,msPointer:Ar,pointer:_l,touch:kc,touchNative:jt,mobileOpera:Os,mobileGecko:Ds,retina:rp,passiveEvents:sp,canvas:br,svg:vl,vml:Vo,inlineSvg:op,mac:Rc,linux:Nc},Lc=ue.msPointer?"MSPointerDown":"pointerdown",ni=ue.msPointer?"MSPointerMove":"pointermove",wl=ue.msPointer?"MSPointerUp":"pointerup",xl=ue.msPointer?"MSPointerCancel":"pointercancel",Vs={touchstart:Lc,touchmove:ni,touchend:wl,touchcancel:xl},jo={touchstart:Tl,touchmove:Vn,touchend:Vn,touchcancel:Vn},Wi={},Mc=!1;function Oc(s,l,d){return l==="touchstart"&&js(),jo[l]?(d=jo[l].bind(this,d),s.addEventListener(Vs[l],d,!1),d):(console.warn("wrong event specified:",l),m)}function ap(s,l,d){if(!Vs[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Vs[l],d,!1)}function zo(s){Wi[s.pointerId]=s}function Dc(s){Wi[s.pointerId]&&(Wi[s.pointerId]=s)}function Fo(s){delete Wi[s.pointerId]}function js(){Mc||(document.addEventListener(Lc,zo,!0),document.addEventListener(ni,Dc,!0),document.addEventListener(wl,Fo,!0),document.addEventListener(xl,Fo,!0),Mc=!0)}function Vn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Wi)l.touches.push(Wi[d]);l.changedTouches=[l],s(l)}}function Tl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&It(l),Vn(s,l)}function lp(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Vc=200;function jc(s,l){s.addEventListener("dblclick",l);var d=0,p;function w(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var z=Il(E);if(!(z.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!z.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var W=Date.now();W-d<=Vc?(p++,p===2&&l(lp(E))):p=1,d=W}}}return s.addEventListener("click",w),{dblclick:l,simDblclick:w}}function zc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var zs=Bo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$i=Bo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),El=$i==="webkitTransition"||$i==="OTransition"?$i+"End":"transitionend";function Pl(s){return typeof s=="string"?document.getElementById(s):s}function kr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Ue(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function qe(s){var l=s.parentNode;l&&l.removeChild(s)}function on(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function jn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function zn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Fs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=yi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function ae(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,w=d.length;p<w;p++)s.classList.add(d[p]);else if(!Fs(s,l)){var E=yi(s);qi(s,(E?E+" ":"")+l)}}function nt(s,l){s.classList!==void 0?s.classList.remove(l):qi(s,T((" "+yi(s)+" ").replace(" "+l+" "," ")))}function qi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function yi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function gn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Fc(s,l)}function Fc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Bo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Gi(s,l,d){var p=l||new Z(0,0);s.style[zs]=(ue.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function wt(s,l){s._leaflet_pos=l,ue.any3d?Gi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Zi(s){return s._leaflet_pos||new Z(0,0)}var ii,In,Uo;if("onselectstart"in document)ii=function(){Ee(window,"selectstart",It)},In=function(){Je(window,"selectstart",It)};else{var Rr=Bo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ii=function(){if(Rr){var s=document.documentElement.style;Uo=s[Rr],s[Rr]="none"}},In=function(){Rr&&(document.documentElement.style[Rr]=Uo,Uo=void 0)}}function Ho(){Ee(window,"dragstart",It)}function Wo(){Je(window,"dragstart",It)}var Bs,_i;function Sl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&($o(),Bs=s,_i=s.style.outlineStyle,s.style.outlineStyle="none",Ee(window,"keydown",$o))}function $o(){Bs&&(Bs.style.outlineStyle=_i,Bs=void 0,_i=void 0,Je(window,"keydown",$o))}function Bc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Fn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var up={__proto__:null,TRANSFORM:zs,TRANSITION:$i,TRANSITION_END:El,get:Pl,getStyle:kr,create:Ue,remove:qe,empty:on,toFront:jn,toBack:zn,hasClass:Fs,addClass:ae,removeClass:nt,setClass:qi,getClass:yi,setOpacity:gn,testProp:Bo,setTransform:Gi,setPosition:wt,getPosition:Zi,get disableTextSelection(){return ii},get enableTextSelection(){return In},disableImageDrag:Ho,enableImageDrag:Wo,preventOutline:Sl,restoreOutline:$o,getSizedParentNode:Bc,getScale:Fn};function Ee(s,l,d,p){if(l&&typeof l=="object")for(var w in l)qo(s,w,l[w],d);else{l=k(l);for(var E=0,z=l.length;E<z;E++)qo(s,l[E],d,p)}return this}var an="_leaflet_events";function Je(s,l,d,p){if(arguments.length===1)Nr(s),delete s[an];else if(l&&typeof l=="object")for(var w in l)Us(s,w,l[w],d);else if(l=k(l),arguments.length===2)Nr(s,function(W){return F(l,W)!==-1});else for(var E=0,z=l.length;E<z;E++)Us(s,l[E],d,p);return this}function Nr(s,l){for(var d in s[an]){var p=d.split(/\d/)[0];(!l||l(p))&&Us(s,p,null,null,d)}}var Ki={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function qo(s,l,d,p){var w=l+h(d)+(p?"_"+h(p):"");if(s[an]&&s[an][w])return this;var E=function(W){return d.call(p||s,W||window.event)},z=E;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?E=Oc(s,l,E):ue.touch&&l==="dblclick"?E=jc(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Ki[l]||l,E,ue.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(W){W=W||window.event,bl(s,W)&&z(W)},s.addEventListener(Ki[l],E,!1)):s.addEventListener(l,z,!1):s.attachEvent("on"+l,E),s[an]=s[an]||{},s[an][w]=E}function Us(s,l,d,p,w){w=w||l+h(d)+(p?"_"+h(p):"");var E=s[an]&&s[an][w];if(!E)return this;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?ap(s,l,E):ue.touch&&l==="dblclick"?zc(s,E):"removeEventListener"in s?s.removeEventListener(Ki[l]||l,E,!1):s.detachEvent("on"+l,E),s[an][w]=null}function Ke(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Cl(s){return qo(s,"wheel",Ke),this}function Hs(s){return Ee(s,"mousedown touchstart dblclick contextmenu",Ke),s._leaflet_disable_click=!0,this}function It(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function vi(s){return It(s),Ke(s),this}function Il(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Ws(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=Fn(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var wi=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Al(s){return ue.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/wi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function bl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var $s={__proto__:null,on:Ee,off:Je,stopPropagation:Ke,disableScrollPropagation:Cl,disableClickPropagation:Hs,preventDefault:It,stop:vi,getPropagationPath:Il,getMousePosition:Ws,getWheelDelta:Al,isExternalTarget:bl,addListener:Ee,removeListener:Je},kl=Xe.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Zi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),wt(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Oe=Xe.extend({options:{crs:be,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=R(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(fe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$i&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,El,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(fe(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),w=this.getSize().divideBy(2),E=s instanceof Z?s:this.latLngToContainerPoint(s),z=E.subtract(w).multiplyBy(1-1/p),W=this.containerPointToLatLng(w.add(z));return this.setView(W,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Me(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),w=this.getBoundsZoom(s,!1,d.add(p));if(w=typeof l.maxZoom=="number"?Math.min(l.maxZoom,w):w,w===1/0)return{center:s.getCenter(),zoom:w};var E=p.subtract(d).divideBy(2),z=this.project(s.getSouthWest(),w),W=this.project(s.getNorthEast(),w),G=this.unproject(z.add(W).divideBy(2).add(E),w);return{center:G,zoom:w}},fitBounds:function(s,l){if(s=Me(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new kl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ae(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!ue.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),w=this.project(s),E=this.getSize(),z=this._zoom;s=fe(s),l=l===void 0?z:l;var W=Math.max(E.x,E.y),G=W*this.getZoomScale(z,l),Q=w.distanceTo(p)||1,se=1.42,ve=se*se;function De(At){var ih=At?-1:1,$A=At?G:W,qA=G*G-W*W+ih*ve*ve*Q*Q,GA=2*$A*ve*Q,pp=qA/GA,Mv=Math.sqrt(pp*pp+1)-pp,ZA=Mv<1e-9?-18:Math.log(Mv);return ZA}function ln(At){return(Math.exp(At)-Math.exp(-At))/2}function zt(At){return(Math.exp(At)+Math.exp(-At))/2}function Hn(At){return ln(At)/zt(At)}var _n=De(0);function sa(At){return W*(zt(_n)/zt(_n+se*At))}function BA(At){return W*(zt(_n)*Hn(_n+se*At)-ln(_n))/ve}function UA(At){return 1-Math.pow(1-At,1.5)}var HA=Date.now(),Nv=(De(1)-_n)/se,WA=d.duration?1e3*d.duration:1e3*Nv*.8;function Lv(){var At=(Date.now()-HA)/WA,ih=UA(At)*Nv;At<=1?(this._flyToFrame=V(Lv,this),this._move(this.unproject(p.add(w.subtract(p).multiplyBy(BA(ih)/Q)),z),this.getScaleZoom(W/sa(ih),z),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Lv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Me(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Me(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),w=this.project(this.getCenter()),E=this.project(s),z=this.getPixelBounds(),W=Ce([z.min.add(d),z.max.subtract(p)]),G=W.getSize();if(!W.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(W.getCenter()),se=W.extend(E).getSize().subtract(G);w.x+=Q.x<0?-se.x:se.x,w.y+=Q.y<0?-se.y:se.y,this.panTo(this.unproject(w),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),w=d.divideBy(2).round(),E=p.subtract(w);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Re(l,d),w=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var z=this.getBoundsZoom(w);this.setView(p,E.maxZoom?Math.min(z,E.maxZoom):z)}var W={latlng:p,bounds:w,timestamp:s.timestamp};for(var G in s.coords)typeof s.coords[G]=="number"&&(W[G]=s.coords[G]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)qe(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ue("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new tt(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Me(s),d=J(d||[0,0]);var p=this.getZoom()||0,w=this.getMinZoom(),E=this.getMaxZoom(),z=s.getNorthWest(),W=s.getSouthEast(),G=this.getSize().subtract(d),Q=Ce(this.project(W,p),this.project(z,p)).getSize(),se=ue.any3d?this.options.zoomSnap:1,ve=G.x/Q.x,De=G.y/Q.y,ln=l?Math.max(ve,De):Math.min(ve,De);return p=this.getScaleZoom(ln,p),se&&(p=Math.round(p/(se/100))*(se/100),p=l?Math.ceil(p/se)*se:Math.floor(p/se)*se),Math.max(w,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new ne(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(fe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(fe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(fe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Me(s))},distance:function(s,l){return this.options.crs.distance(fe(s),fe(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(s)))},mouseEventToContainerPoint:function(s){return Ws(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Pl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,ae(s,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=kr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ae(s.markerPane,"leaflet-zoom-hide"),ae(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){wt(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var w=this._zoom!==l;this._moveStart(w,d)._move(s,l)._moveEnd(w),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var w=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){wt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Je:Ee;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,w=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,z=!1;E;){if(p=this._targets[h(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){z=!0;break}if(p&&p.listens(l,!0)&&(w&&!bl(E,s)||(d.push(p),w))||E===this._container)break;E=E.parentNode}return!d.length&&!z&&!w&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Sl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var w=this._findEventTargets(s,l);if(d){for(var E=[],z=0;z<d.length;z++)d[z].listens(l,!0)&&E.push(d[z]);w=E.concat(w)}if(w.length){l==="contextmenu"&&It(s);var W=w[0],G={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);G.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=Q?W.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(z=0;z<w.length;z++)if(w[z].fire(l,G,!0),G.originalEvent._stopped||w[z].options.bubblingMouseEvents===!1&&F(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Zi(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Ce([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),w=this.getSize().divideBy(2),E=new ne(p.subtract(w),p.add(w)),z=this._getBoundsOffset(E,d,l);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?s:this.unproject(p.add(z),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new ne(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Ce(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),w=p.min.subtract(s.min),E=p.max.subtract(s.max),z=this._rebound(w.x,-E.x),W=this._rebound(w.y,-E.y);return new Z(z,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ue.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){nt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=zs,p=this._proxy.style[d];Gi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Gi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),w=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(w)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&nt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Go(s,l){return new Oe(s,l)}var yn=ee.extend({options:{position:"topright"},initialize:function(s){R(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return ae(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),xi=function(s){return new yn(s)};Oe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ue("div",l+"control-container",this._container);function p(w,E){var z=l+w+" "+l+E;s[w+E]=Ue("div",z,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)qe(this._controlCorners[s]);qe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Uc=yn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){R(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return yn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):nt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return nt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ue("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Hs(l),Cl(l);var p=this._section=Ue("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Ee(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Ue("a",s+"-toggle",l);w.href="#",w.title="Layers",w.setAttribute("role","button"),Ee(w,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){It(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ue("div",s+"-base",p),this._separator=Ue("div",s+"-separator",p),this._overlaysList=Ue("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,w){return this.options.sortFunction(p.layer,w.layer,p.name,w.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;on(this._baseLayersList),on(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,w=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,w+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&w>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),Ee(p,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(w);var z=s.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],w=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||w.push(d);for(E=0;E<w.length;E++)this._map.hasLayer(w[E])&&this._map.removeLayer(w[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),w=s.length-1;w>=0;w--)l=s[w],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ee(s,"click",It),this.expand();var l=this;setTimeout(function(){Je(s,"click",It),l._preventClick=!1})}}),Hc=function(s,l,d){return new Uc(s,l,d)},Qi=yn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ue("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,w){var E=Ue("a",d,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Hs(E),Ee(E,"click",vi),Ee(E,"click",w,this),Ee(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";nt(this._zoomInButton,l),nt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ae(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ae(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oe.mergeOptions({zoomControl:!0}),Oe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qi,this.addControl(this.zoomControl))});var Wc=function(s){return new Qi(s)},Rl=yn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ue("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ue("div",l,d)),s.imperial&&(this._iScale=Ue("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,w;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(w=this._getRoundNum(l),this._updateScale(this._iScale,w+" ft",w/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Nl=function(s){return new Rl(s)},Ll='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Zo=yn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Ll+" ":"")+"Leaflet</a>"},initialize:function(s){R(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ue("div","leaflet-control-attribution"),Hs(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Oe.mergeOptions({attributionControl:!0}),Oe.addInitHook(function(){this.options.attributionControl&&new Zo().addTo(this)});var Ko=function(s){return new Zo(s)};yn.Layers=Uc,yn.Zoom=Qi,yn.Scale=Rl,yn.Attribution=Zo,xi.layers=Hc,xi.zoom=Wc,xi.scale=Nl,xi.attribution=Ko;var An=ee.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});An.addTo=function(s,l){return s.addHandler(l,this),this};var $c={Events:ge},Ti=ue.touch?"touchstart mousedown":"mousedown",ri=Xe.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){R(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Ee(this._dragStartTarget,Ti,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ri._dragging===this&&this.finishDrag(!0),Je(this._dragStartTarget,Ti,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Fs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ri._dragging===this&&this.finishDrag();return}if(!(ri._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ri._dragging=this,this._preventOutline&&Sl(this._element),Ho(),ii(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Bc(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Zi(this._element),this._parentScale=Fn(d);var p=s.type==="mousedown";Ee(document,p?"mousemove":"touchmove",this._onMove,this),Ee(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,It(s),this._moved||(this.fire("dragstart"),this._moved=!0,ae(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),wt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){nt(document.body,"leaflet-dragging"),this._lastTarget&&(nt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Je(document,"mousemove touchmove",this._onMove,this),Je(document,"mouseup touchend touchcancel",this._onUp,this),Wo(),In();var l=this._moved&&this._moving;this._moving=!1,ri._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ml(s,l,d){var p,w=[1,4,2,8],E,z,W,G,Q,se,ve,De;for(E=0,se=s.length;E<se;E++)s[E]._code=$(s[E],l);for(W=0;W<4;W++){for(ve=w[W],p=[],E=0,se=s.length,z=se-1;E<se;z=E++)G=s[E],Q=s[z],G._code&ve?Q._code&ve||(De=H(Q,G,ve,l,d),De._code=$(De,l),p.push(De)):(Q._code&ve&&(De=H(Q,G,ve,l,d),De._code=$(De,l),p.push(De)),p.push(G));s=p}return s}function Ol(s,l){var d,p,w,E,z,W,G,Q,se;if(!s||s.length===0)throw new Error("latlngs not passed");Ge(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ve=fe([0,0]),De=Me(s),ln=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());ln<1700&&(ve=Qo(s));var zt=s.length,Hn=[];for(d=0;d<zt;d++){var _n=fe(s[d]);Hn.push(l.project(fe([_n.lat-ve.lat,_n.lng-ve.lng])))}for(W=G=Q=0,d=0,p=zt-1;d<zt;p=d++)w=Hn[d],E=Hn[p],z=w.y*E.x-E.y*w.x,G+=(w.x+E.x)*z,Q+=(w.y+E.y)*z,W+=z*3;W===0?se=Hn[0]:se=[G/W,Q/W];var sa=l.unproject(J(se));return fe([sa.lat+ve.lat,sa.lng+ve.lng])}function Qo(s){for(var l=0,d=0,p=0,w=0;w<s.length;w++){var E=fe(s[w]);l+=E.lat,d+=E.lng,p++}return fe([l/p,d/p])}var Yo={__proto__:null,clipPolygon:Ml,polygonCenter:Ol,centroid:Qo};function Kt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Lr(s,d),s}function Dl(s,l,d){return Math.sqrt(Pe(s,l,d,!0))}function qc(s,l,d){return Pe(s,l,d)}function Lr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,w=new p(d);w[0]=w[d-1]=1,c(s,w,l,0,d-1);var E,z=[];for(E=0;E<d;E++)w[E]&&z.push(s[E]);return z}function c(s,l,d,p,w){var E=0,z,W,G;for(W=p+1;W<=w-1;W++)G=Pe(s[W],s[p],s[w],!0),G>E&&(z=W,E=G);E>d&&(l[z]=1,c(s,l,d,p,z),c(s,l,d,z,w))}function y(s,l){for(var d=[s[0]],p=1,w=0,E=s.length;p<E;p++)te(s[p],s[w])>l&&(d.push(s[p]),w=p);return w<E-1&&d.push(s[E-1]),d}var x;function I(s,l,d,p,w){var E=p?x:$(s,d),z=$(l,d),W,G,Q;for(x=z;;){if(!(E|z))return[s,l];if(E&z)return!1;W=E||z,G=H(s,l,W,d,w),Q=$(G,d),W===E?(s=G,E=Q):(l=G,z=Q)}}function H(s,l,d,p,w){var E=l.x-s.x,z=l.y-s.y,W=p.min,G=p.max,Q,se;return d&8?(Q=s.x+E*(G.y-s.y)/z,se=G.y):d&4?(Q=s.x+E*(W.y-s.y)/z,se=W.y):d&2?(Q=G.x,se=s.y+z*(G.x-s.x)/E):d&1&&(Q=W.x,se=s.y+z*(W.x-s.x)/E),new Z(Q,se,w)}function $(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function te(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Pe(s,l,d,p){var w=l.x,E=l.y,z=d.x-w,W=d.y-E,G=z*z+W*W,Q;return G>0&&(Q=((s.x-w)*z+(s.y-E)*W)/G,Q>1?(w=d.x,E=d.y):Q>0&&(w+=z*Q,E+=W*Q)),z=s.x-w,W=s.y-E,p?z*z+W*W:new Z(w,E)}function Ge(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Qe(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ge(s)}function Tt(s,l){var d,p,w,E,z,W,G,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Ge(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=fe([0,0]),ve=Me(s),De=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());De<1700&&(se=Qo(s));var ln=s.length,zt=[];for(d=0;d<ln;d++){var Hn=fe(s[d]);zt.push(l.project(fe([Hn.lat-se.lat,Hn.lng-se.lng])))}for(d=0,p=0;d<ln-1;d++)p+=zt[d].distanceTo(zt[d+1])/2;if(p===0)Q=zt[0];else for(d=0,E=0;d<ln-1;d++)if(z=zt[d],W=zt[d+1],w=z.distanceTo(W),E+=w,E>p){G=(E-p)/w,Q=[W.x-G*(W.x-z.x),W.y-G*(W.y-z.y)];break}var _n=l.unproject(J(Q));return fe([_n.lat+se.lat,_n.lng+se.lng])}var Bn={__proto__:null,simplify:Kt,pointToSegmentDistance:Dl,closestPointOnSegment:qc,clipSegment:I,_getEdgeIntersection:H,_getBitCode:$,_sqClosestPointOnSegment:Pe,isFlat:Ge,_flat:Qe,polylineCenter:Tt},si={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new Re(s.y,s.x)},bounds:new ne([-180,-90],[180,90])},Un={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ne([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,w=this.R_MINOR/d,E=Math.sqrt(1-w*w),z=E*Math.sin(p),W=Math.tan(Math.PI/4-p/2)/Math.pow((1-z)/(1+z),E/2);return p=-d*Math.log(Math.max(W,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,w=Math.sqrt(1-p*p),E=Math.exp(-s.y/d),z=Math.PI/2-2*Math.atan(E),W=0,G=.1,Q;W<15&&Math.abs(G)>1e-7;W++)Q=w*Math.sin(z),Q=Math.pow((1-Q)/(1+Q),w/2),G=Math.PI/2-2*Math.atan(E*Q)-z,z+=G;return new Re(z*l,s.x*l/d)}},Ei={__proto__:null,LonLat:si,Mercator:Un,SphericalMercator:_e},Xo=r({},re,{code:"EPSG:3395",projection:Un,transformation:function(){var s=.5/(Math.PI*Un.R);return pe(s,.5,-s,.5)}()}),Jo=r({},re,{code:"EPSG:4326",projection:si,transformation:pe(1/180,1,-1/180,.5)}),vA=r({},dt,{projection:si,transformation:pe(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});dt.Earth=re,dt.EPSG3395=Xo,dt.EPSG3857=be,dt.EPSG900913=Ct,dt.EPSG4326=Jo,dt.Simple=vA;var oi=Xe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Oe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var w=this._zoomBoundLayers[p].options;s=w.minZoom===void 0?s:Math.min(s,w.minZoom),l=w.maxZoom===void 0?l:Math.max(l,w.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ea=oi.extend({initialize:function(s,l){R(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),wA=function(s,l){return new ea(s,l)},Yi=ea.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),ea.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),ea.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new tt;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),xA=function(s,l){return new Yi(s,l)},ta=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){R(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var w=J(p),E=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),w&&(s.style.width=w.x+"px",s.style.height=w.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ue.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function TA(s){return new ta(s)}var Vl=ta.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Vl.imagePath!="string"&&(Vl.imagePath=this._detectIconPath()),(this.options.imagePath||Vl.imagePath)+ta.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,w){var E=p.exec(d);return E&&E[w]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ue("div","leaflet-default-icon-path",document.body),l=kr(s,"background-image")||kr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),fv=An.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ri(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ae(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&nt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,E=Zi(l._icon),z=d.getPixelBounds(),W=d.getPixelOrigin(),G=Ce(z.min._subtract(W).add(w),z.max._subtract(W).subtract(w));if(!G.contains(E)){var Q=J((Math.max(G.max.x,E.x)-G.max.x)/(z.max.x-G.max.x)-(Math.min(G.min.x,E.x)-G.min.x)/(z.min.x-G.min.x),(Math.max(G.max.y,E.y)-G.max.y)/(z.max.y-G.max.y)-(Math.min(G.min.y,E.y)-G.min.y)/(z.min.y-G.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),wt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Zi(l._icon),w=l._map.layerPointToLatLng(p);d&&wt(d,p),l._latlng=w,s.latlng=w,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Gc=oi.extend({options:{icon:new Vl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){R(this,l),this._latlng=fe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),ae(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(d,"focus",this._panOnFocus,this);var w=s.icon.createShadow(this._shadow),E=!1;w!==this._shadow&&(this._removeShadow(),E=!0),w&&(ae(w,l),w.alt=""),this._shadow=w,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Je(this._icon,"focus",this._panOnFocus,this),qe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qe(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&wt(this._icon,s),this._shadow&&wt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&gn(this._icon,s),this._shadow&&gn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function EA(s,l){return new Gc(s,l)}var Mr=oi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return R(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zc=Mr.extend({options:{fill:!0,radius:10},initialize:function(s,l){R(this,l),this._latlng=fe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=fe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Mr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new ne(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function PA(s,l){return new Zc(s,l)}var cp=Zc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),R(this,l),this._latlng=fe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new tt(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Mr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===re.distance){var w=Math.PI/180,E=this._mRadius/re.R/w,z=d.project([l+E,s]),W=d.project([l-E,s]),G=z.add(W).divideBy(2),Q=d.unproject(G).lat,se=Math.acos((Math.cos(E*w)-Math.sin(l*w)*Math.sin(Q*w))/(Math.cos(l*w)*Math.cos(Q*w)))/w;(isNaN(se)||se===0)&&(se=E/Math.cos(Math.PI/180*l)),this._point=G.subtract(d.getPixelOrigin()),this._radius=isNaN(se)?0:G.x-d.project([Q,s-se]).x,this._radiusY=G.y-z.y}else{var ve=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ve).x}this._updateBounds()}});function SA(s,l,d){return new cp(s,l,d)}var Xi=Mr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){R(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Pe,w,E,z=0,W=this._parts.length;z<W;z++)for(var G=this._parts[z],Q=1,se=G.length;Q<se;Q++){w=G[Q-1],E=G[Q];var ve=p(s,w,E,!0);ve<l&&(l=ve,d=p(s,w,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Tt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=fe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new tt,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ge(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Ge(s),p=0,w=s.length;p<w;p++)d?(l[p]=fe(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new ne;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new ne([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Re,w=s.length,E,z;if(p){for(z=[],E=0;E<w;E++)z[E]=this._map.latLngToLayerPoint(s[E]),d.extend(z[E]);l.push(z)}else for(E=0;E<w;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,w,E,z,W,G;for(d=0,w=0,E=this._rings.length;d<E;d++)for(G=this._rings[d],p=0,z=G.length;p<z-1;p++)W=I(G[p],G[p+1],s,p,!0),W&&(l[w]=l[w]||[],l[w].push(W[0]),(W[1]!==G[p+1]||p===z-2)&&(l[w].push(W[1]),w++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Kt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,w,E,z,W,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for(W=this._parts[d],p=0,z=W.length,w=z-1;p<z;w=p++)if(!(!l&&p===0)&&Dl(s,W[w],W[p])<=G)return!0;return!1}});function CA(s,l){return new Xi(s,l)}Xi._flat=Qe;var na=Xi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ol(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Xi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Re&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Xi.prototype._setLatLngs.call(this,s),Ge(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ge(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new ne(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,w=this._rings.length,E;p<w;p++)E=Ml(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,w,E,z,W,G,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,G=this._parts.length;E<G;E++)for(d=this._parts[E],z=0,Q=d.length,W=Q-1;z<Q;W=z++)p=d[z],w=d[W],p.y>s.y!=w.y>s.y&&s.x<(w.x-p.x)*(s.y-p.y)/(w.y-p.y)+p.x&&(l=!l);return l||Xi.prototype._containsPoint.call(this,s,!0)}});function IA(s,l){return new na(s,l)}var Ji=Yi.extend({initialize:function(s,l){R(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,p,w;if(l){for(d=0,p=l.length;d<p;d++)w=l[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var z=Kc(s,E);return z?(z.feature=Xc(s),z.defaultOptions=z.options,this.resetStyle(z),E.onEachFeature&&E.onEachFeature(s,z),this.addLayer(z)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Kc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,w=[],E=l&&l.pointToLayer,z=l&&l.coordsToLatLng||hp,W,G,Q,se;if(!p&&!d)return null;switch(d.type){case"Point":return W=z(p),pv(E,s,W,l);case"MultiPoint":for(Q=0,se=p.length;Q<se;Q++)W=z(p[Q]),w.push(pv(E,s,W,l));return new Yi(w);case"LineString":case"MultiLineString":return G=Qc(p,d.type==="LineString"?0:1,z),new Xi(G,l);case"Polygon":case"MultiPolygon":return G=Qc(p,d.type==="Polygon"?1:2,z),new na(G,l);case"GeometryCollection":for(Q=0,se=d.geometries.length;Q<se;Q++){var ve=Kc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);ve&&w.push(ve)}return new Yi(w);case"FeatureCollection":for(Q=0,se=d.features.length;Q<se;Q++){var De=Kc(d.features[Q],l);De&&w.push(De)}return new Yi(w);default:throw new Error("Invalid GeoJSON object.")}}function pv(s,l,d,p){return s?s(l,d):new Gc(d,p&&p.markersInheritOptions&&p)}function hp(s){return new Re(s[1],s[0],s[2])}function Qc(s,l,d){for(var p=[],w=0,E=s.length,z;w<E;w++)z=l?Qc(s[w],l-1,d):(d||hp)(s[w]),p.push(z);return p}function dp(s,l){return s=fe(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function Yc(s,l,d,p){for(var w=[],E=0,z=s.length;E<z;E++)w.push(l?Yc(s[E],Ge(s[E])?0:l-1,d,p):dp(s[E],p));return!l&&d&&w.length>0&&w.push(w[0].slice()),w}function ia(s,l){return s.feature?r({},s.feature,{geometry:l}):Xc(l)}function Xc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var fp={toGeoJSON:function(s){return ia(this,{type:"Point",coordinates:dp(this.getLatLng(),s)})}};Gc.include(fp),cp.include(fp),Zc.include(fp),Xi.include({toGeoJSON:function(s){var l=!Ge(this._latlngs),d=Yc(this._latlngs,l?1:0,!1,s);return ia(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),na.include({toGeoJSON:function(s){var l=!Ge(this._latlngs),d=l&&!Ge(this._latlngs[0]),p=Yc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),ia(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),ea.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),ia(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(w){if(w.toGeoJSON){var E=w.toGeoJSON(s);if(d)p.push(E.geometry);else{var z=Xc(E);z.type==="FeatureCollection"?p.push.apply(p,z.features):p.push(z)}}}),d?ia(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function mv(s,l){return new Ji(s,l)}var AA=mv,Jc=oi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Me(l),R(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&jn(this._image),this},bringToBack:function(){return this._map&&zn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Me(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ue("img");if(ae(l,"leaflet-image-layer"),this._zoomAnimated&&ae(l,"leaflet-zoom-animated"),this.options.className&&ae(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Gi(this._image,d,l)},_reset:function(){var s=this._image,l=new ne(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();wt(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){gn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),bA=function(s,l,d){return new Jc(s,l,d)},gv=Jc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ue("video");if(ae(l,"leaflet-image-layer"),this._zoomAnimated&&ae(l,"leaflet-zoom-animated"),this.options.className&&ae(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],w=0;w<d.length;w++)p.push(d[w].src);this._url=d.length>0?p:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var z=Ue("source");z.src=this._url[E],l.appendChild(z)}}});function kA(s,l,d){return new gv(s,l,d)}var yv=Jc.extend({_initImage:function(){var s=this._image=this._url;ae(s,"leaflet-image-layer"),this._zoomAnimated&&ae(s,"leaflet-zoom-animated"),this.options.className&&ae(s,this.options.className),s.onselectstart=m,s.onmousemove=m}});function RA(s,l,d){return new yv(s,l,d)}var Pi=oi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Re||C(s))?(this._latlng=fe(s),R(this,l)):(R(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&gn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&gn(this._container,1),this.bringToFront(),this.options.interactive&&(ae(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(gn(this._container,0),this._removeTimeout=setTimeout(a(qe,void 0,this._container),200)):qe(this._container),this.options.interactive&&(nt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=fe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jn(this._container),this},bringToBack:function(){return this._map&&zn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Yi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?wt(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Oe.include({_initOverlay:function(s,l,d,p){var w=l;return w instanceof s||(w=new s(p).setContent(l)),d&&w.setLatLng(d),w}}),oi.include({_initOverlay:function(s,l,d,p){var w=d;return w instanceof s?(R(w,p),w._source=this):(w=l&&!p?l:new s(p,this),w.setContent(d)),w}});var eh=Pi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Pi.prototype.openOn.call(this,s)},onAdd:function(s){Pi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mr||this._source.on("preclick",Ke))},onRemove:function(s){Pi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mr||this._source.off("preclick",Ke))},getEvents:function(){var s=Pi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ue("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ue("div",s+"-content-wrapper",l);if(this._contentNode=Ue("div",s+"-content",d),Hs(l),Cl(this._contentNode),Ee(l,"contextmenu",Ke),this._tipContainer=Ue("div",s+"-tip-container",l),this._tip=Ue("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ue("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(p,"click",function(w){It(w),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,w=this.options.maxHeight,E="leaflet-popup-scrolled";w&&p>w?(l.height=w+"px",ae(s,E)):nt(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();wt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(kr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,w=new Z(this._containerLeft,-d-this._containerBottom);w._add(Zi(this._container));var E=s.layerPointToContainerPoint(w),z=J(this.options.autoPanPadding),W=J(this.options.autoPanPaddingTopLeft||z),G=J(this.options.autoPanPaddingBottomRight||z),Q=s.getSize(),se=0,ve=0;E.x+p+G.x>Q.x&&(se=E.x+p-Q.x+G.x),E.x-se-W.x<0&&(se=E.x-W.x),E.y+d+G.y>Q.y&&(ve=E.y+d-Q.y+G.y),E.y-ve-W.y<0&&(ve=E.y-W.y),(se||ve)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,ve]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),NA=function(s,l){return new eh(s,l)};Oe.mergeOptions({closePopupOnClick:!0}),Oe.include({openPopup:function(s,l,d){return this._initOverlay(eh,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),oi.include({bindPopup:function(s,l){return this._popup=this._initOverlay(eh,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Yi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){vi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Mr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var th=Pi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Pi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Pi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Pi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ue("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,w=this._container,E=p.latLngToContainerPoint(p.getCenter()),z=p.layerPointToContainerPoint(s),W=this.options.direction,G=w.offsetWidth,Q=w.offsetHeight,se=J(this.options.offset),ve=this._getAnchor();W==="top"?(l=G/2,d=Q):W==="bottom"?(l=G/2,d=0):W==="center"?(l=G/2,d=Q/2):W==="right"?(l=0,d=Q/2):W==="left"?(l=G,d=Q/2):z.x<E.x?(W="right",l=0,d=Q/2):(W="left",l=G+(se.x+ve.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(se).add(ve),nt(w,"leaflet-tooltip-right"),nt(w,"leaflet-tooltip-left"),nt(w,"leaflet-tooltip-top"),nt(w,"leaflet-tooltip-bottom"),ae(w,"leaflet-tooltip-"+W),wt(w,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&gn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),LA=function(s,l){return new th(s,l)};Oe.include({openTooltip:function(s,l,d){return this._initOverlay(th,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),oi.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(th,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Yi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Ee(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ee(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var _v=ta.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(on(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function MA(s){return new _v(s)}ta.Default=Vl;var jl=oi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){R(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),qe(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(zn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,w=l.length,E;p<w;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){gn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var w=this._tiles[p];if(!(!w.current||!w.loaded)){var E=Math.min(1,(s-w.loaded)/200);gn(w.el,E),E<1?l=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(qe(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],w=this._map;return p||(p=this._levels[s]={},p.el=Ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=w.project(w.unproject(w.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,w.getCenter(),w.getZoom()),m(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)qe(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var w=Math.floor(s/2),E=Math.floor(l/2),z=d-1,W=new Z(+w,+E);W.z=+z;var G=this._tileCoordsToKey(W),Q=this._tiles[G];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),z>p?this._retainParent(w,E,z,p):!1)},_retainChildren:function(s,l,d,p){for(var w=2*s;w<2*s+2;w++)for(var E=2*l;E<2*l+2;E++){var z=new Z(w,E);z.z=d+1;var W=this._tileCoordsToKey(z),G=this._tiles[W];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);d+1<p&&this._retainChildren(w,E,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var w=Math.round(l);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var E=this.options.updateWhenZooming&&w!==this._tileZoom;(!p||E)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),w=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ue.any3d?Gi(s.el,w,p):wt(s.el,w)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),w=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new ne(w.subtract(E),w.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),w=this._pxBoundsToTileRange(p),E=w.getCenter(),z=[],W=this.options.keepBuffer,G=new ne(w.getBottomLeft().subtract([W,-W]),w.getTopRight().add([W,-W]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var se=this._tiles[Q].coords;(se.z!==this._tileZoom||!G.contains(new Z(se.x,se.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var ve=w.min.y;ve<=w.max.y;ve++)for(var De=w.min.x;De<=w.max.x;De++){var ln=new Z(De,ve);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var zt=this._tiles[this._tileCoordsToKey(ln)];zt?zt.current=!0:z.push(ln)}}if(z.sort(function(_n,sa){return _n.distanceTo(E)-sa.distanceTo(E)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Hn=document.createDocumentFragment();for(De=0;De<z.length;De++)this._addTile(z[De],Hn);this._level.el.appendChild(Hn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Me(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),w=p.add(d),E=l.unproject(p,s.z),z=l.unproject(w,s.z);return[E,z]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new tt(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(qe(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ae(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=m,s.onmousemove=m,ue.ielt9&&this.options.opacity<1&&gn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),w=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(w),this.createTile.length<2&&V(a(this._tileReady,this,s,null,w)),wt(w,d),this._tiles[p]={el:w,coords:s,current:!0},l.appendChild(w),this.fire("tileloadstart",{tile:w,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(gn(d.el,0),U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(ae(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ne(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function OA(s){return new jl(s)}var ra=jl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=R(this,l),l.detectRetina&&ue.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Ee(d,"load",a(this._tileOnLoad,this,l,d)),Ee(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:ue.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ue.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=m,l.onerror=m,!l.complete)){l.src=q;var d=this._tiles[s].coords;qe(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),jl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===q))return jl.prototype._tileReady.call(this,s,l,d)}});function vv(s,l){return new ra(s,l)}var wv=ra.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=R(this,l);var w=l.detectRetina&&ue.retina?2:1,E=this.getTileSize();d.width=E.x*w,d.height=E.y*w,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ra.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Ce(d.project(l[0]),d.project(l[1])),w=p.min,E=p.max,z=(this._wmsVersion>=1.3&&this._crs===Jo?[w.y,w.x,E.y,E.x]:[w.x,w.y,E.x,E.y]).join(","),W=ra.prototype.getTileUrl.call(this,s);return W+j(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function DA(s,l){return new wv(s,l)}ra.WMS=wv,vv.wms=DA;var er=oi.extend({options:{padding:.1},initialize:function(s){R(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,l),E=p.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(s,l));ue.any3d?Gi(this._container,E,d):wt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ne(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xv=er.extend({options:{tolerance:0},getEvents:function(){var s=er.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){er.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ee(s,"mousemove",this._onMouseMove,this),Ee(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,qe(this._container),Je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=ue.retina?2:1;wt(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){er.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,w;for(w=0;w<l.length;w++){if(p=Number(l[w]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ne,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,w,E,z=s._parts,W=z.length,G=this._ctx;if(W){for(G.beginPath(),d=0;d<W;d++){for(p=0,w=z[d].length;p<w;p++)E=z[d][p],G[p?"lineTo":"moveTo"](E.x,E.y);l&&G.closePath()}this._fillStroke(G,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),w=(Math.max(Math.round(s._radiusY),1)||p)/p;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(l.x,l.y/w,p,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(nt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(ae(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Tv(s){return ue.canvas?new xv(s):null}var zl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),VA={_initContainer:function(){this._container=Ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(er.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=zl("shape");ae(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=zl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;qe(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,w=s._container;w.stroked=!!p.stroke,w.filled=!!p.fill,p.stroke?(l||(l=s._stroke=zl("stroke")),w.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=C(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(w.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=zl("fill")),w.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(w.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){jn(s._container)},_bringToBack:function(s){zn(s._container)}},nh=ue.vml?zl:vt,Fl=er.extend({_initContainer:function(){this._container=nh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qe(this._container),Je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),wt(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=nh("path");s.options.className&&ae(l,s.options.className),s.options.interactive&&ae(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){qe(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,ye(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,w="a"+d+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){jn(s._path)},_bringToBack:function(s){zn(s._path)}});ue.vml&&Fl.include(VA);function Ev(s){return ue.svg||ue.vml?new Fl(s):null}Oe.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Tv(s)||Ev(s)}});var Pv=na.extend({initialize:function(s,l){na.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Me(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function jA(s,l){return new Pv(s,l)}Fl.create=nh,Fl.pointsToPath=ye,Ji.geometryToLayer=Kc,Ji.coordsToLatLng=hp,Ji.coordsToLatLngs=Qc,Ji.latLngToCoords=dp,Ji.latLngsToCoords=Yc,Ji.getFeature=ia,Ji.asFeature=Xc,Oe.mergeOptions({boxZoom:!0});var Sv=An.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ii(),Ho(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ee(document,{contextmenu:vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ue("div","leaflet-zoom-box",this._container),ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ne(this._point,this._startPoint),d=l.getSize();wt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(qe(this._box),nt(this._container,"leaflet-crosshair")),In(),Wo(),Je(document,{contextmenu:vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new tt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oe.addInitHook("addHandler","boxZoom",Sv),Oe.mergeOptions({doubleClickZoom:!0});var Cv=An.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,w=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(w):l.setZoomAround(s.containerPoint,w)}});Oe.addInitHook("addHandler","doubleClickZoom",Cv),Oe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Iv=An.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ri(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){nt(this._map._container,"leaflet-grab"),nt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Me(this._map.options.maxBounds);this._offsetLimit=Ce(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,w=(p-l+d)%s+l-d,E=(p+l+d)%s-l-d,z=Math.abs(w+d)<Math.abs(E+d)?w:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,z=d.easeLinearity,W=w.multiplyBy(z/E),G=W.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,G),se=W.multiplyBy(Q/G),ve=Q/(d.inertiaDeceleration*z),De=se.multiplyBy(-ve/2).round();!De.x&&!De.y?l.fire("moveend"):(De=l._limitOffset(De,l.options.maxBounds),V(function(){l.panBy(De,{duration:ve,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});Oe.addInitHook("addHandler","dragging",Iv),Oe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Av=An.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ee(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,w;for(p=0,w=d.left.length;p<w;p++)l[d.left[p]]=[-1*s,0];for(p=0,w=d.right.length;p<w;p++)l[d.right[p]]=[s,0];for(p=0,w=d.down.length;p<w;p++)l[d.down[p]]=[0,s];for(p=0,w=d.up.length;p<w;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,w;for(p=0,w=d.zoomIn.length;p<w;p++)l[d.zoomIn[p]]=s;for(p=0,w=d.zoomOut.length;p<w;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(w)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;vi(s)}}});Oe.addInitHook("addHandler","keyboard",Av),Oe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bv=An.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Al(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),vi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=d?Math.ceil(w/d)*d:w,z=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,z&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+z):s.setZoomAround(this._lastMousePos,l+z))}});Oe.addInitHook("addHandler","scrollWheelZoom",bv);var zA=600;Oe.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var kv=An.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",It),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),zA),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Je(document,"touchend",It),Je(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Je(document,"touchend touchcancel contextmenu",this._cancel,this),Je(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Oe.addInitHook("addHandler","tapHold",kv),Oe.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var Rv=An.extend({addHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){nt(this._map._container,"leaflet-touch-zoom"),Je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),It(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),w=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(w,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&w<1||this._zoom>l.getMaxZoom()&&w>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var E=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(w===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var z=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(z,this,!0),It(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),Je(document,"touchmove",this._onTouchMove,this),Je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Oe.addInitHook("addHandler","touchZoom",Rv),Oe.BoxZoom=Sv,Oe.DoubleClickZoom=Cv,Oe.Drag=Iv,Oe.Keyboard=Av,Oe.ScrollWheelZoom=bv,Oe.TapHold=kv,Oe.TouchZoom=Rv,n.Bounds=ne,n.Browser=ue,n.CRS=dt,n.Canvas=xv,n.Circle=cp,n.CircleMarker=Zc,n.Class=ee,n.Control=yn,n.DivIcon=_v,n.DivOverlay=Pi,n.DomEvent=$s,n.DomUtil=up,n.Draggable=ri,n.Evented=Xe,n.FeatureGroup=Yi,n.GeoJSON=Ji,n.GridLayer=jl,n.Handler=An,n.Icon=ta,n.ImageOverlay=Jc,n.LatLng=Re,n.LatLngBounds=tt,n.Layer=oi,n.LayerGroup=ea,n.LineUtil=Bn,n.Map=Oe,n.Marker=Gc,n.Mixin=$c,n.Path=Mr,n.Point=Z,n.PolyUtil=Yo,n.Polygon=na,n.Polyline=Xi,n.Popup=eh,n.PosAnimation=kl,n.Projection=Ei,n.Rectangle=Pv,n.Renderer=er,n.SVG=Fl,n.SVGOverlay=yv,n.TileLayer=ra,n.Tooltip=th,n.Transformation=Ie,n.Util=M,n.VideoOverlay=gv,n.bind=a,n.bounds=Ce,n.canvas=Tv,n.circle=SA,n.circleMarker=PA,n.control=xi,n.divIcon=MA,n.extend=r,n.featureGroup=xA,n.geoJSON=mv,n.geoJson=AA,n.gridLayer=OA,n.icon=TA,n.imageOverlay=bA,n.latLng=fe,n.latLngBounds=Me,n.layerGroup=wA,n.map=Go,n.marker=EA,n.point=J,n.polygon=IA,n.polyline=CA,n.popup=NA,n.rectangle=jA,n.setOptions=R,n.stamp=h,n.svg=Ev,n.svgOverlay=RA,n.tileLayer=vv,n.tooltip=LA,n.transformation=pe,n.version=i,n.videoOverlay=kA;var FA=window.L;n.noConflict=function(){return window.L=FA,this},window.L=n})})(Yg,Yg.exports);var No=Yg.exports;const cv=j1(No);function Cc(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function hv(t,e){return e==null?function(i,r){const o=O.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=O.useRef();o.current||(o.current=t(i,r));const a=O.useRef(i),{instance:u}=o.current;return O.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function mA(t,e){O.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function gA(t){return function(n){const i=lv(),r=t(uv(n,i),i);return Az(i.map,n.attribution),pA(r.current,n.eventHandlers),mA(r.current,i),r}}function Lz(t,e){const n=O.useRef();O.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function Mz(t){return function(n){const i=lv(),r=t(uv(n,i),i);return pA(r.current,n.eventHandlers),mA(r.current,i),Lz(r.current,n),r}}function Oz(t,e){const n=hv(t,e),i=gA(n);return fA(i)}function dv(t,e){const n=hv(t,e),i=Mz(n);return fA(i)}function Dz(t,e){const n=hv(t,e),i=gA(n);return Nz(i)}function Vz(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function tp(){return lv().map}function jz(t){const e=tp();return O.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const yA=dv(function({center:e,children:n,...i},r){const o=new No.CircleMarker(e,i);return Cc(o,ep(r,{overlayContainer:o}))},bz);function Xg(){return Xg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xg.apply(this,arguments)}function zz({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...g},m){const[v]=O.useState({className:r,id:o,style:u}),[T,k]=O.useState(null);O.useImperativeHandle(m,()=>(T==null?void 0:T.map)??null,[T]);const R=O.useCallback(b=>{if(b!==null&&T===null){const P=new No.Map(b,g);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),k(Rz(P))}},[]);O.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const j=T?co.createElement(dA,{value:T},i):a??null;return co.createElement("div",Xg({},v,{ref:R}),j)}const Fz=O.forwardRef(zz),Bz=Oz(function({position:e,...n},i){const r=new No.Marker(e,n);return Cc(r,ep(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Uz=dv(function({positions:e,...n},i){const r=new No.Polygon(e,n);return Cc(r,ep(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),V1=dv(function({positions:e,...n},i){const r=new No.Polyline(e,n);return Cc(r,ep(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),Hz=Dz(function({url:e,...n},i){const r=new No.TileLayer(e,uv(n,i));return Cc(r,i)},function(e,n,i){Vz(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete cv.Icon.Default.prototype._getIconUrl;cv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const Wz="/street-art-ctf/chumper.png",$z=(t,e=!1)=>{let n="";return e?n="grayscale(100%) opacity(0.5)":t?t==="red"?n="hue-rotate(160deg) saturate(1.5)":t==="discovered"&&(n="hue-rotate(270deg) saturate(1.3) brightness(1.1)"):n="grayscale(100%)",cv.divIcon({html:`<img src="${Wz}" style="width: 32px; height: 32px; filter: ${n};" />`,className:"chumper-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})};function qz({devMode:t}){const[e,n]=O.useState(nA),[i,r]=O.useState(tA);return jz({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?_.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:_.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[_.jsxs("div",{children:["zoom: ",e]}),_.jsxs("div",{children:["lat: ",i[0]]}),_.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function Gz({hood:t}){const e=tp();return O.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function Zz({onShow:t}){const e=tp(),[n,i]=O.useState(null);if(O.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o){const a=JSON.parse(o);i(a),localStorage.removeItem("streetart-ctf-lastCapture"),a.location&&setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500)}},[e,t]),!n)return null;const r=n.team==="red"?"#ff6b6b":"#4dabf7";return _.jsx(yA,{center:n.location,radius:30,pathOptions:{color:r,fillColor:r,fillOpacity:.3,weight:3,className:"capture-pulse"}})}function Kz(){const t=tp(),[e,n]=O.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return _.jsx(ie.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:_.jsx(ie.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:_.jsx(rz,{size:20,className:"text-white"})})})}function Qz({point:t,onClose:e,isSoloMode:n,isDiscovered:i}){const r=n?i?"#a855f7":"#495057":t.capturedBy?ha(t.capturedBy):"#495057",o=Fa(t),a=t.status==="ghost";return _.jsx(ie.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:_.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${r}40`},children:[_.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:_.jsx(xz,{size:16,className:"text-white/50"})}),_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${r}20`,border:`1px solid ${r}40`},children:a?_.jsx(aA,{size:20,className:"text-white/30"}):t.capturedBy?_.jsx(pz,{size:20,style:{color:r}}):_.jsx(cz,{size:20,style:{color:r}})}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),a&&_.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),_.jsx("p",{className:"text-sm text-white/40",children:t.area}),_.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&_.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),_.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[_.jsxs("span",{className:"text-lg font-bold",style:{color:r},children:[o," pts"]}),n?i?_.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${r}20`,color:r},children:" Discovered"}):_.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:a?"Gone":"Not discovered"}):t.capturedBy?_.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${r}20`,color:r},children:["Team ",t.capturedBy]}):_.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:a?"Gone":"Unclaimed"})]}),!n&&t.capturedByPlayer&&_.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[_.jsx("p",{className:"text-xs text-white/40",children:"Last captured by"}),_.jsx("p",{className:"text-sm font-medium text-white mt-0.5",children:t.capturedByPlayer})]})]})]})]})})}const mm=[null,...ms],Yz=[{id:"off",label:"Off",icon:hz},{id:"circles",label:"Circles",icon:J6},{id:"squares",label:"Squares",icon:mz},{id:"hexagons",label:"Hexagons",icon:az}],Xz=(t,e)=>{if(e==="off")return[];const n=t.filter(r=>r.capturedBy&&r.status!=="ghost"),i=[];return n.forEach(r=>{const[o,a]=r.location,u=.002,h=r.capturedBy;if(e==="circles"){const g=[];for(let m=0;m<32;m++){const v=m/32*2*Math.PI;g.push([o+u*Math.cos(v),a+u*Math.sin(v)*1.5])}i.push({team:h,coords:g,pointId:r.id})}else if(e==="squares"){const f=u*.8;i.push({team:h,coords:[[o-f,a-f*1.5],[o-f,a+f*1.5],[o+f,a+f*1.5],[o+f,a-f*1.5]],pointId:r.id})}else if(e==="hexagons"){const f=u*.9,g=[];for(let m=0;m<6;m++){const v=m/6*2*Math.PI+Math.PI/6;g.push([o+f*Math.cos(v),a+f*Math.sin(v)*1.5])}i.push({team:h,coords:g,pointId:r.id})}}),i};function Jz(){const{player:t,artPoints:e,captureArt:n,gameMode:i,discoveries:r}=Ui(),[o,a]=O.useState(null),[u,h]=O.useState(!1),[f,g]=O.useState(e),[m,v]=O.useState(of.vysocany),T=i===Ze.SOLO,[k,R]=O.useState(!1),[j,b]=O.useState(!0),[P,C]=O.useState("off");O.useEffect(()=>{g(e)},[e]);const F=ee=>{u?g(We=>We.map(ge=>{if(ge.id===ee.id){const Z=(mm.indexOf(ge.capturedBy)+1)%mm.length;return{...ge,capturedBy:mm[Z]}}return ge})):a(ee)},q=()=>{g(e.map(ee=>({...ee,capturedBy:null})))},B=u?f:e,A=O.useMemo(()=>$6(B),[B]),S=O.useMemo(()=>Xz(B,P),[B,P]),N=O.useMemo(()=>rA(B),[B]),D=Object.values(N).reduce((ee,We)=>ee+We,0)||1,V=Object.keys(r).length,U=Js.length,M=V/U*100;return _.jsxs("div",{className:"relative w-full h-full",children:[T?_.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:_.jsx(ie.div,{className:"h-full bg-purple-500",initial:{width:0},animate:{width:`${M}%`},transition:{duration:.8}})}):_.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:Object.entries(N).map(([ee,We])=>{const ge=We/D*100;return _.jsx(ie.div,{className:"h-full",style:{backgroundColor:ha(ee)},initial:{width:0},animate:{width:`${ge}%`},transition:{duration:.8}},ee)})}),_.jsxs("div",{className:"absolute top-10 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[T?_.jsxs(_.Fragment,{children:[_.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Your Progress"}),_.jsxs("div",{className:"space-y-1.5",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#a855f7"}}),_.jsx("span",{className:"text-xs text-white/70 font-medium",children:"Discovered"}),_.jsx("span",{className:"text-xs text-white/40 ml-auto",children:V})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-3 h-3 rounded bg-white/20"}),_.jsx("span",{className:"text-xs text-white/50",children:"Remaining"}),_.jsx("span",{className:"text-xs text-white/30 ml-auto",children:U-V})]})]}),_.jsx("div",{className:"mt-2 pt-2 border-t border-white/10 text-center",children:_.jsxs("span",{className:"text-xs text-purple-400 font-medium",children:[t.score," pts"]})})]}):_.jsxs(_.Fragment,{children:[_.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Teams"}),_.jsx("div",{className:"space-y-1.5",children:ms.map(ee=>_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:ha(ee)}}),_.jsx("span",{className:"text-xs text-white/70 capitalize font-medium",children:ee}),_.jsxs("span",{className:"text-xs text-white/40 ml-auto",children:[N[ee]||0," pts"]})]},ee))})]}),_.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[_.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Points"}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white/40"}),_.jsx("span",{className:"text-xs text-white/40",children:"Active"})]}),_.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-dashed border-white/20"}),_.jsx("span",{className:"text-xs text-white/30",children:"Ghost"})]})]}),_.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[_.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),_.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),_.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(of).map(ee=>_.jsx(ie.button,{onClick:()=>v(ee),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${m.id===ee.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:ee.name},ee.id))}),_.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[_.jsx(ie.button,{onClick:()=>R(!k),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${k?"bg-white/20 border-white/30 text-white":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Map Settings",children:_.jsx(fz,{size:18})}),_.jsx(ie.button,{onClick:()=>h(!u),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${u?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:_.jsx(nz,{size:18})}),u&&_.jsx(ie.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:q,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:_.jsx(lA,{size:18})})]}),_.jsx(Oa,{children:k&&_.jsxs(ie.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"absolute top-24 right-4 z-[1000] w-48 bg-black/90 backdrop-blur-xl rounded-xl border border-white/10 overflow-hidden",children:[_.jsx("div",{className:"p-3 border-b border-white/10",children:_.jsx("h3",{className:"text-xs font-bold text-white/60 uppercase tracking-wider",children:"Display"})}),_.jsx("div",{className:"p-3 border-b border-white/5",children:_.jsxs("button",{onClick:()=>b(!j),className:"w-full flex items-center justify-between",children:[_.jsx("span",{className:"text-sm text-white/70",children:"Show Lines"}),_.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${j?"bg-blue-500":"bg-white/20"}`,children:_.jsx(ie.div,{className:"w-4 h-4 bg-white rounded-full mt-0.5",animate:{x:j?22:2},transition:{type:"spring",stiffness:500,damping:30}})})]})}),_.jsxs("div",{className:"p-3",children:[_.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Territory Style"}),_.jsx("div",{className:"grid grid-cols-2 gap-1",children:Yz.map(ee=>{const We=ee.icon;return _.jsxs("button",{onClick:()=>C(ee.id),className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs transition-colors ${P===ee.id?"bg-white/20 text-white":"bg-white/5 text-white/50 hover:bg-white/10"}`,children:[_.jsx(We,{size:12}),ee.label]},ee.id)})})]})]})}),_.jsx(Oa,{children:u&&_.jsx(ie.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:_.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),_.jsxs(Fz,{center:tA,zoom:nA,minZoom:H6,maxZoom:W6,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[_.jsx(Hz,{url:A1.tileUrl,attribution:A1.attribution}),_.jsx(Kz,{}),_.jsx(qz,{devMode:u}),_.jsx(Gz,{hood:m}),_.jsx(Zz,{}),_.jsx(V1,{positions:b1.map(ee=>ee.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),b1.map(ee=>_.jsx(yA,{center:ee.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},ee.name)),S.map((ee,We)=>_.jsx(Uz,{positions:ee.coords,pathOptions:{color:ha(ee.team),fillColor:ha(ee.team),fillOpacity:.15,weight:1,opacity:.4}},`territory-${ee.pointId}`)),j&&Object.entries(A).map(([ee,We])=>We.map((ge,Xe)=>_.jsx(V1,{positions:[ge.from,ge.to],pathOptions:{color:ha(ee),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${ee}-line-${Xe}`))),B.map(ee=>{const We=ee.status==="ghost",ge=T&&r[ee.id],Xe=T?ge?"discovered":null:ee.capturedBy,Z=$z(Xe,We);return _.jsx(Bz,{position:ee.location,icon:Z,eventHandlers:{click:ce=>{ce.originalEvent.stopPropagation(),F(ee)}}},ee.id)})]}),_.jsx(Oa,{children:o&&_.jsx(Qz,{point:o,onClose:()=>a(null),isSoloMode:T,isDiscovered:r[o.id]})})]})}function eF(){return _.jsx(ie.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:_.jsx(Jz,{})})}function tF(){const{player:t}=Ui(),[e,n]=O.useState(!1);return O.useEffect(()=>{if(t.team&&!e){n(!0);const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"}},[t.team,e]),t.team?_.jsx(ie.div,{className:"flex-1 flex items-center justify-center p-8 bg-black",initial:{opacity:0},animate:{opacity:1},children:_.jsxs("div",{className:"text-center",children:[_.jsx(ie.div,{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:_.jsx(ov,{size:48,className:"text-white"})}),_.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Opening AR Scanner"}),_.jsx("p",{className:"text-white/40 text-sm mb-4",children:"Point your camera at street art to capture it"}),_.jsx(uz,{className:"w-6 h-6 animate-spin mx-auto text-purple-400"})]})}):_.jsx(ie.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:_.jsx(Q6,{size:36,className:"text-amber-500"})}),_.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),_.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start scanning street art"})]})})}const nF={red:"Red Team",blue:"Blue Team"};function iF({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return _.jsxs(ie.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[_.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${ot[t].hex}15 0%, transparent 60%)`}}),_.jsx(ie.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:ot[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),_.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${ot[t].hex}30`},children:_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?_.jsx(sz,{size:20,className:"text-white"}):_.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{className:"font-semibold text-white",children:nF[t]}),_.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[_.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ot[t].hex}}),_.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),_.jsxs("div",{className:"text-right",children:[_.jsx("p",{className:"text-2xl font-bold",style:{color:ot[t].hex},children:e.toLocaleString()}),_.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function rF({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return _.jsxs(ie.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[_.jsx("div",{className:"w-8 flex justify-center",children:i?_.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:_.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):_.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),_.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${ot[t.team].hex}20`,color:ot[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&_.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),_.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),_.jsx("div",{className:"text-right",children:_.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function sF(){var g;const{teamScores:t,player:e,allPlayers:n}=Ui(),r=Object.entries(t).filter(([m])=>ot[m]).sort((m,v)=>v[1]-m[1]),o=Object.values(t).reduce((m,v)=>m+v,0)||1,a=[...n];!a.find(m=>m.name===e.name)&&e.team&&e.name&&a.push({id:"current",name:e.name,team:e.team,score:e.score||0,captures:((g=e.capturedArt)==null?void 0:g.length)||0});const h=a.sort((m,v)=>v.score-m.score),f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return _.jsxs(ie.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:f,children:[_.jsx(ie.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:_.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[_.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:_.jsx(rc,{size:20,className:"text-white"})}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),_.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),_.jsxs("div",{className:"mb-8",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_.jsx(yz,{size:16,className:"text-white/40"}),_.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),_.jsx("div",{className:"space-y-3",children:r.map(([m,v],T)=>_.jsx(iF,{team:m,score:v,rank:T,totalScore:o},m))})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_.jsx(rv,{size:16,className:"text-white/40"}),_.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),_.jsx("div",{className:"space-y-2",children:h.map((m,v)=>_.jsx(rF,{player:m,rank:v,isCurrentPlayer:m.id==="current"},m.id))})]})]})}function oF(){var f,g;const{player:t,artPoints:e,resetAll:n}=Ui(),[i,r]=O.useState(!1),o=(e==null?void 0:e.filter(m=>t.capturedArt.includes(m.id)))||[],a=t.team?ot[t.team].hex:"#64748b",u=t.team==="red"?"Red Team":"Blue Team",h=async()=>{if(!i){r(!0);try{const m=["red","blue"];let v=0,T=0;for(const k of Js){const R=m[Math.floor(Math.random()*m.length)],j=Fa(k);R==="red"?v+=j:T+=j,await ir(bi(hn,"streetart-captures",k.id),{artId:k.id,capturedBy:R,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:j,isFirstCapture:!0,isRecapture:!1})}await ir(bi(hn,"streetart-teams","red"),{score:v},{merge:!0}),await ir(bi(hn,"streetart-teams","blue"),{score:T},{merge:!0})}catch(m){console.error("Failed to randomize:",m)}r(!1)}};return _.jsxs(ie.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx(ie.div,{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${a}, ${a}50)`},whileHover:{scale:1.05},children:_.jsx("span",{className:"text-3xl font-black text-white",children:((g=(f=t.name)==null?void 0:f.charAt(0))==null?void 0:g.toUpperCase())||"?"})}),_.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:t.name}),_.jsx("p",{className:"text-sm",style:{color:a},children:u})]}),_.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[_.jsxs(ie.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#eab30815",border:"1px solid #eab30830"},whileHover:{scale:1.02},children:[_.jsx(rc,{size:24,className:"mx-auto mb-2 text-yellow-500"}),_.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),_.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Score"})]}),_.jsxs(ie.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#22c55e15",border:"1px solid #22c55e30"},whileHover:{scale:1.02},children:[_.jsx(ov,{size:24,className:"mx-auto mb-2 text-green-500"}),_.jsx("p",{className:"text-2xl font-bold text-white",children:t.captureCount||o.length}),_.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Captures"})]}),_.jsxs(ie.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#f9731615",border:"1px solid #f9731630"},whileHover:{scale:1.02},children:[_.jsx(rv,{size:24,className:"mx-auto mb-2 text-orange-500"}),_.jsx("p",{className:"text-2xl font-bold text-white",children:t.maxStreak||0}),_.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Best Streak"})]})]}),_.jsxs("div",{className:"mb-8",children:[_.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Lifetime Stats"}),_.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[_.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center",children:_.jsx("span",{className:"text-sm",children:""})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-lg font-bold text-white",children:t.recaptureCount||0}),_.jsx("p",{className:"text-[10px] text-white/40",children:"Recaptures"})]})]}),_.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:_.jsx("span",{className:"text-sm",children:""})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-lg font-bold text-white",children:t.firstCaptureCount||0}),_.jsx("p",{className:"text-[10px] text-white/40",children:"First Captures"})]})]}),_.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:_.jsx("span",{className:"text-sm",children:""})}),_.jsxs("div",{children:[_.jsxs("p",{className:"text-lg font-bold text-white",children:[t.totalDistance?(t.totalDistance/1e3).toFixed(1):"0","km"]}),_.jsx("p",{className:"text-[10px] text-white/40",children:"Distance Walked"})]})]}),_.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:_.jsx("span",{className:"text-sm",children:""})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-lg font-bold text-white",children:t.streak||0}),_.jsx("p",{className:"text-[10px] text-white/40",children:"Current Streak"})]})]})]})]}),o.length>0&&_.jsxs("div",{className:"mb-8",children:[_.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Your Captures"}),_.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.slice(0,8).map((m,v)=>_.jsx(ie.div,{className:"aspect-square rounded-xl flex items-center justify-center",style:{backgroundColor:`${a}20`,border:`1px solid ${a}30`},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:v*.05},children:_.jsx("span",{className:"text-lg",children:""})},m.id)),o.length>8&&_.jsx("div",{className:"aspect-square rounded-xl flex items-center justify-center bg-white/5",children:_.jsxs("span",{className:"text-xs text-white/40",children:["+",o.length-8]})})]})]}),_.jsxs("div",{className:"mb-6",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[_.jsx(av,{size:14,className:"text-purple-400"}),_.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Game Master"})]}),_.jsxs(ie.button,{onClick:h,disabled:i,className:"w-full p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 flex items-center gap-3 disabled:opacity-50",whileTap:{scale:.98},children:[_.jsx(uA,{size:20,className:"text-purple-400"}),_.jsx("span",{className:"text-sm text-purple-300",children:i?"Randomizing...":"Randomize All Territories"})]})]}),_.jsxs(ie.button,{onClick:n,className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center gap-2 text-white/40 hover:text-white/60 transition-colors",whileTap:{scale:.98},children:[_.jsx(lA,{size:14}),_.jsx("span",{className:"text-xs",children:"Reset Game Data"})]}),_.jsx("p",{className:"text-center text-[10px] text-white/20 mt-6",children:"Street Art CTF v1.2.0"})]})}const aF="123";function lF(){const t=Cf(),{artPoints:e,allPlayers:n,teamScores:i}=Ui(),[r,o]=O.useState(!1),[a,u]=O.useState(""),[h,f]=O.useState("all"),[g,m]=O.useState({}),[v,T]=O.useState(null);O.useEffect(()=>{sessionStorage.getItem("admin-auth")==="true"&&o(!0)},[]);const k=B=>{B.preventDefault(),a===aF?(o(!0),sessionStorage.setItem("admin-auth","true")):(T({type:"error",text:"Wrong password"}),setTimeout(()=>T(null),2e3))},R=(B,A)=>{T({type:B,text:A}),setTimeout(()=>T(null),3e3)},j=async(B,A)=>{m(S=>({...S,[B]:!0}));try{const S=A==="ghost"?"active":"ghost";await ir(bi(hn,"streetart-captures",B),{status:S,statusUpdatedAt:new Date},{merge:!0}),R("success",`Point ${B} set to ${S}`)}catch(S){R("error","Failed to update: "+S.message),console.error(S)}m(S=>({...S,[B]:!1}))},b=async B=>{m(A=>({...A,[`reset-${B}`]:!0}));try{await hm(bi(hn,"streetart-captures",B)),R("success",`Ownership reset for ${B}`)}catch(A){R("error","Failed to reset ownership"),console.error(A)}m(A=>({...A,[`reset-${B}`]:!1}))},P=async()=>{if(confirm("Are you sure? This will reset ALL captures!")){m(B=>({...B,resetAll:!0}));try{const A=(await u1(Cu(hn,"streetart-captures"))).docs.map(S=>hm(S.ref));await Promise.all(A),R("success","All captures reset!")}catch(B){R("error","Failed to reset all captures"),console.error(B)}m(B=>({...B,resetAll:!1}))}},C=async()=>{if(confirm("Are you sure? This will delete ALL player data!")){m(B=>({...B,resetPlayers:!0}));try{const A=(await u1(Cu(hn,"streetart-players"))).docs.map(S=>hm(S.ref));await Promise.all(A),R("success","All players reset!")}catch(B){R("error","Failed to reset players"),console.error(B)}m(B=>({...B,resetPlayers:!1}))}},F=h==="all"?e:e.filter(B=>B.hood===h),q={total:e.length,captured:e.filter(B=>B.capturedBy).length,red:e.filter(B=>B.capturedBy==="red").length,blue:e.filter(B=>B.capturedBy==="blue").length,ghost:e.filter(B=>B.status==="ghost").length,players:n.length};return r?_.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] pb-24 overflow-y-auto",children:[_.jsx("div",{className:"sticky top-0 z-50 bg-[#0a0a0f]/90 backdrop-blur-xl border-b border-white/10 px-4 py-3",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2",children:_.jsx(Y6,{size:24,className:"text-white/70"})}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(N1,{size:18,className:"text-purple-400"}),_.jsx("span",{className:"font-bold",children:"God Mode"})]}),_.jsx("div",{className:"w-10"})]})}),v&&_.jsx(ie.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:`fixed top-16 left-4 right-4 z-50 p-3 rounded-xl text-center text-sm font-medium ${v.type==="error"?"bg-red-500/90":"bg-green-500/90"}`,children:v.text}),_.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[_.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[_.jsx("div",{className:"text-2xl font-bold",children:q.total}),_.jsx("div",{className:"text-xs text-white/40",children:"Points"})]}),_.jsxs("div",{className:"p-3 rounded-xl bg-red-500/20 text-center",children:[_.jsx("div",{className:"text-2xl font-bold text-red-400",children:q.red}),_.jsx("div",{className:"text-xs text-red-400/60",children:"Red"})]}),_.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/20 text-center",children:[_.jsx("div",{className:"text-2xl font-bold text-blue-400",children:q.blue}),_.jsx("div",{className:"text-xs text-blue-400/60",children:"Blue"})]}),_.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[_.jsx("div",{className:"text-2xl font-bold text-white/60",children:q.ghost}),_.jsx("div",{className:"text-xs text-white/40",children:"Ghost"})]}),_.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[_.jsx("div",{className:"text-2xl font-bold",children:q.players}),_.jsx("div",{className:"text-xs text-white/40",children:"Players"})]}),_.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[_.jsx("div",{className:"text-2xl font-bold",children:q.captured}),_.jsx("div",{className:"text-xs text-white/40",children:"Captured"})]})]}),_.jsxs("div",{className:"px-4 mb-6",children:[_.jsxs("h2",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[_.jsx(av,{size:14}),"Danger Zone"]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsxs("button",{onClick:P,disabled:g.resetAll,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[g.resetAll?_.jsx(Nh,{size:16,className:"animate-spin"}):_.jsx(gz,{size:16}),"Reset Captures"]}),_.jsxs("button",{onClick:C,disabled:g.resetPlayers,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[g.resetPlayers?_.jsx(Nh,{size:16,className:"animate-spin"}):_.jsx(sc,{size:16}),"Reset Players"]})]})]}),_.jsx("div",{className:"px-4 mb-4",children:_.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[_.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h==="all"?"bg-white text-black":"bg-white/10 text-white/60"}`,children:"All"}),Object.values(of).map(B=>_.jsx("button",{onClick:()=>f(B.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h===B.id?"bg-white text-black":"bg-white/10 text-white/60"}`,children:B.name},B.id))]})}),_.jsxs("div",{className:"px-4 space-y-2",children:[_.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2",children:["Art Points (",F.length,")"]}),F.map(B=>{var S;const A=B.status==="ghost";return _.jsxs("div",{className:`p-4 rounded-xl border ${A?"bg-white/5 border-white/10 opacity-60":"bg-white/5 border-white/10"}`,children:[_.jsxs("div",{className:"flex items-start justify-between mb-2",children:[_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"font-medium",children:B.name}),A&&_.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-white/10 text-white/40",children:"GHOST"})]}),_.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[B.id,"  ",B.area,"  ",B.size,"  ",(S=iA[B.size])==null?void 0:S.points,"pts"]})]}),B.capturedBy&&_.jsx("div",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:B.capturedBy==="red"?"#ff6b6b20":"#4dabf720",color:B.capturedBy==="red"?"#ff6b6b":"#4dabf7"},children:B.capturedBy.toUpperCase()})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>j(B.id,B.status),disabled:g[B.id],className:`flex-1 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-1.5 ${A?"bg-green-500/20 text-green-400":"bg-white/10 text-white/60"}`,children:g[B.id]?_.jsx(Nh,{size:14,className:"animate-spin"}):A?_.jsxs(_.Fragment,{children:[_.jsx(oz,{size:14})," Make Active"]}):_.jsxs(_.Fragment,{children:[_.jsx(aA,{size:14})," Make Ghost"]})}),B.capturedBy&&_.jsx("button",{onClick:()=>b(B.id),disabled:g[`reset-${B.id}`],className:"py-2 px-3 rounded-lg bg-white/10 text-white/60 text-xs font-medium flex items-center gap-1.5",children:g[`reset-${B.id}`]?_.jsx(Nh,{size:14,className:"animate-spin"}):_.jsxs(_.Fragment,{children:[_.jsx(wz,{size:14})," Reset"]})})]})]},B.id)})]}),_.jsxs("div",{className:"px-4 mt-8",children:[_.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2 flex items-center gap-2",children:[_.jsx(sc,{size:14}),"Players (",n.length,")"]}),_.jsx("div",{className:"space-y-2",children:n.map(B=>_.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("div",{className:"font-medium",children:B.name}),_.jsxs("div",{className:"text-xs text-white/40",children:[B.captures||0," captures"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-sm font-bold",children:B.score||0}),_.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:B.team==="red"?"#ff6b6b":"#4dabf7"}})]})]},B.id))})]})]}):_.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-6",children:_.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-purple-500/20 flex items-center justify-center",children:_.jsx(N1,{size:32,className:"text-purple-400"})}),_.jsx("h1",{className:"text-2xl font-bold",children:"Admin Access"}),_.jsx("p",{className:"text-white/40 text-sm mt-1",children:"God Mode Panel"})]}),_.jsxs("form",{onSubmit:k,className:"space-y-4",children:[_.jsx("input",{type:"password",value:a,onChange:B=>u(B.target.value),placeholder:"Enter password...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-center focus:outline-none focus:border-purple-500/50"}),_.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-purple-500 text-white font-bold",children:"Enter"})]}),v&&_.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 p-3 rounded-lg text-center text-sm ${v.type==="error"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:v.text}),_.jsx("button",{onClick:()=>t(-1),className:"mt-6 w-full py-2 text-white/40 text-sm",children:" Back"})]})})}const uF=[{path:"/",icon:lz,label:"Home"},{path:"/map",icon:rd,label:"Map"},{path:"/scanner",icon:dz,label:"Scan"},{path:"/leaderboard",icon:rc,label:"Ranks"},{path:"/profile",icon:_z,label:"You"}];function cF(){return _.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[_.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),_.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:uF.map(({path:t,icon:e,label:n})=>_.jsx(SR,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>_.jsxs(ie.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&_.jsx(ie.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),_.jsx(ie.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:_.jsx(e,{size:20,strokeWidth:i?2.5:2})}),_.jsx(ie.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function hF({color:t}){const e=Array.from({length:12},(n,i)=>({id:i,angle:i/12*360,delay:i*.02}));return _.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.map(n=>_.jsx(ie.div,{className:"absolute left-1/2 top-1/2 w-3 h-3 rounded-full",style:{backgroundColor:t},initial:{x:0,y:0,opacity:1,scale:1},animate:{x:Math.cos(n.angle*Math.PI/180)*150,y:Math.sin(n.angle*Math.PI/180)*150,opacity:0,scale:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"}},n.id))})}function dF(){var o;const{captureNotification:t}=Ui();if(!t)return null;const e=((o=ot[t.team])==null?void 0:o.hex)||"#888",n=t.team==="red"?"RED":"BLUE",i=t.points||100,r=t.streak||0;return _.jsxs(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden",children:[_.jsx(ie.div,{className:"absolute inset-0",style:{backgroundColor:e},initial:{opacity:.3},animate:{opacity:[.3,.15,.2]},transition:{duration:.5}}),_.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Array.from({length:8}).map((a,u)=>_.jsx(ie.div,{className:"absolute w-1 origin-bottom",style:{backgroundColor:e,height:"50vh",transform:`rotate(${u*45}deg)`,opacity:.2},initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.3,delay:u*.02}},u))}),_.jsxs(ie.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},exit:{scale:.5,opacity:0},transition:{type:"spring",damping:12,stiffness:200},className:"relative text-center p-8",children:[_.jsx(hF,{color:e}),_.jsxs(ie.div,{className:"relative w-28 h-28 mx-auto mb-4",animate:{scale:[1,1.1,1]},transition:{duration:.5,repeat:2},children:[_.jsx("div",{className:"absolute inset-0 rounded-full blur-xl",style:{backgroundColor:e,opacity:.5}}),_.jsx("div",{className:"relative w-full h-full rounded-full flex items-center justify-center",style:{backgroundColor:e},children:t.isRecapture?_.jsx(sv,{size:56,className:"text-white"}):_.jsx(oA,{size:56,className:"text-white"})})]}),_.jsxs(ie.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[_.jsx("h1",{className:"text-4xl font-black text-white tracking-tight mb-1",children:t.isRecapture?"STOLEN!":"CAPTURED!"}),_.jsx("p",{className:"text-lg font-semibold text-white/80",children:t.artName})]}),_.jsxs(ie.div,{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"rgba(0,0,0,0.4)"},initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:[_.jsx(ov,{size:20,className:"text-white"}),_.jsxs("span",{className:"text-2xl font-black text-white",children:["+",i]}),r>1&&_.jsxs("span",{className:"flex items-center gap-1 text-orange-400 font-bold",children:[_.jsx(rv,{size:18}),r,"x"]})]}),_.jsxs(ie.div,{className:"mt-4 flex items-center justify-center gap-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[_.jsx("span",{className:"text-white/60 text-sm",children:"by"}),_.jsx("span",{className:"font-bold text-white",children:t.playerName}),_.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-black",style:{backgroundColor:e},children:n})]})]})]})}function _A(t,e){const n=t.name&&t.name!=="Street Artist",i=e===Ze.SOLO||e===Ze.TEAM,r=e===Ze.SOLO||t.team;return n&&i&&r}function Lh({children:t}){const{player:e,gameMode:n}=Ui();return _A(e,n)?t:_.jsx(oP,{to:"/onboarding",replace:!0})}function fF(){const t=So(),{player:e,gameMode:n}=Ui(),i=_A(e,n),r=t.pathname==="/onboarding"||t.pathname==="/admin";return _.jsxs("div",{className:"h-full w-full flex flex-col",children:[_.jsx(Oa,{children:_.jsx(dF,{})}),_.jsx(Oa,{mode:"wait",children:_.jsxs(fR,{location:t,children:[_.jsx(Vr,{path:"/onboarding",element:_.jsx(Pz,{})}),_.jsx(Vr,{path:"/",element:i?_.jsx(Iz,{}):_.jsx(oP,{to:"/onboarding",replace:!0})}),_.jsx(Vr,{path:"/map",element:_.jsx(Lh,{children:_.jsx(eF,{})})}),_.jsx(Vr,{path:"/scanner",element:_.jsx(Lh,{children:_.jsx(tF,{})})}),_.jsx(Vr,{path:"/leaderboard",element:_.jsx(Lh,{children:_.jsx(sF,{})})}),_.jsx(Vr,{path:"/profile",element:_.jsx(Lh,{children:_.jsx(oF,{})})}),_.jsx(Vr,{path:"/admin",element:_.jsx(lF,{})})]},t.pathname)}),!r&&i&&_.jsx(cF,{})]})}function pF(){return _.jsx(G6,{children:_.jsx(fF,{})})}gm.createRoot(document.getElementById("root")).render(_.jsx(co.StrictMode,{children:_.jsx(xR,{children:_.jsx(pF,{})})}));
