function qA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var GA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function M1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O1={exports:{}},ef={},D1={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yu=Symbol.for("react.element"),ZA=Symbol.for("react.portal"),KA=Symbol.for("react.fragment"),QA=Symbol.for("react.strict_mode"),XA=Symbol.for("react.profiler"),YA=Symbol.for("react.provider"),JA=Symbol.for("react.context"),eb=Symbol.for("react.forward_ref"),tb=Symbol.for("react.suspense"),nb=Symbol.for("react.memo"),ib=Symbol.for("react.lazy"),Nv=Symbol.iterator;function rb(t){return t===null||typeof t!="object"?null:(t=Nv&&t[Nv]||t["@@iterator"],typeof t=="function"?t:null)}var V1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j1=Object.assign,F1={};function Xa(t,e,n){this.props=t,this.context=e,this.refs=F1,this.updater=n||V1}Xa.prototype.isReactComponent={};Xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function z1(){}z1.prototype=Xa.prototype;function Qg(t,e,n){this.props=t,this.context=e,this.refs=F1,this.updater=n||V1}var Xg=Qg.prototype=new z1;Xg.constructor=Qg;j1(Xg,Xa.prototype);Xg.isPureReactComponent=!0;var Lv=Array.isArray,B1=Object.prototype.hasOwnProperty,Yg={current:null},U1={key:!0,ref:!0,__self:!0,__source:!0};function H1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)B1.call(e,i)&&!U1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Yu,type:t,key:o,ref:a,props:r,_owner:Yg.current}}function sb(t,e){return{$$typeof:Yu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yu}function ob(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Mv=/\/+/g;function up(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ob(""+t.key):e.toString(36)}function Ih(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Yu:case ZA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+up(a,0):i,Lv(r)?(n="",t!=null&&(n=t.replace(Mv,"$&/")+"/"),Ih(r,e,n,"",function(f){return f})):r!=null&&(Jg(r)&&(r=sb(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Mv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Lv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+up(o,u);a+=Ih(o,e,n,h,r)}else if(h=rb(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+up(o,u++),a+=Ih(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Xc(t,e,n){if(t==null)return t;var i=[],r=0;return Ih(t,i,"","",function(o){return e.call(n,o,r++)}),i}function ab(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},Ah={transition:null},lb={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:Ah,ReactCurrentOwner:Yg};function W1(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Xc,forEach:function(t,e,n){Xc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xc(t,function(){e++}),e},toArray:function(t){return Xc(t,function(e){return e})||[]},only:function(t){if(!Jg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Xa;ke.Fragment=KA;ke.Profiler=XA;ke.PureComponent=Qg;ke.StrictMode=QA;ke.Suspense=tb;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lb;ke.act=W1;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=j1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Yg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)B1.call(e,h)&&!U1.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Yu,type:t.type,key:r,ref:o,props:i,_owner:a}};ke.createContext=function(t){return t={$$typeof:JA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YA,_context:t},t.Consumer=t};ke.createElement=H1;ke.createFactory=function(t){var e=H1.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:eb,render:t}};ke.isValidElement=Jg;ke.lazy=function(t){return{$$typeof:ib,_payload:{_status:-1,_result:t},_init:ab}};ke.memo=function(t,e){return{$$typeof:nb,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Ah.transition;Ah.transition={};try{t()}finally{Ah.transition=e}};ke.unstable_act=W1;ke.useCallback=function(t,e){return on.current.useCallback(t,e)};ke.useContext=function(t){return on.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return on.current.useDeferredValue(t)};ke.useEffect=function(t,e){return on.current.useEffect(t,e)};ke.useId=function(){return on.current.useId()};ke.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return on.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};ke.useRef=function(t){return on.current.useRef(t)};ke.useState=function(t){return on.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return on.current.useTransition()};ke.version="18.3.1";D1.exports=ke;var V=D1.exports;const so=M1(V),ub=qA({__proto__:null,default:so},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb=V,hb=Symbol.for("react.element"),db=Symbol.for("react.fragment"),fb=Object.prototype.hasOwnProperty,pb=cb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mb={key:!0,ref:!0,__self:!0,__source:!0};function $1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)fb.call(e,i)&&!mb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:hb,type:t,key:o,ref:a,props:r,_owner:pb.current}}ef.Fragment=db;ef.jsx=$1;ef.jsxs=$1;O1.exports=ef;var w=O1.exports,dm={},q1={exports:{}},bn={},G1={exports:{}},Z1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,pe){var ee=Z.length;Z.push(pe);e:for(;0<ee;){var ie=ee-1>>>1,te=Z[ie];if(0<r(te,pe))Z[ie]=pe,Z[ee]=te,ee=ie;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var pe=Z[0],ee=Z.pop();if(ee!==pe){Z[0]=ee;e:for(var ie=0,te=Z.length,re=te>>>1;ie<re;){var ue=2*(ie+1)-1,ae=Z[ue],J=ue+1,me=Z[J];if(0>r(ae,ee))J<te&&0>r(me,ae)?(Z[ie]=me,Z[J]=ee,ie=J):(Z[ie]=ae,Z[ue]=ee,ie=ue);else if(J<te&&0>r(me,ee))Z[ie]=me,Z[J]=ee,ie=J;else break e}}return pe}function r(Z,pe){var ee=Z.sortIndex-pe.sortIndex;return ee!==0?ee:Z.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,_=3,T=!1,R=!1,k=!1,D=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Z){for(var pe=n(f);pe!==null;){if(pe.callback===null)i(f);else if(pe.startTime<=Z)i(f),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=n(f)}}function z(Z){if(k=!1,C(Z),!R)if(n(h)!==null)R=!0,Ie(G);else{var pe=n(f);pe!==null&&ct(z,pe.startTime-Z)}}function G(Z,pe){R=!1,k&&(k=!1,I(S),S=-1),T=!0;var ee=_;try{for(C(pe),g=n(h);g!==null&&(!(g.expirationTime>pe)||Z&&!j());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,_=g.priorityLevel;var te=ie(g.expirationTime<=pe);pe=t.unstable_now(),typeof te=="function"?g.callback=te:g===n(h)&&i(h),C(pe)}else i(h);g=n(h)}if(g!==null)var re=!0;else{var ue=n(f);ue!==null&&ct(z,ue.startTime-pe),re=!1}return re}finally{g=null,_=ee,T=!1}}var U=!1,b=null,S=-1,N=5,O=-1;function j(){return!(t.unstable_now()-O<N)}function B(){if(b!==null){var Z=t.unstable_now();O=Z;var pe=!0;try{pe=b(!0,Z)}finally{pe?M():(U=!1,b=null)}}else U=!1}var M;if(typeof P=="function")M=function(){P(B)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ft=xe.port2;xe.port1.onmessage=B,M=function(){ft.postMessage(null)}}else M=function(){D(B,0)};function Ie(Z){b=Z,U||(U=!0,M())}function ct(Z,pe){S=D(function(){Z(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){R||T||(R=!0,Ie(G))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var pe=3;break;default:pe=_}var ee=_;_=pe;try{return Z()}finally{_=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,pe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ee=_;_=Z;try{return pe()}finally{_=ee}},t.unstable_scheduleCallback=function(Z,pe,ee){var ie=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ie+ee:ie):ee=ie,Z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ee+te,Z={id:m++,callback:pe,priorityLevel:Z,startTime:ee,expirationTime:te,sortIndex:-1},ee>ie?(Z.sortIndex=ee,e(f,Z),n(h)===null&&Z===n(f)&&(k?(I(S),S=-1):k=!0,ct(z,ee-ie))):(Z.sortIndex=te,e(h,Z),R||T||(R=!0,Ie(G))),Z},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(Z){var pe=_;return function(){var ee=_;_=pe;try{return Z.apply(this,arguments)}finally{_=ee}}}})(Z1);G1.exports=Z1;var gb=G1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb=V,Cn=gb;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K1=new Set,wu={};function yo(t,e){La(t,e),La(t+"Capture",e)}function La(t,e){for(wu[t]=e,t=0;t<e.length;t++)K1.add(e[t])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=Object.prototype.hasOwnProperty,_b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ov={},Dv={};function vb(t){return fm.call(Dv,t)?!0:fm.call(Ov,t)?!1:_b.test(t)?Dv[t]=!0:(Ov[t]=!0,!1)}function wb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xb(t,e,n,i){if(e===null||typeof e>"u"||wb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var ey=/[\-:]([a-z])/g;function ty(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ey,ty);Bt[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ey,ty);Bt[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ey,ty);Bt[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function ny(t,e,n,i){var r=Bt.hasOwnProperty(e)?Bt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xb(e,n,r,i)&&(n=null),i||r===null?vb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var pr=yb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yc=Symbol.for("react.element"),oa=Symbol.for("react.portal"),aa=Symbol.for("react.fragment"),iy=Symbol.for("react.strict_mode"),pm=Symbol.for("react.profiler"),Q1=Symbol.for("react.provider"),X1=Symbol.for("react.context"),ry=Symbol.for("react.forward_ref"),mm=Symbol.for("react.suspense"),gm=Symbol.for("react.suspense_list"),sy=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),Y1=Symbol.for("react.offscreen"),Vv=Symbol.iterator;function Ol(t){return t===null||typeof t!="object"?null:(t=Vv&&t[Vv]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,cp;function $l(t){if(cp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cp=e&&e[1]||""}return`
`+cp+t}var hp=!1;function dp(t,e){if(!t||hp)return"";hp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{hp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$l(t):""}function Tb(t){switch(t.tag){case 5:return $l(t.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return t=dp(t.type,!1),t;case 11:return t=dp(t.type.render,!1),t;case 1:return t=dp(t.type,!0),t;default:return""}}function ym(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case aa:return"Fragment";case oa:return"Portal";case pm:return"Profiler";case iy:return"StrictMode";case mm:return"Suspense";case gm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X1:return(t.displayName||"Context")+".Consumer";case Q1:return(t._context.displayName||"Context")+".Provider";case ry:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sy:return e=t.displayName||null,e!==null?e:ym(t.type)||"Memo";case Nr:e=t._payload,t=t._init;try{return ym(t(e))}catch{}}return null}function Eb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ym(e);case 8:return e===iy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function J1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pb(t){var e=J1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jc(t){t._valueTracker||(t._valueTracker=Pb(t))}function eT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=J1(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Yh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _m(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=hs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tT(t,e){e=e.checked,e!=null&&ny(t,"checked",e,!1)}function vm(t,e){tT(t,e);var n=hs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wm(t,e.type,n):e.hasOwnProperty("defaultValue")&&wm(t,e.type,hs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wm(t,e,n){(e!=="number"||Yh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ql=Array.isArray;function Ea(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+hs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(ql(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hs(n)}}function nT(t,e){var n=hs(e.value),i=hs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Bv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eh,rT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eh=eh||document.createElement("div"),eh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sb=["Webkit","ms","Moz","O"];Object.keys(eu).forEach(function(t){Sb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eu[e]=eu[t]})});function sT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eu.hasOwnProperty(t)&&eu[t]?(""+e).trim():e+"px"}function oT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=sT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Cb=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Em(t,e){if(e){if(Cb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sm=null;function oy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cm=null,Pa=null,Sa=null;function Uv(t){if(t=tc(t)){if(typeof Cm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=of(e),Cm(t.stateNode,t.type,e))}}function aT(t){Pa?Sa?Sa.push(t):Sa=[t]:Pa=t}function lT(){if(Pa){var t=Pa,e=Sa;if(Sa=Pa=null,Uv(t),e)for(t=0;t<e.length;t++)Uv(e[t])}}function uT(t,e){return t(e)}function cT(){}var fp=!1;function hT(t,e,n){if(fp)return t(e,n);fp=!0;try{return uT(t,e,n)}finally{fp=!1,(Pa!==null||Sa!==null)&&(cT(),lT())}}function Tu(t,e){var n=t.stateNode;if(n===null)return null;var i=of(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Im=!1;if(rr)try{var Dl={};Object.defineProperty(Dl,"passive",{get:function(){Im=!0}}),window.addEventListener("test",Dl,Dl),window.removeEventListener("test",Dl,Dl)}catch{Im=!1}function Ib(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var tu=!1,Jh=null,ed=!1,Am=null,Ab={onError:function(t){tu=!0,Jh=t}};function bb(t,e,n,i,r,o,a,u,h){tu=!1,Jh=null,Ib.apply(Ab,arguments)}function kb(t,e,n,i,r,o,a,u,h){if(bb.apply(this,arguments),tu){if(tu){var f=Jh;tu=!1,Jh=null}else throw Error(Y(198));ed||(ed=!0,Am=f)}}function _o(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hv(t){if(_o(t)!==t)throw Error(Y(188))}function Rb(t){var e=t.alternate;if(!e){if(e=_o(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Hv(r),t;if(o===i)return Hv(r),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function fT(t){return t=Rb(t),t!==null?pT(t):null}function pT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pT(t);if(e!==null)return e;t=t.sibling}return null}var mT=Cn.unstable_scheduleCallback,Wv=Cn.unstable_cancelCallback,Nb=Cn.unstable_shouldYield,Lb=Cn.unstable_requestPaint,gt=Cn.unstable_now,Mb=Cn.unstable_getCurrentPriorityLevel,ay=Cn.unstable_ImmediatePriority,gT=Cn.unstable_UserBlockingPriority,td=Cn.unstable_NormalPriority,Ob=Cn.unstable_LowPriority,yT=Cn.unstable_IdlePriority,tf=null,xi=null;function Db(t){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(tf,t,void 0,(t.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:Fb,Vb=Math.log,jb=Math.LN2;function Fb(t){return t>>>=0,t===0?32:31-(Vb(t)/jb|0)|0}var th=64,nh=4194304;function Gl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Gl(u):(o&=a,o!==0&&(i=Gl(o)))}else a=n&~r,a!==0?i=Gl(a):o!==0&&(i=Gl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-oi(e),r=1<<n,i|=t[n],e&=~r;return i}function zb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-oi(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=zb(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function bm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _T(){var t=th;return th<<=1,!(th&4194240)&&(th=64),t}function pp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ju(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-oi(e),t[e]=n}function Ub(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-oi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function ly(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ge=0;function vT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wT,uy,xT,TT,ET,km=!1,ih=[],Gr=null,Zr=null,Kr=null,Eu=new Map,Pu=new Map,Or=[],Hb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $v(t,e){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Eu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(e.pointerId)}}function Vl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=tc(e),e!==null&&uy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Wb(t,e,n,i,r){switch(e){case"focusin":return Gr=Vl(Gr,t,e,n,i,r),!0;case"dragenter":return Zr=Vl(Zr,t,e,n,i,r),!0;case"mouseover":return Kr=Vl(Kr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Eu.set(o,Vl(Eu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Pu.set(o,Vl(Pu.get(o)||null,t,e,n,i,r)),!0}return!1}function PT(t){var e=Ks(t.target);if(e!==null){var n=_o(e);if(n!==null){if(e=n.tag,e===13){if(e=dT(n),e!==null){t.blockedOn=e,ET(t.priority,function(){xT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Sm=i,n.target.dispatchEvent(i),Sm=null}else return e=tc(n),e!==null&&uy(e),t.blockedOn=n,!1;e.shift()}return!0}function qv(t,e,n){bh(t)&&n.delete(e)}function $b(){km=!1,Gr!==null&&bh(Gr)&&(Gr=null),Zr!==null&&bh(Zr)&&(Zr=null),Kr!==null&&bh(Kr)&&(Kr=null),Eu.forEach(qv),Pu.forEach(qv)}function jl(t,e){t.blockedOn===e&&(t.blockedOn=null,km||(km=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,$b)))}function Su(t){function e(r){return jl(r,t)}if(0<ih.length){jl(ih[0],t);for(var n=1;n<ih.length;n++){var i=ih[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Gr!==null&&jl(Gr,t),Zr!==null&&jl(Zr,t),Kr!==null&&jl(Kr,t),Eu.forEach(e),Pu.forEach(e),n=0;n<Or.length;n++)i=Or[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Or.length&&(n=Or[0],n.blockedOn===null);)PT(n),n.blockedOn===null&&Or.shift()}var Ca=pr.ReactCurrentBatchConfig,id=!0;function qb(t,e,n,i){var r=Ge,o=Ca.transition;Ca.transition=null;try{Ge=1,cy(t,e,n,i)}finally{Ge=r,Ca.transition=o}}function Gb(t,e,n,i){var r=Ge,o=Ca.transition;Ca.transition=null;try{Ge=4,cy(t,e,n,i)}finally{Ge=r,Ca.transition=o}}function cy(t,e,n,i){if(id){var r=Rm(t,e,n,i);if(r===null)Pp(t,e,i,rd,n),$v(t,i);else if(Wb(r,t,e,n,i))i.stopPropagation();else if($v(t,i),e&4&&-1<Hb.indexOf(t)){for(;r!==null;){var o=tc(r);if(o!==null&&wT(o),o=Rm(t,e,n,i),o===null&&Pp(t,e,i,rd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Pp(t,e,i,null,n)}}var rd=null;function Rm(t,e,n,i){if(rd=null,t=oy(i),t=Ks(t),t!==null)if(e=_o(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rd=t,null}function ST(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mb()){case ay:return 1;case gT:return 4;case td:case Ob:return 16;case yT:return 536870912;default:return 16}default:return 16}}var Ur=null,hy=null,kh=null;function CT(){if(kh)return kh;var t,e=hy,n=e.length,i,r="value"in Ur?Ur.value:Ur.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return kh=r.slice(t,1<i?1-i:void 0)}function Rh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rh(){return!0}function Gv(){return!1}function kn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?rh:Gv,this.isPropagationStopped=Gv,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rh)},persist:function(){},isPersistent:rh}),e}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dy=kn(Ya),ec=lt({},Ya,{view:0,detail:0}),Zb=kn(ec),mp,gp,Fl,nf=lt({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fl&&(Fl&&t.type==="mousemove"?(mp=t.screenX-Fl.screenX,gp=t.screenY-Fl.screenY):gp=mp=0,Fl=t),mp)},movementY:function(t){return"movementY"in t?t.movementY:gp}}),Zv=kn(nf),Kb=lt({},nf,{dataTransfer:0}),Qb=kn(Kb),Xb=lt({},ec,{relatedTarget:0}),yp=kn(Xb),Yb=lt({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),Jb=kn(Yb),ek=lt({},Ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tk=kn(ek),nk=lt({},Ya,{data:0}),Kv=kn(nk),ik={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ok(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sk[t])?!!e[t]:!1}function fy(){return ok}var ak=lt({},ec,{key:function(t){if(t.key){var e=ik[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fy,charCode:function(t){return t.type==="keypress"?Rh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lk=kn(ak),uk=lt({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qv=kn(uk),ck=lt({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fy}),hk=kn(ck),dk=lt({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),fk=kn(dk),pk=lt({},nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mk=kn(pk),gk=[9,13,27,32],py=rr&&"CompositionEvent"in window,nu=null;rr&&"documentMode"in document&&(nu=document.documentMode);var yk=rr&&"TextEvent"in window&&!nu,IT=rr&&(!py||nu&&8<nu&&11>=nu),Xv=" ",Yv=!1;function AT(t,e){switch(t){case"keyup":return gk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var la=!1;function _k(t,e){switch(t){case"compositionend":return bT(e);case"keypress":return e.which!==32?null:(Yv=!0,Xv);case"textInput":return t=e.data,t===Xv&&Yv?null:t;default:return null}}function vk(t,e){if(la)return t==="compositionend"||!py&&AT(t,e)?(t=CT(),kh=hy=Ur=null,la=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return IT&&e.locale!=="ko"?null:e.data;default:return null}}var wk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wk[t.type]:e==="textarea"}function kT(t,e,n,i){aT(i),e=sd(e,"onChange"),0<e.length&&(n=new dy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var iu=null,Cu=null;function xk(t){BT(t,0)}function rf(t){var e=ha(t);if(eT(e))return t}function Tk(t,e){if(t==="change")return e}var RT=!1;if(rr){var _p;if(rr){var vp="oninput"in document;if(!vp){var e0=document.createElement("div");e0.setAttribute("oninput","return;"),vp=typeof e0.oninput=="function"}_p=vp}else _p=!1;RT=_p&&(!document.documentMode||9<document.documentMode)}function t0(){iu&&(iu.detachEvent("onpropertychange",NT),Cu=iu=null)}function NT(t){if(t.propertyName==="value"&&rf(Cu)){var e=[];kT(e,Cu,t,oy(t)),hT(xk,e)}}function Ek(t,e,n){t==="focusin"?(t0(),iu=e,Cu=n,iu.attachEvent("onpropertychange",NT)):t==="focusout"&&t0()}function Pk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rf(Cu)}function Sk(t,e){if(t==="click")return rf(e)}function Ck(t,e){if(t==="input"||t==="change")return rf(e)}function Ik(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var li=typeof Object.is=="function"?Object.is:Ik;function Iu(t,e){if(li(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!fm.call(e,r)||!li(t[r],e[r]))return!1}return!0}function n0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i0(t,e){var n=n0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=n0(n)}}function LT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function MT(){for(var t=window,e=Yh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yh(t.document)}return e}function my(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ak(t){var e=MT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&LT(n.ownerDocument.documentElement,n)){if(i!==null&&my(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=i0(n,o);var a=i0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bk=rr&&"documentMode"in document&&11>=document.documentMode,ua=null,Nm=null,ru=null,Lm=!1;function r0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lm||ua==null||ua!==Yh(i)||(i=ua,"selectionStart"in i&&my(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ru&&Iu(ru,i)||(ru=i,i=sd(Nm,"onSelect"),0<i.length&&(e=new dy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ua)))}function sh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ca={animationend:sh("Animation","AnimationEnd"),animationiteration:sh("Animation","AnimationIteration"),animationstart:sh("Animation","AnimationStart"),transitionend:sh("Transition","TransitionEnd")},wp={},OT={};rr&&(OT=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function sf(t){if(wp[t])return wp[t];if(!ca[t])return t;var e=ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OT)return wp[t]=e[n];return t}var DT=sf("animationend"),VT=sf("animationiteration"),jT=sf("animationstart"),FT=sf("transitionend"),zT=new Map,s0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(t,e){zT.set(t,e),yo(e,[t])}for(var xp=0;xp<s0.length;xp++){var Tp=s0[xp],kk=Tp.toLowerCase(),Rk=Tp[0].toUpperCase()+Tp.slice(1);Ts(kk,"on"+Rk)}Ts(DT,"onAnimationEnd");Ts(VT,"onAnimationIteration");Ts(jT,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(FT,"onTransitionEnd");La("onMouseEnter",["mouseout","mouseover"]);La("onMouseLeave",["mouseout","mouseover"]);La("onPointerEnter",["pointerout","pointerover"]);La("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zl));function o0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,kb(i,e,void 0,t),t.currentTarget=null}function BT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;o0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;o0(r,u,f),o=h}}}if(ed)throw t=Am,ed=!1,Am=null,t}function Ye(t,e){var n=e[jm];n===void 0&&(n=e[jm]=new Set);var i=t+"__bubble";n.has(i)||(UT(e,t,2,!1),n.add(i))}function Ep(t,e,n){var i=0;e&&(i|=4),UT(n,t,i,e)}var oh="_reactListening"+Math.random().toString(36).slice(2);function Au(t){if(!t[oh]){t[oh]=!0,K1.forEach(function(n){n!=="selectionchange"&&(Nk.has(n)||Ep(n,!1,t),Ep(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oh]||(e[oh]=!0,Ep("selectionchange",!1,e))}}function UT(t,e,n,i){switch(ST(e)){case 1:var r=qb;break;case 4:r=Gb;break;default:r=cy}n=r.bind(null,e,n,t),r=void 0,!Im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Pp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Ks(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}hT(function(){var f=o,m=oy(n),g=[];e:{var _=zT.get(t);if(_!==void 0){var T=dy,R=t;switch(t){case"keypress":if(Rh(n)===0)break e;case"keydown":case"keyup":T=lk;break;case"focusin":R="focus",T=yp;break;case"focusout":R="blur",T=yp;break;case"beforeblur":case"afterblur":T=yp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Zv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Qb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=hk;break;case DT:case VT:case jT:T=Jb;break;case FT:T=fk;break;case"scroll":T=Zb;break;case"wheel":T=mk;break;case"copy":case"cut":case"paste":T=tk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Qv}var k=(e&4)!==0,D=!k&&t==="scroll",I=k?_!==null?_+"Capture":null:_;k=[];for(var P=f,C;P!==null;){C=P;var z=C.stateNode;if(C.tag===5&&z!==null&&(C=z,I!==null&&(z=Tu(P,I),z!=null&&k.push(bu(P,z,C)))),D)break;P=P.return}0<k.length&&(_=new T(_,R,null,n,m),g.push({event:_,listeners:k}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&n!==Sm&&(R=n.relatedTarget||n.fromElement)&&(Ks(R)||R[sr]))break e;if((T||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,T?(R=n.relatedTarget||n.toElement,T=f,R=R?Ks(R):null,R!==null&&(D=_o(R),R!==D||R.tag!==5&&R.tag!==6)&&(R=null)):(T=null,R=f),T!==R)){if(k=Zv,z="onMouseLeave",I="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(k=Qv,z="onPointerLeave",I="onPointerEnter",P="pointer"),D=T==null?_:ha(T),C=R==null?_:ha(R),_=new k(z,P+"leave",T,n,m),_.target=D,_.relatedTarget=C,z=null,Ks(m)===f&&(k=new k(I,P+"enter",R,n,m),k.target=C,k.relatedTarget=D,z=k),D=z,T&&R)t:{for(k=T,I=R,P=0,C=k;C;C=ta(C))P++;for(C=0,z=I;z;z=ta(z))C++;for(;0<P-C;)k=ta(k),P--;for(;0<C-P;)I=ta(I),C--;for(;P--;){if(k===I||I!==null&&k===I.alternate)break t;k=ta(k),I=ta(I)}k=null}else k=null;T!==null&&a0(g,_,T,k,!1),R!==null&&D!==null&&a0(g,D,R,k,!0)}}e:{if(_=f?ha(f):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var G=Tk;else if(Jv(_))if(RT)G=Ck;else{G=Pk;var U=Ek}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(G=Sk);if(G&&(G=G(t,f))){kT(g,G,n,m);break e}U&&U(t,_,f),t==="focusout"&&(U=_._wrapperState)&&U.controlled&&_.type==="number"&&wm(_,"number",_.value)}switch(U=f?ha(f):window,t){case"focusin":(Jv(U)||U.contentEditable==="true")&&(ua=U,Nm=f,ru=null);break;case"focusout":ru=Nm=ua=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,r0(g,n,m);break;case"selectionchange":if(bk)break;case"keydown":case"keyup":r0(g,n,m)}var b;if(py)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else la?AT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(IT&&n.locale!=="ko"&&(la||S!=="onCompositionStart"?S==="onCompositionEnd"&&la&&(b=CT()):(Ur=m,hy="value"in Ur?Ur.value:Ur.textContent,la=!0)),U=sd(f,S),0<U.length&&(S=new Kv(S,t,null,n,m),g.push({event:S,listeners:U}),b?S.data=b:(b=bT(n),b!==null&&(S.data=b)))),(b=yk?_k(t,n):vk(t,n))&&(f=sd(f,"onBeforeInput"),0<f.length&&(m=new Kv("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=b))}BT(g,e)})}function bu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Tu(t,n),o!=null&&i.unshift(bu(t,o,r)),o=Tu(t,e),o!=null&&i.push(bu(t,o,r))),t=t.return}return i}function ta(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function a0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=Tu(n,o),h!=null&&a.unshift(bu(n,h,u))):r||(h=Tu(n,o),h!=null&&a.push(bu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Lk=/\r\n?/g,Mk=/\u0000|\uFFFD/g;function l0(t){return(typeof t=="string"?t:""+t).replace(Lk,`
`).replace(Mk,"")}function ah(t,e,n){if(e=l0(e),l0(t)!==e&&n)throw Error(Y(425))}function od(){}var Mm=null,Om=null;function Dm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vm=typeof setTimeout=="function"?setTimeout:void 0,Ok=typeof clearTimeout=="function"?clearTimeout:void 0,u0=typeof Promise=="function"?Promise:void 0,Dk=typeof queueMicrotask=="function"?queueMicrotask:typeof u0<"u"?function(t){return u0.resolve(null).then(t).catch(Vk)}:Vm;function Vk(t){setTimeout(function(){throw t})}function Sp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Su(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Su(e)}function Qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function c0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ja=Math.random().toString(36).slice(2),wi="__reactFiber$"+Ja,ku="__reactProps$"+Ja,sr="__reactContainer$"+Ja,jm="__reactEvents$"+Ja,jk="__reactListeners$"+Ja,Fk="__reactHandles$"+Ja;function Ks(t){var e=t[wi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sr]||n[wi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=c0(t);t!==null;){if(n=t[wi])return n;t=c0(t)}return e}t=n,n=t.parentNode}return null}function tc(t){return t=t[wi]||t[sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function of(t){return t[ku]||null}var Fm=[],da=-1;function Es(t){return{current:t}}function nt(t){0>da||(t.current=Fm[da],Fm[da]=null,da--)}function Qe(t,e){da++,Fm[da]=t.current,t.current=e}var ds={},Xt=Es(ds),yn=Es(!1),oo=ds;function Ma(t,e){var n=t.type.contextTypes;if(!n)return ds;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _n(t){return t=t.childContextTypes,t!=null}function ad(){nt(yn),nt(Xt)}function h0(t,e,n){if(Xt.current!==ds)throw Error(Y(168));Qe(Xt,e),Qe(yn,n)}function HT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,Eb(t)||"Unknown",r));return lt({},n,i)}function ld(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,oo=Xt.current,Qe(Xt,t),Qe(yn,yn.current),!0}function d0(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=HT(t,e,oo),i.__reactInternalMemoizedMergedChildContext=t,nt(yn),nt(Xt),Qe(Xt,t)):nt(yn),Qe(yn,n)}var Gi=null,af=!1,Cp=!1;function WT(t){Gi===null?Gi=[t]:Gi.push(t)}function zk(t){af=!0,WT(t)}function Ps(){if(!Cp&&Gi!==null){Cp=!0;var t=0,e=Ge;try{var n=Gi;for(Ge=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Gi=null,af=!1}catch(r){throw Gi!==null&&(Gi=Gi.slice(t+1)),mT(ay,Ps),r}finally{Ge=e,Cp=!1}}return null}var fa=[],pa=0,ud=null,cd=0,zn=[],Bn=0,ao=null,Zi=1,Ki="";function Hs(t,e){fa[pa++]=cd,fa[pa++]=ud,ud=t,cd=e}function $T(t,e,n){zn[Bn++]=Zi,zn[Bn++]=Ki,zn[Bn++]=ao,ao=t;var i=Zi;t=Ki;var r=32-oi(i)-1;i&=~(1<<r),n+=1;var o=32-oi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zi=1<<32-oi(e)+r|n<<r|i,Ki=o+t}else Zi=1<<o|n<<r|i,Ki=t}function gy(t){t.return!==null&&(Hs(t,1),$T(t,1,0))}function yy(t){for(;t===ud;)ud=fa[--pa],fa[pa]=null,cd=fa[--pa],fa[pa]=null;for(;t===ao;)ao=zn[--Bn],zn[Bn]=null,Ki=zn[--Bn],zn[Bn]=null,Zi=zn[--Bn],zn[Bn]=null}var Sn=null,Pn=null,it=!1,ni=null;function qT(t,e){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function f0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,Pn=Qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ao!==null?{id:Zi,overflow:Ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,Pn=null,!0):!1;default:return!1}}function zm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bm(t){if(it){var e=Pn;if(e){var n=e;if(!f0(t,e)){if(zm(t))throw Error(Y(418));e=Qr(n.nextSibling);var i=Sn;e&&f0(t,e)?qT(i,n):(t.flags=t.flags&-4097|2,it=!1,Sn=t)}}else{if(zm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,it=!1,Sn=t}}}function p0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function lh(t){if(t!==Sn)return!1;if(!it)return p0(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dm(t.type,t.memoizedProps)),e&&(e=Pn)){if(zm(t))throw GT(),Error(Y(418));for(;e;)qT(t,e),e=Qr(e.nextSibling)}if(p0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=Qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=Sn?Qr(t.stateNode.nextSibling):null;return!0}function GT(){for(var t=Pn;t;)t=Qr(t.nextSibling)}function Oa(){Pn=Sn=null,it=!1}function _y(t){ni===null?ni=[t]:ni.push(t)}var Bk=pr.ReactCurrentBatchConfig;function zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function uh(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function m0(t){var e=t._init;return e(t._payload)}function ZT(t){function e(I,P){if(t){var C=I.deletions;C===null?(I.deletions=[P],I.flags|=16):C.push(P)}}function n(I,P){if(!t)return null;for(;P!==null;)e(I,P),P=P.sibling;return null}function i(I,P){for(I=new Map;P!==null;)P.key!==null?I.set(P.key,P):I.set(P.index,P),P=P.sibling;return I}function r(I,P){return I=es(I,P),I.index=0,I.sibling=null,I}function o(I,P,C){return I.index=C,t?(C=I.alternate,C!==null?(C=C.index,C<P?(I.flags|=2,P):C):(I.flags|=2,P)):(I.flags|=1048576,P)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,P,C,z){return P===null||P.tag!==6?(P=Lp(C,I.mode,z),P.return=I,P):(P=r(P,C),P.return=I,P)}function h(I,P,C,z){var G=C.type;return G===aa?m(I,P,C.props.children,z,C.key):P!==null&&(P.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Nr&&m0(G)===P.type)?(z=r(P,C.props),z.ref=zl(I,P,C),z.return=I,z):(z=jh(C.type,C.key,C.props,null,I.mode,z),z.ref=zl(I,P,C),z.return=I,z)}function f(I,P,C,z){return P===null||P.tag!==4||P.stateNode.containerInfo!==C.containerInfo||P.stateNode.implementation!==C.implementation?(P=Mp(C,I.mode,z),P.return=I,P):(P=r(P,C.children||[]),P.return=I,P)}function m(I,P,C,z,G){return P===null||P.tag!==7?(P=to(C,I.mode,z,G),P.return=I,P):(P=r(P,C),P.return=I,P)}function g(I,P,C){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Lp(""+P,I.mode,C),P.return=I,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Yc:return C=jh(P.type,P.key,P.props,null,I.mode,C),C.ref=zl(I,null,P),C.return=I,C;case oa:return P=Mp(P,I.mode,C),P.return=I,P;case Nr:var z=P._init;return g(I,z(P._payload),C)}if(ql(P)||Ol(P))return P=to(P,I.mode,C,null),P.return=I,P;uh(I,P)}return null}function _(I,P,C,z){var G=P!==null?P.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return G!==null?null:u(I,P,""+C,z);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Yc:return C.key===G?h(I,P,C,z):null;case oa:return C.key===G?f(I,P,C,z):null;case Nr:return G=C._init,_(I,P,G(C._payload),z)}if(ql(C)||Ol(C))return G!==null?null:m(I,P,C,z,null);uh(I,C)}return null}function T(I,P,C,z,G){if(typeof z=="string"&&z!==""||typeof z=="number")return I=I.get(C)||null,u(P,I,""+z,G);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Yc:return I=I.get(z.key===null?C:z.key)||null,h(P,I,z,G);case oa:return I=I.get(z.key===null?C:z.key)||null,f(P,I,z,G);case Nr:var U=z._init;return T(I,P,C,U(z._payload),G)}if(ql(z)||Ol(z))return I=I.get(C)||null,m(P,I,z,G,null);uh(P,z)}return null}function R(I,P,C,z){for(var G=null,U=null,b=P,S=P=0,N=null;b!==null&&S<C.length;S++){b.index>S?(N=b,b=null):N=b.sibling;var O=_(I,b,C[S],z);if(O===null){b===null&&(b=N);break}t&&b&&O.alternate===null&&e(I,b),P=o(O,P,S),U===null?G=O:U.sibling=O,U=O,b=N}if(S===C.length)return n(I,b),it&&Hs(I,S),G;if(b===null){for(;S<C.length;S++)b=g(I,C[S],z),b!==null&&(P=o(b,P,S),U===null?G=b:U.sibling=b,U=b);return it&&Hs(I,S),G}for(b=i(I,b);S<C.length;S++)N=T(b,I,S,C[S],z),N!==null&&(t&&N.alternate!==null&&b.delete(N.key===null?S:N.key),P=o(N,P,S),U===null?G=N:U.sibling=N,U=N);return t&&b.forEach(function(j){return e(I,j)}),it&&Hs(I,S),G}function k(I,P,C,z){var G=Ol(C);if(typeof G!="function")throw Error(Y(150));if(C=G.call(C),C==null)throw Error(Y(151));for(var U=G=null,b=P,S=P=0,N=null,O=C.next();b!==null&&!O.done;S++,O=C.next()){b.index>S?(N=b,b=null):N=b.sibling;var j=_(I,b,O.value,z);if(j===null){b===null&&(b=N);break}t&&b&&j.alternate===null&&e(I,b),P=o(j,P,S),U===null?G=j:U.sibling=j,U=j,b=N}if(O.done)return n(I,b),it&&Hs(I,S),G;if(b===null){for(;!O.done;S++,O=C.next())O=g(I,O.value,z),O!==null&&(P=o(O,P,S),U===null?G=O:U.sibling=O,U=O);return it&&Hs(I,S),G}for(b=i(I,b);!O.done;S++,O=C.next())O=T(b,I,S,O.value,z),O!==null&&(t&&O.alternate!==null&&b.delete(O.key===null?S:O.key),P=o(O,P,S),U===null?G=O:U.sibling=O,U=O);return t&&b.forEach(function(B){return e(I,B)}),it&&Hs(I,S),G}function D(I,P,C,z){if(typeof C=="object"&&C!==null&&C.type===aa&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Yc:e:{for(var G=C.key,U=P;U!==null;){if(U.key===G){if(G=C.type,G===aa){if(U.tag===7){n(I,U.sibling),P=r(U,C.props.children),P.return=I,I=P;break e}}else if(U.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Nr&&m0(G)===U.type){n(I,U.sibling),P=r(U,C.props),P.ref=zl(I,U,C),P.return=I,I=P;break e}n(I,U);break}else e(I,U);U=U.sibling}C.type===aa?(P=to(C.props.children,I.mode,z,C.key),P.return=I,I=P):(z=jh(C.type,C.key,C.props,null,I.mode,z),z.ref=zl(I,P,C),z.return=I,I=z)}return a(I);case oa:e:{for(U=C.key;P!==null;){if(P.key===U)if(P.tag===4&&P.stateNode.containerInfo===C.containerInfo&&P.stateNode.implementation===C.implementation){n(I,P.sibling),P=r(P,C.children||[]),P.return=I,I=P;break e}else{n(I,P);break}else e(I,P);P=P.sibling}P=Mp(C,I.mode,z),P.return=I,I=P}return a(I);case Nr:return U=C._init,D(I,P,U(C._payload),z)}if(ql(C))return R(I,P,C,z);if(Ol(C))return k(I,P,C,z);uh(I,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,P!==null&&P.tag===6?(n(I,P.sibling),P=r(P,C),P.return=I,I=P):(n(I,P),P=Lp(C,I.mode,z),P.return=I,I=P),a(I)):n(I,P)}return D}var Da=ZT(!0),KT=ZT(!1),hd=Es(null),dd=null,ma=null,vy=null;function wy(){vy=ma=dd=null}function xy(t){var e=hd.current;nt(hd),t._currentValue=e}function Um(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ia(t,e){dd=t,vy=ma=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(vy!==t)if(t={context:t,memoizedValue:e,next:null},ma===null){if(dd===null)throw Error(Y(308));ma=t,dd.dependencies={lanes:0,firstContext:t}}else ma=ma.next=t;return e}var Qs=null;function Ty(t){Qs===null?Qs=[t]:Qs.push(t)}function QT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ty(e)):(n.next=r.next,r.next=n),e.interleaved=n,or(t,i)}function or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lr=!1;function Ey(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,je&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,or(t,n)}return r=i.interleaved,r===null?(e.next=e,Ty(i)):(e.next=r.next,r.next=e),i.interleaved=e,or(t,n)}function Nh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ly(t,n)}}function g0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fd(t,e,n,i){var r=t.updateQueue;Lr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var _=u.lane,T=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var R=t,k=u;switch(_=e,T=n,k.tag){case 1:if(R=k.payload,typeof R=="function"){g=R.call(T,g,_);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=k.payload,_=typeof R=="function"?R.call(T,g,_):R,_==null)break e;g=lt({},g,_);break e;case 2:Lr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else T={eventTime:T,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,h=g):m=m.next=T,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);uo|=a,t.lanes=a,t.memoizedState=g}}function y0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var nc={},Ti=Es(nc),Ru=Es(nc),Nu=Es(nc);function Xs(t){if(t===nc)throw Error(Y(174));return t}function Py(t,e){switch(Qe(Nu,e),Qe(Ru,t),Qe(Ti,nc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tm(e,t)}nt(Ti),Qe(Ti,e)}function Va(){nt(Ti),nt(Ru),nt(Nu)}function YT(t){Xs(Nu.current);var e=Xs(Ti.current),n=Tm(e,t.type);e!==n&&(Qe(Ru,t),Qe(Ti,n))}function Sy(t){Ru.current===t&&(nt(Ti),nt(Ru))}var rt=Es(0);function pd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ip=[];function Cy(){for(var t=0;t<Ip.length;t++)Ip[t]._workInProgressVersionPrimary=null;Ip.length=0}var Lh=pr.ReactCurrentDispatcher,Ap=pr.ReactCurrentBatchConfig,lo=0,ot=null,St=null,Ot=null,md=!1,su=!1,Lu=0,Uk=0;function Wt(){throw Error(Y(321))}function Iy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!li(t[n],e[n]))return!1;return!0}function Ay(t,e,n,i,r,o){if(lo=o,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lh.current=t===null||t.memoizedState===null?qk:Gk,t=n(i,r),su){o=0;do{if(su=!1,Lu=0,25<=o)throw Error(Y(301));o+=1,Ot=St=null,e.updateQueue=null,Lh.current=Zk,t=n(i,r)}while(su)}if(Lh.current=gd,e=St!==null&&St.next!==null,lo=0,Ot=St=ot=null,md=!1,e)throw Error(Y(300));return t}function by(){var t=Lu!==0;return Lu=0,t}function _i(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ot.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function Gn(){if(St===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=Ot===null?ot.memoizedState:Ot.next;if(e!==null)Ot=e,St=t;else{if(t===null)throw Error(Y(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Ot===null?ot.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Mu(t,e){return typeof e=="function"?e(t):e}function bp(t){var e=Gn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=St,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((lo&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,ot.lanes|=m,uo|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,li(i,e.memoizedState)||(gn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,ot.lanes|=o,uo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kp(t){var e=Gn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);li(o,e.memoizedState)||(gn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function JT(){}function eE(t,e){var n=ot,i=Gn(),r=e(),o=!li(i.memoizedState,r);if(o&&(i.memoizedState=r,gn=!0),i=i.queue,ky(iE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,Ou(9,nE.bind(null,n,i,r,e),void 0,null),Dt===null)throw Error(Y(349));lo&30||tE(n,e,r)}return r}function tE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nE(t,e,n,i){e.value=n,e.getSnapshot=i,rE(e)&&sE(t)}function iE(t,e,n){return n(function(){rE(e)&&sE(t)})}function rE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!li(t,n)}catch{return!0}}function sE(t){var e=or(t,1);e!==null&&ai(e,t,1,-1)}function _0(t){var e=_i();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:t},e.queue=t,t=t.dispatch=$k.bind(null,ot,t),[e.memoizedState,t]}function Ou(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function oE(){return Gn().memoizedState}function Mh(t,e,n,i){var r=_i();ot.flags|=t,r.memoizedState=Ou(1|e,n,void 0,i===void 0?null:i)}function lf(t,e,n,i){var r=Gn();i=i===void 0?null:i;var o=void 0;if(St!==null){var a=St.memoizedState;if(o=a.destroy,i!==null&&Iy(i,a.deps)){r.memoizedState=Ou(e,n,o,i);return}}ot.flags|=t,r.memoizedState=Ou(1|e,n,o,i)}function v0(t,e){return Mh(8390656,8,t,e)}function ky(t,e){return lf(2048,8,t,e)}function aE(t,e){return lf(4,2,t,e)}function lE(t,e){return lf(4,4,t,e)}function uE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cE(t,e,n){return n=n!=null?n.concat([t]):null,lf(4,4,uE.bind(null,e,t),n)}function Ry(){}function hE(t,e){var n=Gn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Iy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function dE(t,e){var n=Gn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Iy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function fE(t,e,n){return lo&21?(li(n,e)||(n=_T(),ot.lanes|=n,uo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=n)}function Hk(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var i=Ap.transition;Ap.transition={};try{t(!1),e()}finally{Ge=n,Ap.transition=i}}function pE(){return Gn().memoizedState}function Wk(t,e,n){var i=Jr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},mE(t))gE(e,n);else if(n=QT(t,e,n,i),n!==null){var r=sn();ai(n,t,i,r),yE(n,e,i)}}function $k(t,e,n){var i=Jr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(mE(t))gE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,li(u,a)){var h=e.interleaved;h===null?(r.next=r,Ty(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=QT(t,e,r,i),n!==null&&(r=sn(),ai(n,t,i,r),yE(n,e,i))}}function mE(t){var e=t.alternate;return t===ot||e!==null&&e===ot}function gE(t,e){su=md=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ly(t,n)}}var gd={readContext:qn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},qk={readContext:qn,useCallback:function(t,e){return _i().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:v0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mh(4194308,4,uE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mh(4,2,t,e)},useMemo:function(t,e){var n=_i();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=_i();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Wk.bind(null,ot,t),[i.memoizedState,t]},useRef:function(t){var e=_i();return t={current:t},e.memoizedState=t},useState:_0,useDebugValue:Ry,useDeferredValue:function(t){return _i().memoizedState=t},useTransition:function(){var t=_0(!1),e=t[0];return t=Hk.bind(null,t[1]),_i().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ot,r=_i();if(it){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Dt===null)throw Error(Y(349));lo&30||tE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,v0(iE.bind(null,i,o,t),[t]),i.flags|=2048,Ou(9,nE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=_i(),e=Dt.identifierPrefix;if(it){var n=Ki,i=Zi;n=(i&~(1<<32-oi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Uk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gk={readContext:qn,useCallback:hE,useContext:qn,useEffect:ky,useImperativeHandle:cE,useInsertionEffect:aE,useLayoutEffect:lE,useMemo:dE,useReducer:bp,useRef:oE,useState:function(){return bp(Mu)},useDebugValue:Ry,useDeferredValue:function(t){var e=Gn();return fE(e,St.memoizedState,t)},useTransition:function(){var t=bp(Mu)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:JT,useSyncExternalStore:eE,useId:pE,unstable_isNewReconciler:!1},Zk={readContext:qn,useCallback:hE,useContext:qn,useEffect:ky,useImperativeHandle:cE,useInsertionEffect:aE,useLayoutEffect:lE,useMemo:dE,useReducer:kp,useRef:oE,useState:function(){return kp(Mu)},useDebugValue:Ry,useDeferredValue:function(t){var e=Gn();return St===null?e.memoizedState=t:fE(e,St.memoizedState,t)},useTransition:function(){var t=kp(Mu)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:JT,useSyncExternalStore:eE,useId:pE,unstable_isNewReconciler:!1};function ei(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uf={isMounted:function(t){return(t=t._reactInternals)?_o(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=sn(),r=Jr(t),o=er(i,r);o.payload=e,n!=null&&(o.callback=n),e=Xr(t,o,r),e!==null&&(ai(e,t,r,i),Nh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=sn(),r=Jr(t),o=er(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Xr(t,o,r),e!==null&&(ai(e,t,r,i),Nh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),i=Jr(t),r=er(n,i);r.tag=2,e!=null&&(r.callback=e),e=Xr(t,r,i),e!==null&&(ai(e,t,i,n),Nh(e,t,i))}};function w0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Iu(n,i)||!Iu(r,o):!0}function _E(t,e,n){var i=!1,r=ds,o=e.contextType;return typeof o=="object"&&o!==null?o=qn(o):(r=_n(e)?oo:Xt.current,i=e.contextTypes,o=(i=i!=null)?Ma(t,r):ds),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function x0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&uf.enqueueReplaceState(e,e.state,null)}function Wm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ey(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=qn(o):(o=_n(e)?oo:Xt.current,r.context=Ma(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Hm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&uf.enqueueReplaceState(r,r.state,null),fd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ja(t,e){try{var n="",i=e;do n+=Tb(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Rp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $m(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Kk=typeof WeakMap=="function"?WeakMap:Map;function vE(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){_d||(_d=!0,tg=i),$m(t,e)},n}function wE(t,e,n){n=er(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){$m(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$m(t,e),typeof i!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function T0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Kk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=uR.bind(null,t,e,n),e.then(t,t))}function E0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function P0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Xr(n,e,1))),n.lanes|=1),t)}var Qk=pr.ReactCurrentOwner,gn=!1;function rn(t,e,n,i){e.child=t===null?KT(e,null,n,i):Da(e,t.child,n,i)}function S0(t,e,n,i,r){n=n.render;var o=e.ref;return Ia(e,r),i=Ay(t,e,n,i,o,r),n=by(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ar(t,e,r)):(it&&n&&gy(e),e.flags|=1,rn(t,e,i,r),e.child)}function C0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Fy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,xE(t,e,o,i,r)):(t=jh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Iu,n(a,i)&&t.ref===e.ref)return ar(t,e,r)}return e.flags|=1,t=es(o,i),t.ref=e.ref,t.return=e,e.child=t}function xE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Iu(o,i)&&t.ref===e.ref)if(gn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,ar(t,e,r)}return qm(t,e,n,i,r)}function TE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ya,En),En|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(ya,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Qe(ya,En),En|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Qe(ya,En),En|=i;return rn(t,e,r,n),e.child}function EE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qm(t,e,n,i,r){var o=_n(n)?oo:Xt.current;return o=Ma(e,o),Ia(e,r),n=Ay(t,e,n,i,o,r),i=by(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ar(t,e,r)):(it&&i&&gy(e),e.flags|=1,rn(t,e,n,r),e.child)}function I0(t,e,n,i,r){if(_n(n)){var o=!0;ld(e)}else o=!1;if(Ia(e,r),e.stateNode===null)Oh(t,e),_E(e,n,i),Wm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=qn(f):(f=_n(n)?oo:Xt.current,f=Ma(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&x0(e,a,i,f),Lr=!1;var _=e.memoizedState;a.state=_,fd(e,i,a,r),h=e.memoizedState,u!==i||_!==h||yn.current||Lr?(typeof m=="function"&&(Hm(e,n,m,i),h=e.memoizedState),(u=Lr||w0(e,n,u,i,_,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,XT(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ei(e.type,u),a.props=f,g=e.pendingProps,_=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=qn(h):(h=_n(n)?oo:Xt.current,h=Ma(e,h));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==h)&&x0(e,a,i,h),Lr=!1,_=e.memoizedState,a.state=_,fd(e,i,a,r);var R=e.memoizedState;u!==g||_!==R||yn.current||Lr?(typeof T=="function"&&(Hm(e,n,T,i),R=e.memoizedState),(f=Lr||w0(e,n,f,i,_,R,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,R,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,R,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=R),a.props=i,a.state=R,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return Gm(t,e,n,i,o,r)}function Gm(t,e,n,i,r,o){EE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&d0(e,n,!1),ar(t,e,o);i=e.stateNode,Qk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Da(e,t.child,null,o),e.child=Da(e,null,u,o)):rn(t,e,u,o),e.memoizedState=i.state,r&&d0(e,n,!0),e.child}function PE(t){var e=t.stateNode;e.pendingContext?h0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&h0(t,e.context,!1),Py(t,e.containerInfo)}function A0(t,e,n,i,r){return Oa(),_y(r),e.flags|=256,rn(t,e,n,i),e.child}var Zm={dehydrated:null,treeContext:null,retryLane:0};function Km(t){return{baseLanes:t,cachePool:null,transitions:null}}function SE(t,e,n){var i=e.pendingProps,r=rt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Qe(rt,r&1),t===null)return Bm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=df(a,i,0,null),t=to(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Km(n),e.memoizedState=Zm,t):Ny(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Xk(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=es(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=es(u,o):(o=to(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Km(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Zm,i}return o=t.child,t=o.sibling,i=es(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ny(t,e){return e=df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ch(t,e,n,i){return i!==null&&_y(i),Da(e,t.child,null,n),t=Ny(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xk(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Rp(Error(Y(422))),ch(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=df({mode:"visible",children:i.children},r,0,null),o=to(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Da(e,t.child,null,a),e.child.memoizedState=Km(a),e.memoizedState=Zm,o);if(!(e.mode&1))return ch(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(Y(419)),i=Rp(o,i,void 0),ch(t,e,a,i)}if(u=(a&t.childLanes)!==0,gn||u){if(i=Dt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,or(t,r),ai(i,t,r,-1))}return jy(),i=Rp(Error(Y(421))),ch(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=cR.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Pn=Qr(r.nextSibling),Sn=e,it=!0,ni=null,t!==null&&(zn[Bn++]=Zi,zn[Bn++]=Ki,zn[Bn++]=ao,Zi=t.id,Ki=t.overflow,ao=e),e=Ny(e,i.children),e.flags|=4096,e)}function b0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Um(t.return,e,n)}function Np(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function CE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(rn(t,e,i.children,n),i=rt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b0(t,n,e);else if(t.tag===19)b0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Qe(rt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&pd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Np(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&pd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Np(e,!0,n,null,o);break;case"together":Np(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Oh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),uo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yk(t,e,n){switch(e.tag){case 3:PE(e),Oa();break;case 5:YT(e);break;case 1:_n(e.type)&&ld(e);break;case 4:Py(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Qe(hd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Qe(rt,rt.current&1),e.flags|=128,null):n&e.child.childLanes?SE(t,e,n):(Qe(rt,rt.current&1),t=ar(t,e,n),t!==null?t.sibling:null);Qe(rt,rt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return CE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Qe(rt,rt.current),i)break;return null;case 22:case 23:return e.lanes=0,TE(t,e,n)}return ar(t,e,n)}var IE,Qm,AE,bE;IE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qm=function(){};AE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Xs(Ti.current);var o=null;switch(n){case"input":r=_m(t,r),i=_m(t,i),o=[];break;case"select":r=lt({},r,{value:void 0}),i=lt({},i,{value:void 0}),o=[];break;case"textarea":r=xm(t,r),i=xm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=od)}Em(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(wu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(wu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Ye("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};bE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Bl(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Jk(t,e,n){var i=e.pendingProps;switch(yy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return _n(e.type)&&ad(),$t(e),null;case 3:return i=e.stateNode,Va(),nt(yn),nt(Xt),Cy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(lh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ni!==null&&(rg(ni),ni=null))),Qm(t,e),$t(e),null;case 5:Sy(e);var r=Xs(Nu.current);if(n=e.type,t!==null&&e.stateNode!=null)AE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return $t(e),null}if(t=Xs(Ti.current),lh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[wi]=e,i[ku]=o,t=(e.mode&1)!==0,n){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(r=0;r<Zl.length;r++)Ye(Zl[r],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":jv(i,o),Ye("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ye("invalid",i);break;case"textarea":zv(i,o),Ye("invalid",i)}Em(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&ah(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&ah(i.textContent,u,t),r=["children",""+u]):wu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ye("scroll",i)}switch(n){case"input":Jc(i),Fv(i,o,!0);break;case"textarea":Jc(i),Bv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=od)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[wi]=e,t[ku]=i,IE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Pm(n,i),n){case"dialog":Ye("cancel",t),Ye("close",t),r=i;break;case"iframe":case"object":case"embed":Ye("load",t),r=i;break;case"video":case"audio":for(r=0;r<Zl.length;r++)Ye(Zl[r],t);r=i;break;case"source":Ye("error",t),r=i;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),r=i;break;case"details":Ye("toggle",t),r=i;break;case"input":jv(t,i),r=_m(t,i),Ye("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=lt({},i,{value:void 0}),Ye("invalid",t);break;case"textarea":zv(t,i),r=xm(t,i),Ye("invalid",t);break;default:r=i}Em(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?oT(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&rT(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&xu(t,h):typeof h=="number"&&xu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(wu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ye("scroll",t):h!=null&&ny(t,o,h,a))}switch(n){case"input":Jc(t),Fv(t,i,!1);break;case"textarea":Jc(t),Bv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+hs(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ea(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ea(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=od)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)bE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Xs(Nu.current),Xs(Ti.current),lh(e)){if(i=e.stateNode,n=e.memoizedProps,i[wi]=e,(o=i.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:ah(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ah(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[wi]=e,e.stateNode=i}return $t(e),null;case 13:if(nt(rt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Pn!==null&&e.mode&1&&!(e.flags&128))GT(),Oa(),e.flags|=98560,o=!1;else if(o=lh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[wi]=e}else Oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),o=!1}else ni!==null&&(rg(ni),ni=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?It===0&&(It=3):jy())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Va(),Qm(t,e),t===null&&Au(e.stateNode.containerInfo),$t(e),null;case 10:return xy(e.type._context),$t(e),null;case 17:return _n(e.type)&&ad(),$t(e),null;case 19:if(nt(rt),o=e.memoizedState,o===null)return $t(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Bl(o,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=pd(t),a!==null){for(e.flags|=128,Bl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(rt,rt.current&1|2),e.child}t=t.sibling}o.tail!==null&&gt()>Fa&&(e.flags|=128,i=!0,Bl(o,!1),e.lanes=4194304)}else{if(!i)if(t=pd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!it)return $t(e),null}else 2*gt()-o.renderingStartTime>Fa&&n!==1073741824&&(e.flags|=128,i=!0,Bl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=gt(),e.sibling=null,n=rt.current,Qe(rt,i?n&1|2:n&1),e):($t(e),null);case 22:case 23:return Vy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?En&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function eR(t,e){switch(yy(e),e.tag){case 1:return _n(e.type)&&ad(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Va(),nt(yn),nt(Xt),Cy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sy(e),null;case 13:if(nt(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(rt),null;case 4:return Va(),null;case 10:return xy(e.type._context),null;case 22:case 23:return Vy(),null;case 24:return null;default:return null}}var hh=!1,Kt=!1,tR=typeof WeakSet=="function"?WeakSet:Set,he=null;function ga(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){dt(t,e,i)}else n.current=null}function Xm(t,e,n){try{n()}catch(i){dt(t,e,i)}}var k0=!1;function nR(t,e){if(Mm=id,t=MT(),my(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)_=g,g=T;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(h=a),(T=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Om={focusedElem:t,selectionRange:n},id=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var k=R.memoizedProps,D=R.memoizedState,I=e.stateNode,P=I.getSnapshotBeforeUpdate(e.elementType===e.type?k:ei(e.type,k),D);I.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(z){dt(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return R=k0,k0=!1,R}function ou(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Xm(e,n,o)}r=r.next}while(r!==i)}}function cf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kE(t){var e=t.alternate;e!==null&&(t.alternate=null,kE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wi],delete e[ku],delete e[jm],delete e[jk],delete e[Fk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RE(t){return t.tag===5||t.tag===3||t.tag===4}function R0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=od));else if(i!==4&&(t=t.child,t!==null))for(Jm(t,e,n),t=t.sibling;t!==null;)Jm(t,e,n),t=t.sibling}function eg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}var Vt=null,ti=!1;function Ir(t,e,n){for(n=n.child;n!==null;)NE(t,e,n),n=n.sibling}function NE(t,e,n){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(tf,n)}catch{}switch(n.tag){case 5:Kt||ga(n,e);case 6:var i=Vt,r=ti;Vt=null,Ir(t,e,n),Vt=i,ti=r,Vt!==null&&(ti?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(ti?(t=Vt,n=n.stateNode,t.nodeType===8?Sp(t.parentNode,n):t.nodeType===1&&Sp(t,n),Su(t)):Sp(Vt,n.stateNode));break;case 4:i=Vt,r=ti,Vt=n.stateNode.containerInfo,ti=!0,Ir(t,e,n),Vt=i,ti=r;break;case 0:case 11:case 14:case 15:if(!Kt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Xm(n,e,a),r=r.next}while(r!==i)}Ir(t,e,n);break;case 1:if(!Kt&&(ga(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){dt(n,e,u)}Ir(t,e,n);break;case 21:Ir(t,e,n);break;case 22:n.mode&1?(Kt=(i=Kt)||n.memoizedState!==null,Ir(t,e,n),Kt=i):Ir(t,e,n);break;default:Ir(t,e,n)}}function N0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tR),e.forEach(function(i){var r=hR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Jn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Vt=u.stateNode,ti=!1;break e;case 3:Vt=u.stateNode.containerInfo,ti=!0;break e;case 4:Vt=u.stateNode.containerInfo,ti=!0;break e}u=u.return}if(Vt===null)throw Error(Y(160));NE(o,a,r),Vt=null,ti=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){dt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LE(e,t),e=e.sibling}function LE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jn(e,t),yi(t),i&4){try{ou(3,t,t.return),cf(3,t)}catch(k){dt(t,t.return,k)}try{ou(5,t,t.return)}catch(k){dt(t,t.return,k)}}break;case 1:Jn(e,t),yi(t),i&512&&n!==null&&ga(n,n.return);break;case 5:if(Jn(e,t),yi(t),i&512&&n!==null&&ga(n,n.return),t.flags&32){var r=t.stateNode;try{xu(r,"")}catch(k){dt(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&tT(r,o),Pm(u,a);var f=Pm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?oT(r,g):m==="dangerouslySetInnerHTML"?rT(r,g):m==="children"?xu(r,g):ny(r,m,g,f)}switch(u){case"input":vm(r,o);break;case"textarea":nT(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Ea(r,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?Ea(r,!!o.multiple,o.defaultValue,!0):Ea(r,!!o.multiple,o.multiple?[]:"",!1))}r[ku]=o}catch(k){dt(t,t.return,k)}}break;case 6:if(Jn(e,t),yi(t),i&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){dt(t,t.return,k)}}break;case 3:if(Jn(e,t),yi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Su(e.containerInfo)}catch(k){dt(t,t.return,k)}break;case 4:Jn(e,t),yi(t);break;case 13:Jn(e,t),yi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Oy=gt())),i&4&&N0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Kt=(f=Kt)||m,Jn(e,t),Kt=f):Jn(e,t),yi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(he=t,m=t.child;m!==null;){for(g=he=m;he!==null;){switch(_=he,T=_.child,_.tag){case 0:case 11:case 14:case 15:ou(4,_,_.return);break;case 1:ga(_,_.return);var R=_.stateNode;if(typeof R.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(k){dt(i,n,k)}}break;case 5:ga(_,_.return);break;case 22:if(_.memoizedState!==null){M0(g);continue}}T!==null?(T.return=_,he=T):M0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=sT("display",a))}catch(k){dt(t,t.return,k)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){dt(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Jn(e,t),yi(t),i&4&&N0(t);break;case 21:break;default:Jn(e,t),yi(t)}}function yi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(RE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(xu(r,""),i.flags&=-33);var o=R0(t);eg(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=R0(t);Jm(t,u,a);break;default:throw Error(Y(161))}}catch(h){dt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iR(t,e,n){he=t,ME(t)}function ME(t,e,n){for(var i=(t.mode&1)!==0;he!==null;){var r=he,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||hh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Kt;u=hh;var f=Kt;if(hh=a,(Kt=h)&&!f)for(he=r;he!==null;)a=he,h=a.child,a.tag===22&&a.memoizedState!==null?O0(r):h!==null?(h.return=a,he=h):O0(r);for(;o!==null;)he=o,ME(o),o=o.sibling;he=r,hh=u,Kt=f}L0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,he=o):L0(t)}}function L0(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||cf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Kt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ei(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&y0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}y0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Su(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Kt||e.flags&512&&Ym(e)}catch(_){dt(e,e.return,_)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function M0(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function O0(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cf(4,e)}catch(h){dt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){dt(e,r,h)}}var o=e.return;try{Ym(e)}catch(h){dt(e,o,h)}break;case 5:var a=e.return;try{Ym(e)}catch(h){dt(e,a,h)}}}catch(h){dt(e,e.return,h)}if(e===t){he=null;break}var u=e.sibling;if(u!==null){u.return=e.return,he=u;break}he=e.return}}var rR=Math.ceil,yd=pr.ReactCurrentDispatcher,Ly=pr.ReactCurrentOwner,$n=pr.ReactCurrentBatchConfig,je=0,Dt=null,Et=null,zt=0,En=0,ya=Es(0),It=0,Du=null,uo=0,hf=0,My=0,au=null,mn=null,Oy=0,Fa=1/0,qi=null,_d=!1,tg=null,Yr=null,dh=!1,Hr=null,vd=0,lu=0,ng=null,Dh=-1,Vh=0;function sn(){return je&6?gt():Dh!==-1?Dh:Dh=gt()}function Jr(t){return t.mode&1?je&2&&zt!==0?zt&-zt:Bk.transition!==null?(Vh===0&&(Vh=_T()),Vh):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:ST(t.type)),t):1}function ai(t,e,n,i){if(50<lu)throw lu=0,ng=null,Error(Y(185));Ju(t,n,i),(!(je&2)||t!==Dt)&&(t===Dt&&(!(je&2)&&(hf|=n),It===4&&Dr(t,zt)),vn(t,i),n===1&&je===0&&!(e.mode&1)&&(Fa=gt()+500,af&&Ps()))}function vn(t,e){var n=t.callbackNode;Bb(t,e);var i=nd(t,t===Dt?zt:0);if(i===0)n!==null&&Wv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Wv(n),e===1)t.tag===0?zk(D0.bind(null,t)):WT(D0.bind(null,t)),Dk(function(){!(je&6)&&Ps()}),n=null;else{switch(vT(i)){case 1:n=ay;break;case 4:n=gT;break;case 16:n=td;break;case 536870912:n=yT;break;default:n=td}n=UE(n,OE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function OE(t,e){if(Dh=-1,Vh=0,je&6)throw Error(Y(327));var n=t.callbackNode;if(Aa()&&t.callbackNode!==n)return null;var i=nd(t,t===Dt?zt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=wd(t,i);else{e=i;var r=je;je|=2;var o=VE();(Dt!==t||zt!==e)&&(qi=null,Fa=gt()+500,eo(t,e));do try{aR();break}catch(u){DE(t,u)}while(!0);wy(),yd.current=o,je=r,Et!==null?e=0:(Dt=null,zt=0,e=It)}if(e!==0){if(e===2&&(r=bm(t),r!==0&&(i=r,e=ig(t,r))),e===1)throw n=Du,eo(t,0),Dr(t,i),vn(t,gt()),n;if(e===6)Dr(t,i);else{if(r=t.current.alternate,!(i&30)&&!sR(r)&&(e=wd(t,i),e===2&&(o=bm(t),o!==0&&(i=o,e=ig(t,o))),e===1))throw n=Du,eo(t,0),Dr(t,i),vn(t,gt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:Ws(t,mn,qi);break;case 3:if(Dr(t,i),(i&130023424)===i&&(e=Oy+500-gt(),10<e)){if(nd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){sn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Vm(Ws.bind(null,t,mn,qi),e);break}Ws(t,mn,qi);break;case 4:if(Dr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-oi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=gt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*rR(i/1960))-i,10<i){t.timeoutHandle=Vm(Ws.bind(null,t,mn,qi),i);break}Ws(t,mn,qi);break;case 5:Ws(t,mn,qi);break;default:throw Error(Y(329))}}}return vn(t,gt()),t.callbackNode===n?OE.bind(null,t):null}function ig(t,e){var n=au;return t.current.memoizedState.isDehydrated&&(eo(t,e).flags|=256),t=wd(t,e),t!==2&&(e=mn,mn=n,e!==null&&rg(e)),t}function rg(t){mn===null?mn=t:mn.push.apply(mn,t)}function sR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!li(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dr(t,e){for(e&=~My,e&=~hf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oi(e),i=1<<n;t[n]=-1,e&=~i}}function D0(t){if(je&6)throw Error(Y(327));Aa();var e=nd(t,0);if(!(e&1))return vn(t,gt()),null;var n=wd(t,e);if(t.tag!==0&&n===2){var i=bm(t);i!==0&&(e=i,n=ig(t,i))}if(n===1)throw n=Du,eo(t,0),Dr(t,e),vn(t,gt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ws(t,mn,qi),vn(t,gt()),null}function Dy(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(Fa=gt()+500,af&&Ps())}}function co(t){Hr!==null&&Hr.tag===0&&!(je&6)&&Aa();var e=je;je|=1;var n=$n.transition,i=Ge;try{if($n.transition=null,Ge=1,t)return t()}finally{Ge=i,$n.transition=n,je=e,!(je&6)&&Ps()}}function Vy(){En=ya.current,nt(ya)}function eo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ok(n)),Et!==null)for(n=Et.return;n!==null;){var i=n;switch(yy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ad();break;case 3:Va(),nt(yn),nt(Xt),Cy();break;case 5:Sy(i);break;case 4:Va();break;case 13:nt(rt);break;case 19:nt(rt);break;case 10:xy(i.type._context);break;case 22:case 23:Vy()}n=n.return}if(Dt=t,Et=t=es(t.current,null),zt=En=e,It=0,Du=null,My=hf=uo=0,mn=au=null,Qs!==null){for(e=0;e<Qs.length;e++)if(n=Qs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Qs=null}return t}function DE(t,e){do{var n=Et;try{if(wy(),Lh.current=gd,md){for(var i=ot.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}md=!1}if(lo=0,Ot=St=ot=null,su=!1,Lu=0,Ly.current=null,n===null||n.return===null){It=1,Du=e,Et=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=zt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=E0(a);if(T!==null){T.flags&=-257,P0(T,a,u,o,e),T.mode&1&&T0(o,f,e),e=T,h=f;var R=e.updateQueue;if(R===null){var k=new Set;k.add(h),e.updateQueue=k}else R.add(h);break e}else{if(!(e&1)){T0(o,f,e),jy();break e}h=Error(Y(426))}}else if(it&&u.mode&1){var D=E0(a);if(D!==null){!(D.flags&65536)&&(D.flags|=256),P0(D,a,u,o,e),_y(ja(h,u));break e}}o=h=ja(h,u),It!==4&&(It=2),au===null?au=[o]:au.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var I=vE(o,h,e);g0(o,I);break e;case 1:u=h;var P=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Yr===null||!Yr.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var z=wE(o,u,e);g0(o,z);break e}}o=o.return}while(o!==null)}FE(n)}catch(G){e=G,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function VE(){var t=yd.current;return yd.current=gd,t===null?gd:t}function jy(){(It===0||It===3||It===2)&&(It=4),Dt===null||!(uo&268435455)&&!(hf&268435455)||Dr(Dt,zt)}function wd(t,e){var n=je;je|=2;var i=VE();(Dt!==t||zt!==e)&&(qi=null,eo(t,e));do try{oR();break}catch(r){DE(t,r)}while(!0);if(wy(),je=n,yd.current=i,Et!==null)throw Error(Y(261));return Dt=null,zt=0,It}function oR(){for(;Et!==null;)jE(Et)}function aR(){for(;Et!==null&&!Nb();)jE(Et)}function jE(t){var e=BE(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?FE(t):Et=e,Ly.current=null}function FE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eR(n,e),n!==null){n.flags&=32767,Et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,Et=null;return}}else if(n=Jk(n,e,En),n!==null){Et=n;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=t}while(e!==null);It===0&&(It=5)}function Ws(t,e,n){var i=Ge,r=$n.transition;try{$n.transition=null,Ge=1,lR(t,e,n,i)}finally{$n.transition=r,Ge=i}return null}function lR(t,e,n,i){do Aa();while(Hr!==null);if(je&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Ub(t,o),t===Dt&&(Et=Dt=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dh||(dh=!0,UE(td,function(){return Aa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$n.transition,$n.transition=null;var a=Ge;Ge=1;var u=je;je|=4,Ly.current=null,nR(t,n),LE(n,t),Ak(Om),id=!!Mm,Om=Mm=null,t.current=n,iR(n),Lb(),je=u,Ge=a,$n.transition=o}else t.current=n;if(dh&&(dh=!1,Hr=t,vd=r),o=t.pendingLanes,o===0&&(Yr=null),Db(n.stateNode),vn(t,gt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(_d)throw _d=!1,t=tg,tg=null,t;return vd&1&&t.tag!==0&&Aa(),o=t.pendingLanes,o&1?t===ng?lu++:(lu=0,ng=t):lu=0,Ps(),null}function Aa(){if(Hr!==null){var t=vT(vd),e=$n.transition,n=Ge;try{if($n.transition=null,Ge=16>t?16:t,Hr===null)var i=!1;else{if(t=Hr,Hr=null,vd=0,je&6)throw Error(Y(331));var r=je;for(je|=4,he=t.current;he!==null;){var o=he,a=o.child;if(he.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(he=f;he!==null;){var m=he;switch(m.tag){case 0:case 11:case 15:ou(8,m,o)}var g=m.child;if(g!==null)g.return=m,he=g;else for(;he!==null;){m=he;var _=m.sibling,T=m.return;if(kE(m),m===f){he=null;break}if(_!==null){_.return=T,he=_;break}he=T}}}var R=o.alternate;if(R!==null){var k=R.child;if(k!==null){R.child=null;do{var D=k.sibling;k.sibling=null,k=D}while(k!==null)}}he=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,he=a;else e:for(;he!==null;){if(o=he,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ou(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,he=I;break e}he=o.return}}var P=t.current;for(he=P;he!==null;){a=he;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,he=C;else e:for(a=P;he!==null;){if(u=he,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:cf(9,u)}}catch(G){dt(u,u.return,G)}if(u===a){he=null;break e}var z=u.sibling;if(z!==null){z.return=u.return,he=z;break e}he=u.return}}if(je=r,Ps(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(tf,t)}catch{}i=!0}return i}finally{Ge=n,$n.transition=e}}return!1}function V0(t,e,n){e=ja(n,e),e=vE(t,e,1),t=Xr(t,e,1),e=sn(),t!==null&&(Ju(t,1,e),vn(t,e))}function dt(t,e,n){if(t.tag===3)V0(t,t,n);else for(;e!==null;){if(e.tag===3){V0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Yr===null||!Yr.has(i))){t=ja(n,t),t=wE(e,t,1),e=Xr(e,t,1),t=sn(),e!==null&&(Ju(e,1,t),vn(e,t));break}}e=e.return}}function uR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(zt&n)===n&&(It===4||It===3&&(zt&130023424)===zt&&500>gt()-Oy?eo(t,0):My|=n),vn(t,e)}function zE(t,e){e===0&&(t.mode&1?(e=nh,nh<<=1,!(nh&130023424)&&(nh=4194304)):e=1);var n=sn();t=or(t,e),t!==null&&(Ju(t,e,n),vn(t,n))}function cR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zE(t,n)}function hR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),zE(t,n)}var BE;BE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gn=!1,Yk(t,e,n);gn=!!(t.flags&131072)}else gn=!1,it&&e.flags&1048576&&$T(e,cd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Oh(t,e),t=e.pendingProps;var r=Ma(e,Xt.current);Ia(e,n),r=Ay(null,e,i,t,r,n);var o=by();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(i)?(o=!0,ld(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ey(e),r.updater=uf,e.stateNode=r,r._reactInternals=e,Wm(e,i,t,n),e=Gm(null,e,i,!0,o,n)):(e.tag=0,it&&o&&gy(e),rn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Oh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=fR(i),t=ei(i,t),r){case 0:e=qm(null,e,i,t,n);break e;case 1:e=I0(null,e,i,t,n);break e;case 11:e=S0(null,e,i,t,n);break e;case 14:e=C0(null,e,i,ei(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),qm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),I0(t,e,i,r,n);case 3:e:{if(PE(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,r=o.element,XT(t,e),fd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=ja(Error(Y(423)),e),e=A0(t,e,i,n,r);break e}else if(i!==r){r=ja(Error(Y(424)),e),e=A0(t,e,i,n,r);break e}else for(Pn=Qr(e.stateNode.containerInfo.firstChild),Sn=e,it=!0,ni=null,n=KT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oa(),i===r){e=ar(t,e,n);break e}rn(t,e,i,n)}e=e.child}return e;case 5:return YT(e),t===null&&Bm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Dm(i,r)?a=null:o!==null&&Dm(i,o)&&(e.flags|=32),EE(t,e),rn(t,e,a,n),e.child;case 6:return t===null&&Bm(e),null;case 13:return SE(t,e,n);case 4:return Py(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Da(e,null,i,n):rn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),S0(t,e,i,r,n);case 7:return rn(t,e,e.pendingProps,n),e.child;case 8:return rn(t,e,e.pendingProps.children,n),e.child;case 12:return rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Qe(hd,i._currentValue),i._currentValue=a,o!==null)if(li(o.value,a)){if(o.children===r.children&&!yn.current){e=ar(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=er(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Um(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Y(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Um(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}rn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ia(e,n),r=qn(r),i=i(r),e.flags|=1,rn(t,e,i,n),e.child;case 14:return i=e.type,r=ei(i,e.pendingProps),r=ei(i.type,r),C0(t,e,i,r,n);case 15:return xE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),Oh(t,e),e.tag=1,_n(i)?(t=!0,ld(e)):t=!1,Ia(e,n),_E(e,i,r),Wm(e,i,r,n),Gm(null,e,i,!0,t,n);case 19:return CE(t,e,n);case 22:return TE(t,e,n)}throw Error(Y(156,e.tag))};function UE(t,e){return mT(t,e)}function dR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,i){return new dR(t,e,n,i)}function Fy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fR(t){if(typeof t=="function")return Fy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ry)return 11;if(t===sy)return 14}return 2}function es(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Fy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case aa:return to(n.children,r,o,e);case iy:a=8,r|=8;break;case pm:return t=Wn(12,n,e,r|2),t.elementType=pm,t.lanes=o,t;case mm:return t=Wn(13,n,e,r),t.elementType=mm,t.lanes=o,t;case gm:return t=Wn(19,n,e,r),t.elementType=gm,t.lanes=o,t;case Y1:return df(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q1:a=10;break e;case X1:a=9;break e;case ry:a=11;break e;case sy:a=14;break e;case Nr:a=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Wn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function to(t,e,n,i){return t=Wn(7,t,i,e),t.lanes=n,t}function df(t,e,n,i){return t=Wn(22,t,i,e),t.elementType=Y1,t.lanes=n,t.stateNode={isHidden:!1},t}function Lp(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function Mp(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pR(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pp(0),this.expirationTimes=pp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zy(t,e,n,i,r,o,a,u,h){return t=new pR(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Wn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ey(o),t}function mR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oa,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function HE(t){if(!t)return ds;t=t._reactInternals;e:{if(_o(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(_n(n))return HT(t,n,e)}return e}function WE(t,e,n,i,r,o,a,u,h){return t=zy(n,i,!0,t,r,o,a,u,h),t.context=HE(null),n=t.current,i=sn(),r=Jr(n),o=er(i,r),o.callback=e??null,Xr(n,o,r),t.current.lanes=r,Ju(t,r,i),vn(t,i),t}function ff(t,e,n,i){var r=e.current,o=sn(),a=Jr(r);return n=HE(n),e.context===null?e.context=n:e.pendingContext=n,e=er(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Xr(r,e,a),t!==null&&(ai(t,r,a,o),Nh(t,r,a)),a}function xd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function j0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function By(t,e){j0(t,e),(t=t.alternate)&&j0(t,e)}function gR(){return null}var $E=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uy(t){this._internalRoot=t}pf.prototype.render=Uy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));ff(t,e,null,null)};pf.prototype.unmount=Uy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;co(function(){ff(null,t,null,null)}),e[sr]=null}};function pf(t){this._internalRoot=t}pf.prototype.unstable_scheduleHydration=function(t){if(t){var e=TT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Or.length&&e!==0&&e<Or[n].priority;n++);Or.splice(n,0,t),n===0&&PT(t)}};function Hy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function F0(){}function yR(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=xd(a);o.call(f)}}var a=WE(e,i,t,0,null,!1,!1,"",F0);return t._reactRootContainer=a,t[sr]=a.current,Au(t.nodeType===8?t.parentNode:t),co(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=xd(h);u.call(f)}}var h=zy(t,0,!1,null,null,!1,!1,"",F0);return t._reactRootContainer=h,t[sr]=h.current,Au(t.nodeType===8?t.parentNode:t),co(function(){ff(e,h,n,i)}),h}function gf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=xd(a);u.call(h)}}ff(e,a,t,r)}else a=yR(n,e,t,r,i);return xd(a)}wT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gl(e.pendingLanes);n!==0&&(ly(e,n|1),vn(e,gt()),!(je&6)&&(Fa=gt()+500,Ps()))}break;case 13:co(function(){var i=or(t,1);if(i!==null){var r=sn();ai(i,t,1,r)}}),By(t,1)}};uy=function(t){if(t.tag===13){var e=or(t,134217728);if(e!==null){var n=sn();ai(e,t,134217728,n)}By(t,134217728)}};xT=function(t){if(t.tag===13){var e=Jr(t),n=or(t,e);if(n!==null){var i=sn();ai(n,t,e,i)}By(t,e)}};TT=function(){return Ge};ET=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Cm=function(t,e,n){switch(e){case"input":if(vm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=of(i);if(!r)throw Error(Y(90));eT(i),vm(i,r)}}}break;case"textarea":nT(t,n);break;case"select":e=n.value,e!=null&&Ea(t,!!n.multiple,e,!1)}};uT=Dy;cT=co;var _R={usingClientEntryPoint:!1,Events:[tc,ha,of,aT,lT,Dy]},Ul={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vR={bundleType:Ul.bundleType,version:Ul.version,rendererPackageName:Ul.rendererPackageName,rendererConfig:Ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fT(t),t===null?null:t.stateNode},findFiberByHostInstance:Ul.findFiberByHostInstance||gR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fh.isDisabled&&fh.supportsFiber)try{tf=fh.inject(vR),xi=fh}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_R;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hy(e))throw Error(Y(200));return mR(t,e,null,n)};bn.createRoot=function(t,e){if(!Hy(t))throw Error(Y(299));var n=!1,i="",r=$E;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=zy(t,1,!1,null,null,n,!1,i,r),t[sr]=e.current,Au(t.nodeType===8?t.parentNode:t),new Uy(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=fT(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return co(t)};bn.hydrate=function(t,e,n){if(!mf(e))throw Error(Y(200));return gf(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!Hy(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=$E;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=WE(e,null,t,1,n??null,r,!1,o,a),t[sr]=e.current,Au(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new pf(e)};bn.render=function(t,e,n){if(!mf(e))throw Error(Y(200));return gf(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!mf(t))throw Error(Y(40));return t._reactRootContainer?(co(function(){gf(null,null,t,!1,function(){t._reactRootContainer=null,t[sr]=null})}),!0):!1};bn.unstable_batchedUpdates=Dy;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!mf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return gf(t,e,n,!1,i)};bn.version="18.3.1-next-f1338f8080-20240426";function qE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qE)}catch(t){console.error(t)}}qE(),q1.exports=bn;var wR=q1.exports,z0=wR;dm.createRoot=z0.createRoot,dm.hydrateRoot=z0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vu(){return Vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vu.apply(this,arguments)}var Wr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wr||(Wr={}));const B0="popstate";function xR(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=vo(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),sg("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:Td(o))}function i(r,o){yf(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return ER(e,n,i,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TR(){return Math.random().toString(36).substr(2,8)}function U0(t,e){return{usr:t.state,key:t.key,idx:e}}function sg(t,e,n,i){return n===void 0&&(n=null),Vu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vo(e):e,{state:n,key:e&&e.key||i||TR()})}function Td(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function ER(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Wr.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(Vu({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Wr.Pop;let D=m(),I=D==null?null:D-f;f=D,h&&h({action:u,location:k.location,delta:I})}function _(D,I){u=Wr.Push;let P=sg(k.location,D,I);n&&n(P,D),f=m()+1;let C=U0(P,f),z=k.createHref(P);try{a.pushState(C,"",z)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(z)}o&&h&&h({action:u,location:k.location,delta:1})}function T(D,I){u=Wr.Replace;let P=sg(k.location,D,I);n&&n(P,D),f=m();let C=U0(P,f),z=k.createHref(P);a.replaceState(C,"",z),o&&h&&h({action:u,location:k.location,delta:0})}function R(D){let I=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof D=="string"?D:Td(D);return P=P.replace(/ $/,"%20"),at(I,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,I)}let k={get action(){return u},get location(){return t(r,a)},listen(D){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(B0,g),h=D,()=>{r.removeEventListener(B0,g),h=null}},createHref(D){return e(r,D)},createURL:R,encodeLocation(D){let I=R(D);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:_,replace:T,go(D){return a.go(D)}};return k}var H0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(H0||(H0={}));function PR(t,e,n){return n===void 0&&(n="/"),SR(t,e,n)}function SR(t,e,n,i){let r=typeof e=="string"?vo(e):e,o=za(r.pathname||"/",n);if(o==null)return null;let a=GE(t);CR(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=VR(o);u=OR(a[h],f)}return u}function GE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(at(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=ts([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(at(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),GE(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:LR(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of ZE(o.path))r(o,a,h)}),e}function ZE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=ZE(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function CR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const IR=/^:[\w-]+$/,AR=3,bR=2,kR=1,RR=10,NR=-2,W0=t=>t==="*";function LR(t,e){let n=t.split("/"),i=n.length;return n.some(W0)&&(i+=NR),e&&(i+=bR),n.filter(r=>!W0(r)).reduce((r,o)=>r+(IR.test(o)?AR:o===""?kR:RR),i)}function MR(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function OR(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=og({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),_=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:ts([o,g.pathname]),pathnameBase:UR(ts([o,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(o=ts([o,g.pathnameBase]))}return a}function og(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=DR(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:_,isOptional:T}=m;if(_==="*"){let k=u[g]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const R=u[g];return T&&!R?f[_]=void 0:f[_]=(R||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function DR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function VR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function za(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const jR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FR=t=>jR.test(t);function zR(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?vo(t):t,o;if(n)if(FR(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),yf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=$0(n.substring(1),"/"):o=$0(n,e)}else o=e;return{pathname:o,search:HR(i),hash:WR(r)}}function $0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Op(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wy(t,e){let n=BR(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function $y(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=vo(t):(r=Vu({},t),at(!r.pathname||!r.pathname.includes("?"),Op("?","pathname","search",r)),at(!r.pathname||!r.pathname.includes("#"),Op("#","pathname","hash",r)),at(!r.search||!r.search.includes("#"),Op("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}u=g>=0?e[g]:"/"}let h=zR(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const ts=t=>t.join("/").replace(/\/\/+/g,"/"),UR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $R(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const KE=["post","put","patch","delete"];new Set(KE);const qR=["get",...KE];new Set(qR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ju(){return ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ju.apply(this,arguments)}const _f=V.createContext(null),QE=V.createContext(null),mr=V.createContext(null),vf=V.createContext(null),Ss=V.createContext({outlet:null,matches:[],isDataRoute:!1}),XE=V.createContext(null);function GR(t,e){let{relative:n}=e===void 0?{}:e;el()||at(!1);let{basename:i,navigator:r}=V.useContext(mr),{hash:o,pathname:a,search:u}=xf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:ts([i,a])),r.createHref({pathname:h,search:u,hash:o})}function el(){return V.useContext(vf)!=null}function wo(){return el()||at(!1),V.useContext(vf).location}function YE(t){V.useContext(mr).static||V.useLayoutEffect(t)}function wf(){let{isDataRoute:t}=V.useContext(Ss);return t?o2():ZR()}function ZR(){el()||at(!1);let t=V.useContext(_f),{basename:e,future:n,navigator:i}=V.useContext(mr),{matches:r}=V.useContext(Ss),{pathname:o}=wo(),a=JSON.stringify(Wy(r,n.v7_relativeSplatPath)),u=V.useRef(!1);return YE(()=>{u.current=!0}),V.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=$y(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ts([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function xf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=V.useContext(mr),{matches:r}=V.useContext(Ss),{pathname:o}=wo(),a=JSON.stringify(Wy(r,i.v7_relativeSplatPath));return V.useMemo(()=>$y(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function KR(t,e){return QR(t,e)}function QR(t,e,n,i){el()||at(!1);let{navigator:r}=V.useContext(mr),{matches:o}=V.useContext(Ss),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=wo(),m;if(e){var g;let D=typeof e=="string"?vo(e):e;h==="/"||(g=D.pathname)!=null&&g.startsWith(h)||at(!1),m=D}else m=f;let _=m.pathname||"/",T=_;if(h!=="/"){let D=h.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(D.length).join("/")}let R=PR(t,{pathname:T}),k=t2(R&&R.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:ts([h,r.encodeLocation?r.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:ts([h,r.encodeLocation?r.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),o,n,i);return e&&k?V.createElement(vf.Provider,{value:{location:ju({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Wr.Pop}},k):k}function XR(){let t=s2(),e=$R(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:r},n):null,null)}const YR=V.createElement(XR,null);class JR extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(Ss.Provider,{value:this.props.routeContext},V.createElement(XE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e2(t){let{routeContext:e,match:n,children:i}=t,r=V.useContext(_f);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(Ss.Provider,{value:e},i)}function t2(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||at(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:_,errors:T}=n,R=g.route.loader&&_[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||R){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let T,R=!1,k=null,D=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||YR,h&&(f<0&&_===0?(a2("route-fallback"),R=!0,D=null):f===_&&(R=!0,D=g.route.hydrateFallbackElement||null)));let I=e.concat(a.slice(0,_+1)),P=()=>{let C;return T?C=k:R?C=D:g.route.Component?C=V.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=m,V.createElement(e2,{match:g,routeContext:{outlet:m,matches:I,isDataRoute:n!=null},children:C})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?V.createElement(JR,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:P(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):P()},null)}var JE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(JE||{}),eP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(eP||{});function n2(t){let e=V.useContext(_f);return e||at(!1),e}function i2(t){let e=V.useContext(QE);return e||at(!1),e}function r2(t){let e=V.useContext(Ss);return e||at(!1),e}function tP(t){let e=r2(),n=e.matches[e.matches.length-1];return n.route.id||at(!1),n.route.id}function s2(){var t;let e=V.useContext(XE),n=i2(),i=tP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function o2(){let{router:t}=n2(JE.UseNavigateStable),e=tP(eP.UseNavigateStable),n=V.useRef(!1);return YE(()=>{n.current=!0}),V.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,ju({fromRouteId:e},o)))},[t,e])}const q0={};function a2(t,e,n){q0[t]||(q0[t]=!0)}function l2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function nP(t){let{to:e,replace:n,state:i,relative:r}=t;el()||at(!1);let{future:o,static:a}=V.useContext(mr),{matches:u}=V.useContext(Ss),{pathname:h}=wo(),f=wf(),m=$y(e,Wy(u,o.v7_relativeSplatPath),h,r==="path"),g=JSON.stringify(m);return V.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function kr(t){at(!1)}function u2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Wr.Pop,navigator:o,static:a=!1,future:u}=t;el()&&at(!1);let h=e.replace(/^\/*/,"/"),f=V.useMemo(()=>({basename:h,navigator:o,static:a,future:ju({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=vo(i));let{pathname:m="/",search:g="",hash:_="",state:T=null,key:R="default"}=i,k=V.useMemo(()=>{let D=za(m,h);return D==null?null:{location:{pathname:D,search:g,hash:_,state:T,key:R},navigationType:r}},[h,m,g,_,T,R,r]);return k==null?null:V.createElement(mr.Provider,{value:f},V.createElement(vf.Provider,{children:n,value:k}))}function c2(t){let{children:e,location:n}=t;return KR(ag(e),n)}new Promise(()=>{});function ag(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(i,r)=>{if(!V.isValidElement(i))return;let o=[...e,r];if(i.type===V.Fragment){n.push.apply(n,ag(i.props.children,o));return}i.type!==kr&&at(!1),!i.props.index||!i.props.children||at(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=ag(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ed.apply(this,arguments)}function iP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function h2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function d2(t,e){return t.button===0&&(!e||e==="_self")&&!h2(t)}const f2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],m2="6";try{window.__reactRouterVersion=m2}catch{}const g2=V.createContext({isTransitioning:!1}),y2="startTransition",G0=ub[y2];function _2(t){let{basename:e,children:n,future:i,window:r}=t,o=V.useRef();o.current==null&&(o.current=xR({window:r,v5Compat:!0}));let a=o.current,[u,h]=V.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=V.useCallback(g=>{f&&G0?G0(()=>h(g)):h(g)},[h,f]);return V.useLayoutEffect(()=>a.listen(m),[a,m]),V.useEffect(()=>l2(i),[i]),V.createElement(u2,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const v2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,x2=V.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,_=iP(e,f2),{basename:T}=V.useContext(mr),R,k=!1;if(typeof f=="string"&&w2.test(f)&&(R=f,v2))try{let C=new URL(window.location.href),z=f.startsWith("//")?new URL(C.protocol+f):new URL(f),G=za(z.pathname,T);z.origin===C.origin&&G!=null?f=G+z.search+z.hash:k=!0}catch{}let D=GR(f,{relative:r}),I=P2(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function P(C){i&&i(C),C.defaultPrevented||I(C)}return V.createElement("a",Ed({},_,{href:R||D,onClick:k||o?i:P,ref:n,target:h}))}),T2=V.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=iP(e,p2),_=xf(h,{relative:g.relative}),T=wo(),R=V.useContext(QE),{navigator:k,basename:D}=V.useContext(mr),I=R!=null&&S2(_)&&f===!0,P=k.encodeLocation?k.encodeLocation(_).pathname:_.pathname,C=T.pathname,z=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;r||(C=C.toLowerCase(),z=z?z.toLowerCase():null,P=P.toLowerCase()),z&&D&&(z=za(z,D)||z);const G=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let U=C===P||!a&&C.startsWith(P)&&C.charAt(G)==="/",b=z!=null&&(z===P||!a&&z.startsWith(P)&&z.charAt(P.length)==="/"),S={isActive:U,isPending:b,isTransitioning:I},N=U?i:void 0,O;typeof o=="function"?O=o(S):O=[o,U?"active":null,b?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(S):u;return V.createElement(x2,Ed({},g,{"aria-current":N,className:O,ref:n,style:j,to:h,viewTransition:f}),typeof m=="function"?m(S):m)});var lg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lg||(lg={}));var Z0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Z0||(Z0={}));function E2(t){let e=V.useContext(_f);return e||at(!1),e}function P2(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=wf(),f=wo(),m=xf(t,{relative:a});return V.useCallback(g=>{if(d2(g,n)){g.preventDefault();let _=i!==void 0?i:Td(f)===Td(m);h(t,{replace:_,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function S2(t,e){e===void 0&&(e={});let n=V.useContext(g2);n==null&&at(!1);let{basename:i}=E2(lg.useViewTransitionState),r=xf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=za(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=za(n.nextLocation.pathname,i)||n.nextLocation.pathname;return og(r.pathname,a)!=null||og(r.pathname,o)!=null}const rP=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Tf=V.createContext({}),Ef=V.createContext(null),Pf=typeof document<"u",qy=Pf?V.useLayoutEffect:V.useEffect,sP=V.createContext({strict:!1}),Gy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),C2="framerAppearId",oP="data-"+Gy(C2);function I2(t,e,n,i){const{visualElement:r}=V.useContext(Tf),o=V.useContext(sP),a=V.useContext(Ef),u=V.useContext(rP).reducedMotion,h=V.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;V.useInsertionEffect(()=>{f&&f.update(n,a)});const m=V.useRef(!!(n[oP]&&!window.HandoffComplete));return qy(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),V.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function _a(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function A2(t,e,n){return V.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):_a(n)&&(n.current=i))},[e])}function Fu(t){return typeof t=="string"||Array.isArray(t)}function Sf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Zy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ky=["initial",...Zy];function Cf(t){return Sf(t.animate)||Ky.some(e=>Fu(t[e]))}function aP(t){return!!(Cf(t)||t.variants)}function b2(t,e){if(Cf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Fu(n)?n:void 0,animate:Fu(i)?i:void 0}}return t.inherit!==!1?e:{}}function k2(t){const{initial:e,animate:n}=b2(t,V.useContext(Tf));return V.useMemo(()=>({initial:e,animate:n}),[K0(e),K0(n)])}function K0(t){return Array.isArray(t)?t.join(" "):t}const Q0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zu={};for(const t in Q0)zu[t]={isEnabled:e=>Q0[t].some(n=>!!e[n])};function R2(t){for(const e in t)zu[e]={...zu[e],...t[e]}}const Qy=V.createContext({}),lP=V.createContext({}),N2=Symbol.for("motionComponentSymbol");function L2({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&R2(t);function o(u,h){let f;const m={...V.useContext(rP),...u,layoutId:M2(u)},{isStatic:g}=m,_=k2(u),T=i(u,g);if(!g&&Pf){_.visualElement=I2(r,T,m,e);const R=V.useContext(lP),k=V.useContext(sP).strict;_.visualElement&&(f=_.visualElement.loadFeatures(m,k,t,R))}return V.createElement(Tf.Provider,{value:_},f&&_.visualElement?V.createElement(f,{visualElement:_.visualElement,...m}):null,n(r,u,A2(T,_.visualElement,h),T,g,_.visualElement))}const a=V.forwardRef(o);return a[N2]=r,a}function M2({layoutId:t}){const e=V.useContext(Qy).id;return e&&t!==void 0?e+"-"+t:t}function O2(t){function e(i,r={}){return L2(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const D2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xy(t){return typeof t!="string"||t.includes("-")?!1:!!(D2.indexOf(t)>-1||/[A-Z]/.test(t))}const Pd={};function V2(t){Object.assign(Pd,t)}const ic=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xo=new Set(ic);function uP(t,{layout:e,layoutId:n}){return xo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Pd[t]||t==="opacity")}const wn=t=>!!(t&&t.getVelocity),j2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},F2=ic.length;function z2(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<F2;a++){const u=ic[a];if(t[u]!==void 0){const h=j2[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const cP=t=>e=>typeof e=="string"&&e.startsWith(t),hP=cP("--"),ug=cP("var(--"),B2=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,U2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,fs=(t,e,n)=>Math.min(Math.max(n,t),e),To={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},uu={...To,transform:t=>fs(0,1,t)},ph={...To,default:1},cu=t=>Math.round(t*1e5)/1e5,If=/(-)?([\d]*\.?[\d])+/g,dP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,H2=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function rc(t){return typeof t=="string"}const sc=t=>({test:e=>rc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rr=sc("deg"),Ei=sc("%"),ve=sc("px"),W2=sc("vh"),$2=sc("vw"),X0={...Ei,parse:t=>Ei.parse(t)/100,transform:t=>Ei.transform(t*100)},Y0={...To,transform:Math.round},fP={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,size:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,rotate:Rr,rotateX:Rr,rotateY:Rr,rotateZ:Rr,scale:ph,scaleX:ph,scaleY:ph,scaleZ:ph,skew:Rr,skewX:Rr,skewY:Rr,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:uu,originX:X0,originY:X0,originZ:ve,zIndex:Y0,fillOpacity:uu,strokeOpacity:uu,numOctaves:Y0};function Yy(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const _=e[g];if(hP(g)){o[g]=_;continue}const T=fP[g],R=U2(_,T);if(xo.has(g)){if(h=!0,a[g]=R,!m)continue;_!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=R):r[g]=R}if(e.transform||(h||i?r.transform=z2(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:_="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${_} ${T}`}}const Jy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function pP(t,e,n){for(const i in e)!wn(e[i])&&!uP(i,n)&&(t[i]=e[i])}function q2({transformTemplate:t},e,n){return V.useMemo(()=>{const i=Jy();return Yy(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function G2(t,e,n){const i=t.style||{},r={};return pP(r,i,t),Object.assign(r,q2(t,e,n)),t.transformValues?t.transformValues(r):r}function Z2(t,e,n){const i={},r=G2(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const K2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||K2.has(t)}let mP=t=>!Sd(t);function Q2(t){t&&(mP=e=>e.startsWith("on")?!Sd(e):t(e))}try{Q2(require("@emotion/is-prop-valid").default)}catch{}function X2(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(mP(r)||n===!0&&Sd(r)||!e&&!Sd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function J0(t,e,n){return typeof t=="string"?t:ve.transform(e+n*t)}function Y2(t,e,n){const i=J0(e,t.x,t.width),r=J0(n,t.y,t.height);return`${i} ${r}`}const J2={offset:"stroke-dashoffset",array:"stroke-dasharray"},eN={offset:"strokeDashoffset",array:"strokeDasharray"};function tN(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?J2:eN;t[o.offset]=ve.transform(-i);const a=ve.transform(e),u=ve.transform(n);t[o.array]=`${a} ${u}`}function e_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,_){if(Yy(t,f,m,_),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:R,dimensions:k}=t;T.transform&&(k&&(R.transform=T.transform),delete T.transform),k&&(r!==void 0||o!==void 0||R.transform)&&(R.transformOrigin=Y2(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&tN(T,a,u,h,!1)}const gP=()=>({...Jy(),attrs:{}}),t_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function nN(t,e,n,i){const r=V.useMemo(()=>{const o=gP();return e_(o,e,{enableHardwareAcceleration:!1},t_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};pP(o,t.style,t),r.style={...o,...r.style}}return r}function iN(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Xy(n)?nN:Z2)(i,o,a,n),m={...X2(i,typeof n=="string",t),...h,ref:r},{children:g}=i,_=V.useMemo(()=>wn(g)?g.get():g,[g]);return V.createElement(n,{...m,children:_})}}function yP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const _P=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vP(t,e,n,i){yP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(_P.has(r)?r:Gy(r),e.attrs[r])}function n_(t,e){const{style:n}=t,i={};for(const r in n)(wn(n[r])||e.style&&wn(e.style[r])||uP(r,t))&&(i[r]=n[r]);return i}function wP(t,e){const n=n_(t,e);for(const i in t)if(wn(t[i])||wn(e[i])){const r=ic.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function i_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function xP(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const Cd=t=>Array.isArray(t),rN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),sN=t=>Cd(t)?t[t.length-1]||0:t;function Fh(t){const e=wn(t)?t.get():t;return rN(e)?e.toValue():e}function oN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:aN(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const TP=t=>(e,n)=>{const i=V.useContext(Tf),r=V.useContext(Ef),o=()=>oN(t,e,i,r);return n?o():xP(o)};function aN(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Fh(o[_]);let{initial:a,animate:u}=t;const h=Cf(t),f=aP(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Sf(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const R=i_(t,T);if(!R)return;const{transitionEnd:k,transition:D,...I}=R;for(const P in I){let C=I[P];if(Array.isArray(C)){const z=m?C.length-1:0;C=C[z]}C!==null&&(r[P]=C)}for(const P in k)r[P]=k[P]}),r}const yt=t=>t;class ew{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function lN(t){let e=new ew,n=new ew,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,_=g?e:n;return f&&a.add(h),_.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const mh=["prepare","read","update","preRender","render","postRender"],uN=40;function cN(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=mh.reduce((g,_)=>(g[_]=lN(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,uN),1),r.timestamp=g,r.isProcessing=!0,mh.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:mh.reduce((g,_)=>{const T=o[_];return g[_]=(R,k=!1,D=!1)=>(n||h(),T.schedule(R,k,D)),g},{}),cancel:g=>mh.forEach(_=>o[_].cancel(g)),state:r,steps:o}}const{schedule:Xe,cancel:lr,state:Gt,steps:Dp}=cN(typeof requestAnimationFrame<"u"?requestAnimationFrame:yt,!0),hN={useVisualState:TP({scrapeMotionValuesFromProps:wP,createRenderState:gP,onMount:(t,e,{renderState:n,latestValues:i})=>{Xe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Xe.render(()=>{e_(n,i,{enableHardwareAcceleration:!1},t_(e.tagName),t.transformTemplate),vP(e,n)})}})},dN={useVisualState:TP({scrapeMotionValuesFromProps:n_,createRenderState:Jy})};function fN(t,{forwardMotionProps:e=!1},n,i){return{...Xy(t)?hN:dN,preloadedFeatures:n,useRender:iN(e),createVisualElement:i,Component:t}}function Qi(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const EP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Af(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const pN=t=>e=>EP(e)&&t(e,Af(e));function tr(t,e,n,i){return Qi(t,e,pN(n),i)}const mN=(t,e)=>n=>e(t(n)),ns=(...t)=>t.reduce(mN);function PP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const tw=PP("dragHorizontal"),nw=PP("dragVertical");function SP(t){let e=!1;if(t==="y")e=nw();else if(t==="x")e=tw();else{const n=tw(),i=nw();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function CP(){const t=SP(!0);return t?(t(),!1):!0}class Cs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function iw(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||CP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&Xe.update(()=>u[i](o,a))};return tr(t.current,n,r,{passive:!t.getProps()[i]})}class gN extends Cs{mount(){this.unmount=ns(iw(this.node,!0),iw(this.node,!1))}unmount(){}}class yN extends Cs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ns(Qi(this.node.current,"focus",()=>this.onFocus()),Qi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const IP=(t,e)=>e?t===e?!0:IP(t,e.parentElement):!1;function Vp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Af(n))}class _N extends Cs{constructor(){super(...arguments),this.removeStartListeners=yt,this.removeEndListeners=yt,this.removeAccessibleListeners=yt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=tr(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Xe.update(()=>{!g&&!IP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=tr(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=ns(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Vp("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&Xe.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=Qi(this.node.current,"keyup",a),Vp("down",(u,h)=>{this.startPress(u,h)})},n=Qi(this.node.current,"keydown",e),i=()=>{this.isPressing&&Vp("cancel",(o,a)=>this.cancelPress(o,a))},r=Qi(this.node.current,"blur",i);this.removeAccessibleListeners=ns(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Xe.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!CP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Xe.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=tr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Qi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ns(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const cg=new WeakMap,jp=new WeakMap,vN=t=>{const e=cg.get(t.target);e&&e(t)},wN=t=>{t.forEach(vN)};function xN({root:t,...e}){const n=t||document;jp.has(n)||jp.set(n,{});const i=jp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(wN,{root:t,...e})),i[r]}function TN(t,e,n){const i=xN(e);return cg.set(t,n),i.observe(t),()=>{cg.delete(t),i.unobserve(t)}}const EN={some:0,all:1};class PN extends Cs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:EN[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(h)};return TN(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(SN(e,n))&&this.startObserver()}unmount(){}}function SN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const CN={inView:{Feature:PN},tap:{Feature:_N},focus:{Feature:yN},hover:{Feature:gN}};function AP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function IN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function AN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function bf(t,e,n){const i=t.getProps();return i_(i,e,n!==void 0?n:i.custom,IN(t),AN(t))}let r_=yt;const no=t=>t*1e3,nr=t=>t/1e3,bN={current:!1},bP=t=>Array.isArray(t)&&typeof t[0]=="number";function kP(t){return!!(!t||typeof t=="string"&&RP[t]||bP(t)||Array.isArray(t)&&t.every(kP))}const Kl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,RP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kl([0,.65,.55,1]),circOut:Kl([.55,0,1,.45]),backIn:Kl([.31,.01,.66,-.59]),backOut:Kl([.33,1.53,.69,.99])};function NP(t){if(t)return bP(t)?Kl(t):Array.isArray(t)?t.map(NP):RP[t]}function kN(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=NP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function RN(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const LP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,NN=1e-7,LN=12;function MN(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=LP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>NN&&++u<LN);return a}function oc(t,e,n,i){if(t===e&&n===i)return yt;const r=o=>MN(o,0,1,t,n);return o=>o===0||o===1?o:LP(r(o),e,i)}const ON=oc(.42,0,1,1),DN=oc(0,0,.58,1),MP=oc(.42,0,.58,1),VN=t=>Array.isArray(t)&&typeof t[0]!="number",OP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,DP=t=>e=>1-t(1-e),s_=t=>1-Math.sin(Math.acos(t)),VP=DP(s_),jN=OP(s_),jP=oc(.33,1.53,.69,.99),o_=DP(jP),FN=OP(o_),zN=t=>(t*=2)<1?.5*o_(t):.5*(2-Math.pow(2,-10*(t-1))),BN={linear:yt,easeIn:ON,easeInOut:MP,easeOut:DN,circIn:s_,circInOut:jN,circOut:VP,backIn:o_,backInOut:FN,backOut:jP,anticipate:zN},rw=t=>{if(Array.isArray(t)){r_(t.length===4);const[e,n,i,r]=t;return oc(e,n,i,r)}else if(typeof t=="string")return BN[t];return t},a_=(t,e)=>n=>!!(rc(n)&&H2.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),FP=(t,e,n)=>i=>{if(!rc(i))return i;const[r,o,a,u]=i.match(If);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},UN=t=>fs(0,255,t),Fp={...To,transform:t=>Math.round(UN(t))},Ys={test:a_("rgb","red"),parse:FP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Fp.transform(t)+", "+Fp.transform(e)+", "+Fp.transform(n)+", "+cu(uu.transform(i))+")"};function HN(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const hg={test:a_("#"),parse:HN,transform:Ys.transform},va={test:a_("hsl","hue"),parse:FP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ei.transform(cu(e))+", "+Ei.transform(cu(n))+", "+cu(uu.transform(i))+")"},nn={test:t=>Ys.test(t)||hg.test(t)||va.test(t),parse:t=>Ys.test(t)?Ys.parse(t):va.test(t)?va.parse(t):hg.parse(t),transform:t=>rc(t)?t:t.hasOwnProperty("red")?Ys.transform(t):va.transform(t)},st=(t,e,n)=>-n*t+n*e+t;function zp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function WN({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=zp(h,u,t+1/3),o=zp(h,u,t),a=zp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Bp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},$N=[hg,Ys,va],qN=t=>$N.find(e=>e.test(t));function sw(t){const e=qN(t);let n=e.parse(t);return e===va&&(n=WN(n)),n}const zP=(t,e)=>{const n=sw(t),i=sw(e),r={...n};return o=>(r.red=Bp(n.red,i.red,o),r.green=Bp(n.green,i.green,o),r.blue=Bp(n.blue,i.blue,o),r.alpha=st(n.alpha,i.alpha,o),Ys.transform(r))};function GN(t){var e,n;return isNaN(t)&&rc(t)&&(((e=t.match(If))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(dP))===null||n===void 0?void 0:n.length)||0)>0}const BP={regex:B2,countKey:"Vars",token:"${v}",parse:yt},UP={regex:dP,countKey:"Colors",token:"${c}",parse:nn.parse},HP={regex:If,countKey:"Numbers",token:"${n}",parse:To.parse};function Up(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Id(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Up(n,BP),Up(n,UP),Up(n,HP),n}function WP(t){return Id(t).values}function $P(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Id(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(BP.token,a[h]):h<i+n?u=u.replace(UP.token,nn.transform(a[h])):u=u.replace(HP.token,cu(a[h]));return u}}const ZN=t=>typeof t=="number"?0:t;function KN(t){const e=WP(t);return $P(t)(e.map(ZN))}const ps={test:GN,parse:WP,createTransformer:$P,getAnimatableNone:KN},qP=(t,e)=>n=>`${n>0?e:t}`;function GP(t,e){return typeof t=="number"?n=>st(t,e,n):nn.test(t)?zP(t,e):t.startsWith("var(")?qP(t,e):KP(t,e)}const ZP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>GP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},QN=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=GP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},KP=(t,e)=>{const n=ps.createTransformer(e),i=Id(t),r=Id(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?ns(ZP(i.values,r.values),n):qP(t,e)},Bu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},ow=(t,e)=>n=>st(t,e,n);function XN(t){return typeof t=="number"?ow:typeof t=="string"?nn.test(t)?zP:KP:Array.isArray(t)?ZP:typeof t=="object"?QN:ow}function YN(t,e,n){const i=[],r=n||XN(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||yt:e;u=ns(h,u)}i.push(u)}return i}function QP(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(r_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=YN(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Bu(t[m],t[m+1],f);return a[m](g)};return n?f=>h(fs(t[0],t[o-1],f)):h}function JN(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Bu(0,e,i);t.push(st(n,1,r))}}function eL(t){const e=[0];return JN(e,t.length-1),e}function tL(t,e){return t.map(n=>n*e)}function nL(t,e){return t.map(()=>e||MP).splice(0,t.length-1)}function Ad({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=VN(i)?i.map(rw):rw(i),o={done:!1,value:e[0]},a=tL(n&&n.length===e.length?n:eL(e),t),u=QP(a,e,{ease:Array.isArray(r)?r:nL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function XP(t,e){return e?t*(1e3/e):0}const iL=5;function YP(t,e,n){const i=Math.max(e-iL,0);return XP(n-t(i),e-i)}const Hp=.001,rL=.01,sL=10,oL=.05,aL=1;function lL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=fs(oL,aL,a),t=fs(rL,sL,nr(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,T=dg(f,a),R=Math.exp(-g);return Hp-_/T*R},o=f=>{const g=f*a*t,_=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,R=Math.exp(-g),k=dg(Math.pow(f,2),a);return(-r(f)+Hp>0?-1:1)*((_-T)*R)/k}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Hp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=cL(r,o,u);if(t=no(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const uL=12;function cL(t,e,n){let i=n;for(let r=1;r<uL;r++)i=i-t(i)/e(i);return i}function dg(t,e){return t*Math.sqrt(1-e*e)}const hL=["duration","bounce"],dL=["stiffness","damping","mass"];function aw(t,e){return e.some(n=>t[n]!==void 0)}function fL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!aw(t,dL)&&aw(t,hL)){const n=lL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function JP({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:_}=fL({...i,velocity:-nr(i.velocity||0)}),T=g||0,R=h/(2*Math.sqrt(u*f)),k=o-r,D=nr(Math.sqrt(u/f)),I=Math.abs(k)<5;n||(n=I?.01:2),e||(e=I?.005:.5);let P;if(R<1){const C=dg(D,R);P=z=>{const G=Math.exp(-R*D*z);return o-G*((T+R*D*k)/C*Math.sin(C*z)+k*Math.cos(C*z))}}else if(R===1)P=C=>o-Math.exp(-D*C)*(k+(T+D*k)*C);else{const C=D*Math.sqrt(R*R-1);P=z=>{const G=Math.exp(-R*D*z),U=Math.min(C*z,300);return o-G*((T+R*D*k)*Math.sinh(U)+C*k*Math.cosh(U))/C}}return{calculatedDuration:_&&m||null,next:C=>{const z=P(C);if(_)a.done=C>=m;else{let G=T;C!==0&&(R<1?G=YP(P,C,z):G=0);const U=Math.abs(G)<=n,b=Math.abs(o-z)<=e;a.done=U&&b}return a.value=a.done?o:z,a}}}function lw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},T=S=>u!==void 0&&S<u||h!==void 0&&S>h,R=S=>u===void 0?h:h===void 0||Math.abs(u-S)<Math.abs(h-S)?u:h;let k=n*e;const D=g+k,I=a===void 0?D:a(D);I!==D&&(k=I-g);const P=S=>-k*Math.exp(-S/i),C=S=>I+P(S),z=S=>{const N=P(S),O=C(S);_.done=Math.abs(N)<=f,_.value=_.done?I:O};let G,U;const b=S=>{T(_.value)&&(G=S,U=JP({keyframes:[_.value,R(_.value)],velocity:YP(C,S,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return b(0),{calculatedDuration:null,next:S=>{let N=!1;return!U&&G===void 0&&(N=!0,z(S),b(S)),G!==void 0&&S>G?U.next(S-G):(!N&&z(S),_)}}}const pL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Xe.update(e,!0),stop:()=>lr(e),now:()=>Gt.isProcessing?Gt.timestamp:performance.now()}},uw=2e4;function cw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<uw;)e+=n,i=t.next(e);return e>=uw?1/0:e}const mL={decay:lw,inertia:lw,tween:Ad,keyframes:Ad,spring:JP};function bd({autoplay:t=!0,delay:e=0,driver:n=pL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,..._}){let T=1,R=!1,k,D;const I=()=>{D=new Promise(ie=>{k=ie})};I();let P;const C=mL[r]||Ad;let z;C!==Ad&&typeof i[0]!="number"&&(z=QP([0,100],i,{clamp:!1}),i=[0,100]);const G=C({..._,keyframes:i});let U;u==="mirror"&&(U=C({..._,keyframes:[...i].reverse(),velocity:-(_.velocity||0)}));let b="idle",S=null,N=null,O=null;G.calculatedDuration===null&&o&&(G.calculatedDuration=cw(G));const{calculatedDuration:j}=G;let B=1/0,M=1/0;j!==null&&(B=j+a,M=B*(o+1)-a);let xe=0;const ft=ie=>{if(N===null)return;T>0&&(N=Math.min(N,ie)),T<0&&(N=Math.min(ie-M/T,N)),S!==null?xe=S:xe=Math.round(ie-N)*T;const te=xe-e*(T>=0?1:-1),re=T>=0?te<0:te>M;xe=Math.max(te,0),b==="finished"&&S===null&&(xe=M);let ue=xe,ae=G;if(o){const Me=Math.min(xe,M)/B;let ge=Math.floor(Me),$e=Me%1;!$e&&Me>=1&&($e=1),$e===1&&ge--,ge=Math.min(ge,o+1),!!(ge%2)&&(u==="reverse"?($e=1-$e,a&&($e-=a/B)):u==="mirror"&&(ae=U)),ue=fs(0,1,$e)*B}const J=re?{done:!1,value:i[0]}:ae.next(ue);z&&(J.value=z(J.value));let{done:me}=J;!re&&j!==null&&(me=T>=0?xe>=M:xe<=0);const Ze=S===null&&(b==="finished"||b==="running"&&me);return g&&g(J.value),Ze&&Z(),J},Ie=()=>{P&&P.stop(),P=void 0},ct=()=>{b="idle",Ie(),k(),I(),N=O=null},Z=()=>{b="finished",m&&m(),Ie(),k()},pe=()=>{if(R)return;P||(P=n(ft));const ie=P.now();h&&h(),S!==null?N=ie-S:(!N||b==="finished")&&(N=ie),b==="finished"&&I(),O=N,S=null,b="running",P.start()};t&&pe();const ee={then(ie,te){return D.then(ie,te)},get time(){return nr(xe)},set time(ie){ie=no(ie),xe=ie,S!==null||!P||T===0?S=ie:N=P.now()-ie/T},get duration(){const ie=G.calculatedDuration===null?cw(G):G.calculatedDuration;return nr(ie)},get speed(){return T},set speed(ie){ie===T||!P||(T=ie,ee.time=nr(xe))},get state(){return b},play:pe,pause:()=>{b="paused",S=xe},stop:()=>{R=!0,b!=="idle"&&(b="idle",f&&f(),ct())},cancel:()=>{O!==null&&ft(O),ct()},complete:()=>{b="finished"},sample:ie=>(N=0,ft(ie))};return ee}function gL(t){let e;return()=>(e===void 0&&(e=t()),e)}const yL=gL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),_L=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),gh=10,vL=2e4,wL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!kP(e.ease);function xL(t,e,{onUpdate:n,onComplete:i,...r}){if(!(yL()&&_L.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(C=>{u=C})};m();let{keyframes:g,duration:_=300,ease:T,times:R}=r;if(wL(e,r)){const C=bd({...r,repeat:0,delay:0});let z={done:!1,value:g[0]};const G=[];let U=0;for(;!z.done&&U<vL;)z=C.sample(U),G.push(z.value),U+=gh;R=void 0,g=G,_=U-gh,T="linear"}const k=kN(t.owner.current,e,g,{...r,duration:_,ease:T,times:R}),D=()=>{f=!1,k.cancel()},I=()=>{f=!0,Xe.update(D),u(),m()};return k.onfinish=()=>{f||(t.set(RN(g,r)),i&&i(),I())},{then(C,z){return h.then(C,z)},attachTimeline(C){return k.timeline=C,k.onfinish=null,yt},get time(){return nr(k.currentTime||0)},set time(C){k.currentTime=no(C)},get speed(){return k.playbackRate},set speed(C){k.playbackRate=C},get duration(){return nr(_)},play:()=>{a||(k.play(),lr(D))},pause:()=>k.pause(),stop:()=>{if(a=!0,k.playState==="idle")return;const{currentTime:C}=k;if(C){const z=bd({...r,autoplay:!1});t.setWithVelocity(z.sample(C-gh).value,z.sample(C).value,gh)}I()},complete:()=>{f||k.finish()},cancel:I}}function TL({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:yt,pause:yt,stop:yt,then:o=>(o(),Promise.resolve()),cancel:yt,complete:yt});return e?bd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const EL={type:"spring",stiffness:500,damping:25,restSpeed:10},PL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SL={type:"keyframes",duration:.8},CL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IL=(t,{keyframes:e})=>e.length>2?SL:xo.has(t)?t.startsWith("scale")?PL(e[1]):EL:CL,fg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ps.test(e)||e==="0")&&!e.startsWith("url(")),AL=new Set(["brightness","contrast","saturate","opacity"]);function bL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(If)||[];if(!i)return t;const r=n.replace(i,"");let o=AL.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const kL=/([a-z-]*)\(.*?\)/g,pg={...ps,getAnimatableNone:t=>{const e=t.match(kL);return e?e.map(bL).join(" "):t}},RL={...fP,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:pg,WebkitFilter:pg},l_=t=>RL[t];function eS(t,e){let n=l_(t);return n!==pg&&(n=ps),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const tS=t=>/^0[^.\s]+$/.test(t);function NL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||tS(t)}function LL(t,e,n,i){const r=fg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),NL(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=eS(e,u)}return o}function ML({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function u_(t,e){return t[e]||t.default||t}const OL={skipAnimations:!1},c_=(t,e,n,i={})=>r=>{const o=u_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-no(a);const h=LL(e,t,n,o),f=h[0],m=h[h.length-1],g=fg(t,f),_=fg(t,m);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:R=>{e.set(R),o.onUpdate&&o.onUpdate(R)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(ML(o)||(T={...T,...IL(t,T)}),T.duration&&(T.duration=no(T.duration)),T.repeatDelay&&(T.repeatDelay=no(T.repeatDelay)),!g||!_||bN.current||o.type===!1||OL.skipAnimations)return TL(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const R=xL(e,t,T);if(R)return R}return bd(T)};function kd(t){return!!(wn(t)&&t.add)}const nS=t=>/^\-?\d*\.?\d+$/.test(t);function h_(t,e){t.indexOf(e)===-1&&t.push(e)}function d_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class f_{constructor(){this.subscriptions=[]}add(e){return h_(this.subscriptions,e),()=>d_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const DL=t=>!isNaN(parseFloat(t));class VL{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Gt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Xe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Xe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=DL(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new f_);const i=this.events[e].add(n);return e==="change"?()=>{i(),Xe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?XP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ba(t,e){return new VL(t,e)}const iS=t=>e=>e.test(t),jL={test:t=>t==="auto",parse:t=>t},rS=[To,ve,Ei,Rr,$2,W2,jL],Hl=t=>rS.find(iS(t)),FL=[...rS,nn,ps],zL=t=>FL.find(iS(t));function BL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ba(n))}function UL(t,e){const n=bf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=sN(o[a]);BL(t,a,u)}}function HL(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(nS(m)||tS(m))?m=parseFloat(m):!zL(m)&&ps.test(f)&&(m=eS(h,f)),t.addValue(h,Ba(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function WL(t,e){return e?(e[t]||e.default||e).from:void 0}function $L(t,e,n){const i={};for(const r in t){const o=WL(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function qL({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function GL(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function sS(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const _=t.getValue(g),T=u[g];if(!_||T===void 0||m&&qL(m,g))continue;const R={delay:n,elapsed:0,...u_(o||{},g)};if(window.HandoffAppearAnimations){const I=t.getProps()[oP];if(I){const P=window.HandoffAppearAnimations(I,g,_,Xe);P!==null&&(R.elapsed=P,R.isHandoff=!0)}}let k=!R.isHandoff&&!GL(_,T);if(R.type==="spring"&&(_.getVelocity()||R.velocity)&&(k=!1),_.animation&&(k=!1),k)continue;_.start(c_(g,_,T,t.shouldReduceMotion&&xo.has(g)?{type:!1}:R));const D=_.animation;kd(h)&&(h.add(g),D.then(()=>h.remove(g))),f.push(D)}return a&&Promise.all(f).then(()=>{a&&UL(t,a)}),f}function mg(t,e,n={}){const i=bf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(sS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return ZL(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function ZL(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(KL).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(mg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function KL(t,e){return t.sortNodePosition(e)}function QL(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>mg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=mg(t,e,n);else{const r=typeof e=="function"?bf(t,e,n.custom):e;i=Promise.all(sS(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const XL=[...Zy].reverse(),YL=Zy.length;function JL(t){return e=>Promise.all(e.map(({animation:n,options:i})=>QL(t,n,i)))}function eM(t){let e=JL(t);const n=nM();let i=!0;const r=(h,f)=>{const m=bf(t,f);if(m){const{transition:g,transitionEnd:_,...T}=m;h={...h,...T,..._}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},_=[],T=new Set;let R={},k=1/0;for(let I=0;I<YL;I++){const P=XL[I],C=n[P],z=m[P]!==void 0?m[P]:g[P],G=Fu(z),U=P===f?C.isActive:null;U===!1&&(k=I);let b=z===g[P]&&z!==m[P]&&G;if(b&&i&&t.manuallyAnimateOnMount&&(b=!1),C.protectedKeys={...R},!C.isActive&&U===null||!z&&!C.prevProp||Sf(z)||typeof z=="boolean")continue;let N=tM(C.prevProp,z)||P===f&&C.isActive&&!b&&G||I>k&&G,O=!1;const j=Array.isArray(z)?z:[z];let B=j.reduce(r,{});U===!1&&(B={});const{prevResolvedValues:M={}}=C,xe={...M,...B},ft=Ie=>{N=!0,T.has(Ie)&&(O=!0,T.delete(Ie)),C.needsAnimating[Ie]=!0};for(const Ie in xe){const ct=B[Ie],Z=M[Ie];if(R.hasOwnProperty(Ie))continue;let pe=!1;Cd(ct)&&Cd(Z)?pe=!AP(ct,Z):pe=ct!==Z,pe?ct!==void 0?ft(Ie):T.add(Ie):ct!==void 0&&T.has(Ie)?ft(Ie):C.protectedKeys[Ie]=!0}C.prevProp=z,C.prevResolvedValues=B,C.isActive&&(R={...R,...B}),i&&t.blockInitialAnimation&&(N=!1),N&&(!b||O)&&_.push(...j.map(Ie=>({animation:Ie,options:{type:P,...h}})))}if(T.size){const I={};T.forEach(P=>{const C=t.getBaseTarget(P);C!==void 0&&(I[P]=C)}),_.push({animation:I})}let D=!!_.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(D=!1),i=!1,D?e(_):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var R;return(R=T.animationState)===null||R===void 0?void 0:R.setActive(h,f)}),n[h].isActive=f;const _=a(m,h);for(const T in n)n[T].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function tM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!AP(e,t):!1}function Us(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nM(){return{animate:Us(!0),whileInView:Us(),whileHover:Us(),whileTap:Us(),whileDrag:Us(),whileFocus:Us(),exit:Us()}}class iM extends Cs{constructor(e){super(e),e.animationState||(e.animationState=eM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Sf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let rM=0;class sM extends Cs{constructor(){super(...arguments),this.id=rM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const oM={animation:{Feature:iM},exit:{Feature:sM}},hw=(t,e)=>Math.abs(t-e);function aM(t,e){const n=hw(t.x,e.x),i=hw(t.y,e.y);return Math.sqrt(n**2+i**2)}class oS{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=$p(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,T=aM(g.offset,{x:0,y:0})>=3;if(!_&&!T)return;const{point:R}=g,{timestamp:k}=Gt;this.history.push({...R,timestamp:k});const{onStart:D,onMove:I}=this.handlers;_||(D&&D(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Wp(_,this.transformPagePoint),Xe.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:T,onSessionEnd:R,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=$p(g.type==="pointercancel"?this.lastMoveEventInfo:Wp(_,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,D),R&&R(g,D)},!EP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Af(e),u=Wp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Gt;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,$p(u,this.history)),this.removeListeners=ns(tr(this.contextWindow,"pointermove",this.handlePointerMove),tr(this.contextWindow,"pointerup",this.handlePointerUp),tr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lr(this.updatePoint)}}function Wp(t,e){return e?{point:e(t.point)}:t}function dw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $p({point:t},e){return{point:t,delta:dw(t,aS(e)),offset:dw(t,lM(e)),velocity:uM(e,.1)}}function lM(t){return t[0]}function aS(t){return t[t.length-1]}function uM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=aS(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>no(e)));)n--;if(!i)return{x:0,y:0};const o=nr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function In(t){return t.max-t.min}function gg(t,e=0,n=.01){return Math.abs(t-e)<=n}function fw(t,e,n,i=.5){t.origin=i,t.originPoint=st(e.min,e.max,t.origin),t.scale=In(n)/In(e),(gg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=st(n.min,n.max,t.origin)-t.originPoint,(gg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function hu(t,e,n,i){fw(t.x,e.x,n.x,i?i.originX:void 0),fw(t.y,e.y,n.y,i?i.originY:void 0)}function pw(t,e,n){t.min=n.min+e.min,t.max=t.min+In(e)}function cM(t,e,n){pw(t.x,e.x,n.x),pw(t.y,e.y,n.y)}function mw(t,e,n){t.min=e.min-n.min,t.max=t.min+In(e)}function du(t,e,n){mw(t.x,e.x,n.x),mw(t.y,e.y,n.y)}function hM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?st(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?st(n,t,i.max):Math.min(t,n)),t}function gw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function dM(t,{top:e,left:n,bottom:i,right:r}){return{x:gw(t.x,n,r),y:gw(t.y,e,i)}}function yw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function fM(t,e){return{x:yw(t.x,e.x),y:yw(t.y,e.y)}}function pM(t,e){let n=.5;const i=In(t),r=In(e);return r>i?n=Bu(e.min,e.max-i,t.min):i>r&&(n=Bu(t.min,t.max-r,e.min)),fs(0,1,n)}function mM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const yg=.35;function gM(t=yg){return t===!1?t=0:t===!0&&(t=yg),{x:_w(t,"left","right"),y:_w(t,"top","bottom")}}function _w(t,e,n){return{min:vw(t,e),max:vw(t,n)}}function vw(t,e){return typeof t=="number"?t:t[e]||0}const ww=()=>({translate:0,scale:1,origin:0,originPoint:0}),wa=()=>({x:ww(),y:ww()}),xw=()=>({min:0,max:0}),Tt=()=>({x:xw(),y:xw()});function Fn(t){return[t("x"),t("y")]}function lS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function yM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _M(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function qp(t){return t===void 0||t===1}function _g({scale:t,scaleX:e,scaleY:n}){return!qp(t)||!qp(e)||!qp(n)}function $s(t){return _g(t)||uS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function uS(t){return Tw(t.x)||Tw(t.y)}function Tw(t){return t&&t!=="0%"}function Rd(t,e,n){const i=t-n,r=e*i;return n+r}function Ew(t,e,n,i,r){return r!==void 0&&(t=Rd(t,r,i)),Rd(t,n,i)+e}function vg(t,e=0,n=1,i,r){t.min=Ew(t.min,e,n,i,r),t.max=Ew(t.max,e,n,i,r)}function cS(t,{x:e,y:n}){vg(t.x,e.translate,e.scale,e.originPoint),vg(t.y,n.translate,n.scale,n.originPoint)}function vM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&xa(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,cS(t,a)),i&&$s(o.latestValues)&&xa(t,o.latestValues))}e.x=Pw(e.x),e.y=Pw(e.y)}function Pw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Mr(t,e){t.min=t.min+e,t.max=t.max+e}function Sw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=st(t.min,t.max,o);vg(t,e[n],e[i],a,e.scale)}const wM=["x","scaleX","originX"],xM=["y","scaleY","originY"];function xa(t,e){Sw(t.x,e,wM),Sw(t.y,e,xM)}function hS(t,e){return lS(_M(t.getBoundingClientRect(),e))}function TM(t,e,n){const i=hS(t,n),{scroll:r}=e;return r&&(Mr(i.x,r.offset.x),Mr(i.y,r.offset.y)),i}const dS=({current:t})=>t?t.ownerDocument.defaultView:null,EM=new WeakMap;class PM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Af(m,"page").point)},o=(m,g)=>{const{drag:_,dragPropagation:T,onDragStart:R}=this.getProps();if(_&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=SP(_),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fn(D=>{let I=this.getAxisMotionValue(D).get()||0;if(Ei.test(I)){const{projection:P}=this.visualElement;if(P&&P.layout){const C=P.layout.layoutBox[D];C&&(I=In(C)*(parseFloat(I)/100))}}this.originPoint[D]=I}),R&&Xe.update(()=>R(m,g),!1,!0);const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:T,onDirectionLock:R,onDrag:k}=this.getProps();if(!_&&!this.openGlobalLock)return;const{offset:D}=g;if(T&&this.currentDirection===null){this.currentDirection=SM(D),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",g.point,D),this.updateAxis("y",g.point,D),this.visualElement.render(),k&&k(m,g)},u=(m,g)=>this.stop(m,g),h=()=>Fn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new oS(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:dS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Xe.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!yh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=hM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&_a(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=dM(r.layoutBox,n):this.constraints=!1,this.elastic=gM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Fn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=mM(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!_a(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=TM(i,r.root,this.visualElement.getTransformPagePoint());let a=fM(r.layout.layoutBox,o);if(n){const u=n(yM(a));this.hasMutatedConstraints=!!u,u&&(a=lS(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Fn(m=>{if(!yh(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,T=r?40:1e7,R={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,R)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(c_(e,i,0,n))}stopAnimation(){Fn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Fn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Fn(n=>{const{drag:i}=this.getProps();if(!yh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-st(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!_a(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Fn(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=pM({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Fn(a=>{if(!yh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(st(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;EM.set(this.visualElement,this);const e=this.visualElement.current,n=tr(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();_a(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=Qi(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Fn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=yg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function yh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function SM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class CM extends Cs{constructor(e){super(e),this.removeGroupControls=yt,this.removeListeners=yt,this.controls=new PM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Cw=t=>(e,n)=>{t&&Xe.update(()=>t(e,n))};class IM extends Cs{constructor(){super(...arguments),this.removePointerDownListener=yt}onPointerDown(e){this.session=new oS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Cw(e),onStart:Cw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&Xe.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=tr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function AM(){const t=V.useContext(Ef);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=V.useId();return V.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const zh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Iw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Wl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ve.test(t))t=parseFloat(t);else return t;const n=Iw(t,e.target.x),i=Iw(t,e.target.y);return`${n}% ${i}%`}},bM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ps.parse(t);if(r.length>5)return i;const o=ps.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=st(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class kM extends so.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;V2(RM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),zh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Xe.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function fS(t){const[e,n]=AM(),i=V.useContext(Qy);return so.createElement(kM,{...t,layoutGroup:i,switchLayoutGroup:V.useContext(lP),isPresent:e,safeToRemove:n})}const RM={borderRadius:{...Wl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wl,borderTopRightRadius:Wl,borderBottomLeftRadius:Wl,borderBottomRightRadius:Wl,boxShadow:bM},pS=["TopLeft","TopRight","BottomLeft","BottomRight"],NM=pS.length,Aw=t=>typeof t=="string"?parseFloat(t):t,bw=t=>typeof t=="number"||ve.test(t);function LM(t,e,n,i,r,o){r?(t.opacity=st(0,n.opacity!==void 0?n.opacity:1,MM(i)),t.opacityExit=st(e.opacity!==void 0?e.opacity:1,0,OM(i))):o&&(t.opacity=st(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<NM;a++){const u=`border${pS[a]}Radius`;let h=kw(e,u),f=kw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||bw(h)===bw(f)?(t[u]=Math.max(st(Aw(h),Aw(f),i),0),(Ei.test(f)||Ei.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=st(e.rotate||0,n.rotate||0,i))}function kw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const MM=mS(0,.5,VP),OM=mS(.5,.95,yt);function mS(t,e,n){return i=>i<t?0:i>e?1:n(Bu(t,e,i))}function Rw(t,e){t.min=e.min,t.max=e.max}function jn(t,e){Rw(t.x,e.x),Rw(t.y,e.y)}function Nw(t,e,n,i,r){return t-=e,t=Rd(t,1/n,i),r!==void 0&&(t=Rd(t,1/r,i)),t}function DM(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ei.test(e)&&(e=parseFloat(e),e=st(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=st(o.min,o.max,i);t===o&&(u-=e),t.min=Nw(t.min,e,n,u,r),t.max=Nw(t.max,e,n,u,r)}function Lw(t,e,[n,i,r],o,a){DM(t,e[n],e[i],e[r],e.scale,o,a)}const VM=["x","scaleX","originX"],jM=["y","scaleY","originY"];function Mw(t,e,n,i){Lw(t.x,e,VM,n?n.x:void 0,i?i.x:void 0),Lw(t.y,e,jM,n?n.y:void 0,i?i.y:void 0)}function Ow(t){return t.translate===0&&t.scale===1}function gS(t){return Ow(t.x)&&Ow(t.y)}function FM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function yS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Dw(t){return In(t.x)/In(t.y)}class zM{constructor(){this.members=[]}add(e){h_(this.members,e),e.scheduleRender()}remove(e){if(d_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Vw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const BM=(t,e)=>t.depth-e.depth;class UM{constructor(){this.children=[],this.isDirty=!1}add(e){h_(this.children,e),this.isDirty=!0}remove(e){d_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(BM),this.isDirty=!1,this.children.forEach(e)}}function HM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(lr(i),t(o-e))};return Xe.read(i,!0),()=>lr(i)}function WM(t){window.MotionDebug&&window.MotionDebug.record(t)}function $M(t){return t instanceof SVGElement&&t.tagName!=="svg"}function qM(t,e,n){const i=wn(t)?t:Ba(t);return i.start(c_("",i,e,n)),i.animation}const jw=["","X","Y","Z"],GM={visibility:"hidden"},Fw=1e3;let ZM=0;const qs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function _S({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=ZM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qs.totalNodes=qs.resolvedTargetDeltas=qs.recalculatedProjection=0,this.nodes.forEach(XM),this.nodes.forEach(nO),this.nodes.forEach(iO),this.nodes.forEach(YM),WM(qs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new UM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new f_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$M(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=HM(_,250),zh.hasAnimatedSinceResize&&(zh.hasAnimatedSinceResize=!1,this.nodes.forEach(Bw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:T,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||lO,{onLayoutAnimationStart:D,onLayoutAnimationComplete:I}=m.getProps(),P=!this.targetLayout||!yS(this.targetLayout,R)||T,C=!_&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||_&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,C);const z={...u_(k,"layout"),onPlay:D,onComplete:I};(m.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else _||Bw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zw);return}this.isUpdating||this.nodes.forEach(eO),this.isUpdating=!1,this.nodes.forEach(tO),this.nodes.forEach(KM),this.nodes.forEach(QM),this.clearAllSnapshots();const u=performance.now();Gt.delta=fs(0,1e3/60,u-Gt.timestamp),Gt.timestamp=u,Gt.isProcessing=!0,Dp.update.process(Gt),Dp.preRender.process(Gt),Dp.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(JM),this.sharedNodes.forEach(sO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!gS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||$s(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),uO(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Tt();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Mr(u.x,h.offset.x),Mr(u.y,h.offset.y)),u}removeElementScroll(a){const u=Tt();jn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){jn(u,a);const{scroll:_}=this.root;_&&(Mr(u.x,-_.offset.x),Mr(u.y,-_.offset.y))}Mr(u.x,m.offset.x),Mr(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=Tt();jn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&xa(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),$s(m.latestValues)&&xa(h,m.latestValues)}return $s(this.latestValues)&&xa(h,this.latestValues),h}removeTransform(a){const u=Tt();jn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!$s(f.latestValues))continue;_g(f.latestValues)&&f.updateSnapshot();const m=Tt(),g=f.measurePageBox();jn(m,g),Mw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return $s(this.latestValues)&&Mw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Gt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),du(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jn(this.target,this.layout.layoutBox),cS(this.target,this.targetDelta)):jn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),du(this.relativeTargetOrigin,this.target,T.target),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_g(this.parent.latestValues)||uS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;jn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,T=this.treeScale.y;vM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:R}=u;if(!R){this.projectionTransform&&(this.projectionDelta=wa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=wa(),this.projectionDeltaWithTransform=wa());const k=this.projectionTransform;hu(this.projectionDelta,this.layoutCorrected,R,this.latestValues),this.projectionTransform=Vw(this.projectionDelta,this.treeScale),(this.projectionTransform!==k||this.treeScale.x!==_||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R)),qs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=wa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=Tt(),T=h?h.source:void 0,R=this.layout?this.layout.source:void 0,k=T!==R,D=this.getStack(),I=!D||D.members.length<=1,P=!!(k&&!I&&this.options.crossfade===!0&&!this.path.some(aO));this.animationProgress=0;let C;this.mixTargetDelta=z=>{const G=z/1e3;Uw(g.x,a.x,G),Uw(g.y,a.y,G),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(du(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oO(this.relativeTarget,this.relativeTargetOrigin,_,G),C&&FM(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Tt()),jn(C,this.relativeTarget)),k&&(this.animationValues=m,LM(m,f,this.latestValues,G,P,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xe.update(()=>{zh.hasAnimatedSinceResize=!0,this.currentAnimation=qM(0,Fw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Fw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&vS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Tt();const g=In(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const _=In(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+_}jn(u,h),xa(u,m),hu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new zM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<jw.length;m++){const g="rotate"+jw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return GM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Fh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=Fh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!$s(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=Vw(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x:T,y:R}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${R.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const k in Pd){if(_[k]===void 0)continue;const{correct:D,applyTo:I}=Pd[k],P=f.transform==="none"?_[k]:D(_[k],g);if(I){const C=I.length;for(let z=0;z<C;z++)f[I[z]]=P}else f[k]=P}return this.options.layoutId&&(f.pointerEvents=g===this?Fh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(zw),this.root.sharedNodes.clear()}}}function KM(t){t.updateLayout()}function QM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Fn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],T=In(_);_.min=i[g].min,_.max=_.min+T}):vS(o,n.layoutBox,i)&&Fn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],T=In(i[g]);_.max=_.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=wa();hu(u,i,n.layoutBox);const h=wa();a?hu(h,t.applyTransform(r,!0),n.measuredBox):hu(h,i,n.layoutBox);const f=!gS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:T}=g;if(_&&T){const R=Tt();du(R,n.layoutBox,_.layoutBox);const k=Tt();du(k,i,T.layoutBox),yS(R,k)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=R,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function XM(t){qs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function JM(t){t.clearSnapshot()}function zw(t){t.clearMeasurements()}function eO(t){t.isLayoutDirty=!1}function tO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Bw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function nO(t){t.resolveTargetDelta()}function iO(t){t.calcProjection()}function rO(t){t.resetRotation()}function sO(t){t.removeLeadSnapshot()}function Uw(t,e,n){t.translate=st(e.translate,0,n),t.scale=st(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Hw(t,e,n,i){t.min=st(e.min,n.min,i),t.max=st(e.max,n.max,i)}function oO(t,e,n,i){Hw(t.x,e.x,n.x,i),Hw(t.y,e.y,n.y,i)}function aO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const lO={duration:.45,ease:[.4,0,.1,1]},Ww=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),$w=Ww("applewebkit/")&&!Ww("chrome/")?Math.round:yt;function qw(t){t.min=$w(t.min),t.max=$w(t.max)}function uO(t){qw(t.x),qw(t.y)}function vS(t,e,n){return t==="position"||t==="preserve-aspect"&&!gg(Dw(e),Dw(n),.2)}const cO=_S({attachResizeListener:(t,e)=>Qi(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gp={current:void 0},wS=_S({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gp.current){const t=new cO({});t.mount(window),t.setOptions({layoutScroll:!0}),Gp.current=t}return Gp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),hO={pan:{Feature:IM},drag:{Feature:CM,ProjectionNode:wS,MeasureLayout:fS}},dO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function fO(t){const e=dO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function wg(t,e,n=1){const[i,r]=fO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return nS(a)?parseFloat(a):a}else return ug(r)?wg(r,e,n+1):r}function pO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!ug(o))return;const a=wg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!ug(o))continue;const a=wg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const mO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),xS=t=>mO.has(t),gO=t=>Object.keys(t).some(xS),Gw=t=>t===To||t===ve,Zw=(t,e)=>parseFloat(t.split(", ")[e]),Kw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Zw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Zw(o[1],t):0}},yO=new Set(["x","y","z"]),_O=ic.filter(t=>!yO.has(t));function vO(t){const e=[];return _O.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ua={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Kw(4,13),y:Kw(5,14)};Ua.translateX=Ua.x;Ua.translateY=Ua.y;const wO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Ua[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=Ua[f](h,o)}),t},xO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(xS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=Hl(m);const _=e[h];let T;if(Cd(_)){const R=_.length,k=_[0]===null?1:0;m=_[k],g=Hl(m);for(let D=k;D<R&&_[D]!==null;D++)T?r_(Hl(_[D])===T):T=Hl(_[D])}else T=Hl(_);if(g!==T)if(Gw(g)&&Gw(T)){const R=f.get();typeof R=="string"&&f.set(parseFloat(R)),typeof _=="string"?e[h]=parseFloat(_):Array.isArray(_)&&T===ve&&(e[h]=_.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||_===0)?m===0?f.set(T.transform(m)):e[h]=g.transform(_):(a||(o=vO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(_))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=wO(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),Pf&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function TO(t,e,n,i){return gO(e)?xO(t,e,n,i):{target:e,transitionEnd:i}}const EO=(t,e,n,i)=>{const r=pO(t,e,i);return e=r.target,i=r.transitionEnd,TO(t,e,n,i)},xg={current:null},TS={current:!1};function PO(){if(TS.current=!0,!!Pf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xg.current=t.matches;t.addListener(e),e()}else xg.current=!1}function SO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(wn(o))t.addValue(r,o),kd(i)&&i.add(r);else if(wn(a))t.addValue(r,Ba(o,{owner:t})),kd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,Ba(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Qw=new WeakMap,ES=Object.keys(zu),CO=ES.length,Xw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],IO=Ky.length;class AO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Xe.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Cf(n),this.isVariantNode=aP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const _=m[g];u[g]!==void 0&&wn(_)&&(_.set(u[g],!1),kd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Qw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),TS.current||PO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qw.delete(this.current),this.projection&&this.projection.unmount(),lr(this.notifyUpdate),lr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=xo.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Xe.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<CO;h++){const f=ES[h],{isEnabled:m,Feature:g,ProjectionNode:_,MeasureLayout:T}=zu[f];_&&(a=_),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:_,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&_a(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:_,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Xw.length;i++){const r=Xw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=SO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<IO;i++){const r=Ky[i],o=this.props[r];(Fu(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ba(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=i_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!wn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new f_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class PS extends AO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=$L(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){HL(this,i,a);const u=EO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function bO(t){return window.getComputedStyle(t)}class kO extends PS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(xo.has(n)){const i=l_(n);return i&&i.default||0}else{const i=bO(e),r=(hP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return hS(e,n)}build(e,n,i,r){Yy(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return n_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){yP(e,n,i,r)}}class RO extends PS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(xo.has(n)){const i=l_(n);return i&&i.default||0}return n=_P.has(n)?n:Gy(n),e.getAttribute(n)}measureInstanceViewportBox(){return Tt()}scrapeMotionValuesFromProps(e,n){return wP(e,n)}build(e,n,i,r){e_(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){vP(e,n,i,r)}mount(e){this.isSVGTag=t_(e.tagName),super.mount(e)}}const NO=(t,e)=>Xy(t)?new RO(e,{enableHardwareAcceleration:!1}):new kO(e,{enableHardwareAcceleration:!0}),LO={layout:{ProjectionNode:wS,MeasureLayout:fS}},MO={...oM,...CN,...hO,...LO},le=O2((t,e)=>fN(t,e,MO,NO));function SS(){const t=V.useRef(!1);return qy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function OO(){const t=SS(),[e,n]=V.useState(0),i=V.useCallback(()=>{t.current&&n(e+1)},[e]);return[V.useCallback(()=>Xe.postRender(i),[i]),e]}class DO extends V.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function VO({children:t,isPresent:e}){const n=V.useId(),i=V.useRef(null),r=V.useRef({width:0,height:0,top:0,left:0});return V.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),V.createElement(DO,{isPresent:e,childRef:i,sizeRef:r},V.cloneElement(t,{ref:i}))}const Zp=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=xP(jO),h=V.useId(),f=V.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return V.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),V.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=V.createElement(VO,{isPresent:n},t)),V.createElement(Ef.Provider,{value:f},t)};function jO(){return new Map}function FO(t){return V.useEffect(()=>()=>t(),[])}const Gs=t=>t.key||"";function zO(t,e){t.forEach(n=>{const i=Gs(n);e.set(i,n)})}function BO(t){const e=[];return V.Children.forEach(t,n=>{V.isValidElement(n)&&e.push(n)}),e}const Uu=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=V.useContext(Qy).forceRender||OO()[0],h=SS(),f=BO(t);let m=f;const g=V.useRef(new Map).current,_=V.useRef(m),T=V.useRef(new Map).current,R=V.useRef(!0);if(qy(()=>{R.current=!1,zO(f,T),_.current=m}),FO(()=>{R.current=!0,T.clear(),g.clear()}),R.current)return V.createElement(V.Fragment,null,m.map(P=>V.createElement(Zp,{key:Gs(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},P)));m=[...m];const k=_.current.map(Gs),D=f.map(Gs),I=k.length;for(let P=0;P<I;P++){const C=k[P];D.indexOf(C)===-1&&!g.has(C)&&g.set(C,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((P,C)=>{if(D.indexOf(C)!==-1)return;const z=T.get(C);if(!z)return;const G=k.indexOf(C);let U=P;if(!U){const b=()=>{g.delete(C);const S=Array.from(T.keys()).filter(N=>!D.includes(N));if(S.forEach(N=>T.delete(N)),_.current=f.filter(N=>{const O=Gs(N);return O===C||S.includes(O)}),!g.size){if(h.current===!1)return;u(),i&&i()}};U=V.createElement(Zp,{key:Gs(z),isPresent:!1,onExitComplete:b,custom:e,presenceAffectsLayout:o,mode:a},z),g.set(C,U)}m.splice(G,0,U)}),m=m.map(P=>{const C=P.key;return g.has(C)?P:V.createElement(Zp,{key:Gs(P),isPresent:!0,presenceAffectsLayout:o,mode:a},P)}),V.createElement(V.Fragment,null,g.size?m:m.map(P=>V.cloneElement(P)))},UO=()=>{};var Yw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},HO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},IS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(_=64)),i.push(n[m],n[g],n[_],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new WO;const _=o<<2|u>>4;if(i.push(_),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const R=f<<6&192|g;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $O=function(t){const e=CS(t);return IS.encodeByteArray(e,!0)},Nd=function(t){return $O(t).replace(/\./g,"")},AS=function(t){try{return IS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=()=>qO().__FIREBASE_DEFAULTS__,ZO=()=>{if(typeof process>"u"||typeof Yw>"u")return;const t=Yw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AS(t[1]);return e&&JSON.parse(e)},kf=()=>{try{return UO()||GO()||ZO()||KO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bS=t=>{var e,n;return(n=(e=kf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},QO=t=>{const e=bS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},kS=()=>{var t;return(t=kf())==null?void 0:t.config},RS=t=>{var e;return(e=kf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Nd(JSON.stringify(n)),Nd(JSON.stringify(a)),""].join(".")}const fu={};function JO(){const t={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?t.emulator.push(e):t.prod.push(e);return t}function eD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Jw=!1;function LS(t,e){if(typeof window>"u"||typeof document>"u"||!tl(window.location.host)||fu[t]===e||fu[t]||Jw)return;fu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=JO().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Jw=!0,a()},_}function m(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=eD(i),T=n("text"),R=document.getElementById(T)||document.createElement("span"),k=n("learnmore"),D=document.getElementById(k)||document.createElement("a"),I=n("preprendIcon"),P=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const C=_.element;u(C),m(D,k);const z=f();h(P,I),C.append(P,R,D,z),document.body.appendChild(C)}o?(R.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function nD(){var e;const t=(e=kf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oD(){const t=Yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aD(){return!nD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lD(){try{return typeof indexedDB=="object"}catch{return!1}}function uD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="FirebaseError";class gr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=cD,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ac.prototype.create)}}class ac{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?hD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new gr(r,u,i)}}function hD(t,e){return t.replace(dD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const dD=/\{\$([^}]+)}/g;function fD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ho(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(ex(o)&&ex(a)){if(!ho(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ex(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pD(t,e){const n=new mD(t,e);return n.subscribe.bind(n)}class mD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");gD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Kp),r.error===void 0&&(r.error=Kp),r.complete===void 0&&(r.complete=Kp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t){return t&&t._delegate?t._delegate:t}class fo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new XO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vD(e))try{this.getOrInitializeService({instanceIdentifier:Zs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zs){return this.instances.has(e)}getOptions(e=Zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_D(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Zs){return this.component?this.component.multipleInstances?e:Zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _D(t){return t===Zs?void 0:t}function vD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const xD={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},TD=Re.INFO,ED={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},PD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=ED[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class p_{constructor(e){this.name=e,this._logLevel=TD,this._logHandler=PD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const SD=(t,e)=>e.some(n=>t instanceof n);let tx,nx;function CD(){return tx||(tx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ID(){return nx||(nx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MS=new WeakMap,Tg=new WeakMap,OS=new WeakMap,Qp=new WeakMap,m_=new WeakMap;function AD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(is(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&MS.set(n,t)}).catch(()=>{}),m_.set(e,t),e}function bD(t){if(Tg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Tg.set(t,e)}let Eg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kD(t){Eg=t(Eg)}function RD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Xp(this),e,...n);return OS.set(i,e.sort?e.sort():[e]),is(i)}:ID().includes(t)?function(...e){return t.apply(Xp(this),e),is(MS.get(this))}:function(...e){return is(t.apply(Xp(this),e))}}function ND(t){return typeof t=="function"?RD(t):(t instanceof IDBTransaction&&bD(t),SD(t,CD())?new Proxy(t,Eg):t)}function is(t){if(t instanceof IDBRequest)return AD(t);if(Qp.has(t))return Qp.get(t);const e=ND(t);return e!==t&&(Qp.set(t,e),m_.set(e,t)),e}const Xp=t=>m_.get(t);function LD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=is(a);return i&&a.addEventListener("upgradeneeded",h=>{i(is(a.result),h.oldVersion,h.newVersion,is(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const MD=["get","getKey","getAll","getAllKeys","count"],OD=["put","add","delete","clear"],Yp=new Map;function ix(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yp.get(e))return Yp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=OD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||MD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return Yp.set(e,o),o}kD(t=>({...t,get:(e,n,i)=>ix(e,n)||t.get(e,n,i),has:(e,n)=>!!ix(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function VD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pg="@firebase/app",rx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new p_("@firebase/app"),jD="@firebase/app-compat",FD="@firebase/analytics-compat",zD="@firebase/analytics",BD="@firebase/app-check-compat",UD="@firebase/app-check",HD="@firebase/auth",WD="@firebase/auth-compat",$D="@firebase/database",qD="@firebase/data-connect",GD="@firebase/database-compat",ZD="@firebase/functions",KD="@firebase/functions-compat",QD="@firebase/installations",XD="@firebase/installations-compat",YD="@firebase/messaging",JD="@firebase/messaging-compat",eV="@firebase/performance",tV="@firebase/performance-compat",nV="@firebase/remote-config",iV="@firebase/remote-config-compat",rV="@firebase/storage",sV="@firebase/storage-compat",oV="@firebase/firestore",aV="@firebase/ai",lV="@firebase/firestore-compat",uV="firebase",cV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="[DEFAULT]",hV={[Pg]:"fire-core",[jD]:"fire-core-compat",[zD]:"fire-analytics",[FD]:"fire-analytics-compat",[UD]:"fire-app-check",[BD]:"fire-app-check-compat",[HD]:"fire-auth",[WD]:"fire-auth-compat",[$D]:"fire-rtdb",[qD]:"fire-data-connect",[GD]:"fire-rtdb-compat",[ZD]:"fire-fn",[KD]:"fire-fn-compat",[QD]:"fire-iid",[XD]:"fire-iid-compat",[YD]:"fire-fcm",[JD]:"fire-fcm-compat",[eV]:"fire-perf",[tV]:"fire-perf-compat",[nV]:"fire-rc",[iV]:"fire-rc-compat",[rV]:"fire-gcs",[sV]:"fire-gcs-compat",[oV]:"fire-fst",[lV]:"fire-fst-compat",[aV]:"fire-vertex","fire-js":"fire-js",[uV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new Map,dV=new Map,Cg=new Map;function sx(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ha(t){const e=t.name;if(Cg.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Cg.set(e,t);for(const n of Ld.values())sx(n,t);for(const n of dV.values())sx(n,t);return!0}function g_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ii(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new ac("app","Firebase",fV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=cV;function DS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Sg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw rs.create("bad-app-name",{appName:String(r)});if(n||(n=kS()),!n)throw rs.create("no-options");const o=Ld.get(r);if(o){if(ho(n,o.options)&&ho(i,o.config))return o;throw rs.create("duplicate-app",{appName:r})}const a=new wD(r);for(const h of Cg.values())a.addComponent(h);const u=new pV(n,i,a);return Ld.set(r,u),u}function VS(t=Sg){const e=Ld.get(t);if(!e&&t===Sg&&kS())return DS();if(!e)throw rs.create("no-app",{appName:t});return e}function ss(t,e,n){let i=hV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(a.join(" "));return}Ha(new fo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="firebase-heartbeat-database",gV=1,Hu="firebase-heartbeat-store";let Jp=null;function jS(){return Jp||(Jp=LD(mV,gV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hu)}catch(n){console.warn(n)}}}}).catch(t=>{throw rs.create("idb-open",{originalErrorMessage:t.message})})),Jp}async function yV(t){try{const n=(await jS()).transaction(Hu),i=await n.objectStore(Hu).get(FS(t));return await n.done,i}catch(e){if(e instanceof gr)ur.warn(e.message);else{const n=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function ox(t,e){try{const i=(await jS()).transaction(Hu,"readwrite");await i.objectStore(Hu).put(e,FS(t)),await i.done}catch(n){if(n instanceof gr)ur.warn(n.message);else{const i=rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(i.message)}}}function FS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=1024,vV=30;class wV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ax();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>vV){const a=EV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ur.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ax(),{heartbeatsToSend:i,unsentEntries:r}=xV(this._heartbeatsCache.heartbeats),o=Nd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ur.warn(n),""}}}function ax(){return new Date().toISOString().substring(0,10)}function xV(t,e=_V){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),lx(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),lx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lD()?uD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ox(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ox(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function lx(t){return Nd(JSON.stringify({version:2,heartbeats:t})).length}function EV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(t){Ha(new fo("platform-logger",e=>new DD(e),"PRIVATE")),Ha(new fo("heartbeat",e=>new wV(e),"PRIVATE")),ss(Pg,rx,t),ss(Pg,rx,"esm2020"),ss("fire-js","")}PV("");var ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,zS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function N(){}N.prototype=S.prototype,b.F=S.prototype,b.prototype=new N,b.prototype.constructor=b,b.D=function(O,j,B){for(var M=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)M[xe-2]=arguments[xe];return S.prototype[j].apply(O,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,S,N){N||(N=0);const O=Array(16);if(typeof S=="string")for(var j=0;j<16;++j)O[j]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(j=0;j<16;++j)O[j]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=b.g[0],N=b.g[1],j=b.g[2];let B=b.g[3],M;M=S+(B^N&(j^B))+O[0]+3614090360&4294967295,S=N+(M<<7&4294967295|M>>>25),M=B+(j^S&(N^j))+O[1]+3905402710&4294967295,B=S+(M<<12&4294967295|M>>>20),M=j+(N^B&(S^N))+O[2]+606105819&4294967295,j=B+(M<<17&4294967295|M>>>15),M=N+(S^j&(B^S))+O[3]+3250441966&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(B^N&(j^B))+O[4]+4118548399&4294967295,S=N+(M<<7&4294967295|M>>>25),M=B+(j^S&(N^j))+O[5]+1200080426&4294967295,B=S+(M<<12&4294967295|M>>>20),M=j+(N^B&(S^N))+O[6]+2821735955&4294967295,j=B+(M<<17&4294967295|M>>>15),M=N+(S^j&(B^S))+O[7]+4249261313&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(B^N&(j^B))+O[8]+1770035416&4294967295,S=N+(M<<7&4294967295|M>>>25),M=B+(j^S&(N^j))+O[9]+2336552879&4294967295,B=S+(M<<12&4294967295|M>>>20),M=j+(N^B&(S^N))+O[10]+4294925233&4294967295,j=B+(M<<17&4294967295|M>>>15),M=N+(S^j&(B^S))+O[11]+2304563134&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(B^N&(j^B))+O[12]+1804603682&4294967295,S=N+(M<<7&4294967295|M>>>25),M=B+(j^S&(N^j))+O[13]+4254626195&4294967295,B=S+(M<<12&4294967295|M>>>20),M=j+(N^B&(S^N))+O[14]+2792965006&4294967295,j=B+(M<<17&4294967295|M>>>15),M=N+(S^j&(B^S))+O[15]+1236535329&4294967295,N=j+(M<<22&4294967295|M>>>10),M=S+(j^B&(N^j))+O[1]+4129170786&4294967295,S=N+(M<<5&4294967295|M>>>27),M=B+(N^j&(S^N))+O[6]+3225465664&4294967295,B=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(B^S))+O[11]+643717713&4294967295,j=B+(M<<14&4294967295|M>>>18),M=N+(B^S&(j^B))+O[0]+3921069994&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(j^B&(N^j))+O[5]+3593408605&4294967295,S=N+(M<<5&4294967295|M>>>27),M=B+(N^j&(S^N))+O[10]+38016083&4294967295,B=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(B^S))+O[15]+3634488961&4294967295,j=B+(M<<14&4294967295|M>>>18),M=N+(B^S&(j^B))+O[4]+3889429448&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(j^B&(N^j))+O[9]+568446438&4294967295,S=N+(M<<5&4294967295|M>>>27),M=B+(N^j&(S^N))+O[14]+3275163606&4294967295,B=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(B^S))+O[3]+4107603335&4294967295,j=B+(M<<14&4294967295|M>>>18),M=N+(B^S&(j^B))+O[8]+1163531501&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(j^B&(N^j))+O[13]+2850285829&4294967295,S=N+(M<<5&4294967295|M>>>27),M=B+(N^j&(S^N))+O[2]+4243563512&4294967295,B=S+(M<<9&4294967295|M>>>23),M=j+(S^N&(B^S))+O[7]+1735328473&4294967295,j=B+(M<<14&4294967295|M>>>18),M=N+(B^S&(j^B))+O[12]+2368359562&4294967295,N=j+(M<<20&4294967295|M>>>12),M=S+(N^j^B)+O[5]+4294588738&4294967295,S=N+(M<<4&4294967295|M>>>28),M=B+(S^N^j)+O[8]+2272392833&4294967295,B=S+(M<<11&4294967295|M>>>21),M=j+(B^S^N)+O[11]+1839030562&4294967295,j=B+(M<<16&4294967295|M>>>16),M=N+(j^B^S)+O[14]+4259657740&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(N^j^B)+O[1]+2763975236&4294967295,S=N+(M<<4&4294967295|M>>>28),M=B+(S^N^j)+O[4]+1272893353&4294967295,B=S+(M<<11&4294967295|M>>>21),M=j+(B^S^N)+O[7]+4139469664&4294967295,j=B+(M<<16&4294967295|M>>>16),M=N+(j^B^S)+O[10]+3200236656&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(N^j^B)+O[13]+681279174&4294967295,S=N+(M<<4&4294967295|M>>>28),M=B+(S^N^j)+O[0]+3936430074&4294967295,B=S+(M<<11&4294967295|M>>>21),M=j+(B^S^N)+O[3]+3572445317&4294967295,j=B+(M<<16&4294967295|M>>>16),M=N+(j^B^S)+O[6]+76029189&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(N^j^B)+O[9]+3654602809&4294967295,S=N+(M<<4&4294967295|M>>>28),M=B+(S^N^j)+O[12]+3873151461&4294967295,B=S+(M<<11&4294967295|M>>>21),M=j+(B^S^N)+O[15]+530742520&4294967295,j=B+(M<<16&4294967295|M>>>16),M=N+(j^B^S)+O[2]+3299628645&4294967295,N=j+(M<<23&4294967295|M>>>9),M=S+(j^(N|~B))+O[0]+4096336452&4294967295,S=N+(M<<6&4294967295|M>>>26),M=B+(N^(S|~j))+O[7]+1126891415&4294967295,B=S+(M<<10&4294967295|M>>>22),M=j+(S^(B|~N))+O[14]+2878612391&4294967295,j=B+(M<<15&4294967295|M>>>17),M=N+(B^(j|~S))+O[5]+4237533241&4294967295,N=j+(M<<21&4294967295|M>>>11),M=S+(j^(N|~B))+O[12]+1700485571&4294967295,S=N+(M<<6&4294967295|M>>>26),M=B+(N^(S|~j))+O[3]+2399980690&4294967295,B=S+(M<<10&4294967295|M>>>22),M=j+(S^(B|~N))+O[10]+4293915773&4294967295,j=B+(M<<15&4294967295|M>>>17),M=N+(B^(j|~S))+O[1]+2240044497&4294967295,N=j+(M<<21&4294967295|M>>>11),M=S+(j^(N|~B))+O[8]+1873313359&4294967295,S=N+(M<<6&4294967295|M>>>26),M=B+(N^(S|~j))+O[15]+4264355552&4294967295,B=S+(M<<10&4294967295|M>>>22),M=j+(S^(B|~N))+O[6]+2734768916&4294967295,j=B+(M<<15&4294967295|M>>>17),M=N+(B^(j|~S))+O[13]+1309151649&4294967295,N=j+(M<<21&4294967295|M>>>11),M=S+(j^(N|~B))+O[4]+4149444226&4294967295,S=N+(M<<6&4294967295|M>>>26),M=B+(N^(S|~j))+O[11]+3174756917&4294967295,B=S+(M<<10&4294967295|M>>>22),M=j+(S^(B|~N))+O[2]+718787259&4294967295,j=B+(M<<15&4294967295|M>>>17),M=N+(B^(j|~S))+O[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,b.g[2]=b.g[2]+j&4294967295,b.g[3]=b.g[3]+B&4294967295}i.prototype.v=function(b,S){S===void 0&&(S=b.length);const N=S-this.blockSize,O=this.C;let j=this.h,B=0;for(;B<S;){if(j==0)for(;B<=N;)r(this,b,B),B+=this.blockSize;if(typeof b=="string"){for(;B<S;)if(O[j++]=b.charCodeAt(B++),j==this.blockSize){r(this,O),j=0;break}}else for(;B<S;)if(O[j++]=b[B++],j==this.blockSize){r(this,O),j=0;break}}this.h=j,this.o+=S},i.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;S=this.o*8;for(var N=b.length-8;N<b.length;++N)b[N]=S&255,S/=256;for(this.v(b),b=Array(16),S=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)b[S++]=this.g[N]>>>O&255;return b};function o(b,S){var N=u;return Object.prototype.hasOwnProperty.call(N,b)?N[b]:N[b]=S(b)}function a(b,S){this.h=S;const N=[];let O=!0;for(let j=b.length-1;j>=0;j--){const B=b[j]|0;O&&B==S||(N[j]=B,O=!1)}this.g=N}var u={};function h(b){return-128<=b&&b<128?o(b,function(S){return new a([S|0],S<0?-1:0)}):new a([b|0],b<0?-1:0)}function f(b){if(isNaN(b)||!isFinite(b))return g;if(b<0)return D(f(-b));const S=[];let N=1;for(let O=0;b>=N;O++)S[O]=b/N|0,N*=4294967296;return new a(S,0)}function m(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return D(m(b.substring(1),S));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(S,8));let O=g;for(let B=0;B<b.length;B+=8){var j=Math.min(8,b.length-B);const M=parseInt(b.substring(B,B+j),S);j<8?(j=f(Math.pow(S,j)),O=O.j(j).add(f(M))):(O=O.j(N),O=O.add(f(M)))}return O}var g=h(0),_=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(k(this))return-D(this).m();let b=0,S=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);b+=(O>=0?O:4294967296+O)*S,S*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(k(this))return"-"+D(this).toString(b);const S=f(Math.pow(b,6));var N=this;let O="";for(;;){const j=z(N,S).g;N=I(N,j.j(S));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(b);if(N=j,R(N))return B+O;for(;B.length<6;)B="0"+B;O=B+O}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(let S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function k(b){return b.h==-1}t.l=function(b){return b=I(this,b),k(b)?-1:R(b)?0:1};function D(b){const S=b.g.length,N=[];for(let O=0;O<S;O++)N[O]=~b.g[O];return new a(N,~b.h).add(_)}t.abs=function(){return k(this)?D(this):this},t.add=function(b){const S=Math.max(this.g.length,b.g.length),N=[];let O=0;for(let j=0;j<=S;j++){let B=O+(this.i(j)&65535)+(b.i(j)&65535),M=(B>>>16)+(this.i(j)>>>16)+(b.i(j)>>>16);O=M>>>16,B&=65535,M&=65535,N[j]=M<<16|B}return new a(N,N[N.length-1]&-2147483648?-1:0)};function I(b,S){return b.add(D(S))}t.j=function(b){if(R(this)||R(b))return g;if(k(this))return k(b)?D(this).j(D(b)):D(D(this).j(b));if(k(b))return D(this.j(D(b)));if(this.l(T)<0&&b.l(T)<0)return f(this.m()*b.m());const S=this.g.length+b.g.length,N=[];for(var O=0;O<2*S;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let j=0;j<b.g.length;j++){const B=this.i(O)>>>16,M=this.i(O)&65535,xe=b.i(j)>>>16,ft=b.i(j)&65535;N[2*O+2*j]+=M*ft,P(N,2*O+2*j),N[2*O+2*j+1]+=B*ft,P(N,2*O+2*j+1),N[2*O+2*j+1]+=M*xe,P(N,2*O+2*j+1),N[2*O+2*j+2]+=B*xe,P(N,2*O+2*j+2)}for(b=0;b<S;b++)N[b]=N[2*b+1]<<16|N[2*b];for(b=S;b<2*S;b++)N[b]=0;return new a(N,0)};function P(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function C(b,S){this.g=b,this.h=S}function z(b,S){if(R(S))throw Error("division by zero");if(R(b))return new C(g,g);if(k(b))return S=z(D(b),S),new C(D(S.g),D(S.h));if(k(S))return S=z(b,D(S)),new C(D(S.g),S.h);if(b.g.length>30){if(k(b)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var N=_,O=S;O.l(b)<=0;)N=G(N),O=G(O);var j=U(N,1),B=U(O,1);for(O=U(O,2),N=U(N,2);!R(O);){var M=B.add(O);M.l(b)<=0&&(j=j.add(N),B=M),O=U(O,1),N=U(N,1)}return S=I(b,j.j(S)),new C(j,S)}for(j=g;b.l(S)>=0;){for(N=Math.max(1,Math.floor(b.m()/S.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),B=f(N),M=B.j(S);k(M)||M.l(b)>0;)N-=O,B=f(N),M=B.j(S);R(B)&&(B=_),j=j.add(B),b=I(b,M)}return new C(j,b)}t.B=function(b){return z(this,b).h},t.and=function(b){const S=Math.max(this.g.length,b.g.length),N=[];for(let O=0;O<S;O++)N[O]=this.i(O)&b.i(O);return new a(N,this.h&b.h)},t.or=function(b){const S=Math.max(this.g.length,b.g.length),N=[];for(let O=0;O<S;O++)N[O]=this.i(O)|b.i(O);return new a(N,this.h|b.h)},t.xor=function(b){const S=Math.max(this.g.length,b.g.length),N=[];for(let O=0;O<S;O++)N[O]=this.i(O)^b.i(O);return new a(N,this.h^b.h)};function G(b){const S=b.g.length+1,N=[];for(let O=0;O<S;O++)N[O]=b.i(O)<<1|b.i(O-1)>>>31;return new a(N,b.h)}function U(b,S){const N=S>>5;S%=32;const O=b.g.length-N,j=[];for(let B=0;B<O;B++)j[B]=S>0?b.i(B+N)>>>S|b.i(B+N+1)<<32-S:b.i(B+N);return new a(j,b.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,zS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,os=a}).apply(typeof ux<"u"?ux:typeof self<"u"?self:typeof window<"u"?window:{});var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BS,Ql,US,Bh,Ig,HS,WS,$S;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _h=="object"&&_h];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var x=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var H=c[A];if(!(H in x))break e;x=x[H]}c=c[c.length-1],A=x[c],y=y(A),y!=A&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var x=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&x.push([A,y[A]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,x){return c.call.apply(c.bind,arguments)}function f(c,y,x){return f=h,f.apply(null,arguments)}function m(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function g(c,y){function x(){}x.prototype=y.prototype,c.Z=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Ob=function(A,H,$){for(var ne=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ne[Pe-2]=arguments[Pe];return y.prototype[H].apply(A,ne)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const x=Array(y);for(let A=0;A<y;A++)x[A]=c[A];return x}return[]}function R(c,y){for(let A=1;A<arguments.length;A++){const H=arguments[A];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=c.length||0;const $=H.length||0;c.length=x+$;for(let ne=0;ne<$;ne++)c[x+ne]=H[ne]}else c.push(H)}}class k{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function D(c){a.setTimeout(()=>{throw c},0)}function I(){var c=b;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class P{constructor(){this.h=this.g=null}add(y,x){const A=C.get();A.set(y,x),this.h?this.h.next=A:this.g=A,this.h=A}}var C=new k(()=>new z,c=>c.reset());class z{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let G,U=!1,b=new P,S=()=>{const c=Promise.resolve(void 0);G=()=>{c.then(N)}};function N(){for(var c;c=I();){try{c.h.call(c.g)}catch(x){D(x)}var y=C;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}U=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};a.addEventListener("test",x,y),a.removeEventListener("test",x,y)}catch{}return c}();function M(c){return/^[\s\xa0]*$/.test(c)}function xe(c,y){j.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(xe,j),xe.prototype.init=function(c,y){const x=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),Ie=0;function ct(c,y,x,A,H){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!A,this.ha=H,this.key=++Ie,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pe(c,y,x){for(const A in c)y.call(x,c[A],A,c)}function ee(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function ie(c){const y={};for(const x in c)y[x]=c[x];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(c,y){let x,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(x in A)c[x]=A[x];for(let $=0;$<te.length;$++)x=te[$],Object.prototype.hasOwnProperty.call(A,x)&&(c[x]=A[x])}}function ue(c){this.src=c,this.g={},this.h=0}ue.prototype.add=function(c,y,x,A,H){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const ne=J(c,y,A,H);return ne>-1?(y=c[ne],x||(y.fa=!1)):(y=new ct(y,this.src,$,!!A,H),y.fa=x,c.push(y)),y};function ae(c,y){const x=y.type;if(x in c.g){var A=c.g[x],H=Array.prototype.indexOf.call(A,y,void 0),$;($=H>=0)&&Array.prototype.splice.call(A,H,1),$&&(Z(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function J(c,y,x,A){for(let H=0;H<c.length;++H){const $=c[H];if(!$.da&&$.listener==y&&$.capture==!!x&&$.ha==A)return H}return-1}var me="closure_lm_"+(Math.random()*1e6|0),Ze={};function Me(c,y,x,A,H){if(Array.isArray(y)){for(let $=0;$<y.length;$++)Me(c,y[$],x,A,H);return null}return x=As(x),c&&c[ft]?c.J(y,x,u(A)?!!A.capture:!1,H):ge(c,y,x,!1,A,H)}function ge(c,y,x,A,H,$){if(!y)throw Error("Invalid event type");const ne=u(H)?!!H.capture:!!H;let Pe=Io(c);if(Pe||(c[me]=Pe=new ue(c)),x=Pe.add(y,x,A,ne,$),x.proxy)return x;if(A=$e(),x.proxy=A,A.src=c,A.listener=x,c.addEventListener)B||(H=ne),H===void 0&&(H=!1),c.addEventListener(y.toString(),A,H);else if(c.attachEvent)c.attachEvent(ln(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function $e(){function c(x){return y.call(c.src,c.listener,x)}const y=_c;return c}function _t(c,y,x,A,H){if(Array.isArray(y))for(var $=0;$<y.length;$++)_t(c,y[$],x,A,H);else A=u(A)?!!A.capture:!!A,x=As(x),c&&c[ft]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],x=J(y,x,A,H),x>-1&&(Z(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=Io(c))&&(y=c.g[y.toString()],c=-1,y&&(c=J(y,x,A,H)),(x=c>-1?y[c]:null)&&Be(x))}function Be(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[ft])ae(y.i,c);else{var x=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(x,A,c.capture):y.detachEvent?y.detachEvent(ln(x),A):y.addListener&&y.removeListener&&y.removeListener(A),(x=Io(y))?(ae(x,c),x.h==0&&(x.src=null,y[me]=null)):Z(c)}}}function ln(c){return c in Ze?Ze[c]:Ze[c]="on"+c}function _c(c,y){if(c.da)c=!0;else{y=new xe(y,this);const x=c.listener,A=c.ha||c.src;c.fa&&Be(c),c=x.call(A,y)}return c}function Io(c){return c=c[me],c instanceof ue?c:null}var Is="__closure_events_fn_"+(Math.random()*1e9>>>0);function As(c){return typeof c=="function"?c:(c[Is]||(c[Is]=function(y){return c.handleEvent(y)}),c[Is])}function kt(){O.call(this),this.i=new ue(this),this.M=this,this.G=null}g(kt,O),kt.prototype[ft]=!0,kt.prototype.removeEventListener=function(c,y,x,A){_t(this,c,y,x,A)};function Rt(c,y){var x,A=c.G;if(A)for(x=[];A;A=A.G)x.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new j(y,c);else if(y instanceof j)y.target=y.target||c;else{var H=y;y=new j(A,c),re(y,H)}H=!0;let $,ne;if(x)for(ne=x.length-1;ne>=0;ne--)$=y.g=x[ne],H=yr($,A,!0,y)&&H;if($=y.g=c,H=yr($,A,!0,y)&&H,H=yr($,A,!1,y)&&H,x)for(ne=0;ne<x.length;ne++)$=y.g=x[ne],H=yr($,A,!1,y)&&H}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const x=c.g[y];for(let A=0;A<x.length;A++)Z(x[A]);delete c.g[y],c.h--}}this.G=null},kt.prototype.J=function(c,y,x,A){return this.i.add(String(c),y,!1,x,A)},kt.prototype.K=function(c,y,x,A){return this.i.add(String(c),y,!0,x,A)};function yr(c,y,x,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let $=0;$<y.length;++$){const ne=y[$];if(ne&&!ne.da&&ne.capture==x){const Pe=ne.listener,ze=ne.ha||ne.src;ne.fa&&ae(c.i,ne),H=Pe.call(ze,A)!==!1&&H}}return H&&!A.defaultPrevented}function vc(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function ul(c){c.g=vc(()=>{c.g=null,c.i&&(c.i=!1,ul(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Qf extends O{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ul(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(c){O.call(this),this.h=c,this.g={}}g(bs,O);var Ao=[];function cl(c){pe(c.g,function(y,x){this.g.hasOwnProperty(x)&&Be(y)},c),c.g={}}bs.prototype.N=function(){bs.Z.N.call(this),cl(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bo=a.JSON.stringify,Xf=a.JSON.parse,wc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function hl(){}function xc(){}var _r={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ks(){j.call(this,"d")}g(ks,j);function ko(){j.call(this,"c")}g(ko,j);var Mi={},vr=null;function Ro(){return vr=vr||new kt}Mi.Ia="serverreachability";function Tc(c){j.call(this,Mi.Ia,c)}g(Tc,j);function wr(c){const y=Ro();Rt(y,new Tc(y))}Mi.STAT_EVENT="statevent";function dl(c,y){j.call(this,Mi.STAT_EVENT,c),this.stat=y}g(dl,j);function Nt(c){const y=Ro();Rt(y,new dl(y,c))}Mi.Ja="timingevent";function Ec(c,y){j.call(this,Mi.Ja,c),this.size=y}g(Ec,j);function Rs(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Ns(){this.g=!0}Ns.prototype.ua=function(){this.g=!1};function Yf(c,y,x,A,H,$){c.info(function(){if(c.g)if($){var ne="",Pe=$.split("&");for(let He=0;He<Pe.length;He++){var ze=Pe[He].split("=");if(ze.length>1){const pt=ze[0];ze=ze[1];const On=pt.split("_");ne=On.length>=2&&On[1]=="type"?ne+(pt+"="+ze+"&"):ne+(pt+"=redacted&")}}}else ne=null;else ne=$;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+y+`
`+x+`
`+ne})}function Jf(c,y,x,A,H,$,ne){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+y+`
`+x+`
`+$+" "+ne})}function xr(c,y,x,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+ep(c,x)+(A?" "+A:"")})}function fl(c,y){c.info(function(){return"TIMEOUT: "+y})}Ns.prototype.info=function(){};function ep(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var x=$[c];if(!(x.length<2)){var A=x[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ne=1;ne<A.length;ne++)A[ne]=""}}}}return bo($)}catch{return y}}var No={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sc;function un(){}g(un,hl),un.prototype.g=function(){return new XMLHttpRequest},Sc=new un;function de(c){return encodeURIComponent(String(c))}function Cc(c){var y=1;c=c.split(":");const x=[];for(;y>0&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function Zn(c,y,x,A){this.j=c,this.i=y,this.l=x,this.S=A||1,this.V=new bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pl}function pl(){this.i=null,this.g="",this.h=!1}var ml={},Ls={};function Lo(c,y,x){c.M=1,c.A=Ke(Jt(y)),c.u=x,c.R=!0,Oi(c,null)}function Oi(c,y){c.F=Date.now(),Mo(c),c.B=Jt(c.A);var x=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Fo(x.i,"t",A),c.C=0,x=c.j.L,c.h=new pl,c.g=bl(c.j,x?y:null,!c.u),c.P>0&&(c.O=new Qf(f(c.Y,c,c.g),c.P)),y=c.V,x=c.g,A=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(Ao[0]=H.toString()),H=Ao);for(let $=0;$<H.length;$++){const ne=Me(x,H[$],A||y.handleEvent,!1,y.h||y);if(!ne)break;y.g[ne.key]=ne}y=c.J?ie(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),wr(),Yf(c.i,c.v,c.B,c.l,c.S,c.u)}Zn.prototype.ba=function(c){c=c.target;const y=this.O;y&&di(c)==3?y.j():this.Y(c)},Zn.prototype.Y=function(c){try{if(c==this.g)e:{const Pe=di(this.g),ze=this.g.ya(),He=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Tl(this.g)))){this.K||Pe!=4||ze==7||(ze==8||He<=0?wr(3):wr(2)),Oo(this);var y=this.g.ca();this.X=y;var x=Ic(this);if(this.o=y==200,Jf(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(A)){var $=A;break t}}$=null}if(c=$)xr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gl(this,c);else{this.o=!1,this.m=3,Nt(12),Rn(this),Ms(this);break e}}if(this.R){c=!0;let pt;for(;!this.K&&this.C<x.length;)if(pt=tp(this,x),pt==Ls){Pe==4&&(this.m=4,Nt(14),c=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==ml){this.m=4,Nt(15),xr(this.i,this.l,x,"[Invalid Chunk]"),c=!1;break}else xr(this.i,this.l,pt,null),gl(this,pt);if(Ac(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||x.length!=0||this.h.h||(this.m=1,Nt(16),c=!1),this.o=this.o&&c,!c)xr(this.i,this.l,x,"[Invalid Chunked Response]"),Rn(this),Ms(this);else if(x.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Il(ne),ne.P=!0,Nt(11))}}else xr(this.i,this.l,x,null),gl(this,x);Pe==4&&Rn(this),this.o&&!this.K&&(Pe==4?Tn(this.j,this):(this.o=!1,Mo(this)))}else El(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),Rn(this),Ms(this)}}}catch{}finally{}};function Ic(c){if(!Ac(c))return c.g.la();const y=Tl(c.g);if(y==="")return"";let x="";const A=y.length,H=di(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Rn(c),Ms(c),"";c.h.i=new a.TextDecoder}for(let $=0;$<A;$++)c.h.h=!0,x+=c.h.i.decode(y[$],{stream:!(H&&$==A-1)});return y.length=0,c.h.g+=x,c.C=0,c.h.g}function Ac(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function tp(c,y){var x=c.C,A=y.indexOf(`
`,x);return A==-1?Ls:(x=Number(y.substring(x,A)),isNaN(x)?ml:(A+=1,A+x>y.length?Ls:(y=y.slice(A,A+x),c.C=A+x,y)))}Zn.prototype.cancel=function(){this.K=!0,Rn(this)};function Mo(c){c.T=Date.now()+c.H,bc(c,c.H)}function bc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Rs(f(c.aa,c),y)}function Oo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}Zn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(fl(this.i,this.B),this.M!=2&&(wr(),Nt(17)),Rn(this),this.m=2,Ms(this)):bc(this,this.T-c)};function Ms(c){c.j.I==0||c.K||Tn(c.j,c)}function Rn(c){Oo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,cl(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function gl(c,y){try{var x=c.j;if(x.I!=0&&(x.g==c||Os(x.h,c))){if(!c.L&&Os(x.h,c)&&x.I==3){try{var A=x.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<c.F)Wo(x),Uo(x);else break e;Cl(x),Nt(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Rs(f(x.Va,x),6e3));Nc(x.h)<=1&&x.ta&&(x.ta=void 0)}else pi(x,11)}else if((c.L||x.g==c)&&Wo(x),!M(y))for(H=x.Ba.g.parse(y),y=0;y<H.length;y++){let He=H[y];const pt=He[0];if(!(pt<=x.K))if(x.K=pt,He=He[1],x.I==2)if(He[0]=="c"){x.M=He[1],x.ba=He[2];const On=He[3];On!=null&&(x.ka=On,x.j.info("VER="+x.ka));const Xn=He[4];Xn!=null&&(x.za=Xn,x.j.info("SVER="+x.za));const Dn=He[5];Dn!=null&&typeof Dn=="number"&&Dn>0&&(A=1.5*Dn,x.O=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const mi=c.g;if(mi){const Go=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Go){var $=A.h;$.g||Go.indexOf("spdy")==-1&&Go.indexOf("quic")==-1&&Go.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Di($,$.h),$.h=null))}if(A.G){const Zo=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(A.wa=Zo,ce(A.J,A.G,Zo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-c.F,x.j.info("Handshake RTT: "+x.T+"ms")),A=x;var ne=c;if(A.na=Al(A,A.L?A.ba:null,A.W),ne.L){yl(A.h,ne);var Pe=ne,ze=A.O;ze&&(Pe.H=ze),Pe.D&&(Oo(Pe),Mo(Pe)),A.g=ne}else Sl(A);x.i.length>0&&fi(x)}else He[0]!="stop"&&He[0]!="close"||pi(x,7);else x.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?pi(x,7):Ae(x):He[0]!="noop"&&x.l&&x.l.qa(He),x.A=0)}}wr(4)}catch{}}var np=class{constructor(c,y){this.g=c,this.map=y}};function kc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Nc(c){return c.h?1:c.g?c.g.size:0}function Os(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Di(c,y){c.g?c.g.add(y):c.h=y}function yl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}kc.prototype.cancel=function(){if(this.i=_l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function _l(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.G);return y}return T(c.i)}var Tr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oe(c,y){if(c){c=c.split("&");for(let x=0;x<c.length;x++){const A=c[x].indexOf("=");let H,$=null;A>=0?(H=c[x].substring(0,A),$=c[x].substring(A+1)):H=c[x],y(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Fe(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Fe?(this.l=c.l,Nn(this,c.j),this.o=c.o,this.g=c.g,Ln(this,c.u),this.h=c.h,Ds(this,Vs(c.i)),this.m=c.m):c&&(y=String(c).match(Tr))?(this.l=!1,Nn(this,y[1]||"",!0),this.o=Vi(y[2]||""),this.g=Vi(y[3]||"",!0),Ln(this,y[4]),this.h=Vi(y[5]||"",!0),Ds(this,y[6]||"",!0),this.m=Vi(y[7]||"")):(this.l=!1,this.i=new Kn(null,this.l))}Fe.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ui(y,Lc,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ui(y,Lc,!0),"@"),c.push(de(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&c.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(ui(x,x.charAt(0)=="/"?ji:Do,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",ui(x,Fi)),c.join("")},Fe.prototype.resolve=function(c){const y=Jt(this);let x=!!c.j;x?Nn(y,c.j):x=!!c.o,x?y.o=c.o:x=!!c.g,x?y.g=c.g:x=c.u!=null;var A=c.h;if(x)Ln(y,c.u);else if(x=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=y.h.lastIndexOf("/");H!=-1&&(A=y.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let ne=0;ne<H.length;){const Pe=H[ne++];Pe=="."?A&&ne==H.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),A&&ne==H.length&&$.push("")):($.push(Pe),A=!0)}A=$.join("/")}else A=H}return x?y.h=A:x=c.i.toString()!=="",x?Ds(y,Vs(c.i)):x=!!c.m,x&&(y.m=c.m),y};function Jt(c){return new Fe(c)}function Nn(c,y,x){c.j=x?Vi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Ln(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Ds(c,y,x){y instanceof Kn?(c.i=y,vl(c.i,c.l)):(x||(y=ui(y,ht)),c.i=new Kn(y,c.l))}function ce(c,y,x){c.i.set(y,x)}function Ke(c){return ce(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Vi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ui(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,cn),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function cn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Lc=/[#\/\?@]/g,Do=/[#\?:]/g,ji=/[#\?]/g,ht=/[#\?@]/g,Fi=/#/g;function Kn(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function xn(c){c.g||(c.g=new Map,c.h=0,c.i&&Oe(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=Kn.prototype,t.add=function(c,y){xn(this),this.i=null,c=ci(this,c);let x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function Vo(c,y){xn(c),y=ci(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Er(c,y){return xn(c),y=ci(c,y),c.g.has(y)}t.forEach=function(c,y){xn(this),this.g.forEach(function(x,A){x.forEach(function(H){c.call(y,H,A,this)},this)},this)};function jo(c,y){xn(c);let x=[];if(typeof y=="string")Er(c,y)&&(x=x.concat(c.g.get(ci(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)x=x.concat(c[y]);return x}t.set=function(c,y){return xn(this),this.i=null,c=ci(this,c),Er(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=jo(this,c),c.length>0?String(c[0]):y):y};function Fo(c,y,x){Vo(c,y),x.length>0&&(c.i=null,c.g.set(ci(c,y),T(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var x=y[A];const H=de(x);x=jo(this,x);for(let $=0;$<x.length;$++){let ne=H;x[$]!==""&&(ne+="="+de(x[$])),c.push(ne)}}return this.i=c.join("&")};function Vs(c){const y=new Kn;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function ci(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function vl(c,y){y&&!c.j&&(xn(c),c.i=null,c.g.forEach(function(x,A){const H=A.toLowerCase();A!=H&&(Vo(this,A),Fo(this,H,x))},c)),c.j=y}function zo(c,y){const x=new Ns;if(a.Image){const A=new Image;A.onload=m(Mn,x,"TestLoadImage: loaded",!0,y,A),A.onerror=m(Mn,x,"TestLoadImage: error",!1,y,A),A.onabort=m(Mn,x,"TestLoadImage: abort",!1,y,A),A.ontimeout=m(Mn,x,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Mc(c,y){const x=new Ns,A=new AbortController,H=setTimeout(()=>{A.abort(),Mn(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then($=>{clearTimeout(H),$.ok?Mn(x,"TestPingServer: ok",!0,y):Mn(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Mn(x,"TestPingServer: error",!1,y)})}function Mn(c,y,x,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(x)}catch{}}function ip(){this.g=new wc}function Ee(c){this.i=c.Sb||null,this.h=c.ab||!1}g(Ee,hl),Ee.prototype.g=function(){return new en(this.i,this.h)};function en(c,y){kt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(en,kt),t=en.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,zi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qe(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function qe(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Pr(this):zi(this),this.readyState==3&&qe(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Pr(this))},t.Na=function(c){this.g&&(this.response=c,Pr(this))},t.ga=function(){this.g&&Pr(this)};function Pr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,zi(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function zi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(en.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bo(c){let y="";return pe(c,function(x,A){y+=A,y+=":",y+=x,y+=`\r
`}),y}function js(c,y,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=Bo(x),typeof c=="string"?x!=null&&de(x):ce(c,y,x))}function Ue(c){kt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Ue,kt);var wl=/^https?$/i,Fs=["POST","PUT"];t=Ue.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){vt(this,$);return}if(c=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)x.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())x.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find($=>$.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Fs,y,void 0)>=0)||A||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of x)this.g.setRequestHeader($,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){vt(this,$)}};function vt(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,hi(c),zs(c)}function hi(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Rt(this,"complete"),Rt(this,"abort"),zs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zs(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xl(this):this.Xa())},t.Xa=function(){xl(this)};function xl(c){if(c.h&&typeof o<"u"){if(c.v&&di(c)==4)setTimeout(c.Ca.bind(c),0);else if(Rt(c,"readystatechange"),di(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var A;if(A=$===0){let ne=String(c.D).match(Tr)[1]||null;!ne&&a.self&&a.self.location&&(ne=a.self.location.protocol.slice(0,-1)),A=!wl.test(ne?ne.toLowerCase():"")}x=A}if(x)Rt(c,"complete"),Rt(c,"success");else{c.o=6;try{var H=di(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",hi(c)}}finally{zs(c)}}}}function zs(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const x=c.g;c.g=null,y||Rt(c,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function di(c){return c.g?c.g.readyState:0}t.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Xf(y)}};function Tl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function El(c){const y={};c=(c.g&&di(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(M(c[A]))continue;var x=Cc(c[A]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const $=y[H]||[];y[H]=$,$.push(x)}ee(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function Pl(c){this.za=0,this.i=[],this.j=new Ns,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bs("baseRetryDelayMs",5e3,c),this.Za=Bs("retryDelaySeedMs",1e4,c),this.Ta=Bs("forwardChannelMaxRetries",2,c),this.va=Bs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new kc(c&&c.concurrentRequestLimit),this.Ba=new ip,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,x,A){Nt(0),this.W=c,this.H=y||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.J=Al(this,null,this.W),fi(this)};function Ae(c){if(hn(c),c.I==3){var y=c.V++,x=Jt(c.J);if(ce(x,"SID",c.M),ce(x,"RID",y),ce(x,"TYPE","terminate"),Bi(c,x),y=new Zn(c,c.j,y),y.M=2,y.A=Ke(Jt(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=y.A,x=!0),x||(y.g=bl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Mo(y)}Qn(c)}function Uo(c){c.g&&(Il(c),c.g.cancel(),c.g=null)}function hn(c){Uo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Wo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function fi(c){if(!Rc(c.h)&&!c.m){c.m=!0;var y=c.Ea;G||S(),U||(G(),U=!0),b.add(y,c),c.D=0}}function Oc(c,y){return Nc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Rs(f(c.Ea,c,y),jc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new Zn(this,this.j,c);let $=this.o;if(this.U&&($?($=ie($),re($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Vc(this,H,y),x=Jt(this.J),ce(x,"RID",c),ce(x,"CVER",22),this.G&&ce(x,"X-HTTP-Session-Id",this.G),Bi(this,x),$&&(this.R?y="headers="+de(Bo($))+"&"+y:this.u&&js(x,this.u,$)),Di(this.h,H),this.Ra&&ce(x,"TYPE","init"),this.S?(ce(x,"$req",y),ce(x,"SID","null"),H.U=!0,Lo(H,x,null)):Lo(H,x,y),this.I=2}}else this.I==3&&(c?Dc(this,c):this.i.length==0||Rc(this.h)||Dc(this))};function Dc(c,y){var x;y?x=y.l:x=c.V++;const A=Jt(c.J);ce(A,"SID",c.M),ce(A,"RID",x),ce(A,"AID",c.K),Bi(c,A),c.u&&c.o&&js(A,c.u,c.o),x=new Zn(c,c.j,x,c.D+1),c.u===null&&(x.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Vc(c,x,1e3),x.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Di(c.h,x),Lo(x,A,y)}function Bi(c,y){c.H&&pe(c.H,function(x,A){ce(y,A,x)}),c.l&&pe({},function(x,A){ce(y,A,x)})}function Vc(c,y,x){x=Math.min(c.i.length,x);const A=c.l?f(c.l.Ka,c.l,c):null;e:{var H=c.i;let Pe=-1;for(;;){const ze=["count="+x];Pe==-1?x>0?(Pe=H[0].g,ze.push("ofs="+Pe)):Pe=0:ze.push("ofs="+Pe);let He=!0;for(let pt=0;pt<x;pt++){var $=H[pt].g;const On=H[pt].map;if($-=Pe,$<0)Pe=Math.max(0,H[pt].g-100),He=!1;else try{$="req"+$+"_"||"";try{var ne=On instanceof Map?On:Object.entries(On);for(const[Xn,Dn]of ne){let mi=Dn;u(Dn)&&(mi=bo(Dn)),ze.push($+Xn+"="+encodeURIComponent(mi))}}catch(Xn){throw ze.push($+"type="+encodeURIComponent("_badmap")),Xn}}catch{A&&A(On)}}if(He){ne=ze.join("&");break e}}ne=void 0}return c=c.i.splice(0,x),y.G=c,ne}function Sl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;G||S(),U||(G(),U=!0),b.add(y,c),c.A=0}}function Cl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Rs(f(c.Da,c),jc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Ho(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Rs(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),Uo(this),Ho(this))};function Il(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Ho(c){c.g=new Zn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Jt(c.na);ce(y,"RID","rpc"),ce(y,"SID",c.M),ce(y,"AID",c.K),ce(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&ce(y,"TO",c.ia),ce(y,"TYPE","xmlhttp"),Bi(c,y),c.u&&c.o&&js(y,c.u,c.o),c.O&&(c.g.H=c.O);var x=c.g;c=c.ba,x.M=1,x.A=Ke(Jt(y)),x.u=null,x.R=!0,Oi(x,c)}t.Va=function(){this.C!=null&&(this.C=null,Uo(this),Cl(this),Nt(19))};function Wo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Tn(c,y){var x=null;if(c.g==y){Wo(c),Il(c),c.g=null;var A=2}else if(Os(c.h,y))x=y.G,yl(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;A=Ro(),Rt(A,new Ec(A,x)),fi(c)}else Sl(c);else if(H=y.m,H==3||H==0&&y.X>0||!(A==1&&Oc(c,y)||A==2&&Cl(c)))switch(x&&x.length>0&&(y=c.h,y.i=y.i.concat(x)),H){case 1:pi(c,5);break;case 4:pi(c,10);break;case 3:pi(c,6);break;default:pi(c,2)}}}function jc(c,y){let x=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(x*=2),x*y}function pi(c,y){if(c.j.info("Error code "+y),y==2){var x=f(c.bb,c),A=c.Ua;const H=!A;A=new Fe(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Nn(A,"https"),Ke(A),H?zo(A.toString(),x):Mc(A.toString(),x)}else Nt(2);c.I=0,c.l&&c.l.pa(y),Qn(c),hn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Qn(c){if(c.I=0,c.ja=[],c.l){const y=_l(c.h);(y.length!=0||c.i.length!=0)&&(R(c.ja,y),R(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function Al(c,y,x){var A=x instanceof Fe?Jt(x):new Fe(x);if(A.g!="")y&&(A.g=y+"."+A.g),Ln(A,A.u);else{var H=a.location;A=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const $=new Fe(null);A&&Nn($,A),y&&($.g=y),H&&Ln($,H),x&&($.h=x),A=$}return x=c.G,y=c.wa,x&&y&&ce(A,x,y),ce(A,"VER",c.ka),Bi(c,A),A}function bl(c,y,x){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ue(new Ee({ab:x})):new Ue(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $o(){}t=$o.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function qo(){}qo.prototype.g=function(c,y){return new Ht(c,y)};function Ht(c,y){kt.call(this),this.g=new Pl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!M(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Sr(this)}g(Ht,kt),Ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Ae(this.g)},Ht.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.v&&(x={},x.__data__=bo(c),c=x);y.i.push(new np(y.Ya++,c)),y.I==3&&fi(y)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Ae(this.g),delete this.g,Ht.Z.N.call(this)};function kl(c){ks.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(kl,ks);function Fc(){ko.call(this),this.status=1}g(Fc,ko);function Sr(c){this.g=c}g(Sr,$o),Sr.prototype.ra=function(){Rt(this.g,"a")},Sr.prototype.qa=function(c){Rt(this.g,new kl(c))},Sr.prototype.pa=function(c){Rt(this.g,new Fc)},Sr.prototype.oa=function(){Rt(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,$S=function(){return new qo},WS=function(){return Ro()},HS=Mi,Ig={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},No.NO_ERROR=0,No.TIMEOUT=8,No.HTTP_ERROR=6,Bh=No,Pc.COMPLETE="complete",US=Pc,xc.EventType=_r,_r.OPEN="a",_r.CLOSE="b",_r.ERROR="c",_r.MESSAGE="d",kt.prototype.listen=kt.prototype.J,Ql=xc,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,BS=Ue}).apply(typeof _h<"u"?_h:typeof self<"u"?self:typeof window<"u"?window:{});const cx="@firebase/firestore",hx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new p_("@firebase/firestore");function na(){return po.logLevel}function oe(t,...e){if(po.logLevel<=Re.DEBUG){const n=e.map(y_);po.debug(`Firestore (${il}): ${t}`,...n)}}function cr(t,...e){if(po.logLevel<=Re.ERROR){const n=e.map(y_);po.error(`Firestore (${il}): ${t}`,...n)}}function Wa(t,...e){if(po.logLevel<=Re.WARN){const n=e.map(y_);po.warn(`Firestore (${il}): ${t}`,...n)}}function y_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,qS(t,i,n)}function qS(t,e,n){let i=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw cr(i),new Error(i)}function We(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||qS(e,r,i)}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class CV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IV{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new as;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new as,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new as)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new GS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class AV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new AV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const i=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=RV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Ne(t,e){return t<e?-1:t>e?1:0}function Ag(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return em(r)===em(o)?Ne(r,o):em(r)?1:-1}return Ne(t.length,e.length)}const NV=55296,LV=57343;function em(t){const e=t.charCodeAt(0);return e>=NV&&e<=LV}function $a(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="__name__";class vi{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=vi.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Ne(e.length,n.length)}static compareSegments(e,n){const i=vi.isNumericId(e),r=vi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?vi.extractNumericId(e).compare(vi.extractNumericId(n)):Ag(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class et extends vi{construct(e,n,i){return new et(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new et(n)}static emptyPath(){return new et([])}}const MV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends vi{construct(e,n,i){return new Ft(e,n,i)}static isValidIdentifier(e){return MV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fx}static keyField(){return new Ft([fx])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new fe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new fe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new fe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(et.fromString(e))}static fromName(e){return new ye(et.fromString(e).popFirst(5))}static empty(){return new ye(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t,e,n){if(!n)throw new fe(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OV(t,e,n,i){if(e===!0&&i===!0)throw new fe(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function px(t){if(!ye.isDocumentKey(t))throw new fe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mx(t){if(ye.isDocumentKey(t))throw new fe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function KS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function v_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function ir(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=v_(t);throw new fe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function uc(t,e){if(!KS(t))throw new fe(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new fe(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=-62135596800,yx=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*yx);return new tt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gx)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yx}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uc(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:Pt("string",tt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new tt(0,0))}static max(){return new Se(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=-1;function DV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new tt(n+1,0):new tt(n,i));return new ms(r,ye.empty(),e)}function VV(t){return new ms(t.readTime,t.key,Wu)}class ms{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ms(Se.min(),ye.empty(),Wu)}static max(){return new ms(Se.max(),ye.empty(),Wu)}}function jV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==FV)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function BV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=-1;function Nf(t){return t==null}function Md(t){return t===0&&1/t==-1/0}function UV(t){return typeof t=="number"&&Number.isInteger(t)&&!Md(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="";function HV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_x(e)),e=WV(t.get(n),e);return _x(e)}function WV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case QS:n+="";break;default:n+=o}}return n}function _x(t){return t+QS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vh(this.root,e,this.comparator,!0)}}class vh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??jt.RED,this.left=r??jt.EMPTY,this.right=o??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new jt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return jt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wx(this.data.getIterator())}getIteratorFrom(e){return new wx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class wx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ri([])}unionWith(e){let n=new bt(Ft.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ri(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new YS("Invalid base64 string: "+o):o}}(e);return new Ut(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const $V=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=$V.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ys(t){return typeof t=="string"?Ut.fromBase64String(t):Ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="server_timestamp",eC="__type__",tC="__previous_value__",nC="__local_write_time__";function x_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[eC])==null?void 0:i.stringValue)===JS}function Lf(t){const e=t.mapValue.fields[tC];return x_(e)?Lf(e):e}function $u(t){const e=gs(t.mapValue.fields[nC].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Od="(default)";class qu{constructor(e,n){this.projectId=e,this.database=n||Od}static empty(){return new qu("","")}get isDefaultDatabase(){return this.database===Od}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="__type__",GV="__max__",wh={mapValue:{}},rC="__vector__",Dd="value";function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?x_(t)?4:KV(t)?9007199254740991:ZV(t)?10:11:we(28295,{value:t})}function Ri(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $u(t).isEqual($u(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=gs(r.timestampValue),u=gs(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return ys(r.bytesValue).isEqual(ys(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return mt(r.geoPointValue.latitude)===mt(o.geoPointValue.latitude)&&mt(r.geoPointValue.longitude)===mt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return mt(r.integerValue)===mt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=mt(r.doubleValue),u=mt(o.doubleValue);return a===u?Md(a)===Md(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return $a(t.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(vx(a)!==vx(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Ri(a[h],u[h])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function Gu(t,e){return(t.values||[]).find(n=>Ri(n,e))!==void 0}function qa(t,e){if(t===e)return 0;const n=_s(t),i=_s(e);if(n!==i)return Ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=mt(o.integerValue||o.doubleValue),h=mt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return xx(t.timestampValue,e.timestampValue);case 4:return xx($u(t),$u(e));case 5:return Ag(t.stringValue,e.stringValue);case 6:return function(o,a){const u=ys(o),h=ys(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=Ne(u[f],h[f]);if(m!==0)return m}return Ne(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Ne(mt(o.latitude),mt(a.latitude));return u!==0?u:Ne(mt(o.longitude),mt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Tx(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,T,R,k;const u=o.fields||{},h=a.fields||{},f=(_=u[Dd])==null?void 0:_.arrayValue,m=(T=h[Dd])==null?void 0:T.arrayValue,g=Ne(((R=f==null?void 0:f.values)==null?void 0:R.length)||0,((k=m==null?void 0:m.values)==null?void 0:k.length)||0);return g!==0?g:Tx(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===wh.mapValue&&a===wh.mapValue)return 0;if(o===wh.mapValue)return 1;if(a===wh.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const _=Ag(h[g],m[g]);if(_!==0)return _;const T=qa(u[h[g]],f[m[g]]);if(T!==0)return T}return Ne(h.length,m.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function xx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=gs(t),i=gs(e),r=Ne(n.seconds,i.seconds);return r!==0?r:Ne(n.nanos,i.nanos)}function Tx(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=qa(n[r],i[r]);if(o)return o}return Ne(n.length,i.length)}function Ga(t){return bg(t)}function bg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=gs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ys(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=bg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${bg(n.fields[a])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function Uh(t){switch(_s(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(t);return e?16+Uh(e):16;case 5:return 2*t.stringValue.length;case 6:return ys(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Uh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Eo(i.fields,(o,a)=>{r+=o.length+Uh(a)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function kg(t){return!!t&&"integerValue"in t}function T_(t){return!!t&&"arrayValue"in t}function Ex(t){return!!t&&"nullValue"in t}function Px(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hh(t){return!!t&&"mapValue"in t}function ZV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[iC])==null?void 0:i.stringValue)===rC}function pu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Eo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=pu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(t.arrayValue.values[n]);return e}return{...t}}function KV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=Ft.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=pu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Hh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Eo(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Un(pu(this.value))}}function sC(t){const e=[];return Eo(t.fields,(n,i)=>{const r=new Ft([n]);if(Hh(i)){const o=sC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new ri(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Qt(e,0,Se.min(),Se.min(),Se.min(),Un.empty(),0)}static newFoundDocument(e,n,i,r){return new Qt(e,1,n,Se.min(),i,r,0)}static newNoDocument(e,n){return new Qt(e,2,n,Se.min(),Se.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,Se.min(),Se.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){this.position=e,this.inclusive=n}}function Sx(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ye.comparator(ye.fromName(a.referenceValue),n.key):i=qa(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Cx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n="asc"){this.field=e,this.dir=n}}function QV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{}class Ct extends oC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new YV(e,n,i):n==="array-contains"?new t4(e,i):n==="in"?new n4(e,i):n==="not-in"?new i4(e,i):n==="array-contains-any"?new r4(e,i):new Ct(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new JV(e,i):new e4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qa(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends oC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ni(e,n)}matches(e){return aC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function aC(t){return t.op==="and"}function lC(t){return XV(t)&&aC(t)}function XV(t){for(const e of t.filters)if(e instanceof Ni)return!1;return!0}function Rg(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+Ga(t.value);if(lC(t))return t.filters.map(e=>Rg(e)).join(",");{const e=t.filters.map(n=>Rg(n)).join(",");return`${t.op}(${e})`}}function uC(t,e){return t instanceof Ct?function(i,r){return r instanceof Ct&&i.op===r.op&&i.field.isEqual(r.field)&&Ri(i.value,r.value)}(t,e):t instanceof Ni?function(i,r){return r instanceof Ni&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&uC(a,r.filters[u]),!0):!1}(t,e):void we(19439)}function cC(t){return t instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Ga(n.value)}`}(t):t instanceof Ni?function(n){return n.op.toString()+" {"+n.getFilters().map(cC).join(" ,")+"}"}(t):"Filter"}class YV extends Ct{constructor(e,n,i){super(e,n,i),this.key=ye.fromName(i.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class JV extends Ct{constructor(e,n){super(e,"in",n),this.keys=hC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class e4 extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=hC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ye.fromName(i.referenceValue))}class t4 extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return T_(n)&&Gu(n.arrayValue,this.value)}}class n4 extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gu(this.value.arrayValue,n)}}class i4 extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gu(this.value.arrayValue,n)}}class r4 extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!T_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Gu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function Ix(t,e=null,n=[],i=[],r=null,o=null,a=null){return new s4(t,e,n,i,r,o,a)}function E_(t){const e=Ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Rg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ga(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ga(i)).join(",")),e.Te=n}return e.Te}function P_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cx(t.startAt,e.startAt)&&Cx(t.endAt,e.endAt)}function Ng(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function o4(t,e,n,i,r,o,a,u){return new Mf(t,e,n,i,r,o,a,u)}function S_(t){return new Mf(t)}function Ax(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function a4(t){return t.collectionGroup!==null}function mu(t){const e=Ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new bt(Ft.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new jd(o,i))}),n.has(Ft.keyField().canonicalString())||e.Ie.push(new jd(Ft.keyField(),i))}return e.Ie}function Pi(t){const e=Ce(t);return e.Ee||(e.Ee=l4(e,mu(t))),e.Ee}function l4(t,e){if(t.limitType==="F")return Ix(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new jd(r.field,o)});const n=t.endAt?new Vd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Vd(t.startAt.position,t.startAt.inclusive):null;return Ix(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Lg(t,e,n){return new Mf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Of(t,e){return P_(Pi(t),Pi(e))&&t.limitType===e.limitType}function dC(t){return`${E_(Pi(t))}|lt:${t.limitType}`}function ia(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>cC(r)).join(", ")}]`),Nf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ga(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ga(r)).join(",")),`Target(${i})`}(Pi(t))}; limitType=${t.limitType})`}function Df(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ye.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of mu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=Sx(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,mu(i),r)||i.endAt&&!function(a,u,h){const f=Sx(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,mu(i),r))}(t,e)}function u4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fC(t){return(e,n)=>{let i=!1;for(const r of mu(t)){const o=c4(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function c4(t,e,n){const i=t.field.isKeyField()?ye.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?qa(h,f):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return XS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new ut(ye.comparator);function hr(){return h4}const pC=new ut(ye.comparator);function Xl(...t){let e=pC;for(const n of t)e=e.insert(n.key,n);return e}function mC(t){let e=pC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Js(){return gu()}function gC(){return gu()}function gu(){return new Po(t=>t.toString(),(t,e)=>t.isEqual(e))}const d4=new ut(ye.comparator),f4=new bt(ye.comparator);function Le(...t){let e=f4;for(const n of t)e=e.add(n);return e}const p4=new bt(Ne);function m4(){return p4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function yC(t){return{integerValue:""+t}}function g4(t,e){return UV(e)?yC(e):C_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function y4(t,e,n){return t instanceof Fd?function(r,o){const a={fields:{[eC]:{stringValue:JS},[nC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&x_(o)&&(o=Lf(o)),o&&(a.fields[tC]=o),{mapValue:a}}(n,e):t instanceof Zu?vC(t,e):t instanceof Ku?wC(t,e):function(r,o){const a=_C(r,o),u=bx(a)+bx(r.Ae);return kg(a)&&kg(r.Ae)?yC(u):C_(r.serializer,u)}(t,e)}function _4(t,e,n){return t instanceof Zu?vC(t,e):t instanceof Ku?wC(t,e):n}function _C(t,e){return t instanceof zd?function(i){return kg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Fd extends Vf{}class Zu extends Vf{constructor(e){super(),this.elements=e}}function vC(t,e){const n=xC(e);for(const i of t.elements)n.some(r=>Ri(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ku extends Vf{constructor(e){super(),this.elements=e}}function wC(t,e){let n=xC(e);for(const i of t.elements)n=n.filter(r=>!Ri(r,i));return{arrayValue:{values:n}}}class zd extends Vf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bx(t){return mt(t.integerValue||t.doubleValue)}function xC(t){return T_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function v4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Zu&&r instanceof Zu||i instanceof Ku&&r instanceof Ku?$a(i.elements,r.elements,Ri):i instanceof zd&&r instanceof zd?Ri(i.Ae,r.Ae):i instanceof Fd&&r instanceof Fd}(t.transform,e.transform)}class w4{constructor(e,n){this.version=e,this.transformResults=n}}class Si{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jf{}function TC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new I_(t.key,Si.none()):new cc(t.key,t.data,Si.none());{const n=t.data,i=Un.empty();let r=new bt(Ft.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new So(t.key,i,new ri(r.toArray()),Si.none())}}function x4(t,e,n){t instanceof cc?function(r,o,a){const u=r.value.clone(),h=Rx(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof So?function(r,o,a){if(!Wh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Rx(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(EC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function yu(t,e,n,i){return t instanceof cc?function(o,a,u,h){if(!Wh(o.precondition,a))return u;const f=o.value.clone(),m=Nx(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof So?function(o,a,u,h){if(!Wh(o.precondition,a))return u;const f=Nx(o.fieldTransforms,h,a),m=a.data;return m.setAll(EC(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Wh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function T4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=_C(i.transform,r||null);o!=null&&(n===null&&(n=Un.empty()),n.set(i.field,o))}return n||null}function kx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&$a(i,r,(o,a)=>v4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cc extends jf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class So extends jf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function EC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Rx(t,e,n){const i=new Map;We(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,_4(a,u,n[r]))}return i}function Nx(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,y4(o,a,e))}return i}class I_ extends jf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class E4 extends jf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&x4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=yu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=yu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=gC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=TC(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Le())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,(n,i)=>kx(n,i))&&$a(this.baseMutations,e.baseMutations,(n,i)=>kx(n,i))}}class A_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return d4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new A_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,De;function I4(t){switch(t){case X.OK:return we(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function PC(t){if(t===void 0)return cr("GRPC error has no .code"),X.UNKNOWN;switch(t){case xt.OK:return X.OK;case xt.CANCELLED:return X.CANCELLED;case xt.UNKNOWN:return X.UNKNOWN;case xt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case xt.INTERNAL:return X.INTERNAL;case xt.UNAVAILABLE:return X.UNAVAILABLE;case xt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case xt.NOT_FOUND:return X.NOT_FOUND;case xt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case xt.ABORTED:return X.ABORTED;case xt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case xt.DATA_LOSS:return X.DATA_LOSS;default:return we(39323,{code:t})}}(De=xt||(xt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new os([4294967295,4294967295],0);function Lx(t){const e=A4().encode(t),n=new zS;return n.update(e),new Uint8Array(n.digest())}function Mx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new os([n,i],0),new os([r,o],0)]}class b_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Yl(`Invalid padding: ${n}`);if(i<0)throw new Yl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=os.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(os.fromNumber(i)));return r.compare(b4)===1&&(r=new os([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Lx(e),[i,r]=Mx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new b_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Lx(e),[i,r]=Mx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,hc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ff(Se.min(),r,new ut(Ne),hr(),Le())}}class hc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new hc(i,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class SC{constructor(e,n){this.targetId=e,this.Ce=n}}class CC{constructor(e,n,i=Ut.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Ox{constructor(){this.ve=0,this.Fe=Dx(),this.Me=Ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),i=Le();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:we(38017,{changeType:o})}}),new hc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Dx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class k4{constructor(e){this.Ge=e,this.ze=new Map,this.je=hr(),this.Je=xh(),this.He=xh(),this.Ye=new ut(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Ng(o))if(i===0){const a=new ye(o.path);this.et(n,a,Qt.newNoDocument(a,Se.min()))}else We(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=ys(i).toUint8Array()}catch(h){if(h instanceof YS)return Wa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new b_(a,r,o)}catch(h){return Wa(h instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Ng(u.target)){const h=new ye(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,Qt.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Le();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Ff(e,n,this.Ye,this.je,i);return this.je=hr(),this.Je=xh(),this.He=xh(),this.Ye=new ut(Ne),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ox,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new bt(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new bt(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ox),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xh(){return new ut(ye.comparator)}function Dx(){return new ut(ye.comparator)}const R4={asc:"ASCENDING",desc:"DESCENDING"},N4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L4={and:"AND",or:"OR"};class M4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mg(t,e){return t.useProto3Json||Nf(e)?e:{value:e}}function Bd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O4(t,e){return Bd(t,e.toTimestamp())}function Ci(t){return We(!!t,49232),Se.fromTimestamp(function(n){const i=gs(n);return new tt(i.seconds,i.nanos)}(t))}function k_(t,e){return Og(t,e).canonicalString()}function Og(t,e){const n=function(r){return new et(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AC(t){const e=et.fromString(t);return We(LC(e),10190,{key:e.toString()}),e}function Dg(t,e){return k_(t.databaseId,e.path)}function tm(t,e){const n=AC(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(kC(n))}function bC(t,e){return k_(t.databaseId,e)}function D4(t){const e=AC(t);return e.length===4?et.emptyPath():kC(e)}function Vg(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kC(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Vx(t,e,n){return{name:Dg(t,e),fields:n.value.mapValue.fields}}function V4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(We(m===void 0||typeof m=="string",58123),Ut.fromBase64String(m||"")):(We(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ut.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?X.UNKNOWN:PC(f.code);return new fe(m,f.message||"")}(a);n=new CC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=tm(t,i.document.name),o=Ci(i.document.updateTime),a=i.document.createTime?Ci(i.document.createTime):Se.min(),u=new Un({mapValue:{fields:i.document.fields}}),h=Qt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new $h(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=tm(t,i.document),o=i.readTime?Ci(i.readTime):Se.min(),a=Qt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new $h([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=tm(t,i.document),o=i.removedTargetIds||[];n=new $h([],o,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new C4(r,o),u=i.targetId;n=new SC(u,a)}}return n}function j4(t,e){let n;if(e instanceof cc)n={update:Vx(t,e.key,e.value)};else if(e instanceof I_)n={delete:Dg(t,e.key)};else if(e instanceof So)n={update:Vx(t,e.key,e.data),updateMask:G4(e.fieldMask)};else{if(!(e instanceof E4))return we(16599,{Vt:e.type});n={verify:Dg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Fd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Zu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ku)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof zd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw we(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:O4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(t,e.precondition)),n}function F4(t,e){return t&&t.length>0?(We(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Ci(r.updateTime):Ci(o);return a.isEqual(Se.min())&&(a=Ci(o)),new w4(a,r.transformResults||[])}(n,e))):[]}function z4(t,e){return{documents:[bC(t,e.path)]}}function B4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=bC(t,r);const o=function(f){if(f.length!==0)return NC(Ni.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:ra(_.field),direction:W4(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Mg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function U4(t){let e=D4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){We(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=RC(g);return _ instanceof Ni&&lC(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(R){return new jd(sa(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,Nf(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(g){const _=!!g.before,T=g.values||[];return new Vd(T,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,T=g.values||[];return new Vd(T,_)}(n.endAt)),o4(e,r,a,o,u,"F",h,f)}function H4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=sa(n.unaryFilter.field);return Ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=sa(n.unaryFilter.field);return Ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=sa(n.unaryFilter.field);return Ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=sa(n.unaryFilter.field);return Ct.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ct.create(sa(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ni.create(n.compositeFilter.filters.map(i=>RC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function W4(t){return R4[t]}function $4(t){return N4[t]}function q4(t){return L4[t]}function ra(t){return{fieldPath:t.canonicalString()}}function sa(t){return Ft.fromServerFormat(t.fieldPath)}function NC(t){return t instanceof Ct?function(n){if(n.op==="=="){if(Px(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NAN"}};if(Ex(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Px(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NAN"}};if(Ex(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ra(n.field),op:$4(n.op),value:n.value}}}(t):t instanceof Ni?function(n){const i=n.getFilters().map(r=>NC(r));return i.length===1?i[0]:{compositeFilter:{op:q4(n.op),filters:i}}}(t):we(54877,{filter:t})}function G4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,i,r,o=Se.min(),a=Se.min(),u=Ut.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.yt=e}}function K4(t){const e=U4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.Cn=new X4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(ms.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class X4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new bt(et.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new bt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MC=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(MC,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Za(0)}static cr(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="LruGarbageCollector",Y4=1048576;function zx([t,e],[n,i]){const r=Ne(t,n);return r===0?Ne(e,i):r}class J4{constructor(e){this.Ir=e,this.buffer=new bt(zx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();zx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ej{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(Fx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sl(n)?oe(Fx,"Ignoring IndexedDB error during garbage collection: ",n):await rl(n)}await this.Vr(3e5)})}}class tj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Rf.ce);const i=new J4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(jx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),na()<=Re.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function nj(t,e){return new tj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.changes=new Po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&yu(i.mutation,r,ri.empty(),tt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Le()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Le()){const r=Js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Xl();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Js();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Le()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=hr();const a=gu(),u=function(){return gu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof So)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),yu(m.mutation,f,m.mutation.getFieldMask(),tt.now())):a.set(f.key,ri.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new rj(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=gu();let r=new ut((a,u)=>a-u),o=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||ri.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||Le()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=gC();m.forEach(_=>{if(!o.has(_)){const T=TC(n.get(_),i.get(_));T!==null&&g.set(_,T),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):a4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(Js());let u=Wu,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{h=h.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Le())).next(m=>({batchId:u,changes:mC(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(i=>{let r=Xl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Xl();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,_){return new Mf(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Qt.newInvalidDocument(m)))});let u=Xl();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&yu(m.mutation,f,ri.empty(),tt.now()),Df(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ci(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:K4(r.bundledQuery),readTime:Ci(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.overlays=new ut(ye.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Js();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=Js(),o=n.length+1,a=new ye(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new ut((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Js(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Js(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new S4(n,i));let o=this.qr.get(n);o===void 0&&(o=Le(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.Qr=new bt(Mt.$r),this.Ur=new bt(Mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Mt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Mt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ye(new et([])),i=new Mt(n,e),r=new Mt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new et([])),i=new Mt(n,e),r=new Mt(n,e+1);let o=Le();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Mt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Mt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new bt(Mt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new P4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new Mt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?w_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Mt(n,0),r=new Mt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bt(Ne);return n.forEach(r=>{const o=new Mt(r,0),a=new Mt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ye.isDocumentKey(o)||(o=o.child(""));const a=new Mt(new ye(o),0);let u=new bt(Ne);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){We(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new Mt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Mt(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.ri=e,this.docs=function(){return new ut(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let i=hr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Qt.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=hr();const a=n.path,u=new ye(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||jV(VV(m),i)<=0||(r.has(m.key)||Df(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){we(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new hj(this)}getSize(e){return K.resolve(this.size)}}class hj extends ij{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.persistence=e,this.si=new Po(n=>E_(n),P_),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new R_,this.targetCount=0,this.ai=Za.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Za(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rf(0),this.li=!1,this.li=!0,this.hi=new lj,this.referenceDelegate=e(this),this.Pi=new dj(this),this.indexManager=new Q4,this.remoteDocumentCache=function(r){return new cj(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new Z4(n),this.Ii=new oj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new uj(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){oe("MemoryPersistence","Starting transaction:",e);const r=new fj(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class fj extends zV{constructor(e){super(),this.currentSequenceNumber=e}}class N_{constructor(e){this.persistence=e,this.Ri=new R_,this.Vi=null}static mi(e){return new N_(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=ye.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ud{constructor(e,n){this.persistence=e,this.pi=new Po(i=>HV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=nj(this,n)}static mi(e,n){return new Ud(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Se.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Le(),r=Le();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new L_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return aD()?8:BV(Yt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new pj;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(na()<=Re.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ia(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(na()<=Re.DEBUG&&oe("QueryEngine","Query:",ia(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(na()<=Re.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ia(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(n))):K.resolve())}ys(e,n){if(Ax(n))return K.resolve(null);let i=Pi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Lg(n,null,"F"),i=Pi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Le(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Lg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return Ax(n)||r.isEqual(Se.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(na()<=Re.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ia(n)),this.vs(e,a,n,DV(r,Wu)).next(u=>u))})}Ds(e,n){let i=new bt(fC(e));return n.forEach((r,o)=>{Df(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return na()<=Re.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ia(n)),this.ps.getDocumentsMatchingQuery(e,n,ms.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="LocalStore",gj=3e8;class yj{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new ut(Ne),this.xs=new Po(o=>E_(o),P_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function _j(t,e,n,i){return new yj(t,e,n,i)}async function DC(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Le();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function vj(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,_=g.keys();let T=K.resolve();return _.forEach(R=>{T=T.next(()=>m.getEntry(h,R)).next(k=>{const D=f.docVersions.get(R);We(D!==null,48541),k.version.compareTo(D)<0&&(g.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Le();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function VC(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function wj(t,e){const n=Ce(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let T=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Ut.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(k,D,I){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=gj?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(_,T,m)&&u.push(n.Pi.updateTargetData(o,T))});let h=hr(),f=Le();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(xj(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Se.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function xj(t,e,n){let i=Le(),r=Le();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=hr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Se.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):oe(M_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function Tj(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=w_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ej(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new $r(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function jg(t,e,n){const i=Ce(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!sl(a))throw a;oe(M_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Bx(t,e,n){const i=Ce(t);let r=Se.min(),o=Le();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=Ce(h),_=g.xs.get(m);return _!==void 0?K.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,Pi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Se.min(),n?o:Le())).next(u=>(Pj(i,u4(e),u),{documents:u,Qs:o})))}function Pj(t,e,n){let i=t.Os.get(e)||Se.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Ux{constructor(){this.activeTargetIds=m4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sj{constructor(){this.Mo=new Ux,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ux,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="ConnectivityMonitor";class Wx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(Hx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(Hx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th=null;function Fg(){return Th===null?Th=function(){return 268435456+Math.round(2147483648*Math.random())}():Th++,"0x"+Th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="RestConnection",Ij={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Aj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Od?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Fg(),u=this.zo(e,n.toUriEncodedString());oe(nm,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=tl(f);return this.Jo(e,u,h,i,m).then(g=>(oe(nm,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Wa(nm,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+il}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=Ij[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class kj extends Aj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Fg();return new Promise((u,h)=>{const f=new BS;f.setWithCredentials(!0),f.listenOnce(US.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Bh.NO_ERROR:const g=f.getResponseJson();oe(qt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Bh.TIMEOUT:oe(qt,`RPC '${e}' ${a} timed out`),h(new fe(X.DEADLINE_EXCEEDED,"Request time out"));break;case Bh.HTTP_ERROR:const _=f.getStatus();if(oe(qt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T==null?void 0:T.error;if(R&&R.status&&R.message){const k=function(I){const P=I.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(P)>=0?P:X.UNKNOWN}(R.status);h(new fe(k,R.message))}else h(new fe(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new fe(X.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{oe(qt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);oe(qt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Fg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=$S(),u=WS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");oe(qt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let _=!1,T=!1;const R=new bj({Yo:D=>{T?oe(qt,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(_||(oe(qt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),oe(qt,`RPC '${e}' stream ${r} sending:`,D),g.send(D))},Zo:()=>g.close()}),k=(D,I,P)=>{D.listen(I,C=>{try{P(C)}catch(z){setTimeout(()=>{throw z},0)}})};return k(g,Ql.EventType.OPEN,()=>{T||(oe(qt,`RPC '${e}' stream ${r} transport opened.`),R.o_())}),k(g,Ql.EventType.CLOSE,()=>{T||(T=!0,oe(qt,`RPC '${e}' stream ${r} transport closed`),R.a_(),this.E_(g))}),k(g,Ql.EventType.ERROR,D=>{T||(T=!0,Wa(qt,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),R.a_(new fe(X.UNAVAILABLE,"The operation could not be completed")))}),k(g,Ql.EventType.MESSAGE,D=>{var I;if(!T){const P=D.data[0];We(!!P,16349);const C=P,z=(C==null?void 0:C.error)||((I=C[0])==null?void 0:I.error);if(z){oe(qt,`RPC '${e}' stream ${r} received error:`,z);const G=z.status;let U=function(N){const O=xt[N];if(O!==void 0)return PC(O)}(G),b=z.message;U===void 0&&(U=X.INTERNAL,b="Unknown error status: "+G+" with message "+z.message),T=!0,R.a_(new fe(U,b)),g.close()}else oe(qt,`RPC '${e}' stream ${r} received:`,P),R.u_(P)}}),k(u,HS.STAT_EVENT,D=>{D.stat===Ig.PROXY?oe(qt,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===Ig.NOPROXY&&oe(qt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t){return new M4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="PersistentStream";class FC{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new fe(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe($x,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe($x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rj extends FC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=V4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?Ci(a.readTime):Se.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Vg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Ng(h)?{documents:z4(o,h)}:{query:B4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=IC(o,a.resumeToken);const f=Mg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=Bd(o,a.snapshotVersion.toTimestamp());const f=Mg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=H4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Vg(this.serializer),n.removeTarget=e,this.q_(n)}}class Nj extends FC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=F4(e.writeResults,e.commitTime),i=Ci(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Vg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>j4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{}class Mj extends Lj{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Og(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Og(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Oj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cr(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class Dj{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Co(this)&&(oe(mo,"Restarting streams for network reachability change."),await async function(h){const f=Ce(h);f.Ea.add(4),await dc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Bf(f)}(this))})}),this.Ra=new Oj(i,r)}}async function Bf(t){if(Co(t))for(const e of t.da)await e(!0)}async function dc(t){for(const e of t.da)await e(!1)}function zC(t,e){const n=Ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),j_(n)?V_(n):ol(n).O_()&&D_(n,e))}function O_(t,e){const n=Ce(t),i=ol(n);n.Ia.delete(e),i.O_()&&BC(n,e),n.Ia.size===0&&(i.O_()?i.L_():Co(n)&&n.Ra.set("Unknown"))}function D_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(t).Y_(e)}function BC(t,e){t.Va.Ue(e),ol(t).Z_(e)}function V_(t){t.Va=new k4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ol(t).start(),t.Ra.ua()}function j_(t){return Co(t)&&!ol(t).x_()&&t.Ia.size>0}function Co(t){return Ce(t).Ea.size===0}function UC(t){t.Va=void 0}async function Vj(t){t.Ra.set("Online")}async function jj(t){t.Ia.forEach((e,n)=>{D_(t,e)})}async function Fj(t,e){UC(t),j_(t)?(t.Ra.ha(e),V_(t)):t.Ra.set("Unknown")}async function zj(t,e,n){if(t.Ra.set("Online"),e instanceof CC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){oe(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hd(t,i)}else if(e instanceof $h?t.Va.Ze(e):e instanceof SC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const i=await VC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Ut.EMPTY_BYTE_STRING,m.snapshotVersion)),BC(o,h);const g=new $r(m.target,h,f,m.sequenceNumber);D_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){oe(mo,"Failed to raise snapshot:",i),await Hd(t,i)}}async function Hd(t,e,n){if(!sl(e))throw e;t.Ea.add(1),await dc(t),t.Ra.set("Offline"),n||(n=()=>VC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(mo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bf(t)})}function HC(t,e){return e().catch(n=>Hd(t,n,e))}async function Uf(t){const e=Ce(t),n=vs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:w_;for(;Bj(e);)try{const r=await Tj(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,Uj(e,r)}catch(r){await Hd(e,r)}WC(e)&&$C(e)}function Bj(t){return Co(t)&&t.Ta.length<10}function Uj(t,e){t.Ta.push(e);const n=vs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function WC(t){return Co(t)&&!vs(t).x_()&&t.Ta.length>0}function $C(t){vs(t).start()}async function Hj(t){vs(t).ra()}async function Wj(t){const e=vs(t);for(const n of t.Ta)e.ea(n.mutations)}async function $j(t,e,n){const i=t.Ta.shift(),r=A_.from(i,e,n);await HC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Uf(t)}async function qj(t,e){e&&vs(t).X_&&await async function(i,r){if(function(a){return I4(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();vs(i).B_(),await HC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Uf(i)}}(t,e),WC(t)&&$C(t)}async function qx(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),oe(mo,"RemoteStore received new credentials");const i=Co(n);n.Ea.add(3),await dc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bf(n)}async function Gj(t,e){const n=Ce(t);e?(n.Ea.delete(2),await Bf(n)):e||(n.Ea.add(2),await dc(n),n.Ra.set("Unknown"))}function ol(t){return t.ma||(t.ma=function(n,i,r){const o=Ce(n);return o.sa(),new Rj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:Vj.bind(null,t),t_:jj.bind(null,t),r_:Fj.bind(null,t),H_:zj.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),j_(t)?V_(t):t.Ra.set("Unknown")):(await t.ma.stop(),UC(t))})),t.ma}function vs(t){return t.fa||(t.fa=function(n,i,r){const o=Ce(n);return o.sa(),new Nj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Hj.bind(null,t),r_:qj.bind(null,t),ta:Wj.bind(null,t),na:$j.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Uf(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(mo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new F_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z_(t,e){if(cr("AsyncQueue",`${e}: ${t}`),sl(t))return new fe(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{static emptySet(e){return new ba(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ye.comparator(n.key,i.key):(n,i)=>ye.comparator(n.key,i.key),this.keyedMap=Xl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ba;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.ga=new ut(ye.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ka{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ka(e,n,ba.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Kj{constructor(){this.queries=Zx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ce(n),o=r.queries;r.queries=Zx(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new fe(X.ABORTED,"Firestore shutting down"))}}function Zx(){return new Po(t=>dC(t),Of)}async function qC(t,e){const n=Ce(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new Zj,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=z_(a,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&B_(n)}async function GC(t,e){const n=Ce(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Qj(t,e){const n=Ce(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&B_(n)}function Xj(t,e,n){const i=Ce(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function B_(t){t.Ca.forEach(e=>{e.next()})}var zg,Kx;(Kx=zg||(zg={})).Ma="default",Kx.Cache="cache";class ZC{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ka(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.key=e}}class QC{constructor(e){this.key=e}}class Yj{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=fC(e),this.tu=new ba(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Gx,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),T=Df(this.query,g)?g:null,R=!!_&&this.mutatedKeys.has(_.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let D=!1;_&&T?_.data.isEqual(T.data)?R!==k&&(i.track({type:3,doc:T}),D=!0):this.su(_,T)||(i.track({type:2,doc:T}),D=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!_&&T?(i.track({type:0,doc:T}),D=!0):_&&!T&&(i.track({type:1,doc:_}),D=!0,(h||f)&&(u=!0)),D&&(T?(a=a.add(T),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(T,R){const k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:D})}};return k(T)-k(R)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new Ka(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new QC(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new KC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ka.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const U_="SyncEngine";class Jj{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class e3{constructor(e){this.key=e,this.hu=!1}}class t3{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Po(u=>dC(u),Of),this.Iu=new Map,this.Eu=new Set,this.du=new ut(ye.comparator),this.Au=new Map,this.Ru=new R_,this.Vu={},this.mu=new Map,this.fu=Za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function n3(t,e,n=!0){const i=nI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await XC(i,e,n,!0),r}async function i3(t,e){const n=nI(t);await XC(n,e,!0,!1)}async function XC(t,e,n,i){const r=await Ej(t.localStore,Pi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await r3(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&zC(t.remoteStore,r),u}async function r3(t,e,n,i,r){t.pu=(g,_,T)=>async function(k,D,I,P){let C=D.view.ru(I);C.Cs&&(C=await Bx(k.localStore,D.query,!1).then(({documents:b})=>D.view.ru(b,C)));const z=P&&P.targetChanges.get(D.targetId),G=P&&P.targetMismatches.get(D.targetId)!=null,U=D.view.applyChanges(C,k.isPrimaryClient,z,G);return Xx(k,D.targetId,U.au),U.snapshot}(t,g,_,T);const o=await Bx(t.localStore,e,!0),a=new Yj(e,o.Qs),u=a.ru(o.documents),h=hc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);Xx(t,n,f.au);const m=new Jj(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function s3(t,e,n){const i=Ce(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Of(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await jg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&O_(i.remoteStore,r.targetId),Bg(i,r.targetId)}).catch(rl)):(Bg(i,r.targetId),await jg(i.localStore,r.targetId,!0))}async function o3(t,e){const n=Ce(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),O_(n.remoteStore,i.targetId))}async function a3(t,e,n){const i=p3(t);try{const r=await function(a,u){const h=Ce(a),f=tt.now(),m=u.reduce((T,R)=>T.add(R.key),Le());let g,_;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let R=hr(),k=Le();return h.Ns.getEntries(T,m).next(D=>{R=D,R.forEach((I,P)=>{P.isValidDocument()||(k=k.add(I))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,R)).next(D=>{g=D;const I=[];for(const P of u){const C=T4(P,g.get(P.key).overlayedDocument);C!=null&&I.push(new So(P.key,C,sC(C.value.mapValue),Si.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,I,u)}).next(D=>{_=D;const I=D.applyToLocalDocumentSet(g,k);return h.documentOverlayCache.saveOverlays(T,D.batchId,I)})}).then(()=>({batchId:_.batchId,changes:mC(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new ut(Ne)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await fc(i,r.changes),await Uf(i.remoteStore)}catch(r){const o=z_(r,"Failed to persist write");n.reject(o)}}async function YC(t,e){const n=Ce(t);try{const i=await wj(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(We(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?We(a.hu,14607):r.removedDocuments.size>0&&(We(a.hu,42227),a.hu=!1))}),await fc(n,i,e)}catch(i){await rl(i)}}function Qx(t,e,n){const i=Ce(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Ce(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&B_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function l3(t,e,n){const i=Ce(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new ut(ye.comparator);a=a.insert(o,Qt.newNoDocument(o,Se.min()));const u=Le().add(o),h=new Ff(Se.min(),new Map,new ut(Ne),a,u);await YC(i,h),i.du=i.du.remove(o),i.Au.delete(e),H_(i)}else await jg(i.localStore,e,!1).then(()=>Bg(i,e,n)).catch(rl)}async function u3(t,e){const n=Ce(t),i=e.batch.batchId;try{const r=await vj(n.localStore,e);eI(n,i,null),JC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await fc(n,r)}catch(r){await rl(r)}}async function c3(t,e,n){const i=Ce(t);try{const r=await function(a,u){const h=Ce(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(We(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);eI(i,e,n),JC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await fc(i,r)}catch(r){await rl(r)}}function JC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function eI(t,e,n){const i=Ce(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Bg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||tI(t,i)})}function tI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(O_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),H_(t))}function Xx(t,e,n){for(const i of n)i instanceof KC?(t.Ru.addReference(i.key,e),h3(t,i)):i instanceof QC?(oe(U_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||tI(t,i.key)):we(19791,{wu:i})}function h3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(oe(U_,"New document in limbo: "+n),t.Eu.add(i),H_(t))}function H_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(et.fromString(e)),i=t.fu.next();t.Au.set(i,new e3(n)),t.du=t.du.insert(n,i),zC(t.remoteStore,new $r(Pi(S_(n.path)),i,"TargetPurposeLimboResolution",Rf.ce))}}async function fc(t,e,n){const i=Ce(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=L_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Ce(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,_=>K.forEach(_.Es,T=>m.persistence.referenceDelegate.addReference(g,_.targetId,T)).next(()=>K.forEach(_.ds,T=>m.persistence.referenceDelegate.removeReference(g,_.targetId,T)))))}catch(g){if(!sl(g))throw g;oe(M_,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const T=m.Ms.get(_),R=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(R);m.Ms=m.Ms.insert(_,k)}}}(i.localStore,o))}async function d3(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){oe(U_,"User change. New user:",e.toKey());const i=await DC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new fe(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await fc(n,i.Ls)}}function f3(t,e){const n=Ce(t),i=n.Au.get(e);if(i&&i.hu)return Le().add(i.key);{let r=Le();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function nI(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l3.bind(null,e),e.Pu.H_=Qj.bind(null,e.eventManager),e.Pu.yu=Xj.bind(null,e.eventManager),e}function p3(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c3.bind(null,e),e}class Wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _j(this.persistence,new mj,e.initialUser,this.serializer)}Cu(e){return new OC(N_.mi,this.serializer)}Du(e){return new Sj}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wd.provider={build:()=>new Wd};class m3 extends Wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof Ud,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ej(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new OC(i=>Ud.mi(i,n),this.serializer)}}class Ug{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Qx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=d3.bind(null,this.syncEngine),await Gj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Kj}()}createDatastore(e){const n=zf(e.databaseInfo.databaseId),i=function(o){return new kj(o)}(e.databaseInfo);return function(o,a,u,h){return new Mj(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new Dj(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Qx(this.syncEngine,n,0),function(){return Wx.v()?new Wx:new Cj}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new t3(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ce(r);oe(mo,"RemoteStore shutting down."),o.Ea.add(5),await dc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ug.provider={build:()=>new Ug};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class g3{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Zt.UNAUTHENTICATED,this.clientId=__.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{oe(ws,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(oe(ws,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=z_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function rm(t,e){t.asyncQueue.verifyOperationInProgress(),oe(ws,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await DC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await y3(t);oe(ws,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>qx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>qx(e.remoteStore,r)),t._onlineComponents=e}async function y3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(ws,"Using user provided OfflineComponentProvider");try{await rm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Wa("Error using user provided cache. Falling back to memory cache: "+n),await rm(t,new Wd)}}else oe(ws,"Using default OfflineComponentProvider"),await rm(t,new m3(void 0));return t._offlineComponents}async function rI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(ws,"Using user provided OnlineComponentProvider"),await Yx(t,t._uninitializedComponentsProvider._online)):(oe(ws,"Using default OnlineComponentProvider"),await Yx(t,new Ug))),t._onlineComponents}function _3(t){return rI(t).then(e=>e.syncEngine)}async function Hg(t){const e=await rI(t),n=e.eventManager;return n.onListen=n3.bind(null,e.syncEngine),n.onUnlisten=s3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=i3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=o3.bind(null,e.syncEngine),n}function v3(t,e,n={}){const i=new as;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new iI({next:_=>{m.Nu(),a.enqueueAndForget(()=>GC(o,g)),_.fromCache&&h.source==="server"?f.reject(new fe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new ZC(u,m,{includeMetadataChanges:!0,qa:!0});return qC(o,g)}(await Hg(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="firestore.googleapis.com",e1=!0;class t1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oI,this.ssl=e1}else this.host=e.host,this.ssl=e.ssl??e1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y4)throw new fe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new SV;switch(i.type){case"firstParty":return new bV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Jx.get(n);i&&(oe("ComponentProvider","Removing Datastore"),Jx.delete(n),i.terminate())}(this),Promise.resolve()}}function w3(t,e,n,i={}){var f;t=ir(t,Hf);const r=tl(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(NS(`https://${u}`),LS("Firestore",!0)),o.host!==oI&&o.host!==u&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!ho(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Zt.MOCK_USER;else{m=YO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new fe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Zt(_)}t._authCredentials=new CV(new GS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new pc(this.firestore,e,this._query)}}class At{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(uc(n,At._jsonSchema))return new At(e,i||null,new ye(et.fromString(n.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Pt("string",At._jsonSchemaVersion),referencePath:Pt("string")};class ls extends pc{constructor(e,n,i){super(e,n,S_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ye(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function _u(t,e,...n){if(t=An(t),ZS("collection","path",e),t instanceof Hf){const i=et.fromString(e,...n);return mx(i),new ls(t,null,i)}{if(!(t instanceof At||t instanceof ls))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(et.fromString(e,...n));return mx(i),new ls(t.firestore,null,i)}}function Xi(t,e,...n){if(t=An(t),arguments.length===1&&(e=__.newId()),ZS("doc","path",e),t instanceof Hf){const i=et.fromString(e,...n);return px(i),new At(t,null,new ye(i))}{if(!(t instanceof At||t instanceof ls))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(et.fromString(e,...n));return px(i),new At(t.firestore,t instanceof ls?t.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="AsyncQueue";class i1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jC(this,"async_queue_retry"),this._c=()=>{const i=im();i&&oe(n1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new as;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;oe(n1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,cr("INTERNAL UNHANDLED ERROR: ",r1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=F_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:r1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function r1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Qa extends Hf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new i1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i1(e),this._firestoreClient=void 0,await e}}}function x3(t,e){const n=typeof t=="object"?t:VS(),i=typeof t=="string"?t:Od,r=g_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=QO("firestore");o&&w3(r,...o)}return r}function W_(t){if(t._terminated)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||T3(t),t._firestoreClient}function T3(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new qV(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,sI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new g3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Ut.fromBase64String(e))}catch(n){throw new fe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uc(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Pt("string",Hn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ii._jsonSchemaVersion}}static fromJSON(e){if(uc(e,Ii._jsonSchema))return new Ii(e.latitude,e.longitude)}}Ii._jsonSchemaVersion="firestore/geoPoint/1.0",Ii._jsonSchema={type:Pt("string",Ii._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uc(e,Ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ai(e.vectorValues);throw new fe(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:Pt("string",Ai._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=/^__.*__$/;class P3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new So(e,this.data,this.fieldMask,n,this.fieldTransforms):new cc(e,this.data,n,this.fieldTransforms)}}function lI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class q_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new q_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $d(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lI(this.Ac)&&E3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class S3{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||zf(e)}Cc(e,n,i,r=!1){return new q_({Ac:e,methodName:n,Dc:i,path:Ft.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function C3(t){const e=t._freezeSettings(),n=zf(t._databaseId);return new S3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function I3(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);dI("Data must be an object, but it was:",a,i);const u=cI(i,a);let h,f;if(o.merge)h=new ri(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=A3(e,g,n);if(!a.contains(_))throw new fe(X.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);k3(m,_)||m.push(_)}h=new ri(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new P3(new Un(u),h,f)}function uI(t,e){if(hI(t=An(t)))return dI("Unsupported field value:",e,t),cI(t,e);if(t instanceof aI)return function(i,r){if(!lI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=uI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=An(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return g4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=tt.fromDate(i);return{timestampValue:Bd(r.serializer,o)}}if(i instanceof tt){const o=new tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Bd(r.serializer,o)}}if(i instanceof Ii)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hn)return{bytesValue:IC(r.serializer,i._byteString)};if(i instanceof At){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:k_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ai)return function(a,u){return{mapValue:{fields:{[iC]:{stringValue:rC},[Dd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return C_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${v_(i)}`)}(t,e)}function cI(t,e){const n={};return XS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(t,(i,r)=>{const o=uI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function hI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof Ii||t instanceof Hn||t instanceof At||t instanceof aI||t instanceof Ai)}function dI(t,e,n){if(!hI(n)||!KS(n)){const i=v_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function A3(t,e,n){if((e=An(e))instanceof $_)return e._internalPath;if(typeof e=="string")return fI(t,e);throw $d("Field path arguments must be of type string or ",t,!1,void 0,n)}const b3=new RegExp("[~\\*/\\[\\]]");function fI(t,e,n){if(e.search(b3)>=0)throw $d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $_(...e.split("."))._internalPath}catch{throw $d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $d(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new fe(X.INVALID_ARGUMENT,u+t+h)}function k3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new R3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class R3 extends pI{data(){return super.data()}}function mI(t,e){return typeof e=="string"?fI(t,e):e instanceof $_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N3{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Eo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Dd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>mt(a.doubleValue));return new Ai(n)}convertGeoPoint(e){return new Ii(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Lf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp($u(e));default:return null}}convertTimestamp(e){const n=gs(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=et.fromString(e);We(LC(i),9688,{name:e});const r=new qu(i.get(1),i.get(3)),o=new ye(i.popFirst(5));return r.isEqual(n)||cr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class io extends pI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(mI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=io._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}io._jsonSchemaVersion="firestore/documentSnapshot/1.0",io._jsonSchema={type:Pt("string",io._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class qh extends io{data(e={}){return super.data(e)}}class ro{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Jl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new qh(this._firestore,this._userDataWriter,i.key,i,new Jl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new qh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new qh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:M3(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function M3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}ro._jsonSchemaVersion="firestore/querySnapshot/1.0",ro._jsonSchema={type:Pt("string",ro._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class G_ extends N3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function o1(t){t=ir(t,pc);const e=ir(t.firestore,Qa),n=W_(e),i=new G_(e);return gI(t._query),v3(n,t._query).then(r=>new ro(e,i,t,r))}function qr(t,e,n){t=ir(t,At);const i=ir(t.firestore,Qa),r=L3(t.converter,e,n);return yI(i,[I3(C3(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Si.none())])}function sm(t){return yI(ir(t.firestore,Qa),[new I_(t._key,Si.none())])}function om(t,...e){var h,f,m;t=An(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||s1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(s1(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof At)a=ir(t.firestore,Qa),u=S_(t._key.path),o={next:g=>{e[i]&&e[i](O3(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=ir(t,pc);a=ir(g.firestore,Qa),u=g._query;const _=new G_(a);o={next:T=>{e[i]&&e[i](new ro(a,_,g,T))},error:e[i+1],complete:e[i+2]},gI(t._query)}return function(_,T,R,k){const D=new iI(k),I=new ZC(T,D,R);return _.asyncQueue.enqueueAndForget(async()=>qC(await Hg(_),I)),()=>{D.Nu(),_.asyncQueue.enqueueAndForget(async()=>GC(await Hg(_),I))}}(W_(a),u,r,o)}function yI(t,e){return function(i,r){const o=new as;return i.asyncQueue.enqueueAndForget(async()=>a3(await _3(i),r,o)),o.promise}(W_(t),e)}function O3(t,e,n){const i=n.docs.get(e._key),r=new G_(t);return new io(t,r,e._key,i,new Jl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){il=r})(nl),Ha(new fo("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new Qa(new IV(i.getProvider("auth-internal")),new kV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new fe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),ss(cx,hx,e),ss(cx,hx,"esm2020")})();function _I(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D3=_I,vI=new ac("auth","Firebase",_I());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new p_("@firebase/auth");function V3(t,...e){qd.logLevel<=Re.WARN&&qd.warn(`Auth (${nl}): ${t}`,...e)}function Gh(t,...e){qd.logLevel<=Re.ERROR&&qd.error(`Auth (${nl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,...e){throw Z_(t,...e)}function bi(t,...e){return Z_(t,...e)}function wI(t,e,n){const i={...D3(),[e]:n};return new ac("auth","Firebase",i).create(e,{appName:t.name})}function us(t){return wI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return vI.create(t,...e)}function Te(t,e,...n){if(!t)throw Z_(e,...n)}function Yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gh(e),new Error(e)}function fr(t,e){t||Yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function j3(){return a1()==="http:"||a1()==="https:"}function a1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j3()||rD()||"connection"in navigator)?navigator.onLine:!0}function z3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.shortDelay=e,this.longDelay=n,fr(n>e,"Short delay should be less than long delay!"),this.isMobile=tD()||sD()}get(){return F3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t,e){fr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],H3=new mc(3e4,6e4);function Wf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function al(t,e,n,i,r={}){return TI(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=lc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return iD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&tl(t.emulatorConfig.host)&&(f.credentials="include"),xI.fetch()(await PI(t,t.config.apiHost,n,u),f)})}async function TI(t,e,n){t._canInitEmulator=!1;const i={...B3,...e};try{const r=new W3(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Eh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Eh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Eh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw wI(t,m,f);dr(t,m)}}catch(r){if(r instanceof gr)throw r;dr(t,"network-request-failed",{message:String(r)})}}async function EI(t,e,n,i,r={}){const o=await al(t,e,n,i,r);return"mfaPendingCredential"in o&&dr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function PI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?K_(t.config,r):`${t.config.apiScheme}://${r}`;return U3.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class W3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(bi(this.auth,"network-request-failed")),H3.get())})}}function Eh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=bi(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(t,e){return al(t,"POST","/v1/accounts:delete",e)}async function Gd(t,e){return al(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q3(t,e=!1){const n=An(t),i=await n.getIdToken(e),r=Q_(i);Te(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:vu(am(r.auth_time)),issuedAtTime:vu(am(r.iat)),expirationTime:vu(am(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function am(t){return Number(t)*1e3}function Q_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{const r=AS(n);return r?JSON.parse(r):(Gh("Failed to decode base64 JWT payload"),null)}catch(r){return Gh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function l1(t){const e=Q_(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof gr&&G3(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function G3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(t){var g;const e=t.auth,n=await t.getIdToken(),i=await Qu(t,Gd(e,{idToken:n}));Te(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?SI(r.providerUserInfo):[],a=Q3(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new $g(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function K3(t){const e=An(t);await Zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q3(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function SI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(t,e){const n=await TI(t,{},async()=>{const i=lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await PI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&tl(t.emulatorConfig.host)&&(h.credentials="include"),xI.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Y3(t,e){return al(t,"POST","/v2/accounts:revokeToken",Wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):l1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=l1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await X3(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new ka;return i&&(Te(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Te(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(Te(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ka,this.toJSON())}_performRefresh(){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class si{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Z3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new $g(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Qu(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q3(this,e)}reload(){return K3(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Zd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(us(this.auth));const e=await this.getIdToken();return await Qu(this,$3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:T,providerData:R,stsTokenManager:k}=n;Te(g&&k,e,"internal-error");const D=ka.fromJSON(this.name,k);Te(typeof g=="string",e,"internal-error"),Ar(i,e.name),Ar(r,e.name),Te(typeof _=="boolean",e,"internal-error"),Te(typeof T=="boolean",e,"internal-error"),Ar(o,e.name),Ar(a,e.name),Ar(u,e.name),Ar(h,e.name),Ar(f,e.name),Ar(m,e.name);const I=new si({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:D,createdAt:f,lastLoginAt:m});return R&&Array.isArray(R)&&(I.providerData=R.map(P=>({...P}))),h&&(I._redirectEventId=h),I}static async _fromIdTokenResponse(e,n,i=!1){const r=new ka;r.updateFromServerResponse(n);const o=new si({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Zd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Te(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?SI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new ka;u.updateFromIdToken(i);const h=new si({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new $g(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=new Map;function Ji(t){fr(t instanceof Function,"Expected a class definition");let e=u1.get(t);return e?(fr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,u1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}CI.type="NONE";const c1=CI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ra{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Zh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Zh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gd(this.auth,{idToken:e}).catch(()=>{});return n?si._fromGetAccountInfoResponse(this.auth,n,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ra(Ji(c1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Ji(c1);const a=Zh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await Gd(e,{idToken:m}).catch(()=>{});if(!_)break;g=await si._fromGetAccountInfoResponse(e,_,m)}else g=si._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ra(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ra(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(II(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NI(e))return"Blackberry";if(LI(e))return"Webos";if(AI(e))return"Safari";if((e.includes("chrome/")||bI(e))&&!e.includes("edge/"))return"Chrome";if(RI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function II(t=Yt()){return/firefox\//i.test(t)}function AI(t=Yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bI(t=Yt()){return/crios\//i.test(t)}function kI(t=Yt()){return/iemobile/i.test(t)}function RI(t=Yt()){return/android/i.test(t)}function NI(t=Yt()){return/blackberry/i.test(t)}function LI(t=Yt()){return/webos/i.test(t)}function X_(t=Yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function J3(t=Yt()){var e;return X_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function e5(){return oD()&&document.documentMode===10}function MI(t=Yt()){return X_(t)||RI(t)||LI(t)||NI(t)||/windows phone/i.test(t)||kI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t,e=[]){let n;switch(t){case"Browser":n=h1(Yt());break;case"Worker":n=`${h1(Yt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${nl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e={}){return al(t,"GET","/v2/passwordPolicy",Wf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=6;class r5{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??i5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d1(this),this.idTokenSubscription=new d1(this),this.beforeStateQueue=new t5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ji(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Ra.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gd(this,{idToken:e}),i=await si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ii(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(us(this));const n=e?An(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n5(this),n=new r5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ac("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Y3(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ji(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Ra.create(this,[Ji(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&V3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $f(t){return An(t)}class d1{constructor(e){this.auth=e,this.observer=null,this.addObserver=pD(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o5(t){Y_=t}function a5(t){return Y_.loadJS(t)}function l5(){return Y_.gapiScript}function u5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t,e){const n=g_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(ho(o,e??{}))return r;dr(r,"already-initialized")}return n.initialize({options:e})}function h5(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ji);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function d5(t,e,n){const i=$f(t);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=DI(e),{host:a,port:u}=f5(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(ho(f,i.config.emulator)&&ho(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,tl(a)?(NS(`${o}//${a}${h}`),LS("Auth",!0)):p5()}function DI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function f5(t){const e=DI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:f1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:f1(a)}}}function f1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function p5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yi("not implemented")}_getIdTokenResponse(e){return Yi("not implemented")}_linkToIdToken(e,n){return Yi("not implemented")}_getReauthenticationResolver(e){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(t,e){return EI(t,"POST","/v1/accounts:signInWithIdp",Wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5="http://localhost";class go extends VI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new go(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):dr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new go(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Na(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Na(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Na(e,n)}buildRequest(){const e={requestUri:m5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=lc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends jI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends gc{constructor(){super("facebook.com")}static credential(e){return go._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return go._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return jr.credential(n,i)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends gc{constructor(){super("github.com")}static credential(e){return go._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.GITHUB_SIGN_IN_METHOD="github.com";Fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends gc{constructor(){super("twitter.com")}static credential(e,n){return go._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return zr.credential(n,i)}catch{return null}}}zr.TWITTER_SIGN_IN_METHOD="twitter.com";zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(t,e){return EI(t,"POST","/v1/accounts:signUp",Wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await si._fromIdTokenResponse(e,i,r),a=p1(i);return new xs({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=p1(i);return new xs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function p1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(t){var r;if(ii(t.app))return Promise.reject(us(t));const e=$f(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new xs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await g5(e,{returnSecureToken:!0}),i=await xs._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends gr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Kd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Kd(e,n,i,r)}}function FI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Kd._fromErrorAndOperation(t,o,e,i):o})}async function _5(t,e,n=!1){const i=await Qu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t,e,n=!1){const{auth:i}=t;if(ii(i.app))return Promise.reject(us(i));const r="reauthenticate";try{const o=await Qu(t,FI(i,r,e,t),n);Te(o.idToken,i,"internal-error");const a=Q_(o.idToken);Te(a,i,"internal-error");const{sub:u}=a;return Te(t.uid===u,i,"user-mismatch"),xs._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&dr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(t,e,n=!1){if(ii(t.app))return Promise.reject(us(t));const i="signIn",r=await FI(t,i,e),o=await xs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function x5(t,e,n,i){return An(t).onIdTokenChanged(e,n,i)}function T5(t,e,n){return An(t).beforeAuthStateChanged(e,n)}function E5(t,e,n,i){return An(t).onAuthStateChanged(e,n,i)}const Qd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qd,"1"),this.storage.removeItem(Qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=1e3,S5=10;class BI extends zI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);e5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,S5):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},P5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BI.type="LOCAL";const C5=BI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI extends zI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}UI.type="SESSION";const HI=UI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new qf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await I5(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=J_("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function b5(t){ki().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function k5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function N5(){return WI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="firebaseLocalStorageDb",L5=1,Xd="firebaseLocalStorage",qI="fbase_key";class yc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gf(t,e){return t.transaction([Xd],e?"readwrite":"readonly").objectStore(Xd)}function M5(){const t=indexedDB.deleteDatabase($I);return new yc(t).toPromise()}function qg(){const t=indexedDB.open($I,L5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Xd,{keyPath:qI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Xd)?e(i):(i.close(),await M5(),e(await qg()))})})}async function m1(t,e,n){const i=Gf(t,!0).put({[qI]:e,value:n});return new yc(i).toPromise()}async function O5(t,e){const n=Gf(t,!1).get(e),i=await new yc(n).toPromise();return i===void 0?null:i.value}function g1(t,e){const n=Gf(t,!0).delete(e);return new yc(n).toPromise()}const D5=800,V5=3;class GI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>V5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(N5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await k5(),!this.activeServiceWorker)return;this.sender=new A5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||R5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qg();return await m1(e,Qd,"1"),await g1(e,Qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>m1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>O5(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Gf(r,!1).getAll();return new yc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),D5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GI.type="LOCAL";const j5=GI;new mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t,e){return e?Ji(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends VI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Na(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Na(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Na(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function z5(t){return w5(t.auth,new ev(t),t.bypassAuthState)}function B5(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),v5(n,new ev(t),t.bypassAuthState)}async function U5(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),_5(n,new ev(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return z5;case"linkViaPopup":case"linkViaRedirect":return U5;case"reauthViaPopup":case"reauthViaRedirect":return B5;default:dr(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new mc(2e3,1e4);class Ta extends ZI{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=J_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,H5.get())};e()}}Ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="pendingRedirect",Kh=new Map;class $5 extends ZI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Kh.get(this.auth._key());if(!e){try{const i=await q5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Kh.set(this.auth._key(),e)}return this.bypassAuthState||Kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q5(t,e){const n=K5(e),i=Z5(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function G5(t,e){Kh.set(t._key(),e)}function Z5(t){return Ji(t._redirectPersistence)}function K5(t){return Zh(W5,t.config.apiKey,t.name)}async function Q5(t,e,n=!1){if(ii(t.app))return Promise.reject(us(t));const i=$f(t),r=F5(i,e),a=await new $5(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=10*60*1e3;class Y5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!KI(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(bi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=X5&&this.cachedEventUids.clear(),this.cachedEventUids.has(y1(e))}saveEventToCache(e){this.cachedEventUids.add(y1(e)),this.lastProcessedEventTime=Date.now()}}function y1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(t,e={}){return al(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nF=/^https?/;async function iF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eF(t);for(const n of e)try{if(rF(n))return}catch{}dr(t,"unauthorized-domain")}function rF(t){const e=Wg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!nF.test(n))return!1;if(tF.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=new mc(3e4,6e4);function _1(){const t=ki().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oF(t){return new Promise((e,n)=>{var r,o,a;function i(){_1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_1(),n(bi(t,"network-request-failed"))},timeout:sF.get()})}if((o=(r=ki().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=ki().gapi)!=null&&a.load)i();else{const u=u5("iframefcb");return ki()[u]=()=>{gapi.load?i():n(bi(t,"network-request-failed"))},a5(`${l5()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Qh=null,e})}let Qh=null;function aF(t){return Qh=Qh||oF(t),Qh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=new mc(5e3,15e3),uF="__/auth/iframe",cF="emulator/auth/iframe",hF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fF(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?K_(e,cF):`https://${t.config.authDomain}/${uF}`,i={apiKey:e.apiKey,appName:t.name,v:nl},r=dF.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${lc(i).slice(1)}`}async function pF(t){const e=await aF(t),n=ki().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:fF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hF,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=bi(t,"network-request-failed"),u=ki().setTimeout(()=>{o(a)},lF.get());function h(){ki().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gF=500,yF=600,_F="_blank",vF="http://localhost";class v1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wF(t,e,n,i=gF,r=yF){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...mF,width:i.toString(),height:r.toString(),top:o,left:a},f=Yt().toLowerCase();n&&(u=bI(f)?_F:n),II(f)&&(e=e||vF,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[T,R])=>`${_}${T}=${R},`,"");if(J3(f)&&u!=="_self")return xF(e||"",u),new v1(null);const g=window.open(e||"",u,m);Te(g,t,"popup-blocked");try{g.focus()}catch{}return new v1(g)}function xF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF="__/auth/handler",EF="emulator/auth/handler",PF=encodeURIComponent("fac");async function w1(t,e,n,i,r,o){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:nl,eventId:r};if(e instanceof jI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",fD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof gc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${PF}=${encodeURIComponent(h)}`:"";return`${SF(t)}?${lc(u).slice(1)}${f}`}function SF({config:t}){return t.emulator?K_(t,EF):`https://${t.authDomain}/${TF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="webStorageSupport";class CF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HI,this._completeRedirectFn=Q5,this._overrideRedirectResult=G5}async _openPopup(e,n,i,r){var a;fr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await w1(e,n,i,Wg(),r);return wF(e,o,J_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await w1(e,n,i,Wg(),r);return b5(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(fr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await pF(e),i=new Y5(e);return n.register("authEvent",r=>(Te(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lm,{type:lm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[lm];o!==void 0&&n(!!o),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return MI()||AI()||X_()}}const IF=CF;var x1="@firebase/auth",T1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kF(t){Ha(new fo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;Te(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OI(t)},f=new s5(i,r,o,h);return h5(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ha(new fo("auth-internal",e=>{const n=$f(e.getProvider("auth").getImmediate());return(i=>new AF(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ss(x1,T1,bF(t)),ss(x1,T1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=5*60,NF=RS("authIdTokenMaxAge")||RF;let E1=null;const LF=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>NF)return;const r=n==null?void 0:n.token;E1!==r&&(E1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function MF(t=VS()){const e=g_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=c5(t,{popupRedirectResolver:IF,persistence:[j5,C5,HI]}),i=RS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=LF(o.toString());T5(n,a,()=>a(n.currentUser)),x5(n,u=>a(u))}}const r=bS("auth");return r&&d5(n,`http://${r}`),n}function OF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}o5({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=bi("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",OF().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kF("Browser");var DF="firebase",VF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(DF,VF,"app");const jF={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},QI=DS(jF),pn=x3(QI),P1=MF(QI),Yd={palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},FF="vysocany",XI=Yd[FF].center,YI=15,zF=13,BF=18,S1={tileUrl:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},cs=["red","blue"],JI={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},C1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],Br=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function Xu(t){var e;return((e=JI[t.size])==null?void 0:e.points)||100}function UF(t,e=.008){const n={};cs.forEach(r=>n[r]=[]);const i={};return cs.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),cs.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],m=o[h],g=`${f.id}-${m.id}`,_=f.location[0]-m.location[0],T=(f.location[1]-m.location[1])*1.6,R=Math.sqrt(_*_+T*T);R<=e&&!a.has(g)&&(a.add(g),n[r].push({from:f.location,to:m.location,distance:R}))}}),n}function Xh(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function eA(t){const e={};return cs.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=Xu(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const tA=V.createContext(null),br={player:"streetart-ctf-player",captures:"streetart-ctf-captures"},Ph="streetart-captures",I1="streetart-players",HF="streetart-teams",Je={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function um(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function cm(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function WF({children:t}){const[e,n]=V.useState(null),[i,r]=V.useState(!0),[o,a]=V.useState(()=>um(br.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,totalDistance:0,lastCaptureTime:null,lastCaptureLocation:null,captureCount:0,recaptureCount:0,firstCaptureCount:0})),[u,h]=V.useState(()=>{const te=um(br.captures,{});return Br.map(re=>({...re,capturedBy:te[re.id]||null}))}),[f,m]=V.useState(null),[g,_]=V.useState(!1),[T,R]=V.useState(null);V.useEffect(()=>{const te=E5(P1,re=>{re?(n(re),a(ue=>({...ue,id:re.uid}))):y5(P1).catch(ue=>{console.log("Auth not available, using local mode")})});return()=>te()},[]);const[k,D]=V.useState(null),[I,P]=V.useState([]),C=V.useRef({});V.useEffect(()=>{let te=!0;const re=_u(pn,Ph),ue=om(re,ae=>{const J={},me=[];ae.forEach(Me=>{var $e,_t;const ge=Me.data();if(ge.capturedBy){J[Me.id]=ge.capturedBy;const Be=Br.find(ln=>ln.id===Me.id);me.push({id:Me.id,artName:(Be==null?void 0:Be.name)||Me.id,area:(Be==null?void 0:Be.area)||"Unknown",team:ge.capturedBy,playerName:ge.playerName||"Unknown",capturedAt:((_t=($e=ge.capturedAt)==null?void 0:$e.toDate)==null?void 0:_t.call($e))||new Date,points:ge.points||100,isRecapture:ge.isRecapture||!1})}});const Ze=me.sort((Me,ge)=>ge.capturedAt-Me.capturedAt).slice(0,10);P(Ze),te||ae.docChanges().forEach(Me=>{if(Me.type==="added"||Me.type==="modified"){const ge=Me.doc.data(),$e=C.current[Me.doc.id];if(ge.capturedBy&&$e!==ge.capturedBy){const _t=Br.find(Be=>Be.id===Me.doc.id);_t&&(D({artName:_t.name,team:ge.capturedBy,playerName:ge.playerName||"Someone",points:ge.points||Xu(_t),streak:ge.streak||0,isRecapture:ge.isRecapture||!!$e,timestamp:Date.now()}),setTimeout(()=>D(null),4e3))}}}),te=!1,C.current=J,h(Br.map(Me=>({...Me,capturedBy:J[Me.id]||null}))),cm(br.captures,J),r(!0),console.log("Firebase: Synced",Object.keys(J).length,"captures")},ae=>{console.warn("Firestore sync error:",ae),r(!1)});return()=>ue()},[]);const[z,G]=V.useState({red:0,blue:0});V.useEffect(()=>{const te=_u(pn,HF),re=om(te,ue=>{const ae={red:0,blue:0};ue.forEach(J=>{const me=J.data();(J.id==="red"||J.id==="blue")&&(ae[J.id]=me.score||0)}),G(ae),console.log("Team scores:",ae)});return()=>re()},[]);const[U,b]=V.useState([]);V.useEffect(()=>{const te=_u(pn,I1),re=om(te,ue=>{const ae=[];ue.forEach(J=>{const me=J.data();me.name&&me.team&&ae.push({id:J.id,name:me.name,team:me.team,score:me.score||0,captures:me.captures||0})}),b(ae.sort((J,me)=>me.score-J.score)),console.log("Players loaded:",ae.length)});return()=>re()},[]),V.useEffect(()=>{cm(br.player,o)},[o]);const S=V.useCallback(async(te,re)=>{if(i)try{await qr(Xi(pn,Ph,te),{artId:te,capturedBy:re.team,capturedAt:new Date,playerId:o.id,playerName:o.name,points:re.points,streak:re.streak,isFirstCapture:re.isFirstCapture,isRecapture:re.isRecapture})}catch(ue){console.warn("Failed to sync capture to Firebase:",ue)}},[i,o.id,o.name]);V.useCallback(async te=>{if(i)try{await qr(Xi(pn,Ph,"global"),te,{merge:!0})}catch(re){console.warn("Failed to sync to Firebase:",re)}},[i]);const N=eA(u),O={red:Math.max(z.red,N.red),blue:Math.max(z.blue,N.blue)},j=V.useCallback(async te=>{if(cs.includes(te)&&(a(re=>({...re,team:te})),i&&o.id))try{await qr(Xi(pn,I1,o.id),{name:o.name,team:te,score:o.score||0,captures:o.captureCount||0,joinedAt:new Date},{merge:!0})}catch(re){console.warn("Failed to sync player to Firebase:",re)}},[i,o.id,o.name,o.score,o.captureCount]),B=V.useCallback(te=>{a(re=>({...re,name:te}))},[]),M=V.useCallback((te,re,ue=50)=>{let ae=null,J=1/0;return u.forEach(me=>{const Ze=(me.location[0]-te)*111e3,Me=(me.location[1]-re)*111e3*Math.cos(te*Math.PI/180),ge=Math.sqrt(Ze*Ze+Me*Me);ge<J&&ge<=ue&&(J=ge,ae={...me,distance:Math.round(ge)})}),ae},[u]),xe=V.useCallback((te,re,ue,ae)=>{const J=(ue-te)*111e3,me=(ae-re)*111e3*Math.cos(te*Math.PI/180);return Math.sqrt(J*J+me*me)},[]),ft=V.useCallback((te,re,ue=null)=>{const ae=Xu(te),J=[];let me=ae;const Ze=te.capturedBy&&te.capturedBy!==re.team,Me=!te.capturedBy,ge=Date.now(),$e=re.lastCaptureTime?(ge-re.lastCaptureTime)/1e3/60:1/0,_t=re.streak||0;if(_t>0){const Be=Math.min(_t*.1,1),ln=Math.round(ae*Be);ln>0&&(me+=ln,J.push({type:"streak",label:` ${_t}x Streak`,points:ln}))}if(Ze){const Be=Math.round(ae*.5);me+=Be,J.push({type:"recapture",label:" Recapture",points:Be})}if(Me){const Be=Math.round(ae*.25);me+=Be,J.push({type:"first",label:" First Capture",points:Be})}if($e<5){const Be=Math.round(ae*.2);me+=Be,J.push({type:"speed",label:" Speed Bonus",points:Be})}if(ue&&re.lastCaptureLocation){const Be=xe(re.lastCaptureLocation[0],re.lastCaptureLocation[1],ue[0],ue[1]);if(Be>50){const ln=Math.min(Math.round(Be/100)*5,50);ln>0&&(me+=ln,J.push({type:"distance",label:` ${Math.round(Be)}m walked`,points:ln}))}}return{basePoints:ae,totalPoints:me,bonuses:J,isRecapture:Ze,isFirstCapture:Me}},[xe]),Ie=V.useCallback((te,re=null)=>{if(!o.team)return{success:!1,message:"Join a team first!"};const ue=u.find(ge=>ge.id===te);if(!ue)return{success:!1,message:"Art not found"};if(ue.capturedBy===o.team)return{success:!1,message:"Already yours!"};if(ue.status==="ghost")return{success:!1,message:"This art no longer exists"};const ae=re||ue.location,J=ft(ue,o,ae),me=ue.capturedBy;h(ge=>ge.map($e=>$e.id===te?{...$e,capturedBy:o.team}:$e));const Ze=o.streak+1;a(ge=>({...ge,score:ge.score+J.totalPoints,capturedArt:[...ge.capturedArt.filter($e=>$e!==te),te],streak:Ze,maxStreak:Math.max(ge.maxStreak,Ze),lastCaptureTime:Date.now(),lastCaptureLocation:ae,captureCount:ge.captureCount+1,recaptureCount:J.isRecapture?ge.recaptureCount+1:ge.recaptureCount,firstCaptureCount:J.isFirstCapture?ge.firstCaptureCount+1:ge.firstCaptureCount,totalDistance:ge.totalDistance+(re&&ge.lastCaptureLocation?xe(ge.lastCaptureLocation[0],ge.lastCaptureLocation[1],re[0],re[1]):0)})),S(te,{team:o.team,points:J.totalPoints,streak:Ze,isFirstCapture:J.isFirstCapture,isRecapture:J.isRecapture});const Me=um(br.captures,{});return cm(br.captures,{...Me,[te]:o.team}),{success:!0,art:ue,points:J.totalPoints,basePoints:J.basePoints,bonuses:J.bonuses,streak:Ze,previousTeam:me,message:me?`Stolen from ${me}!`:"Captured!"}},[o,u,S,ft,xe]),ct=V.useCallback(async(te,re)=>{_(!0);const ue=M(re.lat,re.lng,100);if(!ue){_(!1),m({success:!1,message:"No street art nearby. Get closer!"});return}R({art:ue,photo:te,location:re}),_(!1)},[M]),Z=V.useCallback(()=>{if(!T)return;const te=Ie(T.art.id);m(te),R(null)},[T,Ie]),pe=V.useCallback(()=>{R(null),m(null)},[]),ee=V.useCallback(async()=>{if(localStorage.removeItem(br.player),localStorage.removeItem(br.captures),e&&i)try{await qr(Xi(pn,Ph,"global"),{})}catch(te){console.warn("Failed to reset Firebase:",te)}a({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[]}),h(Br.map(te=>({...te,capturedBy:null}))),m(null),R(null)},[e,i]),ie={player:o,artPoints:u,teamScores:O,globalTeamScores:z,allPlayers:U,recentCaptures:I,captureNotification:k,scanResult:f,isScanning:g,pendingCapture:T,isOnline:i,teams:cs,joinTeam:j,setPlayerName:B,captureArt:Ie,startCapture:ct,confirmCapture:Z,cancelCapture:pe,findNearestArt:M,setScanResult:m,resetAll:ee,TEAM_COLORS:Je};return w.jsx(tA.Provider,{value:ie,children:t})}function Li(){const t=V.useContext(tA);if(!t)throw new Error("useGame must be used within a GameProvider");return t}/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ve=(t,e)=>{const n=V.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>V.createElement("svg",{ref:m,...$F,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${qF(t)}`,u].join(" "),...f},[...e.map(([g,_])=>V.createElement(g,_)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=Ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=Ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=Ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=Ve("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=Ve("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=Ve("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=Ve("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=Ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=Ve("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Ve("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=Ve("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=Ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=Ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=Ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=Ve("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=Ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=Ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=Ve("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=Ve("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=Ve("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=Ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Ve("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Ve("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=Ve("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=Ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Ve("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),f6=51,p6=24;function aA({size:t=120,className:e=""}){const[n,i]=V.useState(0);V.useEffect(()=>{const a=setInterval(()=>{i(u=>(u+1)%f6)},1e3/p6);return()=>clearInterval(a)},[]);const r=String(n).padStart(5,"0");return w.jsx("img",{src:`/street-art-ctf/animation/frame_${r}.png`,alt:"Loading",width:t,height:t,className:e,style:{imageRendering:"pixelated",objectFit:"contain"}})}const k1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],R1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function N1(){const t=k1[Math.floor(Math.random()*k1.length)],e=R1[Math.floor(Math.random()*R1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function m6(){const t=wf(),{player:e,joinTeam:n,setPlayerName:i,allPlayers:r}=Li(),[o,a]=V.useState(0),[u,h]=V.useState(()=>e.name&&e.name!=="Street Artist"?e.name:N1()),[f,m]=V.useState(null);V.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]),V.useEffect(()=>{const D=r.filter(C=>C.team==="red").length,I=r.filter(C=>C.team==="blue").length,P=D<I?"red":I<D?"blue":Math.random()<.5?"red":"blue";m(P)},[r]);const g=()=>{h(N1())},_=()=>{if(o===1&&u.trim()&&(i(u.trim()),f&&n(f)),o===3){t("/map");return}a(o+1)},T=()=>o===1?u.trim().length>=2&&f:!0,R=f==="red"?"#ff6b6b":"#4dabf7",k=f==="red"?"Red":"Blue";return w.jsxs("div",{className:"h-screen bg-[#0a0a0f] flex flex-col overflow-hidden",children:[w.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:[0,1,2,3].map(D=>w.jsx("div",{className:`h-1.5 rounded-sm transition-all duration-300 ${D===o?"bg-white w-8":D<o?"bg-white/60 w-1.5":"bg-white/20 w-1.5"}`},D))}),w.jsxs(Uu,{mode:"wait",children:[o===0&&w.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx(le.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring"},className:"mb-6",children:w.jsx(aA,{size:140})}),w.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Street Art CTF"}),w.jsx("p",{className:"text-white/40 max-w-xs mb-8",children:"Scan real street art to capture territory for your team. The city is your battlefield."}),w.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(A1,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Scan Art"}),w.jsx("div",{className:"text-xs text-white/40",children:"Find and capture street art"})]})]}),w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(Gg,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Control Territory"}),w.jsx("div",{className:"text-xs text-white/40",children:"Expand your team's area"})]})]}),w.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:w.jsx(Jd,{size:20,className:"text-white/70"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:"font-medium text-sm",children:"Win Together"}),w.jsx("div",{className:"text-xs text-white/40",children:"Lead your team to victory"})]})]})]})]},"intro"),o===1&&w.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"What's your name?"}),w.jsx("p",{className:"text-white/40 mb-8",children:"This is how others will see you"}),w.jsx("div",{className:"w-full max-w-xs mb-4",children:w.jsx("input",{type:"text",value:u,onChange:D=>h(D.target.value),placeholder:"Enter your name...",maxLength:20,className:"w-full px-4 py-4 rounded-lg bg-white/5 border border-white/10 text-center text-xl font-medium placeholder:text-white/30 focus:outline-none focus:border-white/30"})}),w.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white/50 hover:bg-white/10 transition-colors",children:[w.jsx(sA,{size:16}),"Generate random name"]})]},"name"),o===2&&w.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative overflow-hidden",children:[w.jsx(le.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:.15},transition:{delay:.3,duration:.8},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:w.jsx("div",{className:"w-[600px] h-[600px] rounded-full blur-3xl",style:{backgroundColor:R}})}),w.jsxs(le.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:200},className:"relative z-10",children:[w.jsxs(le.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-white/50 text-lg mb-2",children:["Welcome, ",u,"!"]}),w.jsx(le.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-white/40 text-sm mb-6",children:"You've been assigned to"}),w.jsx(le.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.8,type:"spring",stiffness:200},children:w.jsxs("h1",{className:"text-6xl font-bold mb-4",style:{color:R},children:["Team ",k]})}),w.jsx(le.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"text-white/30 text-sm",children:f==="red"?"The Flames ":"The Waves "})]})]},"team-reveal"),o===3&&w.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"How to Play"}),w.jsx("p",{className:"text-white/40 mb-8 text-sm",children:"It's simple!"}),w.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[w.jsxs(le.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(A1,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Find & Scan"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Explore Prague to find street art. Use your camera to scan and capture it."})]})]}),w.jsxs(le.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500/30 to-cyan-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(Gg,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Claim Territory"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Each capture claims territory for your team. Check the map to see who controls what."})]})]}),w.jsxs(le.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex items-start gap-4 p-5 rounded-2xl bg-white/5 border border-white/10",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500/30 to-orange-500/30 flex items-center justify-center flex-shrink-0",children:w.jsx(rv,{size:24,className:"text-white"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h3",{className:"font-semibold text-base mb-1",children:"Score Points"}),w.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:"Bigger art = more points. Steal from enemies for bonus points!"})]})]})]})]},"tutorial")]}),w.jsx("div",{className:"p-4 pb-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:w.jsxs(le.button,{whileTap:{scale:.98},onClick:_,disabled:!T(),className:`w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition-all ${T()?"bg-white text-black":"bg-white/10 text-white/30 cursor-not-allowed"}`,children:[o===3?"Let's Go!":"Continue",w.jsx(KF,{size:20})]})})]})}const g6=[{color:"red",name:"Red Team"},{color:"blue",name:"Blue Team"}];function y6(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"just now";const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const i=Math.floor(n/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function _6(){const{player:t,joinTeam:e,teamScores:n,recentCaptures:i,isOnline:r}=Li(),o=f=>{e(f)},a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},u={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},h=Object.values(n).reduce((f,m)=>f+m,0);return w.jsxs(le.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:"hidden",animate:"visible",exit:{opacity:0,y:20},variants:a,children:[w.jsxs(le.div,{className:"text-center mb-6",variants:u,children:[w.jsx(le.div,{className:"relative inline-block mb-3",animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:w.jsx(aA,{size:70})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Street Art CTF"}),w.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] ${r?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[r?w.jsx(XF,{size:10}):w.jsx(c6,{size:10}),r?"Live":"Offline"]})]}),w.jsxs(le.div,{variants:u,className:"mb-6",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("span",{className:"text-xs text-white/40",children:"Red Team"}),w.jsx("span",{className:"text-xs text-white/40",children:"Blue Team"})]}),w.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-white/10",children:[w.jsx(le.div,{className:"h-full",style:{backgroundColor:Je.red.hex},initial:{width:"50%"},animate:{width:h>0?`${n.red/h*100}%`:"50%"},transition:{duration:.8}}),w.jsx(le.div,{className:"h-full",style:{backgroundColor:Je.blue.hex},initial:{width:"50%"},animate:{width:h>0?`${n.blue/h*100}%`:"50%"},transition:{duration:.8}})]}),w.jsxs("div",{className:"flex items-center justify-between mt-2",children:[w.jsxs("span",{className:"text-sm font-bold",style:{color:Je.red.hex},children:[n.red," pts"]}),w.jsxs("span",{className:"text-sm font-bold",style:{color:Je.blue.hex},children:[n.blue," pts"]})]})]}),t.team?w.jsx(le.div,{className:"mb-6 p-4 rounded-xl border-2",variants:u,style:{borderColor:Je[t.team].hex+"50",backgroundColor:Je[t.team].hex+"10"},children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:Je[t.team].hex+"30"},children:w.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Je[t.team].hex}})}),w.jsxs("div",{children:[w.jsx("p",{className:"font-bold text-white",children:t.name}),w.jsx("p",{className:"text-xs",style:{color:Je[t.team].hex},children:t.team==="red"?"Red Team":"Blue Team"})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),w.jsx("p",{className:"text-[10px] text-white/40",children:"points"})]})]})}):w.jsxs(le.div,{variants:u,className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(Jd,{size:14,className:"text-white/40"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Choose Your Side"})]}),w.jsx("div",{className:"grid grid-cols-2 gap-3",children:g6.map(({color:f,name:m})=>w.jsxs(le.button,{onClick:()=>o(f),className:"p-4 rounded-xl text-center border-2 transition-all",style:{borderColor:Je[f].hex+"50",backgroundColor:Je[f].hex+"10"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[w.jsx("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:Je[f].hex+"30"},children:w.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:Je[f].hex}})}),w.jsx("p",{className:"font-semibold text-white",children:m})]},f))})]}),w.jsxs(le.div,{variants:u,children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(QF,{size:14,className:"text-white/40"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Live Activity"})]}),i.length===0?w.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:"No captures yet. Be the first!"}):w.jsx("div",{className:"space-y-2",children:i.map((f,m)=>{var _;const g=((_=Je[f.team])==null?void 0:_.hex)||"#888";return w.jsxs(le.div,{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.05},children:[w.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${g}20`},children:f.isRecapture?w.jsx(oA,{size:14,style:{color:g}}):w.jsx(nA,{size:14,style:{color:g}})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm font-medium text-white truncate",children:f.artName}),w.jsxs("p",{className:"text-[10px] text-white/40",children:[w.jsx("span",{style:{color:g},children:f.playerName}),"  ",f.area]})]}),w.jsxs("div",{className:"text-right flex-shrink-0",children:[w.jsxs("p",{className:"text-xs font-semibold",style:{color:g},children:["+",f.points]}),w.jsx("p",{className:"text-[10px] text-white/30",children:y6(f.capturedAt)})]})]},f.id)})})]})]})}function v6(t,e){const n=V.useRef(e);V.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function w6(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const x6=1;function T6(t){return Object.freeze({__version:x6,map:t})}function sv(t,e){return Object.freeze({...t,...e})}const lA=V.createContext(null),uA=lA.Provider;function ov(){const t=V.useContext(lA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function cA(t){function e(n,i){const{instance:r,context:o}=t(n).current;return V.useImperativeHandle(i,()=>r),n.children==null?null:so.createElement(uA,{value:o},n.children)}return V.forwardRef(e)}function E6(t){function e(n,i){const{instance:r}=t(n).current;return V.useImperativeHandle(i,()=>r),null}return V.forwardRef(e)}function hA(t,e){const n=V.useRef();V.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function av(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Zg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(GA,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,E,F;return F=function(){p=!1,v&&(E.apply(d,v),v=!1)},E=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(F,l),p=!0)},E}function m(s,l,d){var p=l[1],v=l[0],E=p-v;return s===p&&d?s:((s-v)%E+E)%E+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function R(s){return T(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function D(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function P(s,l){return s.replace(I,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function z(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var b=0;function S(s){var l=+new Date,d=Math.max(0,16-(l-b));return b=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||U("RequestAnimationFrame")||S,O=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function j(s,l,d){if(d&&N===S)s.call(l);else return N.call(window,a(s,l))}function B(s){s&&O.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:T,splitWords:R,setOptions:k,getParamString:D,template:P,isArray:C,indexOf:z,emptyImageUrl:G,requestFn:N,cancelFn:O,requestAnimFrame:j,cancelAnimFrame:B};function xe(){}xe.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(ft(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,F=p._initHooks.length;E<F;E++)p._initHooks[E].call(this)}},l},xe.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},xe.mergeOptions=function(s){return r(this.prototype.options,s),this},xe.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function ft(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ie={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=R(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=R(s);for(var v=arguments.length===1,E=0,F=s.length;E<F;E++)v?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,E=p.length;v<E;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var F=this._listens(s,l,d);if(F!==!1){var W=p[F];this._firingCount&&(W.fn=g,this._events[s]=p=p.slice()),p.splice(F,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var E=0,F=v.length;E<F;E++){var W=v[E],q=W.fn;W.once&&this.off(s,q,W.ctx),q.call(W.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var F in this._eventParents)if(this._eventParents[F].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,E=p.length;v<E;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=R(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ie.addEventListener=Ie.on,Ie.removeEventListener=Ie.clearAllEventListeners=Ie.off,Ie.addOneTimeEventListener=Ie.once,Ie.fireEvent=Ie.fire,Ie.hasEventListeners=Ie.listens;var ct=xe.extend(Ie);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var pe=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(ee(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ee(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(s){s=ee(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=ee(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ee(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function ee(s,l,d){return s instanceof Z?s:C(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function ie(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}ie.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=ee(s);else if(s=te(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=ee(s):s=te(s),s instanceof ie?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=te(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>=l.x&&p.x<=d.x,F=v.y>=l.y&&p.y<=d.y;return E&&F},overlaps:function(s){s=te(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>l.x&&p.x<d.x,F=v.y>l.y&&p.y<d.y;return E&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return te(ee(l.x-p,l.y-v),ee(d.x+p,d.y+v))},equals:function(s){return s?(s=te(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function te(s,l){return!s||s instanceof ie?s:new ie(s,l)}function re(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}re.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof ae)p=s,v=s;else if(s instanceof re){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(J(s)||ue(s)):this;return!l&&!d?(this._southWest=new ae(p.lat,p.lng),this._northEast=new ae(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new re(new ae(l.lat-p,l.lng-v),new ae(d.lat+p,d.lng+v))},getCenter:function(){return new ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ae||"lat"in s?s=J(s):s=ue(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof re?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=ue(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>=l.lat&&p.lat<=d.lat,F=v.lng>=l.lng&&p.lng<=d.lng;return E&&F},overlaps:function(s){s=ue(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>l.lat&&p.lat<d.lat,F=v.lng>l.lng&&p.lng<d.lng;return E&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=ue(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ue(s,l){return s instanceof re?s:new re(s,l)}function ae(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}ae.prototype={equals:function(s,l){if(!s)return!1;s=J(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return Ze.distance(this,J(s))},wrap:function(){return Ze.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return ue([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new ae(this.lat,this.lng,this.alt)}};function J(s,l,d){return s instanceof ae?s:C(s)&&typeof s[0]!="object"?s.length===3?new ae(s[0],s[1],s[2]):s.length===2?new ae(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ae(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new ae(s,l,d)}var me={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new ie(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ae(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var E=s.getSouthWest(),F=s.getNorthEast(),W=new ae(E.lat-p,E.lng-v),q=new ae(F.lat-p,F.lng-v);return new re(W,q)}},Ze=r({},me,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),F=Math.sin((l.lng-s.lng)*d/2),W=E*E+Math.cos(p)*Math.cos(v)*F*F,q=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*q}}),Me=6378137,ge={R:Me,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new ae((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Me*Math.PI;return new ie([-s,-s],[s,s])}()};function $e(s,l,d,p){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}$e.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function _t(s,l,d,p){return new $e(s,l,d,p)}var Be=r({},Ze,{code:"EPSG:3857",projection:ge,transformation:function(){var s=.5/(Math.PI*ge.R);return _t(s,.5,-s,.5)}()}),ln=r({},Be,{code:"EPSG:900913"});function _c(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Io(s,l){var d="",p,v,E,F,W,q;for(p=0,E=s.length;p<E;p++){for(W=s[p],v=0,F=W.length;v<F;v++)q=W[v],d+=(v?"L":"M")+q.x+" "+q.y;d+=l?de.svg?"z":"x":""}return d||"M0 0"}var Is=document.documentElement.style,As="ActiveXObject"in window,kt=As&&!document.addEventListener,Rt="msLaunchUri"in navigator&&!("documentMode"in document),yr=un("webkit"),vc=un("android"),ul=un("android 2")||un("android 3"),Qf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),bs=vc&&un("Google")&&Qf<537&&!("AudioNode"in window),Ao=!!window.opera,cl=!Rt&&un("chrome"),bo=un("gecko")&&!yr&&!Ao&&!As,Xf=!cl&&un("safari"),wc=un("phantom"),hl="OTransition"in Is,xc=navigator.platform.indexOf("Win")===0,_r=As&&"transition"in Is,ks="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ul,ko="MozPerspective"in Is,Mi=!window.L_DISABLE_3D&&(_r||ks||ko)&&!hl&&!wc,vr=typeof orientation<"u"||un("mobile"),Ro=vr&&yr,Tc=vr&&ks,wr=!window.PointerEvent&&window.MSPointerEvent,dl=!!(window.PointerEvent||wr),Nt="ontouchstart"in window||!!window.TouchEvent,Ec=!window.L_NO_TOUCH&&(Nt||dl),Rs=vr&&Ao,Ns=vr&&bo,Yf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Jf=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),xr=function(){return!!document.createElement("canvas").getContext}(),fl=!!(document.createElementNS&&_c("svg").createSVGRect),ep=!!fl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),No=!fl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Pc=navigator.platform.indexOf("Mac")===0,Sc=navigator.platform.indexOf("Linux")===0;function un(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var de={ie:As,ielt9:kt,edge:Rt,webkit:yr,android:vc,android23:ul,androidStock:bs,opera:Ao,chrome:cl,gecko:bo,safari:Xf,phantom:wc,opera12:hl,win:xc,ie3d:_r,webkit3d:ks,gecko3d:ko,any3d:Mi,mobile:vr,mobileWebkit:Ro,mobileWebkit3d:Tc,msPointer:wr,pointer:dl,touch:Ec,touchNative:Nt,mobileOpera:Rs,mobileGecko:Ns,retina:Yf,passiveEvents:Jf,canvas:xr,svg:fl,vml:No,inlineSvg:ep,mac:Pc,linux:Sc},Cc=de.msPointer?"MSPointerDown":"pointerdown",Zn=de.msPointer?"MSPointerMove":"pointermove",pl=de.msPointer?"MSPointerUp":"pointerup",ml=de.msPointer?"MSPointerCancel":"pointercancel",Ls={touchstart:Cc,touchmove:Zn,touchend:pl,touchcancel:ml},Lo={touchstart:gl,touchmove:Rn,touchend:Rn,touchcancel:Rn},Oi={},Ic=!1;function Ac(s,l,d){return l==="touchstart"&&Ms(),Lo[l]?(d=Lo[l].bind(this,d),s.addEventListener(Ls[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function tp(s,l,d){if(!Ls[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ls[l],d,!1)}function Mo(s){Oi[s.pointerId]=s}function bc(s){Oi[s.pointerId]&&(Oi[s.pointerId]=s)}function Oo(s){delete Oi[s.pointerId]}function Ms(){Ic||(document.addEventListener(Cc,Mo,!0),document.addEventListener(Zn,bc,!0),document.addEventListener(pl,Oo,!0),document.addEventListener(ml,Oo,!0),Ic=!0)}function Rn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Oi)l.touches.push(Oi[d]);l.changedTouches=[l],s(l)}}function gl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&vt(l),Rn(s,l)}function np(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var kc=200;function Rc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var F=xl(E);if(!(F.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!F.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var W=Date.now();W-d<=kc?(p++,p===2&&l(np(E))):p=1,d=W}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Nc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Os=Do(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Di=Do(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yl=Di==="webkitTransition"||Di==="OTransition"?Di+"End":"transitionend";function _l(s){return typeof s=="string"?document.getElementById(s):s}function Tr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Oe(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function Fe(s){var l=s.parentNode;l&&l.removeChild(s)}function Jt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Nn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Ln(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Ds(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=ui(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function ce(s,l){if(s.classList!==void 0)for(var d=R(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Ds(s,l)){var E=ui(s);Vi(s,(E?E+" ":"")+l)}}function Ke(s,l){s.classList!==void 0?s.classList.remove(l):Vi(s,T((" "+ui(s)+" ").replace(" "+l+" "," ")))}function Vi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function ui(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function cn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Lc(s,l)}function Lc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Do(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function ji(s,l,d){var p=l||new Z(0,0);s.style[Os]=(de.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function ht(s,l){s._leaflet_pos=l,de.any3d?ji(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Fi(s){return s._leaflet_pos||new Z(0,0)}var Kn,xn,Vo;if("onselectstart"in document)Kn=function(){Ee(window,"selectstart",vt)},xn=function(){qe(window,"selectstart",vt)};else{var Er=Do(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Kn=function(){if(Er){var s=document.documentElement.style;Vo=s[Er],s[Er]="none"}},xn=function(){Er&&(document.documentElement.style[Er]=Vo,Vo=void 0)}}function jo(){Ee(window,"dragstart",vt)}function Fo(){qe(window,"dragstart",vt)}var Vs,ci;function vl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(zo(),Vs=s,ci=s.style.outlineStyle,s.style.outlineStyle="none",Ee(window,"keydown",zo))}function zo(){Vs&&(Vs.style.outlineStyle=ci,Vs=void 0,ci=void 0,qe(window,"keydown",zo))}function Mc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Mn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var ip={__proto__:null,TRANSFORM:Os,TRANSITION:Di,TRANSITION_END:yl,get:_l,getStyle:Tr,create:Oe,remove:Fe,empty:Jt,toFront:Nn,toBack:Ln,hasClass:Ds,addClass:ce,removeClass:Ke,setClass:Vi,getClass:ui,setOpacity:cn,testProp:Do,setTransform:ji,setPosition:ht,getPosition:Fi,get disableTextSelection(){return Kn},get enableTextSelection(){return xn},disableImageDrag:jo,enableImageDrag:Fo,preventOutline:vl,restoreOutline:zo,getSizedParentNode:Mc,getScale:Mn};function Ee(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Bo(s,v,l[v],d);else{l=R(l);for(var E=0,F=l.length;E<F;E++)Bo(s,l[E],d,p)}return this}var en="_leaflet_events";function qe(s,l,d,p){if(arguments.length===1)Pr(s),delete s[en];else if(l&&typeof l=="object")for(var v in l)js(s,v,l[v],d);else if(l=R(l),arguments.length===2)Pr(s,function(W){return z(l,W)!==-1});else for(var E=0,F=l.length;E<F;E++)js(s,l[E],d,p);return this}function Pr(s,l){for(var d in s[en]){var p=d.split(/\d/)[0];(!l||l(p))&&js(s,p,null,null,d)}}var zi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bo(s,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(s[en]&&s[en][v])return this;var E=function(W){return d.call(p||s,W||window.event)},F=E;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?E=Ac(s,l,E):de.touch&&l==="dblclick"?E=Rc(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(zi[l]||l,E,de.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(W){W=W||window.event,El(s,W)&&F(W)},s.addEventListener(zi[l],E,!1)):s.addEventListener(l,F,!1):s.attachEvent("on"+l,E),s[en]=s[en]||{},s[en][v]=E}function js(s,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var E=s[en]&&s[en][v];if(!E)return this;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?tp(s,l,E):de.touch&&l==="dblclick"?Nc(s,E):"removeEventListener"in s?s.removeEventListener(zi[l]||l,E,!1):s.detachEvent("on"+l,E),s[en][v]=null}function Ue(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function wl(s){return Bo(s,"wheel",Ue),this}function Fs(s){return Ee(s,"mousedown touchstart dblclick contextmenu",Ue),s._leaflet_disable_click=!0,this}function vt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function hi(s){return vt(s),Ue(s),this}function xl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function zs(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=Mn(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var di=de.linux&&de.chrome?window.devicePixelRatio:de.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Tl(s){return de.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/di:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function El(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Bs={__proto__:null,on:Ee,off:qe,stopPropagation:Ue,disableScrollPropagation:wl,disableClickPropagation:Fs,preventDefault:vt,stop:hi,getPropagationPath:xl,getMousePosition:zs,getWheelDelta:Tl,isExternalTarget:El,addListener:Ee,removeListener:qe},Pl=ct.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Fi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),ht(this._el,d),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ae=ct.extend({options:{crs:Be,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(J(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Di&&de.any3d&&!de.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,yl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(J(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),E=s instanceof Z?s:this.latLngToContainerPoint(s),F=E.subtract(v).multiplyBy(1-1/p),W=this.containerPointToLatLng(v.add(F));return this.setView(W,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():ue(s);var d=ee(l.paddingTopLeft||l.padding||[0,0]),p=ee(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var E=p.subtract(d).divideBy(2),F=this.project(s.getSouthWest(),v),W=this.project(s.getNorthEast(),v),q=this.unproject(F.add(W).divideBy(2).add(E),v);return{center:q,zoom:v}},fitBounds:function(s,l){if(s=ue(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=ee(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Pl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ce(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!de.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),E=this.getSize(),F=this._zoom;s=J(s),l=l===void 0?F:l;var W=Math.max(E.x,E.y),q=W*this.getZoomScale(F,l),Q=v.distanceTo(p)||1,se=1.42,_e=se*se;function be(wt){var Qc=wt?-1:1,UA=wt?q:W,HA=q*q-W*W+Qc*_e*_e*Q*Q,WA=2*UA*_e*Q,lp=HA/WA,Rv=Math.sqrt(lp*lp+1)-lp,$A=Rv<1e-9?-18:Math.log(Rv);return $A}function tn(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function Lt(wt){return(Math.exp(wt)+Math.exp(-wt))/2}function Vn(wt){return tn(wt)/Lt(wt)}var dn=be(0);function ea(wt){return W*(Lt(dn)/Lt(dn+se*wt))}function jA(wt){return W*(Lt(dn)*Vn(dn+se*wt)-tn(dn))/_e}function FA(wt){return 1-Math.pow(1-wt,1.5)}var zA=Date.now(),bv=(be(1)-dn)/se,BA=d.duration?1e3*d.duration:1e3*bv*.8;function kv(){var wt=(Date.now()-zA)/BA,Qc=FA(wt)*bv;wt<=1?(this._flyToFrame=j(kv,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(jA(Qc)/Q)),F),this.getScaleZoom(W/ea(Qc),F),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),kv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=ue(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,ue(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=ee(l.paddingTopLeft||l.padding||[0,0]),p=ee(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),E=this.project(s),F=this.getPixelBounds(),W=te([F.min.add(d),F.max.subtract(p)]),q=W.getSize();if(!W.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(W.getCenter()),se=W.extend(E).getSize().subtract(q);v.x+=Q.x<0?-se.x:se.x,v.y+=Q.y<0?-se.y:se.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),E=p.subtract(v);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new ae(l,d),v=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var F=this.getBoundsZoom(v);this.setView(p,E.maxZoom?Math.min(F,E.maxZoom):F)}var W={latlng:p,bounds:v,timestamp:s.timestamp};for(var q in s.coords)typeof s.coords[q]=="number"&&(W[q]=s.coords[q]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Fe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Fe(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Oe("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new re(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=ue(s),d=ee(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),E=this.getMaxZoom(),F=s.getNorthWest(),W=s.getSouthEast(),q=this.getSize().subtract(d),Q=te(this.project(W,p),this.project(F,p)).getSize(),se=de.any3d?this.options.zoomSnap:1,_e=q.x/Q.x,be=q.y/Q.y,tn=l?Math.max(_e,be):Math.min(_e,be);return p=this.getScaleZoom(tn,p),se&&(p=Math.round(p/(se/100))*(se/100),p=l?Math.ceil(p/se)*se:Math.floor(p/se)*se),Math.max(v,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new ie(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(J(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ee(s),l)},layerPointToLatLng:function(s){var l=ee(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(J(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(J(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ue(s))},distance:function(s,l){return this.options.crs.distance(J(s),J(l))},containerPointToLayerPoint:function(s){return ee(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ee(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(ee(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(s)))},mouseEventToContainerPoint:function(s){return zs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=_l(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&de.any3d,ce(s,"leaflet-container"+(de.touch?" leaflet-touch":"")+(de.retina?" leaflet-retina":"")+(de.ielt9?" leaflet-oldie":"")+(de.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Tr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ht(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ce(s.markerPane,"leaflet-zoom-hide"),ce(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){ht(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ht(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?qe:Ee;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),de.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,F=!1;E;){if(p=this._targets[h(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){F=!0;break}if(p&&p.listens(l,!0)&&(v&&!El(E,s)||(d.push(p),v))||E===this._container)break;E=E.parentNode}return!d.length&&!F&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&vl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var E=[],F=0;F<d.length;F++)d[F].listens(l,!0)&&E.push(d[F]);v=E.concat(v)}if(v.length){l==="contextmenu"&&vt(s);var W=v[0],q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);q.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Q?W.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(F=0;F<v.length;F++)if(v[F].fire(l,q,!0),q.originalEvent._stopped||v[F].options.bubblingMouseEvents===!1&&z(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Fi(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return te([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),E=new ie(p.subtract(v),p.add(v)),F=this._getBoundsOffset(E,d,l);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?s:this.unproject(p.add(F),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new ie(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=te(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),E=p.max.subtract(s.max),F=this._rebound(v.x,-E.x),W=this._rebound(v.y,-E.y);return new Z(F,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=de.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Oe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Os,p=this._proxy.style[d];ji(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Fe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();ji(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(j(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,ce(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Uo(s,l){return new Ae(s,l)}var hn=xe.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return ce(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Fe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),fi=function(s){return new hn(s)};Ae.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Oe("div",l+"control-container",this._container);function p(v,E){var F=l+v+" "+l+E;s[v+E]=Oe("div",F,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Fe(this._controlCorners[s]);Fe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Oc=hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){k(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return hn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ce(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ce(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Oe("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Fs(l),wl(l);var p=this._section=Oe("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Ee(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Oe("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ee(v,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){vt(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Oe("div",s+"-base",p),this._separator=Oe("div",s+"-separator",p),this._overlaysList=Oe("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Jt(this._baseLayersList),Jt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),Ee(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(v);var F=s.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(E=0;E<v.length;E++)this._map.hasLayer(v[E])&&this._map.removeLayer(v[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ee(s,"click",vt),this.expand();var l=this;setTimeout(function(){qe(s,"click",vt),l._preventClick=!1})}}),Dc=function(s,l,d){return new Oc(s,l,d)},Bi=hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Oe("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var E=Oe("a",d,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Fs(E),Ee(E,"click",hi),Ee(E,"click",v,this),Ee(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ke(this._zoomInButton,l),Ke(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ce(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ce(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ae.mergeOptions({zoomControl:!0}),Ae.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bi,this.addControl(this.zoomControl))});var Vc=function(s){return new Bi(s)},Sl=hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Oe("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Oe("div",l,d)),s.imperial&&(this._iScale=Oe("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Cl=function(s){return new Sl(s)},Il='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ho=hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(de.inlineSvg?Il+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Oe("div","leaflet-control-attribution"),Fs(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ae.mergeOptions({attributionControl:!0}),Ae.addInitHook(function(){this.options.attributionControl&&new Ho().addTo(this)});var Wo=function(s){return new Ho(s)};hn.Layers=Oc,hn.Zoom=Bi,hn.Scale=Sl,hn.Attribution=Ho,fi.layers=Dc,fi.zoom=Vc,fi.scale=Cl,fi.attribution=Wo;var Tn=xe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tn.addTo=function(s,l){return s.addHandler(l,this),this};var jc={Events:Ie},pi=de.touch?"touchstart mousedown":"mousedown",Qn=ct.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){k(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Ee(this._dragStartTarget,pi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qn._dragging===this&&this.finishDrag(!0),qe(this._dragStartTarget,pi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ds(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Qn._dragging===this&&this.finishDrag();return}if(!(Qn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Qn._dragging=this,this._preventOutline&&vl(this._element),jo(),Kn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Mc(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Fi(this._element),this._parentScale=Mn(d);var p=s.type==="mousedown";Ee(document,p?"mousemove":"touchmove",this._onMove,this),Ee(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,vt(s),this._moved||(this.fire("dragstart"),this._moved=!0,ce(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ce(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ht(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ke(document.body,"leaflet-dragging"),this._lastTarget&&(Ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),qe(document,"mousemove touchmove",this._onMove,this),qe(document,"mouseup touchend touchcancel",this._onUp,this),Fo(),xn();var l=this._moved&&this._moving;this._moving=!1,Qn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Al(s,l,d){var p,v=[1,4,2,8],E,F,W,q,Q,se,_e,be;for(E=0,se=s.length;E<se;E++)s[E]._code=$(s[E],l);for(W=0;W<4;W++){for(_e=v[W],p=[],E=0,se=s.length,F=se-1;E<se;F=E++)q=s[E],Q=s[F],q._code&_e?Q._code&_e||(be=H(Q,q,_e,l,d),be._code=$(be,l),p.push(be)):(Q._code&_e&&(be=H(Q,q,_e,l,d),be._code=$(be,l),p.push(be)),p.push(q));s=p}return s}function bl(s,l){var d,p,v,E,F,W,q,Q,se;if(!s||s.length===0)throw new Error("latlngs not passed");ze(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var _e=J([0,0]),be=ue(s),tn=be.getNorthWest().distanceTo(be.getSouthWest())*be.getNorthEast().distanceTo(be.getNorthWest());tn<1700&&(_e=$o(s));var Lt=s.length,Vn=[];for(d=0;d<Lt;d++){var dn=J(s[d]);Vn.push(l.project(J([dn.lat-_e.lat,dn.lng-_e.lng])))}for(W=q=Q=0,d=0,p=Lt-1;d<Lt;p=d++)v=Vn[d],E=Vn[p],F=v.y*E.x-E.y*v.x,q+=(v.x+E.x)*F,Q+=(v.y+E.y)*F,W+=F*3;W===0?se=Vn[0]:se=[q/W,Q/W];var ea=l.unproject(ee(se));return J([ea.lat+_e.lat,ea.lng+_e.lng])}function $o(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var E=J(s[v]);l+=E.lat,d+=E.lng,p++}return J([l/p,d/p])}var qo={__proto__:null,clipPolygon:Al,polygonCenter:bl,centroid:$o};function Ht(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Sr(s,d),s}function kl(s,l,d){return Math.sqrt(Pe(s,l,d,!0))}function Fc(s,l,d){return Pe(s,l,d)}function Sr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,c(s,v,l,0,d-1);var E,F=[];for(E=0;E<d;E++)v[E]&&F.push(s[E]);return F}function c(s,l,d,p,v){var E=0,F,W,q;for(W=p+1;W<=v-1;W++)q=Pe(s[W],s[p],s[v],!0),q>E&&(F=W,E=q);E>d&&(l[F]=1,c(s,l,d,p,F),c(s,l,d,F,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,E=s.length;p<E;p++)ne(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<E-1&&d.push(s[E-1]),d}var x;function A(s,l,d,p,v){var E=p?x:$(s,d),F=$(l,d),W,q,Q;for(x=F;;){if(!(E|F))return[s,l];if(E&F)return!1;W=E||F,q=H(s,l,W,d,v),Q=$(q,d),W===E?(s=q,E=Q):(l=q,F=Q)}}function H(s,l,d,p,v){var E=l.x-s.x,F=l.y-s.y,W=p.min,q=p.max,Q,se;return d&8?(Q=s.x+E*(q.y-s.y)/F,se=q.y):d&4?(Q=s.x+E*(W.y-s.y)/F,se=W.y):d&2?(Q=q.x,se=s.y+F*(q.x-s.x)/E):d&1&&(Q=W.x,se=s.y+F*(W.x-s.x)/E),new Z(Q,se,v)}function $(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ne(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Pe(s,l,d,p){var v=l.x,E=l.y,F=d.x-v,W=d.y-E,q=F*F+W*W,Q;return q>0&&(Q=((s.x-v)*F+(s.y-E)*W)/q,Q>1?(v=d.x,E=d.y):Q>0&&(v+=F*Q,E+=W*Q)),F=s.x-v,W=s.y-E,p?F*F+W*W:new Z(v,E)}function ze(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function He(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ze(s)}function pt(s,l){var d,p,v,E,F,W,q,Q;if(!s||s.length===0)throw new Error("latlngs not passed");ze(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=J([0,0]),_e=ue(s),be=_e.getNorthWest().distanceTo(_e.getSouthWest())*_e.getNorthEast().distanceTo(_e.getNorthWest());be<1700&&(se=$o(s));var tn=s.length,Lt=[];for(d=0;d<tn;d++){var Vn=J(s[d]);Lt.push(l.project(J([Vn.lat-se.lat,Vn.lng-se.lng])))}for(d=0,p=0;d<tn-1;d++)p+=Lt[d].distanceTo(Lt[d+1])/2;if(p===0)Q=Lt[0];else for(d=0,E=0;d<tn-1;d++)if(F=Lt[d],W=Lt[d+1],v=F.distanceTo(W),E+=v,E>p){q=(E-p)/v,Q=[W.x-q*(W.x-F.x),W.y-q*(W.y-F.y)];break}var dn=l.unproject(ee(Q));return J([dn.lat+se.lat,dn.lng+se.lng])}var On={__proto__:null,simplify:Ht,pointToSegmentDistance:kl,closestPointOnSegment:Fc,clipSegment:A,_getEdgeIntersection:H,_getBitCode:$,_sqClosestPointOnSegment:Pe,isFlat:ze,_flat:He,polylineCenter:pt},Xn={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new ae(s.y,s.x)},bounds:new ie([-180,-90],[180,90])},Dn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,E=Math.sqrt(1-v*v),F=E*Math.sin(p),W=Math.tan(Math.PI/4-p/2)/Math.pow((1-F)/(1+F),E/2);return p=-d*Math.log(Math.max(W,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),E=Math.exp(-s.y/d),F=Math.PI/2-2*Math.atan(E),W=0,q=.1,Q;W<15&&Math.abs(q)>1e-7;W++)Q=v*Math.sin(F),Q=Math.pow((1-Q)/(1+Q),v/2),q=Math.PI/2-2*Math.atan(E*Q)-F,F+=q;return new ae(F*l,s.x*l/d)}},mi={__proto__:null,LonLat:Xn,Mercator:Dn,SphericalMercator:ge},Go=r({},Ze,{code:"EPSG:3395",projection:Dn,transformation:function(){var s=.5/(Math.PI*Dn.R);return _t(s,.5,-s,.5)}()}),Zo=r({},Ze,{code:"EPSG:4326",projection:Xn,transformation:_t(1/180,1,-1/180,.5)}),gA=r({},me,{projection:Xn,transformation:_t(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});me.Earth=Ze,me.EPSG3395=Go,me.EPSG3857=Be,me.EPSG900913=ln,me.EPSG4326=Zo,me.Simple=gA;var Yn=ct.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ae.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ko=Yn.extend({initialize:function(s,l){k(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),yA=function(s,l){return new Ko(s,l)},Ui=Ko.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ko.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ko.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new re;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),_A=function(s,l){return new Ui(s,l)},Qo=xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=ee(p),E=ee(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return de.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function vA(s){return new Qo(s)}var Rl=Qo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Rl.imagePath!="string"&&(Rl.imagePath=this._detectIconPath()),(this.options.imagePath||Rl.imagePath)+Qo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var E=p.exec(d);return E&&E[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Oe("div","leaflet-default-icon-path",document.body),l=Tr(s,"background-image")||Tr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),cv=Tn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Qn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ce(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,E=Fi(l._icon),F=d.getPixelBounds(),W=d.getPixelOrigin(),q=te(F.min._subtract(W).add(v),F.max._subtract(W).subtract(v));if(!q.contains(E)){var Q=ee((Math.max(q.max.x,E.x)-q.max.x)/(F.max.x-q.max.x)-(Math.min(q.min.x,E.x)-q.min.x)/(F.min.x-q.min.x),(Math.max(q.max.y,E.y)-q.max.y)/(F.max.y-q.max.y)-(Math.min(q.min.y,E.y)-q.min.y)/(F.min.y-q.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),ht(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=j(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Fi(l._icon),v=l._map.layerPointToLatLng(p);d&&ht(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),zc=Yn.extend({options:{icon:new Rl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=J(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=J(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),ce(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),E=!1;v!==this._shadow&&(this._removeShadow(),E=!0),v&&(ce(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&qe(this._icon,"focus",this._panOnFocus,this),Fe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Fe(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ht(this._icon,s),this._shadow&&ht(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ce(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),cv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new cv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&cn(this._icon,s),this._shadow&&cn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?ee(l.iconSize):ee(0,0),p=l.iconAnchor?ee(l.iconAnchor):ee(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function wA(s,l){return new zc(s,l)}var Cr=Yn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Bc=Cr.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=J(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=J(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Cr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new ie(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xA(s,l){return new Bc(s,l)}var rp=Bc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),k(this,l),this._latlng=J(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new re(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Cr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Ze.distance){var v=Math.PI/180,E=this._mRadius/Ze.R/v,F=d.project([l+E,s]),W=d.project([l-E,s]),q=F.add(W).divideBy(2),Q=d.unproject(q).lat,se=Math.acos((Math.cos(E*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(se)||se===0)&&(se=E/Math.cos(Math.PI/180*l)),this._point=q.subtract(d.getPixelOrigin()),this._radius=isNaN(se)?0:q.x-d.project([Q,s-se]).x,this._radiusY=q.y-F.y}else{var _e=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(_e).x}this._updateBounds()}});function TA(s,l,d){return new rp(s,l,d)}var Hi=Cr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Pe,v,E,F=0,W=this._parts.length;F<W;F++)for(var q=this._parts[F],Q=1,se=q.length;Q<se;Q++){v=q[Q-1],E=q[Q];var _e=p(s,v,E,!0);_e<l&&(l=_e,d=p(s,v,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=J(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new re,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return ze(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=ze(s),p=0,v=s.length;p<v;p++)d?(l[p]=J(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof ae,v=s.length,E,F;if(p){for(F=[],E=0;E<v;E++)F[E]=this._map.latLngToLayerPoint(s[E]),d.extend(F[E]);l.push(F)}else for(E=0;E<v;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,E,F,W,q;for(d=0,v=0,E=this._rings.length;d<E;d++)for(q=this._rings[d],p=0,F=q.length;p<F-1;p++)W=A(q[p],q[p+1],s,p,!0),W&&(l[v]=l[v]||[],l[v].push(W[0]),(W[1]!==q[p+1]||p===F-2)&&(l[v].push(W[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Ht(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,E,F,W,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for(W=this._parts[d],p=0,F=W.length,v=F-1;p<F;v=p++)if(!(!l&&p===0)&&kl(s,W[v],W[p])<=q)return!0;return!1}});function EA(s,l){return new Hi(s,l)}Hi._flat=He;var Xo=Hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Hi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof ae&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Hi.prototype._setLatLngs.call(this,s),ze(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ze(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new ie(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,E;p<v;p++)E=Al(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,E,F,W,q,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,q=this._parts.length;E<q;E++)for(d=this._parts[E],F=0,Q=d.length,W=Q-1;F<Q;W=F++)p=d[F],v=d[W],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Hi.prototype._containsPoint.call(this,s,!0)}});function PA(s,l){return new Xo(s,l)}var Wi=Ui.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var F=Uc(s,E);return F?(F.feature=$c(s),F.defaultOptions=F.options,this.resetStyle(F),E.onEachFeature&&E.onEachFeature(s,F),this.addLayer(F)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Uc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],E=l&&l.pointToLayer,F=l&&l.coordsToLatLng||sp,W,q,Q,se;if(!p&&!d)return null;switch(d.type){case"Point":return W=F(p),hv(E,s,W,l);case"MultiPoint":for(Q=0,se=p.length;Q<se;Q++)W=F(p[Q]),v.push(hv(E,s,W,l));return new Ui(v);case"LineString":case"MultiLineString":return q=Hc(p,d.type==="LineString"?0:1,F),new Hi(q,l);case"Polygon":case"MultiPolygon":return q=Hc(p,d.type==="Polygon"?1:2,F),new Xo(q,l);case"GeometryCollection":for(Q=0,se=d.geometries.length;Q<se;Q++){var _e=Uc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);_e&&v.push(_e)}return new Ui(v);case"FeatureCollection":for(Q=0,se=d.features.length;Q<se;Q++){var be=Uc(d.features[Q],l);be&&v.push(be)}return new Ui(v);default:throw new Error("Invalid GeoJSON object.")}}function hv(s,l,d,p){return s?s(l,d):new zc(d,p&&p.markersInheritOptions&&p)}function sp(s){return new ae(s[1],s[0],s[2])}function Hc(s,l,d){for(var p=[],v=0,E=s.length,F;v<E;v++)F=l?Hc(s[v],l-1,d):(d||sp)(s[v]),p.push(F);return p}function op(s,l){return s=J(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function Wc(s,l,d,p){for(var v=[],E=0,F=s.length;E<F;E++)v.push(l?Wc(s[E],ze(s[E])?0:l-1,d,p):op(s[E],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function Yo(s,l){return s.feature?r({},s.feature,{geometry:l}):$c(l)}function $c(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var ap={toGeoJSON:function(s){return Yo(this,{type:"Point",coordinates:op(this.getLatLng(),s)})}};zc.include(ap),rp.include(ap),Bc.include(ap),Hi.include({toGeoJSON:function(s){var l=!ze(this._latlngs),d=Wc(this._latlngs,l?1:0,!1,s);return Yo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Xo.include({toGeoJSON:function(s){var l=!ze(this._latlngs),d=l&&!ze(this._latlngs[0]),p=Wc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Yo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Ko.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Yo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var E=v.toGeoJSON(s);if(d)p.push(E.geometry);else{var F=$c(E);F.type==="FeatureCollection"?p.push.apply(p,F.features):p.push(F)}}}),d?Yo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function dv(s,l){return new Wi(s,l)}var SA=dv,qc=Yn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=ue(l),k(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ce(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Fe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Nn(this._image),this},bringToBack:function(){return this._map&&Ln(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ue(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Oe("img");if(ce(l,"leaflet-image-layer"),this._zoomAnimated&&ce(l,"leaflet-zoom-animated"),this.options.className&&ce(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ji(this._image,d,l)},_reset:function(){var s=this._image,l=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();ht(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){cn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),CA=function(s,l,d){return new qc(s,l,d)},fv=qc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Oe("video");if(ce(l,"leaflet-image-layer"),this._zoomAnimated&&ce(l,"leaflet-zoom-animated"),this.options.className&&ce(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var F=Oe("source");F.src=this._url[E],l.appendChild(F)}}});function IA(s,l,d){return new fv(s,l,d)}var pv=qc.extend({_initImage:function(){var s=this._image=this._url;ce(s,"leaflet-image-layer"),this._zoomAnimated&&ce(s,"leaflet-zoom-animated"),this.options.className&&ce(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function AA(s,l,d){return new pv(s,l,d)}var gi=Yn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof ae||C(s))?(this._latlng=J(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&cn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&cn(this._container,1),this.bringToFront(),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(cn(this._container,0),this._removeTimeout=setTimeout(a(Fe,void 0,this._container),200)):Fe(this._container),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=J(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Nn(this._container),this},bringToBack:function(){return this._map&&Ln(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Ui){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=ee(this.options.offset),d=this._getAnchor();this._zoomAnimated?ht(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Ae.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),Yn.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(k(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var Gc=gi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,gi.prototype.openOn.call(this,s)},onAdd:function(s){gi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Cr||this._source.on("preclick",Ue))},onRemove:function(s){gi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Cr||this._source.off("preclick",Ue))},getEvents:function(){var s=gi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Oe("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Oe("div",s+"-content-wrapper",l);if(this._contentNode=Oe("div",s+"-content",d),Fs(l),wl(this._contentNode),Ee(l,"contextmenu",Ue),this._tipContainer=Oe("div",s+"-tip-container",l),this._tip=Oe("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Oe("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(p,"click",function(v){vt(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,E="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",ce(s,E)):Ke(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();ht(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Tr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new Z(this._containerLeft,-d-this._containerBottom);v._add(Fi(this._container));var E=s.layerPointToContainerPoint(v),F=ee(this.options.autoPanPadding),W=ee(this.options.autoPanPaddingTopLeft||F),q=ee(this.options.autoPanPaddingBottomRight||F),Q=s.getSize(),se=0,_e=0;E.x+p+q.x>Q.x&&(se=E.x+p-Q.x+q.x),E.x-se-W.x<0&&(se=E.x-W.x),E.y+d+q.y>Q.y&&(_e=E.y+d-Q.y+q.y),E.y-_e-W.y<0&&(_e=E.y-W.y),(se||_e)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,_e]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),bA=function(s,l){return new Gc(s,l)};Ae.mergeOptions({closePopupOnClick:!0}),Ae.include({openPopup:function(s,l,d){return this._initOverlay(Gc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Yn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Gc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Ui||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){hi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Cr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Zc=gi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){gi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){gi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=gi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Oe("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,E=p.latLngToContainerPoint(p.getCenter()),F=p.layerPointToContainerPoint(s),W=this.options.direction,q=v.offsetWidth,Q=v.offsetHeight,se=ee(this.options.offset),_e=this._getAnchor();W==="top"?(l=q/2,d=Q):W==="bottom"?(l=q/2,d=0):W==="center"?(l=q/2,d=Q/2):W==="right"?(l=0,d=Q/2):W==="left"?(l=q,d=Q/2):F.x<E.x?(W="right",l=0,d=Q/2):(W="left",l=q+(se.x+_e.x)*2,d=Q/2),s=s.subtract(ee(l,d,!0)).add(se).add(_e),Ke(v,"leaflet-tooltip-right"),Ke(v,"leaflet-tooltip-left"),Ke(v,"leaflet-tooltip-top"),Ke(v,"leaflet-tooltip-bottom"),ce(v,"leaflet-tooltip-"+W),ht(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&cn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kA=function(s,l){return new Zc(s,l)};Ae.include({openTooltip:function(s,l,d){return this._initOverlay(Zc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Yn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Ui||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Ee(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ee(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var mv=Qo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Jt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=ee(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function RA(s){return new mv(s)}Qo.Default=Rl;var Nl=Yn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:de.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Fe(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Nn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,E;p<v;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!de.ielt9){cn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var E=Math.min(1,(s-v.loaded)/200);cn(v.el,E),E<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(B(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Oe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Fe(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Oe("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Fe(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),E=Math.floor(l/2),F=d-1,W=new Z(+v,+E);W.z=+F;var q=this._tileCoordsToKey(W),Q=this._tiles[q];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),F>p?this._retainParent(v,E,F,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var E=2*l;E<2*l+2;E++){var F=new Z(v,E);F.z=d+1;var W=this._tileCoordsToKey(F),q=this._tiles[W];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);d+1<p&&this._retainChildren(v,E,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var E=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||E)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();de.any3d?ji(s.el,v,p):ht(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new ie(v.subtract(E),v.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),E=v.getCenter(),F=[],W=this.options.keepBuffer,q=new ie(v.getBottomLeft().subtract([W,-W]),v.getTopRight().add([W,-W]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var se=this._tiles[Q].coords;(se.z!==this._tileZoom||!q.contains(new Z(se.x,se.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var _e=v.min.y;_e<=v.max.y;_e++)for(var be=v.min.x;be<=v.max.x;be++){var tn=new Z(be,_e);if(tn.z=this._tileZoom,!!this._isValidTile(tn)){var Lt=this._tiles[this._tileCoordsToKey(tn)];Lt?Lt.current=!0:F.push(tn)}}if(F.sort(function(dn,ea){return dn.distanceTo(E)-ea.distanceTo(E)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Vn=document.createDocumentFragment();for(be=0;be<F.length;be++)this._addTile(F[be],Vn);this._level.el.appendChild(Vn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return ue(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),E=l.unproject(p,s.z),F=l.unproject(v,s.z);return[E,F]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new re(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Fe(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ce(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,de.ielt9&&this.options.opacity<1&&cn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&j(a(this._tileReady,this,s,null,v)),ht(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(cn(d.el,0),B(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(ce(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),de.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ie(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function NA(s){return new Nl(s)}var Jo=Nl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&de.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Ee(d,"load",a(this._tileOnLoad,this,l,d)),Ee(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:de.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(s,l){de.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=G;var d=this._tiles[s].coords;Fe(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",G),Nl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return Nl.prototype._tileReady.call(this,s,l,d)}});function gv(s,l){return new Jo(s,l)}var yv=Jo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=k(this,l);var v=l.detectRetina&&de.retina?2:1,E=this.getTileSize();d.width=E.x*v,d.height=E.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Jo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=te(d.project(l[0]),d.project(l[1])),v=p.min,E=p.max,F=(this._wmsVersion>=1.3&&this._crs===Zo?[v.y,v.x,E.y,E.x]:[v.x,v.y,E.x,E.y]).join(","),W=Jo.prototype.getTileUrl.call(this,s);return W+D(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function LA(s,l){return new yv(s,l)}Jo.WMS=yv,gv.wms=LA;var $i=Yn.extend({options:{padding:.1},initialize:function(s){k(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ce(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),E=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));de.any3d?ji(this._container,E,d):ht(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ie(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_v=$i.extend({options:{tolerance:0},getEvents:function(){var s=$i.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ee(s,"mousemove",this._onMouseMove,this),Ee(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Fe(this._container),qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=de.retina?2:1;ht(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",de.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){$i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,E,F=s._parts,W=F.length,q=this._ctx;if(W){for(q.beginPath(),d=0;d<W;d++){for(p=0,v=F[d].length;p<v;p++)E=F[d][p],q[p?"lineTo":"moveTo"](E.x,E.y);l&&q.closePath()}this._fillStroke(q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(ce(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function vv(s){return de.canvas?new _v(s):null}var Ll=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),MA={_initContainer:function(){this._container=Oe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($i.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Ll("shape");ce(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Ll("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Fe(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Ll("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=C(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Ll("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Nn(s._container)},_bringToBack:function(s){Ln(s._container)}},Kc=de.vml?Ll:_c,Ml=$i.extend({_initContainer:function(){this._container=Kc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Kc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Fe(this._container),qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),ht(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Kc("path");s.options.className&&ce(l,s.options.className),s.options.interactive&&ce(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Fe(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Io(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Nn(s._path)},_bringToBack:function(s){Ln(s._path)}});de.vml&&Ml.include(MA);function wv(s){return de.svg||de.vml?new Ml(s):null}Ae.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&vv(s)||wv(s)}});var xv=Xo.extend({initialize:function(s,l){Xo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ue(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function OA(s,l){return new xv(s,l)}Ml.create=Kc,Ml.pointsToPath=Io,Wi.geometryToLayer=Uc,Wi.coordsToLatLng=sp,Wi.coordsToLatLngs=Hc,Wi.latLngToCoords=op,Wi.latLngsToCoords=Wc,Wi.getFeature=Yo,Wi.asFeature=$c,Ae.mergeOptions({boxZoom:!0});var Tv=Tn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Fe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Kn(),jo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ee(document,{contextmenu:hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Oe("div","leaflet-zoom-box",this._container),ce(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ie(this._point,this._startPoint),d=l.getSize();ht(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Fe(this._box),Ke(this._container,"leaflet-crosshair")),xn(),Fo(),qe(document,{contextmenu:hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new re(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ae.addInitHook("addHandler","boxZoom",Tv),Ae.mergeOptions({doubleClickZoom:!0});var Ev=Tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Ae.addInitHook("addHandler","doubleClickZoom",Ev),Ae.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Pv=Tn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Qn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ce(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ke(this._map._container,"leaflet-grab"),Ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ue(this._map.options.maxBounds);this._offsetLimit=te(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,E=(p+l+d)%s-l-d,F=Math.abs(v+d)<Math.abs(E+d)?v:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,F=d.easeLinearity,W=v.multiplyBy(F/E),q=W.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,q),se=W.multiplyBy(Q/q),_e=Q/(d.inertiaDeceleration*F),be=se.multiplyBy(-_e/2).round();!be.x&&!be.y?l.fire("moveend"):(be=l._limitOffset(be,l.options.maxBounds),j(function(){l.panBy(be,{duration:_e,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Ae.addInitHook("addHandler","dragging",Pv),Ae.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Sv=Tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ee(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=ee(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(ee(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;hi(s)}}});Ae.addInitHook("addHandler","keyboard",Sv),Ae.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Cv=Tn.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Tl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),hi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=d?Math.ceil(v/d)*d:v,F=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,F&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+F):s.setZoomAround(this._lastMousePos,l+F))}});Ae.addInitHook("addHandler","scrollWheelZoom",Cv);var DA=600;Ae.mergeOptions({tapHold:de.touchNative&&de.safari&&de.mobile,tapTolerance:15});var Iv=Tn.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",vt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),DA),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){qe(document,"touchend",vt),qe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),qe(document,"touchend touchcancel contextmenu",this._cancel,this),qe(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Ae.addInitHook("addHandler","tapHold",Iv),Ae.mergeOptions({touchZoom:de.touch,bounceAtZoomLimits:!0});var Av=Tn.extend({addHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),vt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var E=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var F=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(F,this,!0),vt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),qe(document,"touchmove",this._onTouchMove,this),qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ae.addInitHook("addHandler","touchZoom",Av),Ae.BoxZoom=Tv,Ae.DoubleClickZoom=Ev,Ae.Drag=Pv,Ae.Keyboard=Sv,Ae.ScrollWheelZoom=Cv,Ae.TapHold=Iv,Ae.TouchZoom=Av,n.Bounds=ie,n.Browser=de,n.CRS=me,n.Canvas=_v,n.Circle=rp,n.CircleMarker=Bc,n.Class=xe,n.Control=hn,n.DivIcon=mv,n.DivOverlay=gi,n.DomEvent=Bs,n.DomUtil=ip,n.Draggable=Qn,n.Evented=ct,n.FeatureGroup=Ui,n.GeoJSON=Wi,n.GridLayer=Nl,n.Handler=Tn,n.Icon=Qo,n.ImageOverlay=qc,n.LatLng=ae,n.LatLngBounds=re,n.Layer=Yn,n.LayerGroup=Ko,n.LineUtil=On,n.Map=Ae,n.Marker=zc,n.Mixin=jc,n.Path=Cr,n.Point=Z,n.PolyUtil=qo,n.Polygon=Xo,n.Polyline=Hi,n.Popup=Gc,n.PosAnimation=Pl,n.Projection=mi,n.Rectangle=xv,n.Renderer=$i,n.SVG=Ml,n.SVGOverlay=pv,n.TileLayer=Jo,n.Tooltip=Zc,n.Transformation=$e,n.Util=M,n.VideoOverlay=fv,n.bind=a,n.bounds=te,n.canvas=vv,n.circle=TA,n.circleMarker=xA,n.control=fi,n.divIcon=RA,n.extend=r,n.featureGroup=_A,n.geoJSON=dv,n.geoJson=SA,n.gridLayer=NA,n.icon=vA,n.imageOverlay=CA,n.latLng=J,n.latLngBounds=ue,n.layerGroup=yA,n.map=Uo,n.marker=wA,n.point=ee,n.polygon=PA,n.polyline=EA,n.popup=bA,n.rectangle=OA,n.setOptions=k,n.stamp=h,n.svg=wv,n.svgOverlay=AA,n.tileLayer=gv,n.tooltip=kA,n.transformation=_t,n.version=i,n.videoOverlay=IA;var VA=window.L;n.noConflict=function(){return window.L=VA,this},window.L=n})})(Zg,Zg.exports);var ll=Zg.exports;const lv=M1(ll);function Zf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function uv(t,e){return e==null?function(i,r){const o=V.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=V.useRef();o.current||(o.current=t(i,r));const a=V.useRef(i),{instance:u}=o.current;return V.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function dA(t,e){V.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function fA(t){return function(n){const i=ov(),r=t(av(n,i),i);return v6(i.map,n.attribution),hA(r.current,n.eventHandlers),dA(r.current,i),r}}function P6(t,e){const n=V.useRef();V.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function S6(t){return function(n){const i=ov(),r=t(av(n,i),i);return hA(r.current,n.eventHandlers),dA(r.current,i),P6(r.current,n),r}}function C6(t,e){const n=uv(t,e),i=fA(n);return cA(i)}function pA(t,e){const n=uv(t,e),i=S6(n);return cA(i)}function I6(t,e){const n=uv(t,e),i=fA(n);return E6(i)}function A6(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Kf(){return ov().map}function b6(t){const e=Kf();return V.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const mA=pA(function({center:e,children:n,...i},r){const o=new ll.CircleMarker(e,i);return Zf(o,sv(r,{overlayContainer:o}))},w6);function Kg(){return Kg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kg.apply(this,arguments)}function k6({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[_]=V.useState({className:r,id:o,style:u}),[T,R]=V.useState(null);V.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const k=V.useCallback(I=>{if(I!==null&&T===null){const P=new ll.Map(I,m);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),R(T6(P))}},[]);V.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const D=T?so.createElement(uA,{value:T},i):a??null;return so.createElement("div",Kg({},_,{ref:k}),D)}const R6=V.forwardRef(k6),N6=C6(function({position:e,...n},i){const r=new ll.Marker(e,n);return Zf(r,sv(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),L1=pA(function({positions:e,...n},i){const r=new ll.Polyline(e,n);return Zf(r,sv(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),L6=I6(function({url:e,...n},i){const r=new ll.TileLayer(e,av(n,i));return Zf(r,i)},function(e,n,i){A6(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete lv.Icon.Default.prototype._getIconUrl;lv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const M6="/street-art-ctf/chumper.png",O6=(t,e=!1)=>{let n="";return e?n="grayscale(100%) opacity(0.5)":t?t==="red"&&(n="hue-rotate(160deg) saturate(1.5)"):n="grayscale(100%)",lv.divIcon({html:`<img src="${M6}" style="width: 32px; height: 32px; filter: ${n};" />`,className:"chumper-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})};function D6({devMode:t}){const[e,n]=V.useState(YI),[i,r]=V.useState(XI);return b6({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?w.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-purple-500/30",children:w.jsxs("div",{className:"text-[10px] font-mono text-purple-400",children:[w.jsxs("div",{children:["zoom: ",e]}),w.jsxs("div",{children:["lat: ",i[0]]}),w.jsxs("div",{children:["lng: ",i[1]]})]})}):null}function V6({hood:t}){const e=Kf();return V.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function j6({onShow:t}){const e=Kf(),[n,i]=V.useState(null);if(V.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o){const a=JSON.parse(o);i(a),localStorage.removeItem("streetart-ctf-lastCapture"),a.location&&setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500)}},[e,t]),!n)return null;const r=n.team==="red"?"#ff6b6b":"#4dabf7";return w.jsx(mA,{center:n.location,radius:30,pathOptions:{color:r,fillColor:r,fillOpacity:.3,weight:3,className:"capture-pulse"}})}function F6(){const t=Kf(),[e,n]=V.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return w.jsx(le.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center",whileTap:{scale:.95},children:w.jsx(le.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:w.jsx(JF,{size:20,className:"text-white"})})})}function z6({point:t,onClose:e}){const n=t.capturedBy?Xh(t.capturedBy):"#495057",i=Xu(t),r=t.status==="ghost";return w.jsx(le.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000]",children:w.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl p-4 border",style:{borderColor:`${n}40`},children:[w.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:w.jsx(d6,{size:16,className:"text-white/50"})}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:`${n}20`,border:`1px solid ${n}40`},children:r?w.jsx(iA,{size:20,className:"text-white/30"}):t.capturedBy?w.jsx(o6,{size:20,style:{color:n}}):w.jsx(r6,{size:20,style:{color:n}})}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("h3",{className:"font-bold text-lg text-white",children:t.name}),r&&w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-white/40",children:"GHOST"})]}),w.jsx("p",{className:"text-sm text-white/40",children:t.area}),w.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-white/50 capitalize",children:t.size}),t.mhd&&w.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${t.mhd==="metroB"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:t.mhd==="metroB"?" Metro B":" Tram 12"})]}),w.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[w.jsxs("span",{className:"text-lg font-bold",style:{color:n},children:[i," pts"]}),t.capturedBy?w.jsxs("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:`${n}20`,color:n},children:["Captured by ",t.capturedBy]}):w.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/10 text-white/60",children:r?"Gone":"Unclaimed"})]})]})]})]})})}const hm=[null,...cs];function B6(){const{player:t,artPoints:e,captureArt:n}=Li(),[i,r]=V.useState(null),[o,a]=V.useState(!1),[u,h]=V.useState(e),[f,m]=V.useState(Yd.vysocany);V.useEffect(()=>{h(e)},[e]);const g=I=>{o?h(P=>P.map(C=>{if(C.id===I.id){const G=(hm.indexOf(C.capturedBy)+1)%hm.length;return{...C,capturedBy:hm[G]}}return C})):r(I)},_=()=>{h(e.map(I=>({...I,capturedBy:null})))},T=o?u:e,R=V.useMemo(()=>UF(T),[T]),k=V.useMemo(()=>eA(T),[T]),D=Object.values(k).reduce((I,P)=>I+P,0)||1;return w.jsxs("div",{className:"relative w-full h-full",children:[w.jsx("div",{className:"absolute top-4 left-4 right-4 z-[1000] flex gap-0.5 h-1.5 rounded-full overflow-hidden bg-black/40 backdrop-blur-sm",children:Object.entries(k).map(([I,P])=>{const C=P/D*100;return w.jsx(le.div,{className:"h-full",style:{backgroundColor:Xh(I)},initial:{width:0},animate:{width:`${C}%`},transition:{duration:.8}},I)})}),w.jsxs("div",{className:"absolute top-10 left-4 z-[1000] bg-black/80 backdrop-blur-sm rounded-xl p-3 border border-white/10",children:[w.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-2",children:"Teams"}),w.jsx("div",{className:"space-y-1.5",children:cs.map(I=>w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:Xh(I)}}),w.jsx("span",{className:"text-xs text-white/70 capitalize font-medium",children:I}),w.jsxs("span",{className:"text-xs text-white/40 ml-auto",children:[k[I]||0," pts"]})]},I))}),w.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[w.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Points"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white/40"}),w.jsx("span",{className:"text-xs text-white/40",children:"Active"})]}),w.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-dashed border-white/20"}),w.jsx("span",{className:"text-xs text-white/30",children:"Ghost"})]})]}),w.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10",children:[w.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider mb-1.5",children:"Transport"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-4 h-0.5 bg-yellow-500"}),w.jsx("span",{className:"text-xs text-yellow-500/70",children:"Metro B"})]})]})]}),w.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 z-[1000] flex gap-1 bg-black/80 backdrop-blur-sm rounded-xl p-1 border border-white/10",children:Object.values(Yd).map(I=>w.jsx(le.button,{onClick:()=>m(I),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f.id===I.id?"bg-white/20 text-white":"text-white/50 hover:text-white/70"}`,whileTap:{scale:.95},children:I.name},I.id))}),w.jsxs("div",{className:"absolute top-10 right-4 z-[1000] flex flex-col gap-2",children:[w.jsx(le.button,{onClick:()=>a(!o),className:`w-10 h-10 rounded-xl backdrop-blur-sm border flex items-center justify-center transition-colors ${o?"bg-purple-500/30 border-purple-500/50 text-purple-400":"bg-black/80 border-white/10 text-white/50"}`,whileTap:{scale:.95},title:"Developer Mode",children:w.jsx(YF,{size:18})}),o&&w.jsx(le.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:_,className:"w-10 h-10 rounded-xl bg-black/80 backdrop-blur-sm border border-white/10 flex items-center justify-center text-white/50 hover:text-white/80 transition-colors",whileTap:{scale:.95},title:"Reset All Points",children:w.jsx(rA,{size:18})})]}),w.jsx(Uu,{children:o&&w.jsx(le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000] px-3 py-1.5 rounded-full bg-purple-500/20 border border-purple-500/30 backdrop-blur-sm",children:w.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"DEV MODE  Click points to cycle teams"})})}),w.jsxs(R6,{center:XI,zoom:YI,minZoom:zF,maxZoom:BF,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#0a0a0f"},children:[w.jsx(L6,{url:S1.tileUrl,attribution:S1.attribution}),w.jsx(F6,{}),w.jsx(D6,{devMode:o}),w.jsx(V6,{hood:f}),w.jsx(j6,{}),w.jsx(L1,{positions:C1.map(I=>I.location),pathOptions:{color:"#eab308",weight:4,opacity:.5}}),C1.map(I=>w.jsx(mA,{center:I.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#1a1a2e",fillOpacity:1,weight:2}},I.name)),Object.entries(R).map(([I,P])=>P.map((C,z)=>w.jsx(L1,{positions:[C.from,C.to],pathOptions:{color:Xh(I),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${I}-line-${z}`))),T.map(I=>{const P=I.status==="ghost",C=O6(I.capturedBy,P);return w.jsx(N6,{position:I.location,icon:C,eventHandlers:{click:z=>{z.originalEvent.stopPropagation(),g(I)}}},I.id)})]}),w.jsx(Uu,{children:i&&w.jsx(z6,{point:i,onClose:()=>r(null)})})]})}function U6(){return w.jsx(le.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:w.jsx(B6,{})})}function H6(){const{player:t}=Li(),[e,n]=V.useState(!1);return V.useEffect(()=>{t.team&&!e&&(n(!0),setTimeout(()=>{const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"},500))},[t.team,e]),t.team?w.jsx(le.div,{className:"flex-1 flex items-center justify-center p-8 bg-black",initial:{opacity:0},animate:{opacity:1},children:w.jsxs("div",{className:"text-center",children:[w.jsx(le.div,{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:2},children:w.jsx(nv,{size:48,className:"text-white"})}),w.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Opening AR Scanner"}),w.jsx("p",{className:"text-white/40 text-sm mb-4",children:"Point your camera at street art to capture it"}),w.jsx(i6,{className:"w-6 h-6 animate-spin mx-auto text-purple-400"})]})}):w.jsx(le.div,{className:"flex-1 flex items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mx-auto mb-6",children:w.jsx(GF,{size:36,className:"text-amber-500"})}),w.jsx("h2",{className:"text-2xl font-bold mb-3 text-white",children:"Join a Team First"}),w.jsx("p",{className:"text-white/40 text-sm max-w-xs",children:"Select your team from the home screen to start scanning street art"})]})})}const W6={red:"Red Team",blue:"Blue Team"};function $6({team:t,score:e,rank:n,totalScore:i}){const r=e/i*100,o=n===0;return w.jsxs(le.div,{className:"relative overflow-hidden rounded-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1,type:"spring",stiffness:100},children:[w.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${Je[t].hex}15 0%, transparent 60%)`}}),w.jsx(le.div,{className:"absolute inset-y-0 left-0 opacity-10",style:{backgroundColor:Je[t].hex},initial:{width:0},animate:{width:`${r}%`},transition:{duration:1,delay:.3+n*.1,ease:"easeOut"}}),w.jsx("div",{className:"relative p-4 border rounded-2xl",style:{borderColor:`${Je[t].hex}30`},children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-white/5"}`,children:o?w.jsx(e6,{size:20,className:"text-white"}):w.jsx("span",{className:"text-lg font-bold text-white/40",children:n+1})}),w.jsxs("div",{className:"flex-1",children:[w.jsx("p",{className:"font-semibold text-white",children:W6[t]}),w.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[w.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Je[t].hex}}),w.jsxs("span",{className:"text-xs text-white/40",children:[r.toFixed(0),"% territory"]})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-2xl font-bold",style:{color:Je[t].hex},children:e.toLocaleString()}),w.jsx("p",{className:"text-xs text-white/30",children:"points"})]})]})})]})}function q6({player:t,rank:e,isCurrentPlayer:n}){const i=e<3,r=["from-amber-400 to-orange-500","from-slate-300 to-slate-400","from-amber-600 to-amber-700"];return w.jsxs(le.div,{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${n?"bg-white/10 border border-white/20":"bg-white/[0.02] border border-transparent hover:bg-white/[0.04]"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.03,type:"spring",stiffness:100},children:[w.jsx("div",{className:"w-8 flex justify-center",children:i?w.jsx("div",{className:`w-6 h-6 rounded-lg bg-gradient-to-br ${r[e]} flex items-center justify-center`,children:w.jsx("span",{className:"text-xs font-bold text-white",children:e+1})}):w.jsx("span",{className:"text-sm text-white/30 font-medium",children:e+1})}),w.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",style:{backgroundColor:`${Je[t.team].hex}20`,color:Je[t.team].hex},children:t.name.slice(0,2).toUpperCase()}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("p",{className:`font-medium truncate ${n?"text-white":"text-white/80"}`,children:[t.name,n&&w.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded bg-white/10 text-white/50",children:"you"})]}),w.jsxs("p",{className:"text-xs text-white/30",children:[t.captures," captures"]})]}),w.jsx("div",{className:"text-right",children:w.jsx("p",{className:"font-bold text-white",children:t.score.toLocaleString()})})]})}function G6(){var m;const{teamScores:t,player:e,allPlayers:n}=Li(),r=Object.entries(t).filter(([g])=>Je[g]).sort((g,_)=>_[1]-g[1]),o=Object.values(t).reduce((g,_)=>g+_,0)||1,a=[...n];!a.find(g=>g.name===e.name)&&e.team&&e.name&&a.push({id:"current",name:e.name,team:e.team,score:e.score||0,captures:((m=e.capturedArt)==null?void 0:m.length)||0});const h=a.sort((g,_)=>_.score-g.score),f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return w.jsxs(le.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-12",initial:"hidden",animate:"visible",exit:{opacity:0},variants:f,children:[w.jsx(le.div,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:w.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[w.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:w.jsx(iv,{size:20,className:"text-white"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-2xl font-bold text-white",children:"Leaderboard"}),w.jsx("p",{className:"text-sm text-white/40",children:"Real-time rankings"})]})]})}),w.jsxs("div",{className:"mb-8",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(l6,{size:16,className:"text-white/40"}),w.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Team Standings"})]}),w.jsx("div",{className:"space-y-3",children:r.map(([g,_],T)=>w.jsx($6,{team:g,score:_,rank:T,totalScore:o},g))})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(tv,{size:16,className:"text-white/40"}),w.jsx("h2",{className:"text-sm font-medium text-white/40 uppercase tracking-wider",children:"Top Players"})]}),w.jsx("div",{className:"space-y-2",children:h.map((g,_)=>w.jsx(q6,{player:g,rank:_,isCurrentPlayer:g.id==="current"},g.id))})]})]})}function Z6(){var f,m;const{player:t,artPoints:e,resetAll:n}=Li(),[i,r]=V.useState(!1),o=(e==null?void 0:e.filter(g=>t.capturedArt.includes(g.id)))||[],a=t.team?Je[t.team].hex:"#64748b",u=t.team==="red"?"Red Team":"Blue Team",h=async()=>{if(!i){r(!0);try{const g=["red","blue"];let _=0,T=0;for(const R of Br){const k=g[Math.floor(Math.random()*g.length)],D=Xu(R);k==="red"?_+=D:T+=D,await qr(Xi(pn,"streetart-captures",R.id),{artId:R.id,capturedBy:k,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:D,isFirstCapture:!0,isRecapture:!1})}await qr(Xi(pn,"streetart-teams","red"),{score:_},{merge:!0}),await qr(Xi(pn,"streetart-teams","blue"),{score:T},{merge:!0})}catch(g){console.error("Failed to randomize:",g)}r(!1)}};return w.jsxs(le.div,{className:"flex-1 overflow-y-auto pb-24 px-5 pt-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx(le.div,{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${a}, ${a}50)`},whileHover:{scale:1.05},children:w.jsx("span",{className:"text-3xl font-black text-white",children:((m=(f=t.name)==null?void 0:f.charAt(0))==null?void 0:m.toUpperCase())||"?"})}),w.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:t.name}),w.jsx("p",{className:"text-sm",style:{color:a},children:u})]}),w.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[w.jsxs(le.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#eab30815",border:"1px solid #eab30830"},whileHover:{scale:1.02},children:[w.jsx(iv,{size:24,className:"mx-auto mb-2 text-yellow-500"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:t.score}),w.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Score"})]}),w.jsxs(le.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#22c55e15",border:"1px solid #22c55e30"},whileHover:{scale:1.02},children:[w.jsx(nv,{size:24,className:"mx-auto mb-2 text-green-500"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:t.captureCount||o.length}),w.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Captures"})]}),w.jsxs(le.div,{className:"p-4 rounded-2xl text-center",style:{backgroundColor:"#f9731615",border:"1px solid #f9731630"},whileHover:{scale:1.02},children:[w.jsx(tv,{size:24,className:"mx-auto mb-2 text-orange-500"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:t.maxStreak||0}),w.jsx("p",{className:"text-[10px] text-white/40 uppercase",children:"Best Streak"})]})]}),w.jsxs("div",{className:"mb-8",children:[w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Lifetime Stats"}),w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-bold text-white",children:t.recaptureCount||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Recaptures"})]})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-bold text-white",children:t.firstCaptureCount||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"First Captures"})]})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsxs("p",{className:"text-lg font-bold text-white",children:[t.totalDistance?(t.totalDistance/1e3).toFixed(1):"0","km"]}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Distance Walked"})]})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:w.jsx("span",{className:"text-sm",children:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-lg font-bold text-white",children:t.streak||0}),w.jsx("p",{className:"text-[10px] text-white/40",children:"Current Streak"})]})]})]})]}),o.length>0&&w.jsxs("div",{className:"mb-8",children:[w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider mb-3",children:"Your Captures"}),w.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.slice(0,8).map((g,_)=>w.jsx(le.div,{className:"aspect-square rounded-xl flex items-center justify-center",style:{backgroundColor:`${a}20`,border:`1px solid ${a}30`},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:_*.05},children:w.jsx("span",{className:"text-lg",children:""})},g.id)),o.length>8&&w.jsx("div",{className:"aspect-square rounded-xl flex items-center justify-center bg-white/5",children:w.jsxs("span",{className:"text-xs text-white/40",children:["+",o.length-8]})})]})]}),w.jsxs("div",{className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(rv,{size:14,className:"text-purple-400"}),w.jsx("h2",{className:"text-xs font-medium text-white/40 uppercase tracking-wider",children:"Game Master"})]}),w.jsxs(le.button,{onClick:h,disabled:i,className:"w-full p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 flex items-center gap-3 disabled:opacity-50",whileTap:{scale:.98},children:[w.jsx(sA,{size:20,className:"text-purple-400"}),w.jsx("span",{className:"text-sm text-purple-300",children:i?"Randomizing...":"Randomize All Territories"})]})]}),w.jsxs(le.button,{onClick:n,className:"w-full p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center gap-2 text-white/40 hover:text-white/60 transition-colors",whileTap:{scale:.98},children:[w.jsx(rA,{size:14}),w.jsx("span",{className:"text-xs",children:"Reset Game Data"})]}),w.jsx("p",{className:"text-center text-[10px] text-white/20 mt-6",children:"Street Art CTF v1.2.0"})]})}const K6="123";function Q6(){const t=wf(),{artPoints:e,allPlayers:n,teamScores:i}=Li(),[r,o]=V.useState(!1),[a,u]=V.useState(""),[h,f]=V.useState("all"),[m,g]=V.useState({}),[_,T]=V.useState(null);V.useEffect(()=>{sessionStorage.getItem("admin-auth")==="true"&&o(!0)},[]);const R=U=>{U.preventDefault(),a===K6?(o(!0),sessionStorage.setItem("admin-auth","true")):(T({type:"error",text:"Wrong password"}),setTimeout(()=>T(null),2e3))},k=(U,b)=>{T({type:U,text:b}),setTimeout(()=>T(null),3e3)},D=async(U,b)=>{g(S=>({...S,[U]:!0}));try{const S=b==="ghost"?"active":"ghost";await qr(Xi(pn,"streetart-points-meta",U),{status:S,updatedAt:new Date},{merge:!0}),k("success",`Point ${U} set to ${S}`)}catch(S){k("error","Failed to update status"),console.error(S)}g(S=>({...S,[U]:!1}))},I=async U=>{g(b=>({...b,[`reset-${U}`]:!0}));try{await sm(Xi(pn,"streetart-captures",U)),k("success",`Ownership reset for ${U}`)}catch(b){k("error","Failed to reset ownership"),console.error(b)}g(b=>({...b,[`reset-${U}`]:!1}))},P=async()=>{if(confirm("Are you sure? This will reset ALL captures!")){g(U=>({...U,resetAll:!0}));try{const b=(await o1(_u(pn,"streetart-captures"))).docs.map(S=>sm(S.ref));await Promise.all(b),k("success","All captures reset!")}catch(U){k("error","Failed to reset all captures"),console.error(U)}g(U=>({...U,resetAll:!1}))}},C=async()=>{if(confirm("Are you sure? This will delete ALL player data!")){g(U=>({...U,resetPlayers:!0}));try{const b=(await o1(_u(pn,"streetart-players"))).docs.map(S=>sm(S.ref));await Promise.all(b),k("success","All players reset!")}catch(U){k("error","Failed to reset players"),console.error(U)}g(U=>({...U,resetPlayers:!1}))}},z=h==="all"?e:e.filter(U=>U.hood===h),G={total:e.length,captured:e.filter(U=>U.capturedBy).length,red:e.filter(U=>U.capturedBy==="red").length,blue:e.filter(U=>U.capturedBy==="blue").length,ghost:Br.filter(U=>U.status==="ghost").length,players:n.length};return r?w.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] pb-24",children:[w.jsx("div",{className:"sticky top-0 z-50 bg-[#0a0a0f]/90 backdrop-blur-xl border-b border-white/10 px-4 py-3",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2",children:w.jsx(ZF,{size:24,className:"text-white/70"})}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(b1,{size:18,className:"text-purple-400"}),w.jsx("span",{className:"font-bold",children:"God Mode"})]}),w.jsx("div",{className:"w-10"})]})}),_&&w.jsx(le.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:`fixed top-16 left-4 right-4 z-50 p-3 rounded-xl text-center text-sm font-medium ${_.type==="error"?"bg-red-500/90":"bg-green-500/90"}`,children:_.text}),w.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.total}),w.jsx("div",{className:"text-xs text-white/40",children:"Points"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-red-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-red-400",children:G.red}),w.jsx("div",{className:"text-xs text-red-400/60",children:"Red"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-blue-400",children:G.blue}),w.jsx("div",{className:"text-xs text-blue-400/60",children:"Blue"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-white/60",children:G.ghost}),w.jsx("div",{className:"text-xs text-white/40",children:"Ghost"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.players}),w.jsx("div",{className:"text-xs text-white/40",children:"Players"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:G.captured}),w.jsx("div",{className:"text-xs text-white/40",children:"Captured"})]})]}),w.jsxs("div",{className:"px-4 mb-6",children:[w.jsxs("h2",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[w.jsx(rv,{size:14}),"Danger Zone"]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("button",{onClick:P,disabled:m.resetAll,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetAll?w.jsx(Sh,{size:16,className:"animate-spin"}):w.jsx(a6,{size:16}),"Reset Captures"]}),w.jsxs("button",{onClick:C,disabled:m.resetPlayers,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetPlayers?w.jsx(Sh,{size:16,className:"animate-spin"}):w.jsx(Jd,{size:16}),"Reset Players"]})]})]}),w.jsx("div",{className:"px-4 mb-4",children:w.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[w.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h==="all"?"bg-white text-black":"bg-white/10 text-white/60"}`,children:"All"}),Object.values(Yd).map(U=>w.jsx("button",{onClick:()=>f(U.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h===U.id?"bg-white text-black":"bg-white/10 text-white/60"}`,children:U.name},U.id))]})}),w.jsxs("div",{className:"px-4 space-y-2",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2",children:["Art Points (",z.length,")"]}),z.map(U=>{var N;const b=Br.find(O=>O.id===U.id),S=(b==null?void 0:b.status)==="ghost";return w.jsxs("div",{className:`p-4 rounded-xl border ${S?"bg-white/5 border-white/10 opacity-60":"bg-white/5 border-white/10"}`,children:[w.jsxs("div",{className:"flex items-start justify-between mb-2",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-medium",children:U.name}),S&&w.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-white/10 text-white/40",children:"GHOST"})]}),w.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[U.id,"  ",U.area,"  ",U.size,"  ",(N=JI[U.size])==null?void 0:N.points,"pts"]})]}),U.capturedBy&&w.jsx("div",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:U.capturedBy==="red"?"#ff6b6b20":"#4dabf720",color:U.capturedBy==="red"?"#ff6b6b":"#4dabf7"},children:U.capturedBy.toUpperCase()})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>D(U.id,b==null?void 0:b.status),disabled:m[U.id],className:`flex-1 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-1.5 ${S?"bg-green-500/20 text-green-400":"bg-white/10 text-white/60"}`,children:m[U.id]?w.jsx(Sh,{size:14,className:"animate-spin"}):S?w.jsxs(w.Fragment,{children:[w.jsx(t6,{size:14})," Make Active"]}):w.jsxs(w.Fragment,{children:[w.jsx(iA,{size:14})," Make Ghost"]})}),U.capturedBy&&w.jsx("button",{onClick:()=>I(U.id),disabled:m[`reset-${U.id}`],className:"py-2 px-3 rounded-lg bg-white/10 text-white/60 text-xs font-medium flex items-center gap-1.5",children:m[`reset-${U.id}`]?w.jsx(Sh,{size:14,className:"animate-spin"}):w.jsxs(w.Fragment,{children:[w.jsx(h6,{size:14})," Reset"]})})]})]},U.id)})]}),w.jsxs("div",{className:"px-4 mt-8",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2 flex items-center gap-2",children:[w.jsx(Jd,{size:14}),"Players (",n.length,")"]}),w.jsx("div",{className:"space-y-2",children:n.map(U=>w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("div",{className:"font-medium",children:U.name}),w.jsxs("div",{className:"text-xs text-white/40",children:[U.captures||0," captures"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-sm font-bold",children:U.score||0}),w.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:U.team==="red"?"#ff6b6b":"#4dabf7"}})]})]},U.id))})]})]}):w.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-6",children:w.jsxs(le.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-purple-500/20 flex items-center justify-center",children:w.jsx(b1,{size:32,className:"text-purple-400"})}),w.jsx("h1",{className:"text-2xl font-bold",children:"Admin Access"}),w.jsx("p",{className:"text-white/40 text-sm mt-1",children:"God Mode Panel"})]}),w.jsxs("form",{onSubmit:R,className:"space-y-4",children:[w.jsx("input",{type:"password",value:a,onChange:U=>u(U.target.value),placeholder:"Enter password...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-center focus:outline-none focus:border-purple-500/50"}),w.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-purple-500 text-white font-bold",children:"Enter"})]}),_&&w.jsx(le.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 p-3 rounded-lg text-center text-sm ${_.type==="error"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:_.text}),w.jsx("button",{onClick:()=>t(-1),className:"mt-6 w-full py-2 text-white/40 text-sm",children:" Back"})]})})}const X6=[{path:"/",icon:n6,label:"Home"},{path:"/map",icon:Gg,label:"Map"},{path:"/scanner",icon:s6,label:"Scan"},{path:"/leaderboard",icon:iv,label:"Ranks"},{path:"/profile",icon:u6,label:"You"}];function Y6(){return w.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000]",children:[w.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-xl border-t border-white/[0.06]"}),w.jsx("div",{className:"relative flex justify-around items-center h-16 px-4 pb-safe",children:X6.map(({path:t,icon:e,label:n})=>w.jsx(T2,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>w.jsxs(le.div,{className:"relative flex flex-col items-center justify-center py-2 px-4",whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:17},children:[i&&w.jsx(le.div,{layoutId:"nav-pill",className:"absolute inset-0 rounded-xl bg-white/[0.08]",transition:{type:"spring",stiffness:400,damping:30}}),w.jsx(le.div,{className:"relative z-10",animate:{scale:i?1:.9,opacity:i?1:.5},transition:{type:"spring",stiffness:300,damping:20},children:w.jsx(e,{size:20,strokeWidth:i?2.5:2})}),w.jsx(le.span,{className:"relative z-10 text-[10px] mt-1 font-medium",animate:{opacity:i?1:.4,y:i?0:2},transition:{type:"spring",stiffness:300,damping:20},children:n})]})},t))})]})}function J6({color:t}){const e=Array.from({length:12},(n,i)=>({id:i,angle:i/12*360,delay:i*.02}));return w.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.map(n=>w.jsx(le.div,{className:"absolute left-1/2 top-1/2 w-3 h-3 rounded-full",style:{backgroundColor:t},initial:{x:0,y:0,opacity:1,scale:1},animate:{x:Math.cos(n.angle*Math.PI/180)*150,y:Math.sin(n.angle*Math.PI/180)*150,opacity:0,scale:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"}},n.id))})}function ez(){var o;const{captureNotification:t}=Li();if(!t)return null;const e=((o=Je[t.team])==null?void 0:o.hex)||"#888",n=t.team==="red"?"RED":"BLUE",i=t.points||100,r=t.streak||0;return w.jsxs(le.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden",children:[w.jsx(le.div,{className:"absolute inset-0",style:{backgroundColor:e},initial:{opacity:.3},animate:{opacity:[.3,.15,.2]},transition:{duration:.5}}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Array.from({length:8}).map((a,u)=>w.jsx(le.div,{className:"absolute w-1 origin-bottom",style:{backgroundColor:e,height:"50vh",transform:`rotate(${u*45}deg)`,opacity:.2},initial:{scaleY:0},animate:{scaleY:1},transition:{duration:.3,delay:u*.02}},u))}),w.jsxs(le.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},exit:{scale:.5,opacity:0},transition:{type:"spring",damping:12,stiffness:200},className:"relative text-center p-8",children:[w.jsx(J6,{color:e}),w.jsxs(le.div,{className:"relative w-28 h-28 mx-auto mb-4",animate:{scale:[1,1.1,1]},transition:{duration:.5,repeat:2},children:[w.jsx("div",{className:"absolute inset-0 rounded-full blur-xl",style:{backgroundColor:e,opacity:.5}}),w.jsx("div",{className:"relative w-full h-full rounded-full flex items-center justify-center",style:{backgroundColor:e},children:t.isRecapture?w.jsx(oA,{size:56,className:"text-white"}):w.jsx(nA,{size:56,className:"text-white"})})]}),w.jsxs(le.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[w.jsx("h1",{className:"text-4xl font-black text-white tracking-tight mb-1",children:t.isRecapture?"STOLEN!":"CAPTURED!"}),w.jsx("p",{className:"text-lg font-semibold text-white/80",children:t.artName})]}),w.jsxs(le.div,{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"rgba(0,0,0,0.4)"},initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:[w.jsx(nv,{size:20,className:"text-white"}),w.jsxs("span",{className:"text-2xl font-black text-white",children:["+",i]}),r>1&&w.jsxs("span",{className:"flex items-center gap-1 text-orange-400 font-bold",children:[w.jsx(tv,{size:18}),r,"x"]})]}),w.jsxs(le.div,{className:"mt-4 flex items-center justify-center gap-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[w.jsx("span",{className:"text-white/60 text-sm",children:"by"}),w.jsx("span",{className:"font-bold text-white",children:t.playerName}),w.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-black",style:{backgroundColor:e},children:n})]})]})]})}function Ch({children:t}){const{player:e}=Li();return e.team&&e.name&&e.name!=="Street Artist"?t:w.jsx(nP,{to:"/onboarding",replace:!0})}function tz(){const t=wo(),{player:e}=Li(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding"||t.pathname==="/admin";return w.jsxs("div",{className:"h-full w-full flex flex-col",children:[w.jsx(Uu,{children:w.jsx(ez,{})}),w.jsx(Uu,{mode:"wait",children:w.jsxs(c2,{location:t,children:[w.jsx(kr,{path:"/onboarding",element:w.jsx(m6,{})}),w.jsx(kr,{path:"/",element:n?w.jsx(_6,{}):w.jsx(nP,{to:"/onboarding",replace:!0})}),w.jsx(kr,{path:"/map",element:w.jsx(Ch,{children:w.jsx(U6,{})})}),w.jsx(kr,{path:"/scanner",element:w.jsx(Ch,{children:w.jsx(H6,{})})}),w.jsx(kr,{path:"/leaderboard",element:w.jsx(Ch,{children:w.jsx(G6,{})})}),w.jsx(kr,{path:"/profile",element:w.jsx(Ch,{children:w.jsx(Z6,{})})}),w.jsx(kr,{path:"/admin",element:w.jsx(Q6,{})})]},t.pathname)}),!i&&n&&w.jsx(Y6,{})]})}function nz(){return w.jsx(WF,{children:w.jsx(tz,{})})}dm.createRoot(document.getElementById("root")).render(w.jsx(so.StrictMode,{children:w.jsx(_2,{children:w.jsx(nz,{})})}));
