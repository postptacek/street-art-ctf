function ZA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var KA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U1={exports:{}},mf={},H1={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=Symbol.for("react.element"),QA=Symbol.for("react.portal"),YA=Symbol.for("react.fragment"),XA=Symbol.for("react.strict_mode"),JA=Symbol.for("react.profiler"),eb=Symbol.for("react.provider"),tb=Symbol.for("react.context"),nb=Symbol.for("react.forward_ref"),ib=Symbol.for("react.suspense"),rb=Symbol.for("react.memo"),sb=Symbol.for("react.lazy"),Vv=Symbol.iterator;function ob(t){return t===null||typeof t!="object"?null:(t=Vv&&t[Vv]||t["@@iterator"],typeof t=="function"?t:null)}var W1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$1=Object.assign,G1={};function cl(t,e,n){this.props=t,this.context=e,this.refs=G1,this.updater=n||W1}cl.prototype.isReactComponent={};cl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function q1(){}q1.prototype=cl.prototype;function sy(t,e,n){this.props=t,this.context=e,this.refs=G1,this.updater=n||W1}var oy=sy.prototype=new q1;oy.constructor=sy;$1(oy,cl.prototype);oy.isPureReactComponent=!0;var jv=Array.isArray,Z1=Object.prototype.hasOwnProperty,ay={current:null},K1={key:!0,ref:!0,__self:!0,__source:!0};function Q1(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Z1.call(e,i)&&!K1.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:cc,type:t,key:o,ref:a,props:r,_owner:ay.current}}function ab(t,e){return{$$typeof:cc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ly(t){return typeof t=="object"&&t!==null&&t.$$typeof===cc}function lb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fv=/\/+/g;function vp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lb(""+t.key):e.toString(36)}function zh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case cc:case QA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+vp(a,0):i,jv(r)?(n="",t!=null&&(n=t.replace(Fv,"$&/")+"/"),zh(r,e,n,"",function(f){return f})):r!=null&&(ly(r)&&(r=ab(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Fv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",jv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+vp(o,u);a+=zh(o,e,n,h,r)}else if(h=ob(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+vp(o,u++),a+=zh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function uh(t,e,n){if(t==null)return t;var i=[],r=0;return zh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function ub(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},Uh={transition:null},cb={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:Uh,ReactCurrentOwner:ay};function Y1(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:uh,forEach:function(t,e,n){uh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return uh(t,function(){e++}),e},toArray:function(t){return uh(t,function(e){return e})||[]},only:function(t){if(!ly(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=cl;Ve.Fragment=YA;Ve.Profiler=JA;Ve.PureComponent=sy;Ve.StrictMode=XA;Ve.Suspense=ib;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cb;Ve.act=Y1;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=$1({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=ay.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)Z1.call(e,h)&&!K1.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:cc,type:t.type,key:r,ref:o,props:i,_owner:a}};Ve.createContext=function(t){return t={$$typeof:tb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eb,_context:t},t.Consumer=t};Ve.createElement=Q1;Ve.createFactory=function(t){var e=Q1.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:nb,render:t}};Ve.isValidElement=ly;Ve.lazy=function(t){return{$$typeof:sb,_payload:{_status:-1,_result:t},_init:ub}};Ve.memo=function(t,e){return{$$typeof:rb,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=Uh.transition;Uh.transition={};try{t()}finally{Uh.transition=e}};Ve.unstable_act=Y1;Ve.useCallback=function(t,e){return pn.current.useCallback(t,e)};Ve.useContext=function(t){return pn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return pn.current.useEffect(t,e)};Ve.useId=function(){return pn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return pn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};Ve.useRef=function(t){return pn.current.useRef(t)};Ve.useState=function(t){return pn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return pn.current.useTransition()};Ve.version="18.3.1";H1.exports=Ve;var M=H1.exports;const _o=z1(M),hb=ZA({__proto__:null,default:_o},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db=M,fb=Symbol.for("react.element"),pb=Symbol.for("react.fragment"),mb=Object.prototype.hasOwnProperty,gb=db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yb={key:!0,ref:!0,__self:!0,__source:!0};function X1(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)mb.call(e,i)&&!yb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:fb,type:t,key:o,ref:a,props:r,_owner:gb.current}}mf.Fragment=pb;mf.jsx=X1;mf.jsxs=X1;U1.exports=mf;var w=U1.exports,Tm={},J1={exports:{}},Vn={},eT={exports:{}},tT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,oe){var J=Z.length;Z.push(oe);e:for(;0<J;){var ie=J-1>>>1,Pe=Z[ie];if(0<r(Pe,oe))Z[ie]=oe,Z[J]=Pe,J=ie;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var oe=Z[0],J=Z.pop();if(J!==oe){Z[0]=J;e:for(var ie=0,Pe=Z.length,Ze=Pe>>>1;ie<Ze;){var Le=2*(ie+1)-1,ke=Z[Le],ge=Le+1,ht=Z[ge];if(0>r(ke,J))ge<Pe&&0>r(ht,ke)?(Z[ie]=ht,Z[ge]=J,ie=ge):(Z[ie]=ke,Z[Le]=J,ie=Le);else if(ge<Pe&&0>r(ht,J))Z[ie]=ht,Z[ge]=J,ie=ge;else break e}}return oe}function r(Z,oe){var J=Z.sortIndex-oe.sortIndex;return J!==0?J:Z.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,_=3,E=!1,R=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Z){for(var oe=n(f);oe!==null;){if(oe.callback===null)i(f);else if(oe.startTime<=Z)i(f),oe.sortIndex=oe.expirationTime,e(h,oe);else break;oe=n(f)}}function B(Z){if(k=!1,S(Z),!R)if(n(h)!==null)R=!0,fe(W);else{var oe=n(f);oe!==null&&Ie(B,oe.startTime-Z)}}function W(Z,oe){R=!1,k&&(k=!1,A(C),C=-1),E=!0;var J=_;try{for(S(oe),g=n(h);g!==null&&(!(g.expirationTime>oe)||Z&&!j());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,_=g.priorityLevel;var Pe=ie(g.expirationTime<=oe);oe=t.unstable_now(),typeof Pe=="function"?g.callback=Pe:g===n(h)&&i(h),S(oe)}else i(h);g=n(h)}if(g!==null)var Ze=!0;else{var Le=n(f);Le!==null&&Ie(B,Le.startTime-oe),Ze=!1}return Ze}finally{g=null,_=J,E=!1}}var z=!1,I=null,C=-1,N=5,D=-1;function j(){return!(t.unstable_now()-D<N)}function U(){if(I!==null){var Z=t.unstable_now();D=Z;var oe=!0;try{oe=I(!0,Z)}finally{oe?O():(z=!1,I=null)}}else z=!1}var O;if(typeof T=="function")O=function(){T(U)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,se=Te.port2;Te.port1.onmessage=U,O=function(){se.postMessage(null)}}else O=function(){V(U,0)};function fe(Z){I=Z,z||(z=!0,O())}function Ie(Z,oe){C=V(function(){Z(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){R||E||(R=!0,fe(W))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var J=_;_=oe;try{return Z()}finally{_=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,oe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var J=_;_=Z;try{return oe()}finally{_=J}},t.unstable_scheduleCallback=function(Z,oe,J){var ie=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ie+J:ie):J=ie,Z){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=J+Pe,Z={id:m++,callback:oe,priorityLevel:Z,startTime:J,expirationTime:Pe,sortIndex:-1},J>ie?(Z.sortIndex=J,e(f,Z),n(h)===null&&Z===n(f)&&(k?(A(C),C=-1):k=!0,Ie(B,J-ie))):(Z.sortIndex=Pe,e(h,Z),R||E||(R=!0,fe(W))),Z},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(Z){var oe=_;return function(){var J=_;_=oe;try{return Z.apply(this,arguments)}finally{_=J}}}})(tT);eT.exports=tT;var _b=eT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=M,Mn=_b;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nT=new Set,Mu={};function bo(t,e){Ga(t,e),Ga(t+"Capture",e)}function Ga(t,e){for(Mu[t]=e,t=0;t<e.length;t++)nT.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Em=Object.prototype.hasOwnProperty,wb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bv={},zv={};function xb(t){return Em.call(zv,t)?!0:Em.call(Bv,t)?!1:wb.test(t)?zv[t]=!0:(Bv[t]=!0,!1)}function Tb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Eb(t,e,n,i){if(e===null||typeof e>"u"||Tb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var uy=/[\-:]([a-z])/g;function cy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uy,cy);qt[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uy,cy);qt[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uy,cy);qt[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function hy(t,e,n,i){var r=qt.hasOwnProperty(e)?qt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Eb(e,n,r,i)&&(n=null),i||r===null?xb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var kr=vb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ch=Symbol.for("react.element"),ya=Symbol.for("react.portal"),_a=Symbol.for("react.fragment"),dy=Symbol.for("react.strict_mode"),Pm=Symbol.for("react.profiler"),iT=Symbol.for("react.provider"),rT=Symbol.for("react.context"),fy=Symbol.for("react.forward_ref"),Sm=Symbol.for("react.suspense"),Cm=Symbol.for("react.suspense_list"),py=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),sT=Symbol.for("react.offscreen"),Uv=Symbol.iterator;function ql(t){return t===null||typeof t!="object"?null:(t=Uv&&t[Uv]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,wp;function su(t){if(wp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wp=e&&e[1]||""}return`
`+wp+t}var xp=!1;function Tp(t,e){if(!t||xp)return"";xp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{xp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?su(t):""}function Pb(t){switch(t.tag){case 5:return su(t.type);case 16:return su("Lazy");case 13:return su("Suspense");case 19:return su("SuspenseList");case 0:case 2:case 15:return t=Tp(t.type,!1),t;case 11:return t=Tp(t.type.render,!1),t;case 1:return t=Tp(t.type,!0),t;default:return""}}function Im(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _a:return"Fragment";case ya:return"Portal";case Pm:return"Profiler";case dy:return"StrictMode";case Sm:return"Suspense";case Cm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rT:return(t.displayName||"Context")+".Consumer";case iT:return(t._context.displayName||"Context")+".Provider";case fy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case py:return e=t.displayName||null,e!==null?e:Im(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return Im(t(e))}catch{}}return null}function Sb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Im(e);case 8:return e===dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cb(t){var e=oT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hh(t){t._valueTracker||(t._valueTracker=Cb(t))}function aT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=oT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function dd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Am(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Es(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lT(t,e){e=e.checked,e!=null&&hy(t,"checked",e,!1)}function bm(t,e){lT(t,e);var n=Es(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?km(t,e.type,n):e.hasOwnProperty("defaultValue")&&km(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function km(t,e,n){(e!=="number"||dd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ou=Array.isArray;function Ma(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Es(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Rm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $v(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(ou(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Es(n)}}function uT(t,e){var n=Es(e.value),i=Es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Gv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dh,hT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dh=dh||document.createElement("div"),dh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ou(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ib=["Webkit","ms","Moz","O"];Object.keys(pu).forEach(function(t){Ib.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pu[e]=pu[t]})});function dT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pu.hasOwnProperty(t)&&pu[t]?(""+e).trim():e+"px"}function fT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=dT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Ab=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lm(t,e){if(e){if(Ab[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Mm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Om=null;function my(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dm=null,Oa=null,Da=null;function qv(t){if(t=fc(t)){if(typeof Dm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=wf(e),Dm(t.stateNode,t.type,e))}}function pT(t){Oa?Da?Da.push(t):Da=[t]:Oa=t}function mT(){if(Oa){var t=Oa,e=Da;if(Da=Oa=null,qv(t),e)for(t=0;t<e.length;t++)qv(e[t])}}function gT(t,e){return t(e)}function yT(){}var Ep=!1;function _T(t,e,n){if(Ep)return t(e,n);Ep=!0;try{return gT(t,e,n)}finally{Ep=!1,(Oa!==null||Da!==null)&&(yT(),mT())}}function Du(t,e){var n=t.stateNode;if(n===null)return null;var i=wf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Vm=!1;if(wr)try{var Zl={};Object.defineProperty(Zl,"passive",{get:function(){Vm=!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{Vm=!1}function bb(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var mu=!1,fd=null,pd=!1,jm=null,kb={onError:function(t){mu=!0,fd=t}};function Rb(t,e,n,i,r,o,a,u,h){mu=!1,fd=null,bb.apply(kb,arguments)}function Nb(t,e,n,i,r,o,a,u,h){if(Rb.apply(this,arguments),mu){if(mu){var f=fd;mu=!1,fd=null}else throw Error(X(198));pd||(pd=!0,jm=f)}}function ko(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zv(t){if(ko(t)!==t)throw Error(X(188))}function Lb(t){var e=t.alternate;if(!e){if(e=ko(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Zv(r),t;if(o===i)return Zv(r),e;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function wT(t){return t=Lb(t),t!==null?xT(t):null}function xT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xT(t);if(e!==null)return e;t=t.sibling}return null}var TT=Mn.unstable_scheduleCallback,Kv=Mn.unstable_cancelCallback,Mb=Mn.unstable_shouldYield,Ob=Mn.unstable_requestPaint,Et=Mn.unstable_now,Db=Mn.unstable_getCurrentPriorityLevel,gy=Mn.unstable_ImmediatePriority,ET=Mn.unstable_UserBlockingPriority,md=Mn.unstable_NormalPriority,Vb=Mn.unstable_LowPriority,PT=Mn.unstable_IdlePriority,gf=null,ji=null;function jb(t){if(ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(gf,t,void 0,(t.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:zb,Fb=Math.log,Bb=Math.LN2;function zb(t){return t>>>=0,t===0?32:31-(Fb(t)/Bb|0)|0}var fh=64,ph=4194304;function au(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=au(u):(o&=a,o!==0&&(i=au(o)))}else a=n&~r,a!==0?i=au(a):o!==0&&(i=au(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ti(e),r=1<<n,i|=t[n],e&=~r;return i}function Ub(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Ti(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=Ub(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Fm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ST(){var t=fh;return fh<<=1,!(fh&4194240)&&(fh=64),t}function Pp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ti(e),t[e]=n}function Wb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ti(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function yy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ti(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Je=0;function CT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var IT,_y,AT,bT,kT,Bm=!1,mh=[],ss=null,os=null,as=null,Vu=new Map,ju=new Map,Kr=[],$b="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qv(t,e){switch(t){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Vu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(e.pointerId)}}function Kl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=fc(e),e!==null&&_y(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Gb(t,e,n,i,r){switch(e){case"focusin":return ss=Kl(ss,t,e,n,i,r),!0;case"dragenter":return os=Kl(os,t,e,n,i,r),!0;case"mouseover":return as=Kl(as,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Vu.set(o,Kl(Vu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,ju.set(o,Kl(ju.get(o)||null,t,e,n,i,r)),!0}return!1}function RT(t){var e=oo(t.target);if(e!==null){var n=ko(e);if(n!==null){if(e=n.tag,e===13){if(e=vT(n),e!==null){t.blockedOn=e,kT(t.priority,function(){AT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Om=i,n.target.dispatchEvent(i),Om=null}else return e=fc(n),e!==null&&_y(e),t.blockedOn=n,!1;e.shift()}return!0}function Yv(t,e,n){Hh(t)&&n.delete(e)}function qb(){Bm=!1,ss!==null&&Hh(ss)&&(ss=null),os!==null&&Hh(os)&&(os=null),as!==null&&Hh(as)&&(as=null),Vu.forEach(Yv),ju.forEach(Yv)}function Ql(t,e){t.blockedOn===e&&(t.blockedOn=null,Bm||(Bm=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,qb)))}function Fu(t){function e(r){return Ql(r,t)}if(0<mh.length){Ql(mh[0],t);for(var n=1;n<mh.length;n++){var i=mh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ss!==null&&Ql(ss,t),os!==null&&Ql(os,t),as!==null&&Ql(as,t),Vu.forEach(e),ju.forEach(e),n=0;n<Kr.length;n++)i=Kr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Kr.length&&(n=Kr[0],n.blockedOn===null);)RT(n),n.blockedOn===null&&Kr.shift()}var Va=kr.ReactCurrentBatchConfig,yd=!0;function Zb(t,e,n,i){var r=Je,o=Va.transition;Va.transition=null;try{Je=1,vy(t,e,n,i)}finally{Je=r,Va.transition=o}}function Kb(t,e,n,i){var r=Je,o=Va.transition;Va.transition=null;try{Je=4,vy(t,e,n,i)}finally{Je=r,Va.transition=o}}function vy(t,e,n,i){if(yd){var r=zm(t,e,n,i);if(r===null)Mp(t,e,i,_d,n),Qv(t,i);else if(Gb(r,t,e,n,i))i.stopPropagation();else if(Qv(t,i),e&4&&-1<$b.indexOf(t)){for(;r!==null;){var o=fc(r);if(o!==null&&IT(o),o=zm(t,e,n,i),o===null&&Mp(t,e,i,_d,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Mp(t,e,i,null,n)}}var _d=null;function zm(t,e,n,i){if(_d=null,t=my(i),t=oo(t),t!==null)if(e=ko(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _d=t,null}function NT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Db()){case gy:return 1;case ET:return 4;case md:case Vb:return 16;case PT:return 536870912;default:return 16}default:return 16}}var ts=null,wy=null,Wh=null;function LT(){if(Wh)return Wh;var t,e=wy,n=e.length,i,r="value"in ts?ts.value:ts.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Wh=r.slice(t,1<i?1-i:void 0)}function $h(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gh(){return!0}function Xv(){return!1}function jn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?gh:Xv,this.isPropagationStopped=Xv,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gh)},persist:function(){},isPersistent:gh}),e}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xy=jn(hl),dc=yt({},hl,{view:0,detail:0}),Qb=jn(dc),Sp,Cp,Yl,yf=yt({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ty,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yl&&(Yl&&t.type==="mousemove"?(Sp=t.screenX-Yl.screenX,Cp=t.screenY-Yl.screenY):Cp=Sp=0,Yl=t),Sp)},movementY:function(t){return"movementY"in t?t.movementY:Cp}}),Jv=jn(yf),Yb=yt({},yf,{dataTransfer:0}),Xb=jn(Yb),Jb=yt({},dc,{relatedTarget:0}),Ip=jn(Jb),ek=yt({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),tk=jn(ek),nk=yt({},hl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ik=jn(nk),rk=yt({},hl,{data:0}),e0=jn(rk),sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ok={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ak={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ak[t])?!!e[t]:!1}function Ty(){return lk}var uk=yt({},dc,{key:function(t){if(t.key){var e=sk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$h(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ok[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ty,charCode:function(t){return t.type==="keypress"?$h(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$h(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ck=jn(uk),hk=yt({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t0=jn(hk),dk=yt({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ty}),fk=jn(dk),pk=yt({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),mk=jn(pk),gk=yt({},yf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yk=jn(gk),_k=[9,13,27,32],Ey=wr&&"CompositionEvent"in window,gu=null;wr&&"documentMode"in document&&(gu=document.documentMode);var vk=wr&&"TextEvent"in window&&!gu,MT=wr&&(!Ey||gu&&8<gu&&11>=gu),n0=" ",i0=!1;function OT(t,e){switch(t){case"keyup":return _k.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var va=!1;function wk(t,e){switch(t){case"compositionend":return DT(e);case"keypress":return e.which!==32?null:(i0=!0,n0);case"textInput":return t=e.data,t===n0&&i0?null:t;default:return null}}function xk(t,e){if(va)return t==="compositionend"||!Ey&&OT(t,e)?(t=LT(),Wh=wy=ts=null,va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MT&&e.locale!=="ko"?null:e.data;default:return null}}var Tk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tk[t.type]:e==="textarea"}function VT(t,e,n,i){pT(i),e=vd(e,"onChange"),0<e.length&&(n=new xy("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var yu=null,Bu=null;function Ek(t){ZT(t,0)}function _f(t){var e=Ta(t);if(aT(e))return t}function Pk(t,e){if(t==="change")return e}var jT=!1;if(wr){var Ap;if(wr){var bp="oninput"in document;if(!bp){var s0=document.createElement("div");s0.setAttribute("oninput","return;"),bp=typeof s0.oninput=="function"}Ap=bp}else Ap=!1;jT=Ap&&(!document.documentMode||9<document.documentMode)}function o0(){yu&&(yu.detachEvent("onpropertychange",FT),Bu=yu=null)}function FT(t){if(t.propertyName==="value"&&_f(Bu)){var e=[];VT(e,Bu,t,my(t)),_T(Ek,e)}}function Sk(t,e,n){t==="focusin"?(o0(),yu=e,Bu=n,yu.attachEvent("onpropertychange",FT)):t==="focusout"&&o0()}function Ck(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _f(Bu)}function Ik(t,e){if(t==="click")return _f(e)}function Ak(t,e){if(t==="input"||t==="change")return _f(e)}function bk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pi=typeof Object.is=="function"?Object.is:bk;function zu(t,e){if(Pi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Em.call(e,r)||!Pi(t[r],e[r]))return!1}return!0}function a0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function l0(t,e){var n=a0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a0(n)}}function BT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zT(){for(var t=window,e=dd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dd(t.document)}return e}function Py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kk(t){var e=zT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BT(n.ownerDocument.documentElement,n)){if(i!==null&&Py(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=l0(n,o);var a=l0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rk=wr&&"documentMode"in document&&11>=document.documentMode,wa=null,Um=null,_u=null,Hm=!1;function u0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hm||wa==null||wa!==dd(i)||(i=wa,"selectionStart"in i&&Py(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),_u&&zu(_u,i)||(_u=i,i=vd(Um,"onSelect"),0<i.length&&(e=new xy("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=wa)))}function yh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xa={animationend:yh("Animation","AnimationEnd"),animationiteration:yh("Animation","AnimationIteration"),animationstart:yh("Animation","AnimationStart"),transitionend:yh("Transition","TransitionEnd")},kp={},UT={};wr&&(UT=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function vf(t){if(kp[t])return kp[t];if(!xa[t])return t;var e=xa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in UT)return kp[t]=e[n];return t}var HT=vf("animationend"),WT=vf("animationiteration"),$T=vf("animationstart"),GT=vf("transitionend"),qT=new Map,c0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(t,e){qT.set(t,e),bo(e,[t])}for(var Rp=0;Rp<c0.length;Rp++){var Np=c0[Rp],Nk=Np.toLowerCase(),Lk=Np[0].toUpperCase()+Np.slice(1);Ms(Nk,"on"+Lk)}Ms(HT,"onAnimationEnd");Ms(WT,"onAnimationIteration");Ms($T,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(GT,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mk=new Set("cancel close invalid load scroll toggle".split(" ").concat(lu));function h0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Nb(i,e,void 0,t),t.currentTarget=null}function ZT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;h0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;h0(r,u,f),o=h}}}if(pd)throw t=jm,pd=!1,jm=null,t}function st(t,e){var n=e[Zm];n===void 0&&(n=e[Zm]=new Set);var i=t+"__bubble";n.has(i)||(KT(e,t,2,!1),n.add(i))}function Lp(t,e,n){var i=0;e&&(i|=4),KT(n,t,i,e)}var _h="_reactListening"+Math.random().toString(36).slice(2);function Uu(t){if(!t[_h]){t[_h]=!0,nT.forEach(function(n){n!=="selectionchange"&&(Mk.has(n)||Lp(n,!1,t),Lp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_h]||(e[_h]=!0,Lp("selectionchange",!1,e))}}function KT(t,e,n,i){switch(NT(e)){case 1:var r=Zb;break;case 4:r=Kb;break;default:r=vy}n=r.bind(null,e,n,t),r=void 0,!Vm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Mp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=oo(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}_T(function(){var f=o,m=my(n),g=[];e:{var _=qT.get(t);if(_!==void 0){var E=xy,R=t;switch(t){case"keypress":if($h(n)===0)break e;case"keydown":case"keyup":E=ck;break;case"focusin":R="focus",E=Ip;break;case"focusout":R="blur",E=Ip;break;case"beforeblur":case"afterblur":E=Ip;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Jv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=fk;break;case HT:case WT:case $T:E=tk;break;case GT:E=mk;break;case"scroll":E=Qb;break;case"wheel":E=yk;break;case"copy":case"cut":case"paste":E=ik;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=t0}var k=(e&4)!==0,V=!k&&t==="scroll",A=k?_!==null?_+"Capture":null:_;k=[];for(var T=f,S;T!==null;){S=T;var B=S.stateNode;if(S.tag===5&&B!==null&&(S=B,A!==null&&(B=Du(T,A),B!=null&&k.push(Hu(T,B,S)))),V)break;T=T.return}0<k.length&&(_=new E(_,R,null,n,m),g.push({event:_,listeners:k}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",_&&n!==Om&&(R=n.relatedTarget||n.fromElement)&&(oo(R)||R[xr]))break e;if((E||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,E?(R=n.relatedTarget||n.toElement,E=f,R=R?oo(R):null,R!==null&&(V=ko(R),R!==V||R.tag!==5&&R.tag!==6)&&(R=null)):(E=null,R=f),E!==R)){if(k=Jv,B="onMouseLeave",A="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(k=t0,B="onPointerLeave",A="onPointerEnter",T="pointer"),V=E==null?_:Ta(E),S=R==null?_:Ta(R),_=new k(B,T+"leave",E,n,m),_.target=V,_.relatedTarget=S,B=null,oo(m)===f&&(k=new k(A,T+"enter",R,n,m),k.target=S,k.relatedTarget=V,B=k),V=B,E&&R)t:{for(k=E,A=R,T=0,S=k;S;S=ca(S))T++;for(S=0,B=A;B;B=ca(B))S++;for(;0<T-S;)k=ca(k),T--;for(;0<S-T;)A=ca(A),S--;for(;T--;){if(k===A||A!==null&&k===A.alternate)break t;k=ca(k),A=ca(A)}k=null}else k=null;E!==null&&d0(g,_,E,k,!1),R!==null&&V!==null&&d0(g,V,R,k,!0)}}e:{if(_=f?Ta(f):window,E=_.nodeName&&_.nodeName.toLowerCase(),E==="select"||E==="input"&&_.type==="file")var W=Pk;else if(r0(_))if(jT)W=Ak;else{W=Ck;var z=Sk}else(E=_.nodeName)&&E.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(W=Ik);if(W&&(W=W(t,f))){VT(g,W,n,m);break e}z&&z(t,_,f),t==="focusout"&&(z=_._wrapperState)&&z.controlled&&_.type==="number"&&km(_,"number",_.value)}switch(z=f?Ta(f):window,t){case"focusin":(r0(z)||z.contentEditable==="true")&&(wa=z,Um=f,_u=null);break;case"focusout":_u=Um=wa=null;break;case"mousedown":Hm=!0;break;case"contextmenu":case"mouseup":case"dragend":Hm=!1,u0(g,n,m);break;case"selectionchange":if(Rk)break;case"keydown":case"keyup":u0(g,n,m)}var I;if(Ey)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else va?OT(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(MT&&n.locale!=="ko"&&(va||C!=="onCompositionStart"?C==="onCompositionEnd"&&va&&(I=LT()):(ts=m,wy="value"in ts?ts.value:ts.textContent,va=!0)),z=vd(f,C),0<z.length&&(C=new e0(C,t,null,n,m),g.push({event:C,listeners:z}),I?C.data=I:(I=DT(n),I!==null&&(C.data=I)))),(I=vk?wk(t,n):xk(t,n))&&(f=vd(f,"onBeforeInput"),0<f.length&&(m=new e0("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=I))}ZT(g,e)})}function Hu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Du(t,n),o!=null&&i.unshift(Hu(t,o,r)),o=Du(t,e),o!=null&&i.push(Hu(t,o,r))),t=t.return}return i}function ca(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=Du(n,o),h!=null&&a.unshift(Hu(n,h,u))):r||(h=Du(n,o),h!=null&&a.push(Hu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Ok=/\r\n?/g,Dk=/\u0000|\uFFFD/g;function f0(t){return(typeof t=="string"?t:""+t).replace(Ok,`
`).replace(Dk,"")}function vh(t,e,n){if(e=f0(e),f0(t)!==e&&n)throw Error(X(425))}function wd(){}var Wm=null,$m=null;function Gm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qm=typeof setTimeout=="function"?setTimeout:void 0,Vk=typeof clearTimeout=="function"?clearTimeout:void 0,p0=typeof Promise=="function"?Promise:void 0,jk=typeof queueMicrotask=="function"?queueMicrotask:typeof p0<"u"?function(t){return p0.resolve(null).then(t).catch(Fk)}:qm;function Fk(t){setTimeout(function(){throw t})}function Op(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Fu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Fu(e)}function ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function m0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var dl=Math.random().toString(36).slice(2),Vi="__reactFiber$"+dl,Wu="__reactProps$"+dl,xr="__reactContainer$"+dl,Zm="__reactEvents$"+dl,Bk="__reactListeners$"+dl,zk="__reactHandles$"+dl;function oo(t){var e=t[Vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xr]||n[Vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=m0(t);t!==null;){if(n=t[Vi])return n;t=m0(t)}return e}t=n,n=t.parentNode}return null}function fc(t){return t=t[Vi]||t[xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ta(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function wf(t){return t[Wu]||null}var Km=[],Ea=-1;function Os(t){return{current:t}}function ut(t){0>Ea||(t.current=Km[Ea],Km[Ea]=null,Ea--)}function nt(t,e){Ea++,Km[Ea]=t.current,t.current=e}var Ps={},sn=Os(Ps),En=Os(!1),vo=Ps;function qa(t,e){var n=t.type.contextTypes;if(!n)return Ps;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Pn(t){return t=t.childContextTypes,t!=null}function xd(){ut(En),ut(sn)}function g0(t,e,n){if(sn.current!==Ps)throw Error(X(168));nt(sn,e),nt(En,n)}function QT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,Sb(t)||"Unknown",r));return yt({},n,i)}function Td(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ps,vo=sn.current,nt(sn,t),nt(En,En.current),!0}function y0(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=QT(t,e,vo),i.__reactInternalMemoizedMergedChildContext=t,ut(En),ut(sn),nt(sn,t)):ut(En),nt(En,n)}var cr=null,xf=!1,Dp=!1;function YT(t){cr===null?cr=[t]:cr.push(t)}function Uk(t){xf=!0,YT(t)}function Ds(){if(!Dp&&cr!==null){Dp=!0;var t=0,e=Je;try{var n=cr;for(Je=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}cr=null,xf=!1}catch(r){throw cr!==null&&(cr=cr.slice(t+1)),TT(gy,Ds),r}finally{Je=e,Dp=!1}}return null}var Pa=[],Sa=0,Ed=null,Pd=0,Yn=[],Xn=0,wo=null,hr=1,dr="";function Js(t,e){Pa[Sa++]=Pd,Pa[Sa++]=Ed,Ed=t,Pd=e}function XT(t,e,n){Yn[Xn++]=hr,Yn[Xn++]=dr,Yn[Xn++]=wo,wo=t;var i=hr;t=dr;var r=32-Ti(i)-1;i&=~(1<<r),n+=1;var o=32-Ti(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,hr=1<<32-Ti(e)+r|n<<r|i,dr=o+t}else hr=1<<o|n<<r|i,dr=t}function Sy(t){t.return!==null&&(Js(t,1),XT(t,1,0))}function Cy(t){for(;t===Ed;)Ed=Pa[--Sa],Pa[Sa]=null,Pd=Pa[--Sa],Pa[Sa]=null;for(;t===wo;)wo=Yn[--Xn],Yn[Xn]=null,dr=Yn[--Xn],Yn[Xn]=null,hr=Yn[--Xn],Yn[Xn]=null}var Ln=null,Nn=null,ct=!1,yi=null;function JT(t,e){var n=ti(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,Nn=ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,Nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wo!==null?{id:hr,overflow:dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ti(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,Nn=null,!0):!1;default:return!1}}function Qm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ym(t){if(ct){var e=Nn;if(e){var n=e;if(!_0(t,e)){if(Qm(t))throw Error(X(418));e=ls(n.nextSibling);var i=Ln;e&&_0(t,e)?JT(i,n):(t.flags=t.flags&-4097|2,ct=!1,Ln=t)}}else{if(Qm(t))throw Error(X(418));t.flags=t.flags&-4097|2,ct=!1,Ln=t}}}function v0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function wh(t){if(t!==Ln)return!1;if(!ct)return v0(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gm(t.type,t.memoizedProps)),e&&(e=Nn)){if(Qm(t))throw eE(),Error(X(418));for(;e;)JT(t,e),e=ls(e.nextSibling)}if(v0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nn=ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nn=null}}else Nn=Ln?ls(t.stateNode.nextSibling):null;return!0}function eE(){for(var t=Nn;t;)t=ls(t.nextSibling)}function Za(){Nn=Ln=null,ct=!1}function Iy(t){yi===null?yi=[t]:yi.push(t)}var Hk=kr.ReactCurrentBatchConfig;function Xl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function xh(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function w0(t){var e=t._init;return e(t._payload)}function tE(t){function e(A,T){if(t){var S=A.deletions;S===null?(A.deletions=[T],A.flags|=16):S.push(T)}}function n(A,T){if(!t)return null;for(;T!==null;)e(A,T),T=T.sibling;return null}function i(A,T){for(A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function r(A,T){return A=ds(A,T),A.index=0,A.sibling=null,A}function o(A,T,S){return A.index=S,t?(S=A.alternate,S!==null?(S=S.index,S<T?(A.flags|=2,T):S):(A.flags|=2,T)):(A.flags|=1048576,T)}function a(A){return t&&A.alternate===null&&(A.flags|=2),A}function u(A,T,S,B){return T===null||T.tag!==6?(T=Hp(S,A.mode,B),T.return=A,T):(T=r(T,S),T.return=A,T)}function h(A,T,S,B){var W=S.type;return W===_a?m(A,T,S.props.children,B,S.key):T!==null&&(T.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Gr&&w0(W)===T.type)?(B=r(T,S.props),B.ref=Xl(A,T,S),B.return=A,B):(B=Xh(S.type,S.key,S.props,null,A.mode,B),B.ref=Xl(A,T,S),B.return=A,B)}function f(A,T,S,B){return T===null||T.tag!==4||T.stateNode.containerInfo!==S.containerInfo||T.stateNode.implementation!==S.implementation?(T=Wp(S,A.mode,B),T.return=A,T):(T=r(T,S.children||[]),T.return=A,T)}function m(A,T,S,B,W){return T===null||T.tag!==7?(T=fo(S,A.mode,B,W),T.return=A,T):(T=r(T,S),T.return=A,T)}function g(A,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Hp(""+T,A.mode,S),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ch:return S=Xh(T.type,T.key,T.props,null,A.mode,S),S.ref=Xl(A,null,T),S.return=A,S;case ya:return T=Wp(T,A.mode,S),T.return=A,T;case Gr:var B=T._init;return g(A,B(T._payload),S)}if(ou(T)||ql(T))return T=fo(T,A.mode,S,null),T.return=A,T;xh(A,T)}return null}function _(A,T,S,B){var W=T!==null?T.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return W!==null?null:u(A,T,""+S,B);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ch:return S.key===W?h(A,T,S,B):null;case ya:return S.key===W?f(A,T,S,B):null;case Gr:return W=S._init,_(A,T,W(S._payload),B)}if(ou(S)||ql(S))return W!==null?null:m(A,T,S,B,null);xh(A,S)}return null}function E(A,T,S,B,W){if(typeof B=="string"&&B!==""||typeof B=="number")return A=A.get(S)||null,u(T,A,""+B,W);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ch:return A=A.get(B.key===null?S:B.key)||null,h(T,A,B,W);case ya:return A=A.get(B.key===null?S:B.key)||null,f(T,A,B,W);case Gr:var z=B._init;return E(A,T,S,z(B._payload),W)}if(ou(B)||ql(B))return A=A.get(S)||null,m(T,A,B,W,null);xh(T,B)}return null}function R(A,T,S,B){for(var W=null,z=null,I=T,C=T=0,N=null;I!==null&&C<S.length;C++){I.index>C?(N=I,I=null):N=I.sibling;var D=_(A,I,S[C],B);if(D===null){I===null&&(I=N);break}t&&I&&D.alternate===null&&e(A,I),T=o(D,T,C),z===null?W=D:z.sibling=D,z=D,I=N}if(C===S.length)return n(A,I),ct&&Js(A,C),W;if(I===null){for(;C<S.length;C++)I=g(A,S[C],B),I!==null&&(T=o(I,T,C),z===null?W=I:z.sibling=I,z=I);return ct&&Js(A,C),W}for(I=i(A,I);C<S.length;C++)N=E(I,A,C,S[C],B),N!==null&&(t&&N.alternate!==null&&I.delete(N.key===null?C:N.key),T=o(N,T,C),z===null?W=N:z.sibling=N,z=N);return t&&I.forEach(function(j){return e(A,j)}),ct&&Js(A,C),W}function k(A,T,S,B){var W=ql(S);if(typeof W!="function")throw Error(X(150));if(S=W.call(S),S==null)throw Error(X(151));for(var z=W=null,I=T,C=T=0,N=null,D=S.next();I!==null&&!D.done;C++,D=S.next()){I.index>C?(N=I,I=null):N=I.sibling;var j=_(A,I,D.value,B);if(j===null){I===null&&(I=N);break}t&&I&&j.alternate===null&&e(A,I),T=o(j,T,C),z===null?W=j:z.sibling=j,z=j,I=N}if(D.done)return n(A,I),ct&&Js(A,C),W;if(I===null){for(;!D.done;C++,D=S.next())D=g(A,D.value,B),D!==null&&(T=o(D,T,C),z===null?W=D:z.sibling=D,z=D);return ct&&Js(A,C),W}for(I=i(A,I);!D.done;C++,D=S.next())D=E(I,A,C,D.value,B),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?C:D.key),T=o(D,T,C),z===null?W=D:z.sibling=D,z=D);return t&&I.forEach(function(U){return e(A,U)}),ct&&Js(A,C),W}function V(A,T,S,B){if(typeof S=="object"&&S!==null&&S.type===_a&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ch:e:{for(var W=S.key,z=T;z!==null;){if(z.key===W){if(W=S.type,W===_a){if(z.tag===7){n(A,z.sibling),T=r(z,S.props.children),T.return=A,A=T;break e}}else if(z.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Gr&&w0(W)===z.type){n(A,z.sibling),T=r(z,S.props),T.ref=Xl(A,z,S),T.return=A,A=T;break e}n(A,z);break}else e(A,z);z=z.sibling}S.type===_a?(T=fo(S.props.children,A.mode,B,S.key),T.return=A,A=T):(B=Xh(S.type,S.key,S.props,null,A.mode,B),B.ref=Xl(A,T,S),B.return=A,A=B)}return a(A);case ya:e:{for(z=S.key;T!==null;){if(T.key===z)if(T.tag===4&&T.stateNode.containerInfo===S.containerInfo&&T.stateNode.implementation===S.implementation){n(A,T.sibling),T=r(T,S.children||[]),T.return=A,A=T;break e}else{n(A,T);break}else e(A,T);T=T.sibling}T=Wp(S,A.mode,B),T.return=A,A=T}return a(A);case Gr:return z=S._init,V(A,T,z(S._payload),B)}if(ou(S))return R(A,T,S,B);if(ql(S))return k(A,T,S,B);xh(A,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,T!==null&&T.tag===6?(n(A,T.sibling),T=r(T,S),T.return=A,A=T):(n(A,T),T=Hp(S,A.mode,B),T.return=A,A=T),a(A)):n(A,T)}return V}var Ka=tE(!0),nE=tE(!1),Sd=Os(null),Cd=null,Ca=null,Ay=null;function by(){Ay=Ca=Cd=null}function ky(t){var e=Sd.current;ut(Sd),t._currentValue=e}function Xm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ja(t,e){Cd=t,Ay=Ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function ii(t){var e=t._currentValue;if(Ay!==t)if(t={context:t,memoizedValue:e,next:null},Ca===null){if(Cd===null)throw Error(X(308));Ca=t,Cd.dependencies={lanes:0,firstContext:t}}else Ca=Ca.next=t;return e}var ao=null;function Ry(t){ao===null?ao=[t]:ao.push(t)}function iE(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ry(e)):(n.next=r.next,r.next=n),e.interleaved=n,Tr(t,i)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function Ny(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function us(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,$e&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Tr(t,n)}return r=i.interleaved,r===null?(e.next=e,Ry(i)):(e.next=r.next,r.next=e),i.interleaved=e,Tr(t,n)}function Gh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,yy(t,n)}}function x0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Id(t,e,n,i){var r=t.updateQueue;qr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var _=u.lane,E=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var R=t,k=u;switch(_=e,E=n,k.tag){case 1:if(R=k.payload,typeof R=="function"){g=R.call(E,g,_);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=k.payload,_=typeof R=="function"?R.call(E,g,_):R,_==null)break e;g=yt({},g,_);break e;case 2:qr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else E={eventTime:E,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=E,h=g):m=m.next=E,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);To|=a,t.lanes=a,t.memoizedState=g}}function T0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var pc={},Fi=Os(pc),$u=Os(pc),Gu=Os(pc);function lo(t){if(t===pc)throw Error(X(174));return t}function Ly(t,e){switch(nt(Gu,e),nt($u,t),nt(Fi,pc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nm(e,t)}ut(Fi),nt(Fi,e)}function Qa(){ut(Fi),ut($u),ut(Gu)}function sE(t){lo(Gu.current);var e=lo(Fi.current),n=Nm(e,t.type);e!==n&&(nt($u,t),nt(Fi,n))}function My(t){$u.current===t&&(ut(Fi),ut($u))}var ft=Os(0);function Ad(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vp=[];function Oy(){for(var t=0;t<Vp.length;t++)Vp[t]._workInProgressVersionPrimary=null;Vp.length=0}var qh=kr.ReactCurrentDispatcher,jp=kr.ReactCurrentBatchConfig,xo=0,mt=null,Nt=null,zt=null,bd=!1,vu=!1,qu=0,Wk=0;function Yt(){throw Error(X(321))}function Dy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pi(t[n],e[n]))return!1;return!0}function Vy(t,e,n,i,r,o){if(xo=o,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qh.current=t===null||t.memoizedState===null?Zk:Kk,t=n(i,r),vu){o=0;do{if(vu=!1,qu=0,25<=o)throw Error(X(301));o+=1,zt=Nt=null,e.updateQueue=null,qh.current=Qk,t=n(i,r)}while(vu)}if(qh.current=kd,e=Nt!==null&&Nt.next!==null,xo=0,zt=Nt=mt=null,bd=!1,e)throw Error(X(300));return t}function jy(){var t=qu!==0;return qu=0,t}function Mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?mt.memoizedState=zt=t:zt=zt.next=t,zt}function ri(){if(Nt===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=zt===null?mt.memoizedState:zt.next;if(e!==null)zt=e,Nt=t;else{if(t===null)throw Error(X(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},zt===null?mt.memoizedState=zt=t:zt=zt.next=t}return zt}function Zu(t,e){return typeof e=="function"?e(t):e}function Fp(t){var e=ri(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=Nt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((xo&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,mt.lanes|=m,To|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,Pi(i,e.memoizedState)||(Tn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,mt.lanes|=o,To|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bp(t){var e=ri(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Pi(o,e.memoizedState)||(Tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function oE(){}function aE(t,e){var n=mt,i=ri(),r=e(),o=!Pi(i.memoizedState,r);if(o&&(i.memoizedState=r,Tn=!0),i=i.queue,Fy(cE.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,Ku(9,uE.bind(null,n,i,r,e),void 0,null),Ut===null)throw Error(X(349));xo&30||lE(n,e,r)}return r}function lE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uE(t,e,n,i){e.value=n,e.getSnapshot=i,hE(e)&&dE(t)}function cE(t,e,n){return n(function(){hE(e)&&dE(t)})}function hE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pi(t,n)}catch{return!0}}function dE(t){var e=Tr(t,1);e!==null&&Ei(e,t,1,-1)}function E0(t){var e=Mi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:t},e.queue=t,t=t.dispatch=qk.bind(null,mt,t),[e.memoizedState,t]}function Ku(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function fE(){return ri().memoizedState}function Zh(t,e,n,i){var r=Mi();mt.flags|=t,r.memoizedState=Ku(1|e,n,void 0,i===void 0?null:i)}function Tf(t,e,n,i){var r=ri();i=i===void 0?null:i;var o=void 0;if(Nt!==null){var a=Nt.memoizedState;if(o=a.destroy,i!==null&&Dy(i,a.deps)){r.memoizedState=Ku(e,n,o,i);return}}mt.flags|=t,r.memoizedState=Ku(1|e,n,o,i)}function P0(t,e){return Zh(8390656,8,t,e)}function Fy(t,e){return Tf(2048,8,t,e)}function pE(t,e){return Tf(4,2,t,e)}function mE(t,e){return Tf(4,4,t,e)}function gE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yE(t,e,n){return n=n!=null?n.concat([t]):null,Tf(4,4,gE.bind(null,e,t),n)}function By(){}function _E(t,e){var n=ri();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Dy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function vE(t,e){var n=ri();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Dy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function wE(t,e,n){return xo&21?(Pi(n,e)||(n=ST(),mt.lanes|=n,To|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function $k(t,e){var n=Je;Je=n!==0&&4>n?n:4,t(!0);var i=jp.transition;jp.transition={};try{t(!1),e()}finally{Je=n,jp.transition=i}}function xE(){return ri().memoizedState}function Gk(t,e,n){var i=hs(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},TE(t))EE(e,n);else if(n=iE(t,e,n,i),n!==null){var r=fn();Ei(n,t,i,r),PE(n,e,i)}}function qk(t,e,n){var i=hs(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(TE(t))EE(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,Pi(u,a)){var h=e.interleaved;h===null?(r.next=r,Ry(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=iE(t,e,r,i),n!==null&&(r=fn(),Ei(n,t,i,r),PE(n,e,i))}}function TE(t){var e=t.alternate;return t===mt||e!==null&&e===mt}function EE(t,e){vu=bd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,yy(t,n)}}var kd={readContext:ii,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},Zk={readContext:ii,useCallback:function(t,e){return Mi().memoizedState=[t,e===void 0?null:e],t},useContext:ii,useEffect:P0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zh(4194308,4,gE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zh(4,2,t,e)},useMemo:function(t,e){var n=Mi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Mi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Gk.bind(null,mt,t),[i.memoizedState,t]},useRef:function(t){var e=Mi();return t={current:t},e.memoizedState=t},useState:E0,useDebugValue:By,useDeferredValue:function(t){return Mi().memoizedState=t},useTransition:function(){var t=E0(!1),e=t[0];return t=$k.bind(null,t[1]),Mi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=mt,r=Mi();if(ct){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ut===null)throw Error(X(349));xo&30||lE(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,P0(cE.bind(null,i,o,t),[t]),i.flags|=2048,Ku(9,uE.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Mi(),e=Ut.identifierPrefix;if(ct){var n=dr,i=hr;n=(i&~(1<<32-Ti(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=qu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Wk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Kk={readContext:ii,useCallback:_E,useContext:ii,useEffect:Fy,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:mE,useMemo:vE,useReducer:Fp,useRef:fE,useState:function(){return Fp(Zu)},useDebugValue:By,useDeferredValue:function(t){var e=ri();return wE(e,Nt.memoizedState,t)},useTransition:function(){var t=Fp(Zu)[0],e=ri().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:aE,useId:xE,unstable_isNewReconciler:!1},Qk={readContext:ii,useCallback:_E,useContext:ii,useEffect:Fy,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:mE,useMemo:vE,useReducer:Bp,useRef:fE,useState:function(){return Bp(Zu)},useDebugValue:By,useDeferredValue:function(t){var e=ri();return Nt===null?e.memoizedState=t:wE(e,Nt.memoizedState,t)},useTransition:function(){var t=Bp(Zu)[0],e=ri().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:aE,useId:xE,unstable_isNewReconciler:!1};function mi(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ef={isMounted:function(t){return(t=t._reactInternals)?ko(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=fn(),r=hs(t),o=gr(i,r);o.payload=e,n!=null&&(o.callback=n),e=us(t,o,r),e!==null&&(Ei(e,t,r,i),Gh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=fn(),r=hs(t),o=gr(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=us(t,o,r),e!==null&&(Ei(e,t,r,i),Gh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),i=hs(t),r=gr(n,i);r.tag=2,e!=null&&(r.callback=e),e=us(t,r,i),e!==null&&(Ei(e,t,i,n),Gh(e,t,i))}};function S0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!zu(n,i)||!zu(r,o):!0}function SE(t,e,n){var i=!1,r=Ps,o=e.contextType;return typeof o=="object"&&o!==null?o=ii(o):(r=Pn(e)?vo:sn.current,i=e.contextTypes,o=(i=i!=null)?qa(t,r):Ps),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ef,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function C0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ef.enqueueReplaceState(e,e.state,null)}function eg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ny(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=ii(o):(o=Pn(e)?vo:sn.current,r.context=qa(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Jm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ef.enqueueReplaceState(r,r.state,null),Id(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ya(t,e){try{var n="",i=e;do n+=Pb(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function zp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yk=typeof WeakMap=="function"?WeakMap:Map;function CE(t,e,n){n=gr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Nd||(Nd=!0,hg=i),tg(t,e)},n}function IE(t,e,n){n=gr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){tg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){tg(t,e),typeof i!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function I0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Yk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=hR.bind(null,t,e,n),e.then(t,t))}function A0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gr(-1,1),e.tag=2,us(n,e,1))),n.lanes|=1),t)}var Xk=kr.ReactCurrentOwner,Tn=!1;function dn(t,e,n,i){e.child=t===null?nE(e,null,n,i):Ka(e,t.child,n,i)}function k0(t,e,n,i,r){n=n.render;var o=e.ref;return ja(e,r),i=Vy(t,e,n,i,o,r),n=jy(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Er(t,e,r)):(ct&&n&&Sy(e),e.flags|=1,dn(t,e,i,r),e.child)}function R0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Zy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,AE(t,e,o,i,r)):(t=Xh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:zu,n(a,i)&&t.ref===e.ref)return Er(t,e,r)}return e.flags|=1,t=ds(o,i),t.ref=e.ref,t.return=e,e.child=t}function AE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(zu(o,i)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,Er(t,e,r)}return ng(t,e,n,i,r)}function bE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Aa,kn),kn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(Aa,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,nt(Aa,kn),kn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,nt(Aa,kn),kn|=i;return dn(t,e,r,n),e.child}function kE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ng(t,e,n,i,r){var o=Pn(n)?vo:sn.current;return o=qa(e,o),ja(e,r),n=Vy(t,e,n,i,o,r),i=jy(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Er(t,e,r)):(ct&&i&&Sy(e),e.flags|=1,dn(t,e,n,r),e.child)}function N0(t,e,n,i,r){if(Pn(n)){var o=!0;Td(e)}else o=!1;if(ja(e,r),e.stateNode===null)Kh(t,e),SE(e,n,i),eg(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=ii(f):(f=Pn(n)?vo:sn.current,f=qa(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&C0(e,a,i,f),qr=!1;var _=e.memoizedState;a.state=_,Id(e,i,a,r),h=e.memoizedState,u!==i||_!==h||En.current||qr?(typeof m=="function"&&(Jm(e,n,m,i),h=e.memoizedState),(u=qr||S0(e,n,u,i,_,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,rE(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:mi(e.type,u),a.props=f,g=e.pendingProps,_=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=ii(h):(h=Pn(n)?vo:sn.current,h=qa(e,h));var E=n.getDerivedStateFromProps;(m=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==h)&&C0(e,a,i,h),qr=!1,_=e.memoizedState,a.state=_,Id(e,i,a,r);var R=e.memoizedState;u!==g||_!==R||En.current||qr?(typeof E=="function"&&(Jm(e,n,E,i),R=e.memoizedState),(f=qr||S0(e,n,f,i,_,R,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,R,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,R,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=R),a.props=i,a.state=R,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return ig(t,e,n,i,o,r)}function ig(t,e,n,i,r,o){kE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&y0(e,n,!1),Er(t,e,o);i=e.stateNode,Xk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ka(e,t.child,null,o),e.child=Ka(e,null,u,o)):dn(t,e,u,o),e.memoizedState=i.state,r&&y0(e,n,!0),e.child}function RE(t){var e=t.stateNode;e.pendingContext?g0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&g0(t,e.context,!1),Ly(t,e.containerInfo)}function L0(t,e,n,i,r){return Za(),Iy(r),e.flags|=256,dn(t,e,n,i),e.child}var rg={dehydrated:null,treeContext:null,retryLane:0};function sg(t){return{baseLanes:t,cachePool:null,transitions:null}}function NE(t,e,n){var i=e.pendingProps,r=ft.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),nt(ft,r&1),t===null)return Ym(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Cf(a,i,0,null),t=fo(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=sg(n),e.memoizedState=rg,t):zy(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Jk(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=ds(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=ds(u,o):(o=fo(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?sg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=rg,i}return o=t.child,t=o.sibling,i=ds(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function zy(t,e){return e=Cf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Th(t,e,n,i){return i!==null&&Iy(i),Ka(e,t.child,null,n),t=zy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Jk(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=zp(Error(X(422))),Th(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Cf({mode:"visible",children:i.children},r,0,null),o=fo(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ka(e,t.child,null,a),e.child.memoizedState=sg(a),e.memoizedState=rg,o);if(!(e.mode&1))return Th(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(X(419)),i=zp(o,i,void 0),Th(t,e,a,i)}if(u=(a&t.childLanes)!==0,Tn||u){if(i=Ut,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Tr(t,r),Ei(i,t,r,-1))}return qy(),i=zp(Error(X(421))),Th(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=dR.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Nn=ls(r.nextSibling),Ln=e,ct=!0,yi=null,t!==null&&(Yn[Xn++]=hr,Yn[Xn++]=dr,Yn[Xn++]=wo,hr=t.id,dr=t.overflow,wo=e),e=zy(e,i.children),e.flags|=4096,e)}function M0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Xm(t.return,e,n)}function Up(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function LE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(dn(t,e,i.children,n),i=ft.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M0(t,n,e);else if(t.tag===19)M0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(nt(ft,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ad(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Up(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ad(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Up(e,!0,n,null,o);break;case"together":Up(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),To|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=ds(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ds(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eR(t,e,n){switch(e.tag){case 3:RE(e),Za();break;case 5:sE(e);break;case 1:Pn(e.type)&&Td(e);break;case 4:Ly(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;nt(Sd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(nt(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?NE(t,e,n):(nt(ft,ft.current&1),t=Er(t,e,n),t!==null?t.sibling:null);nt(ft,ft.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return LE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),nt(ft,ft.current),i)break;return null;case 22:case 23:return e.lanes=0,bE(t,e,n)}return Er(t,e,n)}var ME,og,OE,DE;ME=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};og=function(){};OE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,lo(Fi.current);var o=null;switch(n){case"input":r=Am(t,r),i=Am(t,i),o=[];break;case"select":r=yt({},r,{value:void 0}),i=yt({},i,{value:void 0}),o=[];break;case"textarea":r=Rm(t,r),i=Rm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=wd)}Lm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Mu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Mu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&st("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};DE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Jl(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function tR(t,e,n){var i=e.pendingProps;switch(Cy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(e),null;case 1:return Pn(e.type)&&xd(),Xt(e),null;case 3:return i=e.stateNode,Qa(),ut(En),ut(sn),Oy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(wh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yi!==null&&(pg(yi),yi=null))),og(t,e),Xt(e),null;case 5:My(e);var r=lo(Gu.current);if(n=e.type,t!==null&&e.stateNode!=null)OE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Xt(e),null}if(t=lo(Fi.current),wh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Vi]=e,i[Wu]=o,t=(e.mode&1)!==0,n){case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":case"embed":st("load",i);break;case"video":case"audio":for(r=0;r<lu.length;r++)st(lu[r],i);break;case"source":st("error",i);break;case"img":case"image":case"link":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"input":Hv(i,o),st("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},st("invalid",i);break;case"textarea":$v(i,o),st("invalid",i)}Lm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&vh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&vh(i.textContent,u,t),r=["children",""+u]):Mu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&st("scroll",i)}switch(n){case"input":hh(i),Wv(i,o,!0);break;case"textarea":hh(i),Gv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=wd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Vi]=e,t[Wu]=i,ME(t,e,!1,!1),e.stateNode=t;e:{switch(a=Mm(n,i),n){case"dialog":st("cancel",t),st("close",t),r=i;break;case"iframe":case"object":case"embed":st("load",t),r=i;break;case"video":case"audio":for(r=0;r<lu.length;r++)st(lu[r],t);r=i;break;case"source":st("error",t),r=i;break;case"img":case"image":case"link":st("error",t),st("load",t),r=i;break;case"details":st("toggle",t),r=i;break;case"input":Hv(t,i),r=Am(t,i),st("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=yt({},i,{value:void 0}),st("invalid",t);break;case"textarea":$v(t,i),r=Rm(t,i),st("invalid",t);break;default:r=i}Lm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?fT(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&hT(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Ou(t,h):typeof h=="number"&&Ou(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Mu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&st("scroll",t):h!=null&&hy(t,o,h,a))}switch(n){case"input":hh(t),Wv(t,i,!1);break;case"textarea":hh(t),Gv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Es(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ma(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ma(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=wd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xt(e),null;case 6:if(t&&e.stateNode!=null)DE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=lo(Gu.current),lo(Fi.current),wh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Vi]=e,(o=i.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:vh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Vi]=e,e.stateNode=i}return Xt(e),null;case 13:if(ut(ft),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&Nn!==null&&e.mode&1&&!(e.flags&128))eE(),Za(),e.flags|=98560,o=!1;else if(o=wh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[Vi]=e}else Za(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xt(e),o=!1}else yi!==null&&(pg(yi),yi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?Mt===0&&(Mt=3):qy())),e.updateQueue!==null&&(e.flags|=4),Xt(e),null);case 4:return Qa(),og(t,e),t===null&&Uu(e.stateNode.containerInfo),Xt(e),null;case 10:return ky(e.type._context),Xt(e),null;case 17:return Pn(e.type)&&xd(),Xt(e),null;case 19:if(ut(ft),o=e.memoizedState,o===null)return Xt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Jl(o,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ad(t),a!==null){for(e.flags|=128,Jl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(ft,ft.current&1|2),e.child}t=t.sibling}o.tail!==null&&Et()>Xa&&(e.flags|=128,i=!0,Jl(o,!1),e.lanes=4194304)}else{if(!i)if(t=Ad(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ct)return Xt(e),null}else 2*Et()-o.renderingStartTime>Xa&&n!==1073741824&&(e.flags|=128,i=!0,Jl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Et(),e.sibling=null,n=ft.current,nt(ft,i?n&1|2:n&1),e):(Xt(e),null);case 22:case 23:return Gy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?kn&1073741824&&(Xt(e),e.subtreeFlags&6&&(e.flags|=8192)):Xt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function nR(t,e){switch(Cy(e),e.tag){case 1:return Pn(e.type)&&xd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qa(),ut(En),ut(sn),Oy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return My(e),null;case 13:if(ut(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Za()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(ft),null;case 4:return Qa(),null;case 10:return ky(e.type._context),null;case 22:case 23:return Gy(),null;case 24:return null;default:return null}}var Eh=!1,nn=!1,iR=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Ia(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){wt(t,e,i)}else n.current=null}function ag(t,e,n){try{n()}catch(i){wt(t,e,i)}}var O0=!1;function rR(t,e){if(Wm=yd,t=zT(),Py(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var E;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(E=g.firstChild)!==null;)_=g,g=E;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(h=a),(E=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=E}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for($m={focusedElem:t,selectionRange:n},yd=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var k=R.memoizedProps,V=R.memoizedState,A=e.stateNode,T=A.getSnapshotBeforeUpdate(e.elementType===e.type?k:mi(e.type,k),V);A.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(B){wt(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return R=O0,O0=!1,R}function wu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&ag(e,n,o)}r=r.next}while(r!==i)}}function Pf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function lg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function VE(t){var e=t.alternate;e!==null&&(t.alternate=null,VE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vi],delete e[Wu],delete e[Zm],delete e[Bk],delete e[zk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jE(t){return t.tag===5||t.tag===3||t.tag===4}function D0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ug(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wd));else if(i!==4&&(t=t.child,t!==null))for(ug(t,e,n),t=t.sibling;t!==null;)ug(t,e,n),t=t.sibling}function cg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(cg(t,e,n),t=t.sibling;t!==null;)cg(t,e,n),t=t.sibling}var Ht=null,gi=!1;function Ur(t,e,n){for(n=n.child;n!==null;)FE(t,e,n),n=n.sibling}function FE(t,e,n){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(gf,n)}catch{}switch(n.tag){case 5:nn||Ia(n,e);case 6:var i=Ht,r=gi;Ht=null,Ur(t,e,n),Ht=i,gi=r,Ht!==null&&(gi?(t=Ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(gi?(t=Ht,n=n.stateNode,t.nodeType===8?Op(t.parentNode,n):t.nodeType===1&&Op(t,n),Fu(t)):Op(Ht,n.stateNode));break;case 4:i=Ht,r=gi,Ht=n.stateNode.containerInfo,gi=!0,Ur(t,e,n),Ht=i,gi=r;break;case 0:case 11:case 14:case 15:if(!nn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ag(n,e,a),r=r.next}while(r!==i)}Ur(t,e,n);break;case 1:if(!nn&&(Ia(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){wt(n,e,u)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(nn=(i=nn)||n.memoizedState!==null,Ur(t,e,n),nn=i):Ur(t,e,n);break;default:Ur(t,e,n)}}function V0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iR),e.forEach(function(i){var r=fR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function pi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ht=u.stateNode,gi=!1;break e;case 3:Ht=u.stateNode.containerInfo,gi=!0;break e;case 4:Ht=u.stateNode.containerInfo,gi=!0;break e}u=u.return}if(Ht===null)throw Error(X(160));FE(o,a,r),Ht=null,gi=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){wt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BE(e,t),e=e.sibling}function BE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pi(e,t),Li(t),i&4){try{wu(3,t,t.return),Pf(3,t)}catch(k){wt(t,t.return,k)}try{wu(5,t,t.return)}catch(k){wt(t,t.return,k)}}break;case 1:pi(e,t),Li(t),i&512&&n!==null&&Ia(n,n.return);break;case 5:if(pi(e,t),Li(t),i&512&&n!==null&&Ia(n,n.return),t.flags&32){var r=t.stateNode;try{Ou(r,"")}catch(k){wt(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&lT(r,o),Mm(u,a);var f=Mm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?fT(r,g):m==="dangerouslySetInnerHTML"?hT(r,g):m==="children"?Ou(r,g):hy(r,m,g,f)}switch(u){case"input":bm(r,o);break;case"textarea":uT(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?Ma(r,!!o.multiple,E,!1):_!==!!o.multiple&&(o.defaultValue!=null?Ma(r,!!o.multiple,o.defaultValue,!0):Ma(r,!!o.multiple,o.multiple?[]:"",!1))}r[Wu]=o}catch(k){wt(t,t.return,k)}}break;case 6:if(pi(e,t),Li(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){wt(t,t.return,k)}}break;case 3:if(pi(e,t),Li(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Fu(e.containerInfo)}catch(k){wt(t,t.return,k)}break;case 4:pi(e,t),Li(t);break;case 13:pi(e,t),Li(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Wy=Et())),i&4&&V0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(nn=(f=nn)||m,pi(e,t),nn=f):pi(e,t),Li(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(ue=t,m=t.child;m!==null;){for(g=ue=m;ue!==null;){switch(_=ue,E=_.child,_.tag){case 0:case 11:case 14:case 15:wu(4,_,_.return);break;case 1:Ia(_,_.return);var R=_.stateNode;if(typeof R.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(k){wt(i,n,k)}}break;case 5:Ia(_,_.return);break;case 22:if(_.memoizedState!==null){F0(g);continue}}E!==null?(E.return=_,ue=E):F0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=dT("display",a))}catch(k){wt(t,t.return,k)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){wt(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:pi(e,t),Li(t),i&4&&V0(t);break;case 21:break;default:pi(e,t),Li(t)}}function Li(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jE(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ou(r,""),i.flags&=-33);var o=D0(t);cg(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=D0(t);ug(t,u,a);break;default:throw Error(X(161))}}catch(h){wt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sR(t,e,n){ue=t,zE(t)}function zE(t,e,n){for(var i=(t.mode&1)!==0;ue!==null;){var r=ue,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Eh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||nn;u=Eh;var f=nn;if(Eh=a,(nn=h)&&!f)for(ue=r;ue!==null;)a=ue,h=a.child,a.tag===22&&a.memoizedState!==null?B0(r):h!==null?(h.return=a,ue=h):B0(r);for(;o!==null;)ue=o,zE(o),o=o.sibling;ue=r,Eh=u,nn=f}j0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ue=o):j0(t)}}function j0(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||Pf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!nn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:mi(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&T0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}T0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Fu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}nn||e.flags&512&&lg(e)}catch(_){wt(e,e.return,_)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function F0(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function B0(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pf(4,e)}catch(h){wt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){wt(e,r,h)}}var o=e.return;try{lg(e)}catch(h){wt(e,o,h)}break;case 5:var a=e.return;try{lg(e)}catch(h){wt(e,a,h)}}}catch(h){wt(e,e.return,h)}if(e===t){ue=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ue=u;break}ue=e.return}}var oR=Math.ceil,Rd=kr.ReactCurrentDispatcher,Uy=kr.ReactCurrentOwner,ni=kr.ReactCurrentBatchConfig,$e=0,Ut=null,kt=null,Gt=0,kn=0,Aa=Os(0),Mt=0,Qu=null,To=0,Sf=0,Hy=0,xu=null,xn=null,Wy=0,Xa=1/0,ur=null,Nd=!1,hg=null,cs=null,Ph=!1,ns=null,Ld=0,Tu=0,dg=null,Qh=-1,Yh=0;function fn(){return $e&6?Et():Qh!==-1?Qh:Qh=Et()}function hs(t){return t.mode&1?$e&2&&Gt!==0?Gt&-Gt:Hk.transition!==null?(Yh===0&&(Yh=ST()),Yh):(t=Je,t!==0||(t=window.event,t=t===void 0?16:NT(t.type)),t):1}function Ei(t,e,n,i){if(50<Tu)throw Tu=0,dg=null,Error(X(185));hc(t,n,i),(!($e&2)||t!==Ut)&&(t===Ut&&(!($e&2)&&(Sf|=n),Mt===4&&Qr(t,Gt)),Sn(t,i),n===1&&$e===0&&!(e.mode&1)&&(Xa=Et()+500,xf&&Ds()))}function Sn(t,e){var n=t.callbackNode;Hb(t,e);var i=gd(t,t===Ut?Gt:0);if(i===0)n!==null&&Kv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Kv(n),e===1)t.tag===0?Uk(z0.bind(null,t)):YT(z0.bind(null,t)),jk(function(){!($e&6)&&Ds()}),n=null;else{switch(CT(i)){case 1:n=gy;break;case 4:n=ET;break;case 16:n=md;break;case 536870912:n=PT;break;default:n=md}n=KE(n,UE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function UE(t,e){if(Qh=-1,Yh=0,$e&6)throw Error(X(327));var n=t.callbackNode;if(Fa()&&t.callbackNode!==n)return null;var i=gd(t,t===Ut?Gt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Md(t,i);else{e=i;var r=$e;$e|=2;var o=WE();(Ut!==t||Gt!==e)&&(ur=null,Xa=Et()+500,ho(t,e));do try{uR();break}catch(u){HE(t,u)}while(!0);by(),Rd.current=o,$e=r,kt!==null?e=0:(Ut=null,Gt=0,e=Mt)}if(e!==0){if(e===2&&(r=Fm(t),r!==0&&(i=r,e=fg(t,r))),e===1)throw n=Qu,ho(t,0),Qr(t,i),Sn(t,Et()),n;if(e===6)Qr(t,i);else{if(r=t.current.alternate,!(i&30)&&!aR(r)&&(e=Md(t,i),e===2&&(o=Fm(t),o!==0&&(i=o,e=fg(t,o))),e===1))throw n=Qu,ho(t,0),Qr(t,i),Sn(t,Et()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:eo(t,xn,ur);break;case 3:if(Qr(t,i),(i&130023424)===i&&(e=Wy+500-Et(),10<e)){if(gd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){fn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=qm(eo.bind(null,t,xn,ur),e);break}eo(t,xn,ur);break;case 4:if(Qr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-Ti(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=Et()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*oR(i/1960))-i,10<i){t.timeoutHandle=qm(eo.bind(null,t,xn,ur),i);break}eo(t,xn,ur);break;case 5:eo(t,xn,ur);break;default:throw Error(X(329))}}}return Sn(t,Et()),t.callbackNode===n?UE.bind(null,t):null}function fg(t,e){var n=xu;return t.current.memoizedState.isDehydrated&&(ho(t,e).flags|=256),t=Md(t,e),t!==2&&(e=xn,xn=n,e!==null&&pg(e)),t}function pg(t){xn===null?xn=t:xn.push.apply(xn,t)}function aR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Pi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~Hy,e&=~Sf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ti(e),i=1<<n;t[n]=-1,e&=~i}}function z0(t){if($e&6)throw Error(X(327));Fa();var e=gd(t,0);if(!(e&1))return Sn(t,Et()),null;var n=Md(t,e);if(t.tag!==0&&n===2){var i=Fm(t);i!==0&&(e=i,n=fg(t,i))}if(n===1)throw n=Qu,ho(t,0),Qr(t,e),Sn(t,Et()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,eo(t,xn,ur),Sn(t,Et()),null}function $y(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(Xa=Et()+500,xf&&Ds())}}function Eo(t){ns!==null&&ns.tag===0&&!($e&6)&&Fa();var e=$e;$e|=1;var n=ni.transition,i=Je;try{if(ni.transition=null,Je=1,t)return t()}finally{Je=i,ni.transition=n,$e=e,!($e&6)&&Ds()}}function Gy(){kn=Aa.current,ut(Aa)}function ho(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Vk(n)),kt!==null)for(n=kt.return;n!==null;){var i=n;switch(Cy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&xd();break;case 3:Qa(),ut(En),ut(sn),Oy();break;case 5:My(i);break;case 4:Qa();break;case 13:ut(ft);break;case 19:ut(ft);break;case 10:ky(i.type._context);break;case 22:case 23:Gy()}n=n.return}if(Ut=t,kt=t=ds(t.current,null),Gt=kn=e,Mt=0,Qu=null,Hy=Sf=To=0,xn=xu=null,ao!==null){for(e=0;e<ao.length;e++)if(n=ao[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}ao=null}return t}function HE(t,e){do{var n=kt;try{if(by(),qh.current=kd,bd){for(var i=mt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}bd=!1}if(xo=0,zt=Nt=mt=null,vu=!1,qu=0,Uy.current=null,n===null||n.return===null){Mt=1,Qu=e,kt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Gt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=A0(a);if(E!==null){E.flags&=-257,b0(E,a,u,o,e),E.mode&1&&I0(o,f,e),e=E,h=f;var R=e.updateQueue;if(R===null){var k=new Set;k.add(h),e.updateQueue=k}else R.add(h);break e}else{if(!(e&1)){I0(o,f,e),qy();break e}h=Error(X(426))}}else if(ct&&u.mode&1){var V=A0(a);if(V!==null){!(V.flags&65536)&&(V.flags|=256),b0(V,a,u,o,e),Iy(Ya(h,u));break e}}o=h=Ya(h,u),Mt!==4&&(Mt=2),xu===null?xu=[o]:xu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var A=CE(o,h,e);x0(o,A);break e;case 1:u=h;var T=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(cs===null||!cs.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=IE(o,u,e);x0(o,B);break e}}o=o.return}while(o!==null)}GE(n)}catch(W){e=W,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function WE(){var t=Rd.current;return Rd.current=kd,t===null?kd:t}function qy(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Ut===null||!(To&268435455)&&!(Sf&268435455)||Qr(Ut,Gt)}function Md(t,e){var n=$e;$e|=2;var i=WE();(Ut!==t||Gt!==e)&&(ur=null,ho(t,e));do try{lR();break}catch(r){HE(t,r)}while(!0);if(by(),$e=n,Rd.current=i,kt!==null)throw Error(X(261));return Ut=null,Gt=0,Mt}function lR(){for(;kt!==null;)$E(kt)}function uR(){for(;kt!==null&&!Mb();)$E(kt)}function $E(t){var e=ZE(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?GE(t):kt=e,Uy.current=null}function GE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nR(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,kt=null;return}}else if(n=tR(n,e,kn),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Mt===0&&(Mt=5)}function eo(t,e,n){var i=Je,r=ni.transition;try{ni.transition=null,Je=1,cR(t,e,n,i)}finally{ni.transition=r,Je=i}return null}function cR(t,e,n,i){do Fa();while(ns!==null);if($e&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Wb(t,o),t===Ut&&(kt=Ut=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ph||(Ph=!0,KE(md,function(){return Fa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ni.transition,ni.transition=null;var a=Je;Je=1;var u=$e;$e|=4,Uy.current=null,rR(t,n),BE(n,t),kk($m),yd=!!Wm,$m=Wm=null,t.current=n,sR(n),Ob(),$e=u,Je=a,ni.transition=o}else t.current=n;if(Ph&&(Ph=!1,ns=t,Ld=r),o=t.pendingLanes,o===0&&(cs=null),jb(n.stateNode),Sn(t,Et()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Nd)throw Nd=!1,t=hg,hg=null,t;return Ld&1&&t.tag!==0&&Fa(),o=t.pendingLanes,o&1?t===dg?Tu++:(Tu=0,dg=t):Tu=0,Ds(),null}function Fa(){if(ns!==null){var t=CT(Ld),e=ni.transition,n=Je;try{if(ni.transition=null,Je=16>t?16:t,ns===null)var i=!1;else{if(t=ns,ns=null,Ld=0,$e&6)throw Error(X(331));var r=$e;for($e|=4,ue=t.current;ue!==null;){var o=ue,a=o.child;if(ue.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(ue=f;ue!==null;){var m=ue;switch(m.tag){case 0:case 11:case 15:wu(8,m,o)}var g=m.child;if(g!==null)g.return=m,ue=g;else for(;ue!==null;){m=ue;var _=m.sibling,E=m.return;if(VE(m),m===f){ue=null;break}if(_!==null){_.return=E,ue=_;break}ue=E}}}var R=o.alternate;if(R!==null){var k=R.child;if(k!==null){R.child=null;do{var V=k.sibling;k.sibling=null,k=V}while(k!==null)}}ue=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ue=a;else e:for(;ue!==null;){if(o=ue,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wu(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,ue=A;break e}ue=o.return}}var T=t.current;for(ue=T;ue!==null;){a=ue;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,ue=S;else e:for(a=T;ue!==null;){if(u=ue,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Pf(9,u)}}catch(W){wt(u,u.return,W)}if(u===a){ue=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,ue=B;break e}ue=u.return}}if($e=r,Ds(),ji&&typeof ji.onPostCommitFiberRoot=="function")try{ji.onPostCommitFiberRoot(gf,t)}catch{}i=!0}return i}finally{Je=n,ni.transition=e}}return!1}function U0(t,e,n){e=Ya(n,e),e=CE(t,e,1),t=us(t,e,1),e=fn(),t!==null&&(hc(t,1,e),Sn(t,e))}function wt(t,e,n){if(t.tag===3)U0(t,t,n);else for(;e!==null;){if(e.tag===3){U0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(cs===null||!cs.has(i))){t=Ya(n,t),t=IE(e,t,1),e=us(e,t,1),t=fn(),e!==null&&(hc(e,1,t),Sn(e,t));break}}e=e.return}}function hR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&n,Ut===t&&(Gt&n)===n&&(Mt===4||Mt===3&&(Gt&130023424)===Gt&&500>Et()-Wy?ho(t,0):Hy|=n),Sn(t,e)}function qE(t,e){e===0&&(t.mode&1?(e=ph,ph<<=1,!(ph&130023424)&&(ph=4194304)):e=1);var n=fn();t=Tr(t,e),t!==null&&(hc(t,e,n),Sn(t,n))}function dR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qE(t,n)}function fR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),qE(t,n)}var ZE;ZE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,eR(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,ct&&e.flags&1048576&&XT(e,Pd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Kh(t,e),t=e.pendingProps;var r=qa(e,sn.current);ja(e,n),r=Vy(null,e,i,t,r,n);var o=jy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pn(i)?(o=!0,Td(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ny(e),r.updater=Ef,e.stateNode=r,r._reactInternals=e,eg(e,i,t,n),e=ig(null,e,i,!0,o,n)):(e.tag=0,ct&&o&&Sy(e),dn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Kh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=mR(i),t=mi(i,t),r){case 0:e=ng(null,e,i,t,n);break e;case 1:e=N0(null,e,i,t,n);break e;case 11:e=k0(null,e,i,t,n);break e;case 14:e=R0(null,e,i,mi(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mi(i,r),ng(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mi(i,r),N0(t,e,i,r,n);case 3:e:{if(RE(e),t===null)throw Error(X(387));i=e.pendingProps,o=e.memoizedState,r=o.element,rE(t,e),Id(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Ya(Error(X(423)),e),e=L0(t,e,i,n,r);break e}else if(i!==r){r=Ya(Error(X(424)),e),e=L0(t,e,i,n,r);break e}else for(Nn=ls(e.stateNode.containerInfo.firstChild),Ln=e,ct=!0,yi=null,n=nE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Za(),i===r){e=Er(t,e,n);break e}dn(t,e,i,n)}e=e.child}return e;case 5:return sE(e),t===null&&Ym(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Gm(i,r)?a=null:o!==null&&Gm(i,o)&&(e.flags|=32),kE(t,e),dn(t,e,a,n),e.child;case 6:return t===null&&Ym(e),null;case 13:return NE(t,e,n);case 4:return Ly(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ka(e,null,i,n):dn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mi(i,r),k0(t,e,i,r,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,nt(Sd,i._currentValue),i._currentValue=a,o!==null)if(Pi(o.value,a)){if(o.children===r.children&&!En.current){e=Er(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=gr(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Xm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Xm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}dn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ja(e,n),r=ii(r),i=i(r),e.flags|=1,dn(t,e,i,n),e.child;case 14:return i=e.type,r=mi(i,e.pendingProps),r=mi(i.type,r),R0(t,e,i,r,n);case 15:return AE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mi(i,r),Kh(t,e),e.tag=1,Pn(i)?(t=!0,Td(e)):t=!1,ja(e,n),SE(e,i,r),eg(e,i,r,n),ig(null,e,i,!0,t,n);case 19:return LE(t,e,n);case 22:return bE(t,e,n)}throw Error(X(156,e.tag))};function KE(t,e){return TT(t,e)}function pR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(t,e,n,i){return new pR(t,e,n,i)}function Zy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mR(t){if(typeof t=="function")return Zy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fy)return 11;if(t===py)return 14}return 2}function ds(t,e){var n=t.alternate;return n===null?(n=ti(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Zy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case _a:return fo(n.children,r,o,e);case dy:a=8,r|=8;break;case Pm:return t=ti(12,n,e,r|2),t.elementType=Pm,t.lanes=o,t;case Sm:return t=ti(13,n,e,r),t.elementType=Sm,t.lanes=o,t;case Cm:return t=ti(19,n,e,r),t.elementType=Cm,t.lanes=o,t;case sT:return Cf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iT:a=10;break e;case rT:a=9;break e;case fy:a=11;break e;case py:a=14;break e;case Gr:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=ti(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function fo(t,e,n,i){return t=ti(7,t,i,e),t.lanes=n,t}function Cf(t,e,n,i){return t=ti(22,t,i,e),t.elementType=sT,t.lanes=n,t.stateNode={isHidden:!1},t}function Hp(t,e,n){return t=ti(6,t,null,e),t.lanes=n,t}function Wp(t,e,n){return e=ti(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gR(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pp(0),this.expirationTimes=Pp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ky(t,e,n,i,r,o,a,u,h){return t=new gR(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ti(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ny(o),t}function yR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ya,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function QE(t){if(!t)return Ps;t=t._reactInternals;e:{if(ko(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Pn(n))return QT(t,n,e)}return e}function YE(t,e,n,i,r,o,a,u,h){return t=Ky(n,i,!0,t,r,o,a,u,h),t.context=QE(null),n=t.current,i=fn(),r=hs(n),o=gr(i,r),o.callback=e??null,us(n,o,r),t.current.lanes=r,hc(t,r,i),Sn(t,i),t}function If(t,e,n,i){var r=e.current,o=fn(),a=hs(r);return n=QE(n),e.context===null?e.context=n:e.pendingContext=n,e=gr(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=us(r,e,a),t!==null&&(Ei(t,r,a,o),Gh(t,r,a)),a}function Od(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function H0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qy(t,e){H0(t,e),(t=t.alternate)&&H0(t,e)}function _R(){return null}var XE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yy(t){this._internalRoot=t}Af.prototype.render=Yy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));If(t,e,null,null)};Af.prototype.unmount=Yy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Eo(function(){If(null,t,null,null)}),e[xr]=null}};function Af(t){this._internalRoot=t}Af.prototype.unstable_scheduleHydration=function(t){if(t){var e=bT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kr.length&&e!==0&&e<Kr[n].priority;n++);Kr.splice(n,0,t),n===0&&RT(t)}};function Xy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function W0(){}function vR(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Od(a);o.call(f)}}var a=YE(e,i,t,0,null,!1,!1,"",W0);return t._reactRootContainer=a,t[xr]=a.current,Uu(t.nodeType===8?t.parentNode:t),Eo(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Od(h);u.call(f)}}var h=Ky(t,0,!1,null,null,!1,!1,"",W0);return t._reactRootContainer=h,t[xr]=h.current,Uu(t.nodeType===8?t.parentNode:t),Eo(function(){If(e,h,n,i)}),h}function kf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=Od(a);u.call(h)}}If(e,a,t,r)}else a=vR(n,e,t,r,i);return Od(a)}IT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=au(e.pendingLanes);n!==0&&(yy(e,n|1),Sn(e,Et()),!($e&6)&&(Xa=Et()+500,Ds()))}break;case 13:Eo(function(){var i=Tr(t,1);if(i!==null){var r=fn();Ei(i,t,1,r)}}),Qy(t,1)}};_y=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=fn();Ei(e,t,134217728,n)}Qy(t,134217728)}};AT=function(t){if(t.tag===13){var e=hs(t),n=Tr(t,e);if(n!==null){var i=fn();Ei(n,t,e,i)}Qy(t,e)}};bT=function(){return Je};kT=function(t,e){var n=Je;try{return Je=t,e()}finally{Je=n}};Dm=function(t,e,n){switch(e){case"input":if(bm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wf(i);if(!r)throw Error(X(90));aT(i),bm(i,r)}}}break;case"textarea":uT(t,n);break;case"select":e=n.value,e!=null&&Ma(t,!!n.multiple,e,!1)}};gT=$y;yT=Eo;var wR={usingClientEntryPoint:!1,Events:[fc,Ta,wf,pT,mT,$y]},eu={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xR={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wT(t),t===null?null:t.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||_R,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{gf=Sh.inject(xR),ji=Sh}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wR;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xy(e))throw Error(X(200));return yR(t,e,null,n)};Vn.createRoot=function(t,e){if(!Xy(t))throw Error(X(299));var n=!1,i="",r=XE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ky(t,1,!1,null,null,n,!1,i,r),t[xr]=e.current,Uu(t.nodeType===8?t.parentNode:t),new Yy(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=wT(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return Eo(t)};Vn.hydrate=function(t,e,n){if(!bf(e))throw Error(X(200));return kf(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!Xy(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=XE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=YE(e,null,t,1,n??null,r,!1,o,a),t[xr]=e.current,Uu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Af(e)};Vn.render=function(t,e,n){if(!bf(e))throw Error(X(200));return kf(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!bf(t))throw Error(X(40));return t._reactRootContainer?(Eo(function(){kf(null,null,t,!1,function(){t._reactRootContainer=null,t[xr]=null})}),!0):!1};Vn.unstable_batchedUpdates=$y;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!bf(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return kf(t,e,n,!1,i)};Vn.version="18.3.1-next-f1338f8080-20240426";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(t){console.error(t)}}JE(),J1.exports=Vn;var TR=J1.exports,$0=TR;Tm.createRoot=$0.createRoot,Tm.hydrateRoot=$0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yu(){return Yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yu.apply(this,arguments)}var is;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(is||(is={}));const G0="popstate";function ER(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=Ro(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),mg("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:Dd(o))}function i(r,o){Rf(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return SR(e,n,i,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PR(){return Math.random().toString(36).substr(2,8)}function q0(t,e){return{usr:t.state,key:t.key,idx:e}}function mg(t,e,n,i){return n===void 0&&(n=null),Yu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ro(e):e,{state:n,key:e&&e.key||i||PR()})}function Dd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ro(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function SR(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=is.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(Yu({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=is.Pop;let V=m(),A=V==null?null:V-f;f=V,h&&h({action:u,location:k.location,delta:A})}function _(V,A){u=is.Push;let T=mg(k.location,V,A);n&&n(T,V),f=m()+1;let S=q0(T,f),B=k.createHref(T);try{a.pushState(S,"",B)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;r.location.assign(B)}o&&h&&h({action:u,location:k.location,delta:1})}function E(V,A){u=is.Replace;let T=mg(k.location,V,A);n&&n(T,V),f=m();let S=q0(T,f),B=k.createHref(T);a.replaceState(S,"",B),o&&h&&h({action:u,location:k.location,delta:0})}function R(V){let A=r.location.origin!=="null"?r.location.origin:r.location.href,T=typeof V=="string"?V:Dd(V);return T=T.replace(/ $/,"%20"),gt(A,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,A)}let k={get action(){return u},get location(){return t(r,a)},listen(V){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(G0,g),h=V,()=>{r.removeEventListener(G0,g),h=null}},createHref(V){return e(r,V)},createURL:R,encodeLocation(V){let A=R(V);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:_,replace:E,go(V){return a.go(V)}};return k}var Z0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Z0||(Z0={}));function CR(t,e,n){return n===void 0&&(n="/"),IR(t,e,n)}function IR(t,e,n,i){let r=typeof e=="string"?Ro(e):e,o=Ja(r.pathname||"/",n);if(o==null)return null;let a=eP(t);AR(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=FR(o);u=VR(a[h],f)}return u}function eP(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(gt(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=fs([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(gt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),eP(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:OR(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of tP(o.path))r(o,a,h)}),e}function tP(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=tP(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function AR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const bR=/^:[\w-]+$/,kR=3,RR=2,NR=1,LR=10,MR=-2,K0=t=>t==="*";function OR(t,e){let n=t.split("/"),i=n.length;return n.some(K0)&&(i+=MR),e&&(i+=RR),n.filter(r=>!K0(r)).reduce((r,o)=>r+(bR.test(o)?kR:o===""?NR:LR),i)}function DR(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function VR(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=gg({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),_=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:fs([o,g.pathname]),pathnameBase:WR(fs([o,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(o=fs([o,g.pathnameBase]))}return a}function gg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=jR(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:_,isOptional:E}=m;if(_==="*"){let k=u[g]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const R=u[g];return E&&!R?f[_]=void 0:f[_]=(R||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function jR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function FR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ja(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const BR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zR=t=>BR.test(t);function UR(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ro(t):t,o;if(n)if(zR(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Rf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=Q0(n.substring(1),"/"):o=Q0(n,e)}else o=e;return{pathname:o,search:$R(i),hash:GR(r)}}function Q0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function $p(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jy(t,e){let n=HR(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function e_(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Ro(t):(r=Yu({},t),gt(!r.pathname||!r.pathname.includes("?"),$p("?","pathname","search",r)),gt(!r.pathname||!r.pathname.includes("#"),$p("#","pathname","hash",r)),gt(!r.search||!r.search.includes("#"),$p("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}u=g>=0?e[g]:"/"}let h=UR(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const fs=t=>t.join("/").replace(/\/\/+/g,"/"),WR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$R=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,GR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nP=["post","put","patch","delete"];new Set(nP);const ZR=["get",...nP];new Set(ZR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xu(){return Xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xu.apply(this,arguments)}const Nf=M.createContext(null),iP=M.createContext(null),Rr=M.createContext(null),Lf=M.createContext(null),Vs=M.createContext({outlet:null,matches:[],isDataRoute:!1}),rP=M.createContext(null);function KR(t,e){let{relative:n}=e===void 0?{}:e;fl()||gt(!1);let{basename:i,navigator:r}=M.useContext(Rr),{hash:o,pathname:a,search:u}=Mf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:fs([i,a])),r.createHref({pathname:h,search:u,hash:o})}function fl(){return M.useContext(Lf)!=null}function js(){return fl()||gt(!1),M.useContext(Lf).location}function sP(t){M.useContext(Rr).static||M.useLayoutEffect(t)}function pl(){let{isDataRoute:t}=M.useContext(Vs);return t?l2():QR()}function QR(){fl()||gt(!1);let t=M.useContext(Nf),{basename:e,future:n,navigator:i}=M.useContext(Rr),{matches:r}=M.useContext(Vs),{pathname:o}=js(),a=JSON.stringify(Jy(r,n.v7_relativeSplatPath)),u=M.useRef(!1);return sP(()=>{u.current=!0}),M.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=e_(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:fs([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function Mf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=M.useContext(Rr),{matches:r}=M.useContext(Vs),{pathname:o}=js(),a=JSON.stringify(Jy(r,i.v7_relativeSplatPath));return M.useMemo(()=>e_(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function YR(t,e){return XR(t,e)}function XR(t,e,n,i){fl()||gt(!1);let{navigator:r}=M.useContext(Rr),{matches:o}=M.useContext(Vs),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=js(),m;if(e){var g;let V=typeof e=="string"?Ro(e):e;h==="/"||(g=V.pathname)!=null&&g.startsWith(h)||gt(!1),m=V}else m=f;let _=m.pathname||"/",E=_;if(h!=="/"){let V=h.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(V.length).join("/")}let R=CR(t,{pathname:E}),k=i2(R&&R.map(V=>Object.assign({},V,{params:Object.assign({},u,V.params),pathname:fs([h,r.encodeLocation?r.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?h:fs([h,r.encodeLocation?r.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),o,n,i);return e&&k?M.createElement(Lf.Provider,{value:{location:Xu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:is.Pop}},k):k}function JR(){let t=a2(),e=qR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:r},n):null,null)}const e2=M.createElement(JR,null);class t2 extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Vs.Provider,{value:this.props.routeContext},M.createElement(rP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n2(t){let{routeContext:e,match:n,children:i}=t,r=M.useContext(Nf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Vs.Provider,{value:e},i)}function i2(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||gt(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:_,errors:E}=n,R=g.route.loader&&_[g.route.id]===void 0&&(!E||E[g.route.id]===void 0);if(g.route.lazy||R){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let E,R=!1,k=null,V=null;n&&(E=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||e2,h&&(f<0&&_===0?(u2("route-fallback"),R=!0,V=null):f===_&&(R=!0,V=g.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,_+1)),T=()=>{let S;return E?S=k:R?S=V:g.route.Component?S=M.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=m,M.createElement(n2,{match:g,routeContext:{outlet:m,matches:A,isDataRoute:n!=null},children:S})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?M.createElement(t2,{location:n.location,revalidation:n.revalidation,component:k,error:E,children:T(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):T()},null)}var oP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(oP||{}),aP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(aP||{});function r2(t){let e=M.useContext(Nf);return e||gt(!1),e}function s2(t){let e=M.useContext(iP);return e||gt(!1),e}function o2(t){let e=M.useContext(Vs);return e||gt(!1),e}function lP(t){let e=o2(),n=e.matches[e.matches.length-1];return n.route.id||gt(!1),n.route.id}function a2(){var t;let e=M.useContext(rP),n=s2(),i=lP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function l2(){let{router:t}=r2(oP.UseNavigateStable),e=lP(aP.UseNavigateStable),n=M.useRef(!1);return sP(()=>{n.current=!0}),M.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Xu({fromRouteId:e},o)))},[t,e])}const Y0={};function u2(t,e,n){Y0[t]||(Y0[t]=!0)}function c2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function uP(t){let{to:e,replace:n,state:i,relative:r}=t;fl()||gt(!1);let{future:o,static:a}=M.useContext(Rr),{matches:u}=M.useContext(Vs),{pathname:h}=js(),f=pl(),m=e_(e,Jy(u,o.v7_relativeSplatPath),h,r==="path"),g=JSON.stringify(m);return M.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function lr(t){gt(!1)}function h2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=is.Pop,navigator:o,static:a=!1,future:u}=t;fl()&&gt(!1);let h=e.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:h,navigator:o,static:a,future:Xu({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=Ro(i));let{pathname:m="/",search:g="",hash:_="",state:E=null,key:R="default"}=i,k=M.useMemo(()=>{let V=Ja(m,h);return V==null?null:{location:{pathname:V,search:g,hash:_,state:E,key:R},navigationType:r}},[h,m,g,_,E,R,r]);return k==null?null:M.createElement(Rr.Provider,{value:f},M.createElement(Lf.Provider,{children:n,value:k}))}function d2(t){let{children:e,location:n}=t;return YR(yg(e),n)}new Promise(()=>{});function yg(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(i,r)=>{if(!M.isValidElement(i))return;let o=[...e,r];if(i.type===M.Fragment){n.push.apply(n,yg(i.props.children,o));return}i.type!==lr&&gt(!1),!i.props.index||!i.props.children||gt(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=yg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vd(){return Vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vd.apply(this,arguments)}function cP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function f2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function p2(t,e){return t.button===0&&(!e||e==="_self")&&!f2(t)}const m2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],g2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y2="6";try{window.__reactRouterVersion=y2}catch{}const _2=M.createContext({isTransitioning:!1}),v2="startTransition",X0=hb[v2];function w2(t){let{basename:e,children:n,future:i,window:r}=t,o=M.useRef();o.current==null&&(o.current=ER({window:r,v5Compat:!0}));let a=o.current,[u,h]=M.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=M.useCallback(g=>{f&&X0?X0(()=>h(g)):h(g)},[h,f]);return M.useLayoutEffect(()=>a.listen(m),[a,m]),M.useEffect(()=>c2(i),[i]),M.createElement(h2,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const x2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hP=M.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,_=cP(e,m2),{basename:E}=M.useContext(Rr),R,k=!1;if(typeof f=="string"&&T2.test(f)&&(R=f,x2))try{let S=new URL(window.location.href),B=f.startsWith("//")?new URL(S.protocol+f):new URL(f),W=Ja(B.pathname,E);B.origin===S.origin&&W!=null?f=W+B.search+B.hash:k=!0}catch{}let V=KR(f,{relative:r}),A=S2(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function T(S){i&&i(S),S.defaultPrevented||A(S)}return M.createElement("a",Vd({},_,{href:R||V,onClick:k||o?i:T,ref:n,target:h}))}),E2=M.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=cP(e,g2),_=Mf(h,{relative:g.relative}),E=js(),R=M.useContext(iP),{navigator:k,basename:V}=M.useContext(Rr),A=R!=null&&C2(_)&&f===!0,T=k.encodeLocation?k.encodeLocation(_).pathname:_.pathname,S=E.pathname,B=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;r||(S=S.toLowerCase(),B=B?B.toLowerCase():null,T=T.toLowerCase()),B&&V&&(B=Ja(B,V)||B);const W=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let z=S===T||!a&&S.startsWith(T)&&S.charAt(W)==="/",I=B!=null&&(B===T||!a&&B.startsWith(T)&&B.charAt(T.length)==="/"),C={isActive:z,isPending:I,isTransitioning:A},N=z?i:void 0,D;typeof o=="function"?D=o(C):D=[o,z?"active":null,I?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(C):u;return M.createElement(hP,Vd({},g,{"aria-current":N,className:D,ref:n,style:j,to:h,viewTransition:f}),typeof m=="function"?m(C):m)});var _g;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_g||(_g={}));var J0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(J0||(J0={}));function P2(t){let e=M.useContext(Nf);return e||gt(!1),e}function S2(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=pl(),f=js(),m=Mf(t,{relative:a});return M.useCallback(g=>{if(p2(g,n)){g.preventDefault();let _=i!==void 0?i:Dd(f)===Dd(m);h(t,{replace:_,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function C2(t,e){e===void 0&&(e={});let n=M.useContext(_2);n==null&&gt(!1);let{basename:i}=P2(_g.useViewTransitionState),r=Mf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ja(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Ja(n.nextLocation.pathname,i)||n.nextLocation.pathname;return gg(r.pathname,a)!=null||gg(r.pathname,o)!=null}const dP=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Of=M.createContext({}),Df=M.createContext(null),Vf=typeof document<"u",t_=Vf?M.useLayoutEffect:M.useEffect,fP=M.createContext({strict:!1}),n_=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),I2="framerAppearId",pP="data-"+n_(I2);function A2(t,e,n,i){const{visualElement:r}=M.useContext(Of),o=M.useContext(fP),a=M.useContext(Df),u=M.useContext(dP).reducedMotion,h=M.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;M.useInsertionEffect(()=>{f&&f.update(n,a)});const m=M.useRef(!!(n[pP]&&!window.HandoffComplete));return t_(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),M.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function ba(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function b2(t,e,n){return M.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):ba(n)&&(n.current=i))},[e])}function Ju(t){return typeof t=="string"||Array.isArray(t)}function jf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const i_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],r_=["initial",...i_];function Ff(t){return jf(t.animate)||r_.some(e=>Ju(t[e]))}function mP(t){return!!(Ff(t)||t.variants)}function k2(t,e){if(Ff(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Ju(n)?n:void 0,animate:Ju(i)?i:void 0}}return t.inherit!==!1?e:{}}function R2(t){const{initial:e,animate:n}=k2(t,M.useContext(Of));return M.useMemo(()=>({initial:e,animate:n}),[ew(e),ew(n)])}function ew(t){return Array.isArray(t)?t.join(" "):t}const tw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ec={};for(const t in tw)ec[t]={isEnabled:e=>tw[t].some(n=>!!e[n])};function N2(t){for(const e in t)ec[e]={...ec[e],...t[e]}}const s_=M.createContext({}),gP=M.createContext({}),L2=Symbol.for("motionComponentSymbol");function M2({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&N2(t);function o(u,h){let f;const m={...M.useContext(dP),...u,layoutId:O2(u)},{isStatic:g}=m,_=R2(u),E=i(u,g);if(!g&&Vf){_.visualElement=A2(r,E,m,e);const R=M.useContext(gP),k=M.useContext(fP).strict;_.visualElement&&(f=_.visualElement.loadFeatures(m,k,t,R))}return M.createElement(Of.Provider,{value:_},f&&_.visualElement?M.createElement(f,{visualElement:_.visualElement,...m}):null,n(r,u,b2(E,_.visualElement,h),E,g,_.visualElement))}const a=M.forwardRef(o);return a[L2]=r,a}function O2({layoutId:t}){const e=M.useContext(s_).id;return e&&t!==void 0?e+"-"+t:t}function D2(t){function e(i,r={}){return M2(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const V2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function o_(t){return typeof t!="string"||t.includes("-")?!1:!!(V2.indexOf(t)>-1||/[A-Z]/.test(t))}const jd={};function j2(t){Object.assign(jd,t)}const mc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],No=new Set(mc);function yP(t,{layout:e,layoutId:n}){return No.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!jd[t]||t==="opacity")}const Cn=t=>!!(t&&t.getVelocity),F2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},B2=mc.length;function z2(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<B2;a++){const u=mc[a];if(t[u]!==void 0){const h=F2[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const _P=t=>e=>typeof e=="string"&&e.startsWith(t),vP=_P("--"),vg=_P("var(--"),U2=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,H2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ss=(t,e,n)=>Math.min(Math.max(n,t),e),Lo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Eu={...Lo,transform:t=>Ss(0,1,t)},Ch={...Lo,default:1},Pu=t=>Math.round(t*1e5)/1e5,Bf=/(-)?([\d]*\.?[\d])+/g,wP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,W2=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function gc(t){return typeof t=="string"}const yc=t=>({test:e=>gc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$r=yc("deg"),Bi=yc("%"),we=yc("px"),$2=yc("vh"),G2=yc("vw"),nw={...Bi,parse:t=>Bi.parse(t)/100,transform:t=>Bi.transform(t*100)},iw={...Lo,transform:Math.round},xP={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,size:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,rotate:$r,rotateX:$r,rotateY:$r,rotateZ:$r,scale:Ch,scaleX:Ch,scaleY:Ch,scaleZ:Ch,skew:$r,skewX:$r,skewY:$r,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:Eu,originX:nw,originY:nw,originZ:we,zIndex:iw,fillOpacity:Eu,strokeOpacity:Eu,numOctaves:iw};function a_(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const _=e[g];if(vP(g)){o[g]=_;continue}const E=xP[g],R=H2(_,E);if(No.has(g)){if(h=!0,a[g]=R,!m)continue;_!==(E.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=R):r[g]=R}if(e.transform||(h||i?r.transform=z2(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:_="50%",originZ:E=0}=u;r.transformOrigin=`${g} ${_} ${E}`}}const l_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TP(t,e,n){for(const i in e)!Cn(e[i])&&!yP(i,n)&&(t[i]=e[i])}function q2({transformTemplate:t},e,n){return M.useMemo(()=>{const i=l_();return a_(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function Z2(t,e,n){const i=t.style||{},r={};return TP(r,i,t),Object.assign(r,q2(t,e,n)),t.transformValues?t.transformValues(r):r}function K2(t,e,n){const i={},r=Z2(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const Q2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Q2.has(t)}let EP=t=>!Fd(t);function Y2(t){t&&(EP=e=>e.startsWith("on")?!Fd(e):t(e))}try{Y2(require("@emotion/is-prop-valid").default)}catch{}function X2(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(EP(r)||n===!0&&Fd(r)||!e&&!Fd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function rw(t,e,n){return typeof t=="string"?t:we.transform(e+n*t)}function J2(t,e,n){const i=rw(e,t.x,t.width),r=rw(n,t.y,t.height);return`${i} ${r}`}const eN={offset:"stroke-dashoffset",array:"stroke-dasharray"},tN={offset:"strokeDashoffset",array:"strokeDasharray"};function nN(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?eN:tN;t[o.offset]=we.transform(-i);const a=we.transform(e),u=we.transform(n);t[o.array]=`${a} ${u}`}function u_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,_){if(a_(t,f,m,_),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:E,style:R,dimensions:k}=t;E.transform&&(k&&(R.transform=E.transform),delete E.transform),k&&(r!==void 0||o!==void 0||R.transform)&&(R.transformOrigin=J2(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(E.x=e),n!==void 0&&(E.y=n),i!==void 0&&(E.scale=i),a!==void 0&&nN(E,a,u,h,!1)}const PP=()=>({...l_(),attrs:{}}),c_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iN(t,e,n,i){const r=M.useMemo(()=>{const o=PP();return u_(o,e,{enableHardwareAcceleration:!1},c_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};TP(o,t.style,t),r.style={...o,...r.style}}return r}function rN(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(o_(n)?iN:K2)(i,o,a,n),m={...X2(i,typeof n=="string",t),...h,ref:r},{children:g}=i,_=M.useMemo(()=>Cn(g)?g.get():g,[g]);return M.createElement(n,{...m,children:_})}}function SP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const CP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IP(t,e,n,i){SP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(CP.has(r)?r:n_(r),e.attrs[r])}function h_(t,e){const{style:n}=t,i={};for(const r in n)(Cn(n[r])||e.style&&Cn(e.style[r])||yP(r,t))&&(i[r]=n[r]);return i}function AP(t,e){const n=h_(t,e);for(const i in t)if(Cn(t[i])||Cn(e[i])){const r=mc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function d_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function bP(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const Bd=t=>Array.isArray(t),sN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),oN=t=>Bd(t)?t[t.length-1]||0:t;function Jh(t){const e=Cn(t)?t.get():t;return sN(e)?e.toValue():e}function aN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:lN(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const kP=t=>(e,n)=>{const i=M.useContext(Of),r=M.useContext(Df),o=()=>aN(t,e,i,r);return n?o():bP(o)};function lN(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Jh(o[_]);let{initial:a,animate:u}=t;const h=Ff(t),f=mP(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!jf(g)&&(Array.isArray(g)?g:[g]).forEach(E=>{const R=d_(t,E);if(!R)return;const{transitionEnd:k,transition:V,...A}=R;for(const T in A){let S=A[T];if(Array.isArray(S)){const B=m?S.length-1:0;S=S[B]}S!==null&&(r[T]=S)}for(const T in k)r[T]=k[T]}),r}const Pt=t=>t;class sw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function uN(t){let e=new sw,n=new sw,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,_=g?e:n;return f&&a.add(h),_.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const Ih=["prepare","read","update","preRender","render","postRender"],cN=40;function hN(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=Ih.reduce((g,_)=>(g[_]=uN(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,cN),1),r.timestamp=g,r.isProcessing=!0,Ih.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:Ih.reduce((g,_)=>{const E=o[_];return g[_]=(R,k=!1,V=!1)=>(n||h(),E.schedule(R,k,V)),g},{}),cancel:g=>Ih.forEach(_=>o[_].cancel(g)),state:r,steps:o}}const{schedule:it,cancel:Pr,state:en,steps:Gp}=hN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pt,!0),dN={useVisualState:kP({scrapeMotionValuesFromProps:AP,createRenderState:PP,onMount:(t,e,{renderState:n,latestValues:i})=>{it.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),it.render(()=>{u_(n,i,{enableHardwareAcceleration:!1},c_(e.tagName),t.transformTemplate),IP(e,n)})}})},fN={useVisualState:kP({scrapeMotionValuesFromProps:h_,createRenderState:l_})};function pN(t,{forwardMotionProps:e=!1},n,i){return{...o_(t)?dN:fN,preloadedFeatures:n,useRender:rN(e),createVisualElement:i,Component:t}}function fr(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const RP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function zf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const mN=t=>e=>RP(e)&&t(e,zf(e));function yr(t,e,n,i){return fr(t,e,mN(n),i)}const gN=(t,e)=>n=>e(t(n)),ps=(...t)=>t.reduce(gN);function NP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const ow=NP("dragHorizontal"),aw=NP("dragVertical");function LP(t){let e=!1;if(t==="y")e=aw();else if(t==="x")e=ow();else{const n=ow(),i=aw();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function MP(){const t=LP(!0);return t?(t(),!1):!0}class Fs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function lw(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||MP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&it.update(()=>u[i](o,a))};return yr(t.current,n,r,{passive:!t.getProps()[i]})}class yN extends Fs{mount(){this.unmount=ps(lw(this.node,!0),lw(this.node,!1))}unmount(){}}class _N extends Fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ps(fr(this.node.current,"focus",()=>this.onFocus()),fr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const OP=(t,e)=>e?t===e?!0:OP(t,e.parentElement):!1;function qp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,zf(n))}class vN extends Fs{constructor(){super(...arguments),this.removeStartListeners=Pt,this.removeEndListeners=Pt,this.removeAccessibleListeners=Pt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=yr(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();it.update(()=>{!g&&!OP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=yr(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=ps(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||qp("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&it.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=fr(this.node.current,"keyup",a),qp("down",(u,h)=>{this.startPress(u,h)})},n=fr(this.node.current,"keydown",e),i=()=>{this.isPressing&&qp("cancel",(o,a)=>this.cancelPress(o,a))},r=fr(this.node.current,"blur",i);this.removeAccessibleListeners=ps(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&it.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!MP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&it.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=yr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=fr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ps(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const wg=new WeakMap,Zp=new WeakMap,wN=t=>{const e=wg.get(t.target);e&&e(t)},xN=t=>{t.forEach(wN)};function TN({root:t,...e}){const n=t||document;Zp.has(n)||Zp.set(n,{});const i=Zp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(xN,{root:t,...e})),i[r]}function EN(t,e,n){const i=TN(e);return wg.set(t,n),i.observe(t),()=>{wg.delete(t),i.unobserve(t)}}const PN={some:0,all:1};class SN extends Fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:PN[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(h)};return EN(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(CN(e,n))&&this.startObserver()}unmount(){}}function CN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const IN={inView:{Feature:SN},tap:{Feature:vN},focus:{Feature:_N},hover:{Feature:yN}};function DP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function AN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function bN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Uf(t,e,n){const i=t.getProps();return d_(i,e,n!==void 0?n:i.custom,AN(t),bN(t))}let f_=Pt;const po=t=>t*1e3,_r=t=>t/1e3,kN={current:!1},VP=t=>Array.isArray(t)&&typeof t[0]=="number";function jP(t){return!!(!t||typeof t=="string"&&FP[t]||VP(t)||Array.isArray(t)&&t.every(jP))}const uu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,FP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:uu([0,.65,.55,1]),circOut:uu([.55,0,1,.45]),backIn:uu([.31,.01,.66,-.59]),backOut:uu([.33,1.53,.69,.99])};function BP(t){if(t)return VP(t)?uu(t):Array.isArray(t)?t.map(BP):FP[t]}function RN(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=BP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function NN(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const zP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,LN=1e-7,MN=12;function ON(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=zP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>LN&&++u<MN);return a}function _c(t,e,n,i){if(t===e&&n===i)return Pt;const r=o=>ON(o,0,1,t,n);return o=>o===0||o===1?o:zP(r(o),e,i)}const DN=_c(.42,0,1,1),VN=_c(0,0,.58,1),UP=_c(.42,0,.58,1),jN=t=>Array.isArray(t)&&typeof t[0]!="number",HP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,WP=t=>e=>1-t(1-e),p_=t=>1-Math.sin(Math.acos(t)),$P=WP(p_),FN=HP(p_),GP=_c(.33,1.53,.69,.99),m_=WP(GP),BN=HP(m_),zN=t=>(t*=2)<1?.5*m_(t):.5*(2-Math.pow(2,-10*(t-1))),UN={linear:Pt,easeIn:DN,easeInOut:UP,easeOut:VN,circIn:p_,circInOut:FN,circOut:$P,backIn:m_,backInOut:BN,backOut:GP,anticipate:zN},uw=t=>{if(Array.isArray(t)){f_(t.length===4);const[e,n,i,r]=t;return _c(e,n,i,r)}else if(typeof t=="string")return UN[t];return t},g_=(t,e)=>n=>!!(gc(n)&&W2.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),qP=(t,e,n)=>i=>{if(!gc(i))return i;const[r,o,a,u]=i.match(Bf);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},HN=t=>Ss(0,255,t),Kp={...Lo,transform:t=>Math.round(HN(t))},uo={test:g_("rgb","red"),parse:qP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Kp.transform(t)+", "+Kp.transform(e)+", "+Kp.transform(n)+", "+Pu(Eu.transform(i))+")"};function WN(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const xg={test:g_("#"),parse:WN,transform:uo.transform},ka={test:g_("hsl","hue"),parse:qP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Bi.transform(Pu(e))+", "+Bi.transform(Pu(n))+", "+Pu(Eu.transform(i))+")"},hn={test:t=>uo.test(t)||xg.test(t)||ka.test(t),parse:t=>uo.test(t)?uo.parse(t):ka.test(t)?ka.parse(t):xg.parse(t),transform:t=>gc(t)?t:t.hasOwnProperty("red")?uo.transform(t):ka.transform(t)},pt=(t,e,n)=>-n*t+n*e+t;function Qp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $N({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=Qp(h,u,t+1/3),o=Qp(h,u,t),a=Qp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Yp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},GN=[xg,uo,ka],qN=t=>GN.find(e=>e.test(t));function cw(t){const e=qN(t);let n=e.parse(t);return e===ka&&(n=$N(n)),n}const ZP=(t,e)=>{const n=cw(t),i=cw(e),r={...n};return o=>(r.red=Yp(n.red,i.red,o),r.green=Yp(n.green,i.green,o),r.blue=Yp(n.blue,i.blue,o),r.alpha=pt(n.alpha,i.alpha,o),uo.transform(r))};function ZN(t){var e,n;return isNaN(t)&&gc(t)&&(((e=t.match(Bf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(wP))===null||n===void 0?void 0:n.length)||0)>0}const KP={regex:U2,countKey:"Vars",token:"${v}",parse:Pt},QP={regex:wP,countKey:"Colors",token:"${c}",parse:hn.parse},YP={regex:Bf,countKey:"Numbers",token:"${n}",parse:Lo.parse};function Xp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function zd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Xp(n,KP),Xp(n,QP),Xp(n,YP),n}function XP(t){return zd(t).values}function JP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=zd(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(KP.token,a[h]):h<i+n?u=u.replace(QP.token,hn.transform(a[h])):u=u.replace(YP.token,Pu(a[h]));return u}}const KN=t=>typeof t=="number"?0:t;function QN(t){const e=XP(t);return JP(t)(e.map(KN))}const Cs={test:ZN,parse:XP,createTransformer:JP,getAnimatableNone:QN},eS=(t,e)=>n=>`${n>0?e:t}`;function tS(t,e){return typeof t=="number"?n=>pt(t,e,n):hn.test(t)?ZP(t,e):t.startsWith("var(")?eS(t,e):iS(t,e)}const nS=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>tS(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},YN=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=tS(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},iS=(t,e)=>{const n=Cs.createTransformer(e),i=zd(t),r=zd(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?ps(nS(i.values,r.values),n):eS(t,e)},tc=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},hw=(t,e)=>n=>pt(t,e,n);function XN(t){return typeof t=="number"?hw:typeof t=="string"?hn.test(t)?ZP:iS:Array.isArray(t)?nS:typeof t=="object"?YN:hw}function JN(t,e,n){const i=[],r=n||XN(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||Pt:e;u=ps(h,u)}i.push(u)}return i}function rS(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(f_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=JN(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=tc(t[m],t[m+1],f);return a[m](g)};return n?f=>h(Ss(t[0],t[o-1],f)):h}function eL(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=tc(0,e,i);t.push(pt(n,1,r))}}function tL(t){const e=[0];return eL(e,t.length-1),e}function nL(t,e){return t.map(n=>n*e)}function iL(t,e){return t.map(()=>e||UP).splice(0,t.length-1)}function Ud({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=jN(i)?i.map(uw):uw(i),o={done:!1,value:e[0]},a=nL(n&&n.length===e.length?n:tL(e),t),u=rS(a,e,{ease:Array.isArray(r)?r:iL(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function sS(t,e){return e?t*(1e3/e):0}const rL=5;function oS(t,e,n){const i=Math.max(e-rL,0);return sS(n-t(i),e-i)}const Jp=.001,sL=.01,oL=10,aL=.05,lL=1;function uL({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=Ss(aL,lL,a),t=Ss(sL,oL,_r(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,E=Tg(f,a),R=Math.exp(-g);return Jp-_/E*R},o=f=>{const g=f*a*t,_=g*n+n,E=Math.pow(a,2)*Math.pow(f,2)*t,R=Math.exp(-g),k=Tg(Math.pow(f,2),a);return(-r(f)+Jp>0?-1:1)*((_-E)*R)/k}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Jp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=hL(r,o,u);if(t=po(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const cL=12;function hL(t,e,n){let i=n;for(let r=1;r<cL;r++)i=i-t(i)/e(i);return i}function Tg(t,e){return t*Math.sqrt(1-e*e)}const dL=["duration","bounce"],fL=["stiffness","damping","mass"];function dw(t,e){return e.some(n=>t[n]!==void 0)}function pL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!dw(t,fL)&&dw(t,dL)){const n=uL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function aS({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:_}=pL({...i,velocity:-_r(i.velocity||0)}),E=g||0,R=h/(2*Math.sqrt(u*f)),k=o-r,V=_r(Math.sqrt(u/f)),A=Math.abs(k)<5;n||(n=A?.01:2),e||(e=A?.005:.5);let T;if(R<1){const S=Tg(V,R);T=B=>{const W=Math.exp(-R*V*B);return o-W*((E+R*V*k)/S*Math.sin(S*B)+k*Math.cos(S*B))}}else if(R===1)T=S=>o-Math.exp(-V*S)*(k+(E+V*k)*S);else{const S=V*Math.sqrt(R*R-1);T=B=>{const W=Math.exp(-R*V*B),z=Math.min(S*B,300);return o-W*((E+R*V*k)*Math.sinh(z)+S*k*Math.cosh(z))/S}}return{calculatedDuration:_&&m||null,next:S=>{const B=T(S);if(_)a.done=S>=m;else{let W=E;S!==0&&(R<1?W=oS(T,S,B):W=0);const z=Math.abs(W)<=n,I=Math.abs(o-B)<=e;a.done=z&&I}return a.value=a.done?o:B,a}}}function fw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},E=C=>u!==void 0&&C<u||h!==void 0&&C>h,R=C=>u===void 0?h:h===void 0||Math.abs(u-C)<Math.abs(h-C)?u:h;let k=n*e;const V=g+k,A=a===void 0?V:a(V);A!==V&&(k=A-g);const T=C=>-k*Math.exp(-C/i),S=C=>A+T(C),B=C=>{const N=T(C),D=S(C);_.done=Math.abs(N)<=f,_.value=_.done?A:D};let W,z;const I=C=>{E(_.value)&&(W=C,z=aS({keyframes:[_.value,R(_.value)],velocity:oS(S,C,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return I(0),{calculatedDuration:null,next:C=>{let N=!1;return!z&&W===void 0&&(N=!0,B(C),I(C)),W!==void 0&&C>W?z.next(C-W):(!N&&B(C),_)}}}const mL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>it.update(e,!0),stop:()=>Pr(e),now:()=>en.isProcessing?en.timestamp:performance.now()}},pw=2e4;function mw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<pw;)e+=n,i=t.next(e);return e>=pw?1/0:e}const gL={decay:fw,inertia:fw,tween:Ud,keyframes:Ud,spring:aS};function Hd({autoplay:t=!0,delay:e=0,driver:n=mL,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,..._}){let E=1,R=!1,k,V;const A=()=>{V=new Promise(ie=>{k=ie})};A();let T;const S=gL[r]||Ud;let B;S!==Ud&&typeof i[0]!="number"&&(B=rS([0,100],i,{clamp:!1}),i=[0,100]);const W=S({..._,keyframes:i});let z;u==="mirror"&&(z=S({..._,keyframes:[...i].reverse(),velocity:-(_.velocity||0)}));let I="idle",C=null,N=null,D=null;W.calculatedDuration===null&&o&&(W.calculatedDuration=mw(W));const{calculatedDuration:j}=W;let U=1/0,O=1/0;j!==null&&(U=j+a,O=U*(o+1)-a);let Te=0;const se=ie=>{if(N===null)return;E>0&&(N=Math.min(N,ie)),E<0&&(N=Math.min(ie-O/E,N)),C!==null?Te=C:Te=Math.round(ie-N)*E;const Pe=Te-e*(E>=0?1:-1),Ze=E>=0?Pe<0:Pe>O;Te=Math.max(Pe,0),I==="finished"&&C===null&&(Te=O);let Le=Te,ke=W;if(o){const oi=Math.min(Te,O)/U;let Bn=Math.floor(oi),an=oi%1;!an&&oi>=1&&(an=1),an===1&&Bn--,Bn=Math.min(Bn,o+1),!!(Bn%2)&&(u==="reverse"?(an=1-an,a&&(an-=a/U)):u==="mirror"&&(ke=z)),Le=Ss(0,1,an)*U}const ge=Ze?{done:!1,value:i[0]}:ke.next(Le);B&&(ge.value=B(ge.value));let{done:ht}=ge;!Ze&&j!==null&&(ht=E>=0?Te>=O:Te<=0);const Kt=C===null&&(I==="finished"||I==="running"&&ht);return g&&g(ge.value),Kt&&Z(),ge},fe=()=>{T&&T.stop(),T=void 0},Ie=()=>{I="idle",fe(),k(),A(),N=D=null},Z=()=>{I="finished",m&&m(),fe(),k()},oe=()=>{if(R)return;T||(T=n(se));const ie=T.now();h&&h(),C!==null?N=ie-C:(!N||I==="finished")&&(N=ie),I==="finished"&&A(),D=N,C=null,I="running",T.start()};t&&oe();const J={then(ie,Pe){return V.then(ie,Pe)},get time(){return _r(Te)},set time(ie){ie=po(ie),Te=ie,C!==null||!T||E===0?C=ie:N=T.now()-ie/E},get duration(){const ie=W.calculatedDuration===null?mw(W):W.calculatedDuration;return _r(ie)},get speed(){return E},set speed(ie){ie===E||!T||(E=ie,J.time=_r(Te))},get state(){return I},play:oe,pause:()=>{I="paused",C=Te},stop:()=>{R=!0,I!=="idle"&&(I="idle",f&&f(),Ie())},cancel:()=>{D!==null&&se(D),Ie()},complete:()=>{I="finished"},sample:ie=>(N=0,se(ie))};return J}function yL(t){let e;return()=>(e===void 0&&(e=t()),e)}const _L=yL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),vL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ah=10,wL=2e4,xL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!jP(e.ease);function TL(t,e,{onUpdate:n,onComplete:i,...r}){if(!(_L()&&vL.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(S=>{u=S})};m();let{keyframes:g,duration:_=300,ease:E,times:R}=r;if(xL(e,r)){const S=Hd({...r,repeat:0,delay:0});let B={done:!1,value:g[0]};const W=[];let z=0;for(;!B.done&&z<wL;)B=S.sample(z),W.push(B.value),z+=Ah;R=void 0,g=W,_=z-Ah,E="linear"}const k=RN(t.owner.current,e,g,{...r,duration:_,ease:E,times:R}),V=()=>{f=!1,k.cancel()},A=()=>{f=!0,it.update(V),u(),m()};return k.onfinish=()=>{f||(t.set(NN(g,r)),i&&i(),A())},{then(S,B){return h.then(S,B)},attachTimeline(S){return k.timeline=S,k.onfinish=null,Pt},get time(){return _r(k.currentTime||0)},set time(S){k.currentTime=po(S)},get speed(){return k.playbackRate},set speed(S){k.playbackRate=S},get duration(){return _r(_)},play:()=>{a||(k.play(),Pr(V))},pause:()=>k.pause(),stop:()=>{if(a=!0,k.playState==="idle")return;const{currentTime:S}=k;if(S){const B=Hd({...r,autoplay:!1});t.setWithVelocity(B.sample(S-Ah).value,B.sample(S).value,Ah)}A()},complete:()=>{f||k.finish()},cancel:A}}function EL({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Pt,pause:Pt,stop:Pt,then:o=>(o(),Promise.resolve()),cancel:Pt,complete:Pt});return e?Hd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const PL={type:"spring",stiffness:500,damping:25,restSpeed:10},SL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CL={type:"keyframes",duration:.8},IL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},AL=(t,{keyframes:e})=>e.length>2?CL:No.has(t)?t.startsWith("scale")?SL(e[1]):PL:IL,Eg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Cs.test(e)||e==="0")&&!e.startsWith("url(")),bL=new Set(["brightness","contrast","saturate","opacity"]);function kL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Bf)||[];if(!i)return t;const r=n.replace(i,"");let o=bL.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const RL=/([a-z-]*)\(.*?\)/g,Pg={...Cs,getAnimatableNone:t=>{const e=t.match(RL);return e?e.map(kL).join(" "):t}},NL={...xP,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:Pg,WebkitFilter:Pg},y_=t=>NL[t];function lS(t,e){let n=y_(t);return n!==Pg&&(n=Cs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const uS=t=>/^0[^.\s]+$/.test(t);function LL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||uS(t)}function ML(t,e,n,i){const r=Eg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),LL(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=lS(e,u)}return o}function OL({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function __(t,e){return t[e]||t.default||t}const DL={skipAnimations:!1},v_=(t,e,n,i={})=>r=>{const o=__(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-po(a);const h=ML(e,t,n,o),f=h[0],m=h[h.length-1],g=Eg(t,f),_=Eg(t,m);let E={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:R=>{e.set(R),o.onUpdate&&o.onUpdate(R)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(OL(o)||(E={...E,...AL(t,E)}),E.duration&&(E.duration=po(E.duration)),E.repeatDelay&&(E.repeatDelay=po(E.repeatDelay)),!g||!_||kN.current||o.type===!1||DL.skipAnimations)return EL(E);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const R=TL(e,t,E);if(R)return R}return Hd(E)};function Wd(t){return!!(Cn(t)&&t.add)}const cS=t=>/^\-?\d*\.?\d+$/.test(t);function w_(t,e){t.indexOf(e)===-1&&t.push(e)}function x_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class T_{constructor(){this.subscriptions=[]}add(e){return w_(this.subscriptions,e),()=>x_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const VL=t=>!isNaN(parseFloat(t));class jL{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=en;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,it.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>it.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=VL(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new T_);const i=this.events[e].add(n);return e==="change"?()=>{i(),it.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?sS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function el(t,e){return new jL(t,e)}const hS=t=>e=>e.test(t),FL={test:t=>t==="auto",parse:t=>t},dS=[Lo,we,Bi,$r,G2,$2,FL],tu=t=>dS.find(hS(t)),BL=[...dS,hn,Cs],zL=t=>BL.find(hS(t));function UL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,el(n))}function HL(t,e){const n=Uf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=oN(o[a]);UL(t,a,u)}}function WL(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(cS(m)||uS(m))?m=parseFloat(m):!zL(m)&&Cs.test(f)&&(m=lS(h,f)),t.addValue(h,el(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function $L(t,e){return e?(e[t]||e.default||e).from:void 0}function GL(t,e,n){const i={};for(const r in t){const o=$L(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function qL({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function ZL(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function fS(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const _=t.getValue(g),E=u[g];if(!_||E===void 0||m&&qL(m,g))continue;const R={delay:n,elapsed:0,...__(o||{},g)};if(window.HandoffAppearAnimations){const A=t.getProps()[pP];if(A){const T=window.HandoffAppearAnimations(A,g,_,it);T!==null&&(R.elapsed=T,R.isHandoff=!0)}}let k=!R.isHandoff&&!ZL(_,E);if(R.type==="spring"&&(_.getVelocity()||R.velocity)&&(k=!1),_.animation&&(k=!1),k)continue;_.start(v_(g,_,E,t.shouldReduceMotion&&No.has(g)?{type:!1}:R));const V=_.animation;Wd(h)&&(h.add(g),V.then(()=>h.remove(g))),f.push(V)}return a&&Promise.all(f).then(()=>{a&&HL(t,a)}),f}function Sg(t,e,n={}){const i=Uf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(fS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return KL(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function KL(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(QL).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(Sg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function QL(t,e){return t.sortNodePosition(e)}function YL(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Sg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Sg(t,e,n);else{const r=typeof e=="function"?Uf(t,e,n.custom):e;i=Promise.all(fS(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const XL=[...i_].reverse(),JL=i_.length;function eM(t){return e=>Promise.all(e.map(({animation:n,options:i})=>YL(t,n,i)))}function tM(t){let e=eM(t);const n=iM();let i=!0;const r=(h,f)=>{const m=Uf(t,f);if(m){const{transition:g,transitionEnd:_,...E}=m;h={...h,...E,..._}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},_=[],E=new Set;let R={},k=1/0;for(let A=0;A<JL;A++){const T=XL[A],S=n[T],B=m[T]!==void 0?m[T]:g[T],W=Ju(B),z=T===f?S.isActive:null;z===!1&&(k=A);let I=B===g[T]&&B!==m[T]&&W;if(I&&i&&t.manuallyAnimateOnMount&&(I=!1),S.protectedKeys={...R},!S.isActive&&z===null||!B&&!S.prevProp||jf(B)||typeof B=="boolean")continue;let N=nM(S.prevProp,B)||T===f&&S.isActive&&!I&&W||A>k&&W,D=!1;const j=Array.isArray(B)?B:[B];let U=j.reduce(r,{});z===!1&&(U={});const{prevResolvedValues:O={}}=S,Te={...O,...U},se=fe=>{N=!0,E.has(fe)&&(D=!0,E.delete(fe)),S.needsAnimating[fe]=!0};for(const fe in Te){const Ie=U[fe],Z=O[fe];if(R.hasOwnProperty(fe))continue;let oe=!1;Bd(Ie)&&Bd(Z)?oe=!DP(Ie,Z):oe=Ie!==Z,oe?Ie!==void 0?se(fe):E.add(fe):Ie!==void 0&&E.has(fe)?se(fe):S.protectedKeys[fe]=!0}S.prevProp=B,S.prevResolvedValues=U,S.isActive&&(R={...R,...U}),i&&t.blockInitialAnimation&&(N=!1),N&&(!I||D)&&_.push(...j.map(fe=>({animation:fe,options:{type:T,...h}})))}if(E.size){const A={};E.forEach(T=>{const S=t.getBaseTarget(T);S!==void 0&&(A[T]=S)}),_.push({animation:A})}let V=!!_.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(V=!1),i=!1,V?e(_):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(E=>{var R;return(R=E.animationState)===null||R===void 0?void 0:R.setActive(h,f)}),n[h].isActive=f;const _=a(m,h);for(const E in n)n[E].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function nM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!DP(e,t):!1}function Xs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iM(){return{animate:Xs(!0),whileInView:Xs(),whileHover:Xs(),whileTap:Xs(),whileDrag:Xs(),whileFocus:Xs(),exit:Xs()}}class rM extends Fs{constructor(e){super(e),e.animationState||(e.animationState=tM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),jf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let sM=0;class oM extends Fs{constructor(){super(...arguments),this.id=sM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const aM={animation:{Feature:rM},exit:{Feature:oM}},gw=(t,e)=>Math.abs(t-e);function lM(t,e){const n=gw(t.x,e.x),i=gw(t.y,e.y);return Math.sqrt(n**2+i**2)}class pS{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=tm(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=lM(g.offset,{x:0,y:0})>=3;if(!_&&!E)return;const{point:R}=g,{timestamp:k}=en;this.history.push({...R,timestamp:k});const{onStart:V,onMove:A}=this.handlers;_||(V&&V(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=em(_,this.transformPagePoint),it.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:E,onSessionEnd:R,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=tm(g.type==="pointercancel"?this.lastMoveEventInfo:em(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,V),R&&R(g,V)},!RP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=zf(e),u=em(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=en;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,tm(u,this.history)),this.removeListeners=ps(yr(this.contextWindow,"pointermove",this.handlePointerMove),yr(this.contextWindow,"pointerup",this.handlePointerUp),yr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Pr(this.updatePoint)}}function em(t,e){return e?{point:e(t.point)}:t}function yw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function tm({point:t},e){return{point:t,delta:yw(t,mS(e)),offset:yw(t,uM(e)),velocity:cM(e,.1)}}function uM(t){return t[0]}function mS(t){return t[t.length-1]}function cM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=mS(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>po(e)));)n--;if(!i)return{x:0,y:0};const o=_r(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function On(t){return t.max-t.min}function Cg(t,e=0,n=.01){return Math.abs(t-e)<=n}function _w(t,e,n,i=.5){t.origin=i,t.originPoint=pt(e.min,e.max,t.origin),t.scale=On(n)/On(e),(Cg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=pt(n.min,n.max,t.origin)-t.originPoint,(Cg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Su(t,e,n,i){_w(t.x,e.x,n.x,i?i.originX:void 0),_w(t.y,e.y,n.y,i?i.originY:void 0)}function vw(t,e,n){t.min=n.min+e.min,t.max=t.min+On(e)}function hM(t,e,n){vw(t.x,e.x,n.x),vw(t.y,e.y,n.y)}function ww(t,e,n){t.min=e.min-n.min,t.max=t.min+On(e)}function Cu(t,e,n){ww(t.x,e.x,n.x),ww(t.y,e.y,n.y)}function dM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?pt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?pt(n,t,i.max):Math.min(t,n)),t}function xw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function fM(t,{top:e,left:n,bottom:i,right:r}){return{x:xw(t.x,n,r),y:xw(t.y,e,i)}}function Tw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function pM(t,e){return{x:Tw(t.x,e.x),y:Tw(t.y,e.y)}}function mM(t,e){let n=.5;const i=On(t),r=On(e);return r>i?n=tc(e.min,e.max-i,t.min):i>r&&(n=tc(t.min,t.max-r,e.min)),Ss(0,1,n)}function gM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ig=.35;function yM(t=Ig){return t===!1?t=0:t===!0&&(t=Ig),{x:Ew(t,"left","right"),y:Ew(t,"top","bottom")}}function Ew(t,e,n){return{min:Pw(t,e),max:Pw(t,n)}}function Pw(t,e){return typeof t=="number"?t:t[e]||0}const Sw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ra=()=>({x:Sw(),y:Sw()}),Cw=()=>({min:0,max:0}),At=()=>({x:Cw(),y:Cw()});function Qn(t){return[t("x"),t("y")]}function gS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function _M({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function vM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function nm(t){return t===void 0||t===1}function Ag({scale:t,scaleX:e,scaleY:n}){return!nm(t)||!nm(e)||!nm(n)}function to(t){return Ag(t)||yS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function yS(t){return Iw(t.x)||Iw(t.y)}function Iw(t){return t&&t!=="0%"}function $d(t,e,n){const i=t-n,r=e*i;return n+r}function Aw(t,e,n,i,r){return r!==void 0&&(t=$d(t,r,i)),$d(t,n,i)+e}function bg(t,e=0,n=1,i,r){t.min=Aw(t.min,e,n,i,r),t.max=Aw(t.max,e,n,i,r)}function _S(t,{x:e,y:n}){bg(t.x,e.translate,e.scale,e.originPoint),bg(t.y,n.translate,n.scale,n.originPoint)}function wM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Na(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,_S(t,a)),i&&to(o.latestValues)&&Na(t,o.latestValues))}e.x=bw(e.x),e.y=bw(e.y)}function bw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Zr(t,e){t.min=t.min+e,t.max=t.max+e}function kw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=pt(t.min,t.max,o);bg(t,e[n],e[i],a,e.scale)}const xM=["x","scaleX","originX"],TM=["y","scaleY","originY"];function Na(t,e){kw(t.x,e,xM),kw(t.y,e,TM)}function vS(t,e){return gS(vM(t.getBoundingClientRect(),e))}function EM(t,e,n){const i=vS(t,n),{scroll:r}=e;return r&&(Zr(i.x,r.offset.x),Zr(i.y,r.offset.y)),i}const wS=({current:t})=>t?t.ownerDocument.defaultView:null,PM=new WeakMap;class SM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=At(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(zf(m,"page").point)},o=(m,g)=>{const{drag:_,dragPropagation:E,onDragStart:R}=this.getProps();if(_&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=LP(_),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qn(V=>{let A=this.getAxisMotionValue(V).get()||0;if(Bi.test(A)){const{projection:T}=this.visualElement;if(T&&T.layout){const S=T.layout.layoutBox[V];S&&(A=On(S)*(parseFloat(A)/100))}}this.originPoint[V]=A}),R&&it.update(()=>R(m,g),!1,!0);const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:E,onDirectionLock:R,onDrag:k}=this.getProps();if(!_&&!this.openGlobalLock)return;const{offset:V}=g;if(E&&this.currentDirection===null){this.currentDirection=CM(V),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",g.point,V),this.updateAxis("y",g.point,V),this.visualElement.render(),k&&k(m,g)},u=(m,g)=>this.stop(m,g),h=()=>Qn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new pS(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:wS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&it.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!bh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=dM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&ba(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=fM(r.layoutBox,n):this.constraints=!1,this.elastic=yM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Qn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=gM(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ba(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=EM(i,r.root,this.visualElement.getTransformPagePoint());let a=pM(r.layout.layoutBox,o);if(n){const u=n(_M(a));this.hasMutatedConstraints=!!u,u&&(a=gS(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Qn(m=>{if(!bh(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,E=r?40:1e7,R={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,R)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(v_(e,i,0,n))}stopAnimation(){Qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Qn(n=>{const{drag:i}=this.getProps();if(!bh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-pt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ba(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Qn(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=mM({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Qn(a=>{if(!bh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(pt(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;PM.set(this.visualElement,this);const e=this.visualElement.current,n=yr(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();ba(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=fr(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Qn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Ig,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function bh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function CM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class IM extends Fs{constructor(e){super(e),this.removeGroupControls=Pt,this.removeListeners=Pt,this.controls=new SM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Rw=t=>(e,n)=>{t&&it.update(()=>t(e,n))};class AM extends Fs{constructor(){super(...arguments),this.removePointerDownListener=Pt}onPointerDown(e){this.session=new pS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Rw(e),onStart:Rw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&it.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=yr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function bM(){const t=M.useContext(Df);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=M.useId();return M.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const ed={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Nw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const nu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(we.test(t))t=parseFloat(t);else return t;const n=Nw(t,e.target.x),i=Nw(t,e.target.y);return`${n}% ${i}%`}},kM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Cs.parse(t);if(r.length>5)return i;const o=Cs.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=pt(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class RM extends _o.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;j2(NM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ed.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||it.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xS(t){const[e,n]=bM(),i=M.useContext(s_);return _o.createElement(RM,{...t,layoutGroup:i,switchLayoutGroup:M.useContext(gP),isPresent:e,safeToRemove:n})}const NM={borderRadius:{...nu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nu,borderTopRightRadius:nu,borderBottomLeftRadius:nu,borderBottomRightRadius:nu,boxShadow:kM},TS=["TopLeft","TopRight","BottomLeft","BottomRight"],LM=TS.length,Lw=t=>typeof t=="string"?parseFloat(t):t,Mw=t=>typeof t=="number"||we.test(t);function MM(t,e,n,i,r,o){r?(t.opacity=pt(0,n.opacity!==void 0?n.opacity:1,OM(i)),t.opacityExit=pt(e.opacity!==void 0?e.opacity:1,0,DM(i))):o&&(t.opacity=pt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<LM;a++){const u=`border${TS[a]}Radius`;let h=Ow(e,u),f=Ow(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Mw(h)===Mw(f)?(t[u]=Math.max(pt(Lw(h),Lw(f),i),0),(Bi.test(f)||Bi.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=pt(e.rotate||0,n.rotate||0,i))}function Ow(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const OM=ES(0,.5,$P),DM=ES(.5,.95,Pt);function ES(t,e,n){return i=>i<t?0:i>e?1:n(tc(t,e,i))}function Dw(t,e){t.min=e.min,t.max=e.max}function Kn(t,e){Dw(t.x,e.x),Dw(t.y,e.y)}function Vw(t,e,n,i,r){return t-=e,t=$d(t,1/n,i),r!==void 0&&(t=$d(t,1/r,i)),t}function VM(t,e=0,n=1,i=.5,r,o=t,a=t){if(Bi.test(e)&&(e=parseFloat(e),e=pt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=pt(o.min,o.max,i);t===o&&(u-=e),t.min=Vw(t.min,e,n,u,r),t.max=Vw(t.max,e,n,u,r)}function jw(t,e,[n,i,r],o,a){VM(t,e[n],e[i],e[r],e.scale,o,a)}const jM=["x","scaleX","originX"],FM=["y","scaleY","originY"];function Fw(t,e,n,i){jw(t.x,e,jM,n?n.x:void 0,i?i.x:void 0),jw(t.y,e,FM,n?n.y:void 0,i?i.y:void 0)}function Bw(t){return t.translate===0&&t.scale===1}function PS(t){return Bw(t.x)&&Bw(t.y)}function BM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function SS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function zw(t){return On(t.x)/On(t.y)}class zM{constructor(){this.members=[]}add(e){w_(this.members,e),e.scheduleRender()}remove(e){if(x_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Uw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const UM=(t,e)=>t.depth-e.depth;class HM{constructor(){this.children=[],this.isDirty=!1}add(e){w_(this.children,e),this.isDirty=!0}remove(e){x_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(UM),this.isDirty=!1,this.children.forEach(e)}}function WM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(Pr(i),t(o-e))};return it.read(i,!0),()=>Pr(i)}function $M(t){window.MotionDebug&&window.MotionDebug.record(t)}function GM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function qM(t,e,n){const i=Cn(t)?t:el(t);return i.start(v_("",i,e,n)),i.animation}const Hw=["","X","Y","Z"],ZM={visibility:"hidden"},Ww=1e3;let KM=0;const no={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function CS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=KM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,no.totalNodes=no.resolvedTargetDeltas=no.recalculatedProjection=0,this.nodes.forEach(XM),this.nodes.forEach(iO),this.nodes.forEach(rO),this.nodes.forEach(JM),$M(no)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new HM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new T_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=GM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=WM(_,250),ed.hasAnimatedSinceResize&&(ed.hasAnimatedSinceResize=!1,this.nodes.forEach(Gw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:E,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||uO,{onLayoutAnimationStart:V,onLayoutAnimationComplete:A}=m.getProps(),T=!this.targetLayout||!SS(this.targetLayout,R)||E,S=!_&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||_&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,S);const B={...__(k,"layout"),onPlay:V,onComplete:A};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else _||Gw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($w);return}this.isUpdating||this.nodes.forEach(tO),this.isUpdating=!1,this.nodes.forEach(nO),this.nodes.forEach(QM),this.nodes.forEach(YM),this.clearAllSnapshots();const u=performance.now();en.delta=Ss(0,1e3/60,u-en.timestamp),en.timestamp=u,en.isProcessing=!0,Gp.update.process(en),Gp.preRender.process(en),Gp.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(eO),this.sharedNodes.forEach(oO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,it.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){it.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=At(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!PS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||to(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),cO(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return At();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(Zr(u.x,h.offset.x),Zr(u.y,h.offset.y)),u}removeElementScroll(a){const u=At();Kn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){Kn(u,a);const{scroll:_}=this.root;_&&(Zr(u.x,-_.offset.x),Zr(u.y,-_.offset.y))}Zr(u.x,m.offset.x),Zr(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=At();Kn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Na(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),to(m.latestValues)&&Na(h,m.latestValues)}return to(this.latestValues)&&Na(h,this.latestValues),h}removeTransform(a){const u=At();Kn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!to(f.latestValues))continue;Ag(f.latestValues)&&f.updateSnapshot();const m=At(),g=f.measurePageBox();Kn(m,g),Fw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return to(this.latestValues)&&Fw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),Cu(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=At(),this.targetWithTransforms=At()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kn(this.target,this.layout.layoutBox),_S(this.target,this.targetDelta)):Kn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),Cu(this.relativeTargetOrigin,this.target,E.target),Kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}no.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ag(this.parent.latestValues)||yS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===en.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Kn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,E=this.treeScale.y;wM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:R}=u;if(!R){this.projectionTransform&&(this.projectionDelta=Ra(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ra(),this.projectionDeltaWithTransform=Ra());const k=this.projectionTransform;Su(this.projectionDelta,this.layoutCorrected,R,this.latestValues),this.projectionTransform=Uw(this.projectionDelta,this.treeScale),(this.projectionTransform!==k||this.treeScale.x!==_||this.treeScale.y!==E)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R)),no.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=Ra();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=At(),E=h?h.source:void 0,R=this.layout?this.layout.source:void 0,k=E!==R,V=this.getStack(),A=!V||V.members.length<=1,T=!!(k&&!A&&this.options.crossfade===!0&&!this.path.some(lO));this.animationProgress=0;let S;this.mixTargetDelta=B=>{const W=B/1e3;qw(g.x,a.x,W),qw(g.y,a.y,W),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aO(this.relativeTarget,this.relativeTargetOrigin,_,W),S&&BM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=At()),Kn(S,this.relativeTarget)),k&&(this.animationValues=m,MM(m,f,this.latestValues,W,T,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=it.update(()=>{ed.hasAnimatedSinceResize=!0,this.currentAnimation=qM(0,Ww,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ww),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&IS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||At();const g=On(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const _=On(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+_}Kn(u,h),Na(u,m),Su(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new zM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<Hw.length;m++){const g="rotate"+Hw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Jh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=Jh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!to(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=Uw(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x:E,y:R}=this.projectionDelta;f.transformOrigin=`${E.origin*100}% ${R.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const k in jd){if(_[k]===void 0)continue;const{correct:V,applyTo:A}=jd[k],T=f.transform==="none"?_[k]:V(_[k],g);if(A){const S=A.length;for(let B=0;B<S;B++)f[A[B]]=T}else f[k]=T}return this.options.layoutId&&(f.pointerEvents=g===this?Jh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach($w),this.root.sharedNodes.clear()}}}function QM(t){t.updateLayout()}function YM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Qn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=On(_);_.min=i[g].min,_.max=_.min+E}):IS(o,n.layoutBox,i)&&Qn(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],E=On(i[g]);_.max=_.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+E)});const u=Ra();Su(u,i,n.layoutBox);const h=Ra();a?Su(h,t.applyTransform(r,!0),n.measuredBox):Su(h,i,n.layoutBox);const f=!PS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:E}=g;if(_&&E){const R=At();Cu(R,n.layoutBox,_.layoutBox);const k=At();Cu(k,i,E.layoutBox),SS(R,k)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=R,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function XM(t){no.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function JM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function eO(t){t.clearSnapshot()}function $w(t){t.clearMeasurements()}function tO(t){t.isLayoutDirty=!1}function nO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Gw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iO(t){t.resolveTargetDelta()}function rO(t){t.calcProjection()}function sO(t){t.resetRotation()}function oO(t){t.removeLeadSnapshot()}function qw(t,e,n){t.translate=pt(e.translate,0,n),t.scale=pt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Zw(t,e,n,i){t.min=pt(e.min,n.min,i),t.max=pt(e.max,n.max,i)}function aO(t,e,n,i){Zw(t.x,e.x,n.x,i),Zw(t.y,e.y,n.y,i)}function lO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uO={duration:.45,ease:[.4,0,.1,1]},Kw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Qw=Kw("applewebkit/")&&!Kw("chrome/")?Math.round:Pt;function Yw(t){t.min=Qw(t.min),t.max=Qw(t.max)}function cO(t){Yw(t.x),Yw(t.y)}function IS(t,e,n){return t==="position"||t==="preserve-aspect"&&!Cg(zw(e),zw(n),.2)}const hO=CS({attachResizeListener:(t,e)=>fr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),im={current:void 0},AS=CS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!im.current){const t=new hO({});t.mount(window),t.setOptions({layoutScroll:!0}),im.current=t}return im.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),dO={pan:{Feature:AM},drag:{Feature:IM,ProjectionNode:AS,MeasureLayout:xS}},fO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function pO(t){const e=fO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function kg(t,e,n=1){const[i,r]=pO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return cS(a)?parseFloat(a):a}else return vg(r)?kg(r,e,n+1):r}function mO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!vg(o))return;const a=kg(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!vg(o))continue;const a=kg(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const gO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),bS=t=>gO.has(t),yO=t=>Object.keys(t).some(bS),Xw=t=>t===Lo||t===we,Jw=(t,e)=>parseFloat(t.split(", ")[e]),ex=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Jw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Jw(o[1],t):0}},_O=new Set(["x","y","z"]),vO=mc.filter(t=>!_O.has(t));function wO(t){const e=[];return vO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const tl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ex(4,13),y:ex(5,14)};tl.translateX=tl.x;tl.translateY=tl.y;const xO=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=tl[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=tl[f](h,o)}),t},TO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(bS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=tu(m);const _=e[h];let E;if(Bd(_)){const R=_.length,k=_[0]===null?1:0;m=_[k],g=tu(m);for(let V=k;V<R&&_[V]!==null;V++)E?f_(tu(_[V])===E):E=tu(_[V])}else E=tu(_);if(g!==E)if(Xw(g)&&Xw(E)){const R=f.get();typeof R=="string"&&f.set(parseFloat(R)),typeof _=="string"?e[h]=parseFloat(_):Array.isArray(_)&&E===we&&(e[h]=_.map(parseFloat))}else g!=null&&g.transform&&(E!=null&&E.transform)&&(m===0||_===0)?m===0?f.set(E.transform(m)):e[h]=g.transform(_):(a||(o=wO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(_))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=xO(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),Vf&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function EO(t,e,n,i){return yO(e)?TO(t,e,n,i):{target:e,transitionEnd:i}}const PO=(t,e,n,i)=>{const r=mO(t,e,i);return e=r.target,i=r.transitionEnd,EO(t,e,n,i)},Rg={current:null},kS={current:!1};function SO(){if(kS.current=!0,!!Vf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rg.current=t.matches;t.addListener(e),e()}else Rg.current=!1}function CO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(Cn(o))t.addValue(r,o),Wd(i)&&i.add(r);else if(Cn(a))t.addValue(r,el(o,{owner:t})),Wd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,el(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const tx=new WeakMap,RS=Object.keys(ec),IO=RS.length,nx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],AO=r_.length;class bO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>it.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Ff(n),this.isVariantNode=mP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const _=m[g];u[g]!==void 0&&Cn(_)&&(_.set(u[g],!1),Wd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,tx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),kS.current||SO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){tx.delete(this.current),this.projection&&this.projection.unmount(),Pr(this.notifyUpdate),Pr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=No.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&it.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<IO;h++){const f=RS[h],{isEnabled:m,Feature:g,ProjectionNode:_,MeasureLayout:E}=ec[f];_&&(a=_),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),E&&(u=E))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:_,layoutRoot:E}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&ba(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:_,layoutRoot:E})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):At()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<nx.length;i++){const r=nx[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=CO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<AO;i++){const r=r_[i],o=this.props[r];(Ju(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=el(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=d_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Cn(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new T_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class NS extends bO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=GL(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){WL(this,i,a);const u=PO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function kO(t){return window.getComputedStyle(t)}class RO extends NS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(No.has(n)){const i=y_(n);return i&&i.default||0}else{const i=kO(e),r=(vP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return vS(e,n)}build(e,n,i,r){a_(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return h_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Cn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){SP(e,n,i,r)}}class NO extends NS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(No.has(n)){const i=y_(n);return i&&i.default||0}return n=CP.has(n)?n:n_(n),e.getAttribute(n)}measureInstanceViewportBox(){return At()}scrapeMotionValuesFromProps(e,n){return AP(e,n)}build(e,n,i,r){u_(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){IP(e,n,i,r)}mount(e){this.isSVGTag=c_(e.tagName),super.mount(e)}}const LO=(t,e)=>o_(t)?new NO(e,{enableHardwareAcceleration:!1}):new RO(e,{enableHardwareAcceleration:!0}),MO={layout:{ProjectionNode:AS,MeasureLayout:xS}},OO={...aM,...IN,...dO,...MO},ee=D2((t,e)=>pN(t,e,OO,LO));function LS(){const t=M.useRef(!1);return t_(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function DO(){const t=LS(),[e,n]=M.useState(0),i=M.useCallback(()=>{t.current&&n(e+1)},[e]);return[M.useCallback(()=>it.postRender(i),[i]),e]}class VO extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function jO({children:t,isPresent:e}){const n=M.useId(),i=M.useRef(null),r=M.useRef({width:0,height:0,top:0,left:0});return M.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),M.createElement(VO,{isPresent:e,childRef:i,sizeRef:r},M.cloneElement(t,{ref:i}))}const rm=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=bP(FO),h=M.useId(),f=M.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return M.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),M.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=M.createElement(jO,{isPresent:n},t)),M.createElement(Df.Provider,{value:f},t)};function FO(){return new Map}function BO(t){return M.useEffect(()=>()=>t(),[])}const io=t=>t.key||"";function zO(t,e){t.forEach(n=>{const i=io(n);e.set(i,n)})}function UO(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const ms=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=M.useContext(s_).forceRender||DO()[0],h=LS(),f=UO(t);let m=f;const g=M.useRef(new Map).current,_=M.useRef(m),E=M.useRef(new Map).current,R=M.useRef(!0);if(t_(()=>{R.current=!1,zO(f,E),_.current=m}),BO(()=>{R.current=!0,E.clear(),g.clear()}),R.current)return M.createElement(M.Fragment,null,m.map(T=>M.createElement(rm,{key:io(T),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},T)));m=[...m];const k=_.current.map(io),V=f.map(io),A=k.length;for(let T=0;T<A;T++){const S=k[T];V.indexOf(S)===-1&&!g.has(S)&&g.set(S,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((T,S)=>{if(V.indexOf(S)!==-1)return;const B=E.get(S);if(!B)return;const W=k.indexOf(S);let z=T;if(!z){const I=()=>{g.delete(S);const C=Array.from(E.keys()).filter(N=>!V.includes(N));if(C.forEach(N=>E.delete(N)),_.current=f.filter(N=>{const D=io(N);return D===S||C.includes(D)}),!g.size){if(h.current===!1)return;u(),i&&i()}};z=M.createElement(rm,{key:io(B),isPresent:!1,onExitComplete:I,custom:e,presenceAffectsLayout:o,mode:a},B),g.set(S,z)}m.splice(W,0,z)}),m=m.map(T=>{const S=T.key;return g.has(S)?T:M.createElement(rm,{key:io(T),isPresent:!0,presenceAffectsLayout:o,mode:a},T)}),M.createElement(M.Fragment,null,g.size?m:m.map(T=>M.cloneElement(T)))},HO=()=>{};var ix={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},WO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},OS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,E=f&63;h||(E=64,a||(_=64)),i.push(n[m],n[g],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new $O;const _=o<<2|u>>4;if(i.push(_),f!==64){const E=u<<4&240|f>>2;if(i.push(E),g!==64){const R=f<<6&192|g;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $O extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GO=function(t){const e=MS(t);return OS.encodeByteArray(e,!0)},Gd=function(t){return GO(t).replace(/\./g,"")},DS=function(t){try{return OS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=()=>qO().__FIREBASE_DEFAULTS__,KO=()=>{if(typeof process>"u"||typeof ix>"u")return;const t=ix.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DS(t[1]);return e&&JSON.parse(e)},Hf=()=>{try{return HO()||ZO()||KO()||QO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},VS=t=>{var e,n;return(n=(e=Hf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},YO=t=>{const e=VS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},jS=()=>{var t;return(t=Hf())==null?void 0:t.config},FS=t=>{var e;return(e=Hf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Gd(JSON.stringify(n)),Gd(JSON.stringify(a)),""].join(".")}const Iu={};function eD(){const t={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?t.emulator.push(e):t.prod.push(e);return t}function tD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let rx=!1;function zS(t,e){if(typeof window>"u"||typeof document>"u"||!ml(window.location.host)||Iu[t]===e||Iu[t]||rx)return;Iu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=eD().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{rx=!0,a()},_}function m(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=tD(i),E=n("text"),R=document.getElementById(E)||document.createElement("span"),k=n("learnmore"),V=document.getElementById(k)||document.createElement("a"),A=n("preprendIcon"),T=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const S=_.element;u(S),m(V,k);const B=f();h(T,A),S.append(T,R,V,B),document.body.appendChild(S)}o?(R.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function iD(){var e;const t=(e=Hf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aD(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lD(){return!iD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uD(){try{return typeof indexedDB=="object"}catch{return!1}}function cD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="FirebaseError";class Nr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=hD,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vc.prototype.create)}}class vc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?dD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Nr(r,u,i)}}function dD(t,e){return t.replace(fD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const fD=/\{\$([^}]+)}/g;function pD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Po(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(sx(o)&&sx(a)){if(!Po(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function sx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function mD(t,e){const n=new gD(t,e);return n.subscribe.bind(n)}class gD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");yD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=sm),r.error===void 0&&(r.error=sm),r.complete===void 0&&(r.complete=sm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return t&&t._delegate?t._delegate:t}class So{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new XO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wD(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:vD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vD(t){return t===ro?void 0:t}function wD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _D(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fe||(Fe={}));const TD={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},ED=Fe.INFO,PD={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},SD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=PD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class E_{constructor(e){this.name=e,this._logLevel=ED,this._logHandler=SD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const CD=(t,e)=>e.some(n=>t instanceof n);let ox,ax;function ID(){return ox||(ox=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AD(){return ax||(ax=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const US=new WeakMap,Ng=new WeakMap,HS=new WeakMap,om=new WeakMap,P_=new WeakMap;function bD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(gs(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&US.set(n,t)}).catch(()=>{}),P_.set(e,t),e}function kD(t){if(Ng.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Ng.set(t,e)}let Lg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ng.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RD(t){Lg=t(Lg)}function ND(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(am(this),e,...n);return HS.set(i,e.sort?e.sort():[e]),gs(i)}:AD().includes(t)?function(...e){return t.apply(am(this),e),gs(US.get(this))}:function(...e){return gs(t.apply(am(this),e))}}function LD(t){return typeof t=="function"?ND(t):(t instanceof IDBTransaction&&kD(t),CD(t,ID())?new Proxy(t,Lg):t)}function gs(t){if(t instanceof IDBRequest)return bD(t);if(om.has(t))return om.get(t);const e=LD(t);return e!==t&&(om.set(t,e),P_.set(e,t)),e}const am=t=>P_.get(t);function MD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=gs(a);return i&&a.addEventListener("upgradeneeded",h=>{i(gs(a.result),h.oldVersion,h.newVersion,gs(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const OD=["get","getKey","getAll","getAllKeys","count"],DD=["put","add","delete","clear"],lm=new Map;function lx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lm.get(e))return lm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=DD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||OD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return lm.set(e,o),o}RD(t=>({...t,get:(e,n,i)=>lx(e,n)||t.get(e,n,i),has:(e,n)=>!!lx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function jD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mg="@firebase/app",ux="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new E_("@firebase/app"),FD="@firebase/app-compat",BD="@firebase/analytics-compat",zD="@firebase/analytics",UD="@firebase/app-check-compat",HD="@firebase/app-check",WD="@firebase/auth",$D="@firebase/auth-compat",GD="@firebase/database",qD="@firebase/data-connect",ZD="@firebase/database-compat",KD="@firebase/functions",QD="@firebase/functions-compat",YD="@firebase/installations",XD="@firebase/installations-compat",JD="@firebase/messaging",eV="@firebase/messaging-compat",tV="@firebase/performance",nV="@firebase/performance-compat",iV="@firebase/remote-config",rV="@firebase/remote-config-compat",sV="@firebase/storage",oV="@firebase/storage-compat",aV="@firebase/firestore",lV="@firebase/ai",uV="@firebase/firestore-compat",cV="firebase",hV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="[DEFAULT]",dV={[Mg]:"fire-core",[FD]:"fire-core-compat",[zD]:"fire-analytics",[BD]:"fire-analytics-compat",[HD]:"fire-app-check",[UD]:"fire-app-check-compat",[WD]:"fire-auth",[$D]:"fire-auth-compat",[GD]:"fire-rtdb",[qD]:"fire-data-connect",[ZD]:"fire-rtdb-compat",[KD]:"fire-fn",[QD]:"fire-fn-compat",[YD]:"fire-iid",[XD]:"fire-iid-compat",[JD]:"fire-fcm",[eV]:"fire-fcm-compat",[tV]:"fire-perf",[nV]:"fire-perf-compat",[iV]:"fire-rc",[rV]:"fire-rc-compat",[sV]:"fire-gcs",[oV]:"fire-gcs-compat",[aV]:"fire-fst",[uV]:"fire-fst-compat",[lV]:"fire-vertex","fire-js":"fire-js",[cV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new Map,fV=new Map,Dg=new Map;function cx(t,e){try{t.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nl(t){const e=t.name;if(Dg.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;Dg.set(e,t);for(const n of qd.values())cx(n,t);for(const n of fV.values())cx(n,t);return!0}function S_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _i(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new vc("app","Firebase",pV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new So("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=hV;function WS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Og,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw ys.create("bad-app-name",{appName:String(r)});if(n||(n=jS()),!n)throw ys.create("no-options");const o=qd.get(r);if(o){if(Po(n,o.options)&&Po(i,o.config))return o;throw ys.create("duplicate-app",{appName:r})}const a=new xD(r);for(const h of Dg.values())a.addComponent(h);const u=new mV(n,i,a);return qd.set(r,u),u}function $S(t=Og){const e=qd.get(t);if(!e&&t===Og&&jS())return WS();if(!e)throw ys.create("no-app",{appName:t});return e}function _s(t,e,n){let i=dV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(a.join(" "));return}nl(new So(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="firebase-heartbeat-database",yV=1,nc="firebase-heartbeat-store";let um=null;function GS(){return um||(um=MD(gV,yV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),um}async function _V(t){try{const n=(await GS()).transaction(nc),i=await n.objectStore(nc).get(qS(t));return await n.done,i}catch(e){if(e instanceof Nr)Sr.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function hx(t,e){try{const i=(await GS()).transaction(nc,"readwrite");await i.objectStore(nc).put(e,qS(t)),await i.done}catch(n){if(n instanceof Nr)Sr.warn(n.message);else{const i=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(i.message)}}}function qS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=1024,wV=30;class xV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=dx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>wV){const a=PV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Sr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dx(),{heartbeatsToSend:i,unsentEntries:r}=TV(this._heartbeatsCache.heartbeats),o=Gd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Sr.warn(n),""}}}function dx(){return new Date().toISOString().substring(0,10)}function TV(t,e=vV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),fx(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),fx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class EV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uD()?cD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _V(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function fx(t){return Gd(JSON.stringify({version:2,heartbeats:t})).length}function PV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){nl(new So("platform-logger",e=>new VD(e),"PRIVATE")),nl(new So("heartbeat",e=>new xV(e),"PRIVATE")),_s(Mg,ux,t),_s(Mg,ux,"esm2020"),_s("fire-js","")}SV("");var px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,ZS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,C){function N(){}N.prototype=C.prototype,I.F=C.prototype,I.prototype=new N,I.prototype.constructor=I,I.D=function(D,j,U){for(var O=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)O[Te-2]=arguments[Te];return C.prototype[j].apply(D,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,C,N){N||(N=0);const D=Array(16);if(typeof C=="string")for(var j=0;j<16;++j)D[j]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(j=0;j<16;++j)D[j]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=I.g[0],N=I.g[1],j=I.g[2];let U=I.g[3],O;O=C+(U^N&(j^U))+D[0]+3614090360&4294967295,C=N+(O<<7&4294967295|O>>>25),O=U+(j^C&(N^j))+D[1]+3905402710&4294967295,U=C+(O<<12&4294967295|O>>>20),O=j+(N^U&(C^N))+D[2]+606105819&4294967295,j=U+(O<<17&4294967295|O>>>15),O=N+(C^j&(U^C))+D[3]+3250441966&4294967295,N=j+(O<<22&4294967295|O>>>10),O=C+(U^N&(j^U))+D[4]+4118548399&4294967295,C=N+(O<<7&4294967295|O>>>25),O=U+(j^C&(N^j))+D[5]+1200080426&4294967295,U=C+(O<<12&4294967295|O>>>20),O=j+(N^U&(C^N))+D[6]+2821735955&4294967295,j=U+(O<<17&4294967295|O>>>15),O=N+(C^j&(U^C))+D[7]+4249261313&4294967295,N=j+(O<<22&4294967295|O>>>10),O=C+(U^N&(j^U))+D[8]+1770035416&4294967295,C=N+(O<<7&4294967295|O>>>25),O=U+(j^C&(N^j))+D[9]+2336552879&4294967295,U=C+(O<<12&4294967295|O>>>20),O=j+(N^U&(C^N))+D[10]+4294925233&4294967295,j=U+(O<<17&4294967295|O>>>15),O=N+(C^j&(U^C))+D[11]+2304563134&4294967295,N=j+(O<<22&4294967295|O>>>10),O=C+(U^N&(j^U))+D[12]+1804603682&4294967295,C=N+(O<<7&4294967295|O>>>25),O=U+(j^C&(N^j))+D[13]+4254626195&4294967295,U=C+(O<<12&4294967295|O>>>20),O=j+(N^U&(C^N))+D[14]+2792965006&4294967295,j=U+(O<<17&4294967295|O>>>15),O=N+(C^j&(U^C))+D[15]+1236535329&4294967295,N=j+(O<<22&4294967295|O>>>10),O=C+(j^U&(N^j))+D[1]+4129170786&4294967295,C=N+(O<<5&4294967295|O>>>27),O=U+(N^j&(C^N))+D[6]+3225465664&4294967295,U=C+(O<<9&4294967295|O>>>23),O=j+(C^N&(U^C))+D[11]+643717713&4294967295,j=U+(O<<14&4294967295|O>>>18),O=N+(U^C&(j^U))+D[0]+3921069994&4294967295,N=j+(O<<20&4294967295|O>>>12),O=C+(j^U&(N^j))+D[5]+3593408605&4294967295,C=N+(O<<5&4294967295|O>>>27),O=U+(N^j&(C^N))+D[10]+38016083&4294967295,U=C+(O<<9&4294967295|O>>>23),O=j+(C^N&(U^C))+D[15]+3634488961&4294967295,j=U+(O<<14&4294967295|O>>>18),O=N+(U^C&(j^U))+D[4]+3889429448&4294967295,N=j+(O<<20&4294967295|O>>>12),O=C+(j^U&(N^j))+D[9]+568446438&4294967295,C=N+(O<<5&4294967295|O>>>27),O=U+(N^j&(C^N))+D[14]+3275163606&4294967295,U=C+(O<<9&4294967295|O>>>23),O=j+(C^N&(U^C))+D[3]+4107603335&4294967295,j=U+(O<<14&4294967295|O>>>18),O=N+(U^C&(j^U))+D[8]+1163531501&4294967295,N=j+(O<<20&4294967295|O>>>12),O=C+(j^U&(N^j))+D[13]+2850285829&4294967295,C=N+(O<<5&4294967295|O>>>27),O=U+(N^j&(C^N))+D[2]+4243563512&4294967295,U=C+(O<<9&4294967295|O>>>23),O=j+(C^N&(U^C))+D[7]+1735328473&4294967295,j=U+(O<<14&4294967295|O>>>18),O=N+(U^C&(j^U))+D[12]+2368359562&4294967295,N=j+(O<<20&4294967295|O>>>12),O=C+(N^j^U)+D[5]+4294588738&4294967295,C=N+(O<<4&4294967295|O>>>28),O=U+(C^N^j)+D[8]+2272392833&4294967295,U=C+(O<<11&4294967295|O>>>21),O=j+(U^C^N)+D[11]+1839030562&4294967295,j=U+(O<<16&4294967295|O>>>16),O=N+(j^U^C)+D[14]+4259657740&4294967295,N=j+(O<<23&4294967295|O>>>9),O=C+(N^j^U)+D[1]+2763975236&4294967295,C=N+(O<<4&4294967295|O>>>28),O=U+(C^N^j)+D[4]+1272893353&4294967295,U=C+(O<<11&4294967295|O>>>21),O=j+(U^C^N)+D[7]+4139469664&4294967295,j=U+(O<<16&4294967295|O>>>16),O=N+(j^U^C)+D[10]+3200236656&4294967295,N=j+(O<<23&4294967295|O>>>9),O=C+(N^j^U)+D[13]+681279174&4294967295,C=N+(O<<4&4294967295|O>>>28),O=U+(C^N^j)+D[0]+3936430074&4294967295,U=C+(O<<11&4294967295|O>>>21),O=j+(U^C^N)+D[3]+3572445317&4294967295,j=U+(O<<16&4294967295|O>>>16),O=N+(j^U^C)+D[6]+76029189&4294967295,N=j+(O<<23&4294967295|O>>>9),O=C+(N^j^U)+D[9]+3654602809&4294967295,C=N+(O<<4&4294967295|O>>>28),O=U+(C^N^j)+D[12]+3873151461&4294967295,U=C+(O<<11&4294967295|O>>>21),O=j+(U^C^N)+D[15]+530742520&4294967295,j=U+(O<<16&4294967295|O>>>16),O=N+(j^U^C)+D[2]+3299628645&4294967295,N=j+(O<<23&4294967295|O>>>9),O=C+(j^(N|~U))+D[0]+4096336452&4294967295,C=N+(O<<6&4294967295|O>>>26),O=U+(N^(C|~j))+D[7]+1126891415&4294967295,U=C+(O<<10&4294967295|O>>>22),O=j+(C^(U|~N))+D[14]+2878612391&4294967295,j=U+(O<<15&4294967295|O>>>17),O=N+(U^(j|~C))+D[5]+4237533241&4294967295,N=j+(O<<21&4294967295|O>>>11),O=C+(j^(N|~U))+D[12]+1700485571&4294967295,C=N+(O<<6&4294967295|O>>>26),O=U+(N^(C|~j))+D[3]+2399980690&4294967295,U=C+(O<<10&4294967295|O>>>22),O=j+(C^(U|~N))+D[10]+4293915773&4294967295,j=U+(O<<15&4294967295|O>>>17),O=N+(U^(j|~C))+D[1]+2240044497&4294967295,N=j+(O<<21&4294967295|O>>>11),O=C+(j^(N|~U))+D[8]+1873313359&4294967295,C=N+(O<<6&4294967295|O>>>26),O=U+(N^(C|~j))+D[15]+4264355552&4294967295,U=C+(O<<10&4294967295|O>>>22),O=j+(C^(U|~N))+D[6]+2734768916&4294967295,j=U+(O<<15&4294967295|O>>>17),O=N+(U^(j|~C))+D[13]+1309151649&4294967295,N=j+(O<<21&4294967295|O>>>11),O=C+(j^(N|~U))+D[4]+4149444226&4294967295,C=N+(O<<6&4294967295|O>>>26),O=U+(N^(C|~j))+D[11]+3174756917&4294967295,U=C+(O<<10&4294967295|O>>>22),O=j+(C^(U|~N))+D[2]+718787259&4294967295,j=U+(O<<15&4294967295|O>>>17),O=N+(U^(j|~C))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(j+(O<<21&4294967295|O>>>11))&4294967295,I.g[2]=I.g[2]+j&4294967295,I.g[3]=I.g[3]+U&4294967295}i.prototype.v=function(I,C){C===void 0&&(C=I.length);const N=C-this.blockSize,D=this.C;let j=this.h,U=0;for(;U<C;){if(j==0)for(;U<=N;)r(this,I,U),U+=this.blockSize;if(typeof I=="string"){for(;U<C;)if(D[j++]=I.charCodeAt(U++),j==this.blockSize){r(this,D),j=0;break}}else for(;U<C;)if(D[j++]=I[U++],j==this.blockSize){r(this,D),j=0;break}}this.h=j,this.o+=C},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;C=this.o*8;for(var N=I.length-8;N<I.length;++N)I[N]=C&255,C/=256;for(this.v(I),I=Array(16),C=0,N=0;N<4;++N)for(let D=0;D<32;D+=8)I[C++]=this.g[N]>>>D&255;return I};function o(I,C){var N=u;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=C(I)}function a(I,C){this.h=C;const N=[];let D=!0;for(let j=I.length-1;j>=0;j--){const U=I[j]|0;D&&U==C||(N[j]=U,D=!1)}this.g=N}var u={};function h(I){return-128<=I&&I<128?o(I,function(C){return new a([C|0],C<0?-1:0)}):new a([I|0],I<0?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return g;if(I<0)return V(f(-I));const C=[];let N=1;for(let D=0;I>=N;D++)C[D]=I/N|0,N*=4294967296;return new a(C,0)}function m(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return V(m(I.substring(1),C));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(C,8));let D=g;for(let U=0;U<I.length;U+=8){var j=Math.min(8,I.length-U);const O=parseInt(I.substring(U,U+j),C);j<8?(j=f(Math.pow(C,j)),D=D.j(j).add(f(O))):(D=D.j(N),D=D.add(f(O)))}return D}var g=h(0),_=h(1),E=h(16777216);t=a.prototype,t.m=function(){if(k(this))return-V(this).m();let I=0,C=1;for(let N=0;N<this.g.length;N++){const D=this.i(N);I+=(D>=0?D:4294967296+D)*C,C*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R(this))return"0";if(k(this))return"-"+V(this).toString(I);const C=f(Math.pow(I,6));var N=this;let D="";for(;;){const j=B(N,C).g;N=A(N,j.j(C));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(I);if(N=j,R(N))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function R(I){if(I.h!=0)return!1;for(let C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=A(this,I),k(I)?-1:R(I)?0:1};function V(I){const C=I.g.length,N=[];for(let D=0;D<C;D++)N[D]=~I.g[D];return new a(N,~I.h).add(_)}t.abs=function(){return k(this)?V(this):this},t.add=function(I){const C=Math.max(this.g.length,I.g.length),N=[];let D=0;for(let j=0;j<=C;j++){let U=D+(this.i(j)&65535)+(I.i(j)&65535),O=(U>>>16)+(this.i(j)>>>16)+(I.i(j)>>>16);D=O>>>16,U&=65535,O&=65535,N[j]=O<<16|U}return new a(N,N[N.length-1]&-2147483648?-1:0)};function A(I,C){return I.add(V(C))}t.j=function(I){if(R(this)||R(I))return g;if(k(this))return k(I)?V(this).j(V(I)):V(V(this).j(I));if(k(I))return V(this.j(V(I)));if(this.l(E)<0&&I.l(E)<0)return f(this.m()*I.m());const C=this.g.length+I.g.length,N=[];for(var D=0;D<2*C;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(let j=0;j<I.g.length;j++){const U=this.i(D)>>>16,O=this.i(D)&65535,Te=I.i(j)>>>16,se=I.i(j)&65535;N[2*D+2*j]+=O*se,T(N,2*D+2*j),N[2*D+2*j+1]+=U*se,T(N,2*D+2*j+1),N[2*D+2*j+1]+=O*Te,T(N,2*D+2*j+1),N[2*D+2*j+2]+=U*Te,T(N,2*D+2*j+2)}for(I=0;I<C;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=C;I<2*C;I++)N[I]=0;return new a(N,0)};function T(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function S(I,C){this.g=I,this.h=C}function B(I,C){if(R(C))throw Error("division by zero");if(R(I))return new S(g,g);if(k(I))return C=B(V(I),C),new S(V(C.g),V(C.h));if(k(C))return C=B(I,V(C)),new S(V(C.g),C.h);if(I.g.length>30){if(k(I)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var N=_,D=C;D.l(I)<=0;)N=W(N),D=W(D);var j=z(N,1),U=z(D,1);for(D=z(D,2),N=z(N,2);!R(D);){var O=U.add(D);O.l(I)<=0&&(j=j.add(N),U=O),D=z(D,1),N=z(N,1)}return C=A(I,j.j(C)),new S(j,C)}for(j=g;I.l(C)>=0;){for(N=Math.max(1,Math.floor(I.m()/C.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=f(N),O=U.j(C);k(O)||O.l(I)>0;)N-=D,U=f(N),O=U.j(C);R(U)&&(U=_),j=j.add(U),I=A(I,O)}return new S(j,I)}t.B=function(I){return B(this,I).h},t.and=function(I){const C=Math.max(this.g.length,I.g.length),N=[];for(let D=0;D<C;D++)N[D]=this.i(D)&I.i(D);return new a(N,this.h&I.h)},t.or=function(I){const C=Math.max(this.g.length,I.g.length),N=[];for(let D=0;D<C;D++)N[D]=this.i(D)|I.i(D);return new a(N,this.h|I.h)},t.xor=function(I){const C=Math.max(this.g.length,I.g.length),N=[];for(let D=0;D<C;D++)N[D]=this.i(D)^I.i(D);return new a(N,this.h^I.h)};function W(I){const C=I.g.length+1,N=[];for(let D=0;D<C;D++)N[D]=I.i(D)<<1|I.i(D-1)>>>31;return new a(N,I.h)}function z(I,C){const N=C>>5;C%=32;const D=I.g.length-N,j=[];for(let U=0;U<D;U++)j[U]=C>0?I.i(U+N)>>>C|I.i(U+N+1)<<32-C:I.i(U+N);return new a(j,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ZS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,vs=a}).apply(typeof px<"u"?px:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KS,cu,QS,td,Vg,YS,XS,JS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var x=i;c=c.split(".");for(var b=0;b<c.length-1;b++){var H=c[b];if(!(H in x))break e;x=x[H]}c=c[c.length-1],b=x[c],y=y(b),y!=b&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var x=[],b;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&x.push([b,y[b]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,x){return c.call.apply(c.bind,arguments)}function f(c,y,x){return f=h,f.apply(null,arguments)}function m(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var b=x.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function g(c,y){function x(){}x.prototype=y.prototype,c.Z=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Ob=function(b,H,G){for(var ne=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)ne[Ce-2]=arguments[Ce];return y.prototype[H].apply(b,ne)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function E(c){const y=c.length;if(y>0){const x=Array(y);for(let b=0;b<y;b++)x[b]=c[b];return x}return[]}function R(c,y){for(let b=1;b<arguments.length;b++){const H=arguments[b];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=c.length||0;const G=H.length||0;c.length=x+G;for(let ne=0;ne<G;ne++)c[x+ne]=H[ne]}else c.push(H)}}class k{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(c){a.setTimeout(()=>{throw c},0)}function A(){var c=I;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class T{constructor(){this.h=this.g=null}add(y,x){const b=S.get();b.set(y,x),this.h?this.h.next=b:this.g=b,this.h=b}}var S=new k(()=>new B,c=>c.reset());class B{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let W,z=!1,I=new T,C=()=>{const c=Promise.resolve(void 0);W=()=>{c.then(N)}};function N(){for(var c;c=A();){try{c.h.call(c.g)}catch(x){V(x)}var y=S;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}z=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};a.addEventListener("test",x,y),a.removeEventListener("test",x,y)}catch{}return c}();function O(c){return/^[\s\xa0]*$/.test(c)}function Te(c,y){j.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(Te,j),Te.prototype.init=function(c,y){const x=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var se="closure_listenable_"+(Math.random()*1e6|0),fe=0;function Ie(c,y,x,b,H){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!b,this.ha=H,this.key=++fe,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function oe(c,y,x){for(const b in c)y.call(x,c[b],b,c)}function J(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function ie(c){const y={};for(const x in c)y[x]=c[x];return y}const Pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ze(c,y){let x,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(x in b)c[x]=b[x];for(let G=0;G<Pe.length;G++)x=Pe[G],Object.prototype.hasOwnProperty.call(b,x)&&(c[x]=b[x])}}function Le(c){this.src=c,this.g={},this.h=0}Le.prototype.add=function(c,y,x,b,H){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const ne=ge(c,y,b,H);return ne>-1?(y=c[ne],x||(y.fa=!1)):(y=new Ie(y,this.src,G,!!b,H),y.fa=x,c.push(y)),y};function ke(c,y){const x=y.type;if(x in c.g){var b=c.g[x],H=Array.prototype.indexOf.call(b,y,void 0),G;(G=H>=0)&&Array.prototype.splice.call(b,H,1),G&&(Z(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function ge(c,y,x,b){for(let H=0;H<c.length;++H){const G=c[H];if(!G.da&&G.listener==y&&G.capture==!!x&&G.ha==b)return H}return-1}var ht="closure_lm_"+(Math.random()*1e6|0),Kt={};function oi(c,y,x,b,H){if(Array.isArray(y)){for(let G=0;G<y.length;G++)oi(c,y[G],x,b,H);return null}return x=Ne(x),c&&c[se]?c.J(y,x,u(b)?!!b.capture:!1,H):Bn(c,y,x,!1,b,H)}function Bn(c,y,x,b,H,G){if(!y)throw Error("Invalid event type");const ne=u(H)?!!H.capture:!!H;let Ce=Re(c);if(Ce||(c[ht]=Ce=new Le(c)),x=Ce.add(y,x,b,ne,G),x.proxy)return x;if(b=an(),x.proxy=b,b.src=c,b.listener=x,c.addEventListener)U||(H=ne),H===void 0&&(H=!1),c.addEventListener(y.toString(),b,H);else if(c.attachEvent)c.attachEvent(he(y.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return x}function an(){function c(x){return y.call(c.src,c.listener,x)}const y=pe;return c}function ai(c,y,x,b,H){if(Array.isArray(y))for(var G=0;G<y.length;G++)ai(c,y[G],x,b,H);else b=u(b)?!!b.capture:!!b,x=Ne(x),c&&c[se]?(c=c.i,G=String(y).toString(),G in c.g&&(y=c.g[G],x=ge(y,x,b,H),x>-1&&(Z(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete c.g[G],c.h--)))):c&&(c=Re(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ge(y,x,b,H)),(x=c>-1?y[c]:null)&&te(x))}function te(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[se])ke(y.i,c);else{var x=c.type,b=c.proxy;y.removeEventListener?y.removeEventListener(x,b,c.capture):y.detachEvent?y.detachEvent(he(x),b):y.addListener&&y.removeListener&&y.removeListener(b),(x=Re(y))?(ke(x,c),x.h==0&&(x.src=null,y[ht]=null)):Z(c)}}}function he(c){return c in Kt?Kt[c]:Kt[c]="on"+c}function pe(c,y){if(c.da)c=!0;else{y=new Te(y,this);const x=c.listener,b=c.ha||c.src;c.fa&&te(c),c=x.call(b,y)}return c}function Re(c){return c=c[ht],c instanceof Le?c:null}var me="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ne(c){return typeof c=="function"?c:(c[me]||(c[me]=function(y){return c.handleEvent(y)}),c[me])}function Ue(){D.call(this),this.i=new Le(this),this.M=this,this.G=null}g(Ue,D),Ue.prototype[se]=!0,Ue.prototype.removeEventListener=function(c,y,x,b){ai(this,c,y,x,b)};function je(c,y){var x,b=c.G;if(b)for(x=[];b;b=b.G)x.push(b);if(c=c.M,b=y.type||y,typeof y=="string")y=new j(y,c);else if(y instanceof j)y.target=y.target||c;else{var H=y;y=new j(b,c),Ze(y,H)}H=!0;let G,ne;if(x)for(ne=x.length-1;ne>=0;ne--)G=y.g=x[ne],H=ye(G,b,!0,y)&&H;if(G=y.g=c,H=ye(G,b,!0,y)&&H,H=ye(G,b,!1,y)&&H,x)for(ne=0;ne<x.length;ne++)G=y.g=x[ne],H=ye(G,b,!1,y)&&H}Ue.prototype.N=function(){if(Ue.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const x=c.g[y];for(let b=0;b<x.length;b++)Z(x[b]);delete c.g[y],c.h--}}this.G=null},Ue.prototype.J=function(c,y,x,b){return this.i.add(String(c),y,!1,x,b)},Ue.prototype.K=function(c,y,x,b){return this.i.add(String(c),y,!0,x,b)};function ye(c,y,x,b){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let G=0;G<y.length;++G){const ne=y[G];if(ne&&!ne.da&&ne.capture==x){const Ce=ne.listener,qe=ne.ha||ne.src;ne.fa&&ke(c.i,ne),H=Ce.call(qe,b)!==!1&&H}}return H&&!b.defaultPrevented}function Me(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function dt(c){c.g=Me(()=>{c.g=null,c.i&&(c.i=!1,dt(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class rt extends D{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function et(c){D.call(this),this.h=c,this.g={}}g(et,D);var li=[];function zn(c){oe(c.g,function(y,x){this.g.hasOwnProperty(x)&&te(y)},c),c.g={}}et.prototype.N=function(){et.Z.N.call(this),zn(this)},et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=a.JSON.stringify,Tl=a.JSON.parse,Nc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function El(){}function Lc(){}var Lr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bs(){j.call(this,"d")}g(Bs,j);function Fo(){j.call(this,"c")}g(Fo,j);var Qi={},Mr=null;function Bo(){return Mr=Mr||new Ue}Qi.Ia="serverreachability";function Mc(c){j.call(this,Qi.Ia,c)}g(Mc,j);function Or(c){const y=Bo();je(y,new Mc(y))}Qi.STAT_EVENT="statevent";function Pl(c,y){j.call(this,Qi.STAT_EVENT,c),this.stat=y}g(Pl,j);function Vt(c){const y=Bo();je(y,new Pl(y,c))}Qi.Ja="timingevent";function Oc(c,y){j.call(this,Qi.Ja,c),this.size=y}g(Oc,j);function zs(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Us(){this.g=!0}Us.prototype.ua=function(){this.g=!1};function lp(c,y,x,b,H,G){c.info(function(){if(c.g)if(G){var ne="",Ce=G.split("&");for(let Qe=0;Qe<Ce.length;Qe++){var qe=Ce[Qe].split("=");if(qe.length>1){const xt=qe[0];qe=qe[1];const Gn=xt.split("_");ne=Gn.length>=2&&Gn[1]=="type"?ne+(xt+"="+qe+"&"):ne+(xt+"=redacted&")}}}else ne=null;else ne=G;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+y+`
`+x+`
`+ne})}function up(c,y,x,b,H,G,ne){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+y+`
`+x+`
`+G+" "+ne})}function Dr(c,y,x,b){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+cp(c,x)+(b?" "+b:"")})}function Sl(c,y){c.info(function(){return"TIMEOUT: "+y})}Us.prototype.info=function(){};function cp(c,y){if(!c.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var x=G[c];if(!(x.length<2)){var b=x[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ne=1;ne<b.length;ne++)b[ne]=""}}}}return In(G)}catch{return y}}var zo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Dc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vc;function gn(){}g(gn,El),gn.prototype.g=function(){return new XMLHttpRequest},Vc=new gn;function ce(c){return encodeURIComponent(String(c))}function jc(c){var y=1;c=c.split(":");const x=[];for(;y>0&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function ui(c,y,x,b){this.j=c,this.i=y,this.l=x,this.S=b||1,this.V=new et(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cl}function Cl(){this.i=null,this.g="",this.h=!1}var Il={},Hs={};function Uo(c,y,x){c.M=1,c.A=tt(ln(y)),c.u=x,c.R=!0,Yi(c,null)}function Yi(c,y){c.F=Date.now(),Ho(c),c.B=ln(c.A);var x=c.B,b=c.S;Array.isArray(b)||(b=[String(b)]),Zo(x.i,"t",b),c.C=0,x=c.j.L,c.h=new Cl,c.g=zl(c.j,x?y:null,!c.u),c.P>0&&(c.O=new rt(f(c.Y,c,c.g),c.P)),y=c.V,x=c.g,b=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(li[0]=H.toString()),H=li);for(let G=0;G<H.length;G++){const ne=oi(x,H[G],b||y.handleEvent,!1,y.h||y);if(!ne)break;y.g[ne.key]=ne}y=c.J?ie(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Or(),lp(c.i,c.v,c.B,c.l,c.S,c.u)}ui.prototype.ba=function(c){c=c.target;const y=this.O;y&&Ai(c)==3?y.j():this.Y(c)},ui.prototype.Y=function(c){try{if(c==this.g)e:{const Ce=Ai(this.g),qe=this.g.ya(),Qe=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Ml(this.g)))){this.K||Ce!=4||qe==7||(qe==8||Qe<=0?Or(3):Or(2)),Wo(this);var y=this.g.ca();this.X=y;var x=Fc(this);if(this.o=y==200,up(this.i,this.v,this.B,this.l,this.S,Ce,y),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(b)){var G=b;break t}}G=null}if(c=G)Dr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Al(this,c);else{this.o=!1,this.m=3,Vt(12),Un(this),Ws(this);break e}}if(this.R){c=!0;let xt;for(;!this.K&&this.C<x.length;)if(xt=hp(this,x),xt==Hs){Ce==4&&(this.m=4,Vt(14),c=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==Il){this.m=4,Vt(15),Dr(this.i,this.l,x,"[Invalid Chunk]"),c=!1;break}else Dr(this.i,this.l,xt,null),Al(this,xt);if(Bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||x.length!=0||this.h.h||(this.m=1,Vt(16),c=!1),this.o=this.o&&c,!c)Dr(this.i,this.l,x,"[Invalid Chunked Response]"),Un(this),Ws(this);else if(x.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Fl(ne),ne.P=!0,Vt(11))}}else Dr(this.i,this.l,x,null),Al(this,x);Ce==4&&Un(this),this.o&&!this.K&&(Ce==4?bn(this.j,this):(this.o=!1,Ho(this)))}else Ol(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Un(this),Ws(this)}}}catch{}finally{}};function Fc(c){if(!Bc(c))return c.g.la();const y=Ml(c.g);if(y==="")return"";let x="";const b=y.length,H=Ai(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Un(c),Ws(c),"";c.h.i=new a.TextDecoder}for(let G=0;G<b;G++)c.h.h=!0,x+=c.h.i.decode(y[G],{stream:!(H&&G==b-1)});return y.length=0,c.h.g+=x,c.C=0,c.h.g}function Bc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function hp(c,y){var x=c.C,b=y.indexOf(`
`,x);return b==-1?Hs:(x=Number(y.substring(x,b)),isNaN(x)?Il:(b+=1,b+x>y.length?Hs:(y=y.slice(b,b+x),c.C=b+x,y)))}ui.prototype.cancel=function(){this.K=!0,Un(this)};function Ho(c){c.T=Date.now()+c.H,zc(c,c.H)}function zc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=zs(f(c.aa,c),y)}function Wo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}ui.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Sl(this.i,this.B),this.M!=2&&(Or(),Vt(17)),Un(this),this.m=2,Ws(this)):zc(this,this.T-c)};function Ws(c){c.j.I==0||c.K||bn(c.j,c)}function Un(c){Wo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,zn(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Al(c,y){try{var x=c.j;if(x.I!=0&&(x.g==c||$s(x.h,c))){if(!c.L&&$s(x.h,c)&&x.I==3){try{var b=x.Ba.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<c.F)Jo(x),Yo(x);else break e;jl(x),Vt(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=zs(f(x.Va,x),6e3));Wc(x.h)<=1&&x.ta&&(x.ta=void 0)}else ki(x,11)}else if((c.L||x.g==c)&&Jo(x),!O(y))for(H=x.Ba.g.parse(y),y=0;y<H.length;y++){let Qe=H[y];const xt=Qe[0];if(!(xt<=x.K))if(x.K=xt,Qe=Qe[1],x.I==2)if(Qe[0]=="c"){x.M=Qe[1],x.ba=Qe[2];const Gn=Qe[3];Gn!=null&&(x.ka=Gn,x.j.info("VER="+x.ka));const di=Qe[4];di!=null&&(x.za=di,x.j.info("SVER="+x.za));const qn=Qe[5];qn!=null&&typeof qn=="number"&&qn>0&&(b=1.5*qn,x.O=b,x.j.info("backChannelRequestTimeoutMs_="+b)),b=x;const Ri=c.g;if(Ri){const na=Ri.g?Ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var G=b.h;G.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Xi(G,G.h),G.h=null))}if(b.G){const ia=Ri.g?Ri.g.getResponseHeader("X-HTTP-Session-Id"):null;ia&&(b.wa=ia,le(b.J,b.G,ia))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-c.F,x.j.info("Handshake RTT: "+x.T+"ms")),b=x;var ne=c;if(b.na=Bl(b,b.L?b.ba:null,b.W),ne.L){bl(b.h,ne);var Ce=ne,qe=b.O;qe&&(Ce.H=qe),Ce.D&&(Wo(Ce),Ho(Ce)),b.g=ne}else Vl(b);x.i.length>0&&bi(x)}else Qe[0]!="stop"&&Qe[0]!="close"||ki(x,7);else x.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?ki(x,7):Oe(x):Qe[0]!="noop"&&x.l&&x.l.qa(Qe),x.A=0)}}Or(4)}catch{}}var dp=class{constructor(c,y){this.g=c,this.map=y}};function Uc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Wc(c){return c.h?1:c.g?c.g.size:0}function $s(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Xi(c,y){c.g?c.g.add(y):c.h=y}function bl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Uc.prototype.cancel=function(){if(this.i=kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function kl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.G);return y}return E(c.i)}var Vr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function He(c,y){if(c){c=c.split("&");for(let x=0;x<c.length;x++){const b=c[x].indexOf("=");let H,G=null;b>=0?(H=c[x].substring(0,b),G=c[x].substring(b+1)):H=c[x],y(H,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ge(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Ge?(this.l=c.l,Hn(this,c.j),this.o=c.o,this.g=c.g,Wn(this,c.u),this.h=c.h,Gs(this,qs(c.i)),this.m=c.m):c&&(y=String(c).match(Vr))?(this.l=!1,Hn(this,y[1]||"",!0),this.o=Ji(y[2]||""),this.g=Ji(y[3]||"",!0),Wn(this,y[4]),this.h=Ji(y[5]||"",!0),Gs(this,y[6]||"",!0),this.m=Ji(y[7]||"")):(this.l=!1,this.i=new ci(null,this.l))}Ge.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Si(y,$c,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Si(y,$c,!0),"@"),c.push(ce(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&c.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(Si(x,x.charAt(0)=="/"?er:$o,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",Si(x,tr)),c.join("")},Ge.prototype.resolve=function(c){const y=ln(this);let x=!!c.j;x?Hn(y,c.j):x=!!c.o,x?y.o=c.o:x=!!c.g,x?y.g=c.g:x=c.u!=null;var b=c.h;if(x)Wn(y,c.u);else if(x=!!c.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=y.h.lastIndexOf("/");H!=-1&&(b=y.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const G=[];for(let ne=0;ne<H.length;){const Ce=H[ne++];Ce=="."?b&&ne==H.length&&G.push(""):Ce==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),b&&ne==H.length&&G.push("")):(G.push(Ce),b=!0)}b=G.join("/")}else b=H}return x?y.h=b:x=c.i.toString()!=="",x?Gs(y,qs(c.i)):x=!!c.m,x&&(y.m=c.m),y};function ln(c){return new Ge(c)}function Hn(c,y,x){c.j=x?Ji(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Wn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Gs(c,y,x){y instanceof ci?(c.i=y,Rl(c.i,c.l)):(x||(y=Si(y,vt)),c.i=new ci(y,c.l))}function le(c,y,x){c.i.set(y,x)}function tt(c){return le(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ji(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Si(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,yn),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $c=/[#\/\?@]/g,$o=/[#\?:]/g,er=/[#\?]/g,vt=/[#\?@]/g,tr=/#/g;function ci(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function An(c){c.g||(c.g=new Map,c.h=0,c.i&&He(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=ci.prototype,t.add=function(c,y){An(this),this.i=null,c=Ci(this,c);let x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function Go(c,y){An(c),y=Ci(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function jr(c,y){return An(c),y=Ci(c,y),c.g.has(y)}t.forEach=function(c,y){An(this),this.g.forEach(function(x,b){x.forEach(function(H){c.call(y,H,b,this)},this)},this)};function qo(c,y){An(c);let x=[];if(typeof y=="string")jr(c,y)&&(x=x.concat(c.g.get(Ci(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)x=x.concat(c[y]);return x}t.set=function(c,y){return An(this),this.i=null,c=Ci(this,c),jr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=qo(this,c),c.length>0?String(c[0]):y):y};function Zo(c,y,x){Go(c,y),x.length>0&&(c.i=null,c.g.set(Ci(c,y),E(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let b=0;b<y.length;b++){var x=y[b];const H=ce(x);x=qo(this,x);for(let G=0;G<x.length;G++){let ne=H;x[G]!==""&&(ne+="="+ce(x[G])),c.push(ne)}}return this.i=c.join("&")};function qs(c){const y=new ci;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Ci(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Rl(c,y){y&&!c.j&&(An(c),c.i=null,c.g.forEach(function(x,b){const H=b.toLowerCase();b!=H&&(Go(this,b),Zo(this,H,x))},c)),c.j=y}function Ko(c,y){const x=new Us;if(a.Image){const b=new Image;b.onload=m($n,x,"TestLoadImage: loaded",!0,y,b),b.onerror=m($n,x,"TestLoadImage: error",!1,y,b),b.onabort=m($n,x,"TestLoadImage: abort",!1,y,b),b.ontimeout=m($n,x,"TestLoadImage: timeout",!1,y,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else y(!1)}function Gc(c,y){const x=new Us,b=new AbortController,H=setTimeout(()=>{b.abort(),$n(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:b.signal}).then(G=>{clearTimeout(H),G.ok?$n(x,"TestPingServer: ok",!0,y):$n(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),$n(x,"TestPingServer: error",!1,y)})}function $n(c,y,x,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(x)}catch{}}function fp(){this.g=new Nc}function Se(c){this.i=c.Sb||null,this.h=c.ab||!1}g(Se,El),Se.prototype.g=function(){return new un(this.i,this.h)};function un(c,y){Ue.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(un,Ue),t=un.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,nr(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,nr(this)),this.g&&(this.readyState=3,nr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xe(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xe(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Fr(this):nr(this),this.readyState==3&&Xe(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Fr(this))},t.Na=function(c){this.g&&(this.response=c,Fr(this))},t.ga=function(){this.g&&Fr(this)};function Fr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,nr(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function nr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(un.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Qo(c){let y="";return oe(c,function(x,b){y+=b,y+=":",y+=x,y+=`\r
`}),y}function Zs(c,y,x){e:{for(b in x){var b=!1;break e}b=!0}b||(x=Qo(x),typeof c=="string"?x!=null&&ce(x):le(c,y,x))}function Ke(c){Ue.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Ke,Ue);var Nl=/^https?$/i,Ks=["POST","PUT"];t=Ke.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,x,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(G){St(this,G);return}if(c=x||"",x=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)x.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())x.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(x.keys()).find(G=>G.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Ks,y,void 0)>=0)||b||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ne]of x)this.g.setRequestHeader(G,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){St(this,G)}};function St(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,Ii(c),Qs(c)}function Ii(c){c.A||(c.A=!0,je(c,"complete"),je(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,je(this,"complete"),je(this,"abort"),Qs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qs(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ll(this):this.Xa())},t.Xa=function(){Ll(this)};function Ll(c){if(c.h&&typeof o<"u"){if(c.v&&Ai(c)==4)setTimeout(c.Ca.bind(c),0);else if(je(c,"readystatechange"),Ai(c)==4){c.h=!1;try{const G=c.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var b;if(b=G===0){let ne=String(c.D).match(Vr)[1]||null;!ne&&a.self&&a.self.location&&(ne=a.self.location.protocol.slice(0,-1)),b=!Nl.test(ne?ne.toLowerCase():"")}x=b}if(x)je(c,"complete"),je(c,"success");else{c.o=6;try{var H=Ai(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",Ii(c)}}finally{Qs(c)}}}}function Qs(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const x=c.g;c.g=null,y||je(c,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ai(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Tl(y)}};function Ml(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ol(c){const y={};c=(c.g&&Ai(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(O(c[b]))continue;var x=jc(c[b]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const G=y[H]||[];y[H]=G,G.push(x)}J(y,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function Dl(c){this.za=0,this.i=[],this.j=new Us,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ys("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ys("baseRetryDelayMs",5e3,c),this.Za=Ys("retryDelaySeedMs",1e4,c),this.Ta=Ys("forwardChannelMaxRetries",2,c),this.va=Ys("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Uc(c&&c.concurrentRequestLimit),this.Ba=new fp,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Dl.prototype,t.ka=8,t.I=1,t.connect=function(c,y,x,b){Vt(0),this.W=c,this.H=y||{},x&&b!==void 0&&(this.H.OSID=x,this.H.OAID=b),this.F=this.X,this.J=Bl(this,null,this.W),bi(this)};function Oe(c){if(_n(c),c.I==3){var y=c.V++,x=ln(c.J);if(le(x,"SID",c.M),le(x,"RID",y),le(x,"TYPE","terminate"),ir(c,x),y=new ui(c,c.j,y),y.M=2,y.A=tt(ln(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=y.A,x=!0),x||(y.g=zl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ho(y)}hi(c)}function Yo(c){c.g&&(Fl(c),c.g.cancel(),c.g=null)}function _n(c){Yo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Jo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function bi(c){if(!Hc(c.h)&&!c.m){c.m=!0;var y=c.Ea;W||C(),z||(W(),z=!0),I.add(y,c),c.D=0}}function qc(c,y){return Wc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=zs(f(c.Ea,c,y),Qc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new ui(this,this.j,c);let G=this.o;if(this.U&&(G?(G=ie(G),Ze(G,this.U)):G=this.U),this.u!==null||this.R||(H.J=G,G=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var b=this.i[x];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Kc(this,H,y),x=ln(this.J),le(x,"RID",c),le(x,"CVER",22),this.G&&le(x,"X-HTTP-Session-Id",this.G),ir(this,x),G&&(this.R?y="headers="+ce(Qo(G))+"&"+y:this.u&&Zs(x,this.u,G)),Xi(this.h,H),this.Ra&&le(x,"TYPE","init"),this.S?(le(x,"$req",y),le(x,"SID","null"),H.U=!0,Uo(H,x,null)):Uo(H,x,y),this.I=2}}else this.I==3&&(c?Zc(this,c):this.i.length==0||Hc(this.h)||Zc(this))};function Zc(c,y){var x;y?x=y.l:x=c.V++;const b=ln(c.J);le(b,"SID",c.M),le(b,"RID",x),le(b,"AID",c.K),ir(c,b),c.u&&c.o&&Zs(b,c.u,c.o),x=new ui(c,c.j,x,c.D+1),c.u===null&&(x.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Kc(c,x,1e3),x.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Xi(c.h,x),Uo(x,b,y)}function ir(c,y){c.H&&oe(c.H,function(x,b){le(y,b,x)}),c.l&&oe({},function(x,b){le(y,b,x)})}function Kc(c,y,x){x=Math.min(c.i.length,x);const b=c.l?f(c.l.Ka,c.l,c):null;e:{var H=c.i;let Ce=-1;for(;;){const qe=["count="+x];Ce==-1?x>0?(Ce=H[0].g,qe.push("ofs="+Ce)):Ce=0:qe.push("ofs="+Ce);let Qe=!0;for(let xt=0;xt<x;xt++){var G=H[xt].g;const Gn=H[xt].map;if(G-=Ce,G<0)Ce=Math.max(0,H[xt].g-100),Qe=!1;else try{G="req"+G+"_"||"";try{var ne=Gn instanceof Map?Gn:Object.entries(Gn);for(const[di,qn]of ne){let Ri=qn;u(qn)&&(Ri=In(qn)),qe.push(G+di+"="+encodeURIComponent(Ri))}}catch(di){throw qe.push(G+"type="+encodeURIComponent("_badmap")),di}}catch{b&&b(Gn)}}if(Qe){ne=qe.join("&");break e}}ne=void 0}return c=c.i.splice(0,x),y.G=c,ne}function Vl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;W||C(),z||(W(),z=!0),I.add(y,c),c.A=0}}function jl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=zs(f(c.Da,c),Qc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Xo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=zs(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Yo(this),Xo(this))};function Fl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Xo(c){c.g=new ui(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=ln(c.na);le(y,"RID","rpc"),le(y,"SID",c.M),le(y,"AID",c.K),le(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&le(y,"TO",c.ia),le(y,"TYPE","xmlhttp"),ir(c,y),c.u&&c.o&&Zs(y,c.u,c.o),c.O&&(c.g.H=c.O);var x=c.g;c=c.ba,x.M=1,x.A=tt(ln(y)),x.u=null,x.R=!0,Yi(x,c)}t.Va=function(){this.C!=null&&(this.C=null,Yo(this),jl(this),Vt(19))};function Jo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function bn(c,y){var x=null;if(c.g==y){Jo(c),Fl(c),c.g=null;var b=2}else if($s(c.h,y))x=y.G,bl(c.h,y),b=1;else return;if(c.I!=0){if(y.o)if(b==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;b=Bo(),je(b,new Oc(b,x)),bi(c)}else Vl(c);else if(H=y.m,H==3||H==0&&y.X>0||!(b==1&&qc(c,y)||b==2&&jl(c)))switch(x&&x.length>0&&(y=c.h,y.i=y.i.concat(x)),H){case 1:ki(c,5);break;case 4:ki(c,10);break;case 3:ki(c,6);break;default:ki(c,2)}}}function Qc(c,y){let x=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(x*=2),x*y}function ki(c,y){if(c.j.info("Error code "+y),y==2){var x=f(c.bb,c),b=c.Ua;const H=!b;b=new Ge(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hn(b,"https"),tt(b),H?Ko(b.toString(),x):Gc(b.toString(),x)}else Vt(2);c.I=0,c.l&&c.l.pa(y),hi(c),_n(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function hi(c){if(c.I=0,c.ja=[],c.l){const y=kl(c.h);(y.length!=0||c.i.length!=0)&&(R(c.ja,y),R(c.ja,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.oa()}}function Bl(c,y,x){var b=x instanceof Ge?ln(x):new Ge(x);if(b.g!="")y&&(b.g=y+"."+b.g),Wn(b,b.u);else{var H=a.location;b=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const G=new Ge(null);b&&Hn(G,b),y&&(G.g=y),H&&Wn(G,H),x&&(G.h=x),b=G}return x=c.G,y=c.wa,x&&y&&le(b,x,y),le(b,"VER",c.ka),ir(c,b),b}function zl(c,y,x){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ke(new Se({ab:x})):new Ke(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ea(){}t=ea.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ta(){}ta.prototype.g=function(c,y){return new Qt(c,y)};function Qt(c,y){Ue.call(this),this.g=new Dl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!O(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Br(this)}g(Qt,Ue),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Oe(this.g)},Qt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.v&&(x={},x.__data__=In(c),c=x);y.i.push(new dp(y.Ya++,c)),y.I==3&&bi(y)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Oe(this.g),delete this.g,Qt.Z.N.call(this)};function Ul(c){Bs.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(Ul,Bs);function Yc(){Fo.call(this),this.status=1}g(Yc,Fo);function Br(c){this.g=c}g(Br,ea),Br.prototype.ra=function(){je(this.g,"a")},Br.prototype.qa=function(c){je(this.g,new Ul(c))},Br.prototype.pa=function(c){je(this.g,new Yc)},Br.prototype.oa=function(){je(this.g,"b")},ta.prototype.createWebChannel=ta.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,JS=function(){return new ta},XS=function(){return Bo()},YS=Qi,Vg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,td=zo,Dc.COMPLETE="complete",QS=Dc,Lc.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",Ue.prototype.listen=Ue.prototype.J,cu=Lc,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,KS=Ke}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const mx="@firebase/firestore",gx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new E_("@firebase/firestore");function fa(){return Co.logLevel}function ae(t,...e){if(Co.logLevel<=Fe.DEBUG){const n=e.map(C_);Co.debug(`Firestore (${yl}): ${t}`,...n)}}function Cr(t,...e){if(Co.logLevel<=Fe.ERROR){const n=e.map(C_);Co.error(`Firestore (${yl}): ${t}`,...n)}}function il(t,...e){if(Co.logLevel<=Fe.WARN){const n=e.map(C_);Co.warn(`Firestore (${yl}): ${t}`,...n)}}function C_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,eC(t,i,n)}function eC(t,e,n){let i=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Cr(i),new Error(i)}function Ye(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||eC(e,r,i)}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tn.UNAUTHENTICATED))}shutdown(){}}class IV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AV{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new ws;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ws,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ws)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ye(typeof i.accessToken=="string",31837,{l:i}),new tC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class bV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new bV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const i=o=>{o.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=NV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Be(t,e){return t<e?-1:t>e?1:0}function jg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return cm(r)===cm(o)?Be(r,o):cm(r)?1:-1}return Be(t.length,e.length)}const LV=55296,MV=57343;function cm(t){const e=t.charCodeAt(0);return e>=LV&&e<=MV}function rl(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="__name__";class Oi{constructor(e,n,i){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&xe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Oi.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Be(e.length,n.length)}static compareSegments(e,n){const i=Oi.isNumericId(e),r=Oi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Oi.extractNumericId(e).compare(Oi.extractNumericId(n)):jg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class at extends Oi{construct(e,n,i){return new at(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new at(n)}static emptyPath(){return new at([])}}const OV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Oi{construct(e,n,i){return new $t(e,n,i)}static isValidIdentifier(e){return OV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_x}static keyField(){return new $t([_x])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new de(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new de(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new de(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new de(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(at.fromString(e))}static fromName(e){return new _e(at.fromString(e).popFirst(5))}static empty(){return new _e(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t,e,n){if(!n)throw new de(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DV(t,e,n,i){if(e===!0&&i===!0)throw new de(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vx(t){if(!_e.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wx(t){if(_e.isDocumentKey(t))throw new de(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function A_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function vr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=A_(t);throw new de(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function xc(t,e){if(!iC(t))throw new de(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new de(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=-62135596800,Tx=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Tx);return new lt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xx)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tx}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xc(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Rt("string",lt._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new lt(0,0))}static max(){return new Ae(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=-1;function VV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ae.fromTimestamp(i===1e9?new lt(n+1,0):new lt(n,i));return new Is(r,_e.empty(),e)}function jV(t){return new Is(t.readTime,t.key,ic)}class Is{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Is(Ae.min(),_e.empty(),ic)}static max(){return new Is(Ae.max(),_e.empty(),ic)}}function FV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==BV)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function UV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=-1;function $f(t){return t==null}function Zd(t){return t===0&&1/t==-1/0}function HV(t){return typeof t=="number"&&Number.isInteger(t)&&!Zd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="";function WV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ex(e)),e=$V(t.get(n),e);return Ex(e)}function $V(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case rC:n+="";break;default:n+=o}}return n}function Ex(t){return t+rC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rh(this.root,e,this.comparator,!0)}}class Rh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Wt.RED,this.left=r??Wt.EMPTY,this.right=o??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Wt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Wt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sx(this.data.getIterator())}getIteratorFrom(e){return new Sx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class Sx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new wi([])}unionWith(e){let n=new Dt($t.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new oC("Invalid base64 string: "+o):o}}(e);return new Zt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const GV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(Ye(!!t,39018),typeof t=="string"){let e=0;const n=GV.exec(t);if(Ye(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function bs(t){return typeof t=="string"?Zt.fromBase64String(t):Zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="server_timestamp",lC="__type__",uC="__previous_value__",cC="__local_write_time__";function k_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lC])==null?void 0:i.stringValue)===aC}function Gf(t){const e=t.mapValue.fields[uC];return k_(e)?Gf(e):e}function rc(t){const e=As(t.mapValue.fields[cC].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Kd="(default)";class sc{constructor(e,n){this.projectId=e,this.database=n||Kd}static empty(){return new sc("","")}get isDefaultDatabase(){return this.database===Kd}isEqual(e){return e instanceof sc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="__type__",ZV="__max__",Nh={mapValue:{}},dC="__vector__",Qd="value";function ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?k_(t)?4:QV(t)?9007199254740991:KV(t)?10:11:xe(28295,{value:t})}function Zi(t,e){if(t===e)return!0;const n=ks(t);if(n!==ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rc(t).isEqual(rc(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=As(r.timestampValue),u=As(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return bs(r.bytesValue).isEqual(bs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Tt(r.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Tt(r.integerValue)===Tt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=Tt(r.doubleValue),u=Tt(o.doubleValue);return a===u?Zd(a)===Zd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return rl(t.arrayValue.values||[],e.arrayValue.values||[],Zi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(Px(a)!==Px(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Zi(a[h],u[h])))return!1;return!0}(t,e);default:return xe(52216,{left:t})}}function oc(t,e){return(t.values||[]).find(n=>Zi(n,e))!==void 0}function sl(t,e){if(t===e)return 0;const n=ks(t),i=ks(e);if(n!==i)return Be(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=Tt(o.integerValue||o.doubleValue),h=Tt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Cx(t.timestampValue,e.timestampValue);case 4:return Cx(rc(t),rc(e));case 5:return jg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=bs(o),h=bs(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=Be(u[f],h[f]);if(m!==0)return m}return Be(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Be(Tt(o.latitude),Tt(a.latitude));return u!==0?u:Be(Tt(o.longitude),Tt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ix(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,E,R,k;const u=o.fields||{},h=a.fields||{},f=(_=u[Qd])==null?void 0:_.arrayValue,m=(E=h[Qd])==null?void 0:E.arrayValue,g=Be(((R=f==null?void 0:f.values)==null?void 0:R.length)||0,((k=m==null?void 0:m.values)==null?void 0:k.length)||0);return g!==0?g:Ix(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Nh.mapValue&&a===Nh.mapValue)return 0;if(o===Nh.mapValue)return 1;if(a===Nh.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const _=jg(h[g],m[g]);if(_!==0)return _;const E=sl(u[h[g]],f[m[g]]);if(E!==0)return E}return Be(h.length,m.length)}(t.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function Cx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=As(t),i=As(e),r=Be(n.seconds,i.seconds);return r!==0?r:Be(n.nanos,i.nanos)}function Ix(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=sl(n[r],i[r]);if(o)return o}return Be(n.length,i.length)}function ol(t){return Fg(t)}function Fg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=As(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return bs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return _e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Fg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Fg(n.fields[a])}`;return r+"}"}(t.mapValue):xe(61005,{value:t})}function nd(t){switch(ks(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gf(t);return e?16+nd(e):16;case 5:return 2*t.stringValue.length;case 6:return bs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+nd(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Mo(i.fields,(o,a)=>{r+=o.length+nd(a)}),r}(t.mapValue);default:throw xe(13486,{value:t})}}function Bg(t){return!!t&&"integerValue"in t}function R_(t){return!!t&&"arrayValue"in t}function Ax(t){return!!t&&"nullValue"in t}function bx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function id(t){return!!t&&"mapValue"in t}function KV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[hC])==null?void 0:i.stringValue)===dC}function Au(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Mo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Au(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Au(t.arrayValue.values[n]);return e}return{...t}}function QV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ZV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!id(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(n)}setAll(e){let n=$t.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Au(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());id(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];id(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Mo(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Jn(Au(this.value))}}function fC(t){const e=[];return Mo(t.fields,(n,i)=>{const r=new $t([n]);if(id(i)){const o=fC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new rn(e,0,Ae.min(),Ae.min(),Ae.min(),Jn.empty(),0)}static newFoundDocument(e,n,i,r){return new rn(e,1,n,Ae.min(),i,r,0)}static newNoDocument(e,n){return new rn(e,2,n,Ae.min(),Ae.min(),Jn.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Ae.min(),Ae.min(),Jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.position=e,this.inclusive=n}}function kx(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=_e.comparator(_e.fromName(a.referenceValue),n.key):i=sl(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Rx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n="asc"){this.field=e,this.dir=n}}function YV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{}class Lt extends pC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new JV(e,n,i):n==="array-contains"?new n4(e,i):n==="in"?new i4(e,i):n==="not-in"?new r4(e,i):n==="array-contains-any"?new s4(e,i):new Lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new e4(e,i):new t4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(sl(n,this.value)):n!==null&&ks(this.value)===ks(n)&&this.matchesComparison(sl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ki extends pC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ki(e,n)}matches(e){return mC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mC(t){return t.op==="and"}function gC(t){return XV(t)&&mC(t)}function XV(t){for(const e of t.filters)if(e instanceof Ki)return!1;return!0}function zg(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+ol(t.value);if(gC(t))return t.filters.map(e=>zg(e)).join(",");{const e=t.filters.map(n=>zg(n)).join(",");return`${t.op}(${e})`}}function yC(t,e){return t instanceof Lt?function(i,r){return r instanceof Lt&&i.op===r.op&&i.field.isEqual(r.field)&&Zi(i.value,r.value)}(t,e):t instanceof Ki?function(i,r){return r instanceof Ki&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&yC(a,r.filters[u]),!0):!1}(t,e):void xe(19439)}function _C(t){return t instanceof Lt?function(n){return`${n.field.canonicalString()} ${n.op} ${ol(n.value)}`}(t):t instanceof Ki?function(n){return n.op.toString()+" {"+n.getFilters().map(_C).join(" ,")+"}"}(t):"Filter"}class JV extends Lt{constructor(e,n,i){super(e,n,i),this.key=_e.fromName(i.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class e4 extends Lt{constructor(e,n){super(e,"in",n),this.keys=vC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class t4 extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=vC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>_e.fromName(i.referenceValue))}class n4 extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return R_(n)&&oc(n.arrayValue,this.value)}}class i4 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oc(this.value.arrayValue,n)}}class r4 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!oc(this.value.arrayValue,n)}}class s4 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!R_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>oc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function Nx(t,e=null,n=[],i=[],r=null,o=null,a=null){return new o4(t,e,n,i,r,o,a)}function N_(t){const e=be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>zg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),$f(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ol(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ol(i)).join(",")),e.Te=n}return e.Te}function L_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rx(t.startAt,e.startAt)&&Rx(t.endAt,e.endAt)}function Ug(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function a4(t,e,n,i,r,o,a,u){return new qf(t,e,n,i,r,o,a,u)}function M_(t){return new qf(t)}function Lx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function l4(t){return t.collectionGroup!==null}function bu(t){const e=be(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Dt($t.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Xd(o,i))}),n.has($t.keyField().canonicalString())||e.Ie.push(new Xd($t.keyField(),i))}return e.Ie}function zi(t){const e=be(t);return e.Ee||(e.Ee=u4(e,bu(t))),e.Ee}function u4(t,e){if(t.limitType==="F")return Nx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Xd(r.field,o)});const n=t.endAt?new Yd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Yd(t.startAt.position,t.startAt.inclusive):null;return Nx(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Hg(t,e,n){return new qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zf(t,e){return L_(zi(t),zi(e))&&t.limitType===e.limitType}function wC(t){return`${N_(zi(t))}|lt:${t.limitType}`}function pa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>_C(r)).join(", ")}]`),$f(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ol(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ol(r)).join(",")),`Target(${i})`}(zi(t))}; limitType=${t.limitType})`}function Kf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):_e.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of bu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=kx(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,bu(i),r)||i.endAt&&!function(a,u,h){const f=kx(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,bu(i),r))}(t,e)}function c4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xC(t){return(e,n)=>{let i=!1;for(const r of bu(t)){const o=h4(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function h4(t,e,n){const i=t.field.isKeyField()?_e.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?sl(h,f):xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Mo(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return sC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new _t(_e.comparator);function Ir(){return d4}const TC=new _t(_e.comparator);function hu(...t){let e=TC;for(const n of t)e=e.insert(n.key,n);return e}function EC(t){let e=TC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function co(){return ku()}function PC(){return ku()}function ku(){return new Oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const f4=new _t(_e.comparator),p4=new Dt(_e.comparator);function ze(...t){let e=p4;for(const n of t)e=e.add(n);return e}const m4=new Dt(Be);function g4(){return m4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zd(e)?"-0":e}}function SC(t){return{integerValue:""+t}}function y4(t,e){return HV(e)?SC(e):O_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this._=void 0}}function _4(t,e,n){return t instanceof Jd?function(r,o){const a={fields:{[lC]:{stringValue:aC},[cC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&k_(o)&&(o=Gf(o)),o&&(a.fields[uC]=o),{mapValue:a}}(n,e):t instanceof ac?IC(t,e):t instanceof lc?AC(t,e):function(r,o){const a=CC(r,o),u=Mx(a)+Mx(r.Ae);return Bg(a)&&Bg(r.Ae)?SC(u):O_(r.serializer,u)}(t,e)}function v4(t,e,n){return t instanceof ac?IC(t,e):t instanceof lc?AC(t,e):n}function CC(t,e){return t instanceof ef?function(i){return Bg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Jd extends Qf{}class ac extends Qf{constructor(e){super(),this.elements=e}}function IC(t,e){const n=bC(e);for(const i of t.elements)n.some(r=>Zi(r,i))||n.push(i);return{arrayValue:{values:n}}}class lc extends Qf{constructor(e){super(),this.elements=e}}function AC(t,e){let n=bC(e);for(const i of t.elements)n=n.filter(r=>!Zi(r,i));return{arrayValue:{values:n}}}class ef extends Qf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Mx(t){return Tt(t.integerValue||t.doubleValue)}function bC(t){return R_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function w4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ac&&r instanceof ac||i instanceof lc&&r instanceof lc?rl(i.elements,r.elements,Zi):i instanceof ef&&r instanceof ef?Zi(i.Ae,r.Ae):i instanceof Jd&&r instanceof Jd}(t.transform,e.transform)}class x4{constructor(e,n){this.version=e,this.transformResults=n}}class Ui{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yf{}function kC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new D_(t.key,Ui.none()):new Tc(t.key,t.data,Ui.none());{const n=t.data,i=Jn.empty();let r=new Dt($t.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Do(t.key,i,new wi(r.toArray()),Ui.none())}}function T4(t,e,n){t instanceof Tc?function(r,o,a){const u=r.value.clone(),h=Dx(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Do?function(r,o,a){if(!rd(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Dx(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(RC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ru(t,e,n,i){return t instanceof Tc?function(o,a,u,h){if(!rd(o.precondition,a))return u;const f=o.value.clone(),m=Vx(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Do?function(o,a,u,h){if(!rd(o.precondition,a))return u;const f=Vx(o.fieldTransforms,h,a),m=a.data;return m.setAll(RC(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return rd(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function E4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=CC(i.transform,r||null);o!=null&&(n===null&&(n=Jn.empty()),n.set(i.field,o))}return n||null}function Ox(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&rl(i,r,(o,a)=>w4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tc extends Yf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Do extends Yf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function RC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Dx(t,e,n){const i=new Map;Ye(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,v4(a,u,n[r]))}return i}function Vx(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,_4(o,a,e))}return i}class D_ extends Yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P4 extends Yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&T4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ru(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ru(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=PC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=kC(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,(n,i)=>Ox(n,i))&&rl(this.baseMutations,e.baseMutations,(n,i)=>Ox(n,i))}}class V_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ye(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return f4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new V_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,We;function A4(t){switch(t){case Y.OK:return xe(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return xe(15467,{code:t})}}function NC(t){if(t===void 0)return Cr("GRPC error has no .code"),Y.UNKNOWN;switch(t){case It.OK:return Y.OK;case It.CANCELLED:return Y.CANCELLED;case It.UNKNOWN:return Y.UNKNOWN;case It.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case It.INTERNAL:return Y.INTERNAL;case It.UNAVAILABLE:return Y.UNAVAILABLE;case It.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case It.NOT_FOUND:return Y.NOT_FOUND;case It.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case It.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case It.ABORTED:return Y.ABORTED;case It.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case It.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case It.DATA_LOSS:return Y.DATA_LOSS;default:return xe(39323,{code:t})}}(We=It||(It={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=new vs([4294967295,4294967295],0);function jx(t){const e=b4().encode(t),n=new ZS;return n.update(e),new Uint8Array(n.digest())}function Fx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vs([n,i],0),new vs([r,o],0)]}class j_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new du(`Invalid padding: ${n}`);if(i<0)throw new du(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new du(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(vs.fromNumber(i)));return r.compare(k4)===1&&(r=new vs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=jx(e),[i,r]=Fx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new j_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=jx(e),[i,r]=Fx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Xf(Ae.min(),r,new _t(Be),Ir(),ze())}}class Ec{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ec(i,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class LC{constructor(e,n){this.targetId=e,this.Ce=n}}class MC{constructor(e,n,i=Zt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Bx{constructor(){this.ve=0,this.Fe=zx(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),i=ze();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:xe(38017,{changeType:o})}}),new Ec(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=zx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R4{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ir(),this.Je=Lh(),this.He=Lh(),this.Ye=new _t(Be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Ug(o))if(i===0){const a=new _e(o.path);this.et(n,a,rn.newNoDocument(a,Ae.min()))}else Ye(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=bs(i).toUint8Array()}catch(h){if(h instanceof oC)return il("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new j_(a,r,o)}catch(h){return il(h instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Ug(u.target)){const h=new _e(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,rn.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=ze();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Xf(e,n,this.Ye,this.je,i);return this.je=Ir(),this.Je=Lh(),this.He=Lh(),this.Ye=new _t(Be),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Bx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Dt(Be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Dt(Be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lh(){return new _t(_e.comparator)}function zx(){return new _t(_e.comparator)}const N4={asc:"ASCENDING",desc:"DESCENDING"},L4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M4={and:"AND",or:"OR"};class O4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wg(t,e){return t.useProto3Json||$f(e)?e:{value:e}}function tf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function D4(t,e){return tf(t,e.toTimestamp())}function Hi(t){return Ye(!!t,49232),Ae.fromTimestamp(function(n){const i=As(n);return new lt(i.seconds,i.nanos)}(t))}function F_(t,e){return $g(t,e).canonicalString()}function $g(t,e){const n=function(r){return new at(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DC(t){const e=at.fromString(t);return Ye(zC(e),10190,{key:e.toString()}),e}function Gg(t,e){return F_(t.databaseId,e.path)}function hm(t,e){const n=DC(e);if(n.get(1)!==t.databaseId.projectId)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(jC(n))}function VC(t,e){return F_(t.databaseId,e)}function V4(t){const e=DC(t);return e.length===4?at.emptyPath():jC(e)}function qg(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jC(t){return Ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ux(t,e,n){return{name:Gg(t,e),fields:n.value.mapValue.fields}}function j4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:xe(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Ye(m===void 0||typeof m=="string",58123),Zt.fromBase64String(m||"")):(Ye(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Zt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?Y.UNKNOWN:NC(f.code);return new de(m,f.message||"")}(a);n=new MC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=hm(t,i.document.name),o=Hi(i.document.updateTime),a=i.document.createTime?Hi(i.document.createTime):Ae.min(),u=new Jn({mapValue:{fields:i.document.fields}}),h=rn.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new sd(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=hm(t,i.document),o=i.readTime?Hi(i.readTime):Ae.min(),a=rn.newNoDocument(r,o),u=i.removedTargetIds||[];n=new sd([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=hm(t,i.document),o=i.removedTargetIds||[];n=new sd([],o,r,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new I4(r,o),u=i.targetId;n=new LC(u,a)}}return n}function F4(t,e){let n;if(e instanceof Tc)n={update:Ux(t,e.key,e.value)};else if(e instanceof D_)n={delete:Gg(t,e.key)};else if(e instanceof Do)n={update:Ux(t,e.key,e.data),updateMask:Z4(e.fieldMask)};else{if(!(e instanceof P4))return xe(16599,{Vt:e.type});n={verify:Gg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Jd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ac)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof lc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ef)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw xe(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:D4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:xe(27497)}(t,e.precondition)),n}function B4(t,e){return t&&t.length>0?(Ye(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Hi(r.updateTime):Hi(o);return a.isEqual(Ae.min())&&(a=Hi(o)),new x4(a,r.transformResults||[])}(n,e))):[]}function z4(t,e){return{documents:[VC(t,e.path)]}}function U4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=VC(t,r);const o=function(f){if(f.length!==0)return BC(Ki.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:ma(_.field),direction:$4(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Wg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function H4(t){let e=V4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ye(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=FC(g);return _ instanceof Ki&&gC(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(R){return new Xd(ga(R.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,$f(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(g){const _=!!g.before,E=g.values||[];return new Yd(E,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,E=g.values||[];return new Yd(E,_)}(n.endAt)),a4(e,r,a,o,u,"F",h,f)}function W4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ga(n.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ga(n.unaryFilter.field);return Lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ga(n.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ga(n.unaryFilter.field);return Lt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Lt.create(ga(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ki.create(n.compositeFilter.filters.map(i=>FC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(t):xe(30097,{filter:t})}function $4(t){return N4[t]}function G4(t){return L4[t]}function q4(t){return M4[t]}function ma(t){return{fieldPath:t.canonicalString()}}function ga(t){return $t.fromServerFormat(t.fieldPath)}function BC(t){return t instanceof Lt?function(n){if(n.op==="=="){if(bx(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NAN"}};if(Ax(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bx(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NOT_NAN"}};if(Ax(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ma(n.field),op:G4(n.op),value:n.value}}}(t):t instanceof Ki?function(n){const i=n.getFilters().map(r=>BC(r));return i.length===1?i[0]:{compositeFilter:{op:q4(n.op),filters:i}}}(t):xe(54877,{filter:t})}function Z4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,i,r,o=Ae.min(),a=Ae.min(),u=Zt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.yt=e}}function Q4(t){const e=H4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.Cn=new X4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Is.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class X4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Dt(at.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Dt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UC=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(UC,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new al(0)}static cr(){return new al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="LruGarbageCollector",J4=1048576;function $x([t,e],[n,i]){const r=Be(t,n);return r===0?Be(e,i):r}class e3{constructor(e){this.Ir=e,this.buffer=new Dt($x),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();$x(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class t3{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(Wx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vl(n)?ae(Wx,"Ignoring IndexedDB error during garbage collection: ",n):await _l(n)}await this.Vr(3e5)})}}class n3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Wf.ce);const i=new e3(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Hx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),fa()<=Fe.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function i3(t,e){return new n3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(){this.changes=new Oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ru(i.mutation,r,wi.empty(),lt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ze()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ze()){const r=co();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=hu();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=co();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ze()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=Ir();const a=ku(),u=function(){return ku()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Do)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Ru(m.mutation,f,m.mutation.getFieldMask(),lt.now())):a.set(f.key,wi.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new s3(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=ku();let r=new _t((a,u)=>a-u),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||wi.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||ze()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=PC();m.forEach(_=>{if(!o.has(_)){const E=kC(n.get(_),i.get(_));E!==null&&g.set(_,E),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return _e.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):l4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(co());let u=ic,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{h=h.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,ze())).next(m=>({batchId:u,changes:EC(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(i=>{let r=hu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=hu();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,_){return new qf(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,rn.newInvalidDocument(m)))});let u=hu();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&Ru(m.mutation,f,wi.empty(),lt.now()),Kf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Hi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:Q4(r.bundledQuery),readTime:Hi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.overlays=new _t(_e.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=co();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=co(),o=n.length+1,a=new _e(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new _t((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=co(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=co(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new C4(n,i));let o=this.qr.get(n);o===void 0&&(o=ze(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(){this.Qr=new Dt(Bt.$r),this.Ur=new Dt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Bt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Bt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new _e(new at([])),i=new Bt(n,e),r=new Bt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new at([])),i=new Bt(n,e),r=new Bt(n,e+1);let o=ze();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Bt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Be(e.Yr,n.Yr)}static Kr(e,n){return Be(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Dt(Bt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new S4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new Bt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?b_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Bt(n,0),r=new Bt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Dt(Be);return n.forEach(r=>{const o=new Bt(r,0),a=new Bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;_e.isDocumentKey(o)||(o=o.child(""));const a=new Bt(new _e(o),0);let u=new Dt(Be);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new Bt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Bt(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.ri=e,this.docs=function(){return new _t(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let i=Ir();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():rn.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Ir();const a=n.path,u=new _e(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||FV(jV(m),i)<=0||(r.has(m.key)||Kf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){xe(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new d3(this)}getSize(e){return K.resolve(this.size)}}class d3 extends r3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.persistence=e,this.si=new Oo(n=>N_(n),L_),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new B_,this.targetCount=0,this.ai=al.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new al(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wf(0),this.li=!1,this.li=!0,this.hi=new u3,this.referenceDelegate=e(this),this.Pi=new f3(this),this.indexManager=new Y4,this.remoteDocumentCache=function(r){return new h3(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new K4(n),this.Ii=new a3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new l3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new c3(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ae("MemoryPersistence","Starting transaction:",e);const r=new p3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class p3 extends zV{constructor(e){super(),this.currentSequenceNumber=e}}class z_{constructor(e){this.persistence=e,this.Ri=new B_,this.Vi=null}static mi(e){return new z_(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=_e.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class nf{constructor(e,n){this.persistence=e,this.pi=new Oo(i=>WV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=i3(this,n)}static mi(e,n){return new nf(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Ae.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nd(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=ze(),r=ze();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new U_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lD()?8:UV(on())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new m3;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(fa()<=Fe.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",pa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(fa()<=Fe.DEBUG&&ae("QueryEngine","Query:",pa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(fa()<=Fe.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",pa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(n))):K.resolve())}ys(e,n){if(Lx(n))return K.resolve(null);let i=zi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Hg(n,null,"F"),i=zi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ze(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Hg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return Lx(n)||r.isEqual(Ae.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(fa()<=Fe.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pa(n)),this.vs(e,a,n,VV(r,ic)).next(u=>u))})}Ds(e,n){let i=new Dt(xC(e));return n.forEach((r,o)=>{Kf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return fa()<=Fe.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",pa(n)),this.ps.getDocumentsMatchingQuery(e,n,Is.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="LocalStore",y3=3e8;class _3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new _t(Be),this.xs=new Oo(o=>N_(o),L_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function v3(t,e,n,i){return new _3(t,e,n,i)}async function WC(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=ze();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function w3(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,_=g.keys();let E=K.resolve();return _.forEach(R=>{E=E.next(()=>m.getEntry(h,R)).next(k=>{const V=f.docVersions.get(R);Ye(V!==null,48541),k.version.compareTo(V)<0&&(g.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function $C(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function x3(t,e){const n=be(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Zt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,i)),r=r.insert(g,E),function(k,V,A){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=y3?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(_,E,m)&&u.push(n.Pi.updateTargetData(o,E))});let h=Ir(),f=ze();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(T3(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Ae.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function T3(t,e,n){let i=ze(),r=ze();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Ir();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Ae.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):ae(H_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function E3(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=b_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function P3(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new rs(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Zg(t,e,n){const i=be(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!vl(a))throw a;ae(H_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Gx(t,e,n){const i=be(t);let r=Ae.min(),o=ze();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=be(h),_=g.xs.get(m);return _!==void 0?K.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,zi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Ae.min(),n?o:ze())).next(u=>(S3(i,c4(e),u),{documents:u,Qs:o})))}function S3(t,e,n){let i=t.Os.get(e)||Ae.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class qx{constructor(){this.activeTargetIds=g4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class C3{constructor(){this.Mo=new qx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="ConnectivityMonitor";class Kx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(Zx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(Zx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=null;function Kg(){return Mh===null?Mh=function(){return 268435456+Math.round(2147483648*Math.random())}():Mh++,"0x"+Mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="RestConnection",A3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Kd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Kg(),u=this.zo(e,n.toUriEncodedString());ae(dm,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=ml(f);return this.Jo(e,u,h,i,m).then(g=>(ae(dm,`Received RPC '${e}' ${a}: `,g),g),g=>{throw il(dm,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=A3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class R3 extends b3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Kg();return new Promise((u,h)=>{const f=new KS;f.setWithCredentials(!0),f.listenOnce(QS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case td.NO_ERROR:const g=f.getResponseJson();ae(Jt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case td.TIMEOUT:ae(Jt,`RPC '${e}' ${a} timed out`),h(new de(Y.DEADLINE_EXCEEDED,"Request time out"));break;case td.HTTP_ERROR:const _=f.getStatus();if(ae(Jt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const R=E==null?void 0:E.error;if(R&&R.status&&R.message){const k=function(A){const T=A.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(T)>=0?T:Y.UNKNOWN}(R.status);h(new de(k,R.message))}else h(new de(Y.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new de(Y.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ae(Jt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);ae(Jt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Kg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=JS(),u=XS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");ae(Jt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let _=!1,E=!1;const R=new k3({Yo:V=>{E?ae(Jt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(_||(ae(Jt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),ae(Jt,`RPC '${e}' stream ${r} sending:`,V),g.send(V))},Zo:()=>g.close()}),k=(V,A,T)=>{V.listen(A,S=>{try{T(S)}catch(B){setTimeout(()=>{throw B},0)}})};return k(g,cu.EventType.OPEN,()=>{E||(ae(Jt,`RPC '${e}' stream ${r} transport opened.`),R.o_())}),k(g,cu.EventType.CLOSE,()=>{E||(E=!0,ae(Jt,`RPC '${e}' stream ${r} transport closed`),R.a_(),this.E_(g))}),k(g,cu.EventType.ERROR,V=>{E||(E=!0,il(Jt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),R.a_(new de(Y.UNAVAILABLE,"The operation could not be completed")))}),k(g,cu.EventType.MESSAGE,V=>{var A;if(!E){const T=V.data[0];Ye(!!T,16349);const S=T,B=(S==null?void 0:S.error)||((A=S[0])==null?void 0:A.error);if(B){ae(Jt,`RPC '${e}' stream ${r} received error:`,B);const W=B.status;let z=function(N){const D=It[N];if(D!==void 0)return NC(D)}(W),I=B.message;z===void 0&&(z=Y.INTERNAL,I="Unknown error status: "+W+" with message "+B.message),E=!0,R.a_(new de(z,I)),g.close()}else ae(Jt,`RPC '${e}' stream ${r} received:`,T),R.u_(T)}}),k(u,YS.STAT_EVENT,V=>{V.stat===Vg.PROXY?ae(Jt,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===Vg.NOPROXY&&ae(Jt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t){return new O4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ae("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="PersistentStream";class qC{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Cr(n.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new de(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ae(Qx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ae(Qx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N3 extends qC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=j4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ae.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Ae.min():a.readTime?Hi(a.readTime):Ae.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=qg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Ug(h)?{documents:z4(o,h)}:{query:U4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=OC(o,a.resumeToken);const f=Wg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Ae.min())>0){u.readTime=tf(o,a.snapshotVersion.toTimestamp());const f=Wg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=W4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=qg(this.serializer),n.removeTarget=e,this.q_(n)}}class L3 extends qC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=B4(e.writeResults,e.commitTime),i=Hi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=qg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>F4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{}class O3 extends M3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,$g(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Y.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,$g(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(Y.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class D3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cr(n),this.aa=!1):ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="RemoteStore";class V3{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Vo(this)&&(ae(Io,"Restarting streams for network reachability change."),await async function(h){const f=be(h);f.Ea.add(4),await Pc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await ep(f)}(this))})}),this.Ra=new D3(i,r)}}async function ep(t){if(Vo(t))for(const e of t.da)await e(!0)}async function Pc(t){for(const e of t.da)await e(!1)}function ZC(t,e){const n=be(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),q_(n)?G_(n):wl(n).O_()&&$_(n,e))}function W_(t,e){const n=be(t),i=wl(n);n.Ia.delete(e),i.O_()&&KC(n,e),n.Ia.size===0&&(i.O_()?i.L_():Vo(n)&&n.Ra.set("Unknown"))}function $_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wl(t).Y_(e)}function KC(t,e){t.Va.Ue(e),wl(t).Z_(e)}function G_(t){t.Va=new R4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),wl(t).start(),t.Ra.ua()}function q_(t){return Vo(t)&&!wl(t).x_()&&t.Ia.size>0}function Vo(t){return be(t).Ea.size===0}function QC(t){t.Va=void 0}async function j3(t){t.Ra.set("Online")}async function F3(t){t.Ia.forEach((e,n)=>{$_(t,e)})}async function B3(t,e){QC(t),q_(t)?(t.Ra.ha(e),G_(t)):t.Ra.set("Unknown")}async function z3(t,e,n){if(t.Ra.set("Online"),e instanceof MC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){ae(Io,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await rf(t,i)}else if(e instanceof sd?t.Va.Ze(e):e instanceof LC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ae.min()))try{const i=await $C(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Zt.EMPTY_BYTE_STRING,m.snapshotVersion)),KC(o,h);const g=new rs(m.target,h,f,m.sequenceNumber);$_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){ae(Io,"Failed to raise snapshot:",i),await rf(t,i)}}async function rf(t,e,n){if(!vl(e))throw e;t.Ea.add(1),await Pc(t),t.Ra.set("Offline"),n||(n=()=>$C(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae(Io,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ep(t)})}function YC(t,e){return e().catch(n=>rf(t,n,e))}async function tp(t){const e=be(t),n=Rs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:b_;for(;U3(e);)try{const r=await E3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,H3(e,r)}catch(r){await rf(e,r)}XC(e)&&JC(e)}function U3(t){return Vo(t)&&t.Ta.length<10}function H3(t,e){t.Ta.push(e);const n=Rs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function XC(t){return Vo(t)&&!Rs(t).x_()&&t.Ta.length>0}function JC(t){Rs(t).start()}async function W3(t){Rs(t).ra()}async function $3(t){const e=Rs(t);for(const n of t.Ta)e.ea(n.mutations)}async function G3(t,e,n){const i=t.Ta.shift(),r=V_.from(i,e,n);await YC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await tp(t)}async function q3(t,e){e&&Rs(t).X_&&await async function(i,r){if(function(a){return A4(a)&&a!==Y.ABORTED}(r.code)){const o=i.Ta.shift();Rs(i).B_(),await YC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await tp(i)}}(t,e),XC(t)&&JC(t)}async function Yx(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),ae(Io,"RemoteStore received new credentials");const i=Vo(n);n.Ea.add(3),await Pc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ep(n)}async function Z3(t,e){const n=be(t);e?(n.Ea.delete(2),await ep(n)):e||(n.Ea.add(2),await Pc(n),n.Ra.set("Unknown"))}function wl(t){return t.ma||(t.ma=function(n,i,r){const o=be(n);return o.sa(),new N3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:j3.bind(null,t),t_:F3.bind(null,t),r_:B3.bind(null,t),H_:z3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),q_(t)?G_(t):t.Ra.set("Unknown")):(await t.ma.stop(),QC(t))})),t.ma}function Rs(t){return t.fa||(t.fa=function(n,i,r){const o=be(n);return o.sa(),new L3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:W3.bind(null,t),r_:q3.bind(null,t),ta:$3.bind(null,t),na:G3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await tp(t)):(await t.fa.stop(),t.Ta.length>0&&(ae(Io,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Z_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function K_(t,e){if(Cr("AsyncQueue",`${e}: ${t}`),vl(t))return new de(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{static emptySet(e){return new Ba(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||_e.comparator(n.key,i.key):(n,i)=>_e.comparator(n.key,i.key),this.keyedMap=hu(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ba;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.ga=new _t(_e.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class ll{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new ll(e,n,Ba.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Q3{constructor(){this.queries=Jx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=be(n),o=r.queries;r.queries=Jx(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new de(Y.ABORTED,"Firestore shutting down"))}}function Jx(){return new Oo(t=>wC(t),Zf)}async function eI(t,e){const n=be(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new K3,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=K_(a,`Initialization of query '${pa(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Q_(n)}async function tI(t,e){const n=be(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Y3(t,e){const n=be(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&Q_(n)}function X3(t,e,n){const i=be(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function Q_(t){t.Ca.forEach(e=>{e.next()})}var Qg,e1;(e1=Qg||(Qg={})).Ma="default",e1.Cache="cache";class nI{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ll(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.key=e}}class rI{constructor(e){this.key=e}}class J3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=xC(e),this.tu=new Ba(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Xx,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),E=Kf(this.query,g)?g:null,R=!!_&&this.mutatedKeys.has(_.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let V=!1;_&&E?_.data.isEqual(E.data)?R!==k&&(i.track({type:3,doc:E}),V=!0):this.su(_,E)||(i.track({type:2,doc:E}),V=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(u=!0)):!_&&E?(i.track({type:0,doc:E}),V=!0):_&&!E&&(i.track({type:1,doc:_}),V=!0,(h||f)&&(u=!0)),V&&(E?(a=a.add(E),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(E,R){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:V})}};return k(E)-k(R)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new ll(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new rI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new iI(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Y_="SyncEngine";class e5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class t5{constructor(e){this.key=e,this.hu=!1}}class n5{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Oo(u=>wC(u),Zf),this.Iu=new Map,this.Eu=new Set,this.du=new _t(_e.comparator),this.Au=new Map,this.Ru=new B_,this.Vu={},this.mu=new Map,this.fu=al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function i5(t,e,n=!0){const i=cI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await sI(i,e,n,!0),r}async function r5(t,e){const n=cI(t);await sI(n,e,!0,!1)}async function sI(t,e,n,i){const r=await P3(t.localStore,zi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await s5(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&ZC(t.remoteStore,r),u}async function s5(t,e,n,i,r){t.pu=(g,_,E)=>async function(k,V,A,T){let S=V.view.ru(A);S.Cs&&(S=await Gx(k.localStore,V.query,!1).then(({documents:I})=>V.view.ru(I,S)));const B=T&&T.targetChanges.get(V.targetId),W=T&&T.targetMismatches.get(V.targetId)!=null,z=V.view.applyChanges(S,k.isPrimaryClient,B,W);return n1(k,V.targetId,z.au),z.snapshot}(t,g,_,E);const o=await Gx(t.localStore,e,!0),a=new J3(e,o.Qs),u=a.ru(o.documents),h=Ec.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);n1(t,n,f.au);const m=new e5(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function o5(t,e,n){const i=be(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Zf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Zg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&W_(i.remoteStore,r.targetId),Yg(i,r.targetId)}).catch(_l)):(Yg(i,r.targetId),await Zg(i.localStore,r.targetId,!0))}async function a5(t,e){const n=be(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),W_(n.remoteStore,i.targetId))}async function l5(t,e,n){const i=m5(t);try{const r=await function(a,u){const h=be(a),f=lt.now(),m=u.reduce((E,R)=>E.add(R.key),ze());let g,_;return h.persistence.runTransaction("Locally write mutations","readwrite",E=>{let R=Ir(),k=ze();return h.Ns.getEntries(E,m).next(V=>{R=V,R.forEach((A,T)=>{T.isValidDocument()||(k=k.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(E,R)).next(V=>{g=V;const A=[];for(const T of u){const S=E4(T,g.get(T.key).overlayedDocument);S!=null&&A.push(new Do(T.key,S,fC(S.value.mapValue),Ui.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,A,u)}).next(V=>{_=V;const A=V.applyToLocalDocumentSet(g,k);return h.documentOverlayCache.saveOverlays(E,V.batchId,A)})}).then(()=>({batchId:_.batchId,changes:EC(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new _t(Be)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await Sc(i,r.changes),await tp(i.remoteStore)}catch(r){const o=K_(r,"Failed to persist write");n.reject(o)}}async function oI(t,e){const n=be(t);try{const i=await x3(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Ye(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Ye(a.hu,14607):r.removedDocuments.size>0&&(Ye(a.hu,42227),a.hu=!1))}),await Sc(n,i,e)}catch(i){await _l(i)}}function t1(t,e,n){const i=be(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=be(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&Q_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function u5(t,e,n){const i=be(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new _t(_e.comparator);a=a.insert(o,rn.newNoDocument(o,Ae.min()));const u=ze().add(o),h=new Xf(Ae.min(),new Map,new _t(Be),a,u);await oI(i,h),i.du=i.du.remove(o),i.Au.delete(e),X_(i)}else await Zg(i.localStore,e,!1).then(()=>Yg(i,e,n)).catch(_l)}async function c5(t,e){const n=be(t),i=e.batch.batchId;try{const r=await w3(n.localStore,e);lI(n,i,null),aI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Sc(n,r)}catch(r){await _l(r)}}async function h5(t,e,n){const i=be(t);try{const r=await function(a,u){const h=be(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(Ye(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);lI(i,e,n),aI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Sc(i,r)}catch(r){await _l(r)}}function aI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function lI(t,e,n){const i=be(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Yg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||uI(t,i)})}function uI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(W_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),X_(t))}function n1(t,e,n){for(const i of n)i instanceof iI?(t.Ru.addReference(i.key,e),d5(t,i)):i instanceof rI?(ae(Y_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||uI(t,i.key)):xe(19791,{wu:i})}function d5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ae(Y_,"New document in limbo: "+n),t.Eu.add(i),X_(t))}function X_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new _e(at.fromString(e)),i=t.fu.next();t.Au.set(i,new t5(n)),t.du=t.du.insert(n,i),ZC(t.remoteStore,new rs(zi(M_(n.path)),i,"TargetPurposeLimboResolution",Wf.ce))}}async function Sc(t,e,n){const i=be(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=U_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=be(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,_=>K.forEach(_.Es,E=>m.persistence.referenceDelegate.addReference(g,_.targetId,E)).next(()=>K.forEach(_.ds,E=>m.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))}catch(g){if(!vl(g))throw g;ae(H_,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const E=m.Ms.get(_),R=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(R);m.Ms=m.Ms.insert(_,k)}}}(i.localStore,o))}async function f5(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){ae(Y_,"User change. New user:",e.toKey());const i=await WC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new de(Y.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Sc(n,i.Ls)}}function p5(t,e){const n=be(t),i=n.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let r=ze();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function cI(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u5.bind(null,e),e.Pu.H_=Y3.bind(null,e.eventManager),e.Pu.yu=X3.bind(null,e.eventManager),e}function m5(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=h5.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return v3(this.persistence,new g3,e.initialUser,this.serializer)}Cu(e){return new HC(z_.mi,this.serializer)}Du(e){return new C3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class g5 extends sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof nf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new t3(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new HC(i=>nf.mi(i,n),this.serializer)}}class Xg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>t1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=f5.bind(null,this.syncEngine),await Z3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q3}()}createDatastore(e){const n=Jf(e.databaseInfo.databaseId),i=function(o){return new R3(o)}(e.databaseInfo);return function(o,a,u,h){return new O3(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new V3(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>t1(this.syncEngine,n,0),function(){return Kx.v()?new Kx:new I3}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new n5(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=be(r);ae(Io,"RemoteStore shutting down."),o.Ea.add(5),await Pc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Xg.provider={build:()=>new Xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="FirestoreClient";class y5{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=tn.UNAUTHENTICATED,this.clientId=I_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ae(Ns,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ae(Ns,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=K_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function pm(t,e){t.asyncQueue.verifyOperationInProgress(),ae(Ns,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await WC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function i1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _5(t);ae(Ns,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Yx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Yx(e.remoteStore,r)),t._onlineComponents=e}async function _5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae(Ns,"Using user provided OfflineComponentProvider");try{await pm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;il("Error using user provided cache. Falling back to memory cache: "+n),await pm(t,new sf)}}else ae(Ns,"Using default OfflineComponentProvider"),await pm(t,new g5(void 0));return t._offlineComponents}async function dI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae(Ns,"Using user provided OnlineComponentProvider"),await i1(t,t._uninitializedComponentsProvider._online)):(ae(Ns,"Using default OnlineComponentProvider"),await i1(t,new Xg))),t._onlineComponents}function v5(t){return dI(t).then(e=>e.syncEngine)}async function Jg(t){const e=await dI(t),n=e.eventManager;return n.onListen=i5.bind(null,e.syncEngine),n.onUnlisten=o5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=r5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=a5.bind(null,e.syncEngine),n}function w5(t,e,n={}){const i=new ws;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new hI({next:_=>{m.Nu(),a.enqueueAndForget(()=>tI(o,g)),_.fromCache&&h.source==="server"?f.reject(new de(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new nI(u,m,{includeMetadataChanges:!0,qa:!0});return eI(o,g)}(await Jg(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="firestore.googleapis.com",s1=!0;class o1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pI,this.ssl=s1}else this.host=e.host,this.ssl=e.ssl??s1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<J4)throw new de(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class np{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new CV;switch(i.type){case"firstParty":return new kV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=r1.get(n);i&&(ae("ComponentProvider","Removing Datastore"),r1.delete(n),i.terminate())}(this),Promise.resolve()}}function x5(t,e,n,i={}){var f;t=vr(t,np);const r=ml(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(BS(`https://${u}`),zS("Firestore",!0)),o.host!==pI&&o.host!==u&&il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!Po(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=tn.MOCK_USER;else{m=JO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new de(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new tn(_)}t._authCredentials=new IV(new tC(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Cc(this.firestore,e,this._query)}}class Ot{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(xc(n,Ot._jsonSchema))return new Ot(e,i||null,new _e(at.fromString(n.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Rt("string",Ot._jsonSchemaVersion),referencePath:Rt("string")};class xs extends Cc{constructor(e,n,i){super(e,n,M_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new _e(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function so(t,e,...n){if(t=Dn(t),nC("collection","path",e),t instanceof np){const i=at.fromString(e,...n);return wx(i),new xs(t,null,i)}{if(!(t instanceof Ot||t instanceof xs))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(at.fromString(e,...n));return wx(i),new xs(t.firestore,null,i)}}function Rn(t,e,...n){if(t=Dn(t),arguments.length===1&&(e=I_.newId()),nC("doc","path",e),t instanceof np){const i=at.fromString(e,...n);return vx(i),new Ot(t,null,new _e(i))}{if(!(t instanceof Ot||t instanceof xs))throw new de(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(at.fromString(e,...n));return vx(i),new Ot(t.firestore,t instanceof xs?t.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="AsyncQueue";class l1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GC(this,"async_queue_retry"),this._c=()=>{const i=fm();i&&ae(a1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ws;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vl(e))throw e;ae(a1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Cr("INTERNAL UNHANDLED ERROR: ",u1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Z_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&xe(47125,{Pc:u1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function u1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class ul extends np{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new l1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l1(e),this._firestoreClient=void 0,await e}}}function T5(t,e){const n=typeof t=="object"?t:$S(),i=typeof t=="string"?t:Kd,r=S_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=YO("firestore");o&&x5(r,...o)}return r}function J_(t){if(t._terminated)throw new de(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||E5(t),t._firestoreClient}function E5(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new qV(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,fI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new y5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ei(Zt.fromBase64String(e))}catch(n){throw new de(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ei(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xc(e,ei._jsonSchema))return ei.fromBase64String(e.bytes)}}ei._jsonSchemaVersion="firestore/bytes/1.0",ei._jsonSchema={type:Rt("string",ei._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wi._jsonSchemaVersion}}static fromJSON(e){if(xc(e,Wi._jsonSchema))return new Wi(e.latitude,e.longitude)}}Wi._jsonSchemaVersion="firestore/geoPoint/1.0",Wi._jsonSchema={type:Rt("string",Wi._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xc(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new $i(e.vectorValues);throw new de(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:Rt("string",$i._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=/^__.*__$/;class S5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}function gI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:t})}}class tv{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return of(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gI(this.Ac)&&P5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class C5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Jf(e)}Cc(e,n,i,r=!1){return new tv({Ac:e,methodName:n,Dc:i,path:$t.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function I5(t){const e=t._freezeSettings(),n=Jf(t._databaseId);return new C5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function A5(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);wI("Data must be an object, but it was:",a,i);const u=_I(i,a);let h,f;if(o.merge)h=new wi(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=b5(e,g,n);if(!a.contains(_))throw new de(Y.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);R5(m,_)||m.push(_)}h=new wi(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new S5(new Jn(u),h,f)}function yI(t,e){if(vI(t=Dn(t)))return wI("Unsupported field value:",e,t),_I(t,e);if(t instanceof mI)return function(i,r){if(!gI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=yI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return y4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=lt.fromDate(i);return{timestampValue:tf(r.serializer,o)}}if(i instanceof lt){const o=new lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:tf(r.serializer,o)}}if(i instanceof Wi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ei)return{bytesValue:OC(r.serializer,i._byteString)};if(i instanceof Ot){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:F_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof $i)return function(a,u){return{mapValue:{fields:{[hC]:{stringValue:dC},[Qd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return O_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${A_(i)}`)}(t,e)}function _I(t,e){const n={};return sC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mo(t,(i,r)=>{const o=yI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function vI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof Wi||t instanceof ei||t instanceof Ot||t instanceof mI||t instanceof $i)}function wI(t,e,n){if(!vI(n)||!iC(n)){const i=A_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function b5(t,e,n){if((e=Dn(e))instanceof ev)return e._internalPath;if(typeof e=="string")return xI(t,e);throw of("Field path arguments must be of type string or ",t,!1,void 0,n)}const k5=new RegExp("[~\\*/\\[\\]]");function xI(t,e,n){if(e.search(k5)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ev(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function of(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new de(Y.INVALID_ARGUMENT,u+t+h)}function R5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(EI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N5 extends TI{data(){return super.data()}}function EI(t,e){return typeof e=="string"?xI(t,e):e instanceof ev?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L5{convertValue(e,n="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Mo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Qd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>Tt(a.doubleValue));return new $i(n)}convertGeoPoint(e){return new Wi(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Gf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const n=As(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=at.fromString(e);Ye(zC(i),9688,{name:e});const r=new sc(i.get(1),i.get(3)),o=new _e(i.popFirst(5));return r.isEqual(n)||Cr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class fu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mo extends TI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(EI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=mo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",mo._jsonSchema={type:Rt("string",mo._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class od extends mo{data(e={}){return super.data(e)}}class go{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new fu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new od(this._firestore,this._userDataWriter,i.key,i,new fu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new od(r._firestore,r._userDataWriter,u.doc.key,u.doc,new fu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new od(r._firestore,r._userDataWriter,u.doc.key,u.doc,new fu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:O5(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=I_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function O5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:t})}}go._jsonSchemaVersion="firestore/querySnapshot/1.0",go._jsonSchema={type:Rt("string",go._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class nv extends L5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function af(t){t=vr(t,Cc);const e=vr(t.firestore,ul),n=J_(e),i=new nv(e);return PI(t._query),w5(n,t._query).then(r=>new go(e,i,t,r))}function Di(t,e,n){t=vr(t,Ot);const i=vr(t.firestore,ul),r=M5(t.converter,e,n);return SI(i,[A5(I5(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ui.none())])}function Nu(t){return SI(vr(t.firestore,ul),[new D_(t._key,Ui.none())])}function mm(t,...e){var h,f,m;t=Dn(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||c1(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(c1(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof Ot)a=vr(t.firestore,ul),u=M_(t._key.path),o={next:g=>{e[i]&&e[i](D5(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=vr(t,Cc);a=vr(g.firestore,ul),u=g._query;const _=new nv(a);o={next:E=>{e[i]&&e[i](new go(a,_,g,E))},error:e[i+1],complete:e[i+2]},PI(t._query)}return function(_,E,R,k){const V=new hI(k),A=new nI(E,V,R);return _.asyncQueue.enqueueAndForget(async()=>eI(await Jg(_),A)),()=>{V.Nu(),_.asyncQueue.enqueueAndForget(async()=>tI(await Jg(_),A))}}(J_(a),u,r,o)}function SI(t,e){return function(i,r){const o=new ws;return i.asyncQueue.enqueueAndForget(async()=>l5(await v5(i),r,o)),o.promise}(J_(t),e)}function D5(t,e,n){const i=n.docs.get(e._key),r=new nv(t);return new mo(t,r,e._key,i,new fu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){yl=r})(gl),nl(new So("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new ul(new AV(i.getProvider("auth-internal")),new RV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sc(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),_s(mx,gx,e),_s(mx,gx,"esm2020")})();function CI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V5=CI,II=new vc("auth","Firebase",CI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new E_("@firebase/auth");function j5(t,...e){lf.logLevel<=Fe.WARN&&lf.warn(`Auth (${gl}): ${t}`,...e)}function ad(t,...e){lf.logLevel<=Fe.ERROR&&lf.error(`Auth (${gl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...e){throw iv(t,...e)}function Gi(t,...e){return iv(t,...e)}function AI(t,e,n){const i={...V5(),[e]:n};return new vc("auth","Firebase",i).create(e,{appName:t.name})}function Ts(t){return AI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return II.create(t,...e)}function Ee(t,e,...n){if(!t)throw iv(e,...n)}function pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ad(e),new Error(e)}function br(t,e){t||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function F5(){return h1()==="http:"||h1()==="https:"}function h1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F5()||sD()||"connection"in navigator)?navigator.onLine:!0}function z5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.shortDelay=e,this.longDelay=n,br(n>e,"Short delay should be less than long delay!"),this.isMobile=nD()||oD()}get(){return B5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],W5=new Ic(3e4,6e4);function ip(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function xl(t,e,n,i,r={}){return kI(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=wc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return rD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ml(t.emulatorConfig.host)&&(f.credentials="include"),bI.fetch()(await NI(t,t.config.apiHost,n,u),f)})}async function kI(t,e,n){t._canInitEmulator=!1;const i={...U5,...e};try{const r=new $5(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Oh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Oh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Oh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw AI(t,m,f);Ar(t,m)}}catch(r){if(r instanceof Nr)throw r;Ar(t,"network-request-failed",{message:String(r)})}}async function RI(t,e,n,i,r={}){const o=await xl(t,e,n,i,r);return"mfaPendingCredential"in o&&Ar(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function NI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?rv(t.config,r):`${t.config.apiScheme}://${r}`;return H5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class $5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Gi(this.auth,"network-request-failed")),W5.get())})}}function Oh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Gi(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(t,e){return xl(t,"POST","/v1/accounts:delete",e)}async function uf(t,e){return xl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q5(t,e=!1){const n=Dn(t),i=await n.getIdToken(e),r=sv(i);Ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Lu(gm(r.auth_time)),issuedAtTime:Lu(gm(r.iat)),expirationTime:Lu(gm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function gm(t){return Number(t)*1e3}function sv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ad("JWT malformed, contained fewer than 3 sections"),null;try{const r=DS(n);return r?JSON.parse(r):(ad("Failed to decode base64 JWT payload"),null)}catch(r){return ad("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function d1(t){const e=sv(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Nr&&Z5(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Z5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lu(this.lastLoginAt),this.creationTime=Lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cf(t){var g;const e=t.auth,n=await t.getIdToken(),i=await uc(t,uf(e,{idToken:n}));Ee(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?LI(r.providerUserInfo):[],a=Y5(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new ty(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function Q5(t){const e=Dn(t);await cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y5(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function LI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t,e){const n=await kI(t,{},async()=>{const i=wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await NI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&ml(t.emulatorConfig.host)&&(h.credentials="include"),bI.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J5(t,e){return xl(t,"POST","/v2/accounts:revokeToken",ip(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=d1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await X5(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new za;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Ee(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(Ee(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new K5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ty(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await uc(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q5(this,e)}reload(){return Q5(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await cf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await uc(this,G5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:E,providerData:R,stsTokenManager:k}=n;Ee(g&&k,e,"internal-error");const V=za.fromJSON(this.name,k);Ee(typeof g=="string",e,"internal-error"),Hr(i,e.name),Hr(r,e.name),Ee(typeof _=="boolean",e,"internal-error"),Ee(typeof E=="boolean",e,"internal-error"),Hr(o,e.name),Hr(a,e.name),Hr(u,e.name),Hr(h,e.name),Hr(f,e.name),Hr(m,e.name);const A=new xi({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:E,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:V,createdAt:f,lastLoginAt:m});return R&&Array.isArray(R)&&(A.providerData=R.map(T=>({...T}))),h&&(A._redirectEventId=h),A}static async _fromIdTokenResponse(e,n,i=!1){const r=new za;r.updateFromServerResponse(n);const o=new xi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await cf(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Ee(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?LI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new za;u.updateFromIdToken(i);const h=new xi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ty(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Map;function mr(t){br(t instanceof Function,"Expected a class definition");let e=f1.get(t);return e?(br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,f1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}MI.type="NONE";const p1=MI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t,e,n){return`firebase:${t}:${e}:${n}`}class Ua{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=ld(this.userKey,r.apiKey,o),this.fullPersistenceKey=ld("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uf(this.auth,{idToken:e}).catch(()=>{});return n?xi._fromGetAccountInfoResponse(this.auth,n,e):null}return xi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ua(mr(p1),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||mr(p1);const a=ld(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await uf(e,{idToken:m}).catch(()=>{});if(!_)break;g=await xi._fromGetAccountInfoResponse(e,_,m)}else g=xi._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ua(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ua(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BI(e))return"Blackberry";if(zI(e))return"Webos";if(DI(e))return"Safari";if((e.includes("chrome/")||VI(e))&&!e.includes("edge/"))return"Chrome";if(FI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OI(t=on()){return/firefox\//i.test(t)}function DI(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VI(t=on()){return/crios\//i.test(t)}function jI(t=on()){return/iemobile/i.test(t)}function FI(t=on()){return/android/i.test(t)}function BI(t=on()){return/blackberry/i.test(t)}function zI(t=on()){return/webos/i.test(t)}function ov(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ej(t=on()){var e;return ov(t)&&!!((e=window.navigator)!=null&&e.standalone)}function tj(){return aD()&&document.documentMode===10}function UI(t=on()){return ov(t)||FI(t)||zI(t)||BI(t)||/windows phone/i.test(t)||jI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t,e=[]){let n;switch(t){case"Browser":n=m1(on());break;case"Worker":n=`${m1(on())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(t,e={}){return xl(t,"GET","/v2/passwordPolicy",ip(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=6;class sj{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g1(this),this.idTokenSubscription=new g1(this),this.beforeStateQueue=new nj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=II,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=mr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Ua.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uf(this,{idToken:e}),i=await xi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(_i(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_i(this.app))return Promise.reject(Ts(this));const n=e?Dn(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _i(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ij(this),n=new sj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await J5(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&mr(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ua.create(this,[mr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&j5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function rp(t){return Dn(t)}class g1{constructor(e){this.auth=e,this.observer=null,this.addObserver=mD(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let av={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aj(t){av=t}function lj(t){return av.loadJS(t)}function uj(){return av.gapiScript}function cj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t,e){const n=S_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Po(o,e??{}))return r;Ar(r,"already-initialized")}return n.initialize({options:e})}function dj(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(mr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function fj(t,e,n){const i=rp(t);Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=WI(e),{host:a,port:u}=pj(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ee(Po(f,i.config.emulator)&&Po(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,ml(a)?(BS(`${o}//${a}${h}`),zS("Auth",!0)):mj()}function WI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pj(t){const e=WI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:y1(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:y1(a)}}}function y1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t,e){return RI(t,"POST","/v1/accounts:signInWithIdp",ip(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="http://localhost";class Ao extends $I{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new Ao(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ha(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ha(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ha(e,n)}buildRequest(){const e={requestUri:gj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends GI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Ac{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ao._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Xr.credential(n,i)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Ac{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Ac{constructor(){super("twitter.com")}static credential(e,n){return Ao._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return es.credential(n,i)}catch{return null}}}es.TWITTER_SIGN_IN_METHOD="twitter.com";es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t,e){return RI(t,"POST","/v1/accounts:signUp",ip(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await xi._fromIdTokenResponse(e,i,r),a=_1(i);return new Ls({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=_1(i);return new Ls({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function _1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(t){var r;if(_i(t.app))return Promise.reject(Ts(t));const e=rp(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new Ls({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await yj(e,{returnSecureToken:!0}),i=await Ls._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends Nr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,hf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new hf(e,n,i,r)}}function qI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?hf._fromErrorAndOperation(t,o,e,i):o})}async function vj(t,e,n=!1){const i=await uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ls._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(t,e,n=!1){const{auth:i}=t;if(_i(i.app))return Promise.reject(Ts(i));const r="reauthenticate";try{const o=await uc(t,qI(i,r,e,t),n);Ee(o.idToken,i,"internal-error");const a=sv(o.idToken);Ee(a,i,"internal-error");const{sub:u}=a;return Ee(t.uid===u,i,"user-mismatch"),Ls._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ar(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e,n=!1){if(_i(t.app))return Promise.reject(Ts(t));const i="signIn",r=await qI(t,i,e),o=await Ls._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function Tj(t,e,n,i){return Dn(t).onIdTokenChanged(e,n,i)}function Ej(t,e,n){return Dn(t).beforeAuthStateChanged(e,n)}function Pj(t,e,n,i){return Dn(t).onAuthStateChanged(e,n,i)}const df="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(df,"1"),this.storage.removeItem(df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=1e3,Cj=10;class KI extends ZI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);tj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Cj):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Sj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KI.type="LOCAL";const Ij=KI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI extends ZI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QI.type="SESSION";const YI=QI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new sp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await Aj(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=lv("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function kj(t){qi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function Rj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Lj(){return XI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="firebaseLocalStorageDb",Mj=1,ff="firebaseLocalStorage",eA="fbase_key";class bc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function op(t,e){return t.transaction([ff],e?"readwrite":"readonly").objectStore(ff)}function Oj(){const t=indexedDB.deleteDatabase(JI);return new bc(t).toPromise()}function ny(){const t=indexedDB.open(JI,Mj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(ff,{keyPath:eA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(ff)?e(i):(i.close(),await Oj(),e(await ny()))})})}async function v1(t,e,n){const i=op(t,!0).put({[eA]:e,value:n});return new bc(i).toPromise()}async function Dj(t,e){const n=op(t,!1).get(e),i=await new bc(n).toPromise();return i===void 0?null:i.value}function w1(t,e){const n=op(t,!0).delete(e);return new bc(n).toPromise()}const Vj=800,jj=3;class tA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ny(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>jj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sp._getInstance(Lj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Rj(),!this.activeServiceWorker)return;this.sender=new bj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ny();return await v1(e,df,"1"),await w1(e,df),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>v1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Dj(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>w1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=op(r,!1).getAll();return new bc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tA.type="LOCAL";const Fj=tA;new Ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t,e){return e?mr(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends $I{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ha(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ha(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zj(t){return xj(t.auth,new uv(t),t.bypassAuthState)}function Uj(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),wj(n,new uv(t),t.bypassAuthState)}async function Hj(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),vj(n,new uv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zj;case"linkViaPopup":case"linkViaRedirect":return Hj;case"reauthViaPopup":case"reauthViaRedirect":return Uj;default:Ar(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=new Ic(2e3,1e4);class La extends nA{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,La.currentPopupAction&&La.currentPopupAction.cancel(),La.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Gi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,La.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wj.get())};e()}}La.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="pendingRedirect",ud=new Map;class Gj extends nA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ud.get(this.auth._key());if(!e){try{const i=await qj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qj(t,e){const n=Qj(e),i=Kj(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Zj(t,e){ud.set(t._key(),e)}function Kj(t){return mr(t._redirectPersistence)}function Qj(t){return ld($j,t.config.apiKey,t.name)}async function Yj(t,e,n=!1){if(_i(t.app))return Promise.reject(Ts(t));const i=rp(t),r=Bj(i,e),a=await new Gj(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=10*60*1e3;class Jj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!iA(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Gi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Xj&&this.cachedEventUids.clear(),this.cachedEventUids.has(x1(e))}saveEventToCache(e){this.cachedEventUids.add(x1(e)),this.lastProcessedEventTime=Date.now()}}function x1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e={}){return xl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i6=/^https?/;async function r6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t6(t);for(const n of e)try{if(s6(n))return}catch{}Ar(t,"unauthorized-domain")}function s6(t){const e=ey(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!i6.test(n))return!1;if(n6.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=new Ic(3e4,6e4);function T1(){const t=qi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function a6(t){return new Promise((e,n)=>{var r,o,a;function i(){T1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T1(),n(Gi(t,"network-request-failed"))},timeout:o6.get()})}if((o=(r=qi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=qi().gapi)!=null&&a.load)i();else{const u=cj("iframefcb");return qi()[u]=()=>{gapi.load?i():n(Gi(t,"network-request-failed"))},lj(`${uj()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw cd=null,e})}let cd=null;function l6(t){return cd=cd||a6(t),cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=new Ic(5e3,15e3),c6="__/auth/iframe",h6="emulator/auth/iframe",d6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p6(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rv(e,h6):`https://${t.config.authDomain}/${c6}`,i={apiKey:e.apiKey,appName:t.name,v:gl},r=f6.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${wc(i).slice(1)}`}async function m6(t){const e=await l6(t),n=qi().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:p6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d6,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Gi(t,"network-request-failed"),u=qi().setTimeout(()=>{o(a)},u6.get());function h(){qi().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y6=500,_6=600,v6="_blank",w6="http://localhost";class E1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x6(t,e,n,i=y6,r=_6){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...g6,width:i.toString(),height:r.toString(),top:o,left:a},f=on().toLowerCase();n&&(u=VI(f)?v6:n),OI(f)&&(e=e||w6,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[E,R])=>`${_}${E}=${R},`,"");if(ej(f)&&u!=="_self")return T6(e||"",u),new E1(null);const g=window.open(e||"",u,m);Ee(g,t,"popup-blocked");try{g.focus()}catch{}return new E1(g)}function T6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="__/auth/handler",P6="emulator/auth/handler",S6=encodeURIComponent("fac");async function P1(t,e,n,i,r,o){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:gl,eventId:r};if(e instanceof GI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",pD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Ac){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${S6}=${encodeURIComponent(h)}`:"";return`${C6(t)}?${wc(u).slice(1)}${f}`}function C6({config:t}){return t.emulator?rv(t,P6):`https://${t.authDomain}/${E6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="webStorageSupport";class I6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YI,this._completeRedirectFn=Yj,this._overrideRedirectResult=Zj}async _openPopup(e,n,i,r){var a;br((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await P1(e,n,i,ey(),r);return x6(e,o,lv())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await P1(e,n,i,ey(),r);return kj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(br(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await m6(e),i=new Jj(e);return n.register("authEvent",r=>(Ee(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ym,{type:ym},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[ym];o!==void 0&&n(!!o),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UI()||DI()||ov()}}const A6=I6;var S1="@firebase/auth",C1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R6(t){nl(new So("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;Ee(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HI(t)},f=new oj(i,r,o,h);return dj(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),nl(new So("auth-internal",e=>{const n=rp(e.getProvider("auth").getImmediate());return(i=>new b6(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(S1,C1,k6(t)),_s(S1,C1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=5*60,L6=FS("authIdTokenMaxAge")||N6;let I1=null;const M6=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>L6)return;const r=n==null?void 0:n.token;I1!==r&&(I1=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function O6(t=$S()){const e=S_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hj(t,{popupRedirectResolver:A6,persistence:[Fj,Ij,YI]}),i=FS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=M6(o.toString());Ej(n,a,()=>a(n.currentUser)),Tj(n,u=>a(u))}}const r=VS("auth");return r&&fj(n,`http://${r}`),n}function D6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}aj({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Gi("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",D6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R6("Browser");var V6="firebase",j6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(V6,j6,"app");const F6={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},rA=WS(F6),bt=T5(rA),A1=O6(rA),pf={praha:{id:"praha",name:"Praha",center:[50.105,14.49],zoom:14,description:"Prague city - includes Centrum, Palmovka, Vysoany, Karln, Libe"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},B6="praha",sA=pf[B6].center,oA=15,z6=13,U6=18,b1={tileUrl:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},yo=["red","blue"],aA={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},k1=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],vi=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"praha"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"praha"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"praha"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"praha"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"praha"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-46",name:"Centrum 1",location:[50.091525,14.440142],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Florenc",hood:"praha"},{id:"art-47",name:"Centrum 2",location:[50.089364,14.437222],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Florenc",hood:"praha"},{id:"art-48",name:"Centrum 3",location:[50.087811,14.432578],size:"large",status:"active",mhd:null,capturedBy:null,area:"Karln",hood:"praha"},{id:"art-49",name:"Centrum 4",location:[50.084514,14.429217],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Karln",hood:"praha"},{id:"art-50",name:"Centrum 5",location:[50.083103,14.426833],size:"small",status:"active",mhd:null,capturedBy:null,area:"Karln",hood:"praha"},{id:"art-51",name:"Centrum 6",location:[50.080575,14.423917],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-52",name:"Centrum 7",location:[50.079044,14.422033],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-53",name:"Centrum 8",location:[50.082172,14.418336],size:"large",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-54",name:"Centrum 9",location:[50.081775,14.416789],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-55",name:"Centrum 10",location:[50.081547,14.413769],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Centrum",hood:"praha"},{id:"art-56",name:"Centrum 11",location:[50.092544,14.444431],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Florenc",hood:"praha"},{id:"art-57",name:"Vysoany 11",location:[50.110867,14.516553],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"praha"}];function Wa(t){var e;return((e=aA[t.size])==null?void 0:e.points)||100}function H6(t,e=.008){const n={};yo.forEach(r=>n[r]=[]);const i={};return yo.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),yo.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],m=o[h],g=`${f.id}-${m.id}`,_=f.location[0]-m.location[0],E=(f.location[1]-m.location[1])*1.6,R=Math.sqrt(_*_+E*E);R<=e&&!a.has(g)&&(a.add(g),n[r].push({from:f.location,to:m.location,distance:R}))}}),n}function _m(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function lA(t){const e={};return yo.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=Wa(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const ot={SOLO:"solo",BATTLE:"battle",SPECIAL:"special",SESSION:"session",SOCIAL:"social"},$a=[{id:"first_find",name:"First Find",description:"Discover your first street art",icon:"",category:ot.SOLO,check:t=>t.discoveryCount>=1},{id:"explorer",name:"Explorer",description:"Discover 10 pieces of street art",icon:"",category:ot.SOLO,check:t=>t.discoveryCount>=10},{id:"collector",name:"Collector",description:"Discover 25 pieces of street art",icon:"",category:ot.SOLO,check:t=>t.discoveryCount>=25},{id:"traveller",name:"Traveller",description:"Visit 3 different areas",icon:"",category:ot.SOLO,check:t=>{var e;return(((e=t.uniqueAreasVisited)==null?void 0:e.length)||0)>=3}},{id:"wanderer",name:"Wanderer",description:"Visit all areas",icon:"",category:ot.SOLO,check:t=>{var e;return(((e=t.uniqueAreasVisited)==null?void 0:e.length)||0)>=6}},{id:"getting_started",name:"Getting Started",description:"3 captures in one day",icon:"",category:ot.SOLO,check:t=>t.streak>=3},{id:"on_fire",name:"On Fire",description:"5 captures in one day",icon:"",category:ot.SOLO,check:t=>t.streak>=5},{id:"unstoppable",name:"Unstoppable",description:"10 captures in one day",icon:"",category:ot.SOLO,check:t=>t.streak>=10},{id:"first_blood",name:"First Blood",description:"Capture your first territory",icon:"",category:ot.BATTLE,check:t=>t.captureCount>=1},{id:"warrior",name:"Warrior",description:"Capture 10 territories",icon:"",category:ot.BATTLE,check:t=>t.captureCount>=10},{id:"conqueror",name:"Conqueror",description:"Capture 50 territories",icon:"",category:ot.BATTLE,check:t=>t.captureCount>=50},{id:"thief",name:"Thief",description:"Steal your first territory",icon:"",category:ot.BATTLE,check:t=>t.recaptureCount>=1},{id:"raider",name:"Raider",description:"Steal 10 territories",icon:"",category:ot.BATTLE,check:t=>t.recaptureCount>=10},{id:"nemesis",name:"Nemesis",description:"Steal 25 territories",icon:"",category:ot.BATTLE,check:t=>t.recaptureCount>=25},{id:"team_player",name:"Team Player",description:"Contribute 500 points to your team",icon:"",category:ot.BATTLE,check:t=>t.score>=500},{id:"mvp",name:"MVP",description:"Contribute 2000 points to your team",icon:"",category:ot.BATTLE,check:t=>t.score>=2e3},{id:"legend",name:"Legend",description:"Contribute 5000 points to your team",icon:"",category:ot.BATTLE,check:t=>t.score>=5e3},{id:"pioneer",name:"Pioneer",description:"Be the first to capture a territory",icon:"",category:ot.SPECIAL,check:t=>t.firstCaptureCount>=1},{id:"early_bird",name:"Early Bird",description:"Capture before 7 AM",icon:"",category:ot.SPECIAL,check:t=>t.hasEarlyCapture===!0},{id:"night_owl",name:"Night Owl",description:"Capture after 10 PM",icon:"",category:ot.SPECIAL,check:t=>t.hasNightCapture===!0}];function W6(t){return $a.find(e=>e.id===t)}function uA(t,e={},n=[],i={}){const r=[];return $a.forEach(o=>{o.check(t,e,n,i)&&r.push(o.id)}),r}function $6(t=[],e=[]){return e.filter(n=>!t.includes(n))}$a.length;const cA=M.createContext(null),Ft={player:"streetart-ctf-player",captures:"streetart-ctf-captures",discoveries:"streetart-discoveries",gameMode:"streetart-game-mode",achievements:"streetart-achievements"},Dh={SOLO:"solo",TEAM:"team"},iu="streetart-captures",Vh="streetart-players",vm="streetart-teams",G6={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function ha(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function Wr(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function q6({children:t}){const[e,n]=M.useState(null),[i,r]=M.useState(!0),[o,a]=M.useState(()=>ha(Ft.gameMode,Dh.SOLO)),[u,h]=M.useState(()=>ha(Ft.discoveries,{})),[f,m]=M.useState(()=>ha(Ft.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,totalDistance:0,lastCaptureTime:null,lastCaptureLocation:null,captureCount:0,recaptureCount:0,firstCaptureCount:0,discoveryCount:0,uniqueAreasVisited:[]})),[g,_]=M.useState(()=>{const te=ha(Ft.captures,{});return vi.map(he=>({...he,capturedBy:te[he.id]||null}))}),[E,R]=M.useState(null),[k,V]=M.useState(!1),[A,T]=M.useState(null);M.useEffect(()=>{const te=Pj(A1,he=>{he?(n(he),m(pe=>({...pe,id:he.uid}))):_j(A1).catch(pe=>{console.log("Auth not available, using local mode")})});return()=>te()},[]);const[S,B]=M.useState(null),[W,z]=M.useState([]),I=M.useRef({}),[C,N]=M.useState(()=>ha(Ft.achievements,[])),[D,j]=M.useState(null);M.useEffect(()=>{let te=!0;const he=so(bt,iu),pe=mm(he,Re=>{const me={},Ne={},Ue=[];Re.forEach(ye=>{var dt,rt,et,li;const Me=ye.data();if(Me.status&&(Ne[ye.id]=Me.status),Me.capturedBy){me[ye.id]={team:Me.capturedBy,playerName:Me.playerName||"Unknown",capturedAt:((rt=(dt=Me.capturedAt)==null?void 0:dt.toDate)==null?void 0:rt.call(dt))||null};const zn=vi.find(Tl=>Tl.id===ye.id),In=I.current[ye.id];Ue.push({id:ye.id,artName:(zn==null?void 0:zn.name)||ye.id,area:(zn==null?void 0:zn.area)||"Unknown",team:Me.capturedBy,playerName:Me.playerName||"Unknown",capturedAt:((li=(et=Me.capturedAt)==null?void 0:et.toDate)==null?void 0:li.call(et))||new Date,points:Me.points||100,isRecapture:Me.isRecapture||!1,prevPlayerName:(In==null?void 0:In.playerName)||null,prevTeam:(In==null?void 0:In.team)||null})}});const je=Ue.sort((ye,Me)=>Me.capturedAt-ye.capturedAt).slice(0,10);z(je),te||Re.docChanges().forEach(ye=>{var Me;if(ye.type==="added"||ye.type==="modified"){const dt=ye.doc.data(),rt=(Me=I.current[ye.doc.id])==null?void 0:Me.team;if(dt.capturedBy&&rt!==dt.capturedBy){const et=vi.find(li=>li.id===ye.doc.id);et&&(B({artId:et.id,artName:et.name,location:et.location,team:dt.capturedBy,playerId:dt.playerId,playerName:dt.playerName||"Someone",points:dt.points||Wa(et),streak:dt.streak||0,isRecapture:dt.isRecapture||!!rt,prevOwner:rt||null,timestamp:Date.now()}),setTimeout(()=>B(null),3900))}}}),te=!1,I.current=me,_(vi.map(ye=>{const Me=me[ye.id];return{...ye,capturedBy:(Me==null?void 0:Me.team)||null,capturedByPlayer:(Me==null?void 0:Me.playerName)||null,capturedAt:(Me==null?void 0:Me.capturedAt)||null,status:Ne[ye.id]||ye.status}})),Wr(Ft.captures,me),r(!0),console.log("Firebase: Synced",Object.keys(me).length,"captures")},Re=>{console.warn("Firestore sync error:",Re),r(!1)});return()=>pe()},[]);const[U,O]=M.useState({red:0,blue:0});M.useEffect(()=>{const te=so(bt,vm),he=mm(te,pe=>{const Re={red:0,blue:0};pe.forEach(me=>{const Ne=me.data();(me.id==="red"||me.id==="blue")&&(Re[me.id]=Ne.score||0)}),O(Re),console.log("Team scores:",Re)});return()=>he()},[]);const[Te,se]=M.useState([]);M.useEffect(()=>{const te=so(bt,Vh),he=mm(te,pe=>{const Re=[];pe.forEach(me=>{const Ne=me.data();Ne.name&&Ne.team&&Re.push({id:me.id,name:Ne.name,team:Ne.team,score:Ne.score||0,captures:Ne.captures||0})}),se(Re.sort((me,Ne)=>Ne.score-me.score)),console.log("Players loaded:",Re.length)});return()=>he()},[]),M.useEffect(()=>{Wr(Ft.player,f)},[f]),M.useEffect(()=>{const te=uA(f,u,g,{}),he=$6(C,te);if(he.length>0){const pe=[...new Set([...C,...he])];N(pe),Wr(Ft.achievements,pe);const Re=W6(he[0]);Re&&(j(Re),setTimeout(()=>j(null),4e3))}},[f.score,f.captureCount,f.recaptureCount,f.discoveryCount,f.streak,f.firstCaptureCount]);const fe=M.useCallback(async(te,he)=>{if(i)try{await Di(Rn(bt,iu,te),{artId:te,capturedBy:he.team,capturedAt:new Date,playerId:f.id,playerName:f.name,points:he.points,streak:he.streak,isFirstCapture:he.isFirstCapture,isRecapture:he.isRecapture})}catch(pe){console.warn("Failed to sync capture to Firebase:",pe)}},[i,f.id,f.name]);M.useCallback(async te=>{if(i)try{await Di(Rn(bt,iu,"global"),te,{merge:!0})}catch(he){console.warn("Failed to sync to Firebase:",he)}},[i]);const Ie=lA(g),Z={red:Math.max(U.red,Ie.red),blue:Math.max(U.blue,Ie.blue)},oe=M.useCallback(async te=>{if(!(!i||!te.id)&&!(!te.name||te.name==="Street Artist")&&te.team)try{await Di(Rn(bt,Vh,te.id),{name:te.name,team:te.team,score:te.score||0,captures:te.captureCount||0,joinedAt:new Date},{merge:!0})}catch(he){console.warn("Failed to sync player to Firebase:",he)}},[i]),J=M.useCallback(async te=>{yo.includes(te)&&m(he=>{const pe={...he,team:te};return Wr(Ft.player,pe),oe(pe).catch(()=>{}),pe})},[oe]),ie=M.useCallback(async te=>{m(he=>{const pe={...he,name:te};return Wr(Ft.player,pe),oe(pe).catch(()=>{}),pe})},[oe]),Pe=M.useCallback((te,he,pe=50)=>{let Re=null,me=1/0;return g.forEach(Ne=>{const Ue=(Ne.location[0]-te)*111e3,je=(Ne.location[1]-he)*111e3*Math.cos(te*Math.PI/180),ye=Math.sqrt(Ue*Ue+je*je);ye<me&&ye<=pe&&(me=ye,Re={...Ne,distance:Math.round(ye)})}),Re},[g]),Ze=M.useCallback((te,he,pe,Re)=>{const me=(pe-te)*111e3,Ne=(Re-he)*111e3*Math.cos(te*Math.PI/180);return Math.sqrt(me*me+Ne*Ne)},[]),Le=M.useCallback((te,he,pe=null)=>{const Re=Wa(te),me=[];let Ne=Re;const Ue=te.capturedBy&&te.capturedBy!==he.team,je=!te.capturedBy,ye=Date.now(),Me=he.lastCaptureTime?(ye-he.lastCaptureTime)/1e3/60:1/0,dt=he.streak||0;if(dt>0){const rt=Math.min(dt*.1,1),et=Math.round(Re*rt);et>0&&(Ne+=et,me.push({type:"streak",label:`${dt}x Streak`,points:et}))}if(Ue){const rt=Math.round(Re*.5);Ne+=rt,me.push({type:"recapture",label:"Recapture",points:rt})}if(je){const rt=Math.round(Re*.25);Ne+=rt,me.push({type:"first",label:"First Capture",points:rt})}if(Me<5){const rt=Math.round(Re*.2);Ne+=rt,me.push({type:"speed",label:"Speed Bonus",points:rt})}if(pe&&he.lastCaptureLocation){const rt=Ze(he.lastCaptureLocation[0],he.lastCaptureLocation[1],pe[0],pe[1]);if(rt>50){const et=Math.min(Math.round(rt/100)*5,50);et>0&&(Ne+=et,me.push({type:"distance",label:`${Math.round(rt)}m walked`,points:et}))}}return{basePoints:Re,totalPoints:Ne,bonuses:me,isRecapture:Ue,isFirstCapture:je}},[Ze]),ke=M.useCallback((te,he=null)=>{if(!f.team)return{success:!1,message:"Join a team first!"};const pe=g.find(ye=>ye.id===te);if(!pe)return{success:!1,message:"Art not found"};if(pe.capturedBy===f.team)return{success:!1,message:"Already yours!"};if(pe.status==="ghost")return{success:!1,message:"This art no longer exists"};const Re=he||pe.location,me=Le(pe,f,Re),Ne=pe.capturedBy;_(ye=>ye.map(Me=>Me.id===te?{...Me,capturedBy:f.team}:Me));const Ue=f.streak+1;m(ye=>({...ye,score:ye.score+me.totalPoints,capturedArt:[...ye.capturedArt.filter(Me=>Me!==te),te],streak:Ue,maxStreak:Math.max(ye.maxStreak,Ue),lastCaptureTime:Date.now(),lastCaptureLocation:Re,captureCount:ye.captureCount+1,recaptureCount:me.isRecapture?ye.recaptureCount+1:ye.recaptureCount,firstCaptureCount:me.isFirstCapture?ye.firstCaptureCount+1:ye.firstCaptureCount,totalDistance:ye.totalDistance+(he&&ye.lastCaptureLocation?Ze(ye.lastCaptureLocation[0],ye.lastCaptureLocation[1],he[0],he[1]):0)})),fe(te,{team:f.team,points:me.totalPoints,streak:Ue,isFirstCapture:me.isFirstCapture,isRecapture:me.isRecapture});const je=ha(Ft.captures,{});return Wr(Ft.captures,{...je,[te]:f.team}),{success:!0,art:pe,points:me.totalPoints,basePoints:me.basePoints,bonuses:me.bonuses,streak:Ue,previousTeam:Ne,message:Ne?`Stolen from ${Ne}!`:"Captured!"}},[f,g,fe,Le,Ze]),ge=M.useCallback(async(te,he)=>{V(!0);const pe=Pe(he.lat,he.lng,100);if(!pe){V(!1),R({success:!1,message:"No street art nearby. Get closer!"});return}T({art:pe,photo:te,location:he}),V(!1)},[Pe]),ht=M.useCallback(()=>{if(!A)return;const te=ke(A.art.id);R(te),T(null)},[A,ke]),Kt=M.useCallback(()=>{T(null),R(null)},[]),oi=M.useCallback(te=>{(te===Dh.SOLO||te===Dh.TEAM)&&(a(te),Wr(Ft.gameMode,te))},[]),Bn=M.useCallback(async(te,he=null)=>{const pe=g.find(je=>je.id===te);if(!pe)return{success:!1,message:"Art not found"};if(u[te])return{success:!1,message:"Already discovered!",alreadyDiscovered:!0};const Re=new Date,me={artId:te,artName:pe.name,area:pe.area,size:pe.size,points:Wa(pe),discoveredAt:Re.toISOString(),location:he||pe.location},Ne={...u,[te]:me};h(Ne),Wr(Ft.discoveries,Ne);const Ue=new Set([...f.uniqueAreasVisited,pe.area]);if(m(je=>({...je,score:je.score+me.points,discoveryCount:je.discoveryCount+1,uniqueAreasVisited:[...Ue],lastCaptureTime:Re.getTime(),lastCaptureLocation:he||pe.location})),i&&f.id)try{await Di(Rn(bt,"streetart-discoveries",`${f.id}_${te}`),{...me,playerId:f.id,playerName:f.name})}catch(je){console.warn("Failed to sync discovery to Firebase:",je)}return{success:!0,message:"Discovered!",discovery:me}},[g,u,f,i]),an=M.useCallback(async()=>{if(console.log("Resetting all data..."),localStorage.removeItem(Ft.player),localStorage.removeItem(Ft.captures),localStorage.removeItem(Ft.discoveries),localStorage.removeItem(Ft.gameMode),Object.keys(localStorage).forEach(te=>{te.startsWith("streetart-")&&localStorage.removeItem(te)}),i)try{const te=await af(so(bt,iu)),he=te.docs.map(me=>Nu(Rn(bt,iu,me.id)));await Promise.all(he),console.log("Deleted",te.size,"captures");const pe=await af(so(bt,Vh)),Re=pe.docs.map(me=>Nu(Rn(bt,Vh,me.id)));await Promise.all(Re),console.log("Deleted",pe.size,"players"),await Di(Rn(bt,vm,"red"),{score:0}),await Di(Rn(bt,vm,"blue"),{score:0}),console.log("Reset team scores")}catch(te){console.warn("Failed to reset Firebase:",te)}m({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,captureCount:0,recaptureCount:0,firstCaptureCount:0,totalDistance:0,discoveryCount:0,uniqueAreasVisited:[]}),_(vi.map(te=>({...te,capturedBy:null}))),h({}),R(null),T(null),z([]),console.log("Reset complete!"),window.location.reload()},[e,i]),ai={player:f,artPoints:g,teamScores:Z,globalTeamScores:U,allPlayers:Te,recentCaptures:W,captureNotification:S,scanResult:E,isScanning:k,pendingCapture:A,isOnline:i,teams:yo,gameMode:o,discoveries:u,discoveryCount:Object.keys(u).length,unlockedAchievements:C,achievementNotification:D,setGameMode:oi,joinTeam:J,setPlayerName:ie,captureArt:ke,discoverArt:Bn,startCapture:ge,confirmCapture:ht,cancelCapture:Kt,findNearestArt:Pe,setScanResult:R,resetAll:an,TEAM_COLORS:G6,GAME_MODES:Dh};return w.jsx(cA.Provider,{value:ai,children:t})}function si(){const t=M.useContext(cA);if(!t)throw new Error("useGame must be used within a GameProvider");return t}const R1=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],N1=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function L1(){const t=R1[Math.floor(Math.random()*R1.length)],e=N1[Math.floor(Math.random()*N1.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function Z6({text:t,className:e="",delay:n=0}){const i=t.split(" ");return w.jsx("span",{className:e,children:i.map((r,o)=>w.jsx(ee.span,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n+o*.08,duration:.4},className:"inline-block mr-[0.3em]",children:r},o))})}function jh({text:t,className:e="",delay:n=0}){return w.jsx("span",{className:e,children:t.split("").map((i,r)=>w.jsx(ee.span,{initial:{opacity:0,y:40,rotate:-10},animate:{opacity:1,y:0,rotate:0},transition:{delay:n+r*.04,duration:.5,type:"spring",stiffness:200},className:"inline-block",style:{display:i===" "?"inline":"inline-block"},children:i===" "?"":i},r))})}function K6(){const t=pl(),{player:e,joinTeam:n,setPlayerName:i,allPlayers:r,teamScores:o}=si(),[a,u]=M.useState(0),[h,f]=M.useState(()=>e.name&&e.name!=="Street Artist"?e.name:L1()),[m,g]=M.useState(null);M.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]);const _=()=>{if(m)return m;const T=.6,S=.4,B=(o==null?void 0:o.red)||0,W=(o==null?void 0:o.blue)||0,z=B+W;let I=.5;z>0&&(I=(1-B/z)*T+.5*S);const C=Math.random()<I?"red":"blue";return console.log(`Team Assignment: Red=${B} Blue=${W}  P(Red)=${(I*100).toFixed(0)}%  Assigned: ${C}`),C},E=()=>f(L1()),R=async()=>{if(a===1&&h.trim()){const T=_();g(T),await i(h.trim()),await n(T)}if(a===3){t("/map");return}u(a+1)},k=()=>a===1?h.trim().length>=2:!0,V=m==="red"?"#E53935":"#1E88E5",A=m==="red"?"RED":"BLUE";return w.jsxs("div",{className:"h-screen bg-[#FAFAFA] flex flex-col overflow-hidden font-nohemi",children:[w.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-black/5 z-10",children:w.jsx(ee.div,{className:"h-full bg-black",initial:{width:"0%"},animate:{width:`${(a+1)/4*100}%`},transition:{duration:.5,ease:"easeOut"}})}),w.jsxs(ms,{mode:"wait",children:[a===0&&w.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-100},transition:{duration:.4},className:"flex-1 flex flex-col justify-center items-center p-6 pt-16 text-center",children:[w.jsx(ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:100},className:"mb-8",children:w.jsx("img",{src:"/street-art-ctf/animations/jump.gif",alt:"Chomp jumping",className:"w-48 h-48 object-contain"})}),w.jsxs("h1",{className:"text-[4rem] leading-[0.95] font-black text-black mb-4 tracking-tight",children:[w.jsx(jh,{text:"CHOMP",delay:.3}),w.jsx("br",{}),w.jsx(jh,{text:"GAME",delay:.6})]}),w.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-lg text-black/40 max-w-[280px] leading-relaxed",children:"Find. Scan. Collect."})]},"intro"),a===1&&w.jsxs(ee.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.4},className:"flex-1 flex flex-col justify-center p-6",children:[w.jsx(ee.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-sm tracking-widest text-black/40 mb-4",children:"STEP 1 OF 3"}),w.jsx("h1",{className:"text-4xl font-bold text-black mb-3 tracking-tight",children:w.jsx(Z6,{text:"Who are you?",delay:.2})}),w.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-black/40 mb-10",children:"Pick a name. Make it memorable."}),w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[w.jsx("input",{type:"text",value:h,onChange:T=>f(T.target.value),placeholder:"Your name",maxLength:20,className:"w-full py-4 text-3xl font-bold text-black bg-transparent border-b-2 border-black/20 focus:border-black focus:outline-none placeholder:text-black/20 transition-colors"}),w.jsx("button",{onClick:E,className:"mt-6 text-sm text-black/40 hover:text-black transition-colors underline underline-offset-4",children:"Randomize"})]})]},"name"),a===2&&w.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-100},transition:{duration:.4},className:"flex-1 flex flex-col justify-center items-center p-6 text-center relative overflow-hidden",style:{backgroundColor:V},children:[w.jsx(ee.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:100},className:"mb-4",children:w.jsx("img",{src:"/street-art-ctf/animations/eat.gif",alt:"Chomp eating",className:"w-40 h-40 object-contain"})}),w.jsxs(ee.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:150},children:[w.jsxs(ee.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/60 text-sm tracking-widest mb-2",children:[h.toUpperCase(),", YOU ARE"]}),w.jsxs("h1",{className:"text-[4rem] leading-none font-black text-white tracking-tight",children:[w.jsx(jh,{text:"TEAM",delay:.6}),w.jsx("br",{}),w.jsx(jh,{text:A,delay:.9})]}),w.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.4},className:"mt-4 text-white/50 text-lg",children:m==="red"?"Burn bright. Conquer all.":"Flow strong. Take over."})]})]},"team"),a===3&&w.jsxs(ee.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0},transition:{duration:.4},className:"flex-1 flex flex-col justify-center p-6 pt-10",children:[w.jsx(ee.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-xs tracking-widest text-black/40 mb-2 text-center",children:"HOW TO PLAY"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs(ee.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex gap-3",children:[w.jsx("div",{className:"text-3xl font-black text-black/10",children:"1"}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-base font-bold text-black mb-0.5",children:"Find Chomps"}),w.jsx("p",{className:"text-xs text-black/50 leading-relaxed",children:"Look for Chomp stickers hiding in the city."})]})]}),w.jsxs(ee.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.5},className:"flex gap-3",children:[w.jsx("div",{className:"text-3xl font-black text-black/10",children:"2"}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-base font-bold text-black mb-0.5",children:"Scan to Collect"}),w.jsx("p",{className:"text-xs text-black/50 leading-relaxed",children:"Use AR scanner to capture the Chomp."})]})]}),w.jsxs(ee.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.7},className:"flex gap-3",children:[w.jsx("div",{className:"text-3xl font-black text-black/10",children:"3"}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-base font-bold text-black mb-0.5",children:"Two Ways to Play"}),w.jsxs("p",{className:"text-xs text-black/50 leading-relaxed",children:[w.jsx("span",{className:"font-bold text-black",children:"Solo:"})," Personal collection.",w.jsx("br",{}),w.jsx("span",{className:"font-bold text-black",children:"Battle:"})," Compete for territory!"]})]})]})]}),w.jsx(ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.9,type:"spring",stiffness:100},className:"flex justify-center mt-6",children:w.jsx("img",{src:"/street-art-ctf/animations/scan.gif",alt:"Scanning",className:"w-28 h-28 object-contain border-2 border-black",style:{filter:"hue-rotate(140deg)"}})})]},"how")]}),w.jsx("div",{className:"p-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:w.jsx(ee.button,{whileTap:{scale:.98},onClick:R,disabled:!k(),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:`w-full py-5 font-bold text-lg tracking-wide transition-all ${a===2?"bg-white text-black":k()?"bg-black text-white":"bg-black/10 text-black/30 cursor-not-allowed"}`,children:a===3?"LET'S GO":a===2?"CONTINUE":"NEXT"})})]})}const da={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};function Q6(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"now";const n=Math.floor(e/60);if(n<60)return`${n}m`;const i=Math.floor(n/60);return i<24?`${i}h`:`${Math.floor(i/24)}d`}function Y6(){var h;const t=pl(),{player:e,recentCaptures:n,isOnline:i,artPoints:r}=si(),o=M.useMemo(()=>{const f=(r==null?void 0:r.filter(V=>V.status!=="ghost"))||[],m=f.length,g=f.filter(V=>V.capturedBy==="red").length,_=f.filter(V=>V.capturedBy==="blue").length,E=m-g-_,R=m>0?Math.round(g/m*100):0,k=m>0?Math.round(_/m*100):0;return{total:m,red:g,blue:_,unclaimed:E,redPercent:R,bluePercent:k}},[r]),a=()=>{if(!e.team)return"";const f=Math.abs(o.redPercent-o.bluePercent),m=o.red>o.blue,g=o.blue>o.red,_=e.team==="red"&&m||e.team==="blue"&&g;return f===0&&o.red===o.blue?o.red===0?"No territory claimed yet":"Teams are tied!":_?f>=20?`Dominating by ${f}%!`:`Leading by ${f}%`:f>=20?`Behind by ${f}%`:`Trailing by ${f}%`},u=((h=da[e.team])==null?void 0:h.color)||"#888";return w.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi",children:[w.jsxs("div",{className:"p-6 pt-10",children:[w.jsx(ee.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-xs tracking-widest text-black/30 mb-1",children:i?"LIVE":"OFFLINE"}),w.jsx(ee.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-3xl font-bold text-black tracking-tight",children:"Battle"})]}),w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"px-6 mb-6",children:[w.jsxs("div",{className:"flex justify-between items-baseline mb-2",children:[w.jsx("div",{className:"flex items-baseline gap-2",children:w.jsxs("span",{className:"text-4xl font-black",style:{color:da.red.color},children:[o.redPercent,"%"]})}),w.jsx("div",{className:"flex items-baseline gap-2",children:w.jsxs("span",{className:"text-4xl font-black",style:{color:da.blue.color},children:[o.bluePercent,"%"]})})]}),w.jsxs("div",{className:"h-3 bg-black/10 flex overflow-hidden mb-3",children:[w.jsx(ee.div,{className:"h-full",style:{backgroundColor:da.red.color},initial:{width:"0%"},animate:{width:`${o.redPercent}%`},transition:{duration:.8,ease:"easeOut"}}),o.unclaimed>0&&w.jsx("div",{className:"h-full bg-black/5",style:{width:`${100-o.redPercent-o.bluePercent}%`}}),w.jsx(ee.div,{className:"h-full",style:{backgroundColor:da.blue.color},initial:{width:"0%"},animate:{width:`${o.bluePercent}%`},transition:{duration:.8,ease:"easeOut"}})]}),w.jsxs("div",{className:"flex justify-between text-xs text-black/40",children:[w.jsxs("span",{children:[o.red," chomps"]}),o.unclaimed>0&&w.jsxs("span",{className:"text-black/20",children:[o.unclaimed," unclaimed"]}),w.jsxs("span",{children:[o.blue," chomps"]})]})]}),e.team&&w.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"px-6 mb-8",children:w.jsx("div",{className:"text-center py-3 text-sm font-bold",style:{color:u,backgroundColor:`${u}10`},children:a()})}),w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"px-6 pb-32",children:[w.jsx("p",{className:"text-xs tracking-widest text-black/30 mb-4",children:"ACTIVITY"}),n.length===0?w.jsxs("div",{className:"py-12 text-center",children:[w.jsx("div",{className:"text-5xl font-black text-black/5 mb-2",children:"0"}),w.jsx("div",{className:"text-black/30 text-sm",children:"No captures yet"})]}):w.jsx("div",{className:"space-y-0",children:n.map((f,m)=>{const g=da[f.team]||{color:"#888"},_=f.playerName===e.name;return w.jsxs(ee.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.45+m*.03},onClick:()=>t("/map",{state:{targetArtId:f.id}}),className:`flex items-center gap-3 py-3 border-b border-black/5 cursor-pointer active:bg-black/5 ${_?"bg-black/[0.02] -mx-3 px-3":""}`,children:[w.jsx("div",{className:"w-1 h-8 flex-shrink-0",style:{backgroundColor:g.color}}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-sm font-medium text-black truncate",children:_?"You":f.playerName}),w.jsx("div",{className:"text-xs text-black/40 truncate",children:f.artName})]}),w.jsx("div",{className:"text-right flex-shrink-0",children:w.jsx("div",{className:"text-xs text-black/40",children:f.isRecapture&&f.prevPlayerName?`Stole from ${f.prevPlayerName}`:Q6(f.capturedAt)})})]},f.id)})})]})]})}function X6(t,e){const n=M.useRef(e);M.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function J6(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const eF=1;function tF(t){return Object.freeze({__version:eF,map:t})}function ap(t,e){return Object.freeze({...t,...e})}const hA=M.createContext(null),dA=hA.Provider;function cv(){const t=M.useContext(hA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function fA(t){function e(n,i){const{instance:r,context:o}=t(n).current;return M.useImperativeHandle(i,()=>r),n.children==null?null:_o.createElement(dA,{value:o},n.children)}return M.forwardRef(e)}function nF(t){function e(n,i){const{instance:r}=t(n).current;return M.useImperativeHandle(i,()=>r),null}return M.forwardRef(e)}function pA(t,e){const n=M.useRef();M.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function hv(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var iy={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(KA,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,P,F;return F=function(){p=!1,v&&(P.apply(d,v),v=!1)},P=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(F,l),p=!0)},P}function m(s,l,d){var p=l[1],v=l[0],P=p-v;return s===p&&d?s:((s-v)%P+P)%P+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function E(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function R(s){return E(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function V(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function T(s,l){return s.replace(A,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var I=0;function C(s){var l=+new Date,d=Math.max(0,16-(l-I));return I=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||z("RequestAnimationFrame")||C,D=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function j(s,l,d){if(d&&N===C)s.call(l);else return N.call(window,a(s,l))}function U(s){s&&D.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:E,splitWords:R,setOptions:k,getParamString:V,template:T,isArray:S,indexOf:B,emptyImageUrl:W,requestFn:N,cancelFn:D,requestAnimFrame:j,cancelAnimFrame:U};function Te(){}Te.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(se(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,F=p._initHooks.length;P<F;P++)p._initHooks[P].call(this)}},l},Te.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Te.mergeOptions=function(s){return r(this.prototype.options,s),this},Te.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function se(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var fe={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=R(s);for(var v=0,P=s.length;v<P;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=R(s);for(var v=arguments.length===1,P=0,F=s.length;P<F;P++)v?this._off(s[P]):this._off(s[P],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,P;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,P=p.length;v<P;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var F=this._listens(s,l,d);if(F!==!1){var $=p[F];this._firingCount&&($.fn=g,this._events[s]=p=p.slice()),p.splice(F,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var P=0,F=v.length;P<F;P++){var $=v[P],q=$.fn;$.once&&this.off(s,q,$.ctx),q.call($.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var P=this._events&&this._events[s];if(P&&P.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var F in this._eventParents)if(this._eventParents[F].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,P=p.length;v<P;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=R(s);for(var v=0,P=s.length;v<P;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};fe.addEventListener=fe.on,fe.removeEventListener=fe.clearAllEventListeners=fe.off,fe.addOneTimeEventListener=fe.once,fe.fireEvent=fe.fire,fe.hasEventListeners=fe.listens;var Ie=Te.extend(fe);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var oe=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function J(s,l,d){return s instanceof Z?s:S(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function ie(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}ie.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=Pe(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=J(s):s=Pe(s),s instanceof ie?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Pe(s);var l=this.min,d=this.max,p=s.min,v=s.max,P=v.x>=l.x&&p.x<=d.x,F=v.y>=l.y&&p.y<=d.y;return P&&F},overlaps:function(s){s=Pe(s);var l=this.min,d=this.max,p=s.min,v=s.max,P=v.x>l.x&&p.x<d.x,F=v.y>l.y&&p.y<d.y;return P&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return Pe(J(l.x-p,l.y-v),J(d.x+p,d.y+v))},equals:function(s){return s?(s=Pe(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Pe(s,l){return!s||s instanceof ie?s:new ie(s,l)}function Ze(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}Ze.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof ke)p=s,v=s;else if(s instanceof Ze){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(ge(s)||Le(s)):this;return!l&&!d?(this._southWest=new ke(p.lat,p.lng),this._northEast=new ke(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new Ze(new ke(l.lat-p,l.lng-v),new ke(d.lat+p,d.lng+v))},getCenter:function(){return new ke((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ke(this.getNorth(),this.getWest())},getSouthEast:function(){return new ke(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ke||"lat"in s?s=ge(s):s=Le(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof Ze?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=Le(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),P=v.lat>=l.lat&&p.lat<=d.lat,F=v.lng>=l.lng&&p.lng<=d.lng;return P&&F},overlaps:function(s){s=Le(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),P=v.lat>l.lat&&p.lat<d.lat,F=v.lng>l.lng&&p.lng<d.lng;return P&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Le(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(s,l){return s instanceof Ze?s:new Ze(s,l)}function ke(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}ke.prototype={equals:function(s,l){if(!s)return!1;s=ge(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return Kt.distance(this,ge(s))},wrap:function(){return Kt.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Le([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new ke(this.lat,this.lng,this.alt)}};function ge(s,l,d){return s instanceof ke?s:S(s)&&typeof s[0]!="object"?s.length===3?new ke(s[0],s[1],s[2]):s.length===2?new ke(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ke(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new ke(s,l,d)}var ht={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new ie(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ke(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var P=s.getSouthWest(),F=s.getNorthEast(),$=new ke(P.lat-p,P.lng-v),q=new ke(F.lat-p,F.lng-v);return new Ze($,q)}},Kt=r({},ht,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,P=Math.sin((l.lat-s.lat)*d/2),F=Math.sin((l.lng-s.lng)*d/2),$=P*P+Math.cos(p)*Math.cos(v)*F*F,q=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*q}}),oi=6378137,Bn={R:oi,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new ke((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=oi*Math.PI;return new ie([-s,-s],[s,s])}()};function an(s,l,d,p){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}an.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function ai(s,l,d,p){return new an(s,l,d,p)}var te=r({},Kt,{code:"EPSG:3857",projection:Bn,transformation:function(){var s=.5/(Math.PI*Bn.R);return ai(s,.5,-s,.5)}()}),he=r({},te,{code:"EPSG:900913"});function pe(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Re(s,l){var d="",p,v,P,F,$,q;for(p=0,P=s.length;p<P;p++){for($=s[p],v=0,F=$.length;v<F;v++)q=$[v],d+=(v?"L":"M")+q.x+" "+q.y;d+=l?ce.svg?"z":"x":""}return d||"M0 0"}var me=document.documentElement.style,Ne="ActiveXObject"in window,Ue=Ne&&!document.addEventListener,je="msLaunchUri"in navigator&&!("documentMode"in document),ye=gn("webkit"),Me=gn("android"),dt=gn("android 2")||gn("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),et=Me&&gn("Google")&&rt<537&&!("AudioNode"in window),li=!!window.opera,zn=!je&&gn("chrome"),In=gn("gecko")&&!ye&&!li&&!Ne,Tl=!zn&&gn("safari"),Nc=gn("phantom"),El="OTransition"in me,Lc=navigator.platform.indexOf("Win")===0,Lr=Ne&&"transition"in me,Bs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!dt,Fo="MozPerspective"in me,Qi=!window.L_DISABLE_3D&&(Lr||Bs||Fo)&&!El&&!Nc,Mr=typeof orientation<"u"||gn("mobile"),Bo=Mr&&ye,Mc=Mr&&Bs,Or=!window.PointerEvent&&window.MSPointerEvent,Pl=!!(window.PointerEvent||Or),Vt="ontouchstart"in window||!!window.TouchEvent,Oc=!window.L_NO_TOUCH&&(Vt||Pl),zs=Mr&&li,Us=Mr&&In,lp=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,up=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),Dr=function(){return!!document.createElement("canvas").getContext}(),Sl=!!(document.createElementNS&&pe("svg").createSVGRect),cp=!!Sl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),zo=!Sl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Dc=navigator.platform.indexOf("Mac")===0,Vc=navigator.platform.indexOf("Linux")===0;function gn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ce={ie:Ne,ielt9:Ue,edge:je,webkit:ye,android:Me,android23:dt,androidStock:et,opera:li,chrome:zn,gecko:In,safari:Tl,phantom:Nc,opera12:El,win:Lc,ie3d:Lr,webkit3d:Bs,gecko3d:Fo,any3d:Qi,mobile:Mr,mobileWebkit:Bo,mobileWebkit3d:Mc,msPointer:Or,pointer:Pl,touch:Oc,touchNative:Vt,mobileOpera:zs,mobileGecko:Us,retina:lp,passiveEvents:up,canvas:Dr,svg:Sl,vml:zo,inlineSvg:cp,mac:Dc,linux:Vc},jc=ce.msPointer?"MSPointerDown":"pointerdown",ui=ce.msPointer?"MSPointerMove":"pointermove",Cl=ce.msPointer?"MSPointerUp":"pointerup",Il=ce.msPointer?"MSPointerCancel":"pointercancel",Hs={touchstart:jc,touchmove:ui,touchend:Cl,touchcancel:Il},Uo={touchstart:Al,touchmove:Un,touchend:Un,touchcancel:Un},Yi={},Fc=!1;function Bc(s,l,d){return l==="touchstart"&&Ws(),Uo[l]?(d=Uo[l].bind(this,d),s.addEventListener(Hs[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function hp(s,l,d){if(!Hs[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Hs[l],d,!1)}function Ho(s){Yi[s.pointerId]=s}function zc(s){Yi[s.pointerId]&&(Yi[s.pointerId]=s)}function Wo(s){delete Yi[s.pointerId]}function Ws(){Fc||(document.addEventListener(jc,Ho,!0),document.addEventListener(ui,zc,!0),document.addEventListener(Cl,Wo,!0),document.addEventListener(Il,Wo,!0),Fc=!0)}function Un(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Yi)l.touches.push(Yi[d]);l.changedTouches=[l],s(l)}}function Al(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&St(l),Un(s,l)}function dp(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Uc=200;function Hc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(P){if(P.detail!==1){p=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var F=Ll(P);if(!(F.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!F.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var $=Date.now();$-d<=Uc?(p++,p===2&&l(dp(P))):p=1,d=$}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Wc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var $s=$o(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Xi=$o(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),bl=Xi==="webkitTransition"||Xi==="OTransition"?Xi+"End":"transitionend";function kl(s){return typeof s=="string"?document.getElementById(s):s}function Vr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function He(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function Ge(s){var l=s.parentNode;l&&l.removeChild(s)}function ln(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Hn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Wn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Gs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=Si(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function le(s,l){if(s.classList!==void 0)for(var d=R(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Gs(s,l)){var P=Si(s);Ji(s,(P?P+" ":"")+l)}}function tt(s,l){s.classList!==void 0?s.classList.remove(l):Ji(s,E((" "+Si(s)+" ").replace(" "+l+" "," ")))}function Ji(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Si(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function yn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&$c(s,l)}function $c(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function $o(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function er(s,l,d){var p=l||new Z(0,0);s.style[$s]=(ce.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function vt(s,l){s._leaflet_pos=l,ce.any3d?er(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function tr(s){return s._leaflet_pos||new Z(0,0)}var ci,An,Go;if("onselectstart"in document)ci=function(){Se(window,"selectstart",St)},An=function(){Xe(window,"selectstart",St)};else{var jr=$o(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ci=function(){if(jr){var s=document.documentElement.style;Go=s[jr],s[jr]="none"}},An=function(){jr&&(document.documentElement.style[jr]=Go,Go=void 0)}}function qo(){Se(window,"dragstart",St)}function Zo(){Xe(window,"dragstart",St)}var qs,Ci;function Rl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ko(),qs=s,Ci=s.style.outlineStyle,s.style.outlineStyle="none",Se(window,"keydown",Ko))}function Ko(){qs&&(qs.style.outlineStyle=Ci,qs=void 0,Ci=void 0,Xe(window,"keydown",Ko))}function Gc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function $n(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var fp={__proto__:null,TRANSFORM:$s,TRANSITION:Xi,TRANSITION_END:bl,get:kl,getStyle:Vr,create:He,remove:Ge,empty:ln,toFront:Hn,toBack:Wn,hasClass:Gs,addClass:le,removeClass:tt,setClass:Ji,getClass:Si,setOpacity:yn,testProp:$o,setTransform:er,setPosition:vt,getPosition:tr,get disableTextSelection(){return ci},get enableTextSelection(){return An},disableImageDrag:qo,enableImageDrag:Zo,preventOutline:Rl,restoreOutline:Ko,getSizedParentNode:Gc,getScale:$n};function Se(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Qo(s,v,l[v],d);else{l=R(l);for(var P=0,F=l.length;P<F;P++)Qo(s,l[P],d,p)}return this}var un="_leaflet_events";function Xe(s,l,d,p){if(arguments.length===1)Fr(s),delete s[un];else if(l&&typeof l=="object")for(var v in l)Zs(s,v,l[v],d);else if(l=R(l),arguments.length===2)Fr(s,function($){return B(l,$)!==-1});else for(var P=0,F=l.length;P<F;P++)Zs(s,l[P],d,p);return this}function Fr(s,l){for(var d in s[un]){var p=d.split(/\d/)[0];(!l||l(p))&&Zs(s,p,null,null,d)}}var nr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qo(s,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(s[un]&&s[un][v])return this;var P=function($){return d.call(p||s,$||window.event)},F=P;!ce.touchNative&&ce.pointer&&l.indexOf("touch")===0?P=Bc(s,l,P):ce.touch&&l==="dblclick"?P=Hc(s,P):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(nr[l]||l,P,ce.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function($){$=$||window.event,Ol(s,$)&&F($)},s.addEventListener(nr[l],P,!1)):s.addEventListener(l,F,!1):s.attachEvent("on"+l,P),s[un]=s[un]||{},s[un][v]=P}function Zs(s,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var P=s[un]&&s[un][v];if(!P)return this;!ce.touchNative&&ce.pointer&&l.indexOf("touch")===0?hp(s,l,P):ce.touch&&l==="dblclick"?Wc(s,P):"removeEventListener"in s?s.removeEventListener(nr[l]||l,P,!1):s.detachEvent("on"+l,P),s[un][v]=null}function Ke(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Nl(s){return Qo(s,"wheel",Ke),this}function Ks(s){return Se(s,"mousedown touchstart dblclick contextmenu",Ke),s._leaflet_disable_click=!0,this}function St(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Ii(s){return St(s),Ke(s),this}function Ll(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Qs(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=$n(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var Ai=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ml(s){return ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Ai:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ol(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Ys={__proto__:null,on:Se,off:Xe,stopPropagation:Ke,disableScrollPropagation:Nl,disableClickPropagation:Ks,preventDefault:St,stop:Ii,getPropagationPath:Ll,getMousePosition:Qs,getWheelDelta:Ml,isExternalTarget:Ol,addListener:Se,removeListener:Xe},Dl=Ie.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=tr(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),vt(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Oe=Ie.extend({options:{crs:te,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ge(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Xi&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,bl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ge(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),P=s instanceof Z?s:this.latLngToContainerPoint(s),F=P.subtract(v).multiplyBy(1-1/p),$=this.containerPointToLatLng(v.add(F));return this.setView($,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Le(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var P=p.subtract(d).divideBy(2),F=this.project(s.getSouthWest(),v),$=this.project(s.getNorthEast(),v),q=this.unproject(F.add($).divideBy(2).add(P),v);return{center:q,zoom:v}},fitBounds:function(s,l){if(s=Le(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Dl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){le(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!ce.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),P=this.getSize(),F=this._zoom;s=ge(s),l=l===void 0?F:l;var $=Math.max(P.x,P.y),q=$*this.getZoomScale(F,l),Q=v.distanceTo(p)||1,re=1.42,ve=re*re;function De(Ct){var lh=Ct?-1:1,WA=Ct?q:$,$A=q*q-$*$+lh*ve*ve*Q*Q,GA=2*WA*ve*Q,_p=$A/GA,Dv=Math.sqrt(_p*_p+1)-_p,qA=Dv<1e-9?-18:Math.log(Dv);return qA}function cn(Ct){return(Math.exp(Ct)-Math.exp(-Ct))/2}function jt(Ct){return(Math.exp(Ct)+Math.exp(-Ct))/2}function Zn(Ct){return cn(Ct)/jt(Ct)}var vn=De(0);function ua(Ct){return $*(jt(vn)/jt(vn+re*Ct))}function BA(Ct){return $*(jt(vn)*Zn(vn+re*Ct)-cn(vn))/ve}function zA(Ct){return 1-Math.pow(1-Ct,1.5)}var UA=Date.now(),Mv=(De(1)-vn)/re,HA=d.duration?1e3*d.duration:1e3*Mv*.8;function Ov(){var Ct=(Date.now()-UA)/HA,lh=zA(Ct)*Mv;Ct<=1?(this._flyToFrame=j(Ov,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(BA(lh)/Q)),F),this.getScaleZoom($/ua(lh),F),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Ov.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Le(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Le(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),P=this.project(s),F=this.getPixelBounds(),$=Pe([F.min.add(d),F.max.subtract(p)]),q=$.getSize();if(!$.contains(P)){this._enforcingBounds=!0;var Q=P.subtract($.getCenter()),re=$.extend(P).getSize().subtract(q);v.x+=Q.x<0?-re.x:re.x,v.y+=Q.y<0?-re.y:re.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),P=p.subtract(v);return!P.x&&!P.y?this:(s.animate&&s.pan?this.panBy(P):(s.pan&&this._rawPanBy(P),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new ke(l,d),v=p.toBounds(s.coords.accuracy*2),P=this._locateOptions;if(P.setView){var F=this.getBoundsZoom(v);this.setView(p,P.maxZoom?Math.min(F,P.maxZoom):F)}var $={latlng:p,bounds:v,timestamp:s.timestamp};for(var q in s.coords)typeof s.coords[q]=="number"&&($[q]=s.coords[q]);this.fire("locationfound",$)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ge(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ge(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=He("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Ze(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Le(s),d=J(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),P=this.getMaxZoom(),F=s.getNorthWest(),$=s.getSouthEast(),q=this.getSize().subtract(d),Q=Pe(this.project($,p),this.project(F,p)).getSize(),re=ce.any3d?this.options.zoomSnap:1,ve=q.x/Q.x,De=q.y/Q.y,cn=l?Math.max(ve,De):Math.min(ve,De);return p=this.getScaleZoom(cn,p),re&&(p=Math.round(p/(re/100))*(re/100),p=l?Math.ceil(p/re)*re:Math.floor(p/re)*re),Math.max(v,Math.min(P,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new ie(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ge(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ge(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ge(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Le(s))},distance:function(s,l){return this.options.crs.distance(ge(s),ge(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(s)))},mouseEventToContainerPoint:function(s){return Qs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=kl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Se(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,le(s,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Vr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),vt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(le(s.markerPane,"leaflet-zoom-hide"),le(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){vt(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){vt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Xe:Se;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",P=s.target||s.srcElement,F=!1;P;){if(p=this._targets[h(P)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){F=!0;break}if(p&&p.listens(l,!0)&&(v&&!Ol(P,s)||(d.push(p),v))||P===this._container)break;P=P.parentNode}return!d.length&&!F&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Rl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var P=[],F=0;F<d.length;F++)d[F].listens(l,!0)&&P.push(d[F]);v=P.concat(v)}if(v.length){l==="contextmenu"&&St(s);var $=v[0],q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=$.getLatLng&&(!$._radius||$._radius<=10);q.containerPoint=Q?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(s),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Q?$.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(F=0;F<v.length;F++)if(v[F].fire(l,q,!0),q.originalEvent._stopped||v[F].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return tr(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Pe([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),P=new ie(p.subtract(v),p.add(v)),F=this._getBoundsOffset(P,d,l);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?s:this.unproject(p.add(F),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new ie(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Pe(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),P=p.max.subtract(s.max),F=this._rebound(v.x,-P.x),$=this._rebound(v.y,-P.y);return new Z(F,$)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ce.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=He("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=$s,p=this._proxy.style[d];er(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ge(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();er(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(j(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Yo(s,l){return new Oe(s,l)}var _n=Te.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return le(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ge(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),bi=function(s){return new _n(s)};Oe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=He("div",l+"control-container",this._container);function p(v,P){var F=l+v+" "+l+P;s[v+P]=He("div",F,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ge(this._controlCorners[s]);Ge(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var qc=_n.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){k(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return _n.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=He("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ks(l),Nl(l);var p=this._section=He("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Se(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=He("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Se(v,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){St(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=He("div",s+"-base",p),this._separator=He("div",s+"-separator",p),this._overlaysList=He("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ln(this._baseLayersList),ln(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),Se(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(p),P.appendChild(v);var F=s.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var P=s.length-1;P>=0;P--)l=s[P],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(P=0;P<v.length;P++)this._map.hasLayer(v[P])&&this._map.removeLayer(v[P]);for(P=0;P<p.length;P++)this._map.hasLayer(p[P])||this._map.addLayer(p[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Se(s,"click",St),this.expand();var l=this;setTimeout(function(){Xe(s,"click",St),l._preventClick=!1})}}),Zc=function(s,l,d){return new qc(s,l,d)},ir=_n.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=He("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var P=He("a",d,p);return P.innerHTML=s,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),Ks(P),Se(P,"click",Ii),Se(P,"click",v,this),Se(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";tt(this._zoomInButton,l),tt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(le(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(le(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oe.mergeOptions({zoomControl:!0}),Oe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ir,this.addControl(this.zoomControl))});var Kc=function(s){return new ir(s)},Vl=_n.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=He("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=He("div",l,d)),s.imperial&&(this._iScale=He("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),jl=function(s){return new Vl(s)},Fl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Xo=_n.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?Fl+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=He("div","leaflet-control-attribution"),Ks(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Oe.mergeOptions({attributionControl:!0}),Oe.addInitHook(function(){this.options.attributionControl&&new Xo().addTo(this)});var Jo=function(s){return new Xo(s)};_n.Layers=qc,_n.Zoom=ir,_n.Scale=Vl,_n.Attribution=Xo,bi.layers=Zc,bi.zoom=Kc,bi.scale=jl,bi.attribution=Jo;var bn=Te.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bn.addTo=function(s,l){return s.addHandler(l,this),this};var Qc={Events:fe},ki=ce.touch?"touchstart mousedown":"mousedown",hi=Ie.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){k(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Se(this._dragStartTarget,ki,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(hi._dragging===this&&this.finishDrag(!0),Xe(this._dragStartTarget,ki,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Gs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){hi._dragging===this&&this.finishDrag();return}if(!(hi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(hi._dragging=this,this._preventOutline&&Rl(this._element),qo(),ci(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Gc(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=tr(this._element),this._parentScale=$n(d);var p=s.type==="mousedown";Se(document,p?"mousemove":"touchmove",this._onMove,this),Se(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,St(s),this._moved||(this.fire("dragstart"),this._moved=!0,le(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),vt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xe(document,"mousemove touchmove",this._onMove,this),Xe(document,"mouseup touchend touchcancel",this._onUp,this),Zo(),An();var l=this._moved&&this._moving;this._moving=!1,hi._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Bl(s,l,d){var p,v=[1,4,2,8],P,F,$,q,Q,re,ve,De;for(P=0,re=s.length;P<re;P++)s[P]._code=G(s[P],l);for($=0;$<4;$++){for(ve=v[$],p=[],P=0,re=s.length,F=re-1;P<re;F=P++)q=s[P],Q=s[F],q._code&ve?Q._code&ve||(De=H(Q,q,ve,l,d),De._code=G(De,l),p.push(De)):(Q._code&ve&&(De=H(Q,q,ve,l,d),De._code=G(De,l),p.push(De)),p.push(q));s=p}return s}function zl(s,l){var d,p,v,P,F,$,q,Q,re;if(!s||s.length===0)throw new Error("latlngs not passed");qe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ve=ge([0,0]),De=Le(s),cn=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());cn<1700&&(ve=ea(s));var jt=s.length,Zn=[];for(d=0;d<jt;d++){var vn=ge(s[d]);Zn.push(l.project(ge([vn.lat-ve.lat,vn.lng-ve.lng])))}for($=q=Q=0,d=0,p=jt-1;d<jt;p=d++)v=Zn[d],P=Zn[p],F=v.y*P.x-P.y*v.x,q+=(v.x+P.x)*F,Q+=(v.y+P.y)*F,$+=F*3;$===0?re=Zn[0]:re=[q/$,Q/$];var ua=l.unproject(J(re));return ge([ua.lat+ve.lat,ua.lng+ve.lng])}function ea(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var P=ge(s[v]);l+=P.lat,d+=P.lng,p++}return ge([l/p,d/p])}var ta={__proto__:null,clipPolygon:Bl,polygonCenter:zl,centroid:ea};function Qt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Br(s,d),s}function Ul(s,l,d){return Math.sqrt(Ce(s,l,d,!0))}function Yc(s,l,d){return Ce(s,l,d)}function Br(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,c(s,v,l,0,d-1);var P,F=[];for(P=0;P<d;P++)v[P]&&F.push(s[P]);return F}function c(s,l,d,p,v){var P=0,F,$,q;for($=p+1;$<=v-1;$++)q=Ce(s[$],s[p],s[v],!0),q>P&&(F=$,P=q);P>d&&(l[F]=1,c(s,l,d,p,F),c(s,l,d,F,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,P=s.length;p<P;p++)ne(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<P-1&&d.push(s[P-1]),d}var x;function b(s,l,d,p,v){var P=p?x:G(s,d),F=G(l,d),$,q,Q;for(x=F;;){if(!(P|F))return[s,l];if(P&F)return!1;$=P||F,q=H(s,l,$,d,v),Q=G(q,d),$===P?(s=q,P=Q):(l=q,F=Q)}}function H(s,l,d,p,v){var P=l.x-s.x,F=l.y-s.y,$=p.min,q=p.max,Q,re;return d&8?(Q=s.x+P*(q.y-s.y)/F,re=q.y):d&4?(Q=s.x+P*($.y-s.y)/F,re=$.y):d&2?(Q=q.x,re=s.y+F*(q.x-s.x)/P):d&1&&(Q=$.x,re=s.y+F*($.x-s.x)/P),new Z(Q,re,v)}function G(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ne(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Ce(s,l,d,p){var v=l.x,P=l.y,F=d.x-v,$=d.y-P,q=F*F+$*$,Q;return q>0&&(Q=((s.x-v)*F+(s.y-P)*$)/q,Q>1?(v=d.x,P=d.y):Q>0&&(v+=F*Q,P+=$*Q)),F=s.x-v,$=s.y-P,p?F*F+$*$:new Z(v,P)}function qe(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Qe(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),qe(s)}function xt(s,l){var d,p,v,P,F,$,q,Q;if(!s||s.length===0)throw new Error("latlngs not passed");qe(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var re=ge([0,0]),ve=Le(s),De=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());De<1700&&(re=ea(s));var cn=s.length,jt=[];for(d=0;d<cn;d++){var Zn=ge(s[d]);jt.push(l.project(ge([Zn.lat-re.lat,Zn.lng-re.lng])))}for(d=0,p=0;d<cn-1;d++)p+=jt[d].distanceTo(jt[d+1])/2;if(p===0)Q=jt[0];else for(d=0,P=0;d<cn-1;d++)if(F=jt[d],$=jt[d+1],v=F.distanceTo($),P+=v,P>p){q=(P-p)/v,Q=[$.x-q*($.x-F.x),$.y-q*($.y-F.y)];break}var vn=l.unproject(J(Q));return ge([vn.lat+re.lat,vn.lng+re.lng])}var Gn={__proto__:null,simplify:Qt,pointToSegmentDistance:Ul,closestPointOnSegment:Yc,clipSegment:b,_getEdgeIntersection:H,_getBitCode:G,_sqClosestPointOnSegment:Ce,isFlat:qe,_flat:Qe,polylineCenter:xt},di={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new ke(s.y,s.x)},bounds:new ie([-180,-90],[180,90])},qn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,P=Math.sqrt(1-v*v),F=P*Math.sin(p),$=Math.tan(Math.PI/4-p/2)/Math.pow((1-F)/(1+F),P/2);return p=-d*Math.log(Math.max($,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),P=Math.exp(-s.y/d),F=Math.PI/2-2*Math.atan(P),$=0,q=.1,Q;$<15&&Math.abs(q)>1e-7;$++)Q=v*Math.sin(F),Q=Math.pow((1-Q)/(1+Q),v/2),q=Math.PI/2-2*Math.atan(P*Q)-F,F+=q;return new ke(F*l,s.x*l/d)}},Ri={__proto__:null,LonLat:di,Mercator:qn,SphericalMercator:Bn},na=r({},Kt,{code:"EPSG:3395",projection:qn,transformation:function(){var s=.5/(Math.PI*qn.R);return ai(s,.5,-s,.5)}()}),ia=r({},Kt,{code:"EPSG:4326",projection:di,transformation:ai(1/180,1,-1/180,.5)}),_A=r({},ht,{projection:di,transformation:ai(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});ht.Earth=Kt,ht.EPSG3395=na,ht.EPSG3857=te,ht.EPSG900913=he,ht.EPSG4326=ia,ht.Simple=_A;var fi=Ie.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Oe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ra=fi.extend({initialize:function(s,l){k(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),vA=function(s,l){return new ra(s,l)},rr=ra.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),ra.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),ra.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ze;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),wA=function(s,l){return new rr(s,l)},sa=Te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=J(p),P=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),P&&(s.style.marginLeft=-P.x+"px",s.style.marginTop=-P.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function xA(s){return new sa(s)}var Hl=sa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Hl.imagePath!="string"&&(Hl.imagePath=this._detectIconPath()),(this.options.imagePath||Hl.imagePath)+sa.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var P=p.exec(d);return P&&P[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=He("div","leaflet-default-icon-path",document.body),l=Vr(s,"background-image")||Vr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),mv=bn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new hi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),le(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,P=tr(l._icon),F=d.getPixelBounds(),$=d.getPixelOrigin(),q=Pe(F.min._subtract($).add(v),F.max._subtract($).subtract(v));if(!q.contains(P)){var Q=J((Math.max(q.max.x,P.x)-q.max.x)/(F.max.x-q.max.x)-(Math.min(q.min.x,P.x)-q.min.x)/(F.min.x-q.min.x),(Math.max(q.max.y,P.y)-q.max.y)/(F.max.y-q.max.y)-(Math.min(q.min.y,P.y)-q.min.y)/(F.min.y-q.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),vt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=j(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=tr(l._icon),v=l._map.layerPointToLatLng(p);d&&vt(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Xc=fi.extend({options:{icon:new Hl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=ge(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ge(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),le(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Se(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),P=!1;v!==this._shadow&&(this._removeShadow(),P=!0),v&&(le(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&P&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(this._icon,"focus",this._panOnFocus,this),Ge(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ge(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&vt(this._icon,s),this._shadow&&vt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),mv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new mv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&yn(this._icon,s),this._shadow&&yn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function TA(s,l){return new Xc(s,l)}var zr=fi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Jc=zr.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=ge(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ge(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return zr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new ie(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function EA(s,l){return new Jc(s,l)}var pp=Jc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),k(this,l),this._latlng=ge(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ze(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:zr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Kt.distance){var v=Math.PI/180,P=this._mRadius/Kt.R/v,F=d.project([l+P,s]),$=d.project([l-P,s]),q=F.add($).divideBy(2),Q=d.unproject(q).lat,re=Math.acos((Math.cos(P*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(re)||re===0)&&(re=P/Math.cos(Math.PI/180*l)),this._point=q.subtract(d.getPixelOrigin()),this._radius=isNaN(re)?0:q.x-d.project([Q,s-re]).x,this._radiusY=q.y-F.y}else{var ve=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ve).x}this._updateBounds()}});function PA(s,l,d){return new pp(s,l,d)}var sr=zr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Ce,v,P,F=0,$=this._parts.length;F<$;F++)for(var q=this._parts[F],Q=1,re=q.length;Q<re;Q++){v=q[Q-1],P=q[Q];var ve=p(s,v,P,!0);ve<l&&(l=ve,d=p(s,v,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ge(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ze,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return qe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=qe(s),p=0,v=s.length;p<v;p++)d?(l[p]=ge(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof ke,v=s.length,P,F;if(p){for(F=[],P=0;P<v;P++)F[P]=this._map.latLngToLayerPoint(s[P]),d.extend(F[P]);l.push(F)}else for(P=0;P<v;P++)this._projectLatlngs(s[P],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,P,F,$,q;for(d=0,v=0,P=this._rings.length;d<P;d++)for(q=this._rings[d],p=0,F=q.length;p<F-1;p++)$=b(q[p],q[p+1],s,p,!0),$&&(l[v]=l[v]||[],l[v].push($[0]),($[1]!==q[p+1]||p===F-2)&&(l[v].push($[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Qt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,P,F,$,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,P=this._parts.length;d<P;d++)for($=this._parts[d],p=0,F=$.length,v=F-1;p<F;v=p++)if(!(!l&&p===0)&&Ul(s,$[v],$[p])<=q)return!0;return!1}});function SA(s,l){return new sr(s,l)}sr._flat=Qe;var oa=sr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=sr.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof ke&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){sr.prototype._setLatLngs.call(this,s),qe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return qe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new ie(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,P;p<v;p++)P=Bl(this._rings[p],s,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,P,F,$,q,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(P=0,q=this._parts.length;P<q;P++)for(d=this._parts[P],F=0,Q=d.length,$=Q-1;F<Q;$=F++)p=d[F],v=d[$],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||sr.prototype._containsPoint.call(this,s,!0)}});function CA(s,l){return new oa(s,l)}var or=rr.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var P=this.options;if(P.filter&&!P.filter(s))return this;var F=eh(s,P);return F?(F.feature=ih(s),F.defaultOptions=F.options,this.resetStyle(F),P.onEachFeature&&P.onEachFeature(s,F),this.addLayer(F)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function eh(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],P=l&&l.pointToLayer,F=l&&l.coordsToLatLng||mp,$,q,Q,re;if(!p&&!d)return null;switch(d.type){case"Point":return $=F(p),gv(P,s,$,l);case"MultiPoint":for(Q=0,re=p.length;Q<re;Q++)$=F(p[Q]),v.push(gv(P,s,$,l));return new rr(v);case"LineString":case"MultiLineString":return q=th(p,d.type==="LineString"?0:1,F),new sr(q,l);case"Polygon":case"MultiPolygon":return q=th(p,d.type==="Polygon"?1:2,F),new oa(q,l);case"GeometryCollection":for(Q=0,re=d.geometries.length;Q<re;Q++){var ve=eh({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);ve&&v.push(ve)}return new rr(v);case"FeatureCollection":for(Q=0,re=d.features.length;Q<re;Q++){var De=eh(d.features[Q],l);De&&v.push(De)}return new rr(v);default:throw new Error("Invalid GeoJSON object.")}}function gv(s,l,d,p){return s?s(l,d):new Xc(d,p&&p.markersInheritOptions&&p)}function mp(s){return new ke(s[1],s[0],s[2])}function th(s,l,d){for(var p=[],v=0,P=s.length,F;v<P;v++)F=l?th(s[v],l-1,d):(d||mp)(s[v]),p.push(F);return p}function gp(s,l){return s=ge(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function nh(s,l,d,p){for(var v=[],P=0,F=s.length;P<F;P++)v.push(l?nh(s[P],qe(s[P])?0:l-1,d,p):gp(s[P],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function aa(s,l){return s.feature?r({},s.feature,{geometry:l}):ih(l)}function ih(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var yp={toGeoJSON:function(s){return aa(this,{type:"Point",coordinates:gp(this.getLatLng(),s)})}};Xc.include(yp),pp.include(yp),Jc.include(yp),sr.include({toGeoJSON:function(s){var l=!qe(this._latlngs),d=nh(this._latlngs,l?1:0,!1,s);return aa(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),oa.include({toGeoJSON:function(s){var l=!qe(this._latlngs),d=l&&!qe(this._latlngs[0]),p=nh(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),aa(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),ra.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),aa(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var P=v.toGeoJSON(s);if(d)p.push(P.geometry);else{var F=ih(P);F.type==="FeatureCollection"?p.push.apply(p,F.features):p.push(F)}}}),d?aa(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function yv(s,l){return new or(s,l)}var IA=yv,rh=fi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Le(l),k(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ge(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Hn(this._image),this},bringToBack:function(){return this._map&&Wn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Le(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:He("img");if(le(l,"leaflet-image-layer"),this._zoomAnimated&&le(l,"leaflet-zoom-animated"),this.options.className&&le(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;er(this._image,d,l)},_reset:function(){var s=this._image,l=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();vt(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){yn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),AA=function(s,l,d){return new rh(s,l,d)},_v=rh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:He("video");if(le(l,"leaflet-image-layer"),this._zoomAnimated&&le(l,"leaflet-zoom-animated"),this.options.className&&le(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var F=He("source");F.src=this._url[P],l.appendChild(F)}}});function bA(s,l,d){return new _v(s,l,d)}var vv=rh.extend({_initImage:function(){var s=this._image=this._url;le(s,"leaflet-image-layer"),this._zoomAnimated&&le(s,"leaflet-zoom-animated"),this.options.className&&le(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function kA(s,l,d){return new vv(s,l,d)}var Ni=fi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof ke||S(s))?(this._latlng=ge(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&yn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&yn(this._container,1),this.bringToFront(),this.options.interactive&&(le(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(yn(this._container,0),this._removeTimeout=setTimeout(a(Ge,void 0,this._container),200)):Ge(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ge(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Hn(this._container),this},bringToBack:function(){return this._map&&Wn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof rr){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?vt(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Oe.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),fi.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(k(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var sh=Ni.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ni.prototype.openOn.call(this,s)},onAdd:function(s){Ni.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zr||this._source.on("preclick",Ke))},onRemove:function(s){Ni.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zr||this._source.off("preclick",Ke))},getEvents:function(){var s=Ni.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=He("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=He("div",s+"-content-wrapper",l);if(this._contentNode=He("div",s+"-content",d),Ks(l),Nl(this._contentNode),Se(l,"contextmenu",Ke),this._tipContainer=He("div",s+"-tip-container",l),this._tip=He("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=He("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Se(p,"click",function(v){St(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,P="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",le(s,P)):tt(s,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();vt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Vr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new Z(this._containerLeft,-d-this._containerBottom);v._add(tr(this._container));var P=s.layerPointToContainerPoint(v),F=J(this.options.autoPanPadding),$=J(this.options.autoPanPaddingTopLeft||F),q=J(this.options.autoPanPaddingBottomRight||F),Q=s.getSize(),re=0,ve=0;P.x+p+q.x>Q.x&&(re=P.x+p-Q.x+q.x),P.x-re-$.x<0&&(re=P.x-$.x),P.y+d+q.y>Q.y&&(ve=P.y+d-Q.y+q.y),P.y-ve-$.y<0&&(ve=P.y-$.y),(re||ve)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([re,ve]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),RA=function(s,l){return new sh(s,l)};Oe.mergeOptions({closePopupOnClick:!0}),Oe.include({openPopup:function(s,l,d){return this._initOverlay(sh,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),fi.include({bindPopup:function(s,l){return this._popup=this._initOverlay(sh,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof rr||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Ii(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof zr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var oh=Ni.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ni.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ni.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ni.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=He("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,P=p.latLngToContainerPoint(p.getCenter()),F=p.layerPointToContainerPoint(s),$=this.options.direction,q=v.offsetWidth,Q=v.offsetHeight,re=J(this.options.offset),ve=this._getAnchor();$==="top"?(l=q/2,d=Q):$==="bottom"?(l=q/2,d=0):$==="center"?(l=q/2,d=Q/2):$==="right"?(l=0,d=Q/2):$==="left"?(l=q,d=Q/2):F.x<P.x?($="right",l=0,d=Q/2):($="left",l=q+(re.x+ve.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(re).add(ve),tt(v,"leaflet-tooltip-right"),tt(v,"leaflet-tooltip-left"),tt(v,"leaflet-tooltip-top"),tt(v,"leaflet-tooltip-bottom"),le(v,"leaflet-tooltip-"+$),vt(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&yn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),NA=function(s,l){return new oh(s,l)};Oe.include({openTooltip:function(s,l,d){return this._initOverlay(oh,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),fi.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(oh,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof rr||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Se(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Se(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var wv=sa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(ln(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function LA(s){return new wv(s)}sa.Default=Hl;var Wl=fi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ge(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Hn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Wn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,P;p<v;p++)P=l[p].style.zIndex,l[p]!==this._container&&P&&(d=s(d,+P));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){yn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var P=Math.min(1,(s-v.loaded)/200);yn(v.el,P),P<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=He("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(Ge(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=He("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ge(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),P=Math.floor(l/2),F=d-1,$=new Z(+v,+P);$.z=+F;var q=this._tileCoordsToKey($),Q=this._tiles[q];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),F>p?this._retainParent(v,P,F,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var P=2*l;P<2*l+2;P++){var F=new Z(v,P);F.z=d+1;var $=this._tileCoordsToKey(F),q=this._tiles[$];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);d+1<p&&this._retainChildren(v,P,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var P=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||P)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ce.any3d?er(s.el,v,p):vt(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),P=l.getSize().divideBy(p*2);return new ie(v.subtract(P),v.add(P))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),P=v.getCenter(),F=[],$=this.options.keepBuffer,q=new ie(v.getBottomLeft().subtract([$,-$]),v.getTopRight().add([$,-$]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var re=this._tiles[Q].coords;(re.z!==this._tileZoom||!q.contains(new Z(re.x,re.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var ve=v.min.y;ve<=v.max.y;ve++)for(var De=v.min.x;De<=v.max.x;De++){var cn=new Z(De,ve);if(cn.z=this._tileZoom,!!this._isValidTile(cn)){var jt=this._tiles[this._tileCoordsToKey(cn)];jt?jt.current=!0:F.push(cn)}}if(F.sort(function(vn,ua){return vn.distanceTo(P)-ua.distanceTo(P)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Zn=document.createDocumentFragment();for(De=0;De<F.length;De++)this._addTile(F[De],Zn);this._level.el.appendChild(Zn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Le(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),P=l.unproject(p,s.z),F=l.unproject(v,s.z);return[P,F]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Ze(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(Ge(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){le(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,ce.ielt9&&this.options.opacity<1&&yn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&j(a(this._tileReady,this,s,null,v)),vt(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(yn(d.el,0),U(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(le(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ie(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function MA(s){return new Wl(s)}var la=Wl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&ce.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Se(d,"load",a(this._tileOnLoad,this,l,d)),Se(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return T(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ce.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=W;var d=this._tiles[s].coords;Ge(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",W),Wl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===W))return Wl.prototype._tileReady.call(this,s,l,d)}});function xv(s,l){return new la(s,l)}var Tv=la.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=k(this,l);var v=l.detectRetina&&ce.retina?2:1,P=this.getTileSize();d.width=P.x*v,d.height=P.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,la.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Pe(d.project(l[0]),d.project(l[1])),v=p.min,P=p.max,F=(this._wmsVersion>=1.3&&this._crs===ia?[v.y,v.x,P.y,P.x]:[v.x,v.y,P.x,P.y]).join(","),$=la.prototype.getTileUrl.call(this,s);return $+V(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function OA(s,l){return new Tv(s,l)}la.WMS=Tv,xv.wms=OA;var ar=fi.extend({options:{padding:.1},initialize:function(s){k(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),P=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));ce.any3d?er(this._container,P,d):vt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ie(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ev=ar.extend({options:{tolerance:0},getEvents:function(){var s=ar.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ar.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Se(s,"mousemove",this._onMouseMove,this),Se(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Ge(this._container),Xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ar.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=ce.retina?2:1;vt(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ar.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,P,F=s._parts,$=F.length,q=this._ctx;if($){for(q.beginPath(),d=0;d<$;d++){for(p=0,v=F[d].length;p<v;p++)P=F[d][p],q[p?"lineTo":"moveTo"](P.x,P.y);l&&q.closePath()}this._fillStroke(q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(tt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(le(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Pv(s){return ce.canvas?new Ev(s):null}var $l=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),DA={_initContainer:function(){this._container=He("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ar.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=$l("shape");le(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=$l("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Ge(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=$l("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=S(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=$l("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Hn(s._container)},_bringToBack:function(s){Wn(s._container)}},ah=ce.vml?$l:pe,Gl=ar.extend({_initContainer:function(){this._container=ah("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ah("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ge(this._container),Xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ar.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),vt(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=ah("path");s.options.className&&le(l,s.options.className),s.options.interactive&&le(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ge(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Re(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",P=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,P)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Hn(s._path)},_bringToBack:function(s){Wn(s._path)}});ce.vml&&Gl.include(DA);function Sv(s){return ce.svg||ce.vml?new Gl(s):null}Oe.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Pv(s)||Sv(s)}});var Cv=oa.extend({initialize:function(s,l){oa.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Le(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function VA(s,l){return new Cv(s,l)}Gl.create=ah,Gl.pointsToPath=Re,or.geometryToLayer=eh,or.coordsToLatLng=mp,or.coordsToLatLngs=th,or.latLngToCoords=gp,or.latLngsToCoords=nh,or.getFeature=aa,or.asFeature=ih,Oe.mergeOptions({boxZoom:!0});var Iv=bn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ge(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ci(),qo(),this._startPoint=this._map.mouseEventToContainerPoint(s),Se(document,{contextmenu:Ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=He("div","leaflet-zoom-box",this._container),le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ie(this._point,this._startPoint),d=l.getSize();vt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Ge(this._box),tt(this._container,"leaflet-crosshair")),An(),Zo(),Xe(document,{contextmenu:Ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Ze(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oe.addInitHook("addHandler","boxZoom",Iv),Oe.mergeOptions({doubleClickZoom:!0});var Av=bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Oe.addInitHook("addHandler","doubleClickZoom",Av),Oe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var bv=bn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new hi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Le(this._map.options.maxBounds);this._offsetLimit=Pe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,P=(p+l+d)%s-l-d,F=Math.abs(v+d)<Math.abs(P+d)?v:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,F=d.easeLinearity,$=v.multiplyBy(F/P),q=$.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,q),re=$.multiplyBy(Q/q),ve=Q/(d.inertiaDeceleration*F),De=re.multiplyBy(-ve/2).round();!De.x&&!De.y?l.fire("moveend"):(De=l._limitOffset(De,l.options.maxBounds),j(function(){l.panBy(De,{duration:ve,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Oe.addInitHook("addHandler","dragging",bv),Oe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var kv=bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Se(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Ii(s)}}});Oe.addInitHook("addHandler","keyboard",kv),Oe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Rv=bn.extend({addHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Ml(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),Ii(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,P=d?Math.ceil(v/d)*d:v,F=s._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,F&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+F):s.setZoomAround(this._lastMousePos,l+F))}});Oe.addInitHook("addHandler","scrollWheelZoom",Rv);var jA=600;Oe.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var Nv=bn.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Se(document,"touchend",St),Se(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),jA),Se(document,"touchend touchcancel contextmenu",this._cancel,this),Se(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Xe(document,"touchend",St),Xe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Oe.addInitHook("addHandler","tapHold",Nv),Oe.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var Lv=bn.extend({addHooks:function(){le(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend touchcancel",this._onTouchEnd,this),St(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var P=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var F=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(F,this,!0),St(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Oe.addInitHook("addHandler","touchZoom",Lv),Oe.BoxZoom=Iv,Oe.DoubleClickZoom=Av,Oe.Drag=bv,Oe.Keyboard=kv,Oe.ScrollWheelZoom=Rv,Oe.TapHold=Nv,Oe.TouchZoom=Lv,n.Bounds=ie,n.Browser=ce,n.CRS=ht,n.Canvas=Ev,n.Circle=pp,n.CircleMarker=Jc,n.Class=Te,n.Control=_n,n.DivIcon=wv,n.DivOverlay=Ni,n.DomEvent=Ys,n.DomUtil=fp,n.Draggable=hi,n.Evented=Ie,n.FeatureGroup=rr,n.GeoJSON=or,n.GridLayer=Wl,n.Handler=bn,n.Icon=sa,n.ImageOverlay=rh,n.LatLng=ke,n.LatLngBounds=Ze,n.Layer=fi,n.LayerGroup=ra,n.LineUtil=Gn,n.Map=Oe,n.Marker=Xc,n.Mixin=Qc,n.Path=zr,n.Point=Z,n.PolyUtil=ta,n.Polygon=oa,n.Polyline=sr,n.Popup=sh,n.PosAnimation=Dl,n.Projection=Ri,n.Rectangle=Cv,n.Renderer=ar,n.SVG=Gl,n.SVGOverlay=vv,n.TileLayer=la,n.Tooltip=oh,n.Transformation=an,n.Util=O,n.VideoOverlay=_v,n.bind=a,n.bounds=Pe,n.canvas=Pv,n.circle=PA,n.circleMarker=EA,n.control=bi,n.divIcon=LA,n.extend=r,n.featureGroup=wA,n.geoJSON=yv,n.geoJson=IA,n.gridLayer=MA,n.icon=xA,n.imageOverlay=AA,n.latLng=ge,n.latLngBounds=Le,n.layerGroup=vA,n.map=Yo,n.marker=TA,n.point=J,n.polygon=CA,n.polyline=SA,n.popup=RA,n.rectangle=VA,n.setOptions=k,n.stamp=h,n.svg=Sv,n.svgOverlay=kA,n.tileLayer=xv,n.tooltip=NA,n.transformation=ai,n.version=i,n.videoOverlay=bA;var FA=window.L;n.noConflict=function(){return window.L=FA,this},window.L=n})})(iy,iy.exports);var jo=iy.exports;const dv=z1(jo);function kc(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function fv(t,e){return e==null?function(i,r){const o=M.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=M.useRef();o.current||(o.current=t(i,r));const a=M.useRef(i),{instance:u}=o.current;return M.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function mA(t,e){M.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function gA(t){return function(n){const i=cv(),r=t(hv(n,i),i);return X6(i.map,n.attribution),pA(r.current,n.eventHandlers),mA(r.current,i),r}}function iF(t,e){const n=M.useRef();M.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function rF(t){return function(n){const i=cv(),r=t(hv(n,i),i);return pA(r.current,n.eventHandlers),mA(r.current,i),iF(r.current,n),r}}function sF(t,e){const n=fv(t,e),i=gA(n);return fA(i)}function pv(t,e){const n=fv(t,e),i=rF(n);return fA(i)}function oF(t,e){const n=fv(t,e),i=gA(n);return nF(i)}function aF(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Rc(){return cv().map}function lF(t){const e=Rc();return M.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const uF=pv(function({center:e,children:n,...i},r){const o=new jo.CircleMarker(e,i);return kc(o,ap(r,{overlayContainer:o}))},J6);function ry(){return ry=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ry.apply(this,arguments)}function cF({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[_]=M.useState({className:r,id:o,style:u}),[E,R]=M.useState(null);M.useImperativeHandle(g,()=>(E==null?void 0:E.map)??null,[E]);const k=M.useCallback(A=>{if(A!==null&&E===null){const T=new jo.Map(A,m);n!=null&&f!=null?T.setView(n,f):t!=null&&T.fitBounds(t,e),h!=null&&T.whenReady(h),R(tF(T))}},[]);M.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const V=E?_o.createElement(dA,{value:E},i):a??null;return _o.createElement("div",ry({},_,{ref:k}),V)}const hF=M.forwardRef(cF),dF=sF(function({position:e,...n},i){const r=new jo.Marker(e,n);return kc(r,ap(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),fF=pv(function({positions:e,...n},i){const r=new jo.Polygon(e,n);return kc(r,ap(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),M1=pv(function({positions:e,...n},i){const r=new jo.Polyline(e,n);return kc(r,ap(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),pF=oF(function({url:e,...n},i){const r=new jo.TileLayer(e,hv(n,i));return kc(r,i)},function(e,n,i){aF(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Fn=(t,e)=>{const n=M.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>M.createElement("svg",{ref:m,...mF,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${gF(t)}`,u].join(" "),...f},[...e.map(([g,_])=>M.createElement(g,_)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=Fn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=Fn("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=Fn("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=Fn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=Fn("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=Fn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=Fn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=Fn("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=Fn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=Fn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=Fn("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=Fn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=Fn("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),hd={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};delete dv.Icon.Default.prototype._getIconUrl;dv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const IF="/street-art-ctf/chumper.png",V1=t=>{if(!t)return 0;const e=Date.now(),n=t instanceof Date?t.getTime():new Date(t).getTime(),i=(e-n)/(1e3*60*60);return Math.min(i/24,1)},AF=(t,e=!1,n=!1,i=0,r=!1,o=!1)=>{let a="";const u=1-i*.5,h=1-i*.3;return e?a="grayscale(100%) opacity(0.1)":t?t==="red"?a=`hue-rotate(160deg) saturate(${1.5*u}) opacity(${h})`:a=`saturate(${u}) opacity(${h})`:a=`grayscale(100%) opacity(${r||o&&!n?.3:1})`,dv.divIcon({html:`<div style="position:relative;"><img src="${IF}" style="width: 32px; height: 32px; filter: ${a};" /></div>`,className:"chumper-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})};function bF({devMode:t}){const[e,n]=M.useState(oA),[i,r]=M.useState(sA);return lF({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?w.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-purple-500 shadow-lg px-3 py-2 font-nohemi",children:w.jsxs("div",{className:"text-[10px] font-mono text-white",children:[w.jsxs("div",{children:["Z ",e]}),w.jsx("div",{children:i[0]}),w.jsx("div",{children:i[1]})]})}):null}function kF({hood:t}){const e=Rc();return M.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function RF({location:t,zoom:e=17}){const n=Rc();return M.useEffect(()=>{if(t&&Array.isArray(t)&&t.length===2){const i=setTimeout(()=>{n.flyTo(t,e,{duration:1})},100);return()=>clearTimeout(i)}},[t,e,n]),null}function NF(){const t=Rc();return M.useEffect(()=>{const e=localStorage.getItem("streetart-ctf-lastCapture");if(e)try{const n=JSON.parse(e);localStorage.removeItem("streetart-ctf-lastCapture"),n.location&&Array.isArray(n.location)&&n.location.length===2&&setTimeout(()=>{t.flyTo(n.location,17,{duration:1.5})},500)}catch{localStorage.removeItem("streetart-ctf-lastCapture")}},[t]),null}function LF(){const t=Rc(),[e,n]=M.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return w.jsx(ee.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 bg-[#FAFAFA] shadow-lg flex items-center justify-center",whileTap:{scale:.95},children:w.jsx(ee.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:w.jsx(vF,{size:20,className:"text-black"})})})}function MF({point:t,onClose:e,isDiscovered:n,isSoloView:i}){var u;const r=t.capturedBy?((u=hd[t.capturedBy])==null?void 0:u.color)||"#888":null,o=Wa(t),a=t.status==="ghost";return w.jsx(ee.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000] font-nohemi",children:w.jsxs("div",{className:"bg-[#FAFAFA] p-5 shadow-2xl",children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-black/30 hover:text-black transition-colors",children:w.jsx(SF,{size:20})}),w.jsxs("div",{className:"pr-8",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a&&w.jsx("span",{className:"text-[10px] tracking-widest text-black/30",children:"ARCHIVED"}),i?n?w.jsx("span",{className:"text-[10px] tracking-widest text-purple-600",children:"DISCOVERED"}):w.jsx("span",{className:"text-[10px] tracking-widest text-black/30",children:"UNDISCOVERED"}):t.capturedBy?w.jsxs("span",{className:"text-[10px] tracking-widest",style:{color:r},children:["TEAM ",t.capturedBy.toUpperCase()]}):w.jsx("span",{className:"text-[10px] tracking-widest text-black/30",children:"UNCLAIMED"})]}),w.jsx("h3",{className:"text-2xl font-bold text-black tracking-tight mb-1",children:t.name}),w.jsx("p",{className:"text-black/40 mb-4",children:t.area}),w.jsxs("div",{className:"flex items-center gap-6",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-3xl font-black text-black",children:o}),w.jsx("div",{className:"text-xs text-black/40",children:"points"})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-lg font-bold text-black capitalize",children:t.size}),w.jsx("div",{className:"text-xs text-black/40",children:"size"})]}),t.mhd&&w.jsxs("div",{children:[w.jsx("div",{className:"text-lg font-bold",style:{color:t.mhd==="metroB"?"#eab308":"#E53935"},children:t.mhd==="metroB"?"Metro B":"Tram 12"}),w.jsx("div",{className:"text-xs text-black/40",children:"nearby"})]})]}),!i&&t.capturedByPlayer&&w.jsxs("div",{className:"mt-4 pt-4 border-t border-black/10",children:[w.jsx("span",{className:"text-xs text-black/40",children:"Captured by "}),w.jsx("span",{className:"text-sm font-bold text-black",children:t.capturedByPlayer})]})]})]})})}const wm=[null,...yo],OF=(t,e)=>{if(e==="off")return[];const n=t.filter(r=>r.capturedBy&&r.status!=="ghost"),i=[];return n.forEach(r=>{const[o,a]=r.location,u=.002,h=r.capturedBy;if(e==="circles"){const m=[];for(let g=0;g<32;g++){const _=g/32*2*Math.PI;m.push([o+u*Math.cos(_),a+u*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id,capturedAt:r.capturedAt})}else if(e==="squares"){const f=u*.8;i.push({team:h,coords:[[o-f,a-f*1.5],[o-f,a+f*1.5],[o+f,a+f*1.5],[o+f,a-f*1.5]],pointId:r.id,capturedAt:r.capturedAt})}else if(e==="hexagons"){const f=u*.9,m=[];for(let g=0;g<6;g++){const _=g/6*2*Math.PI+Math.PI/6;m.push([o+f*Math.cos(_),a+f*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id,capturedAt:r.capturedAt})}}),i};function DF(){var Te;const t=js(),{player:e,artPoints:n,captureArt:i,discoveries:r}=si(),[o,a]=M.useState(null),[u,h]=M.useState(!1),[f,m]=M.useState(n),[g,_]=M.useState(pf.praha),[E,R]=M.useState("solo"),[k,V]=M.useState(!1),[A,T]=M.useState("circles"),[S,B]=M.useState(null);M.useEffect(()=>{m(n)},[n]),M.useEffect(()=>{var se;if(console.log("[Nav Debug] location.state:",t.state,"artPoints.length:",n.length),(se=t.state)!=null&&se.targetArtId&&n.length>0){console.log("[Nav Debug] Looking for:",t.state.targetArtId);const fe=n.find(Ie=>Ie.id===t.state.targetArtId);console.log("[Nav Debug] Found point:",fe),fe&&(console.log("[Nav Debug] Setting selectedPoint, viewMode=multi, flyToLocation"),a(fe),R("multi"),B(fe.location),window.history.replaceState({},document.title))}},[t.state,n]);const W=se=>{u?m(fe=>fe.map(Ie=>{if(Ie.id===se.id){const oe=(wm.indexOf(Ie.capturedBy)+1)%wm.length;return{...Ie,capturedBy:wm[oe]}}return Ie})):a(se)},z=()=>{m(n.map(se=>({...se,capturedBy:null})))},I=u?f:n,C=M.useMemo(()=>H6(I),[I]),N=M.useMemo(()=>OF(I,A),[I,A]),D=M.useMemo(()=>lA(I),[I]);Object.values(D).reduce((se,fe)=>se+fe,0),Object.keys(r).length,vi.length;const j=M.useMemo(()=>{const se=vi.filter(Ie=>Ie.hood===g.id);return{found:se.filter(Ie=>r[Ie.id]).length,total:se.length}},[r,g]),U=M.useMemo(()=>{const se=f.filter(Z=>Z.hood===g.id&&Z.status!=="ghost"),fe=se.filter(Z=>Z.capturedBy==="red").length,Ie=se.filter(Z=>Z.capturedBy==="blue").length;return{red:fe,blue:Ie,total:se.length}},[f,g]),O=E==="solo";return w.jsxs("div",{className:"relative w-full h-full",children:[w.jsxs("div",{className:"absolute top-0 left-0 right-0 pt-safe px-3 pb-2 z-[1000] flex flex-col gap-2 font-nohemi",style:{paddingTop:"max(env(safe-area-inset-top), 12px)"},children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"flex bg-[#FAFAFA] shadow-lg",children:Object.values(pf).map(se=>w.jsx("button",{onClick:()=>_(se),className:`px-4 py-2 text-xs font-bold transition-all whitespace-nowrap ${g.id===se.id?"bg-black text-white":"text-black/40"}`,children:se.name.toUpperCase()},se.id))}),w.jsx("div",{className:"ml-auto flex items-center gap-2 bg-[#FAFAFA] shadow-lg px-3 py-2",children:O?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"text-sm font-black",style:{color:(Te=hd[e.team])==null?void 0:Te.color},children:j.found}),w.jsxs("span",{className:"text-xs text-black/30",children:["/ ",j.total]})]}):w.jsx("div",{className:"flex items-center gap-1 w-24",children:w.jsxs("div",{className:"flex-1 h-3 bg-black/10 flex overflow-hidden",children:[w.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${U.total>0?U.red/U.total*100:50}%`,backgroundColor:hd.red.color}}),w.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${U.total>0?U.blue/U.total*100:50}%`,backgroundColor:hd.blue.color}})]})})})]}),w.jsxs("div",{className:"flex bg-[#FAFAFA] shadow-lg",children:[w.jsx("button",{onClick:()=>R("solo"),className:`flex-1 px-6 py-3 text-sm font-black tracking-wide transition-all ${O?"bg-black text-white":"text-black/30"}`,children:"SOLO"}),w.jsx("button",{onClick:()=>R("multi"),className:`flex-1 px-6 py-3 text-sm font-black tracking-wide transition-all ${O?"text-black/30":"bg-black text-white"}`,children:"BATTLE"})]})]}),w.jsxs("div",{className:"absolute bottom-24 right-4 z-[1000] flex flex-col gap-2",children:[w.jsx(ee.button,{onClick:()=>h(!u),className:`w-10 h-10 shadow-lg flex items-center justify-center transition-colors ${u?"bg-purple-500 text-white":"bg-[#FAFAFA] text-black/30"}`,whileTap:{scale:.95},children:w.jsx(_F,{size:16})}),u&&w.jsx(ee.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:z,className:"w-10 h-10 bg-[#FAFAFA] shadow-lg flex items-center justify-center text-black/30",whileTap:{scale:.95},children:w.jsx(TF,{size:16})})]}),w.jsx(ms,{children:u&&w.jsx(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-16 left-1/2 -translate-x-1/2 z-[1000] px-4 py-2 bg-purple-500 shadow-lg font-nohemi",children:w.jsx("span",{className:"text-xs text-white font-bold tracking-widest",children:"DEV MODE"})})}),w.jsxs(hF,{center:sA,zoom:oA,minZoom:z6,maxZoom:U6,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#FAFAFA"},children:[w.jsx(pF,{url:b1.tileUrl,attribution:b1.attribution}),w.jsx(LF,{}),w.jsx(bF,{devMode:u}),w.jsx(kF,{hood:g}),w.jsx(RF,{location:S}),w.jsx(NF,{}),w.jsx(M1,{positions:k1.map(se=>se.location),pathOptions:{color:"#eab308",weight:4,opacity:.6}}),k1.map(se=>w.jsx(uF,{center:se.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#FAFAFA",fillOpacity:1,weight:2}},se.name)),!O&&N.map((se,fe)=>{const Ie=se.capturedAt?V1(se.capturedAt):0,Z=.15*(1-Ie*.7),oe=.4*(1-Ie*.5);return w.jsx(fF,{positions:se.coords,pathOptions:{color:_m(se.team),fillColor:_m(se.team),fillOpacity:Z,weight:1,opacity:oe}},`territory-${se.pointId}`)}),!O&&k&&Object.entries(C).map(([se,fe])=>fe.map((Ie,Z)=>w.jsx(M1,{positions:[Ie.from,Ie.to],pathOptions:{color:_m(se),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${se}-line-${Z}`))),I.filter(se=>O||se.status!=="ghost").map(se=>{const fe=se.status==="ghost",Ie=r[se.id],Z=O?Ie?e.team:null:se.capturedBy,oe=!O&&se.capturedBy&&se.capturedAt?V1(se.capturedAt):0,J=AF(Z,fe,Ie,oe,!O,O);return w.jsx(dF,{position:se.location,icon:J,eventHandlers:{click:ie=>{ie.originalEvent.stopPropagation(),W(se)}}},`${se.id}-${Z||"none"}-${Math.floor(oe*10)}`)})]}),w.jsx(ms,{children:o&&w.jsx(MF,{point:o,onClose:()=>a(null),isDiscovered:r[o.id],isSoloView:O})})]})}function VF(){return w.jsx(ee.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:w.jsx(DF,{})})}function jF(){const{player:t}=si(),[e,n]=M.useState(!1);return M.useEffect(()=>{if(t.team&&!e){n(!0);const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"}},[t.team,e]),t.team?w.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-[#FAFAFA] font-nohemi",children:w.jsxs(ee.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},children:[w.jsx(ee.div,{className:"text-7xl font-black text-black/10 mb-4",animate:{opacity:[.1,.2,.1]},transition:{repeat:1/0,duration:1.5},children:"AR"}),w.jsx("h2",{className:"text-xl font-bold mb-2 text-black",children:"Opening Scanner"}),w.jsx("p",{className:"text-black/40 text-sm",children:"Point camera at street art"})]})}):w.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-[#FAFAFA] font-nohemi",children:w.jsxs(ee.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[w.jsx("div",{className:"text-8xl font-black text-black/5 mb-4",children:"!"}),w.jsx("h2",{className:"text-2xl font-bold mb-2 text-black",children:"Join a Team"}),w.jsx("p",{className:"text-black/40 text-sm",children:"Select your team from home to start scanning"})]})})}const FF={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};function BF(){var o,a;const{player:t,allPlayers:e}=si(),n=e.filter(u=>u.name&&u.name!=="Street Artist"),i=n.findIndex(u=>u.id===t.id||u.name===t.name);i>=0?n[i]={...n[i],score:Math.max(n[i].score,t.score||0),captures:Math.max(n[i].captures||0,t.captureCount||((o=t.capturedArt)==null?void 0:o.length)||0)}:t.team&&t.name&&t.name!=="Street Artist"&&n.push({id:t.id||"current",name:t.name,team:t.team,score:t.score||0,captures:t.captureCount||((a=t.capturedArt)==null?void 0:a.length)||0});const r=n.sort((u,h)=>(h.score||0)-(u.score||0));return w.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi pb-20",children:[w.jsxs("div",{className:"p-6 pt-10",children:[w.jsx(ee.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-1",children:"SOLO RANKINGS"}),w.jsx(ee.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl font-bold text-black tracking-tight",children:"Top Players"})]}),w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"px-6",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"PLAYERS"}),w.jsxs("div",{className:"space-y-1",children:[r.map((u,h)=>{var _;const f=u.name===t.name,m=((_=FF[u.team])==null?void 0:_.color)||"#888",g=h<3;return w.jsxs(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+h*.03},className:`flex items-center gap-4 py-3 border-b border-black/5 ${f?"bg-black/5 -mx-2 px-2":""}`,children:[w.jsx("div",{className:"w-8",children:w.jsx("span",{className:`text-2xl font-black ${g?"text-black":"text-black/20"}`,children:h+1})}),w.jsx("div",{className:"w-1 h-8",style:{backgroundColor:m}}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:`font-bold truncate ${f?"text-black":"text-black/80"}`,children:u.name}),f&&w.jsx("span",{className:"text-[10px] tracking-widest text-black/40",children:"YOU"})]}),w.jsxs("div",{className:"text-xs text-black/40",children:[u.captures||0," captures"]})]}),w.jsx("div",{className:"text-right",children:w.jsx("div",{className:"text-xl font-black text-black",children:u.score})})]},u.id||u.name)}),r.length===0&&w.jsxs("div",{className:"py-12 text-center",children:[w.jsx("div",{className:"text-6xl font-black text-black/5 mb-2",children:"0"}),w.jsx("div",{className:"text-black/30",children:"No players yet"})]})]})]})]})}const zF={"art-46":{id:"art-46",badgeNumber:1,name:"Centrum Chomp #1",image:"badges/badge-1.png",area:"Florenc"},"art-47":{id:"art-47",badgeNumber:2,name:"Centrum Chomp #2",image:"badges/badge-2.png",area:"Florenc"},"art-48":{id:"art-48",badgeNumber:3,name:"Centrum Chomp #3",image:"badges/badge-3.png",area:"Karln"},"art-49":{id:"art-49",badgeNumber:4,name:"Centrum Chomp #4",image:"badges/badge-4.png",area:"Karln"},"art-50":{id:"art-50",badgeNumber:5,name:"Centrum Chomp #5",image:"badges/badge-5.png",area:"Karln"},"art-51":{id:"art-51",badgeNumber:6,name:"Centrum Chomp #6",image:"badges/badge-6.png",area:"Centrum"},"art-52":{id:"art-52",badgeNumber:7,name:"Centrum Chomp #7",image:"badges/badge-7.png",area:"Centrum"},"art-53":{id:"art-53",badgeNumber:8,name:"Centrum Chomp #8",image:"badges/badge-8.png",area:"Centrum"},"art-54":{id:"art-54",badgeNumber:9,name:"Centrum Chomp #9",image:"badges/badge-9.png",area:"Centrum"},"art-55":{id:"art-55",badgeNumber:10,name:"Centrum Chomp #10",image:"badges/badge-10.png",area:"Centrum"},"art-56":{id:"art-56",badgeNumber:11,name:"Centrum Chomp #11",image:"badges/badge-11.png",area:"Florenc"}},yA=Object.values(zF).sort((t,e)=>t.badgeNumber-e.badgeNumber),j1=yA.length,UF=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,HF=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,F1={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}},xm={Vysoany:{name:"Vysoany"},Hloubtn:{name:"Hloubtn"},Podbrady:{name:"Podbrady"},Palmovka:{name:"Palmovka"},Karln:{name:"Karln"},Libe:{name:"Libe"},Prosek:{name:"Prosek"},Florenc:{name:"Florenc"},Centrum:{name:"Centrum"}};function WF(){const{player:t,artPoints:e,resetAll:n,discoveries:i}=si(),[r,o]=M.useState(!1),[a,u]=M.useState(!1),[h,f]=M.useState(!1);M.useEffect(()=>{f(UF())},[]);const m=(e==null?void 0:e.filter(T=>t.capturedArt.includes(T.id)))||[],g=M.useMemo(()=>{const T={},S=Object.keys(i||{});return Object.keys(xm).forEach(B=>{const W=vi.filter(I=>I.area===B),z=W.filter(I=>S.includes(I.id));T[B]={total:W.length,found:z.length,complete:z.length===W.length&&W.length>0}}),T},[i]),_=M.useMemo(()=>{const T=vi.length,S=Object.keys(i||{}).length;return{total:T,found:S,percent:Math.round(S/T*100)}},[i]),E=t.team?F1[t.team].color:"#888",R=t.team?F1[t.team].name:"?",k=M.useMemo(()=>{const T=Object.keys(i||{}),S=new Set;return vi.forEach(B=>{T.includes(B.id)&&S.add(B.area)}),S.size},[i]),V=M.useMemo(()=>{const T=Object.keys(i||{});return yA.filter(S=>T.includes(S.id))},[i]),A=async()=>{if(!r){o(!0);try{const T=["red","blue"];let S=0,B=0;for(const W of vi){const z=T[Math.floor(Math.random()*T.length)],I=Wa(W);z==="red"?S+=I:B+=I,await Di(Rn(bt,"streetart-captures",W.id),{artId:W.id,capturedBy:z,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:I,isFirstCapture:!0,isRecapture:!1})}await Di(Rn(bt,"streetart-teams","red"),{score:S},{merge:!0}),await Di(Rn(bt,"streetart-teams","blue"),{score:B},{merge:!0})}catch(T){console.error("Failed to randomize:",T)}o(!1)}};return w.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi pb-20",children:[w.jsxs("div",{className:"p-6 pt-10",children:[w.jsx(ee.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-1",children:"YOUR COLLECTION"}),w.jsx(ee.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl font-bold text-black tracking-tight",children:t.name}),w.jsxs(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},style:{color:E},children:["Team ",R]})]}),w.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"px-6 mb-8",children:w.jsxs("div",{className:"flex gap-6",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-5xl font-black text-black",children:t.score}),w.jsx("div",{className:"text-xs text-black/40 mt-1",children:"POINTS"})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-5xl font-black text-black",children:t.captureCount||m.length}),w.jsx("div",{className:"text-xs text-black/40 mt-1",children:"CAPTURES"})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-5xl font-black text-black",children:t.maxStreak||0}),w.jsx("div",{className:"text-xs text-black/40 mt-1",children:"BEST STREAK"})]})]})}),j1>0&&w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"px-6 mb-8",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40",children:"CHOMPS"}),w.jsxs("p",{className:"text-sm text-black/40",children:[w.jsx("span",{className:"font-bold text-black",children:V.length})," / ",j1]})]}),V.length===0?w.jsxs("div",{className:"py-8 text-center",children:[w.jsx("div",{className:"text-4xl font-black text-black/10 mb-2",children:"?"}),w.jsx("p",{className:"text-black/30 text-sm",children:"Scan street art to collect Chomps!"})]}):w.jsx("div",{className:"flex flex-wrap gap-3",children:V.map((T,S)=>w.jsxs(ee.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+S*.05,type:"spring",stiffness:300,damping:15},className:"relative",children:[w.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden shadow-lg",style:{boxShadow:`0 4px 15px ${E}40`,border:`2px solid ${E}`},children:w.jsx("img",{src:T.image,alt:T.name,className:"w-full h-full object-cover"})}),w.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:E},children:T.badgeNumber})]},T.id))})]}),w.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"px-6 mb-4",children:w.jsx(hP,{to:"/achievements",className:"block",children:w.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-black/10",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40",children:"ACHIEVEMENTS"}),w.jsx("p",{className:"text-sm text-black/40",children:""})]})})}),w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"px-6 mb-8",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"COLLECTION"}),w.jsxs("div",{className:"mb-4",children:[w.jsxs("div",{className:"flex justify-between mb-2",children:[w.jsx("span",{className:"font-bold text-black",children:"Total Collected"}),w.jsxs("span",{className:"text-black/40",children:[_.found," / ",_.total]})]}),w.jsx("div",{className:"h-2 bg-black/5",children:w.jsx(ee.div,{className:"h-full",style:{backgroundColor:E},initial:{width:0},animate:{width:`${_.percent}%`},transition:{duration:.8,delay:.4}})})]}),w.jsx("div",{className:"space-y-3",children:Object.entries(xm).map(([T,S],B)=>{const W=g[T]||{found:0,total:0,complete:!1},z=W.total>0?Math.round(W.found/W.total*100):0;return w.jsxs(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+B*.1},className:"flex items-center gap-4",children:[w.jsx("div",{className:"w-8 text-2xl font-black text-black/10",children:W.found}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex justify-between mb-1",children:[w.jsxs("span",{className:`text-sm ${W.complete?"font-bold text-black":"text-black/60"}`,children:[S.name,W.complete&&w.jsx("span",{className:"ml-2 text-green-600",children:"COMPLETE"})]}),w.jsxs("span",{className:"text-xs text-black/30",children:[W.found,"/",W.total]})]}),w.jsx("div",{className:"h-1 bg-black/5",children:w.jsx("div",{className:"h-full transition-all duration-500",style:{backgroundColor:W.complete?"#22c55e":"rgba(0,0,0,0.2)",width:`${z}%`}})})]})]},T)})})]}),w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"px-6 mb-8",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"STATS"}),w.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[w.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[w.jsx("span",{className:"text-black/50",children:"Recaptures"}),w.jsx("span",{className:"font-bold text-black",children:t.recaptureCount||0})]}),w.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[w.jsx("span",{className:"text-black/50",children:"First captures"}),w.jsx("span",{className:"font-bold text-black",children:t.firstCaptureCount||0})]}),w.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[w.jsx("span",{className:"text-black/50",children:"Current streak"}),w.jsx("span",{className:"font-bold text-black",children:t.streak||0})]}),w.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[w.jsx("span",{className:"text-black/50",children:"Areas"}),w.jsxs("span",{className:"font-bold text-black",children:[k," / ",Object.keys(xm).length]})]})]})]}),w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"px-6 mb-8",children:[w.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"ADMIN"}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("button",{onClick:A,disabled:r,className:"w-full py-3 bg-black/5 text-black/60 font-bold text-sm tracking-wide hover:bg-black/10 transition-colors disabled:opacity-50",children:r?"RANDOMIZING...":"RANDOMIZE TERRITORIES"}),w.jsx("button",{onClick:n,className:"w-full py-3 text-black/30 font-bold text-sm tracking-wide hover:text-red-500 transition-colors",children:"RESET ALL DATA"})]})]}),w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"px-6 mb-6",children:[!h&&w.jsx("button",{onClick:()=>u(!0),className:"w-full py-3 bg-black text-white font-bold text-sm tracking-wide mb-3",children:"ADD TO HOME SCREEN"}),w.jsx("p",{className:"text-center text-xs text-black/40",children:"Best experience on Chrome browser"})]}),w.jsx(ms,{children:a&&w.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-6",onClick:()=>u(!1),children:w.jsxs(ee.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white p-6 max-w-sm w-full",onClick:T=>T.stopPropagation(),children:[w.jsx("h3",{className:"text-xl font-bold text-black mb-4",children:"Add to Home Screen"}),HF()?w.jsxs("div",{className:"space-y-4 text-black/70",children:[w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"1."}),w.jsxs("p",{children:["Tap the ",w.jsx("strong",{children:"Share"})," button ",w.jsx("span",{className:"inline-block w-5 h-5 align-middle",children:w.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:w.jsx("path",{d:"M16 5l-1.42 1.42-1.59-1.59V16h-2V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z"})})})," at the bottom of Safari"]})]}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"2."}),w.jsxs("p",{children:["Scroll down and tap ",w.jsx("strong",{children:'"Add to Home Screen"'})]})]}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"3."}),w.jsxs("p",{children:["Tap ",w.jsx("strong",{children:'"Add"'})," in the top right"]})]})]}):w.jsxs("div",{className:"space-y-4 text-black/70",children:[w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"1."}),w.jsxs("p",{children:["Tap the ",w.jsx("strong",{children:"menu"})," () in Chrome"]})]}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx("span",{className:"text-2xl",children:"2."}),w.jsxs("p",{children:["Tap ",w.jsx("strong",{children:'"Add to Home screen"'})," or ",w.jsx("strong",{children:'"Install app"'})]})]})]}),w.jsx("button",{onClick:()=>u(!1),className:"w-full mt-6 py-3 bg-black text-white font-bold text-sm",children:"GOT IT"})]})})}),w.jsxs("div",{className:"flex justify-center gap-6 py-6",children:[w.jsxs("a",{href:"https://www.instagram.com/postptacek/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-black/40 hover:text-black transition-colors",children:[w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),w.jsx("span",{className:"text-sm font-bold",children:"Instagram"})]}),w.jsxs("a",{href:"https://discord.gg/UdR2Gkpd",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-black/40 hover:text-black transition-colors",children:[w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),w.jsx("span",{className:"text-sm font-bold",children:"Discord"})]})]}),w.jsx("p",{className:"text-center text-xs text-black/20 pb-4",children:"v3.0.5"})]})}const Bh={[ot.SOLO]:{label:"SOLO",color:"#10b981"},[ot.BATTLE]:{label:"BATTLE",color:"#ef4444"},[ot.SPECIAL]:{label:"SPECIAL",color:"#f59e0b"},[ot.SESSION]:{label:"SESSION",color:"#8b5cf6"},[ot.SOCIAL]:{label:"SOCIAL",color:"#ec4899"}};function $F(){var k,V;const t=pl(),{player:e,discoveries:n,artPoints:i,unlockedAchievements:r}=si(),[o,a]=M.useState(null),[u,h]=M.useState(null),f=M.useMemo(()=>uA(e,n,i,{}),[e,n,i]),m=M.useMemo(()=>{const A=r||[];return[...new Set([...A,...f])]},[r,f]),g=M.useMemo(()=>o?$a.filter(A=>A.category===o):$a,[o]),_=m.length,E=$a.length,R=(A,T)=>{T&&h(A)};return w.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi",children:[w.jsxs("div",{className:"p-6 pt-10",children:[w.jsx(ee.button,{onClick:()=>t(-1),className:"text-black/40 text-sm mb-4 flex items-center gap-2",whileTap:{scale:.95},children:" Back"}),w.jsx(ee.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-3xl font-bold text-black tracking-tight",children:"Achievements"}),w.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"flex items-center gap-2 mt-2",children:[w.jsx("span",{className:"text-xl font-bold text-black",children:_}),w.jsxs("span",{className:"text-black/40",children:["/ ",E," unlocked"]})]})]}),w.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"px-6 mb-6 flex gap-2 overflow-x-auto pb-2",children:[w.jsx("button",{onClick:()=>a(null),className:`px-3 py-1.5 text-xs font-bold whitespace-nowrap transition-all ${o===null?"bg-black text-white":"bg-black/5 text-black/60"}`,children:"ALL"}),Object.entries(Bh).map(([A,{label:T,color:S}])=>w.jsx("button",{onClick:()=>a(A),className:`px-3 py-1.5 text-xs font-bold whitespace-nowrap transition-all ${o===A?"text-white":"bg-black/5 text-black/60"}`,style:o===A?{backgroundColor:S}:{},children:T},A))]}),w.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"px-6 pb-32",children:w.jsx("div",{className:"grid grid-cols-3 gap-3",children:g.map((A,T)=>{const S=m.includes(A.id),B=Bh[A.category];return w.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3+T*.02},onClick:()=>R(A,S),className:`aspect-square flex flex-col items-center justify-center p-3 border-2 ${S?"bg-white border-black cursor-pointer active:bg-black/5":"bg-black/5 border-transparent"}`,children:[w.jsx("div",{className:"w-12 h-12 mb-2 relative flex items-center justify-center",children:w.jsx("img",{src:"/street-art-ctf/animation/eat_a/eat_a_00000.png",alt:"",className:"w-full h-full object-contain",style:{filter:S?`hue-rotate(${e.team==="red"?"0deg":"200deg"}) saturate(1.5)`:"grayscale(100%) opacity(0.3)"}})}),w.jsx("div",{className:`text-[10px] font-bold text-center leading-tight ${S?"text-black":"text-black/30"}`,children:A.name}),S&&w.jsx("div",{className:"text-[8px] font-bold mt-1 px-1.5 py-0.5",style:{backgroundColor:B==null?void 0:B.color,color:"white"},children:B==null?void 0:B.label})]},A.id)})})}),w.jsx(ms,{children:u&&w.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/50",onClick:()=>h(null),children:w.jsxs(ee.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[#FAFAFA] p-8 max-w-sm w-full text-center",onClick:A=>A.stopPropagation(),children:[w.jsx("div",{className:"w-24 h-24 mx-auto mb-4",children:w.jsx("img",{src:"/street-art-ctf/animation/eat_a/eat_a_00000.png",alt:"",className:"w-full h-full object-contain",style:{filter:`hue-rotate(${e.team==="red"?"0deg":"200deg"}) saturate(1.5)`}})}),w.jsx("h2",{className:"text-2xl font-black text-black mb-2",children:u.name}),w.jsx("p",{className:"text-black/50 mb-4",children:u.description}),w.jsx("div",{className:"inline-block px-3 py-1 text-xs font-bold text-white mb-6",style:{backgroundColor:(k=Bh[u.category])==null?void 0:k.color},children:(V=Bh[u.category])==null?void 0:V.label}),w.jsx("button",{onClick:()=>h(null),className:"block w-full py-3 bg-black text-white font-bold text-sm",children:"CLOSE"})]})})})]})}const GF="123";function qF(){const t=pl(),{artPoints:e,allPlayers:n,teamScores:i}=si(),[r,o]=M.useState(!1),[a,u]=M.useState(""),[h,f]=M.useState("all"),[m,g]=M.useState({}),[_,E]=M.useState(null);M.useEffect(()=>{sessionStorage.getItem("admin-auth")==="true"&&o(!0)},[]);const R=z=>{z.preventDefault(),a===GF?(o(!0),sessionStorage.setItem("admin-auth","true")):(E({type:"error",text:"Wrong password"}),setTimeout(()=>E(null),2e3))},k=(z,I)=>{E({type:z,text:I}),setTimeout(()=>E(null),3e3)},V=async(z,I)=>{g(C=>({...C,[z]:!0}));try{const C=I==="ghost"?"active":"ghost";await Di(Rn(bt,"streetart-captures",z),{status:C,statusUpdatedAt:new Date},{merge:!0}),k("success",`Point ${z} set to ${C}`)}catch(C){k("error","Failed to update: "+C.message),console.error(C)}g(C=>({...C,[z]:!1}))},A=async z=>{g(I=>({...I,[`reset-${z}`]:!0}));try{await Nu(Rn(bt,"streetart-captures",z)),k("success",`Ownership reset for ${z}`)}catch(I){k("error","Failed to reset ownership"),console.error(I)}g(I=>({...I,[`reset-${z}`]:!1}))},T=async()=>{if(confirm("Are you sure? This will reset ALL captures!")){g(z=>({...z,resetAll:!0}));try{const I=(await af(so(bt,"streetart-captures"))).docs.map(C=>Nu(C.ref));await Promise.all(I),k("success","All captures reset!")}catch(z){k("error","Failed to reset all captures"),console.error(z)}g(z=>({...z,resetAll:!1}))}},S=async()=>{if(confirm("Are you sure? This will delete ALL player data!")){g(z=>({...z,resetPlayers:!0}));try{const I=(await af(so(bt,"streetart-players"))).docs.map(C=>Nu(C.ref));await Promise.all(I),k("success","All players reset!")}catch(z){k("error","Failed to reset players"),console.error(z)}g(z=>({...z,resetPlayers:!1}))}},B=h==="all"?e:e.filter(z=>z.hood===h),W={total:e.length,captured:e.filter(z=>z.capturedBy).length,red:e.filter(z=>z.capturedBy==="red").length,blue:e.filter(z=>z.capturedBy==="blue").length,ghost:e.filter(z=>z.status==="ghost").length,players:n.length};return r?w.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] pb-24 overflow-y-auto",children:[w.jsx("div",{className:"sticky top-0 z-50 bg-[#0a0a0f]/90 backdrop-blur-xl border-b border-white/10 px-4 py-3",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2",children:w.jsx(yF,{size:24,className:"text-white/70"})}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(O1,{size:18,className:"text-purple-400"}),w.jsx("span",{className:"font-bold",children:"God Mode"})]}),w.jsx("div",{className:"w-10"})]})}),_&&w.jsx(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:`fixed top-16 left-4 right-4 z-50 p-3 rounded-xl text-center text-sm font-medium ${_.type==="error"?"bg-red-500/90":"bg-green-500/90"}`,children:_.text}),w.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:W.total}),w.jsx("div",{className:"text-xs text-white/40",children:"Points"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-red-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-red-400",children:W.red}),w.jsx("div",{className:"text-xs text-red-400/60",children:"Red"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/20 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-blue-400",children:W.blue}),w.jsx("div",{className:"text-xs text-blue-400/60",children:"Blue"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold text-white/60",children:W.ghost}),w.jsx("div",{className:"text-xs text-white/40",children:"Ghost"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:W.players}),w.jsx("div",{className:"text-xs text-white/40",children:"Players"})]}),w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[w.jsx("div",{className:"text-2xl font-bold",children:W.captured}),w.jsx("div",{className:"text-xs text-white/40",children:"Captured"})]})]}),w.jsxs("div",{className:"px-4 mb-6",children:[w.jsxs("h2",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[w.jsx(CF,{size:14}),"Danger Zone"]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("button",{onClick:T,disabled:m.resetAll,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetAll?w.jsx(Fh,{size:16,className:"animate-spin"}):w.jsx(EF,{size:16}),"Reset Captures"]}),w.jsxs("button",{onClick:S,disabled:m.resetPlayers,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetPlayers?w.jsx(Fh,{size:16,className:"animate-spin"}):w.jsx(D1,{size:16}),"Reset Players"]})]})]}),w.jsx("div",{className:"px-4 mb-4",children:w.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[w.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h==="all"?"bg-white text-black":"bg-white/10 text-white/60"}`,children:"All"}),Object.values(pf).map(z=>w.jsx("button",{onClick:()=>f(z.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h===z.id?"bg-white text-black":"bg-white/10 text-white/60"}`,children:z.name},z.id))]})}),w.jsxs("div",{className:"px-4 space-y-2",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2",children:["Art Points (",B.length,")"]}),B.map(z=>{var C;const I=z.status==="ghost";return w.jsxs("div",{className:`p-4 rounded-xl border ${I?"bg-white/5 border-white/10 opacity-60":"bg-white/5 border-white/10"}`,children:[w.jsxs("div",{className:"flex items-start justify-between mb-2",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-medium",children:z.name}),I&&w.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-white/10 text-white/40",children:"GHOST"})]}),w.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[z.id,"  ",z.area,"  ",z.size,"  ",(C=aA[z.size])==null?void 0:C.points,"pts"]})]}),z.capturedBy&&w.jsx("div",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:z.capturedBy==="red"?"#ff6b6b20":"#4dabf720",color:z.capturedBy==="red"?"#ff6b6b":"#4dabf7"},children:z.capturedBy.toUpperCase()})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>V(z.id,z.status),disabled:m[z.id],className:`flex-1 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-1.5 ${I?"bg-green-500/20 text-green-400":"bg-white/10 text-white/60"}`,children:m[z.id]?w.jsx(Fh,{size:14,className:"animate-spin"}):I?w.jsxs(w.Fragment,{children:[w.jsx(wF,{size:14})," Make Active"]}):w.jsxs(w.Fragment,{children:[w.jsx(xF,{size:14})," Make Ghost"]})}),z.capturedBy&&w.jsx("button",{onClick:()=>A(z.id),disabled:m[`reset-${z.id}`],className:"py-2 px-3 rounded-lg bg-white/10 text-white/60 text-xs font-medium flex items-center gap-1.5",children:m[`reset-${z.id}`]?w.jsx(Fh,{size:14,className:"animate-spin"}):w.jsxs(w.Fragment,{children:[w.jsx(PF,{size:14})," Reset"]})})]})]},z.id)})]}),w.jsxs("div",{className:"px-4 mt-8",children:[w.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2 flex items-center gap-2",children:[w.jsx(D1,{size:14}),"Players (",n.length,")"]}),w.jsx("div",{className:"space-y-2",children:n.map(z=>w.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("div",{className:"font-medium",children:z.name}),w.jsxs("div",{className:"text-xs text-white/40",children:[z.captures||0," captures"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-sm font-bold",children:z.score||0}),w.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:z.team==="red"?"#ff6b6b":"#4dabf7"}})]})]},z.id))})]})]}):w.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-6",children:w.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-purple-500/20 flex items-center justify-center",children:w.jsx(O1,{size:32,className:"text-purple-400"})}),w.jsx("h1",{className:"text-2xl font-bold",children:"Admin Access"}),w.jsx("p",{className:"text-white/40 text-sm mt-1",children:"God Mode Panel"})]}),w.jsxs("form",{onSubmit:R,className:"space-y-4",children:[w.jsx("input",{type:"password",value:a,onChange:z=>u(z.target.value),placeholder:"Enter password...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-center focus:outline-none focus:border-purple-500/50"}),w.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-purple-500 text-white font-bold",children:"Enter"})]}),_&&w.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 p-3 rounded-lg text-center text-sm ${_.type==="error"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:_.text}),w.jsx("button",{onClick:()=>t(-1),className:"mt-6 w-full py-2 text-white/40 text-sm",children:" Back"})]})})}const ZF=[{path:"/",label:"BATTLE"},{path:"/map",label:"MAP"},{path:"/scanner",label:"SCAN"},{path:"/leaderboard",label:"RANKS"},{path:"/profile",label:"COLLECTION"}];function KF(){return w.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000] font-nohemi",children:[w.jsx("div",{className:"absolute inset-0 bg-[#FAFAFA] shadow-[0_-4px_20px_rgba(0,0,0,0.1)]"}),w.jsx("div",{className:"relative flex justify-around items-center h-14 px-2",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:ZF.map(({path:t,label:e})=>{const n=e==="SCAN";return w.jsx(E2,{to:t,className:"flex-1 flex justify-center",children:({isActive:i})=>w.jsxs(ee.div,{className:"relative py-2 px-3",whileTap:{scale:.95},children:[i&&w.jsx(ee.div,{layoutId:"nav-indicator",className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-1 h-1 bg-black",transition:{type:"spring",stiffness:400,damping:30}}),w.jsx("span",{className:`text-xs tracking-wider transition-colors ${n?`font-black ${i?"text-black":"text-black/60"}`:`font-bold ${i?"text-black":"text-black/30"}`}`,style:n?{fontSize:"0.875rem"}:{},children:e})]})},t)})})]})}const B1={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};function QF(){const[t,e]=M.useState(0),[n,i]=M.useState("a"),r=41;M.useEffect(()=>{const h=setInterval(()=>{e(f=>{const m=f+1;return m>=r?(i(g=>g==="a"?"b":"a"),0):m})},42);return()=>clearInterval(h)},[]);const o=n==="a"?"eat_a":"eat_b",a=String(t).padStart(5,"0"),u=`animation/${o}/eat_${n}_${a}.png`;return w.jsx("img",{src:u,alt:"Chomp animation",className:"w-48 h-48 object-contain"})}function YF(){var g,_;const{captureNotification:t,player:e}=si();if(!t)return null;const n=((g=B1[t.team])==null?void 0:g.color)||"#888",i=((_=B1[t.team])==null?void 0:_.name)||"?",r=t.points||100,o=t.streak||0,a=t.playerId===e.id,u=t.isRecapture&&t.prevOwner===e.team&&t.team!==e.team;if(!a&&!u)return null;let h,f;a?(h=t.isRecapture?"TERRITORY STOLEN":"TERRITORY CAPTURED",f=t.isRecapture?"STOLEN":"CAPTURED"):u?(h="TERRITORY LOST",f="LOST"):(h=t.isRecapture?"TERRITORY CHANGED":"NEW CAPTURE",f="CLAIMED");const m=a;return w.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden bg-[#FAFAFA] font-nohemi",children:[w.jsx(ee.div,{className:"absolute top-0 left-0 right-0 h-2",style:{backgroundColor:u?"#888":n},initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.3}}),w.jsxs(ee.div,{initial:{y:40,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,type:"spring",stiffness:100},className:"text-center px-8",children:[w.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-sm tracking-widest text-black/30 mb-2",children:h}),w.jsx(ee.h1,{className:"text-5xl font-black text-black tracking-tight mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},children:f}),w.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.25},className:"text-lg text-black/50 mb-4",children:t.artName}),w.jsx(ee.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:100},className:"mb-4 flex justify-center",children:w.jsx(QF,{})}),m&&w.jsxs(w.Fragment,{children:[w.jsx(ee.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:150},className:"mb-2",children:w.jsxs("span",{className:"text-8xl font-black",style:{color:n},children:["+",r]})}),w.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-sm tracking-widest text-black/30 mb-6",children:"POINTS"})]}),!m&&w.jsx("div",{className:"mb-6"}),a&&o>1&&w.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.45},className:"inline-flex items-center gap-2 px-4 py-2 bg-black/5 mb-6",children:w.jsxs("span",{className:"font-black text-black",children:["STREAK x",o]})}),w.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex items-center justify-center gap-2",children:[w.jsx("span",{className:"font-bold text-black",children:t.playerName}),w.jsx("span",{className:"px-3 py-1 text-xs font-black text-white",style:{backgroundColor:n},children:i})]})]})]})}function XF(){const{achievementNotification:t}=si();return t?w.jsxs(ee.div,{initial:{opacity:0,y:-100},animate:{opacity:1,y:0},exit:{opacity:0,y:-100},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden bg-[#FAFAFA] font-nohemi",children:[w.jsx(ee.div,{className:"absolute top-0 left-0 right-0 h-2 bg-yellow-500",initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.3}}),w.jsxs(ee.div,{initial:{y:40,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,type:"spring",stiffness:100},className:"text-center px-8",children:[w.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-sm tracking-widest text-black/30 mb-6",children:"ACHIEVEMENT UNLOCKED"}),w.jsx(ee.h1,{className:"text-5xl font-black text-black tracking-tight mb-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},children:t.name}),w.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.35},className:"text-lg text-black/50",children:t.description})]})]}):null}function ru({children:t}){const{player:e}=si();return e.team&&e.name&&e.name!=="Street Artist"?t:w.jsx(uP,{to:"/onboarding",replace:!0})}function JF(){const t=js(),{player:e}=si(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding"||t.pathname==="/admin";return w.jsxs("div",{className:"h-full w-full flex flex-col",children:[w.jsx(ms,{children:w.jsx(YF,{})}),w.jsx(ms,{children:w.jsx(XF,{})}),w.jsx(ms,{mode:"wait",children:w.jsxs(d2,{location:t,children:[w.jsx(lr,{path:"/onboarding",element:w.jsx(K6,{})}),w.jsx(lr,{path:"/",element:n?w.jsx(Y6,{}):w.jsx(uP,{to:"/onboarding",replace:!0})}),w.jsx(lr,{path:"/map",element:w.jsx(ru,{children:w.jsx(VF,{})})}),w.jsx(lr,{path:"/scanner",element:w.jsx(ru,{children:w.jsx(jF,{})})}),w.jsx(lr,{path:"/leaderboard",element:w.jsx(ru,{children:w.jsx(BF,{})})}),w.jsx(lr,{path:"/profile",element:w.jsx(ru,{children:w.jsx(WF,{})})}),w.jsx(lr,{path:"/achievements",element:w.jsx(ru,{children:w.jsx($F,{})})}),w.jsx(lr,{path:"/admin",element:w.jsx(qF,{})})]},t.pathname)}),!i&&n&&w.jsx(KF,{})]})}function eB(){return w.jsx(q6,{children:w.jsx(JF,{})})}Tm.createRoot(document.getElementById("root")).render(w.jsx(_o.StrictMode,{children:w.jsx(w2,{children:w.jsx(eB,{})})}));
