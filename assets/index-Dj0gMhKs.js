function WA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var $A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function FT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BT={exports:{}},uf={},zT={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc=Symbol.for("react.element"),GA=Symbol.for("react.portal"),qA=Symbol.for("react.fragment"),ZA=Symbol.for("react.strict_mode"),KA=Symbol.for("react.profiler"),QA=Symbol.for("react.provider"),XA=Symbol.for("react.context"),YA=Symbol.for("react.forward_ref"),JA=Symbol.for("react.suspense"),ek=Symbol.for("react.memo"),tk=Symbol.for("react.lazy"),Mv=Symbol.iterator;function nk(t){return t===null||typeof t!="object"?null:(t=Mv&&t[Mv]||t["@@iterator"],typeof t=="function"?t:null)}var UT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HT=Object.assign,WT={};function il(t,e,n){this.props=t,this.context=e,this.refs=WT,this.updater=n||UT}il.prototype.isReactComponent={};il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $T(){}$T.prototype=il.prototype;function ny(t,e,n){this.props=t,this.context=e,this.refs=WT,this.updater=n||UT}var iy=ny.prototype=new $T;iy.constructor=ny;HT(iy,il.prototype);iy.isPureReactComponent=!0;var Ov=Array.isArray,GT=Object.prototype.hasOwnProperty,ry={current:null},qT={key:!0,ref:!0,__self:!0,__source:!0};function ZT(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)GT.call(e,i)&&!qT.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:oc,type:t,key:o,ref:a,props:r,_owner:ry.current}}function ik(t,e){return{$$typeof:oc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sy(t){return typeof t=="object"&&t!==null&&t.$$typeof===oc}function rk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dv=/\/+/g;function yp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rk(""+t.key):e.toString(36)}function Oh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case oc:case GA:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+yp(a,0):i,Ov(r)?(n="",t!=null&&(n=t.replace(Dv,"$&/")+"/"),Oh(r,e,n,"",function(f){return f})):r!=null&&(sy(r)&&(r=ik(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Dv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Ov(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+yp(o,u);a+=Oh(o,e,n,h,r)}else if(h=nk(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+yp(o,u++),a+=Oh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function rh(t,e,n){if(t==null)return t;var i=[],r=0;return Oh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function sk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},Dh={transition:null},ok={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:Dh,ReactCurrentOwner:ry};function KT(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:rh,forEach:function(t,e,n){rh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rh(t,function(){e++}),e},toArray:function(t){return rh(t,function(e){return e})||[]},only:function(t){if(!sy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=il;De.Fragment=qA;De.Profiler=KA;De.PureComponent=ny;De.StrictMode=ZA;De.Suspense=JA;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ok;De.act=KT;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=HT({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=ry.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)GT.call(e,h)&&!qT.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:oc,type:t.type,key:r,ref:o,props:i,_owner:a}};De.createContext=function(t){return t={$$typeof:XA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QA,_context:t},t.Consumer=t};De.createElement=ZT;De.createFactory=function(t){var e=ZT.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:YA,render:t}};De.isValidElement=sy;De.lazy=function(t){return{$$typeof:tk,_payload:{_status:-1,_result:t},_init:sk}};De.memo=function(t,e){return{$$typeof:ek,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Dh.transition;Dh.transition={};try{t()}finally{Dh.transition=e}};De.unstable_act=KT;De.useCallback=function(t,e){return cn.current.useCallback(t,e)};De.useContext=function(t){return cn.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};De.useEffect=function(t,e){return cn.current.useEffect(t,e)};De.useId=function(){return cn.current.useId()};De.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return cn.current.useMemo(t,e)};De.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};De.useRef=function(t){return cn.current.useRef(t)};De.useState=function(t){return cn.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return cn.current.useTransition()};De.version="18.3.1";zT.exports=De;var V=zT.exports;const co=FT(V),ak=WA({__proto__:null,default:co},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lk=V,uk=Symbol.for("react.element"),ck=Symbol.for("react.fragment"),hk=Object.prototype.hasOwnProperty,dk=lk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fk={key:!0,ref:!0,__self:!0,__source:!0};function QT(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)hk.call(e,i)&&!fk.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:uk,type:t,key:o,ref:a,props:r,_owner:dk.current}}uf.Fragment=ck;uf.jsx=QT;uf.jsxs=QT;BT.exports=uf;var x=BT.exports,vm={},XT={exports:{}},Mn={},YT={exports:{}},JT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,ce){var J=Z.length;Z.push(ce);e:for(;0<J;){var ne=J-1>>>1,Ce=Z[ne];if(0<r(Ce,ce))Z[ne]=ce,Z[J]=Ce,J=ne;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ce=Z[0],J=Z.pop();if(J!==ce){Z[0]=J;e:for(var ne=0,Ce=Z.length,Ye=Ce>>>1;ne<Ye;){var Ne=2*(ne+1)-1,Re=Z[Ne],pe=Ne+1,ut=Z[pe];if(0>r(Re,J))pe<Ce&&0>r(ut,Re)?(Z[ne]=ut,Z[pe]=J,ne=pe):(Z[ne]=Re,Z[Ne]=J,ne=Ne);else if(pe<Ce&&0>r(ut,J))Z[ne]=ut,Z[pe]=J,ne=pe;else break e}}return ce}function r(Z,ce){var J=Z.sortIndex-ce.sortIndex;return J!==0?J:Z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,g=null,_=3,T=!1,b=!1,A=!1,j=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Z){for(var ce=n(f);ce!==null;){if(ce.callback===null)i(f);else if(ce.startTime<=Z)i(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=n(f)}}function B(Z){if(A=!1,C(Z),!b)if(n(h)!==null)b=!0,be(q);else{var ce=n(f);ce!==null&&Je(B,ce.startTime-Z)}}function q(Z,ce){b=!1,A&&(A=!1,k(S),S=-1),T=!0;var J=_;try{for(C(ce),g=n(h);g!==null&&(!(g.expirationTime>ce)||Z&&!M());){var ne=g.callback;if(typeof ne=="function"){g.callback=null,_=g.priorityLevel;var Ce=ne(g.expirationTime<=ce);ce=t.unstable_now(),typeof Ce=="function"?g.callback=Ce:g===n(h)&&i(h),C(ce)}else i(h);g=n(h)}if(g!==null)var Ye=!0;else{var Ne=n(f);Ne!==null&&Je(B,Ne.startTime-ce),Ye=!1}return Ye}finally{g=null,_=J,T=!1}}var U=!1,R=null,S=-1,N=5,D=-1;function M(){return!(t.unstable_now()-D<N)}function z(){if(R!==null){var Z=t.unstable_now();D=Z;var ce=!0;try{ce=R(!0,Z)}finally{ce?O():(U=!1,R=null)}}else U=!1}var O;if(typeof P=="function")O=function(){P(z)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Xe=fe.port2;fe.port1.onmessage=z,O=function(){Xe.postMessage(null)}}else O=function(){j(z,0)};function be(Z){R=Z,U||(U=!0,O())}function Je(Z,ce){S=j(function(){Z(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){b||T||(b=!0,be(q))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var ce=3;break;default:ce=_}var J=_;_=ce;try{return Z()}finally{_=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var J=_;_=Z;try{return ce()}finally{_=J}},t.unstable_scheduleCallback=function(Z,ce,J){var ne=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,Z){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=J+Ce,Z={id:m++,callback:ce,priorityLevel:Z,startTime:J,expirationTime:Ce,sortIndex:-1},J>ne?(Z.sortIndex=J,e(f,Z),n(h)===null&&Z===n(f)&&(A?(k(S),S=-1):A=!0,Je(B,J-ne))):(Z.sortIndex=Ce,e(h,Z),b||T||(b=!0,be(q))),Z},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(Z){var ce=_;return function(){var J=_;_=ce;try{return Z.apply(this,arguments)}finally{_=J}}}})(JT);YT.exports=JT;var pk=YT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mk=V,Rn=pk;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eE=new Set,ku={};function To(t,e){Fa(t,e),Fa(t+"Capture",e)}function Fa(t,e){for(ku[t]=e,t=0;t<e.length;t++)eE.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wm=Object.prototype.hasOwnProperty,gk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vv={},jv={};function yk(t){return wm.call(jv,t)?!0:wm.call(Vv,t)?!1:gk.test(t)?jv[t]=!0:(Vv[t]=!0,!1)}function _k(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vk(t,e,n,i){if(e===null||typeof e>"u"||_k(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var oy=/[\-:]([a-z])/g;function ay(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oy,ay);$t[e]=new hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oy,ay);$t[e]=new hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oy,ay);$t[e]=new hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new hn(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new hn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ly(t,e,n,i){var r=$t.hasOwnProperty(e)?$t[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vk(e,n,r,i)&&(n=null),i||r===null?yk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Er=mk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sh=Symbol.for("react.element"),ha=Symbol.for("react.portal"),da=Symbol.for("react.fragment"),uy=Symbol.for("react.strict_mode"),xm=Symbol.for("react.profiler"),tE=Symbol.for("react.provider"),nE=Symbol.for("react.context"),cy=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),Em=Symbol.for("react.suspense_list"),hy=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),iE=Symbol.for("react.offscreen"),Fv=Symbol.iterator;function Fl(t){return t===null||typeof t!="object"?null:(t=Fv&&t[Fv]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,_p;function eu(t){if(_p===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_p=e&&e[1]||""}return`
`+_p+t}var vp=!1;function wp(t,e){if(!t||vp)return"";vp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{vp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eu(t):""}function wk(t){switch(t.tag){case 5:return eu(t.type);case 16:return eu("Lazy");case 13:return eu("Suspense");case 19:return eu("SuspenseList");case 0:case 2:case 15:return t=wp(t.type,!1),t;case 11:return t=wp(t.type.render,!1),t;case 1:return t=wp(t.type,!0),t;default:return""}}function Pm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case da:return"Fragment";case ha:return"Portal";case xm:return"Profiler";case uy:return"StrictMode";case Tm:return"Suspense";case Em:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nE:return(t.displayName||"Context")+".Consumer";case tE:return(t._context.displayName||"Context")+".Provider";case cy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hy:return e=t.displayName||null,e!==null?e:Pm(t.type)||"Memo";case Fr:e=t._payload,t=t._init;try{return Pm(t(e))}catch{}}return null}function xk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pm(e);case 8:return e===uy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Tk(t){var e=rE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oh(t){t._valueTracker||(t._valueTracker=Tk(t))}function sE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=rE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function od(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sm(t,e){var n=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ms(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oE(t,e){e=e.checked,e!=null&&ly(t,"checked",e,!1)}function Cm(t,e){oE(t,e);var n=ms(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Im(t,e.type,n):e.hasOwnProperty("defaultValue")&&Im(t,e.type,ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Im(t,e,n){(e!=="number"||od(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tu=Array.isArray;function Aa(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ms(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Am(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(tu(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ms(n)}}function aE(t,e){var n=ms(e.value),i=ms(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Hv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function km(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ah,uE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ah=ah||document.createElement("div"),ah.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ah.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ek=["Webkit","ms","Moz","O"];Object.keys(uu).forEach(function(t){Ek.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uu[e]=uu[t]})});function cE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uu.hasOwnProperty(t)&&uu[t]?(""+e).trim():e+"px"}function hE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=cE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Pk=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bm(t,e){if(e){if(Pk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Rm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lm=null;function dy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nm=null,ka=null,ba=null;function Wv(t){if(t=uc(t)){if(typeof Nm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=pf(e),Nm(t.stateNode,t.type,e))}}function dE(t){ka?ba?ba.push(t):ba=[t]:ka=t}function fE(){if(ka){var t=ka,e=ba;if(ba=ka=null,Wv(t),e)for(t=0;t<e.length;t++)Wv(e[t])}}function pE(t,e){return t(e)}function mE(){}var xp=!1;function gE(t,e,n){if(xp)return t(e,n);xp=!0;try{return pE(t,e,n)}finally{xp=!1,(ka!==null||ba!==null)&&(mE(),fE())}}function Ru(t,e){var n=t.stateNode;if(n===null)return null;var i=pf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Mm=!1;if(fr)try{var Bl={};Object.defineProperty(Bl,"passive",{get:function(){Mm=!0}}),window.addEventListener("test",Bl,Bl),window.removeEventListener("test",Bl,Bl)}catch{Mm=!1}function Sk(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var cu=!1,ad=null,ld=!1,Om=null,Ck={onError:function(t){cu=!0,ad=t}};function Ik(t,e,n,i,r,o,a,u,h){cu=!1,ad=null,Sk.apply(Ck,arguments)}function Ak(t,e,n,i,r,o,a,u,h){if(Ik.apply(this,arguments),cu){if(cu){var f=ad;cu=!1,ad=null}else throw Error(Y(198));ld||(ld=!0,Om=f)}}function Eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $v(t){if(Eo(t)!==t)throw Error(Y(188))}function kk(t){var e=t.alternate;if(!e){if(e=Eo(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return $v(r),t;if(o===i)return $v(r),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function _E(t){return t=kk(t),t!==null?vE(t):null}function vE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vE(t);if(e!==null)return e;t=t.sibling}return null}var wE=Rn.unstable_scheduleCallback,Gv=Rn.unstable_cancelCallback,bk=Rn.unstable_shouldYield,Rk=Rn.unstable_requestPaint,xt=Rn.unstable_now,Lk=Rn.unstable_getCurrentPriorityLevel,fy=Rn.unstable_ImmediatePriority,xE=Rn.unstable_UserBlockingPriority,ud=Rn.unstable_NormalPriority,Nk=Rn.unstable_LowPriority,TE=Rn.unstable_IdlePriority,cf=null,bi=null;function Mk(t){if(bi&&typeof bi.onCommitFiberRoot=="function")try{bi.onCommitFiberRoot(cf,t,void 0,(t.current.flags&128)===128)}catch{}}var pi=Math.clz32?Math.clz32:Vk,Ok=Math.log,Dk=Math.LN2;function Vk(t){return t>>>=0,t===0?32:31-(Ok(t)/Dk|0)|0}var lh=64,uh=4194304;function nu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=nu(u):(o&=a,o!==0&&(i=nu(o)))}else a=n&~r,a!==0?i=nu(a):o!==0&&(i=nu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-pi(e),r=1<<n,i|=t[n],e&=~r;return i}function jk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-pi(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=jk(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Dm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function EE(){var t=lh;return lh<<=1,!(lh&4194240)&&(lh=64),t}function Tp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ac(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pi(e),t[e]=n}function Bk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-pi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function py(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-pi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Qe=0;function PE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SE,my,CE,IE,AE,Vm=!1,ch=[],Yr=null,Jr=null,es=null,Lu=new Map,Nu=new Map,Ur=[],zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qv(t,e){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Lu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(e.pointerId)}}function zl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=uc(e),e!==null&&my(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Uk(t,e,n,i,r){switch(e){case"focusin":return Yr=zl(Yr,t,e,n,i,r),!0;case"dragenter":return Jr=zl(Jr,t,e,n,i,r),!0;case"mouseover":return es=zl(es,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Lu.set(o,zl(Lu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Nu.set(o,zl(Nu.get(o)||null,t,e,n,i,r)),!0}return!1}function kE(t){var e=Js(t.target);if(e!==null){var n=Eo(e);if(n!==null){if(e=n.tag,e===13){if(e=yE(n),e!==null){t.blockedOn=e,AE(t.priority,function(){CE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Lm=i,n.target.dispatchEvent(i),Lm=null}else return e=uc(n),e!==null&&my(e),t.blockedOn=n,!1;e.shift()}return!0}function Zv(t,e,n){Vh(t)&&n.delete(e)}function Hk(){Vm=!1,Yr!==null&&Vh(Yr)&&(Yr=null),Jr!==null&&Vh(Jr)&&(Jr=null),es!==null&&Vh(es)&&(es=null),Lu.forEach(Zv),Nu.forEach(Zv)}function Ul(t,e){t.blockedOn===e&&(t.blockedOn=null,Vm||(Vm=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,Hk)))}function Mu(t){function e(r){return Ul(r,t)}if(0<ch.length){Ul(ch[0],t);for(var n=1;n<ch.length;n++){var i=ch[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Yr!==null&&Ul(Yr,t),Jr!==null&&Ul(Jr,t),es!==null&&Ul(es,t),Lu.forEach(e),Nu.forEach(e),n=0;n<Ur.length;n++)i=Ur[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ur.length&&(n=Ur[0],n.blockedOn===null);)kE(n),n.blockedOn===null&&Ur.shift()}var Ra=Er.ReactCurrentBatchConfig,hd=!0;function Wk(t,e,n,i){var r=Qe,o=Ra.transition;Ra.transition=null;try{Qe=1,gy(t,e,n,i)}finally{Qe=r,Ra.transition=o}}function $k(t,e,n,i){var r=Qe,o=Ra.transition;Ra.transition=null;try{Qe=4,gy(t,e,n,i)}finally{Qe=r,Ra.transition=o}}function gy(t,e,n,i){if(hd){var r=jm(t,e,n,i);if(r===null)Lp(t,e,i,dd,n),qv(t,i);else if(Uk(r,t,e,n,i))i.stopPropagation();else if(qv(t,i),e&4&&-1<zk.indexOf(t)){for(;r!==null;){var o=uc(r);if(o!==null&&SE(o),o=jm(t,e,n,i),o===null&&Lp(t,e,i,dd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Lp(t,e,i,null,n)}}var dd=null;function jm(t,e,n,i){if(dd=null,t=dy(i),t=Js(t),t!==null)if(e=Eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return dd=t,null}function bE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lk()){case fy:return 1;case xE:return 4;case ud:case Nk:return 16;case TE:return 536870912;default:return 16}default:return 16}}var Zr=null,yy=null,jh=null;function RE(){if(jh)return jh;var t,e=yy,n=e.length,i,r="value"in Zr?Zr.value:Zr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return jh=r.slice(t,1<i?1-i:void 0)}function Fh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hh(){return!0}function Kv(){return!1}function On(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hh:Kv,this.isPropagationStopped=Kv,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hh)},persist:function(){},isPersistent:hh}),e}var rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_y=On(rl),lc=pt({},rl,{view:0,detail:0}),Gk=On(lc),Ep,Pp,Hl,hf=pt({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hl&&(Hl&&t.type==="mousemove"?(Ep=t.screenX-Hl.screenX,Pp=t.screenY-Hl.screenY):Pp=Ep=0,Hl=t),Ep)},movementY:function(t){return"movementY"in t?t.movementY:Pp}}),Qv=On(hf),qk=pt({},hf,{dataTransfer:0}),Zk=On(qk),Kk=pt({},lc,{relatedTarget:0}),Sp=On(Kk),Qk=pt({},rl,{animationName:0,elapsedTime:0,pseudoElement:0}),Xk=On(Qk),Yk=pt({},rl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Jk=On(Yk),eb=pt({},rl,{data:0}),Xv=On(eb),tb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ib={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ib[t])?!!e[t]:!1}function vy(){return rb}var sb=pt({},lc,{key:function(t){if(t.key){var e=tb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vy,charCode:function(t){return t.type==="keypress"?Fh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ob=On(sb),ab=pt({},hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yv=On(ab),lb=pt({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vy}),ub=On(lb),cb=pt({},rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),hb=On(cb),db=pt({},hf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fb=On(db),pb=[9,13,27,32],wy=fr&&"CompositionEvent"in window,hu=null;fr&&"documentMode"in document&&(hu=document.documentMode);var mb=fr&&"TextEvent"in window&&!hu,LE=fr&&(!wy||hu&&8<hu&&11>=hu),Jv=" ",e0=!1;function NE(t,e){switch(t){case"keyup":return pb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ME(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fa=!1;function gb(t,e){switch(t){case"compositionend":return ME(e);case"keypress":return e.which!==32?null:(e0=!0,Jv);case"textInput":return t=e.data,t===Jv&&e0?null:t;default:return null}}function yb(t,e){if(fa)return t==="compositionend"||!wy&&NE(t,e)?(t=RE(),jh=yy=Zr=null,fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LE&&e.locale!=="ko"?null:e.data;default:return null}}var _b={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_b[t.type]:e==="textarea"}function OE(t,e,n,i){dE(i),e=fd(e,"onChange"),0<e.length&&(n=new _y("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var du=null,Ou=null;function vb(t){GE(t,0)}function df(t){var e=ga(t);if(sE(e))return t}function wb(t,e){if(t==="change")return e}var DE=!1;if(fr){var Cp;if(fr){var Ip="oninput"in document;if(!Ip){var n0=document.createElement("div");n0.setAttribute("oninput","return;"),Ip=typeof n0.oninput=="function"}Cp=Ip}else Cp=!1;DE=Cp&&(!document.documentMode||9<document.documentMode)}function i0(){du&&(du.detachEvent("onpropertychange",VE),Ou=du=null)}function VE(t){if(t.propertyName==="value"&&df(Ou)){var e=[];OE(e,Ou,t,dy(t)),gE(vb,e)}}function xb(t,e,n){t==="focusin"?(i0(),du=e,Ou=n,du.attachEvent("onpropertychange",VE)):t==="focusout"&&i0()}function Tb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return df(Ou)}function Eb(t,e){if(t==="click")return df(e)}function Pb(t,e){if(t==="input"||t==="change")return df(e)}function Sb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gi=typeof Object.is=="function"?Object.is:Sb;function Du(t,e){if(gi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!wm.call(e,r)||!gi(t[r],e[r]))return!1}return!0}function r0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function s0(t,e){var n=r0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r0(n)}}function jE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FE(){for(var t=window,e=od();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=od(t.document)}return e}function xy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Cb(t){var e=FE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jE(n.ownerDocument.documentElement,n)){if(i!==null&&xy(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=s0(n,o);var a=s0(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ib=fr&&"documentMode"in document&&11>=document.documentMode,pa=null,Fm=null,fu=null,Bm=!1;function o0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bm||pa==null||pa!==od(i)||(i=pa,"selectionStart"in i&&xy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),fu&&Du(fu,i)||(fu=i,i=fd(Fm,"onSelect"),0<i.length&&(e=new _y("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=pa)))}function dh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ma={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},Ap={},BE={};fr&&(BE=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function ff(t){if(Ap[t])return Ap[t];if(!ma[t])return t;var e=ma[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BE)return Ap[t]=e[n];return t}var zE=ff("animationend"),UE=ff("animationiteration"),HE=ff("animationstart"),WE=ff("transitionend"),$E=new Map,a0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(t,e){$E.set(t,e),To(e,[t])}for(var kp=0;kp<a0.length;kp++){var bp=a0[kp],Ab=bp.toLowerCase(),kb=bp[0].toUpperCase()+bp.slice(1);Cs(Ab,"on"+kb)}Cs(zE,"onAnimationEnd");Cs(UE,"onAnimationIteration");Cs(HE,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(WE,"onTransitionEnd");Fa("onMouseEnter",["mouseout","mouseover"]);Fa("onMouseLeave",["mouseout","mouseover"]);Fa("onPointerEnter",["pointerout","pointerover"]);Fa("onPointerLeave",["pointerout","pointerover"]);To("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));To("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));To("onBeforeInput",["compositionend","keypress","textInput","paste"]);To("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));To("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));To("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bb=new Set("cancel close invalid load scroll toggle".split(" ").concat(iu));function l0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Ak(i,e,void 0,t),t.currentTarget=null}function GE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;l0(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;l0(r,u,f),o=h}}}if(ld)throw t=Om,ld=!1,Om=null,t}function it(t,e){var n=e[$m];n===void 0&&(n=e[$m]=new Set);var i=t+"__bubble";n.has(i)||(qE(e,t,2,!1),n.add(i))}function Rp(t,e,n){var i=0;e&&(i|=4),qE(n,t,i,e)}var fh="_reactListening"+Math.random().toString(36).slice(2);function Vu(t){if(!t[fh]){t[fh]=!0,eE.forEach(function(n){n!=="selectionchange"&&(bb.has(n)||Rp(n,!1,t),Rp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fh]||(e[fh]=!0,Rp("selectionchange",!1,e))}}function qE(t,e,n,i){switch(bE(e)){case 1:var r=Wk;break;case 4:r=$k;break;default:r=gy}n=r.bind(null,e,n,t),r=void 0,!Mm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Lp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Js(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}gE(function(){var f=o,m=dy(n),g=[];e:{var _=$E.get(t);if(_!==void 0){var T=_y,b=t;switch(t){case"keypress":if(Fh(n)===0)break e;case"keydown":case"keyup":T=ob;break;case"focusin":b="focus",T=Sp;break;case"focusout":b="blur",T=Sp;break;case"beforeblur":case"afterblur":T=Sp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Zk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=ub;break;case zE:case UE:case HE:T=Xk;break;case WE:T=hb;break;case"scroll":T=Gk;break;case"wheel":T=fb;break;case"copy":case"cut":case"paste":T=Jk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Yv}var A=(e&4)!==0,j=!A&&t==="scroll",k=A?_!==null?_+"Capture":null:_;A=[];for(var P=f,C;P!==null;){C=P;var B=C.stateNode;if(C.tag===5&&B!==null&&(C=B,k!==null&&(B=Ru(P,k),B!=null&&A.push(ju(P,B,C)))),j)break;P=P.return}0<A.length&&(_=new T(_,b,null,n,m),g.push({event:_,listeners:A}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&n!==Lm&&(b=n.relatedTarget||n.fromElement)&&(Js(b)||b[pr]))break e;if((T||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,T?(b=n.relatedTarget||n.toElement,T=f,b=b?Js(b):null,b!==null&&(j=Eo(b),b!==j||b.tag!==5&&b.tag!==6)&&(b=null)):(T=null,b=f),T!==b)){if(A=Qv,B="onMouseLeave",k="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(A=Yv,B="onPointerLeave",k="onPointerEnter",P="pointer"),j=T==null?_:ga(T),C=b==null?_:ga(b),_=new A(B,P+"leave",T,n,m),_.target=j,_.relatedTarget=C,B=null,Js(m)===f&&(A=new A(k,P+"enter",b,n,m),A.target=C,A.relatedTarget=j,B=A),j=B,T&&b)t:{for(A=T,k=b,P=0,C=A;C;C=oa(C))P++;for(C=0,B=k;B;B=oa(B))C++;for(;0<P-C;)A=oa(A),P--;for(;0<C-P;)k=oa(k),C--;for(;P--;){if(A===k||k!==null&&A===k.alternate)break t;A=oa(A),k=oa(k)}A=null}else A=null;T!==null&&u0(g,_,T,A,!1),b!==null&&j!==null&&u0(g,j,b,A,!0)}}e:{if(_=f?ga(f):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var q=wb;else if(t0(_))if(DE)q=Pb;else{q=Tb;var U=xb}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(q=Eb);if(q&&(q=q(t,f))){OE(g,q,n,m);break e}U&&U(t,_,f),t==="focusout"&&(U=_._wrapperState)&&U.controlled&&_.type==="number"&&Im(_,"number",_.value)}switch(U=f?ga(f):window,t){case"focusin":(t0(U)||U.contentEditable==="true")&&(pa=U,Fm=f,fu=null);break;case"focusout":fu=Fm=pa=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,o0(g,n,m);break;case"selectionchange":if(Ib)break;case"keydown":case"keyup":o0(g,n,m)}var R;if(wy)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else fa?NE(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(LE&&n.locale!=="ko"&&(fa||S!=="onCompositionStart"?S==="onCompositionEnd"&&fa&&(R=RE()):(Zr=m,yy="value"in Zr?Zr.value:Zr.textContent,fa=!0)),U=fd(f,S),0<U.length&&(S=new Xv(S,t,null,n,m),g.push({event:S,listeners:U}),R?S.data=R:(R=ME(n),R!==null&&(S.data=R)))),(R=mb?gb(t,n):yb(t,n))&&(f=fd(f,"onBeforeInput"),0<f.length&&(m=new Xv("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=R))}GE(g,e)})}function ju(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Ru(t,n),o!=null&&i.unshift(ju(t,o,r)),o=Ru(t,e),o!=null&&i.push(ju(t,o,r))),t=t.return}return i}function oa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function u0(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=Ru(n,o),h!=null&&a.unshift(ju(n,h,u))):r||(h=Ru(n,o),h!=null&&a.push(ju(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Rb=/\r\n?/g,Lb=/\u0000|\uFFFD/g;function c0(t){return(typeof t=="string"?t:""+t).replace(Rb,`
`).replace(Lb,"")}function ph(t,e,n){if(e=c0(e),c0(t)!==e&&n)throw Error(Y(425))}function pd(){}var zm=null,Um=null;function Hm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wm=typeof setTimeout=="function"?setTimeout:void 0,Nb=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,Mb=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(t){return h0.resolve(null).then(t).catch(Ob)}:Wm;function Ob(t){setTimeout(function(){throw t})}function Np(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Mu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Mu(e)}function ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function d0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sl=Math.random().toString(36).slice(2),ki="__reactFiber$"+sl,Fu="__reactProps$"+sl,pr="__reactContainer$"+sl,$m="__reactEvents$"+sl,Db="__reactListeners$"+sl,Vb="__reactHandles$"+sl;function Js(t){var e=t[ki];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[ki]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=d0(t);t!==null;){if(n=t[ki])return n;t=d0(t)}return e}t=n,n=t.parentNode}return null}function uc(t){return t=t[ki]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ga(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function pf(t){return t[Fu]||null}var Gm=[],ya=-1;function Is(t){return{current:t}}function ot(t){0>ya||(t.current=Gm[ya],Gm[ya]=null,ya--)}function tt(t,e){ya++,Gm[ya]=t.current,t.current=e}var gs={},tn=Is(gs),wn=Is(!1),ho=gs;function Ba(t,e){var n=t.type.contextTypes;if(!n)return gs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function xn(t){return t=t.childContextTypes,t!=null}function md(){ot(wn),ot(tn)}function f0(t,e,n){if(tn.current!==gs)throw Error(Y(168));tt(tn,e),tt(wn,n)}function ZE(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,xk(t)||"Unknown",r));return pt({},n,i)}function gd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gs,ho=tn.current,tt(tn,t),tt(wn,wn.current),!0}function p0(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=ZE(t,e,ho),i.__reactInternalMemoizedMergedChildContext=t,ot(wn),ot(tn),tt(tn,t)):ot(wn),tt(wn,n)}var ir=null,mf=!1,Mp=!1;function KE(t){ir===null?ir=[t]:ir.push(t)}function jb(t){mf=!0,KE(t)}function As(){if(!Mp&&ir!==null){Mp=!0;var t=0,e=Qe;try{var n=ir;for(Qe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ir=null,mf=!1}catch(r){throw ir!==null&&(ir=ir.slice(t+1)),wE(fy,As),r}finally{Qe=e,Mp=!1}}return null}var _a=[],va=0,yd=null,_d=0,Gn=[],qn=0,fo=null,rr=1,sr="";function Gs(t,e){_a[va++]=_d,_a[va++]=yd,yd=t,_d=e}function QE(t,e,n){Gn[qn++]=rr,Gn[qn++]=sr,Gn[qn++]=fo,fo=t;var i=rr;t=sr;var r=32-pi(i)-1;i&=~(1<<r),n+=1;var o=32-pi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,rr=1<<32-pi(e)+r|n<<r|i,sr=o+t}else rr=1<<o|n<<r|i,sr=t}function Ty(t){t.return!==null&&(Gs(t,1),QE(t,1,0))}function Ey(t){for(;t===yd;)yd=_a[--va],_a[va]=null,_d=_a[--va],_a[va]=null;for(;t===fo;)fo=Gn[--qn],Gn[qn]=null,sr=Gn[--qn],Gn[qn]=null,rr=Gn[--qn],Gn[qn]=null}var bn=null,kn=null,lt=!1,ui=null;function XE(t,e){var n=Qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function m0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,kn=ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fo!==null?{id:rr,overflow:sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,kn=null,!0):!1;default:return!1}}function qm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zm(t){if(lt){var e=kn;if(e){var n=e;if(!m0(t,e)){if(qm(t))throw Error(Y(418));e=ts(n.nextSibling);var i=bn;e&&m0(t,e)?XE(i,n):(t.flags=t.flags&-4097|2,lt=!1,bn=t)}}else{if(qm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,lt=!1,bn=t}}}function g0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function mh(t){if(t!==bn)return!1;if(!lt)return g0(t),lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hm(t.type,t.memoizedProps)),e&&(e=kn)){if(qm(t))throw YE(),Error(Y(418));for(;e;)XE(t,e),e=ts(e.nextSibling)}if(g0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kn=ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kn=null}}else kn=bn?ts(t.stateNode.nextSibling):null;return!0}function YE(){for(var t=kn;t;)t=ts(t.nextSibling)}function za(){kn=bn=null,lt=!1}function Py(t){ui===null?ui=[t]:ui.push(t)}var Fb=Er.ReactCurrentBatchConfig;function Wl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function gh(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function y0(t){var e=t._init;return e(t._payload)}function JE(t){function e(k,P){if(t){var C=k.deletions;C===null?(k.deletions=[P],k.flags|=16):C.push(P)}}function n(k,P){if(!t)return null;for(;P!==null;)e(k,P),P=P.sibling;return null}function i(k,P){for(k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function r(k,P){return k=ss(k,P),k.index=0,k.sibling=null,k}function o(k,P,C){return k.index=C,t?(C=k.alternate,C!==null?(C=C.index,C<P?(k.flags|=2,P):C):(k.flags|=2,P)):(k.flags|=1048576,P)}function a(k){return t&&k.alternate===null&&(k.flags|=2),k}function u(k,P,C,B){return P===null||P.tag!==6?(P=zp(C,k.mode,B),P.return=k,P):(P=r(P,C),P.return=k,P)}function h(k,P,C,B){var q=C.type;return q===da?m(k,P,C.props.children,B,C.key):P!==null&&(P.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Fr&&y0(q)===P.type)?(B=r(P,C.props),B.ref=Wl(k,P,C),B.return=k,B):(B=Gh(C.type,C.key,C.props,null,k.mode,B),B.ref=Wl(k,P,C),B.return=k,B)}function f(k,P,C,B){return P===null||P.tag!==4||P.stateNode.containerInfo!==C.containerInfo||P.stateNode.implementation!==C.implementation?(P=Up(C,k.mode,B),P.return=k,P):(P=r(P,C.children||[]),P.return=k,P)}function m(k,P,C,B,q){return P===null||P.tag!==7?(P=so(C,k.mode,B,q),P.return=k,P):(P=r(P,C),P.return=k,P)}function g(k,P,C){if(typeof P=="string"&&P!==""||typeof P=="number")return P=zp(""+P,k.mode,C),P.return=k,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case sh:return C=Gh(P.type,P.key,P.props,null,k.mode,C),C.ref=Wl(k,null,P),C.return=k,C;case ha:return P=Up(P,k.mode,C),P.return=k,P;case Fr:var B=P._init;return g(k,B(P._payload),C)}if(tu(P)||Fl(P))return P=so(P,k.mode,C,null),P.return=k,P;gh(k,P)}return null}function _(k,P,C,B){var q=P!==null?P.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return q!==null?null:u(k,P,""+C,B);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case sh:return C.key===q?h(k,P,C,B):null;case ha:return C.key===q?f(k,P,C,B):null;case Fr:return q=C._init,_(k,P,q(C._payload),B)}if(tu(C)||Fl(C))return q!==null?null:m(k,P,C,B,null);gh(k,C)}return null}function T(k,P,C,B,q){if(typeof B=="string"&&B!==""||typeof B=="number")return k=k.get(C)||null,u(P,k,""+B,q);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case sh:return k=k.get(B.key===null?C:B.key)||null,h(P,k,B,q);case ha:return k=k.get(B.key===null?C:B.key)||null,f(P,k,B,q);case Fr:var U=B._init;return T(k,P,C,U(B._payload),q)}if(tu(B)||Fl(B))return k=k.get(C)||null,m(P,k,B,q,null);gh(P,B)}return null}function b(k,P,C,B){for(var q=null,U=null,R=P,S=P=0,N=null;R!==null&&S<C.length;S++){R.index>S?(N=R,R=null):N=R.sibling;var D=_(k,R,C[S],B);if(D===null){R===null&&(R=N);break}t&&R&&D.alternate===null&&e(k,R),P=o(D,P,S),U===null?q=D:U.sibling=D,U=D,R=N}if(S===C.length)return n(k,R),lt&&Gs(k,S),q;if(R===null){for(;S<C.length;S++)R=g(k,C[S],B),R!==null&&(P=o(R,P,S),U===null?q=R:U.sibling=R,U=R);return lt&&Gs(k,S),q}for(R=i(k,R);S<C.length;S++)N=T(R,k,S,C[S],B),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?S:N.key),P=o(N,P,S),U===null?q=N:U.sibling=N,U=N);return t&&R.forEach(function(M){return e(k,M)}),lt&&Gs(k,S),q}function A(k,P,C,B){var q=Fl(C);if(typeof q!="function")throw Error(Y(150));if(C=q.call(C),C==null)throw Error(Y(151));for(var U=q=null,R=P,S=P=0,N=null,D=C.next();R!==null&&!D.done;S++,D=C.next()){R.index>S?(N=R,R=null):N=R.sibling;var M=_(k,R,D.value,B);if(M===null){R===null&&(R=N);break}t&&R&&M.alternate===null&&e(k,R),P=o(M,P,S),U===null?q=M:U.sibling=M,U=M,R=N}if(D.done)return n(k,R),lt&&Gs(k,S),q;if(R===null){for(;!D.done;S++,D=C.next())D=g(k,D.value,B),D!==null&&(P=o(D,P,S),U===null?q=D:U.sibling=D,U=D);return lt&&Gs(k,S),q}for(R=i(k,R);!D.done;S++,D=C.next())D=T(R,k,S,D.value,B),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?S:D.key),P=o(D,P,S),U===null?q=D:U.sibling=D,U=D);return t&&R.forEach(function(z){return e(k,z)}),lt&&Gs(k,S),q}function j(k,P,C,B){if(typeof C=="object"&&C!==null&&C.type===da&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case sh:e:{for(var q=C.key,U=P;U!==null;){if(U.key===q){if(q=C.type,q===da){if(U.tag===7){n(k,U.sibling),P=r(U,C.props.children),P.return=k,k=P;break e}}else if(U.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Fr&&y0(q)===U.type){n(k,U.sibling),P=r(U,C.props),P.ref=Wl(k,U,C),P.return=k,k=P;break e}n(k,U);break}else e(k,U);U=U.sibling}C.type===da?(P=so(C.props.children,k.mode,B,C.key),P.return=k,k=P):(B=Gh(C.type,C.key,C.props,null,k.mode,B),B.ref=Wl(k,P,C),B.return=k,k=B)}return a(k);case ha:e:{for(U=C.key;P!==null;){if(P.key===U)if(P.tag===4&&P.stateNode.containerInfo===C.containerInfo&&P.stateNode.implementation===C.implementation){n(k,P.sibling),P=r(P,C.children||[]),P.return=k,k=P;break e}else{n(k,P);break}else e(k,P);P=P.sibling}P=Up(C,k.mode,B),P.return=k,k=P}return a(k);case Fr:return U=C._init,j(k,P,U(C._payload),B)}if(tu(C))return b(k,P,C,B);if(Fl(C))return A(k,P,C,B);gh(k,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,P!==null&&P.tag===6?(n(k,P.sibling),P=r(P,C),P.return=k,k=P):(n(k,P),P=zp(C,k.mode,B),P.return=k,k=P),a(k)):n(k,P)}return j}var Ua=JE(!0),e1=JE(!1),vd=Is(null),wd=null,wa=null,Sy=null;function Cy(){Sy=wa=wd=null}function Iy(t){var e=vd.current;ot(vd),t._currentValue=e}function Km(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function La(t,e){wd=t,Sy=wa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vn=!0),t.firstContext=null)}function Yn(t){var e=t._currentValue;if(Sy!==t)if(t={context:t,memoizedValue:e,next:null},wa===null){if(wd===null)throw Error(Y(308));wa=t,wd.dependencies={lanes:0,firstContext:t}}else wa=wa.next=t;return e}var eo=null;function Ay(t){eo===null?eo=[t]:eo.push(t)}function t1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ay(e)):(n.next=r.next,r.next=n),e.interleaved=n,mr(t,i)}function mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Br=!1;function ky(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ns(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,He&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,mr(t,n)}return r=i.interleaved,r===null?(e.next=e,Ay(i)):(e.next=r.next,r.next=e),i.interleaved=e,mr(t,n)}function Bh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,py(t,n)}}function _0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xd(t,e,n,i){var r=t.updateQueue;Br=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var g=r.baseState;a=0,m=f=h=null,u=o;do{var _=u.lane,T=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var b=t,A=u;switch(_=e,T=n,A.tag){case 1:if(b=A.payload,typeof b=="function"){g=b.call(T,g,_);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=A.payload,_=typeof b=="function"?b.call(T,g,_):b,_==null)break e;g=pt({},g,_);break e;case 2:Br=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else T={eventTime:T,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=T,h=g):m=m.next=T,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(h=g),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);mo|=a,t.lanes=a,t.memoizedState=g}}function v0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var cc={},Ri=Is(cc),Bu=Is(cc),zu=Is(cc);function to(t){if(t===cc)throw Error(Y(174));return t}function by(t,e){switch(tt(zu,e),tt(Bu,t),tt(Ri,cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:km(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=km(e,t)}ot(Ri),tt(Ri,e)}function Ha(){ot(Ri),ot(Bu),ot(zu)}function i1(t){to(zu.current);var e=to(Ri.current),n=km(e,t.type);e!==n&&(tt(Bu,t),tt(Ri,n))}function Ry(t){Bu.current===t&&(ot(Ri),ot(Bu))}var ct=Is(0);function Td(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Op=[];function Ly(){for(var t=0;t<Op.length;t++)Op[t]._workInProgressVersionPrimary=null;Op.length=0}var zh=Er.ReactCurrentDispatcher,Dp=Er.ReactCurrentBatchConfig,po=0,dt=null,Rt=null,Ft=null,Ed=!1,pu=!1,Uu=0,Bb=0;function Zt(){throw Error(Y(321))}function Ny(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gi(t[n],e[n]))return!1;return!0}function My(t,e,n,i,r,o){if(po=o,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zh.current=t===null||t.memoizedState===null?Wb:$b,t=n(i,r),pu){o=0;do{if(pu=!1,Uu=0,25<=o)throw Error(Y(301));o+=1,Ft=Rt=null,e.updateQueue=null,zh.current=Gb,t=n(i,r)}while(pu)}if(zh.current=Pd,e=Rt!==null&&Rt.next!==null,po=0,Ft=Rt=dt=null,Ed=!1,e)throw Error(Y(300));return t}function Oy(){var t=Uu!==0;return Uu=0,t}function Ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?dt.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function Jn(){if(Rt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Ft===null?dt.memoizedState:Ft.next;if(e!==null)Ft=e,Rt=t;else{if(t===null)throw Error(Y(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ft===null?dt.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function Hu(t,e){return typeof e=="function"?e(t):e}function Vp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=Rt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((po&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=g,a=i):h=h.next=g,dt.lanes|=m,mo|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,gi(i,e.memoizedState)||(vn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,dt.lanes|=o,mo|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jp(t){var e=Jn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);gi(o,e.memoizedState)||(vn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function r1(){}function s1(t,e){var n=dt,i=Jn(),r=e(),o=!gi(i.memoizedState,r);if(o&&(i.memoizedState=r,vn=!0),i=i.queue,Dy(l1.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,Wu(9,a1.bind(null,n,i,r,e),void 0,null),Bt===null)throw Error(Y(349));po&30||o1(n,e,r)}return r}function o1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function a1(t,e,n,i){e.value=n,e.getSnapshot=i,u1(e)&&c1(t)}function l1(t,e,n){return n(function(){u1(e)&&c1(t)})}function u1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gi(t,n)}catch{return!0}}function c1(t){var e=mr(t,1);e!==null&&mi(e,t,1,-1)}function w0(t){var e=Ci();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:t},e.queue=t,t=t.dispatch=Hb.bind(null,dt,t),[e.memoizedState,t]}function Wu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function h1(){return Jn().memoizedState}function Uh(t,e,n,i){var r=Ci();dt.flags|=t,r.memoizedState=Wu(1|e,n,void 0,i===void 0?null:i)}function gf(t,e,n,i){var r=Jn();i=i===void 0?null:i;var o=void 0;if(Rt!==null){var a=Rt.memoizedState;if(o=a.destroy,i!==null&&Ny(i,a.deps)){r.memoizedState=Wu(e,n,o,i);return}}dt.flags|=t,r.memoizedState=Wu(1|e,n,o,i)}function x0(t,e){return Uh(8390656,8,t,e)}function Dy(t,e){return gf(2048,8,t,e)}function d1(t,e){return gf(4,2,t,e)}function f1(t,e){return gf(4,4,t,e)}function p1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function m1(t,e,n){return n=n!=null?n.concat([t]):null,gf(4,4,p1.bind(null,e,t),n)}function Vy(){}function g1(t,e){var n=Jn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ny(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function y1(t,e){var n=Jn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ny(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function _1(t,e,n){return po&21?(gi(n,e)||(n=EE(),dt.lanes|=n,mo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vn=!0),t.memoizedState=n)}function zb(t,e){var n=Qe;Qe=n!==0&&4>n?n:4,t(!0);var i=Dp.transition;Dp.transition={};try{t(!1),e()}finally{Qe=n,Dp.transition=i}}function v1(){return Jn().memoizedState}function Ub(t,e,n){var i=rs(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},w1(t))x1(e,n);else if(n=t1(t,e,n,i),n!==null){var r=un();mi(n,t,i,r),T1(n,e,i)}}function Hb(t,e,n){var i=rs(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(w1(t))x1(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,gi(u,a)){var h=e.interleaved;h===null?(r.next=r,Ay(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=t1(t,e,r,i),n!==null&&(r=un(),mi(n,t,i,r),T1(n,e,i))}}function w1(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function x1(t,e){pu=Ed=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function T1(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,py(t,n)}}var Pd={readContext:Yn,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useInsertionEffect:Zt,useLayoutEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useMutableSource:Zt,useSyncExternalStore:Zt,useId:Zt,unstable_isNewReconciler:!1},Wb={readContext:Yn,useCallback:function(t,e){return Ci().memoizedState=[t,e===void 0?null:e],t},useContext:Yn,useEffect:x0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uh(4194308,4,p1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uh(4,2,t,e)},useMemo:function(t,e){var n=Ci();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ci();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ub.bind(null,dt,t),[i.memoizedState,t]},useRef:function(t){var e=Ci();return t={current:t},e.memoizedState=t},useState:w0,useDebugValue:Vy,useDeferredValue:function(t){return Ci().memoizedState=t},useTransition:function(){var t=w0(!1),e=t[0];return t=zb.bind(null,t[1]),Ci().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=dt,r=Ci();if(lt){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Bt===null)throw Error(Y(349));po&30||o1(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,x0(l1.bind(null,i,o,t),[t]),i.flags|=2048,Wu(9,a1.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Ci(),e=Bt.identifierPrefix;if(lt){var n=sr,i=rr;n=(i&~(1<<32-pi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Uu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Bb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$b={readContext:Yn,useCallback:g1,useContext:Yn,useEffect:Dy,useImperativeHandle:m1,useInsertionEffect:d1,useLayoutEffect:f1,useMemo:y1,useReducer:Vp,useRef:h1,useState:function(){return Vp(Hu)},useDebugValue:Vy,useDeferredValue:function(t){var e=Jn();return _1(e,Rt.memoizedState,t)},useTransition:function(){var t=Vp(Hu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:r1,useSyncExternalStore:s1,useId:v1,unstable_isNewReconciler:!1},Gb={readContext:Yn,useCallback:g1,useContext:Yn,useEffect:Dy,useImperativeHandle:m1,useInsertionEffect:d1,useLayoutEffect:f1,useMemo:y1,useReducer:jp,useRef:h1,useState:function(){return jp(Hu)},useDebugValue:Vy,useDeferredValue:function(t){var e=Jn();return Rt===null?e.memoizedState=t:_1(e,Rt.memoizedState,t)},useTransition:function(){var t=jp(Hu)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:r1,useSyncExternalStore:s1,useId:v1,unstable_isNewReconciler:!1};function ai(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yf={isMounted:function(t){return(t=t._reactInternals)?Eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=un(),r=rs(t),o=ur(i,r);o.payload=e,n!=null&&(o.callback=n),e=ns(t,o,r),e!==null&&(mi(e,t,r,i),Bh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=un(),r=rs(t),o=ur(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ns(t,o,r),e!==null&&(mi(e,t,r,i),Bh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),i=rs(t),r=ur(n,i);r.tag=2,e!=null&&(r.callback=e),e=ns(t,r,i),e!==null&&(mi(e,t,i,n),Bh(e,t,i))}};function T0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Du(n,i)||!Du(r,o):!0}function E1(t,e,n){var i=!1,r=gs,o=e.contextType;return typeof o=="object"&&o!==null?o=Yn(o):(r=xn(e)?ho:tn.current,i=e.contextTypes,o=(i=i!=null)?Ba(t,r):gs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function E0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&yf.enqueueReplaceState(e,e.state,null)}function Xm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},ky(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Yn(o):(o=xn(e)?ho:tn.current,r.context=Ba(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Qm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&yf.enqueueReplaceState(r,r.state,null),xd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Wa(t,e){try{var n="",i=e;do n+=wk(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Fp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ym(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qb=typeof WeakMap=="function"?WeakMap:Map;function P1(t,e,n){n=ur(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Cd||(Cd=!0,lg=i),Ym(t,e)},n}function S1(t,e,n){n=ur(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Ym(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ym(t,e),typeof i!="function"&&(is===null?is=new Set([this]):is.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function P0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new qb;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=aR.bind(null,t,e,n),e.then(t,t))}function S0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function C0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ur(-1,1),e.tag=2,ns(n,e,1))),n.lanes|=1),t)}var Zb=Er.ReactCurrentOwner,vn=!1;function ln(t,e,n,i){e.child=t===null?e1(e,null,n,i):Ua(e,t.child,n,i)}function I0(t,e,n,i,r){n=n.render;var o=e.ref;return La(e,r),i=My(t,e,n,i,o,r),n=Oy(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gr(t,e,r)):(lt&&n&&Ty(e),e.flags|=1,ln(t,e,i,r),e.child)}function A0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!$y(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,C1(t,e,o,i,r)):(t=Gh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Du,n(a,i)&&t.ref===e.ref)return gr(t,e,r)}return e.flags|=1,t=ss(o,i),t.ref=e.ref,t.return=e,e.child=t}function C1(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Du(o,i)&&t.ref===e.ref)if(vn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(vn=!0);else return e.lanes=t.lanes,gr(t,e,r)}return Jm(t,e,n,i,r)}function I1(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Ta,In),In|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(Ta,In),In|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,tt(Ta,In),In|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,tt(Ta,In),In|=i;return ln(t,e,r,n),e.child}function A1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jm(t,e,n,i,r){var o=xn(n)?ho:tn.current;return o=Ba(e,o),La(e,r),n=My(t,e,n,i,o,r),i=Oy(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gr(t,e,r)):(lt&&i&&Ty(e),e.flags|=1,ln(t,e,n,r),e.child)}function k0(t,e,n,i,r){if(xn(n)){var o=!0;gd(e)}else o=!1;if(La(e,r),e.stateNode===null)Hh(t,e),E1(e,n,i),Xm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Yn(f):(f=xn(n)?ho:tn.current,f=Ba(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&E0(e,a,i,f),Br=!1;var _=e.memoizedState;a.state=_,xd(e,i,a,r),h=e.memoizedState,u!==i||_!==h||wn.current||Br?(typeof m=="function"&&(Qm(e,n,m,i),h=e.memoizedState),(u=Br||T0(e,n,u,i,_,h,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,n1(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ai(e.type,u),a.props=f,g=e.pendingProps,_=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Yn(h):(h=xn(n)?ho:tn.current,h=Ba(e,h));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==h)&&E0(e,a,i,h),Br=!1,_=e.memoizedState,a.state=_,xd(e,i,a,r);var b=e.memoizedState;u!==g||_!==b||wn.current||Br?(typeof T=="function"&&(Qm(e,n,T,i),b=e.memoizedState),(f=Br||T0(e,n,f,i,_,b,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,b,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,b,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),a.props=i,a.state=b,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return eg(t,e,n,i,o,r)}function eg(t,e,n,i,r,o){A1(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&p0(e,n,!1),gr(t,e,o);i=e.stateNode,Zb.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ua(e,t.child,null,o),e.child=Ua(e,null,u,o)):ln(t,e,u,o),e.memoizedState=i.state,r&&p0(e,n,!0),e.child}function k1(t){var e=t.stateNode;e.pendingContext?f0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f0(t,e.context,!1),by(t,e.containerInfo)}function b0(t,e,n,i,r){return za(),Py(r),e.flags|=256,ln(t,e,n,i),e.child}var tg={dehydrated:null,treeContext:null,retryLane:0};function ng(t){return{baseLanes:t,cachePool:null,transitions:null}}function b1(t,e,n){var i=e.pendingProps,r=ct.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),tt(ct,r&1),t===null)return Zm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=wf(a,i,0,null),t=so(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ng(n),e.memoizedState=tg,t):jy(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Kb(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=ss(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=ss(u,o):(o=so(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?ng(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=tg,i}return o=t.child,t=o.sibling,i=ss(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function jy(t,e){return e=wf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yh(t,e,n,i){return i!==null&&Py(i),Ua(e,t.child,null,n),t=jy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Kb(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Fp(Error(Y(422))),yh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=wf({mode:"visible",children:i.children},r,0,null),o=so(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ua(e,t.child,null,a),e.child.memoizedState=ng(a),e.memoizedState=tg,o);if(!(e.mode&1))return yh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(Y(419)),i=Fp(o,i,void 0),yh(t,e,a,i)}if(u=(a&t.childLanes)!==0,vn||u){if(i=Bt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,mr(t,r),mi(i,t,r,-1))}return Wy(),i=Fp(Error(Y(421))),yh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=lR.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,kn=ts(r.nextSibling),bn=e,lt=!0,ui=null,t!==null&&(Gn[qn++]=rr,Gn[qn++]=sr,Gn[qn++]=fo,rr=t.id,sr=t.overflow,fo=e),e=jy(e,i.children),e.flags|=4096,e)}function R0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Km(t.return,e,n)}function Bp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function R1(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(ln(t,e,i.children,n),i=ct.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&R0(t,n,e);else if(t.tag===19)R0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(tt(ct,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Td(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Bp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Td(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Bp(e,!0,n,null,o);break;case"together":Bp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Qb(t,e,n){switch(e.tag){case 3:k1(e),za();break;case 5:i1(e);break;case 1:xn(e.type)&&gd(e);break;case 4:by(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;tt(vd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(tt(ct,ct.current&1),e.flags|=128,null):n&e.child.childLanes?b1(t,e,n):(tt(ct,ct.current&1),t=gr(t,e,n),t!==null?t.sibling:null);tt(ct,ct.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return R1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),tt(ct,ct.current),i)break;return null;case 22:case 23:return e.lanes=0,I1(t,e,n)}return gr(t,e,n)}var L1,ig,N1,M1;L1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ig=function(){};N1=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,to(Ri.current);var o=null;switch(n){case"input":r=Sm(t,r),i=Sm(t,i),o=[];break;case"select":r=pt({},r,{value:void 0}),i=pt({},i,{value:void 0}),o=[];break;case"textarea":r=Am(t,r),i=Am(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=pd)}bm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ku.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ku.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&it("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};M1=function(t,e,n,i){n!==i&&(e.flags|=4)};function $l(t,e){if(!lt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Xb(t,e,n){var i=e.pendingProps;switch(Ey(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return xn(e.type)&&md(),Kt(e),null;case 3:return i=e.stateNode,Ha(),ot(wn),ot(tn),Ly(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(mh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ui!==null&&(hg(ui),ui=null))),ig(t,e),Kt(e),null;case 5:Ry(e);var r=to(zu.current);if(n=e.type,t!==null&&e.stateNode!=null)N1(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Kt(e),null}if(t=to(Ri.current),mh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ki]=e,i[Fu]=o,t=(e.mode&1)!==0,n){case"dialog":it("cancel",i),it("close",i);break;case"iframe":case"object":case"embed":it("load",i);break;case"video":case"audio":for(r=0;r<iu.length;r++)it(iu[r],i);break;case"source":it("error",i);break;case"img":case"image":case"link":it("error",i),it("load",i);break;case"details":it("toggle",i);break;case"input":Bv(i,o),it("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},it("invalid",i);break;case"textarea":Uv(i,o),it("invalid",i)}bm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&ph(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&ph(i.textContent,u,t),r=["children",""+u]):ku.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&it("scroll",i)}switch(n){case"input":oh(i),zv(i,o,!0);break;case"textarea":oh(i),Hv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=pd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[ki]=e,t[Fu]=i,L1(t,e,!1,!1),e.stateNode=t;e:{switch(a=Rm(n,i),n){case"dialog":it("cancel",t),it("close",t),r=i;break;case"iframe":case"object":case"embed":it("load",t),r=i;break;case"video":case"audio":for(r=0;r<iu.length;r++)it(iu[r],t);r=i;break;case"source":it("error",t),r=i;break;case"img":case"image":case"link":it("error",t),it("load",t),r=i;break;case"details":it("toggle",t),r=i;break;case"input":Bv(t,i),r=Sm(t,i),it("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=pt({},i,{value:void 0}),it("invalid",t);break;case"textarea":Uv(t,i),r=Am(t,i),it("invalid",t);break;default:r=i}bm(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?hE(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&uE(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&bu(t,h):typeof h=="number"&&bu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ku.hasOwnProperty(o)?h!=null&&o==="onScroll"&&it("scroll",t):h!=null&&ly(t,o,h,a))}switch(n){case"input":oh(t),zv(t,i,!1);break;case"textarea":oh(t),Hv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ms(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Aa(t,!!i.multiple,o,!1):i.defaultValue!=null&&Aa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=pd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)M1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=to(zu.current),to(Ri.current),mh(e)){if(i=e.stateNode,n=e.memoizedProps,i[ki]=e,(o=i.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:ph(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ph(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ki]=e,e.stateNode=i}return Kt(e),null;case 13:if(ot(ct),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(lt&&kn!==null&&e.mode&1&&!(e.flags&128))YE(),za(),e.flags|=98560,o=!1;else if(o=mh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[ki]=e}else za(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),o=!1}else ui!==null&&(hg(ui),ui=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Nt===0&&(Nt=3):Wy())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return Ha(),ig(t,e),t===null&&Vu(e.stateNode.containerInfo),Kt(e),null;case 10:return Iy(e.type._context),Kt(e),null;case 17:return xn(e.type)&&md(),Kt(e),null;case 19:if(ot(ct),o=e.memoizedState,o===null)return Kt(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)$l(o,!1);else{if(Nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Td(t),a!==null){for(e.flags|=128,$l(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tt(ct,ct.current&1|2),e.child}t=t.sibling}o.tail!==null&&xt()>$a&&(e.flags|=128,i=!0,$l(o,!1),e.lanes=4194304)}else{if(!i)if(t=Td(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$l(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!lt)return Kt(e),null}else 2*xt()-o.renderingStartTime>$a&&n!==1073741824&&(e.flags|=128,i=!0,$l(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=xt(),e.sibling=null,n=ct.current,tt(ct,i?n&1|2:n&1),e):(Kt(e),null);case 22:case 23:return Hy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?In&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Yb(t,e){switch(Ey(e),e.tag){case 1:return xn(e.type)&&md(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ha(),ot(wn),ot(tn),Ly(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ry(e),null;case 13:if(ot(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));za()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(ct),null;case 4:return Ha(),null;case 10:return Iy(e.type._context),null;case 22:case 23:return Hy(),null;case 24:return null;default:return null}}var _h=!1,Jt=!1,Jb=typeof WeakSet=="function"?WeakSet:Set,ae=null;function xa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){_t(t,e,i)}else n.current=null}function rg(t,e,n){try{n()}catch(i){_t(t,e,i)}}var L0=!1;function eR(t,e){if(zm=hd,t=FE(),xy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,g=t,_=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(h=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)_=g,g=T;for(;;){if(g===t)break t;if(_===n&&++f===r&&(u=a),_===o&&++m===i&&(h=a),(T=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=T}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Um={focusedElem:t,selectionRange:n},hd=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var A=b.memoizedProps,j=b.memoizedState,k=e.stateNode,P=k.getSnapshotBeforeUpdate(e.elementType===e.type?A:ai(e.type,A),j);k.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(B){_t(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return b=L0,L0=!1,b}function mu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&rg(e,n,o)}r=r.next}while(r!==i)}}function _f(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function sg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function O1(t){var e=t.alternate;e!==null&&(t.alternate=null,O1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ki],delete e[Fu],delete e[$m],delete e[Db],delete e[Vb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function D1(t){return t.tag===5||t.tag===3||t.tag===4}function N0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||D1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function og(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pd));else if(i!==4&&(t=t.child,t!==null))for(og(t,e,n),t=t.sibling;t!==null;)og(t,e,n),t=t.sibling}function ag(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}var zt=null,li=!1;function Or(t,e,n){for(n=n.child;n!==null;)V1(t,e,n),n=n.sibling}function V1(t,e,n){if(bi&&typeof bi.onCommitFiberUnmount=="function")try{bi.onCommitFiberUnmount(cf,n)}catch{}switch(n.tag){case 5:Jt||xa(n,e);case 6:var i=zt,r=li;zt=null,Or(t,e,n),zt=i,li=r,zt!==null&&(li?(t=zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(li?(t=zt,n=n.stateNode,t.nodeType===8?Np(t.parentNode,n):t.nodeType===1&&Np(t,n),Mu(t)):Np(zt,n.stateNode));break;case 4:i=zt,r=li,zt=n.stateNode.containerInfo,li=!0,Or(t,e,n),zt=i,li=r;break;case 0:case 11:case 14:case 15:if(!Jt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&rg(n,e,a),r=r.next}while(r!==i)}Or(t,e,n);break;case 1:if(!Jt&&(xa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){_t(n,e,u)}Or(t,e,n);break;case 21:Or(t,e,n);break;case 22:n.mode&1?(Jt=(i=Jt)||n.memoizedState!==null,Or(t,e,n),Jt=i):Or(t,e,n);break;default:Or(t,e,n)}}function M0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Jb),e.forEach(function(i){var r=uR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function oi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:zt=u.stateNode,li=!1;break e;case 3:zt=u.stateNode.containerInfo,li=!0;break e;case 4:zt=u.stateNode.containerInfo,li=!0;break e}u=u.return}if(zt===null)throw Error(Y(160));V1(o,a,r),zt=null,li=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){_t(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)j1(e,t),e=e.sibling}function j1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oi(e,t),Si(t),i&4){try{mu(3,t,t.return),_f(3,t)}catch(A){_t(t,t.return,A)}try{mu(5,t,t.return)}catch(A){_t(t,t.return,A)}}break;case 1:oi(e,t),Si(t),i&512&&n!==null&&xa(n,n.return);break;case 5:if(oi(e,t),Si(t),i&512&&n!==null&&xa(n,n.return),t.flags&32){var r=t.stateNode;try{bu(r,"")}catch(A){_t(t,t.return,A)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&oE(r,o),Rm(u,a);var f=Rm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],g=h[a+1];m==="style"?hE(r,g):m==="dangerouslySetInnerHTML"?uE(r,g):m==="children"?bu(r,g):ly(r,m,g,f)}switch(u){case"input":Cm(r,o);break;case"textarea":aE(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Aa(r,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?Aa(r,!!o.multiple,o.defaultValue,!0):Aa(r,!!o.multiple,o.multiple?[]:"",!1))}r[Fu]=o}catch(A){_t(t,t.return,A)}}break;case 6:if(oi(e,t),Si(t),i&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(A){_t(t,t.return,A)}}break;case 3:if(oi(e,t),Si(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Mu(e.containerInfo)}catch(A){_t(t,t.return,A)}break;case 4:oi(e,t),Si(t);break;case 13:oi(e,t),Si(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(zy=xt())),i&4&&M0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(f=Jt)||m,oi(e,t),Jt=f):oi(e,t),Si(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(ae=t,m=t.child;m!==null;){for(g=ae=m;ae!==null;){switch(_=ae,T=_.child,_.tag){case 0:case 11:case 14:case 15:mu(4,_,_.return);break;case 1:xa(_,_.return);var b=_.stateNode;if(typeof b.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(A){_t(i,n,A)}}break;case 5:xa(_,_.return);break;case 22:if(_.memoizedState!==null){D0(g);continue}}T!==null?(T.return=_,ae=T):D0(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,h=g.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=cE("display",a))}catch(A){_t(t,t.return,A)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(A){_t(t,t.return,A)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:oi(e,t),Si(t),i&4&&M0(t);break;case 21:break;default:oi(e,t),Si(t)}}function Si(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(D1(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(bu(r,""),i.flags&=-33);var o=N0(t);ag(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=N0(t);og(t,u,a);break;default:throw Error(Y(161))}}catch(h){_t(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tR(t,e,n){ae=t,F1(t)}function F1(t,e,n){for(var i=(t.mode&1)!==0;ae!==null;){var r=ae,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||_h;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Jt;u=_h;var f=Jt;if(_h=a,(Jt=h)&&!f)for(ae=r;ae!==null;)a=ae,h=a.child,a.tag===22&&a.memoizedState!==null?V0(r):h!==null?(h.return=a,ae=h):V0(r);for(;o!==null;)ae=o,F1(o),o=o.sibling;ae=r,_h=u,Jt=f}O0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ae=o):O0(t)}}function O0(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||_f(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Jt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ai(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&v0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}v0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Mu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Jt||e.flags&512&&sg(e)}catch(_){_t(e,e.return,_)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function D0(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function V0(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_f(4,e)}catch(h){_t(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){_t(e,r,h)}}var o=e.return;try{sg(e)}catch(h){_t(e,o,h)}break;case 5:var a=e.return;try{sg(e)}catch(h){_t(e,a,h)}}}catch(h){_t(e,e.return,h)}if(e===t){ae=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ae=u;break}ae=e.return}}var nR=Math.ceil,Sd=Er.ReactCurrentDispatcher,Fy=Er.ReactCurrentOwner,Xn=Er.ReactCurrentBatchConfig,He=0,Bt=null,kt=null,Wt=0,In=0,Ta=Is(0),Nt=0,$u=null,mo=0,vf=0,By=0,gu=null,_n=null,zy=0,$a=1/0,nr=null,Cd=!1,lg=null,is=null,vh=!1,Kr=null,Id=0,yu=0,ug=null,Wh=-1,$h=0;function un(){return He&6?xt():Wh!==-1?Wh:Wh=xt()}function rs(t){return t.mode&1?He&2&&Wt!==0?Wt&-Wt:Fb.transition!==null?($h===0&&($h=EE()),$h):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:bE(t.type)),t):1}function mi(t,e,n,i){if(50<yu)throw yu=0,ug=null,Error(Y(185));ac(t,n,i),(!(He&2)||t!==Bt)&&(t===Bt&&(!(He&2)&&(vf|=n),Nt===4&&Hr(t,Wt)),Tn(t,i),n===1&&He===0&&!(e.mode&1)&&($a=xt()+500,mf&&As()))}function Tn(t,e){var n=t.callbackNode;Fk(t,e);var i=cd(t,t===Bt?Wt:0);if(i===0)n!==null&&Gv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Gv(n),e===1)t.tag===0?jb(j0.bind(null,t)):KE(j0.bind(null,t)),Mb(function(){!(He&6)&&As()}),n=null;else{switch(PE(i)){case 1:n=fy;break;case 4:n=xE;break;case 16:n=ud;break;case 536870912:n=TE;break;default:n=ud}n=q1(n,B1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function B1(t,e){if(Wh=-1,$h=0,He&6)throw Error(Y(327));var n=t.callbackNode;if(Na()&&t.callbackNode!==n)return null;var i=cd(t,t===Bt?Wt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ad(t,i);else{e=i;var r=He;He|=2;var o=U1();(Bt!==t||Wt!==e)&&(nr=null,$a=xt()+500,ro(t,e));do try{sR();break}catch(u){z1(t,u)}while(!0);Cy(),Sd.current=o,He=r,kt!==null?e=0:(Bt=null,Wt=0,e=Nt)}if(e!==0){if(e===2&&(r=Dm(t),r!==0&&(i=r,e=cg(t,r))),e===1)throw n=$u,ro(t,0),Hr(t,i),Tn(t,xt()),n;if(e===6)Hr(t,i);else{if(r=t.current.alternate,!(i&30)&&!iR(r)&&(e=Ad(t,i),e===2&&(o=Dm(t),o!==0&&(i=o,e=cg(t,o))),e===1))throw n=$u,ro(t,0),Hr(t,i),Tn(t,xt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:qs(t,_n,nr);break;case 3:if(Hr(t,i),(i&130023424)===i&&(e=zy+500-xt(),10<e)){if(cd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){un(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Wm(qs.bind(null,t,_n,nr),e);break}qs(t,_n,nr);break;case 4:if(Hr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-pi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=xt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*nR(i/1960))-i,10<i){t.timeoutHandle=Wm(qs.bind(null,t,_n,nr),i);break}qs(t,_n,nr);break;case 5:qs(t,_n,nr);break;default:throw Error(Y(329))}}}return Tn(t,xt()),t.callbackNode===n?B1.bind(null,t):null}function cg(t,e){var n=gu;return t.current.memoizedState.isDehydrated&&(ro(t,e).flags|=256),t=Ad(t,e),t!==2&&(e=_n,_n=n,e!==null&&hg(e)),t}function hg(t){_n===null?_n=t:_n.push.apply(_n,t)}function iR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!gi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~By,e&=~vf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pi(e),i=1<<n;t[n]=-1,e&=~i}}function j0(t){if(He&6)throw Error(Y(327));Na();var e=cd(t,0);if(!(e&1))return Tn(t,xt()),null;var n=Ad(t,e);if(t.tag!==0&&n===2){var i=Dm(t);i!==0&&(e=i,n=cg(t,i))}if(n===1)throw n=$u,ro(t,0),Hr(t,e),Tn(t,xt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qs(t,_n,nr),Tn(t,xt()),null}function Uy(t,e){var n=He;He|=1;try{return t(e)}finally{He=n,He===0&&($a=xt()+500,mf&&As())}}function go(t){Kr!==null&&Kr.tag===0&&!(He&6)&&Na();var e=He;He|=1;var n=Xn.transition,i=Qe;try{if(Xn.transition=null,Qe=1,t)return t()}finally{Qe=i,Xn.transition=n,He=e,!(He&6)&&As()}}function Hy(){In=Ta.current,ot(Ta)}function ro(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Nb(n)),kt!==null)for(n=kt.return;n!==null;){var i=n;switch(Ey(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&md();break;case 3:Ha(),ot(wn),ot(tn),Ly();break;case 5:Ry(i);break;case 4:Ha();break;case 13:ot(ct);break;case 19:ot(ct);break;case 10:Iy(i.type._context);break;case 22:case 23:Hy()}n=n.return}if(Bt=t,kt=t=ss(t.current,null),Wt=In=e,Nt=0,$u=null,By=vf=mo=0,_n=gu=null,eo!==null){for(e=0;e<eo.length;e++)if(n=eo[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}eo=null}return t}function z1(t,e){do{var n=kt;try{if(Cy(),zh.current=Pd,Ed){for(var i=dt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ed=!1}if(po=0,Ft=Rt=dt=null,pu=!1,Uu=0,Fy.current=null,n===null||n.return===null){Nt=1,$u=e,kt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Wt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=S0(a);if(T!==null){T.flags&=-257,C0(T,a,u,o,e),T.mode&1&&P0(o,f,e),e=T,h=f;var b=e.updateQueue;if(b===null){var A=new Set;A.add(h),e.updateQueue=A}else b.add(h);break e}else{if(!(e&1)){P0(o,f,e),Wy();break e}h=Error(Y(426))}}else if(lt&&u.mode&1){var j=S0(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),C0(j,a,u,o,e),Py(Wa(h,u));break e}}o=h=Wa(h,u),Nt!==4&&(Nt=2),gu===null?gu=[o]:gu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=P1(o,h,e);_0(o,k);break e;case 1:u=h;var P=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(is===null||!is.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=S1(o,u,e);_0(o,B);break e}}o=o.return}while(o!==null)}W1(n)}catch(q){e=q,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function U1(){var t=Sd.current;return Sd.current=Pd,t===null?Pd:t}function Wy(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Bt===null||!(mo&268435455)&&!(vf&268435455)||Hr(Bt,Wt)}function Ad(t,e){var n=He;He|=2;var i=U1();(Bt!==t||Wt!==e)&&(nr=null,ro(t,e));do try{rR();break}catch(r){z1(t,r)}while(!0);if(Cy(),He=n,Sd.current=i,kt!==null)throw Error(Y(261));return Bt=null,Wt=0,Nt}function rR(){for(;kt!==null;)H1(kt)}function sR(){for(;kt!==null&&!bk();)H1(kt)}function H1(t){var e=G1(t.alternate,t,In);t.memoizedProps=t.pendingProps,e===null?W1(t):kt=e,Fy.current=null}function W1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Yb(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,kt=null;return}}else if(n=Xb(n,e,In),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Nt===0&&(Nt=5)}function qs(t,e,n){var i=Qe,r=Xn.transition;try{Xn.transition=null,Qe=1,oR(t,e,n,i)}finally{Xn.transition=r,Qe=i}return null}function oR(t,e,n,i){do Na();while(Kr!==null);if(He&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Bk(t,o),t===Bt&&(kt=Bt=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vh||(vh=!0,q1(ud,function(){return Na(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xn.transition,Xn.transition=null;var a=Qe;Qe=1;var u=He;He|=4,Fy.current=null,eR(t,n),j1(n,t),Cb(Um),hd=!!zm,Um=zm=null,t.current=n,tR(n),Rk(),He=u,Qe=a,Xn.transition=o}else t.current=n;if(vh&&(vh=!1,Kr=t,Id=r),o=t.pendingLanes,o===0&&(is=null),Mk(n.stateNode),Tn(t,xt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Cd)throw Cd=!1,t=lg,lg=null,t;return Id&1&&t.tag!==0&&Na(),o=t.pendingLanes,o&1?t===ug?yu++:(yu=0,ug=t):yu=0,As(),null}function Na(){if(Kr!==null){var t=PE(Id),e=Xn.transition,n=Qe;try{if(Xn.transition=null,Qe=16>t?16:t,Kr===null)var i=!1;else{if(t=Kr,Kr=null,Id=0,He&6)throw Error(Y(331));var r=He;for(He|=4,ae=t.current;ae!==null;){var o=ae,a=o.child;if(ae.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(ae=f;ae!==null;){var m=ae;switch(m.tag){case 0:case 11:case 15:mu(8,m,o)}var g=m.child;if(g!==null)g.return=m,ae=g;else for(;ae!==null;){m=ae;var _=m.sibling,T=m.return;if(O1(m),m===f){ae=null;break}if(_!==null){_.return=T,ae=_;break}ae=T}}}var b=o.alternate;if(b!==null){var A=b.child;if(A!==null){b.child=null;do{var j=A.sibling;A.sibling=null,A=j}while(A!==null)}}ae=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ae=a;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:mu(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,ae=k;break e}ae=o.return}}var P=t.current;for(ae=P;ae!==null;){a=ae;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,ae=C;else e:for(a=P;ae!==null;){if(u=ae,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:_f(9,u)}}catch(q){_t(u,u.return,q)}if(u===a){ae=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,ae=B;break e}ae=u.return}}if(He=r,As(),bi&&typeof bi.onPostCommitFiberRoot=="function")try{bi.onPostCommitFiberRoot(cf,t)}catch{}i=!0}return i}finally{Qe=n,Xn.transition=e}}return!1}function F0(t,e,n){e=Wa(n,e),e=P1(t,e,1),t=ns(t,e,1),e=un(),t!==null&&(ac(t,1,e),Tn(t,e))}function _t(t,e,n){if(t.tag===3)F0(t,t,n);else for(;e!==null;){if(e.tag===3){F0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(is===null||!is.has(i))){t=Wa(n,t),t=S1(e,t,1),e=ns(e,t,1),t=un(),e!==null&&(ac(e,1,t),Tn(e,t));break}}e=e.return}}function aR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&(Wt&n)===n&&(Nt===4||Nt===3&&(Wt&130023424)===Wt&&500>xt()-zy?ro(t,0):By|=n),Tn(t,e)}function $1(t,e){e===0&&(t.mode&1?(e=uh,uh<<=1,!(uh&130023424)&&(uh=4194304)):e=1);var n=un();t=mr(t,e),t!==null&&(ac(t,e,n),Tn(t,n))}function lR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$1(t,n)}function uR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),$1(t,n)}var G1;G1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wn.current)vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vn=!1,Qb(t,e,n);vn=!!(t.flags&131072)}else vn=!1,lt&&e.flags&1048576&&QE(e,_d,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Hh(t,e),t=e.pendingProps;var r=Ba(e,tn.current);La(e,n),r=My(null,e,i,t,r,n);var o=Oy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(i)?(o=!0,gd(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ky(e),r.updater=yf,e.stateNode=r,r._reactInternals=e,Xm(e,i,t,n),e=eg(null,e,i,!0,o,n)):(e.tag=0,lt&&o&&Ty(e),ln(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Hh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=hR(i),t=ai(i,t),r){case 0:e=Jm(null,e,i,t,n);break e;case 1:e=k0(null,e,i,t,n);break e;case 11:e=I0(null,e,i,t,n);break e;case 14:e=A0(null,e,i,ai(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),Jm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),k0(t,e,i,r,n);case 3:e:{if(k1(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,r=o.element,n1(t,e),xd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Wa(Error(Y(423)),e),e=b0(t,e,i,n,r);break e}else if(i!==r){r=Wa(Error(Y(424)),e),e=b0(t,e,i,n,r);break e}else for(kn=ts(e.stateNode.containerInfo.firstChild),bn=e,lt=!0,ui=null,n=e1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(za(),i===r){e=gr(t,e,n);break e}ln(t,e,i,n)}e=e.child}return e;case 5:return i1(e),t===null&&Zm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Hm(i,r)?a=null:o!==null&&Hm(i,o)&&(e.flags|=32),A1(t,e),ln(t,e,a,n),e.child;case 6:return t===null&&Zm(e),null;case 13:return b1(t,e,n);case 4:return by(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ua(e,null,i,n):ln(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),I0(t,e,i,r,n);case 7:return ln(t,e,e.pendingProps,n),e.child;case 8:return ln(t,e,e.pendingProps.children,n),e.child;case 12:return ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,tt(vd,i._currentValue),i._currentValue=a,o!==null)if(gi(o.value,a)){if(o.children===r.children&&!wn.current){e=gr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=ur(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Km(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Y(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Km(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}ln(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,La(e,n),r=Yn(r),i=i(r),e.flags|=1,ln(t,e,i,n),e.child;case 14:return i=e.type,r=ai(i,e.pendingProps),r=ai(i.type,r),A0(t,e,i,r,n);case 15:return C1(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ai(i,r),Hh(t,e),e.tag=1,xn(i)?(t=!0,gd(e)):t=!1,La(e,n),E1(e,i,r),Xm(e,i,r,n),eg(null,e,i,!0,t,n);case 19:return R1(t,e,n);case 22:return I1(t,e,n)}throw Error(Y(156,e.tag))};function q1(t,e){return wE(t,e)}function cR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,e,n,i){return new cR(t,e,n,i)}function $y(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hR(t){if(typeof t=="function")return $y(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cy)return 11;if(t===hy)return 14}return 2}function ss(t,e){var n=t.alternate;return n===null?(n=Qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")$y(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case da:return so(n.children,r,o,e);case uy:a=8,r|=8;break;case xm:return t=Qn(12,n,e,r|2),t.elementType=xm,t.lanes=o,t;case Tm:return t=Qn(13,n,e,r),t.elementType=Tm,t.lanes=o,t;case Em:return t=Qn(19,n,e,r),t.elementType=Em,t.lanes=o,t;case iE:return wf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tE:a=10;break e;case nE:a=9;break e;case cy:a=11;break e;case hy:a=14;break e;case Fr:a=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Qn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function so(t,e,n,i){return t=Qn(7,t,i,e),t.lanes=n,t}function wf(t,e,n,i){return t=Qn(22,t,i,e),t.elementType=iE,t.lanes=n,t.stateNode={isHidden:!1},t}function zp(t,e,n){return t=Qn(6,t,null,e),t.lanes=n,t}function Up(t,e,n){return e=Qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dR(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tp(0),this.expirationTimes=Tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Gy(t,e,n,i,r,o,a,u,h){return t=new dR(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Qn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ky(o),t}function fR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ha,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Z1(t){if(!t)return gs;t=t._reactInternals;e:{if(Eo(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(xn(n))return ZE(t,n,e)}return e}function K1(t,e,n,i,r,o,a,u,h){return t=Gy(n,i,!0,t,r,o,a,u,h),t.context=Z1(null),n=t.current,i=un(),r=rs(n),o=ur(i,r),o.callback=e??null,ns(n,o,r),t.current.lanes=r,ac(t,r,i),Tn(t,i),t}function xf(t,e,n,i){var r=e.current,o=un(),a=rs(r);return n=Z1(n),e.context===null?e.context=n:e.pendingContext=n,e=ur(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ns(r,e,a),t!==null&&(mi(t,r,a,o),Bh(t,r,a)),a}function kd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function B0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qy(t,e){B0(t,e),(t=t.alternate)&&B0(t,e)}function pR(){return null}var Q1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zy(t){this._internalRoot=t}Tf.prototype.render=Zy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));xf(t,e,null,null)};Tf.prototype.unmount=Zy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;go(function(){xf(null,t,null,null)}),e[pr]=null}};function Tf(t){this._internalRoot=t}Tf.prototype.unstable_scheduleHydration=function(t){if(t){var e=IE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ur.length&&e!==0&&e<Ur[n].priority;n++);Ur.splice(n,0,t),n===0&&kE(t)}};function Ky(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ef(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function z0(){}function mR(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=kd(a);o.call(f)}}var a=K1(e,i,t,0,null,!1,!1,"",z0);return t._reactRootContainer=a,t[pr]=a.current,Vu(t.nodeType===8?t.parentNode:t),go(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=kd(h);u.call(f)}}var h=Gy(t,0,!1,null,null,!1,!1,"",z0);return t._reactRootContainer=h,t[pr]=h.current,Vu(t.nodeType===8?t.parentNode:t),go(function(){xf(e,h,n,i)}),h}function Pf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=kd(a);u.call(h)}}xf(e,a,t,r)}else a=mR(n,e,t,r,i);return kd(a)}SE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nu(e.pendingLanes);n!==0&&(py(e,n|1),Tn(e,xt()),!(He&6)&&($a=xt()+500,As()))}break;case 13:go(function(){var i=mr(t,1);if(i!==null){var r=un();mi(i,t,1,r)}}),qy(t,1)}};my=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var n=un();mi(e,t,134217728,n)}qy(t,134217728)}};CE=function(t){if(t.tag===13){var e=rs(t),n=mr(t,e);if(n!==null){var i=un();mi(n,t,e,i)}qy(t,e)}};IE=function(){return Qe};AE=function(t,e){var n=Qe;try{return Qe=t,e()}finally{Qe=n}};Nm=function(t,e,n){switch(e){case"input":if(Cm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=pf(i);if(!r)throw Error(Y(90));sE(i),Cm(i,r)}}}break;case"textarea":aE(t,n);break;case"select":e=n.value,e!=null&&Aa(t,!!n.multiple,e,!1)}};pE=Uy;mE=go;var gR={usingClientEntryPoint:!1,Events:[uc,ga,pf,dE,fE,Uy]},Gl={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yR={bundleType:Gl.bundleType,version:Gl.version,rendererPackageName:Gl.rendererPackageName,rendererConfig:Gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_E(t),t===null?null:t.stateNode},findFiberByHostInstance:Gl.findFiberByHostInstance||pR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{cf=wh.inject(yR),bi=wh}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gR;Mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ky(e))throw Error(Y(200));return fR(t,e,null,n)};Mn.createRoot=function(t,e){if(!Ky(t))throw Error(Y(299));var n=!1,i="",r=Q1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Gy(t,1,!1,null,null,n,!1,i,r),t[pr]=e.current,Vu(t.nodeType===8?t.parentNode:t),new Zy(e)};Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=_E(e),t=t===null?null:t.stateNode,t};Mn.flushSync=function(t){return go(t)};Mn.hydrate=function(t,e,n){if(!Ef(e))throw Error(Y(200));return Pf(null,t,e,!0,n)};Mn.hydrateRoot=function(t,e,n){if(!Ky(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=Q1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=K1(e,null,t,1,n??null,r,!1,o,a),t[pr]=e.current,Vu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Tf(e)};Mn.render=function(t,e,n){if(!Ef(e))throw Error(Y(200));return Pf(null,t,e,!1,n)};Mn.unmountComponentAtNode=function(t){if(!Ef(t))throw Error(Y(40));return t._reactRootContainer?(go(function(){Pf(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};Mn.unstable_batchedUpdates=Uy;Mn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ef(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Pf(t,e,n,!1,i)};Mn.version="18.3.1-next-f1338f8080-20240426";function X1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X1)}catch(t){console.error(t)}}X1(),XT.exports=Mn;var _R=XT.exports,U0=_R;vm.createRoot=U0.createRoot,vm.hydrateRoot=U0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gu(){return Gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gu.apply(this,arguments)}var Qr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qr||(Qr={}));const H0="popstate";function vR(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:u="",hash:h=""}=Po(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),dg("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let h=r.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:bd(o))}function i(r,o){Sf(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return xR(e,n,i,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Sf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wR(){return Math.random().toString(36).substr(2,8)}function W0(t,e){return{usr:t.state,key:t.key,idx:e}}function dg(t,e,n,i){return n===void 0&&(n=null),Gu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Po(e):e,{state:n,key:e&&e.key||i||wR()})}function bd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Po(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function xR(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,u=Qr.Pop,h=null,f=m();f==null&&(f=0,a.replaceState(Gu({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Qr.Pop;let j=m(),k=j==null?null:j-f;f=j,h&&h({action:u,location:A.location,delta:k})}function _(j,k){u=Qr.Push;let P=dg(A.location,j,k);n&&n(P,j),f=m()+1;let C=W0(P,f),B=A.createHref(P);try{a.pushState(C,"",B)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;r.location.assign(B)}o&&h&&h({action:u,location:A.location,delta:1})}function T(j,k){u=Qr.Replace;let P=dg(A.location,j,k);n&&n(P,j),f=m();let C=W0(P,f),B=A.createHref(P);a.replaceState(C,"",B),o&&h&&h({action:u,location:A.location,delta:0})}function b(j){let k=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof j=="string"?j:bd(j);return P=P.replace(/ $/,"%20"),ft(k,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,k)}let A={get action(){return u},get location(){return t(r,a)},listen(j){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(H0,g),h=j,()=>{r.removeEventListener(H0,g),h=null}},createHref(j){return e(r,j)},createURL:b,encodeLocation(j){let k=b(j);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:T,go(j){return a.go(j)}};return A}var $0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($0||($0={}));function TR(t,e,n){return n===void 0&&(n="/"),ER(t,e,n)}function ER(t,e,n,i){let r=typeof e=="string"?Po(e):e,o=Ga(r.pathname||"/",n);if(o==null)return null;let a=Y1(t);PR(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let f=OR(o);u=NR(a[h],f)}return u}function Y1(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(ft(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=os([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(ft(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Y1(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:RR(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))r(o,a);else for(let h of J1(o.path))r(o,a,h)}),e}function J1(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=J1(i.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function PR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const SR=/^:[\w-]+$/,CR=3,IR=2,AR=1,kR=10,bR=-2,G0=t=>t==="*";function RR(t,e){let n=t.split("/"),i=n.length;return n.some(G0)&&(i+=bR),e&&(i+=IR),n.filter(r=>!G0(r)).reduce((r,o)=>r+(SR.test(o)?CR:o===""?AR:kR),i)}function LR(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function NR(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=fg({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),_=h.route;if(!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:os([o,g.pathname]),pathnameBase:BR(os([o,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(o=os([o,g.pathnameBase]))}return a}function fg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=MR(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:_,isOptional:T}=m;if(_==="*"){let A=u[g]||"";a=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const b=u[g];return T&&!b?f[_]=void 0:f[_]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function MR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Sf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function OR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ga(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const DR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VR=t=>DR.test(t);function jR(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Po(t):t,o;if(n)if(VR(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Sf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=q0(n.substring(1),"/"):o=q0(n,e)}else o=e;return{pathname:o,search:zR(i),hash:UR(r)}}function q0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Hp(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qy(t,e){let n=FR(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Xy(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Po(t):(r=Gu({},t),ft(!r.pathname||!r.pathname.includes("?"),Hp("?","pathname","search",r)),ft(!r.pathname||!r.pathname.includes("#"),Hp("#","pathname","hash",r)),ft(!r.search||!r.search.includes("#"),Hp("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),g-=1;r.pathname=_.join("/")}u=g>=0?e[g]:"/"}let h=jR(r,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const os=t=>t.join("/").replace(/\/\/+/g,"/"),BR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eP=["post","put","patch","delete"];new Set(eP);const WR=["get",...eP];new Set(WR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qu.apply(this,arguments)}const Cf=V.createContext(null),tP=V.createContext(null),Pr=V.createContext(null),If=V.createContext(null),ks=V.createContext({outlet:null,matches:[],isDataRoute:!1}),nP=V.createContext(null);function $R(t,e){let{relative:n}=e===void 0?{}:e;ol()||ft(!1);let{basename:i,navigator:r}=V.useContext(Pr),{hash:o,pathname:a,search:u}=kf(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:os([i,a])),r.createHref({pathname:h,search:u,hash:o})}function ol(){return V.useContext(If)!=null}function So(){return ol()||ft(!1),V.useContext(If).location}function iP(t){V.useContext(Pr).static||V.useLayoutEffect(t)}function Af(){let{isDataRoute:t}=V.useContext(ks);return t?rL():GR()}function GR(){ol()||ft(!1);let t=V.useContext(Cf),{basename:e,future:n,navigator:i}=V.useContext(Pr),{matches:r}=V.useContext(ks),{pathname:o}=So(),a=JSON.stringify(Qy(r,n.v7_relativeSplatPath)),u=V.useRef(!1);return iP(()=>{u.current=!0}),V.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){i.go(f);return}let g=Xy(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:os([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,a,o,t])}function kf(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=V.useContext(Pr),{matches:r}=V.useContext(ks),{pathname:o}=So(),a=JSON.stringify(Qy(r,i.v7_relativeSplatPath));return V.useMemo(()=>Xy(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function qR(t,e){return ZR(t,e)}function ZR(t,e,n,i){ol()||ft(!1);let{navigator:r}=V.useContext(Pr),{matches:o}=V.useContext(ks),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=So(),m;if(e){var g;let j=typeof e=="string"?Po(e):e;h==="/"||(g=j.pathname)!=null&&g.startsWith(h)||ft(!1),m=j}else m=f;let _=m.pathname||"/",T=_;if(h!=="/"){let j=h.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(j.length).join("/")}let b=TR(t,{pathname:T}),A=JR(b&&b.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:os([h,r.encodeLocation?r.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?h:os([h,r.encodeLocation?r.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,i);return e&&A?V.createElement(If.Provider,{value:{location:qu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Qr.Pop}},A):A}function KR(){let t=iL(),e=HR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:r},n):null,null)}const QR=V.createElement(KR,null);class XR extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(ks.Provider,{value:this.props.routeContext},V.createElement(nP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YR(t){let{routeContext:e,match:n,children:i}=t,r=V.useContext(Cf);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(ks.Provider,{value:e},i)}function JR(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(r=n)==null?void 0:r.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||ft(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:_,errors:T}=n,b=g.route.loader&&_[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||b){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let T,b=!1,A=null,j=null;n&&(T=u&&g.route.id?u[g.route.id]:void 0,A=g.route.errorElement||QR,h&&(f<0&&_===0?(sL("route-fallback"),b=!0,j=null):f===_&&(b=!0,j=g.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,_+1)),P=()=>{let C;return T?C=A:b?C=j:g.route.Component?C=V.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=m,V.createElement(YR,{match:g,routeContext:{outlet:m,matches:k,isDataRoute:n!=null},children:C})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?V.createElement(XR,{location:n.location,revalidation:n.revalidation,component:A,error:T,children:P(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):P()},null)}var rP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(rP||{}),sP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(sP||{});function eL(t){let e=V.useContext(Cf);return e||ft(!1),e}function tL(t){let e=V.useContext(tP);return e||ft(!1),e}function nL(t){let e=V.useContext(ks);return e||ft(!1),e}function oP(t){let e=nL(),n=e.matches[e.matches.length-1];return n.route.id||ft(!1),n.route.id}function iL(){var t;let e=V.useContext(nP),n=tL(),i=oP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function rL(){let{router:t}=eL(rP.UseNavigateStable),e=oP(sP.UseNavigateStable),n=V.useRef(!1);return iP(()=>{n.current=!0}),V.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,qu({fromRouteId:e},o)))},[t,e])}const Z0={};function sL(t,e,n){Z0[t]||(Z0[t]=!0)}function oL(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function aP(t){let{to:e,replace:n,state:i,relative:r}=t;ol()||ft(!1);let{future:o,static:a}=V.useContext(Pr),{matches:u}=V.useContext(ks),{pathname:h}=So(),f=Af(),m=Xy(e,Qy(u,o.v7_relativeSplatPath),h,r==="path"),g=JSON.stringify(m);return V.useEffect(()=>f(JSON.parse(g),{replace:n,state:i,relative:r}),[f,g,r,n,i]),null}function Vr(t){ft(!1)}function aL(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Qr.Pop,navigator:o,static:a=!1,future:u}=t;ol()&&ft(!1);let h=e.replace(/^\/*/,"/"),f=V.useMemo(()=>({basename:h,navigator:o,static:a,future:qu({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof i=="string"&&(i=Po(i));let{pathname:m="/",search:g="",hash:_="",state:T=null,key:b="default"}=i,A=V.useMemo(()=>{let j=Ga(m,h);return j==null?null:{location:{pathname:j,search:g,hash:_,state:T,key:b},navigationType:r}},[h,m,g,_,T,b,r]);return A==null?null:V.createElement(Pr.Provider,{value:f},V.createElement(If.Provider,{children:n,value:A}))}function lL(t){let{children:e,location:n}=t;return qR(pg(e),n)}new Promise(()=>{});function pg(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(i,r)=>{if(!V.isValidElement(i))return;let o=[...e,r];if(i.type===V.Fragment){n.push.apply(n,pg(i.props.children,o));return}i.type!==Vr&&ft(!1),!i.props.index||!i.props.children||ft(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=pg(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Rd.apply(this,arguments)}function lP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function uL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cL(t,e){return t.button===0&&(!e||e==="_self")&&!uL(t)}const hL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dL=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],fL="6";try{window.__reactRouterVersion=fL}catch{}const pL=V.createContext({isTransitioning:!1}),mL="startTransition",K0=ak[mL];function gL(t){let{basename:e,children:n,future:i,window:r}=t,o=V.useRef();o.current==null&&(o.current=vR({window:r,v5Compat:!0}));let a=o.current,[u,h]=V.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},m=V.useCallback(g=>{f&&K0?K0(()=>h(g)):h(g)},[h,f]);return V.useLayoutEffect(()=>a.listen(m),[a,m]),V.useEffect(()=>oL(i),[i]),V.createElement(aL,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:i})}const yL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_L=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vL=V.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:u,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,_=lP(e,hL),{basename:T}=V.useContext(Pr),b,A=!1;if(typeof f=="string"&&_L.test(f)&&(b=f,yL))try{let C=new URL(window.location.href),B=f.startsWith("//")?new URL(C.protocol+f):new URL(f),q=Ga(B.pathname,T);B.origin===C.origin&&q!=null?f=q+B.search+B.hash:A=!0}catch{}let j=$R(f,{relative:r}),k=TL(f,{replace:a,state:u,target:h,preventScrollReset:m,relative:r,viewTransition:g});function P(C){i&&i(C),C.defaultPrevented||k(C)}return V.createElement("a",Rd({},_,{href:b||j,onClick:A||o?i:P,ref:n,target:h}))}),wL=V.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:f,children:m}=e,g=lP(e,dL),_=kf(h,{relative:g.relative}),T=So(),b=V.useContext(tP),{navigator:A,basename:j}=V.useContext(Pr),k=b!=null&&EL(_)&&f===!0,P=A.encodeLocation?A.encodeLocation(_).pathname:_.pathname,C=T.pathname,B=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(C=C.toLowerCase(),B=B?B.toLowerCase():null,P=P.toLowerCase()),B&&j&&(B=Ga(B,j)||B);const q=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let U=C===P||!a&&C.startsWith(P)&&C.charAt(q)==="/",R=B!=null&&(B===P||!a&&B.startsWith(P)&&B.charAt(P.length)==="/"),S={isActive:U,isPending:R,isTransitioning:k},N=U?i:void 0,D;typeof o=="function"?D=o(S):D=[o,U?"active":null,R?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let M=typeof u=="function"?u(S):u;return V.createElement(vL,Rd({},g,{"aria-current":N,className:D,ref:n,style:M,to:h,viewTransition:f}),typeof m=="function"?m(S):m)});var mg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mg||(mg={}));var Q0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Q0||(Q0={}));function xL(t){let e=V.useContext(Cf);return e||ft(!1),e}function TL(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=Af(),f=So(),m=kf(t,{relative:a});return V.useCallback(g=>{if(cL(g,n)){g.preventDefault();let _=i!==void 0?i:bd(f)===bd(m);h(t,{replace:_,state:r,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,m,i,r,n,t,o,a,u])}function EL(t,e){e===void 0&&(e={});let n=V.useContext(pL);n==null&&ft(!1);let{basename:i}=xL(mg.useViewTransitionState),r=kf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ga(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Ga(n.nextLocation.pathname,i)||n.nextLocation.pathname;return fg(r.pathname,a)!=null||fg(r.pathname,o)!=null}const uP=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),bf=V.createContext({}),Rf=V.createContext(null),Lf=typeof document<"u",Yy=Lf?V.useLayoutEffect:V.useEffect,cP=V.createContext({strict:!1}),Jy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),PL="framerAppearId",hP="data-"+Jy(PL);function SL(t,e,n,i){const{visualElement:r}=V.useContext(bf),o=V.useContext(cP),a=V.useContext(Rf),u=V.useContext(uP).reducedMotion,h=V.useRef();i=i||o.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=h.current;V.useInsertionEffect(()=>{f&&f.update(n,a)});const m=V.useRef(!!(n[hP]&&!window.HandoffComplete));return Yy(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),V.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function Ea(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function CL(t,e,n){return V.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Ea(n)&&(n.current=i))},[e])}function Zu(t){return typeof t=="string"||Array.isArray(t)}function Nf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const e_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],t_=["initial",...e_];function Mf(t){return Nf(t.animate)||t_.some(e=>Zu(t[e]))}function dP(t){return!!(Mf(t)||t.variants)}function IL(t,e){if(Mf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Zu(n)?n:void 0,animate:Zu(i)?i:void 0}}return t.inherit!==!1?e:{}}function AL(t){const{initial:e,animate:n}=IL(t,V.useContext(bf));return V.useMemo(()=>({initial:e,animate:n}),[X0(e),X0(n)])}function X0(t){return Array.isArray(t)?t.join(" "):t}const Y0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ku={};for(const t in Y0)Ku[t]={isEnabled:e=>Y0[t].some(n=>!!e[n])};function kL(t){for(const e in t)Ku[e]={...Ku[e],...t[e]}}const n_=V.createContext({}),fP=V.createContext({}),bL=Symbol.for("motionComponentSymbol");function RL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&kL(t);function o(u,h){let f;const m={...V.useContext(uP),...u,layoutId:LL(u)},{isStatic:g}=m,_=AL(u),T=i(u,g);if(!g&&Lf){_.visualElement=SL(r,T,m,e);const b=V.useContext(fP),A=V.useContext(cP).strict;_.visualElement&&(f=_.visualElement.loadFeatures(m,A,t,b))}return V.createElement(bf.Provider,{value:_},f&&_.visualElement?V.createElement(f,{visualElement:_.visualElement,...m}):null,n(r,u,CL(T,_.visualElement,h),T,g,_.visualElement))}const a=V.forwardRef(o);return a[bL]=r,a}function LL({layoutId:t}){const e=V.useContext(n_).id;return e&&t!==void 0?e+"-"+t:t}function NL(t){function e(i,r={}){return RL(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const ML=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function i_(t){return typeof t!="string"||t.includes("-")?!1:!!(ML.indexOf(t)>-1||/[A-Z]/.test(t))}const Ld={};function OL(t){Object.assign(Ld,t)}const hc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Co=new Set(hc);function pP(t,{layout:e,layoutId:n}){return Co.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ld[t]||t==="opacity")}const En=t=>!!(t&&t.getVelocity),DL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},VL=hc.length;function jL(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let o="";for(let a=0;a<VL;a++){const u=hc[a];if(t[u]!==void 0){const h=DL[u]||u;o+=`${h}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(t,i?"":o):n&&i&&(o="none"),o}const mP=t=>e=>typeof e=="string"&&e.startsWith(t),gP=mP("--"),gg=mP("var(--"),FL=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,BL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ys=(t,e,n)=>Math.min(Math.max(n,t),e),Io={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},_u={...Io,transform:t=>ys(0,1,t)},xh={...Io,default:1},vu=t=>Math.round(t*1e5)/1e5,Of=/(-)?([\d]*\.?[\d])+/g,yP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,zL=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function dc(t){return typeof t=="string"}const fc=t=>({test:e=>dc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),jr=fc("deg"),Li=fc("%"),ve=fc("px"),UL=fc("vh"),HL=fc("vw"),J0={...Li,parse:t=>Li.parse(t)/100,transform:t=>Li.transform(t*100)},ew={...Io,transform:Math.round},_P={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,size:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,rotate:jr,rotateX:jr,rotateY:jr,rotateZ:jr,scale:xh,scaleX:xh,scaleY:xh,scaleZ:xh,skew:jr,skewX:jr,skewY:jr,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:_u,originX:J0,originY:J0,originZ:ve,zIndex:ew,fillOpacity:_u,strokeOpacity:_u,numOctaves:ew};function r_(t,e,n,i){const{style:r,vars:o,transform:a,transformOrigin:u}=t;let h=!1,f=!1,m=!0;for(const g in e){const _=e[g];if(gP(g)){o[g]=_;continue}const T=_P[g],b=BL(_,T);if(Co.has(g)){if(h=!0,a[g]=b,!m)continue;_!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=b):r[g]=b}if(e.transform||(h||i?r.transform=jL(t.transform,n,m,i):r.transform&&(r.transform="none")),f){const{originX:g="50%",originY:_="50%",originZ:T=0}=u;r.transformOrigin=`${g} ${_} ${T}`}}const s_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vP(t,e,n){for(const i in e)!En(e[i])&&!pP(i,n)&&(t[i]=e[i])}function WL({transformTemplate:t},e,n){return V.useMemo(()=>{const i=s_();return r_(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function $L(t,e,n){const i=t.style||{},r={};return vP(r,i,t),Object.assign(r,WL(t,e,n)),t.transformValues?t.transformValues(r):r}function GL(t,e,n){const i={},r=$L(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const qL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||qL.has(t)}let wP=t=>!Nd(t);function ZL(t){t&&(wP=e=>e.startsWith("on")?!Nd(e):t(e))}try{ZL(require("@emotion/is-prop-valid").default)}catch{}function KL(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(wP(r)||n===!0&&Nd(r)||!e&&!Nd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function tw(t,e,n){return typeof t=="string"?t:ve.transform(e+n*t)}function QL(t,e,n){const i=tw(e,t.x,t.width),r=tw(n,t.y,t.height);return`${i} ${r}`}const XL={offset:"stroke-dashoffset",array:"stroke-dasharray"},YL={offset:"strokeDashoffset",array:"strokeDasharray"};function JL(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?XL:YL;t[o.offset]=ve.transform(-i);const a=ve.transform(e),u=ve.transform(n);t[o.array]=`${a} ${u}`}function o_(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,g,_){if(r_(t,f,m,_),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:b,dimensions:A}=t;T.transform&&(A&&(b.transform=T.transform),delete T.transform),A&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=QL(A,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),a!==void 0&&JL(T,a,u,h,!1)}const xP=()=>({...s_(),attrs:{}}),a_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function eN(t,e,n,i){const r=V.useMemo(()=>{const o=xP();return o_(o,e,{enableHardwareAcceleration:!1},a_(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};vP(o,t.style,t),r.style={...o,...r.style}}return r}function tN(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(i_(n)?eN:GL)(i,o,a,n),m={...KL(i,typeof n=="string",t),...h,ref:r},{children:g}=i,_=V.useMemo(()=>En(g)?g.get():g,[g]);return V.createElement(n,{...m,children:_})}}function TP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const EP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function PP(t,e,n,i){TP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(EP.has(r)?r:Jy(r),e.attrs[r])}function l_(t,e){const{style:n}=t,i={};for(const r in n)(En(n[r])||e.style&&En(e.style[r])||pP(r,t))&&(i[r]=n[r]);return i}function SP(t,e){const n=l_(t,e);for(const i in t)if(En(t[i])||En(e[i])){const r=hc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function u_(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function CP(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const Md=t=>Array.isArray(t),nN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),iN=t=>Md(t)?t[t.length-1]||0:t;function qh(t){const e=En(t)?t.get():t;return nN(e)?e.toValue():e}function rN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,o){const a={latestValues:sN(i,r,o,t),renderState:e()};return n&&(a.mount=u=>n(i,u,a)),a}const IP=t=>(e,n)=>{const i=V.useContext(bf),r=V.useContext(Rf),o=()=>rN(t,e,i,r);return n?o():CP(o)};function sN(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=qh(o[_]);let{initial:a,animate:u}=t;const h=Mf(t),f=dP(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Nf(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const b=u_(t,T);if(!b)return;const{transitionEnd:A,transition:j,...k}=b;for(const P in k){let C=k[P];if(Array.isArray(C)){const B=m?C.length-1:0;C=C[B]}C!==null&&(r[P]=C)}for(const P in A)r[P]=A[P]}),r}const Tt=t=>t;class nw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function oN(t){let e=new nw,n=new nw,i=0,r=!1,o=!1;const a=new WeakSet,u={schedule:(h,f=!1,m=!1)=>{const g=m&&r,_=g?e:n;return f&&a.add(h),_.add(h)&&g&&r&&(i=e.order.length),h},cancel:h=>{n.remove(h),a.delete(h)},process:h=>{if(r){o=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let f=0;f<i;f++){const m=e.order[f];m(h),a.has(m)&&(u.schedule(m),t())}r=!1,o&&(o=!1,u.process(h))}};return u}const Th=["prepare","read","update","preRender","render","postRender"],aN=40;function lN(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=Th.reduce((g,_)=>(g[_]=oN(()=>n=!0),g),{}),a=g=>o[g].process(r),u=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,aN),1),r.timestamp=g,r.isProcessing=!0,Th.forEach(a),r.isProcessing=!1,n&&e&&(i=!1,t(u))},h=()=>{n=!0,i=!0,r.isProcessing||t(u)};return{schedule:Th.reduce((g,_)=>{const T=o[_];return g[_]=(b,A=!1,j=!1)=>(n||h(),T.schedule(b,A,j)),g},{}),cancel:g=>Th.forEach(_=>o[_].cancel(g)),state:r,steps:o}}const{schedule:nt,cancel:yr,state:Xt,steps:Wp}=lN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Tt,!0),uN={useVisualState:IP({scrapeMotionValuesFromProps:SP,createRenderState:xP,onMount:(t,e,{renderState:n,latestValues:i})=>{nt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),nt.render(()=>{o_(n,i,{enableHardwareAcceleration:!1},a_(e.tagName),t.transformTemplate),PP(e,n)})}})},cN={useVisualState:IP({scrapeMotionValuesFromProps:l_,createRenderState:s_})};function hN(t,{forwardMotionProps:e=!1},n,i){return{...i_(t)?uN:cN,preloadedFeatures:n,useRender:tN(e),createVisualElement:i,Component:t}}function or(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const AP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Df(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const dN=t=>e=>AP(e)&&t(e,Df(e));function cr(t,e,n,i){return or(t,e,dN(n),i)}const fN=(t,e)=>n=>e(t(n)),as=(...t)=>t.reduce(fN);function kP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const iw=kP("dragHorizontal"),rw=kP("dragVertical");function bP(t){let e=!1;if(t==="y")e=rw();else if(t==="x")e=iw();else{const n=iw(),i=rw();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function RP(){const t=bP(!0);return t?(t(),!1):!0}class bs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function sw(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(o,a)=>{if(o.pointerType==="touch"||RP())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[i]&&nt.update(()=>u[i](o,a))};return cr(t.current,n,r,{passive:!t.getProps()[i]})}class pN extends bs{mount(){this.unmount=as(sw(this.node,!0),sw(this.node,!1))}unmount(){}}class mN extends bs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=as(or(this.node.current,"focus",()=>this.onFocus()),or(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const LP=(t,e)=>e?t===e?!0:LP(t,e.parentElement):!1;function $p(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Df(n))}class gN extends bs{constructor(){super(...arguments),this.removeStartListeners=Tt,this.removeEndListeners=Tt,this.removeAccessibleListeners=Tt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),o=cr(window,"pointerup",(u,h)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();nt.update(()=>{!g&&!LP(this.node.current,u.target)?m&&m(u,h):f&&f(u,h)})},{passive:!(i.onTap||i.onPointerUp)}),a=cr(window,"pointercancel",(u,h)=>this.cancelPress(u,h),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=as(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||$p("up",(h,f)=>{const{onTap:m}=this.node.getProps();m&&nt.update(()=>m(h,f))})};this.removeEndListeners(),this.removeEndListeners=or(this.node.current,"keyup",a),$p("down",(u,h)=>{this.startPress(u,h)})},n=or(this.node.current,"keydown",e),i=()=>{this.isPressing&&$p("cancel",(o,a)=>this.cancelPress(o,a))},r=or(this.node.current,"blur",i);this.removeAccessibleListeners=as(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&nt.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!RP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&nt.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=cr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=or(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=as(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const yg=new WeakMap,Gp=new WeakMap,yN=t=>{const e=yg.get(t.target);e&&e(t)},_N=t=>{t.forEach(yN)};function vN({root:t,...e}){const n=t||document;Gp.has(n)||Gp.set(n,{});const i=Gp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(_N,{root:t,...e})),i[r]}function wN(t,e,n){const i=vN(e);return yg.set(t,n),i.observe(t),()=>{yg.delete(t),i.unobserve(t)}}const xN={some:0,all:1};class TN extends bs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:xN[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),_=f?m:g;_&&_(h)};return wN(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(EN(e,n))&&this.startObserver()}unmount(){}}function EN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const PN={inView:{Feature:TN},tap:{Feature:gN},focus:{Feature:mN},hover:{Feature:pN}};function NP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function SN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function CN(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function Vf(t,e,n){const i=t.getProps();return u_(i,e,n!==void 0?n:i.custom,SN(t),CN(t))}let c_=Tt;const oo=t=>t*1e3,hr=t=>t/1e3,IN={current:!1},MP=t=>Array.isArray(t)&&typeof t[0]=="number";function OP(t){return!!(!t||typeof t=="string"&&DP[t]||MP(t)||Array.isArray(t)&&t.every(OP))}const ru=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,DP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ru([0,.65,.55,1]),circOut:ru([.55,0,1,.45]),backIn:ru([.31,.01,.66,-.59]),backOut:ru([.33,1.53,.69,.99])};function VP(t){if(t)return MP(t)?ru(t):Array.isArray(t)?t.map(VP):DP[t]}function AN(t,e,n,{delay:i=0,duration:r,repeat:o=0,repeatType:a="loop",ease:u,times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=VP(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function kN(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const jP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,bN=1e-7,RN=12;function LN(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=jP(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>bN&&++u<RN);return a}function pc(t,e,n,i){if(t===e&&n===i)return Tt;const r=o=>LN(o,0,1,t,n);return o=>o===0||o===1?o:jP(r(o),e,i)}const NN=pc(.42,0,1,1),MN=pc(0,0,.58,1),FP=pc(.42,0,.58,1),ON=t=>Array.isArray(t)&&typeof t[0]!="number",BP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,zP=t=>e=>1-t(1-e),h_=t=>1-Math.sin(Math.acos(t)),UP=zP(h_),DN=BP(h_),HP=pc(.33,1.53,.69,.99),d_=zP(HP),VN=BP(d_),jN=t=>(t*=2)<1?.5*d_(t):.5*(2-Math.pow(2,-10*(t-1))),FN={linear:Tt,easeIn:NN,easeInOut:FP,easeOut:MN,circIn:h_,circInOut:DN,circOut:UP,backIn:d_,backInOut:VN,backOut:HP,anticipate:jN},ow=t=>{if(Array.isArray(t)){c_(t.length===4);const[e,n,i,r]=t;return pc(e,n,i,r)}else if(typeof t=="string")return FN[t];return t},f_=(t,e)=>n=>!!(dc(n)&&zL.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),WP=(t,e,n)=>i=>{if(!dc(i))return i;const[r,o,a,u]=i.match(Of);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},BN=t=>ys(0,255,t),qp={...Io,transform:t=>Math.round(BN(t))},no={test:f_("rgb","red"),parse:WP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+qp.transform(t)+", "+qp.transform(e)+", "+qp.transform(n)+", "+vu(_u.transform(i))+")"};function zN(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const _g={test:f_("#"),parse:zN,transform:no.transform},Pa={test:f_("hsl","hue"),parse:WP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Li.transform(vu(e))+", "+Li.transform(vu(n))+", "+vu(_u.transform(i))+")"},an={test:t=>no.test(t)||_g.test(t)||Pa.test(t),parse:t=>no.test(t)?no.parse(t):Pa.test(t)?Pa.parse(t):_g.parse(t),transform:t=>dc(t)?t:t.hasOwnProperty("red")?no.transform(t):Pa.transform(t)},ht=(t,e,n)=>-n*t+n*e+t;function Zp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function UN({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=Zp(h,u,t+1/3),o=Zp(h,u,t),a=Zp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}const Kp=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},HN=[_g,no,Pa],WN=t=>HN.find(e=>e.test(t));function aw(t){const e=WN(t);let n=e.parse(t);return e===Pa&&(n=UN(n)),n}const $P=(t,e)=>{const n=aw(t),i=aw(e),r={...n};return o=>(r.red=Kp(n.red,i.red,o),r.green=Kp(n.green,i.green,o),r.blue=Kp(n.blue,i.blue,o),r.alpha=ht(n.alpha,i.alpha,o),no.transform(r))};function $N(t){var e,n;return isNaN(t)&&dc(t)&&(((e=t.match(Of))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(yP))===null||n===void 0?void 0:n.length)||0)>0}const GP={regex:FL,countKey:"Vars",token:"${v}",parse:Tt},qP={regex:yP,countKey:"Colors",token:"${c}",parse:an.parse},ZP={regex:Of,countKey:"Numbers",token:"${n}",parse:Io.parse};function Qp(t,{regex:e,countKey:n,token:i,parse:r}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...o.map(r)))}function Od(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Qp(n,GP),Qp(n,qP),Qp(n,ZP),n}function KP(t){return Od(t).values}function QP(t){const{values:e,numColors:n,numVars:i,tokenised:r}=Od(t),o=e.length;return a=>{let u=r;for(let h=0;h<o;h++)h<i?u=u.replace(GP.token,a[h]):h<i+n?u=u.replace(qP.token,an.transform(a[h])):u=u.replace(ZP.token,vu(a[h]));return u}}const GN=t=>typeof t=="number"?0:t;function qN(t){const e=KP(t);return QP(t)(e.map(GN))}const _s={test:$N,parse:KP,createTransformer:QP,getAnimatableNone:qN},XP=(t,e)=>n=>`${n>0?e:t}`;function YP(t,e){return typeof t=="number"?n=>ht(t,e,n):an.test(t)?$P(t,e):t.startsWith("var(")?XP(t,e):eS(t,e)}const JP=(t,e)=>{const n=[...t],i=n.length,r=t.map((o,a)=>YP(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}},ZN=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=YP(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}},eS=(t,e)=>{const n=_s.createTransformer(e),i=Od(t),r=Od(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?as(JP(i.values,r.values),n):XP(t,e)},Qu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},lw=(t,e)=>n=>ht(t,e,n);function KN(t){return typeof t=="number"?lw:typeof t=="string"?an.test(t)?$P:eS:Array.isArray(t)?JP:typeof t=="object"?ZN:lw}function QN(t,e,n){const i=[],r=n||KN(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||Tt:e;u=as(h,u)}i.push(u)}return i}function tS(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(c_(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=QN(e,i,r),u=a.length,h=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=Qu(t[m],t[m+1],f);return a[m](g)};return n?f=>h(ys(t[0],t[o-1],f)):h}function XN(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Qu(0,e,i);t.push(ht(n,1,r))}}function YN(t){const e=[0];return XN(e,t.length-1),e}function JN(t,e){return t.map(n=>n*e)}function e2(t,e){return t.map(()=>e||FP).splice(0,t.length-1)}function Dd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=ON(i)?i.map(ow):ow(i),o={done:!1,value:e[0]},a=JN(n&&n.length===e.length?n:YN(e),t),u=tS(a,e,{ease:Array.isArray(r)?r:e2(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}function nS(t,e){return e?t*(1e3/e):0}const t2=5;function iS(t,e,n){const i=Math.max(e-t2,0);return nS(n-t(i),e-i)}const Xp=.001,n2=.01,i2=10,r2=.05,s2=1;function o2({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,o,a=1-e;a=ys(r2,s2,a),t=ys(n2,i2,hr(t)),a<1?(r=f=>{const m=f*a,g=m*t,_=m-n,T=vg(f,a),b=Math.exp(-g);return Xp-_/T*b},o=f=>{const g=f*a*t,_=g*n+n,T=Math.pow(a,2)*Math.pow(f,2)*t,b=Math.exp(-g),A=vg(Math.pow(f,2),a);return(-r(f)+Xp>0?-1:1)*((_-T)*b)/A}):(r=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-Xp+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,h=l2(r,o,u);if(t=oo(t),isNaN(h))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const a2=12;function l2(t,e,n){let i=n;for(let r=1;r<a2;r++)i=i-t(i)/e(i);return i}function vg(t,e){return t*Math.sqrt(1-e*e)}const u2=["duration","bounce"],c2=["stiffness","damping","mass"];function uw(t,e){return e.some(n=>t[n]!==void 0)}function h2(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!uw(t,c2)&&uw(t,u2)){const n=o2(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function rS({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],o=t[t.length-1],a={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:g,isResolvedFromDuration:_}=h2({...i,velocity:-hr(i.velocity||0)}),T=g||0,b=h/(2*Math.sqrt(u*f)),A=o-r,j=hr(Math.sqrt(u/f)),k=Math.abs(A)<5;n||(n=k?.01:2),e||(e=k?.005:.5);let P;if(b<1){const C=vg(j,b);P=B=>{const q=Math.exp(-b*j*B);return o-q*((T+b*j*A)/C*Math.sin(C*B)+A*Math.cos(C*B))}}else if(b===1)P=C=>o-Math.exp(-j*C)*(A+(T+j*A)*C);else{const C=j*Math.sqrt(b*b-1);P=B=>{const q=Math.exp(-b*j*B),U=Math.min(C*B,300);return o-q*((T+b*j*A)*Math.sinh(U)+C*A*Math.cosh(U))/C}}return{calculatedDuration:_&&m||null,next:C=>{const B=P(C);if(_)a.done=C>=m;else{let q=T;C!==0&&(b<1?q=iS(P,C,B):q=0);const U=Math.abs(q)<=n,R=Math.abs(o-B)<=e;a.done=U&&R}return a.value=a.done?o:B,a}}}function cw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const g=t[0],_={done:!1,value:g},T=S=>u!==void 0&&S<u||h!==void 0&&S>h,b=S=>u===void 0?h:h===void 0||Math.abs(u-S)<Math.abs(h-S)?u:h;let A=n*e;const j=g+A,k=a===void 0?j:a(j);k!==j&&(A=k-g);const P=S=>-A*Math.exp(-S/i),C=S=>k+P(S),B=S=>{const N=P(S),D=C(S);_.done=Math.abs(N)<=f,_.value=_.done?k:D};let q,U;const R=S=>{T(_.value)&&(q=S,U=rS({keyframes:[_.value,b(_.value)],velocity:iS(C,S,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:S=>{let N=!1;return!U&&q===void 0&&(N=!0,B(S),R(S)),q!==void 0&&S>q?U.next(S-q):(!N&&B(S),_)}}}const d2=t=>{const e=({timestamp:n})=>t(n);return{start:()=>nt.update(e,!0),stop:()=>yr(e),now:()=>Xt.isProcessing?Xt.timestamp:performance.now()}},hw=2e4;function dw(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<hw;)e+=n,i=t.next(e);return e>=hw?1/0:e}const f2={decay:cw,inertia:cw,tween:Dd,keyframes:Dd,spring:rS};function Vd({autoplay:t=!0,delay:e=0,driver:n=d2,keyframes:i,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:h,onStop:f,onComplete:m,onUpdate:g,..._}){let T=1,b=!1,A,j;const k=()=>{j=new Promise(ne=>{A=ne})};k();let P;const C=f2[r]||Dd;let B;C!==Dd&&typeof i[0]!="number"&&(B=tS([0,100],i,{clamp:!1}),i=[0,100]);const q=C({..._,keyframes:i});let U;u==="mirror"&&(U=C({..._,keyframes:[...i].reverse(),velocity:-(_.velocity||0)}));let R="idle",S=null,N=null,D=null;q.calculatedDuration===null&&o&&(q.calculatedDuration=dw(q));const{calculatedDuration:M}=q;let z=1/0,O=1/0;M!==null&&(z=M+a,O=z*(o+1)-a);let fe=0;const Xe=ne=>{if(N===null)return;T>0&&(N=Math.min(N,ne)),T<0&&(N=Math.min(ne-O/T,N)),S!==null?fe=S:fe=Math.round(ne-N)*T;const Ce=fe-e*(T>=0?1:-1),Ye=T>=0?Ce<0:Ce>O;fe=Math.max(Ce,0),R==="finished"&&S===null&&(fe=O);let Ne=fe,Re=q;if(o){const le=Math.min(fe,O)/z;let ge=Math.floor(le),Te=le%1;!Te&&le>=1&&(Te=1),Te===1&&ge--,ge=Math.min(ge,o+1),!!(ge%2)&&(u==="reverse"?(Te=1-Te,a&&(Te-=a/z)):u==="mirror"&&(Re=U)),Ne=ys(0,1,Te)*z}const pe=Ye?{done:!1,value:i[0]}:Re.next(Ne);B&&(pe.value=B(pe.value));let{done:ut}=pe;!Ye&&M!==null&&(ut=T>=0?fe>=O:fe<=0);const te=S===null&&(R==="finished"||R==="running"&&ut);return g&&g(pe.value),te&&Z(),pe},be=()=>{P&&P.stop(),P=void 0},Je=()=>{R="idle",be(),A(),k(),N=D=null},Z=()=>{R="finished",m&&m(),be(),A()},ce=()=>{if(b)return;P||(P=n(Xe));const ne=P.now();h&&h(),S!==null?N=ne-S:(!N||R==="finished")&&(N=ne),R==="finished"&&k(),D=N,S=null,R="running",P.start()};t&&ce();const J={then(ne,Ce){return j.then(ne,Ce)},get time(){return hr(fe)},set time(ne){ne=oo(ne),fe=ne,S!==null||!P||T===0?S=ne:N=P.now()-ne/T},get duration(){const ne=q.calculatedDuration===null?dw(q):q.calculatedDuration;return hr(ne)},get speed(){return T},set speed(ne){ne===T||!P||(T=ne,J.time=hr(fe))},get state(){return R},play:ce,pause:()=>{R="paused",S=fe},stop:()=>{b=!0,R!=="idle"&&(R="idle",f&&f(),Je())},cancel:()=>{D!==null&&Xe(D),Je()},complete:()=>{R="finished"},sample:ne=>(N=0,Xe(ne))};return J}function p2(t){let e;return()=>(e===void 0&&(e=t()),e)}const m2=p2(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),g2=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Eh=10,y2=2e4,_2=(t,e)=>e.type==="spring"||t==="backgroundColor"||!OP(e.ease);function v2(t,e,{onUpdate:n,onComplete:i,...r}){if(!(m2()&&g2.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,u,h,f=!1;const m=()=>{h=new Promise(C=>{u=C})};m();let{keyframes:g,duration:_=300,ease:T,times:b}=r;if(_2(e,r)){const C=Vd({...r,repeat:0,delay:0});let B={done:!1,value:g[0]};const q=[];let U=0;for(;!B.done&&U<y2;)B=C.sample(U),q.push(B.value),U+=Eh;b=void 0,g=q,_=U-Eh,T="linear"}const A=AN(t.owner.current,e,g,{...r,duration:_,ease:T,times:b}),j=()=>{f=!1,A.cancel()},k=()=>{f=!0,nt.update(j),u(),m()};return A.onfinish=()=>{f||(t.set(kN(g,r)),i&&i(),k())},{then(C,B){return h.then(C,B)},attachTimeline(C){return A.timeline=C,A.onfinish=null,Tt},get time(){return hr(A.currentTime||0)},set time(C){A.currentTime=oo(C)},get speed(){return A.playbackRate},set speed(C){A.playbackRate=C},get duration(){return hr(_)},play:()=>{a||(A.play(),yr(j))},pause:()=>A.pause(),stop:()=>{if(a=!0,A.playState==="idle")return;const{currentTime:C}=A;if(C){const B=Vd({...r,autoplay:!1});t.setWithVelocity(B.sample(C-Eh).value,B.sample(C).value,Eh)}k()},complete:()=>{f||A.finish()},cancel:k}}function w2({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Tt,pause:Tt,stop:Tt,then:o=>(o(),Promise.resolve()),cancel:Tt,complete:Tt});return e?Vd({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const x2={type:"spring",stiffness:500,damping:25,restSpeed:10},T2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),E2={type:"keyframes",duration:.8},P2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},S2=(t,{keyframes:e})=>e.length>2?E2:Co.has(t)?t.startsWith("scale")?T2(e[1]):x2:P2,wg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_s.test(e)||e==="0")&&!e.startsWith("url(")),C2=new Set(["brightness","contrast","saturate","opacity"]);function I2(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Of)||[];if(!i)return t;const r=n.replace(i,"");let o=C2.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const A2=/([a-z-]*)\(.*?\)/g,xg={..._s,getAnimatableNone:t=>{const e=t.match(A2);return e?e.map(I2).join(" "):t}},k2={..._P,color:an,backgroundColor:an,outlineColor:an,fill:an,stroke:an,borderColor:an,borderTopColor:an,borderRightColor:an,borderBottomColor:an,borderLeftColor:an,filter:xg,WebkitFilter:xg},p_=t=>k2[t];function sS(t,e){let n=p_(t);return n!==xg&&(n=_s),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const oS=t=>/^0[^.\s]+$/.test(t);function b2(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||oS(t)}function R2(t,e,n,i){const r=wg(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=i.from!==void 0?i.from:t.get();let u;const h=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),b2(o[f])&&h.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(r&&h.length&&u)for(let f=0;f<h.length;f++){const m=h[f];o[m]=sS(e,u)}return o}function L2({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}function m_(t,e){return t[e]||t.default||t}const N2={skipAnimations:!1},g_=(t,e,n,i={})=>r=>{const o=m_(i,t)||{},a=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-oo(a);const h=R2(e,t,n,o),f=h[0],m=h[h.length-1],g=wg(t,f),_=wg(t,m);let T={keyframes:h,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:b=>{e.set(b),o.onUpdate&&o.onUpdate(b)},onComplete:()=>{r(),o.onComplete&&o.onComplete()}};if(L2(o)||(T={...T,...S2(t,T)}),T.duration&&(T.duration=oo(T.duration)),T.repeatDelay&&(T.repeatDelay=oo(T.repeatDelay)),!g||!_||IN.current||o.type===!1||N2.skipAnimations)return w2(T);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=v2(e,t,T);if(b)return b}return Vd(T)};function jd(t){return!!(En(t)&&t.add)}const aS=t=>/^\-?\d*\.?\d+$/.test(t);function y_(t,e){t.indexOf(e)===-1&&t.push(e)}function __(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class v_{constructor(){this.subscriptions=[]}add(e){return y_(this.subscriptions,e),()=>__(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const M2=t=>!isNaN(parseFloat(t));class O2{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:o,timestamp:a}=Xt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,nt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>nt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=M2(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new v_);const i=this.events[e].add(n);return e==="change"?()=>{i(),nt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?nS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qa(t,e){return new O2(t,e)}const lS=t=>e=>e.test(t),D2={test:t=>t==="auto",parse:t=>t},uS=[Io,ve,Li,jr,HL,UL,D2],ql=t=>uS.find(lS(t)),V2=[...uS,an,_s],j2=t=>V2.find(lS(t));function F2(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qa(n))}function B2(t,e){const n=Vf(t,e);let{transitionEnd:i={},transition:r={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...i};for(const a in o){const u=iN(o[a]);F2(t,a,u)}}function z2(t,e,n){var i,r;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const h=o[u],f=e[h];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(r=(i=n[h])!==null&&i!==void 0?i:t.readValue(h))!==null&&r!==void 0?r:e[h]),m!=null&&(typeof m=="string"&&(aS(m)||oS(m))?m=parseFloat(m):!j2(m)&&_s.test(f)&&(m=sS(h,f)),t.addValue(h,qa(m,{owner:t})),n[h]===void 0&&(n[h]=m),m!==null&&t.setBaseTarget(h,m))}}function U2(t,e){return e?(e[t]||e.default||e).from:void 0}function H2(t,e,n){const i={};for(const r in t){const o=U2(r,e);if(o!==void 0)i[r]=o;else{const a=n.getValue(r);a&&(i[r]=a.get())}}return i}function W2({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function $2(t,e){const n=t.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==n)return!0}else return n!==e}function cS(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const h=t.getValue("willChange");i&&(o=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const _=t.getValue(g),T=u[g];if(!_||T===void 0||m&&W2(m,g))continue;const b={delay:n,elapsed:0,...m_(o||{},g)};if(window.HandoffAppearAnimations){const k=t.getProps()[hP];if(k){const P=window.HandoffAppearAnimations(k,g,_,nt);P!==null&&(b.elapsed=P,b.isHandoff=!0)}}let A=!b.isHandoff&&!$2(_,T);if(b.type==="spring"&&(_.getVelocity()||b.velocity)&&(A=!1),_.animation&&(A=!1),A)continue;_.start(g_(g,_,T,t.shouldReduceMotion&&Co.has(g)?{type:!1}:b));const j=_.animation;jd(h)&&(h.add(g),j.then(()=>h.remove(g))),f.push(j)}return a&&Promise.all(f).then(()=>{a&&B2(t,a)}),f}function Tg(t,e,n={}){const i=Vf(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(cS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=r;return G2(t,e,f+h,m,g,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[h,f]=u==="beforeChildren"?[o,a]:[a,o];return h().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function G2(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(q2).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(Tg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function q2(t,e){return t.sortNodePosition(e)}function Z2(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Tg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Tg(t,e,n);else{const r=typeof e=="function"?Vf(t,e,n.custom):e;i=Promise.all(cS(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const K2=[...e_].reverse(),Q2=e_.length;function X2(t){return e=>Promise.all(e.map(({animation:n,options:i})=>Z2(t,n,i)))}function Y2(t){let e=X2(t);const n=eM();let i=!0;const r=(h,f)=>{const m=Vf(t,f);if(m){const{transition:g,transitionEnd:_,...T}=m;h={...h,...T,..._}}return h};function o(h){e=h(t)}function a(h,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},_=[],T=new Set;let b={},A=1/0;for(let k=0;k<Q2;k++){const P=K2[k],C=n[P],B=m[P]!==void 0?m[P]:g[P],q=Zu(B),U=P===f?C.isActive:null;U===!1&&(A=k);let R=B===g[P]&&B!==m[P]&&q;if(R&&i&&t.manuallyAnimateOnMount&&(R=!1),C.protectedKeys={...b},!C.isActive&&U===null||!B&&!C.prevProp||Nf(B)||typeof B=="boolean")continue;let N=J2(C.prevProp,B)||P===f&&C.isActive&&!R&&q||k>A&&q,D=!1;const M=Array.isArray(B)?B:[B];let z=M.reduce(r,{});U===!1&&(z={});const{prevResolvedValues:O={}}=C,fe={...O,...z},Xe=be=>{N=!0,T.has(be)&&(D=!0,T.delete(be)),C.needsAnimating[be]=!0};for(const be in fe){const Je=z[be],Z=O[be];if(b.hasOwnProperty(be))continue;let ce=!1;Md(Je)&&Md(Z)?ce=!NP(Je,Z):ce=Je!==Z,ce?Je!==void 0?Xe(be):T.add(be):Je!==void 0&&T.has(be)?Xe(be):C.protectedKeys[be]=!0}C.prevProp=B,C.prevResolvedValues=z,C.isActive&&(b={...b,...z}),i&&t.blockInitialAnimation&&(N=!1),N&&(!R||D)&&_.push(...M.map(be=>({animation:be,options:{type:P,...h}})))}if(T.size){const k={};T.forEach(P=>{const C=t.getBaseTarget(P);C!==void 0&&(k[P]=C)}),_.push({animation:k})}let j=!!_.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(j=!1),i=!1,j?e(_):Promise.resolve()}function u(h,f,m){var g;if(n[h].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(T=>{var b;return(b=T.animationState)===null||b===void 0?void 0:b.setActive(h,f)}),n[h].isActive=f;const _=a(m,h);for(const T in n)n[T].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function J2(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!NP(e,t):!1}function $s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function eM(){return{animate:$s(!0),whileInView:$s(),whileHover:$s(),whileTap:$s(),whileDrag:$s(),whileFocus:$s(),exit:$s()}}class tM extends bs{constructor(e){super(e),e.animationState||(e.animationState=Y2(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Nf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let nM=0;class iM extends bs{constructor(){super(...arguments),this.id=nM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const rM={animation:{Feature:tM},exit:{Feature:iM}},fw=(t,e)=>Math.abs(t-e);function sM(t,e){const n=fw(t.x,e.x),i=fw(t.y,e.y);return Math.sqrt(n**2+i**2)}class hS{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Jp(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,T=sM(g.offset,{x:0,y:0})>=3;if(!_&&!T)return;const{point:b}=g,{timestamp:A}=Xt;this.history.push({...b,timestamp:A});const{onStart:j,onMove:k}=this.handlers;_||(j&&j(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Yp(_,this.transformPagePoint),nt.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{this.end();const{onEnd:T,onSessionEnd:b,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Jp(g.type==="pointercancel"?this.lastMoveEventInfo:Yp(_,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,j),b&&b(g,j)},!AP(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Df(e),u=Yp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=Xt;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,Jp(u,this.history)),this.removeListeners=as(cr(this.contextWindow,"pointermove",this.handlePointerMove),cr(this.contextWindow,"pointerup",this.handlePointerUp),cr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yr(this.updatePoint)}}function Yp(t,e){return e?{point:e(t.point)}:t}function pw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jp({point:t},e){return{point:t,delta:pw(t,dS(e)),offset:pw(t,oM(e)),velocity:aM(e,.1)}}function oM(t){return t[0]}function dS(t){return t[t.length-1]}function aM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=dS(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>oo(e)));)n--;if(!i)return{x:0,y:0};const o=hr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Ln(t){return t.max-t.min}function Eg(t,e=0,n=.01){return Math.abs(t-e)<=n}function mw(t,e,n,i=.5){t.origin=i,t.originPoint=ht(e.min,e.max,t.origin),t.scale=Ln(n)/Ln(e),(Eg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ht(n.min,n.max,t.origin)-t.originPoint,(Eg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function wu(t,e,n,i){mw(t.x,e.x,n.x,i?i.originX:void 0),mw(t.y,e.y,n.y,i?i.originY:void 0)}function gw(t,e,n){t.min=n.min+e.min,t.max=t.min+Ln(e)}function lM(t,e,n){gw(t.x,e.x,n.x),gw(t.y,e.y,n.y)}function yw(t,e,n){t.min=e.min-n.min,t.max=t.min+Ln(e)}function xu(t,e,n){yw(t.x,e.x,n.x),yw(t.y,e.y,n.y)}function uM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?ht(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?ht(n,t,i.max):Math.min(t,n)),t}function _w(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function cM(t,{top:e,left:n,bottom:i,right:r}){return{x:_w(t.x,n,r),y:_w(t.y,e,i)}}function vw(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function hM(t,e){return{x:vw(t.x,e.x),y:vw(t.y,e.y)}}function dM(t,e){let n=.5;const i=Ln(t),r=Ln(e);return r>i?n=Qu(e.min,e.max-i,t.min):i>r&&(n=Qu(t.min,t.max-r,e.min)),ys(0,1,n)}function fM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Pg=.35;function pM(t=Pg){return t===!1?t=0:t===!0&&(t=Pg),{x:ww(t,"left","right"),y:ww(t,"top","bottom")}}function ww(t,e,n){return{min:xw(t,e),max:xw(t,n)}}function xw(t,e){return typeof t=="number"?t:t[e]||0}const Tw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sa=()=>({x:Tw(),y:Tw()}),Ew=()=>({min:0,max:0}),It=()=>({x:Ew(),y:Ew()});function $n(t){return[t("x"),t("y")]}function fS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function mM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function gM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function em(t){return t===void 0||t===1}function Sg({scale:t,scaleX:e,scaleY:n}){return!em(t)||!em(e)||!em(n)}function Zs(t){return Sg(t)||pS(t)||t.z||t.rotate||t.rotateX||t.rotateY}function pS(t){return Pw(t.x)||Pw(t.y)}function Pw(t){return t&&t!=="0%"}function Fd(t,e,n){const i=t-n,r=e*i;return n+r}function Sw(t,e,n,i,r){return r!==void 0&&(t=Fd(t,r,i)),Fd(t,n,i)+e}function Cg(t,e=0,n=1,i,r){t.min=Sw(t.min,e,n,i,r),t.max=Sw(t.max,e,n,i,r)}function mS(t,{x:e,y:n}){Cg(t.x,e.translate,e.scale,e.originPoint),Cg(t.y,n.translate,n.scale,n.originPoint)}function yM(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const h=o.instance;h&&h.style&&h.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ca(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,mS(t,a)),i&&Zs(o.latestValues)&&Ca(t,o.latestValues))}e.x=Cw(e.x),e.y=Cw(e.y)}function Cw(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function zr(t,e){t.min=t.min+e,t.max=t.max+e}function Iw(t,e,[n,i,r]){const o=e[r]!==void 0?e[r]:.5,a=ht(t.min,t.max,o);Cg(t,e[n],e[i],a,e.scale)}const _M=["x","scaleX","originX"],vM=["y","scaleY","originY"];function Ca(t,e){Iw(t.x,e,_M),Iw(t.y,e,vM)}function gS(t,e){return fS(gM(t.getBoundingClientRect(),e))}function wM(t,e,n){const i=gS(t,n),{scroll:r}=e;return r&&(zr(i.x,r.offset.x),zr(i.y,r.offset.y)),i}const yS=({current:t})=>t?t.ownerDocument.defaultView:null,xM=new WeakMap;class TM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=It(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Df(m,"page").point)},o=(m,g)=>{const{drag:_,dragPropagation:T,onDragStart:b}=this.getProps();if(_&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=bP(_),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$n(j=>{let k=this.getAxisMotionValue(j).get()||0;if(Li.test(k)){const{projection:P}=this.visualElement;if(P&&P.layout){const C=P.layout.layoutBox[j];C&&(k=Ln(C)*(parseFloat(k)/100))}}this.originPoint[j]=k}),b&&nt.update(()=>b(m,g),!1,!0);const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:_,dragDirectionLock:T,onDirectionLock:b,onDrag:A}=this.getProps();if(!_&&!this.openGlobalLock)return;const{offset:j}=g;if(T&&this.currentDirection===null){this.currentDirection=EM(j),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,j),this.updateAxis("y",g.point,j),this.visualElement.render(),A&&A(m,g)},u=(m,g)=>this.stop(m,g),h=()=>$n(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new hS(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:yS(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&nt.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Ph(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=uM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Ea(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=cM(r.layoutBox,n):this.constraints=!1,this.elastic=pM(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$n(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=fM(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ea(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=wM(i,r.root,this.visualElement.getTransformPagePoint());let a=hM(r.layout.layoutBox,o);if(n){const u=n(mM(a));this.hasMutatedConstraints=!!u,u&&(a=fS(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=$n(m=>{if(!Ph(m,n,this.currentDirection))return;let g=h&&h[m]||{};a&&(g={min:0,max:0});const _=r?200:1e6,T=r?40:1e7,b={type:"inertia",velocity:i?e[m]:0,bounceStiffness:_,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,b)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(g_(e,i,0,n))}stopAnimation(){$n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$n(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){$n(n=>{const{drag:i}=this.getProps();if(!Ph(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-ht(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ea(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};$n(a=>{const u=this.getAxisMotionValue(a);if(u){const h=u.get();r[a]=dM({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),$n(a=>{if(!Ph(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(ht(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;xM.set(this.visualElement,this);const e=this.visualElement.current,n=cr(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Ea(h)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const a=or(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&($n(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Pg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function Ph(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function EM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class PM extends bs{constructor(e){super(e),this.removeGroupControls=Tt,this.removeListeners=Tt,this.controls=new TM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Aw=t=>(e,n)=>{t&&nt.update(()=>t(e,n))};class SM extends bs{constructor(){super(...arguments),this.removePointerDownListener=Tt}onPointerDown(e){this.session=new hS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Aw(e),onStart:Aw(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&nt.update(()=>r(o,a))}}}mount(){this.removePointerDownListener=cr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function CM(){const t=V.useContext(Rf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=V.useId();return V.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Zh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Zl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ve.test(t))t=parseFloat(t);else return t;const n=kw(t,e.target.x),i=kw(t,e.target.y);return`${n}% ${i}%`}},IM={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=_s.parse(t);if(r.length>5)return i;const o=_s.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=ht(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class AM extends co.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;OL(kM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Zh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||nt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _S(t){const[e,n]=CM(),i=V.useContext(n_);return co.createElement(AM,{...t,layoutGroup:i,switchLayoutGroup:V.useContext(fP),isPresent:e,safeToRemove:n})}const kM={borderRadius:{...Zl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zl,borderTopRightRadius:Zl,borderBottomLeftRadius:Zl,borderBottomRightRadius:Zl,boxShadow:IM},vS=["TopLeft","TopRight","BottomLeft","BottomRight"],bM=vS.length,bw=t=>typeof t=="string"?parseFloat(t):t,Rw=t=>typeof t=="number"||ve.test(t);function RM(t,e,n,i,r,o){r?(t.opacity=ht(0,n.opacity!==void 0?n.opacity:1,LM(i)),t.opacityExit=ht(e.opacity!==void 0?e.opacity:1,0,NM(i))):o&&(t.opacity=ht(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<bM;a++){const u=`border${vS[a]}Radius`;let h=Lw(e,u),f=Lw(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Rw(h)===Rw(f)?(t[u]=Math.max(ht(bw(h),bw(f),i),0),(Li.test(f)||Li.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=ht(e.rotate||0,n.rotate||0,i))}function Lw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const LM=wS(0,.5,UP),NM=wS(.5,.95,Tt);function wS(t,e,n){return i=>i<t?0:i>e?1:n(Qu(t,e,i))}function Nw(t,e){t.min=e.min,t.max=e.max}function Wn(t,e){Nw(t.x,e.x),Nw(t.y,e.y)}function Mw(t,e,n,i,r){return t-=e,t=Fd(t,1/n,i),r!==void 0&&(t=Fd(t,1/r,i)),t}function MM(t,e=0,n=1,i=.5,r,o=t,a=t){if(Li.test(e)&&(e=parseFloat(e),e=ht(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=ht(o.min,o.max,i);t===o&&(u-=e),t.min=Mw(t.min,e,n,u,r),t.max=Mw(t.max,e,n,u,r)}function Ow(t,e,[n,i,r],o,a){MM(t,e[n],e[i],e[r],e.scale,o,a)}const OM=["x","scaleX","originX"],DM=["y","scaleY","originY"];function Dw(t,e,n,i){Ow(t.x,e,OM,n?n.x:void 0,i?i.x:void 0),Ow(t.y,e,DM,n?n.y:void 0,i?i.y:void 0)}function Vw(t){return t.translate===0&&t.scale===1}function xS(t){return Vw(t.x)&&Vw(t.y)}function VM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function TS(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function jw(t){return Ln(t.x)/Ln(t.y)}class jM{constructor(){this.members=[]}add(e){y_(this.members,e),e.scheduleRender()}remove(e){if(__(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Fw(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y;if((r||o)&&(i=`translate3d(${r}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:h,rotateX:f,rotateY:m}=n;h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(i+=`scale(${a}, ${u})`),i||"none"}const FM=(t,e)=>t.depth-e.depth;class BM{constructor(){this.children=[],this.isDirty=!1}add(e){y_(this.children,e),this.isDirty=!0}remove(e){__(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(FM),this.isDirty=!1,this.children.forEach(e)}}function zM(t,e){const n=performance.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(yr(i),t(o-e))};return nt.read(i,!0),()=>yr(i)}function UM(t){window.MotionDebug&&window.MotionDebug.record(t)}function HM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function WM(t,e,n){const i=En(t)?t:qa(t);return i.start(g_("",i,e,n)),i.animation}const Bw=["","X","Y","Z"],$M={visibility:"hidden"},zw=1e3;let GM=0;const Ks={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function ES({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=GM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ks.totalNodes=Ks.resolvedTargetDeltas=Ks.recalculatedProjection=0,this.nodes.forEach(KM),this.nodes.forEach(eO),this.nodes.forEach(tO),this.nodes.forEach(QM),UM(Ks)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new BM)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new v_),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=HM(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const _=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=zM(_,250),Zh.hasAnimatedSinceResize&&(Zh.hasAnimatedSinceResize=!1,this.nodes.forEach(Hw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeTargetChanged:T,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||m.getDefaultTransition()||oO,{onLayoutAnimationStart:j,onLayoutAnimationComplete:k}=m.getProps(),P=!this.targetLayout||!TS(this.targetLayout,b)||T,C=!_&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||_&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,C);const B={...m_(A,"layout"),onPlay:j,onComplete:k};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else _||Hw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Uw);return}this.isUpdating||this.nodes.forEach(YM),this.isUpdating=!1,this.nodes.forEach(JM),this.nodes.forEach(qM),this.nodes.forEach(ZM),this.clearAllSnapshots();const u=performance.now();Xt.delta=ys(0,1e3/60,u-Xt.timestamp),Xt.timestamp=u,Xt.isProcessing=!0,Wp.update.process(Xt),Wp.preRender.process(Xt),Wp.render.process(Xt),Xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(XM),this.sharedNodes.forEach(iO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=It(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!xS(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Zs(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),aO(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return It();const u=a.measureViewportBox(),{scroll:h}=this.root;return h&&(zr(u.x,h.offset.x),zr(u.y,h.offset.y)),u}removeElementScroll(a){const u=It();Wn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){Wn(u,a);const{scroll:_}=this.root;_&&(zr(u.x,-_.offset.x),zr(u.y,-_.offset.y))}zr(u.x,m.offset.x),zr(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const h=It();Wn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Ca(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Zs(m.latestValues)&&Ca(h,m.latestValues)}return Zs(this.latestValues)&&Ca(h,this.latestValues),h}removeTransform(a){const u=It();Wn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Zs(f.latestValues))continue;Sg(f.latestValues)&&f.updateSnapshot();const m=It(),g=f.measurePageBox();Wn(m,g),Dw(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Zs(this.latestValues)&&Dw(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Xt.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),xu(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=It(),this.targetWithTransforms=It()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wn(this.target,this.layout.layoutBox),mS(this.target,this.targetDelta)):Wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),xu(this.relativeTargetOrigin,this.target,T.target),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ks.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Sg(this.parent.latestValues)||pS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Xt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Wn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,T=this.treeScale.y;yM(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:b}=u;if(!b){this.projectionTransform&&(this.projectionDelta=Sa(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Sa(),this.projectionDeltaWithTransform=Sa());const A=this.projectionTransform;wu(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=Fw(this.projectionDelta,this.treeScale),(this.projectionTransform!==A||this.treeScale.x!==_||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Ks.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},g=Sa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=It(),T=h?h.source:void 0,b=this.layout?this.layout.source:void 0,A=T!==b,j=this.getStack(),k=!j||j.members.length<=1,P=!!(A&&!k&&this.options.crossfade===!0&&!this.path.some(sO));this.animationProgress=0;let C;this.mixTargetDelta=B=>{const q=B/1e3;Ww(g.x,a.x,q),Ww(g.y,a.y,q),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rO(this.relativeTarget,this.relativeTargetOrigin,_,q),C&&VM(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=It()),Wn(C,this.relativeTarget)),A&&(this.animationValues=m,RM(m,f,this.latestValues,q,P,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nt.update(()=>{Zh.hasAnimatedSinceResize=!0,this.currentAnimation=WM(0,zw,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&PS(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||It();const g=Ln(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+g;const _=Ln(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+_}Wn(u,h),Ca(u,m),wu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new jM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.rotate||h.rotateX||h.rotateY||h.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<Bw.length;m++){const g="rotate"+Bw[m];h[g]&&(f[g]=h[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $M;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=qh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=qh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Zs(this.latestValues)&&(A.transform=m?m({},""):"none",this.hasProjected=!1),A}const _=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=Fw(this.projectionDeltaWithTransform,this.treeScale,_),m&&(f.transform=m(_,f.transform));const{x:T,y:b}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${b.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const A in Ld){if(_[A]===void 0)continue;const{correct:j,applyTo:k}=Ld[A],P=f.transform==="none"?_[A]:j(_[A],g);if(k){const C=k.length;for(let B=0;B<C;B++)f[k[B]]=P}else f[A]=P}return this.options.layoutId&&(f.pointerEvents=g===this?qh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Uw),this.root.sharedNodes.clear()}}}function qM(t){t.updateLayout()}function ZM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?$n(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],T=Ln(_);_.min=i[g].min,_.max=_.min+T}):PS(o,n.layoutBox,i)&&$n(g=>{const _=a?n.measuredBox[g]:n.layoutBox[g],T=Ln(i[g]);_.max=_.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const u=Sa();wu(u,i,n.layoutBox);const h=Sa();a?wu(h,t.applyTransform(r,!0),n.measuredBox):wu(h,i,n.layoutBox);const f=!xS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:T}=g;if(_&&T){const b=It();xu(b,n.layoutBox,_.layoutBox);const A=It();xu(A,i,T.layoutBox),TS(b,A)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=b,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function KM(t){Ks.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function QM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XM(t){t.clearSnapshot()}function Uw(t){t.clearMeasurements()}function YM(t){t.isLayoutDirty=!1}function JM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Hw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function eO(t){t.resolveTargetDelta()}function tO(t){t.calcProjection()}function nO(t){t.resetRotation()}function iO(t){t.removeLeadSnapshot()}function Ww(t,e,n){t.translate=ht(e.translate,0,n),t.scale=ht(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $w(t,e,n,i){t.min=ht(e.min,n.min,i),t.max=ht(e.max,n.max,i)}function rO(t,e,n,i){$w(t.x,e.x,n.x,i),$w(t.y,e.y,n.y,i)}function sO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const oO={duration:.45,ease:[.4,0,.1,1]},Gw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),qw=Gw("applewebkit/")&&!Gw("chrome/")?Math.round:Tt;function Zw(t){t.min=qw(t.min),t.max=qw(t.max)}function aO(t){Zw(t.x),Zw(t.y)}function PS(t,e,n){return t==="position"||t==="preserve-aspect"&&!Eg(jw(e),jw(n),.2)}const lO=ES({attachResizeListener:(t,e)=>or(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tm={current:void 0},SS=ES({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tm.current){const t=new lO({});t.mount(window),t.setOptions({layoutScroll:!0}),tm.current=t}return tm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uO={pan:{Feature:SM},drag:{Feature:PM,ProjectionNode:SS,MeasureLayout:_S}},cO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function hO(t){const e=cO.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function Ig(t,e,n=1){const[i,r]=hO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return aS(a)?parseFloat(a):a}else return gg(r)?Ig(r,e,n+1):r}function dO(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const o=r.get();if(!gg(o))return;const a=Ig(o,i);a&&r.set(a)});for(const r in e){const o=e[r];if(!gg(o))continue;const a=Ig(o,i);a&&(e[r]=a,n||(n={}),n[r]===void 0&&(n[r]=o))}return{target:e,transitionEnd:n}}const fO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),CS=t=>fO.has(t),pO=t=>Object.keys(t).some(CS),Kw=t=>t===Io||t===ve,Qw=(t,e)=>parseFloat(t.split(", ")[e]),Xw=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Qw(r[1],e);{const o=i.match(/^matrix\((.+)\)$/);return o?Qw(o[1],t):0}},mO=new Set(["x","y","z"]),gO=hc.filter(t=>!mO.has(t));function yO(t){const e=[];return gO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Za={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Xw(4,13),y:Xw(5,14)};Za.translateX=Za.x;Za.translateY=Za.y;const _O=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,o=getComputedStyle(r),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=Za[f](i,o)}),e.render();const h=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=Za[f](h,o)}),t},vO=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(CS);let o=[],a=!1;const u=[];if(r.forEach(h=>{const f=t.getValue(h);if(!t.hasValue(h))return;let m=n[h],g=ql(m);const _=e[h];let T;if(Md(_)){const b=_.length,A=_[0]===null?1:0;m=_[A],g=ql(m);for(let j=A;j<b&&_[j]!==null;j++)T?c_(ql(_[j])===T):T=ql(_[j])}else T=ql(_);if(g!==T)if(Kw(g)&&Kw(T)){const b=f.get();typeof b=="string"&&f.set(parseFloat(b)),typeof _=="string"?e[h]=parseFloat(_):Array.isArray(_)&&T===ve&&(e[h]=_.map(parseFloat))}else g!=null&&g.transform&&(T!=null&&T.transform)&&(m===0||_===0)?m===0?f.set(T.transform(m)):e[h]=g.transform(_):(a||(o=yO(t),a=!0),u.push(h),i[h]=i[h]!==void 0?i[h]:e[h],f.jump(_))}),u.length){const h=u.indexOf("height")>=0?window.pageYOffset:null,f=_O(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),Lf&&h!==null&&window.scrollTo({top:h}),{target:f,transitionEnd:i}}else return{target:e,transitionEnd:i}};function wO(t,e,n,i){return pO(e)?vO(t,e,n,i):{target:e,transitionEnd:i}}const xO=(t,e,n,i)=>{const r=dO(t,e,i);return e=r.target,i=r.transitionEnd,wO(t,e,n,i)},Ag={current:null},IS={current:!1};function TO(){if(IS.current=!0,!!Lf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ag.current=t.matches;t.addListener(e),e()}else Ag.current=!1}function EO(t,e,n){const{willChange:i}=e;for(const r in e){const o=e[r],a=n[r];if(En(o))t.addValue(r,o),jd(i)&&i.add(r);else if(En(a))t.addValue(r,qa(o,{owner:t})),jd(i)&&i.remove(r);else if(a!==o)if(t.hasValue(r)){const u=t.getValue(r);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(r);t.addValue(r,qa(u!==void 0?u:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Yw=new WeakMap,AS=Object.keys(Ku),PO=AS.length,Jw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],SO=t_.length;class CO{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>nt.render(this.render,!1,!0);const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Mf(n),this.isVariantNode=dP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const _=m[g];u[g]!==void 0&&En(_)&&(_.set(u[g],!1),jd(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Yw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),IS.current||TO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ag.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Yw.delete(this.current),this.projection&&this.projection.unmount(),yr(this.notifyUpdate),yr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=Co.has(e),r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&nt.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,o){let a,u;for(let h=0;h<PO;h++){const f=AS[h],{isEnabled:m,Feature:g,ProjectionNode:_,MeasureLayout:T}=Ku[f];_&&(a=_),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:h,layout:f,drag:m,dragConstraints:g,layoutScroll:_,layoutRoot:T}=n;this.projection.setOptions({layoutId:h,layout:f,alwaysMeasureLayout:!!m||g&&Ea(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:_,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):It()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Jw.length;i++){const r=Jw[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o=e["on"+r];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=EO(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<SO;i++){const r=t_[i],o=this.props[r];(Zu(o)||o===!1)&&(n[r]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=qa(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=u_(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!En(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new v_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class kS extends CO{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},o){let a=H2(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),a&&(a=r(a))),o){z2(this,i,a);const u=xO(this,i,a,n);n=u.transitionEnd,i=u.target}return{transition:e,transitionEnd:n,...i}}}function IO(t){return window.getComputedStyle(t)}class AO extends kS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Co.has(n)){const i=p_(n);return i&&i.default||0}else{const i=IO(e),r=(gP(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return gS(e,n)}build(e,n,i,r){r_(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return l_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;En(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){TP(e,n,i,r)}}class kO extends kS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Co.has(n)){const i=p_(n);return i&&i.default||0}return n=EP.has(n)?n:Jy(n),e.getAttribute(n)}measureInstanceViewportBox(){return It()}scrapeMotionValuesFromProps(e,n){return SP(e,n)}build(e,n,i,r){o_(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){PP(e,n,i,r)}mount(e){this.isSVGTag=a_(e.tagName),super.mount(e)}}const bO=(t,e)=>i_(t)?new kO(e,{enableHardwareAcceleration:!1}):new AO(e,{enableHardwareAcceleration:!0}),RO={layout:{ProjectionNode:SS,MeasureLayout:_S}},LO={...rM,...PN,...uO,...RO},re=NL((t,e)=>hN(t,e,LO,bO));function bS(){const t=V.useRef(!1);return Yy(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function NO(){const t=bS(),[e,n]=V.useState(0),i=V.useCallback(()=>{t.current&&n(e+1)},[e]);return[V.useCallback(()=>nt.postRender(i),[i]),e]}class MO extends V.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function OO({children:t,isPresent:e}){const n=V.useId(),i=V.useRef(null),r=V.useRef({width:0,height:0,top:0,left:0});return V.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:h}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),V.createElement(MO,{isPresent:e,childRef:i,sizeRef:r},V.cloneElement(t,{ref:i}))}const nm=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a})=>{const u=CP(DO),h=V.useId(),f=V.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return V.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),V.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=V.createElement(OO,{isPresent:n},t)),V.createElement(Rf.Provider,{value:f},t)};function DO(){return new Map}function VO(t){return V.useEffect(()=>()=>t(),[])}const Qs=t=>t.key||"";function jO(t,e){t.forEach(n=>{const i=Qs(n);e.set(i,n)})}function FO(t){const e=[];return V.Children.forEach(t,n=>{V.isValidElement(n)&&e.push(n)}),e}const Xu=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=V.useContext(n_).forceRender||NO()[0],h=bS(),f=FO(t);let m=f;const g=V.useRef(new Map).current,_=V.useRef(m),T=V.useRef(new Map).current,b=V.useRef(!0);if(Yy(()=>{b.current=!1,jO(f,T),_.current=m}),VO(()=>{b.current=!0,T.clear(),g.clear()}),b.current)return V.createElement(V.Fragment,null,m.map(P=>V.createElement(nm,{key:Qs(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},P)));m=[...m];const A=_.current.map(Qs),j=f.map(Qs),k=A.length;for(let P=0;P<k;P++){const C=A[P];j.indexOf(C)===-1&&!g.has(C)&&g.set(C,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((P,C)=>{if(j.indexOf(C)!==-1)return;const B=T.get(C);if(!B)return;const q=A.indexOf(C);let U=P;if(!U){const R=()=>{g.delete(C);const S=Array.from(T.keys()).filter(N=>!j.includes(N));if(S.forEach(N=>T.delete(N)),_.current=f.filter(N=>{const D=Qs(N);return D===C||S.includes(D)}),!g.size){if(h.current===!1)return;u(),i&&i()}};U=V.createElement(nm,{key:Qs(B),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:o,mode:a},B),g.set(C,U)}m.splice(q,0,U)}),m=m.map(P=>{const C=P.key;return g.has(C)?P:V.createElement(nm,{key:Qs(P),isPresent:!0,presenceAffectsLayout:o,mode:a},P)}),V.createElement(V.Fragment,null,g.size?m:m.map(P=>V.cloneElement(P)))},BO=()=>{};var ex={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},zO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},LS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,T=f&63;h||(T=64,a||(_=64)),i.push(n[m],n[g],n[_],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||g==null)throw new UO;const _=o<<2|u>>4;if(i.push(_),f!==64){const T=u<<4&240|f>>2;if(i.push(T),g!==64){const b=f<<6&192|g;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HO=function(t){const e=RS(t);return LS.encodeByteArray(e,!0)},Bd=function(t){return HO(t).replace(/\./g,"")},NS=function(t){try{return LS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=()=>WO().__FIREBASE_DEFAULTS__,GO=()=>{if(typeof process>"u"||typeof ex>"u")return;const t=ex.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NS(t[1]);return e&&JSON.parse(e)},jf=()=>{try{return BO()||$O()||GO()||qO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MS=t=>{var e,n;return(n=(e=jf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},ZO=t=>{const e=MS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},OS=()=>{var t;return(t=jf())==null?void 0:t.config},DS=t=>{var e;return(e=jf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function VS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bd(JSON.stringify(n)),Bd(JSON.stringify(a)),""].join(".")}const Tu={};function XO(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tu))Tu[e]?t.emulator.push(e):t.prod.push(e);return t}function YO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let tx=!1;function jS(t,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||Tu[t]===e||Tu[t]||tx)return;Tu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=XO().prod.length>0;function a(){const _=document.getElementById(i);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{tx=!0,a()},_}function m(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=YO(i),T=n("text"),b=document.getElementById(T)||document.createElement("span"),A=n("learnmore"),j=document.getElementById(A)||document.createElement("a"),k=n("preprendIcon"),P=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const C=_.element;u(C),m(j,A);const B=f();h(P,k),C.append(P,b,j,B),document.body.appendChild(C)}o?(b.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function eD(){var e;const t=(e=jf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function iD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rD(){const t=nn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sD(){return!eD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oD(){try{return typeof indexedDB=="object"}catch{return!1}}function aD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="FirebaseError";class Sr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=lD,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?uD(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Sr(r,u,i)}}function uD(t,e){return t.replace(cD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const cD=/\{\$([^}]+)}/g;function hD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(nx(o)&&nx(a)){if(!yo(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function nx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function dD(t,e){const n=new fD(t,e);return n.subscribe.bind(n)}class fD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");pD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=im),r.error===void 0&&(r.error=im),r.complete===void 0&&(r.complete=im);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function im(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t){return t&&t._delegate?t._delegate:t}class _o{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new KO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yD(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gD(t){return t===Xs?void 0:t}function yD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ve||(Ve={}));const vD={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},wD=Ve.INFO,xD={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},TD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=xD[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class w_{constructor(e){this.name=e,this._logLevel=wD,this._logHandler=TD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const ED=(t,e)=>e.some(n=>t instanceof n);let ix,rx;function PD(){return ix||(ix=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SD(){return rx||(rx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FS=new WeakMap,kg=new WeakMap,BS=new WeakMap,rm=new WeakMap,x_=new WeakMap;function CD(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(ls(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&FS.set(n,t)}).catch(()=>{}),x_.set(e,t),e}function ID(t){if(kg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});kg.set(t,e)}let bg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AD(t){bg=t(bg)}function kD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(sm(this),e,...n);return BS.set(i,e.sort?e.sort():[e]),ls(i)}:SD().includes(t)?function(...e){return t.apply(sm(this),e),ls(FS.get(this))}:function(...e){return ls(t.apply(sm(this),e))}}function bD(t){return typeof t=="function"?kD(t):(t instanceof IDBTransaction&&ID(t),ED(t,PD())?new Proxy(t,bg):t)}function ls(t){if(t instanceof IDBRequest)return CD(t);if(rm.has(t))return rm.get(t);const e=bD(t);return e!==t&&(rm.set(t,e),x_.set(e,t)),e}const sm=t=>x_.get(t);function RD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=ls(a);return i&&a.addEventListener("upgradeneeded",h=>{i(ls(a.result),h.oldVersion,h.newVersion,ls(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const LD=["get","getKey","getAll","getAllKeys","count"],ND=["put","add","delete","clear"],om=new Map;function sx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(om.get(e))return om.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=ND.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||LD.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return om.set(e,o),o}AD(t=>({...t,get:(e,n,i)=>sx(e,n)||t.get(e,n,i),has:(e,n)=>!!sx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function OD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rg="@firebase/app",ox="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new w_("@firebase/app"),DD="@firebase/app-compat",VD="@firebase/analytics-compat",jD="@firebase/analytics",FD="@firebase/app-check-compat",BD="@firebase/app-check",zD="@firebase/auth",UD="@firebase/auth-compat",HD="@firebase/database",WD="@firebase/data-connect",$D="@firebase/database-compat",GD="@firebase/functions",qD="@firebase/functions-compat",ZD="@firebase/installations",KD="@firebase/installations-compat",QD="@firebase/messaging",XD="@firebase/messaging-compat",YD="@firebase/performance",JD="@firebase/performance-compat",eV="@firebase/remote-config",tV="@firebase/remote-config-compat",nV="@firebase/storage",iV="@firebase/storage-compat",rV="@firebase/firestore",sV="@firebase/ai",oV="@firebase/firestore-compat",aV="firebase",lV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="[DEFAULT]",uV={[Rg]:"fire-core",[DD]:"fire-core-compat",[jD]:"fire-analytics",[VD]:"fire-analytics-compat",[BD]:"fire-app-check",[FD]:"fire-app-check-compat",[zD]:"fire-auth",[UD]:"fire-auth-compat",[HD]:"fire-rtdb",[WD]:"fire-data-connect",[$D]:"fire-rtdb-compat",[GD]:"fire-fn",[qD]:"fire-fn-compat",[ZD]:"fire-iid",[KD]:"fire-iid-compat",[QD]:"fire-fcm",[XD]:"fire-fcm-compat",[YD]:"fire-perf",[JD]:"fire-perf-compat",[eV]:"fire-rc",[tV]:"fire-rc-compat",[nV]:"fire-gcs",[iV]:"fire-gcs-compat",[rV]:"fire-fst",[oV]:"fire-fst-compat",[sV]:"fire-vertex","fire-js":"fire-js",[aV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=new Map,cV=new Map,Ng=new Map;function ax(t,e){try{t.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ka(t){const e=t.name;if(Ng.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;Ng.set(e,t);for(const n of zd.values())ax(n,t);for(const n of cV.values())ax(n,t);return!0}function T_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ci(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new mc("app","Firebase",hV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _o("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=lV;function zS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Lg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw us.create("bad-app-name",{appName:String(r)});if(n||(n=OS()),!n)throw us.create("no-options");const o=zd.get(r);if(o){if(yo(n,o.options)&&yo(i,o.config))return o;throw us.create("duplicate-app",{appName:r})}const a=new _D(r);for(const h of Ng.values())a.addComponent(h);const u=new dV(n,i,a);return zd.set(r,u),u}function US(t=Lg){const e=zd.get(t);if(!e&&t===Lg&&OS())return zS();if(!e)throw us.create("no-app",{appName:t});return e}function cs(t,e,n){let i=uV[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(a.join(" "));return}Ka(new _o(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="firebase-heartbeat-database",pV=1,Yu="firebase-heartbeat-store";let am=null;function HS(){return am||(am=RD(fV,pV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw us.create("idb-open",{originalErrorMessage:t.message})})),am}async function mV(t){try{const n=(await HS()).transaction(Yu),i=await n.objectStore(Yu).get(WS(t));return await n.done,i}catch(e){if(e instanceof Sr)_r.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function lx(t,e){try{const i=(await HS()).transaction(Yu,"readwrite");await i.objectStore(Yu).put(e,WS(t)),await i.done}catch(n){if(n instanceof Sr)_r.warn(n.message);else{const i=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(i.message)}}}function WS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=1024,yV=30;class _V{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wV(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ux();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>yV){const a=xV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){_r.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ux(),{heartbeatsToSend:i,unsentEntries:r}=vV(this._heartbeatsCache.heartbeats),o=Bd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return _r.warn(n),""}}}function ux(){return new Date().toISOString().substring(0,10)}function vV(t,e=gV){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),cx(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),cx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class wV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oD()?aD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return lx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return lx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cx(t){return Bd(JSON.stringify({version:2,heartbeats:t})).length}function xV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t){Ka(new _o("platform-logger",e=>new MD(e),"PRIVATE")),Ka(new _o("heartbeat",e=>new _V(e),"PRIVATE")),cs(Rg,ox,t),cs(Rg,ox,"esm2020"),cs("fire-js","")}TV("");var hx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,$S;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function N(){}N.prototype=S.prototype,R.F=S.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(D,M,z){for(var O=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)O[fe-2]=arguments[fe];return S.prototype[M].apply(D,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,S,N){N||(N=0);const D=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)D[M]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(M=0;M<16;++M)D[M]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=R.g[0],N=R.g[1],M=R.g[2];let z=R.g[3],O;O=S+(z^N&(M^z))+D[0]+3614090360&4294967295,S=N+(O<<7&4294967295|O>>>25),O=z+(M^S&(N^M))+D[1]+3905402710&4294967295,z=S+(O<<12&4294967295|O>>>20),O=M+(N^z&(S^N))+D[2]+606105819&4294967295,M=z+(O<<17&4294967295|O>>>15),O=N+(S^M&(z^S))+D[3]+3250441966&4294967295,N=M+(O<<22&4294967295|O>>>10),O=S+(z^N&(M^z))+D[4]+4118548399&4294967295,S=N+(O<<7&4294967295|O>>>25),O=z+(M^S&(N^M))+D[5]+1200080426&4294967295,z=S+(O<<12&4294967295|O>>>20),O=M+(N^z&(S^N))+D[6]+2821735955&4294967295,M=z+(O<<17&4294967295|O>>>15),O=N+(S^M&(z^S))+D[7]+4249261313&4294967295,N=M+(O<<22&4294967295|O>>>10),O=S+(z^N&(M^z))+D[8]+1770035416&4294967295,S=N+(O<<7&4294967295|O>>>25),O=z+(M^S&(N^M))+D[9]+2336552879&4294967295,z=S+(O<<12&4294967295|O>>>20),O=M+(N^z&(S^N))+D[10]+4294925233&4294967295,M=z+(O<<17&4294967295|O>>>15),O=N+(S^M&(z^S))+D[11]+2304563134&4294967295,N=M+(O<<22&4294967295|O>>>10),O=S+(z^N&(M^z))+D[12]+1804603682&4294967295,S=N+(O<<7&4294967295|O>>>25),O=z+(M^S&(N^M))+D[13]+4254626195&4294967295,z=S+(O<<12&4294967295|O>>>20),O=M+(N^z&(S^N))+D[14]+2792965006&4294967295,M=z+(O<<17&4294967295|O>>>15),O=N+(S^M&(z^S))+D[15]+1236535329&4294967295,N=M+(O<<22&4294967295|O>>>10),O=S+(M^z&(N^M))+D[1]+4129170786&4294967295,S=N+(O<<5&4294967295|O>>>27),O=z+(N^M&(S^N))+D[6]+3225465664&4294967295,z=S+(O<<9&4294967295|O>>>23),O=M+(S^N&(z^S))+D[11]+643717713&4294967295,M=z+(O<<14&4294967295|O>>>18),O=N+(z^S&(M^z))+D[0]+3921069994&4294967295,N=M+(O<<20&4294967295|O>>>12),O=S+(M^z&(N^M))+D[5]+3593408605&4294967295,S=N+(O<<5&4294967295|O>>>27),O=z+(N^M&(S^N))+D[10]+38016083&4294967295,z=S+(O<<9&4294967295|O>>>23),O=M+(S^N&(z^S))+D[15]+3634488961&4294967295,M=z+(O<<14&4294967295|O>>>18),O=N+(z^S&(M^z))+D[4]+3889429448&4294967295,N=M+(O<<20&4294967295|O>>>12),O=S+(M^z&(N^M))+D[9]+568446438&4294967295,S=N+(O<<5&4294967295|O>>>27),O=z+(N^M&(S^N))+D[14]+3275163606&4294967295,z=S+(O<<9&4294967295|O>>>23),O=M+(S^N&(z^S))+D[3]+4107603335&4294967295,M=z+(O<<14&4294967295|O>>>18),O=N+(z^S&(M^z))+D[8]+1163531501&4294967295,N=M+(O<<20&4294967295|O>>>12),O=S+(M^z&(N^M))+D[13]+2850285829&4294967295,S=N+(O<<5&4294967295|O>>>27),O=z+(N^M&(S^N))+D[2]+4243563512&4294967295,z=S+(O<<9&4294967295|O>>>23),O=M+(S^N&(z^S))+D[7]+1735328473&4294967295,M=z+(O<<14&4294967295|O>>>18),O=N+(z^S&(M^z))+D[12]+2368359562&4294967295,N=M+(O<<20&4294967295|O>>>12),O=S+(N^M^z)+D[5]+4294588738&4294967295,S=N+(O<<4&4294967295|O>>>28),O=z+(S^N^M)+D[8]+2272392833&4294967295,z=S+(O<<11&4294967295|O>>>21),O=M+(z^S^N)+D[11]+1839030562&4294967295,M=z+(O<<16&4294967295|O>>>16),O=N+(M^z^S)+D[14]+4259657740&4294967295,N=M+(O<<23&4294967295|O>>>9),O=S+(N^M^z)+D[1]+2763975236&4294967295,S=N+(O<<4&4294967295|O>>>28),O=z+(S^N^M)+D[4]+1272893353&4294967295,z=S+(O<<11&4294967295|O>>>21),O=M+(z^S^N)+D[7]+4139469664&4294967295,M=z+(O<<16&4294967295|O>>>16),O=N+(M^z^S)+D[10]+3200236656&4294967295,N=M+(O<<23&4294967295|O>>>9),O=S+(N^M^z)+D[13]+681279174&4294967295,S=N+(O<<4&4294967295|O>>>28),O=z+(S^N^M)+D[0]+3936430074&4294967295,z=S+(O<<11&4294967295|O>>>21),O=M+(z^S^N)+D[3]+3572445317&4294967295,M=z+(O<<16&4294967295|O>>>16),O=N+(M^z^S)+D[6]+76029189&4294967295,N=M+(O<<23&4294967295|O>>>9),O=S+(N^M^z)+D[9]+3654602809&4294967295,S=N+(O<<4&4294967295|O>>>28),O=z+(S^N^M)+D[12]+3873151461&4294967295,z=S+(O<<11&4294967295|O>>>21),O=M+(z^S^N)+D[15]+530742520&4294967295,M=z+(O<<16&4294967295|O>>>16),O=N+(M^z^S)+D[2]+3299628645&4294967295,N=M+(O<<23&4294967295|O>>>9),O=S+(M^(N|~z))+D[0]+4096336452&4294967295,S=N+(O<<6&4294967295|O>>>26),O=z+(N^(S|~M))+D[7]+1126891415&4294967295,z=S+(O<<10&4294967295|O>>>22),O=M+(S^(z|~N))+D[14]+2878612391&4294967295,M=z+(O<<15&4294967295|O>>>17),O=N+(z^(M|~S))+D[5]+4237533241&4294967295,N=M+(O<<21&4294967295|O>>>11),O=S+(M^(N|~z))+D[12]+1700485571&4294967295,S=N+(O<<6&4294967295|O>>>26),O=z+(N^(S|~M))+D[3]+2399980690&4294967295,z=S+(O<<10&4294967295|O>>>22),O=M+(S^(z|~N))+D[10]+4293915773&4294967295,M=z+(O<<15&4294967295|O>>>17),O=N+(z^(M|~S))+D[1]+2240044497&4294967295,N=M+(O<<21&4294967295|O>>>11),O=S+(M^(N|~z))+D[8]+1873313359&4294967295,S=N+(O<<6&4294967295|O>>>26),O=z+(N^(S|~M))+D[15]+4264355552&4294967295,z=S+(O<<10&4294967295|O>>>22),O=M+(S^(z|~N))+D[6]+2734768916&4294967295,M=z+(O<<15&4294967295|O>>>17),O=N+(z^(M|~S))+D[13]+1309151649&4294967295,N=M+(O<<21&4294967295|O>>>11),O=S+(M^(N|~z))+D[4]+4149444226&4294967295,S=N+(O<<6&4294967295|O>>>26),O=z+(N^(S|~M))+D[11]+3174756917&4294967295,z=S+(O<<10&4294967295|O>>>22),O=M+(S^(z|~N))+D[2]+718787259&4294967295,M=z+(O<<15&4294967295|O>>>17),O=N+(z^(M|~S))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.v=function(R,S){S===void 0&&(S=R.length);const N=S-this.blockSize,D=this.C;let M=this.h,z=0;for(;z<S;){if(M==0)for(;z<=N;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<S;)if(D[M++]=R.charCodeAt(z++),M==this.blockSize){r(this,D),M=0;break}}else for(;z<S;)if(D[M++]=R[z++],M==this.blockSize){r(this,D),M=0;break}}this.h=M,this.o+=S},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,N=0;N<4;++N)for(let D=0;D<32;D+=8)R[S++]=this.g[N]>>>D&255;return R};function o(R,S){var N=u;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=S(R)}function a(R,S){this.h=S;const N=[];let D=!0;for(let M=R.length-1;M>=0;M--){const z=R[M]|0;D&&z==S||(N[M]=z,D=!1)}this.g=N}var u={};function h(R){return-128<=R&&R<128?o(R,function(S){return new a([S|0],S<0?-1:0)}):new a([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return j(f(-R));const S=[];let N=1;for(let D=0;R>=N;D++)S[D]=R/N|0,N*=4294967296;return new a(S,0)}function m(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return j(m(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(S,8));let D=g;for(let z=0;z<R.length;z+=8){var M=Math.min(8,R.length-z);const O=parseInt(R.substring(z,z+M),S);M<8?(M=f(Math.pow(S,M)),D=D.j(M).add(f(O))):(D=D.j(N),D=D.add(f(O)))}return D}var g=h(0),_=h(1),T=h(16777216);t=a.prototype,t.m=function(){if(A(this))return-j(this).m();let R=0,S=1;for(let N=0;N<this.g.length;N++){const D=this.i(N);R+=(D>=0?D:4294967296+D)*S,S*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(A(this))return"-"+j(this).toString(R);const S=f(Math.pow(R,6));var N=this;let D="";for(;;){const M=B(N,S).g;N=k(N,M.j(S));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=M,b(N))return z+D;for(;z.length<6;)z="0"+z;D=z+D}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function A(R){return R.h==-1}t.l=function(R){return R=k(this,R),A(R)?-1:b(R)?0:1};function j(R){const S=R.g.length,N=[];for(let D=0;D<S;D++)N[D]=~R.g[D];return new a(N,~R.h).add(_)}t.abs=function(){return A(this)?j(this):this},t.add=function(R){const S=Math.max(this.g.length,R.g.length),N=[];let D=0;for(let M=0;M<=S;M++){let z=D+(this.i(M)&65535)+(R.i(M)&65535),O=(z>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);D=O>>>16,z&=65535,O&=65535,N[M]=O<<16|z}return new a(N,N[N.length-1]&-2147483648?-1:0)};function k(R,S){return R.add(j(S))}t.j=function(R){if(b(this)||b(R))return g;if(A(this))return A(R)?j(this).j(j(R)):j(j(this).j(R));if(A(R))return j(this.j(j(R)));if(this.l(T)<0&&R.l(T)<0)return f(this.m()*R.m());const S=this.g.length+R.g.length,N=[];for(var D=0;D<2*S;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<R.g.length;M++){const z=this.i(D)>>>16,O=this.i(D)&65535,fe=R.i(M)>>>16,Xe=R.i(M)&65535;N[2*D+2*M]+=O*Xe,P(N,2*D+2*M),N[2*D+2*M+1]+=z*Xe,P(N,2*D+2*M+1),N[2*D+2*M+1]+=O*fe,P(N,2*D+2*M+1),N[2*D+2*M+2]+=z*fe,P(N,2*D+2*M+2)}for(R=0;R<S;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=S;R<2*S;R++)N[R]=0;return new a(N,0)};function P(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function C(R,S){this.g=R,this.h=S}function B(R,S){if(b(S))throw Error("division by zero");if(b(R))return new C(g,g);if(A(R))return S=B(j(R),S),new C(j(S.g),j(S.h));if(A(S))return S=B(R,j(S)),new C(j(S.g),S.h);if(R.g.length>30){if(A(R)||A(S))throw Error("slowDivide_ only works with positive integers.");for(var N=_,D=S;D.l(R)<=0;)N=q(N),D=q(D);var M=U(N,1),z=U(D,1);for(D=U(D,2),N=U(N,2);!b(D);){var O=z.add(D);O.l(R)<=0&&(M=M.add(N),z=O),D=U(D,1),N=U(N,1)}return S=k(R,M.j(S)),new C(M,S)}for(M=g;R.l(S)>=0;){for(N=Math.max(1,Math.floor(R.m()/S.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),z=f(N),O=z.j(S);A(O)||O.l(R)>0;)N-=D,z=f(N),O=z.j(S);b(z)&&(z=_),M=M.add(z),R=k(R,O)}return new C(M,R)}t.B=function(R){return B(this,R).h},t.and=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)&R.i(D);return new a(N,this.h&R.h)},t.or=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)|R.i(D);return new a(N,this.h|R.h)},t.xor=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)^R.i(D);return new a(N,this.h^R.h)};function q(R){const S=R.g.length+1,N=[];for(let D=0;D<S;D++)N[D]=R.i(D)<<1|R.i(D-1)>>>31;return new a(N,R.h)}function U(R,S){const N=S>>5;S%=32;const D=R.g.length-N,M=[];for(let z=0;z<D;z++)M[z]=S>0?R.i(z+N)>>>S|R.i(z+N+1)<<32-S:R.i(z+N);return new a(M,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,$S=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,hs=a}).apply(typeof hx<"u"?hx:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GS,su,qS,Kh,Mg,ZS,KS,QS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var y=0;y<c.length;++y){var w=c[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(c,y){if(y)e:{var w=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var H=c[I];if(!(H in w))break e;w=w[H]}c=c[c.length-1],I=w[c],y=y(I),y!=I&&y!=null&&e(w,c,{configurable:!0,writable:!0,value:y})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(y){var w=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&w.push([I,y[I]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function h(c,y,w){return c.call.apply(c.bind,arguments)}function f(c,y,w){return f=h,f.apply(null,arguments)}function m(c,y){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function g(c,y){function w(){}w.prototype=y.prototype,c.Z=y.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(I,H,$){for(var ee=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ee[Pe-2]=arguments[Pe];return y.prototype[H].apply(I,ee)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function T(c){const y=c.length;if(y>0){const w=Array(y);for(let I=0;I<y;I++)w[I]=c[I];return w}return[]}function b(c,y){for(let I=1;I<arguments.length;I++){const H=arguments[I];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=c.length||0;const $=H.length||0;c.length=w+$;for(let ee=0;ee<$;ee++)c[w+ee]=H[ee]}else c.push(H)}}class A{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function j(c){a.setTimeout(()=>{throw c},0)}function k(){var c=R;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class P{constructor(){this.h=this.g=null}add(y,w){const I=C.get();I.set(y,w),this.h?this.h.next=I:this.g=I,this.h=I}}var C=new A(()=>new B,c=>c.reset());class B{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,U=!1,R=new P,S=()=>{const c=Promise.resolve(void 0);q=()=>{c.then(N)}};function N(){for(var c;c=k();){try{c.h.call(c.g)}catch(w){j(w)}var y=C;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}U=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return c}();function O(c){return/^[\s\xa0]*$/.test(c)}function fe(c,y){M.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}g(fe,M),fe.prototype.init=function(c,y){const w=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(w=="mouseover"?y=c.fromElement:w=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),be=0;function Je(c,y,w,I,H){this.listener=c,this.proxy=null,this.src=y,this.type=w,this.capture=!!I,this.ha=H,this.key=++be,this.da=this.fa=!1}function Z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ce(c,y,w){for(const I in c)y.call(w,c[I],I,c)}function J(c,y){for(const w in c)y.call(void 0,c[w],w,c)}function ne(c){const y={};for(const w in c)y[w]=c[w];return y}const Ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ye(c,y){let w,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(w in I)c[w]=I[w];for(let $=0;$<Ce.length;$++)w=Ce[$],Object.prototype.hasOwnProperty.call(I,w)&&(c[w]=I[w])}}function Ne(c){this.src=c,this.g={},this.h=0}Ne.prototype.add=function(c,y,w,I,H){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const ee=pe(c,y,I,H);return ee>-1?(y=c[ee],w||(y.fa=!1)):(y=new Je(y,this.src,$,!!I,H),y.fa=w,c.push(y)),y};function Re(c,y){const w=y.type;if(w in c.g){var I=c.g[w],H=Array.prototype.indexOf.call(I,y,void 0),$;($=H>=0)&&Array.prototype.splice.call(I,H,1),$&&(Z(y),c.g[w].length==0&&(delete c.g[w],c.h--))}}function pe(c,y,w,I){for(let H=0;H<c.length;++H){const $=c[H];if(!$.da&&$.listener==y&&$.capture==!!w&&$.ha==I)return H}return-1}var ut="closure_lm_"+(Math.random()*1e6|0),te={};function le(c,y,w,I,H){if(Array.isArray(y)){for(let $=0;$<y.length;$++)le(c,y[$],w,I,H);return null}return w=at(w),c&&c[Xe]?c.J(y,w,u(I)?!!I.capture:!1,H):ge(c,y,w,!1,I,H)}function ge(c,y,w,I,H,$){if(!y)throw Error("Invalid event type");const ee=u(H)?!!H.capture:!!H;let Pe=ye(c);if(Pe||(c[ut]=Pe=new Ne(c)),w=Pe.add(y,w,I,ee,$),w.proxy)return w;if(I=Te(),w.proxy=I,I.src=c,I.listener=w,c.addEventListener)z||(H=ee),H===void 0&&(H=!1),c.addEventListener(y.toString(),I,H);else if(c.attachEvent)c.attachEvent(Et(y.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Te(){function c(w){return y.call(c.src,c.listener,w)}const y=gt;return c}function de(c,y,w,I,H){if(Array.isArray(y))for(var $=0;$<y.length;$++)de(c,y[$],w,I,H);else I=u(I)?!!I.capture:!!I,w=at(w),c&&c[Xe]?(c=c.i,$=String(y).toString(),$ in c.g&&(y=c.g[$],w=pe(y,w,I,H),w>-1&&(Z(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete c.g[$],c.h--)))):c&&(c=ye(c))&&(y=c.g[y.toString()],c=-1,y&&(c=pe(y,w,I,H)),(w=c>-1?y[c]:null)&&Ae(w))}function Ae(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Xe])Re(y.i,c);else{var w=c.type,I=c.proxy;y.removeEventListener?y.removeEventListener(w,I,c.capture):y.detachEvent?y.detachEvent(Et(w),I):y.addListener&&y.removeListener&&y.removeListener(I),(w=ye(y))?(Re(w,c),w.h==0&&(w.src=null,y[ut]=null)):Z(c)}}}function Et(c){return c in te?te[c]:te[c]="on"+c}function gt(c,y){if(c.da)c=!0;else{y=new fe(y,this);const w=c.listener,I=c.ha||c.src;c.fa&&Ae(c),c=w.call(I,y)}return c}function ye(c){return c=c[ut],c instanceof Ne?c:null}var ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function at(c){return typeof c=="function"?c:(c[ke]||(c[ke]=function(y){return c.handleEvent(y)}),c[ke])}function Le(){D.call(this),this.i=new Ne(this),this.M=this,this.G=null}g(Le,D),Le.prototype[Xe]=!0,Le.prototype.removeEventListener=function(c,y,w,I){de(this,c,y,w,I)};function Be(c,y){var w,I=c.G;if(I)for(w=[];I;I=I.G)w.push(I);if(c=c.M,I=y.type||y,typeof y=="string")y=new M(y,c);else if(y instanceof M)y.target=y.target||c;else{var H=y;y=new M(I,c),Ye(y,H)}H=!0;let $,ee;if(w)for(ee=w.length-1;ee>=0;ee--)$=y.g=w[ee],H=Pn($,I,!0,y)&&H;if($=y.g=c,H=Pn($,I,!0,y)&&H,H=Pn($,I,!1,y)&&H,w)for(ee=0;ee<w.length;ee++)$=y.g=w[ee],H=Pn($,I,!1,y)&&H}Le.prototype.N=function(){if(Le.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const w=c.g[y];for(let I=0;I<w.length;I++)Z(w[I]);delete c.g[y],c.h--}}this.G=null},Le.prototype.J=function(c,y,w,I){return this.i.add(String(c),y,!1,w,I)},Le.prototype.K=function(c,y,w,I){return this.i.add(String(c),y,!0,w,I)};function Pn(c,y,w,I){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let $=0;$<y.length;++$){const ee=y[$];if(ee&&!ee.da&&ee.capture==w){const Pe=ee.listener,$e=ee.ha||ee.src;ee.fa&&Re(c.i,ee),H=Pe.call($e,I)!==!1&&H}}return H&&!I.defaultPrevented}function ei(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(c,y||0)}function Rs(c){c.g=ei(()=>{c.g=null,c.i&&(c.i=!1,Rs(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class rp extends D{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Rs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(c){D.call(this),this.h=c,this.g={}}g(Ls,D);var No=[];function pl(c){ce(c.g,function(y,w){this.g.hasOwnProperty(w)&&Ae(y)},c),c.g={}}Ls.prototype.N=function(){Ls.Z.N.call(this),pl(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mo=a.JSON.stringify,sp=a.JSON.parse,Ic=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ml(){}function Ac(){}var Cr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ns(){M.call(this,"d")}g(Ns,M);function Oo(){M.call(this,"c")}g(Oo,M);var Hi={},Ir=null;function Do(){return Ir=Ir||new Le}Hi.Ia="serverreachability";function kc(c){M.call(this,Hi.Ia,c)}g(kc,M);function Ar(c){const y=Do();Be(y,new kc(y))}Hi.STAT_EVENT="statevent";function gl(c,y){M.call(this,Hi.STAT_EVENT,c),this.stat=y}g(gl,M);function Dt(c){const y=Do();Be(y,new gl(y,c))}Hi.Ja="timingevent";function bc(c,y){M.call(this,Hi.Ja,c),this.size=y}g(bc,M);function Ms(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},y)}function Os(){this.g=!0}Os.prototype.ua=function(){this.g=!1};function op(c,y,w,I,H,$){c.info(function(){if(c.g)if($){var ee="",Pe=$.split("&");for(let qe=0;qe<Pe.length;qe++){var $e=Pe[qe].split("=");if($e.length>1){const vt=$e[0];$e=$e[1];const zn=vt.split("_");ee=zn.length>=2&&zn[1]=="type"?ee+(vt+"="+$e+"&"):ee+(vt+"=redacted&")}}}else ee=null;else ee=$;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+y+`
`+w+`
`+ee})}function ap(c,y,w,I,H,$,ee){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+y+`
`+w+`
`+$+" "+ee})}function kr(c,y,w,I){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+lp(c,w)+(I?" "+I:"")})}function yl(c,y){c.info(function(){return"TIMEOUT: "+y})}Os.prototype.info=function(){};function lp(c,y){if(!c.g)return y;if(!y)return null;try{const $=JSON.parse(y);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var w=$[c];if(!(w.length<2)){var I=w[1];if(Array.isArray(I)&&!(I.length<1)){var H=I[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ee=1;ee<I.length;ee++)I[ee]=""}}}}return Mo($)}catch{return y}}var Vo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Lc;function dn(){}g(dn,ml),dn.prototype.g=function(){return new XMLHttpRequest},Lc=new dn;function ue(c){return encodeURIComponent(String(c))}function Nc(c){var y=1;c=c.split(":");const w=[];for(;y>0&&c.length;)w.push(c.shift()),y--;return c.length&&w.push(c.join(":")),w}function ti(c,y,w,I){this.j=c,this.i=y,this.l=w,this.S=I||1,this.V=new Ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _l}function _l(){this.i=null,this.g="",this.h=!1}var vl={},Ds={};function jo(c,y,w){c.M=1,c.A=et(rn(y)),c.u=w,c.R=!0,Wi(c,null)}function Wi(c,y){c.F=Date.now(),Fo(c),c.B=rn(c.A);var w=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Wo(w.i,"t",I),c.C=0,w=c.j.L,c.h=new _l,c.g=Nl(c.j,w?y:null,!c.u),c.P>0&&(c.O=new rp(f(c.Y,c,c.g),c.P)),y=c.V,w=c.g,I=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(No[0]=H.toString()),H=No);for(let $=0;$<H.length;$++){const ee=le(w,H[$],I||y.handleEvent,!1,y.h||y);if(!ee)break;y.g[ee.key]=ee}y=c.J?ne(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Ar(),op(c.i,c.v,c.B,c.l,c.S,c.u)}ti.prototype.ba=function(c){c=c.target;const y=this.O;y&&wi(c)==3?y.j():this.Y(c)},ti.prototype.Y=function(c){try{if(c==this.g)e:{const Pe=wi(this.g),$e=this.g.ya(),qe=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Cl(this.g)))){this.K||Pe!=4||$e==7||($e==8||qe<=0?Ar(3):Ar(2)),Bo(this);var y=this.g.ca();this.X=y;var w=Mc(this);if(this.o=y==200,ap(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,H=this.g;if((I=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(I)){var $=I;break t}}$=null}if(c=$)kr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wl(this,c);else{this.o=!1,this.m=3,Dt(12),Vn(this),Vs(this);break e}}if(this.R){c=!0;let vt;for(;!this.K&&this.C<w.length;)if(vt=up(this,w),vt==Ds){Pe==4&&(this.m=4,Dt(14),c=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==vl){this.m=4,Dt(15),kr(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else kr(this.i,this.l,vt,null),wl(this,vt);if(Oc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||w.length!=0||this.h.h||(this.m=1,Dt(16),c=!1),this.o=this.o&&c,!c)kr(this.i,this.l,w,"[Invalid Chunked Response]"),Vn(this),Vs(this);else if(w.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Rl(ee),ee.P=!0,Dt(11))}}else kr(this.i,this.l,w,null),wl(this,w);Pe==4&&Vn(this),this.o&&!this.K&&(Pe==4?Cn(this.j,this):(this.o=!1,Fo(this)))}else Il(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Vn(this),Vs(this)}}}catch{}finally{}};function Mc(c){if(!Oc(c))return c.g.la();const y=Cl(c.g);if(y==="")return"";let w="";const I=y.length,H=wi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Vn(c),Vs(c),"";c.h.i=new a.TextDecoder}for(let $=0;$<I;$++)c.h.h=!0,w+=c.h.i.decode(y[$],{stream:!(H&&$==I-1)});return y.length=0,c.h.g+=w,c.C=0,c.h.g}function Oc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function up(c,y){var w=c.C,I=y.indexOf(`
`,w);return I==-1?Ds:(w=Number(y.substring(w,I)),isNaN(w)?vl:(I+=1,I+w>y.length?Ds:(y=y.slice(I,I+w),c.C=I+w,y)))}ti.prototype.cancel=function(){this.K=!0,Vn(this)};function Fo(c){c.T=Date.now()+c.H,Dc(c,c.H)}function Dc(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ms(f(c.aa,c),y)}function Bo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}ti.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(yl(this.i,this.B),this.M!=2&&(Ar(),Dt(17)),Vn(this),this.m=2,Vs(this)):Dc(this,this.T-c)};function Vs(c){c.j.I==0||c.K||Cn(c.j,c)}function Vn(c){Bo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,pl(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function wl(c,y){try{var w=c.j;if(w.I!=0&&(w.g==c||js(w.h,c))){if(!c.L&&js(w.h,c)&&w.I==3){try{var I=w.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Ko(w),qo(w);else break e;bl(w),Dt(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ms(f(w.Va,w),6e3));Fc(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ti(w,11)}else if((c.L||w.g==c)&&Ko(w),!O(y))for(H=w.Ba.g.parse(y),y=0;y<H.length;y++){let qe=H[y];const vt=qe[0];if(!(vt<=w.K))if(w.K=vt,qe=qe[1],w.I==2)if(qe[0]=="c"){w.M=qe[1],w.ba=qe[2];const zn=qe[3];zn!=null&&(w.ka=zn,w.j.info("VER="+w.ka));const ri=qe[4];ri!=null&&(w.za=ri,w.j.info("SVER="+w.za));const Un=qe[5];Un!=null&&typeof Un=="number"&&Un>0&&(I=1.5*Un,w.O=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const Ei=c.g;if(Ei){const Yo=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yo){var $=I.h;$.g||Yo.indexOf("spdy")==-1&&Yo.indexOf("quic")==-1&&Yo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&($i($,$.h),$.h=null))}if(I.G){const Jo=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(I.wa=Jo,oe(I.J,I.G,Jo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),I=w;var ee=c;if(I.na=Ll(I,I.L?I.ba:null,I.W),ee.L){xl(I.h,ee);var Pe=ee,$e=I.O;$e&&(Pe.H=$e),Pe.D&&(Bo(Pe),Fo(Pe)),I.g=ee}else kl(I);w.i.length>0&&xi(w)}else qe[0]!="stop"&&qe[0]!="close"||Ti(w,7);else w.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Ti(w,7):Me(w):qe[0]!="noop"&&w.l&&w.l.qa(qe),w.A=0)}}Ar(4)}catch{}}var cp=class{constructor(c,y){this.g=c,this.map=y}};function Vc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Fc(c){return c.h?1:c.g?c.g.size:0}function js(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function $i(c,y){c.g?c.g.add(y):c.h=y}function xl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Vc.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Tl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const w of c.g.values())y=y.concat(w.G);return y}return T(c.i)}var br=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ze(c,y){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const I=c[w].indexOf("=");let H,$=null;I>=0?(H=c[w].substring(0,I),$=c[w].substring(I+1)):H=c[w],y(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function We(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof We?(this.l=c.l,jn(this,c.j),this.o=c.o,this.g=c.g,Fn(this,c.u),this.h=c.h,Fs(this,Bs(c.i)),this.m=c.m):c&&(y=String(c).match(br))?(this.l=!1,jn(this,y[1]||"",!0),this.o=Gi(y[2]||""),this.g=Gi(y[3]||"",!0),Fn(this,y[4]),this.h=Gi(y[5]||"",!0),Fs(this,y[6]||"",!0),this.m=Gi(y[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}We.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(yi(y,Bc,!0),":");var w=this.g;return(w||y=="file")&&(c.push("//"),(y=this.o)&&c.push(yi(y,Bc,!0),"@"),c.push(ue(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(yi(w,w.charAt(0)=="/"?qi:zo,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",yi(w,Zi)),c.join("")},We.prototype.resolve=function(c){const y=rn(this);let w=!!c.j;w?jn(y,c.j):w=!!c.o,w?y.o=c.o:w=!!c.g,w?y.g=c.g:w=c.u!=null;var I=c.h;if(w)Fn(y,c.u);else if(w=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var H=y.h.lastIndexOf("/");H!=-1&&(I=y.h.slice(0,H+1)+I)}if(H=I,H==".."||H==".")I="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){I=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let ee=0;ee<H.length;){const Pe=H[ee++];Pe=="."?I&&ee==H.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),I&&ee==H.length&&$.push("")):($.push(Pe),I=!0)}I=$.join("/")}else I=H}return w?y.h=I:w=c.i.toString()!=="",w?Fs(y,Bs(c.i)):w=!!c.m,w&&(y.m=c.m),y};function rn(c){return new We(c)}function jn(c,y,w){c.j=w?Gi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Fn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Fs(c,y,w){y instanceof ni?(c.i=y,El(c.i,c.l)):(w||(y=yi(y,yt)),c.i=new ni(y,c.l))}function oe(c,y,w){c.i.set(y,w)}function et(c){return oe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Gi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function yi(c,y,w){return typeof c=="string"?(c=encodeURI(c).replace(y,fn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function fn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Bc=/[#\/\?@]/g,zo=/[#\?:]/g,qi=/[#\?]/g,yt=/[#\?@]/g,Zi=/#/g;function ni(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Sn(c){c.g||(c.g=new Map,c.h=0,c.i&&ze(c.i,function(y,w){c.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}t=ni.prototype,t.add=function(c,y){Sn(this),this.i=null,c=_i(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(y),this.h+=1,this};function Uo(c,y){Sn(c),y=_i(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Rr(c,y){return Sn(c),y=_i(c,y),c.g.has(y)}t.forEach=function(c,y){Sn(this),this.g.forEach(function(w,I){w.forEach(function(H){c.call(y,H,I,this)},this)},this)};function Ho(c,y){Sn(c);let w=[];if(typeof y=="string")Rr(c,y)&&(w=w.concat(c.g.get(_i(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)w=w.concat(c[y]);return w}t.set=function(c,y){return Sn(this),this.i=null,c=_i(this,c),Rr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=Ho(this,c),c.length>0?String(c[0]):y):y};function Wo(c,y,w){Uo(c,y),w.length>0&&(c.i=null,c.g.set(_i(c,y),T(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var w=y[I];const H=ue(w);w=Ho(this,w);for(let $=0;$<w.length;$++){let ee=H;w[$]!==""&&(ee+="="+ue(w[$])),c.push(ee)}}return this.i=c.join("&")};function Bs(c){const y=new ni;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function _i(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function El(c,y){y&&!c.j&&(Sn(c),c.i=null,c.g.forEach(function(w,I){const H=I.toLowerCase();I!=H&&(Uo(this,I),Wo(this,H,w))},c)),c.j=y}function $o(c,y){const w=new Os;if(a.Image){const I=new Image;I.onload=m(Bn,w,"TestLoadImage: loaded",!0,y,I),I.onerror=m(Bn,w,"TestLoadImage: error",!1,y,I),I.onabort=m(Bn,w,"TestLoadImage: abort",!1,y,I),I.ontimeout=m(Bn,w,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else y(!1)}function zc(c,y){const w=new Os,I=new AbortController,H=setTimeout(()=>{I.abort(),Bn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:I.signal}).then($=>{clearTimeout(H),$.ok?Bn(w,"TestPingServer: ok",!0,y):Bn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Bn(w,"TestPingServer: error",!1,y)})}function Bn(c,y,w,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(w)}catch{}}function hp(){this.g=new Ic}function Ee(c){this.i=c.Sb||null,this.h=c.ab||!1}g(Ee,ml),Ee.prototype.g=function(){return new sn(this.i,this.h)};function sn(c,y){Le.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(sn,Le),t=sn.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Ki(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ke(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ke(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Lr(this):Ki(this),this.readyState==3&&Ke(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Lr(this))},t.Na=function(c){this.g&&(this.response=c,Lr(this))},t.ga=function(){this.g&&Lr(this)};function Lr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Ki(c)}t.setRequestHeader=function(c,y){this.A.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=y.next();return c.join(`\r
`)};function Ki(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Go(c){let y="";return ce(c,function(w,I){y+=I,y+=":",y+=w,y+=`\r
`}),y}function zs(c,y,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=Go(w),typeof c=="string"?w!=null&&ue(w):oe(c,y,w))}function Ge(c){Le.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Ge,Le);var Pl=/^https?$/i,Us=["POST","PUT"];t=Ge.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,y,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Lc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){Pt(this,$);return}if(c=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)w.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())w.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find($=>$.toLowerCase()=="content-type"),H=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Us,y,void 0)>=0)||I||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of w)this.g.setRequestHeader($,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){Pt(this,$)}};function Pt(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,vi(c),Hs(c)}function vi(c){c.A||(c.A=!0,Be(c,"complete"),Be(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Be(this,"complete"),Be(this,"abort"),Hs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),Ge.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sl(this):this.Xa())},t.Xa=function(){Sl(this)};function Sl(c){if(c.h&&typeof o<"u"){if(c.v&&wi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Be(c,"readystatechange"),wi(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var I;if(I=$===0){let ee=String(c.D).match(br)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),I=!Pl.test(ee?ee.toLowerCase():"")}w=I}if(w)Be(c,"complete"),Be(c,"success");else{c.o=6;try{var H=wi(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",vi(c)}}finally{Hs(c)}}}}function Hs(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,y||Be(c,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function wi(c){return c.g?c.g.readyState:0}t.ca=function(){try{return wi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),sp(y)}};function Cl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Il(c){const y={};c=(c.g&&wi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(O(c[I]))continue;var w=Nc(c[I]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const $=y[H]||[];y[H]=$,$.push(w)}J(y,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(c,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||y}function Al(c){this.za=0,this.i=[],this.j=new Os,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ws("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ws("baseRetryDelayMs",5e3,c),this.Za=Ws("retryDelaySeedMs",1e4,c),this.Ta=Ws("forwardChannelMaxRetries",2,c),this.va=Ws("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Vc(c&&c.concurrentRequestLimit),this.Ba=new hp,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Al.prototype,t.ka=8,t.I=1,t.connect=function(c,y,w,I){Dt(0),this.W=c,this.H=y||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.J=Ll(this,null,this.W),xi(this)};function Me(c){if(pn(c),c.I==3){var y=c.V++,w=rn(c.J);if(oe(w,"SID",c.M),oe(w,"RID",y),oe(w,"TYPE","terminate"),Qi(c,w),y=new ti(c,c.j,y),y.M=2,y.A=et(rn(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.A,w=!0),w||(y.g=Nl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Fo(y)}ii(c)}function qo(c){c.g&&(Rl(c),c.g.cancel(),c.g=null)}function pn(c){qo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Ko(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function xi(c){if(!jc(c.h)&&!c.m){c.m=!0;var y=c.Ea;q||S(),U||(q(),U=!0),R.add(y,c),c.D=0}}function Uc(c,y){return Fc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ms(f(c.Ea,c,y),$c(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new ti(this,this.j,c);let $=this.o;if(this.U&&($?($=ne($),Ye($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Wc(this,H,y),w=rn(this.J),oe(w,"RID",c),oe(w,"CVER",22),this.G&&oe(w,"X-HTTP-Session-Id",this.G),Qi(this,w),$&&(this.R?y="headers="+ue(Go($))+"&"+y:this.u&&zs(w,this.u,$)),$i(this.h,H),this.Ra&&oe(w,"TYPE","init"),this.S?(oe(w,"$req",y),oe(w,"SID","null"),H.U=!0,jo(H,w,null)):jo(H,w,y),this.I=2}}else this.I==3&&(c?Hc(this,c):this.i.length==0||jc(this.h)||Hc(this))};function Hc(c,y){var w;y?w=y.l:w=c.V++;const I=rn(c.J);oe(I,"SID",c.M),oe(I,"RID",w),oe(I,"AID",c.K),Qi(c,I),c.u&&c.o&&zs(I,c.u,c.o),w=new ti(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Wc(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),$i(c.h,w),jo(w,I,y)}function Qi(c,y){c.H&&ce(c.H,function(w,I){oe(y,I,w)}),c.l&&ce({},function(w,I){oe(y,I,w)})}function Wc(c,y,w){w=Math.min(c.i.length,w);const I=c.l?f(c.l.Ka,c.l,c):null;e:{var H=c.i;let Pe=-1;for(;;){const $e=["count="+w];Pe==-1?w>0?(Pe=H[0].g,$e.push("ofs="+Pe)):Pe=0:$e.push("ofs="+Pe);let qe=!0;for(let vt=0;vt<w;vt++){var $=H[vt].g;const zn=H[vt].map;if($-=Pe,$<0)Pe=Math.max(0,H[vt].g-100),qe=!1;else try{$="req"+$+"_"||"";try{var ee=zn instanceof Map?zn:Object.entries(zn);for(const[ri,Un]of ee){let Ei=Un;u(Un)&&(Ei=Mo(Un)),$e.push($+ri+"="+encodeURIComponent(Ei))}}catch(ri){throw $e.push($+"type="+encodeURIComponent("_badmap")),ri}}catch{I&&I(zn)}}if(qe){ee=$e.join("&");break e}}ee=void 0}return c=c.i.splice(0,w),y.G=c,ee}function kl(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;q||S(),U||(q(),U=!0),R.add(y,c),c.A=0}}function bl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ms(f(c.Da,c),$c(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Zo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ms(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),qo(this),Zo(this))};function Rl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Zo(c){c.g=new ti(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=rn(c.na);oe(y,"RID","rpc"),oe(y,"SID",c.M),oe(y,"AID",c.K),oe(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&oe(y,"TO",c.ia),oe(y,"TYPE","xmlhttp"),Qi(c,y),c.u&&c.o&&zs(y,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=et(rn(y)),w.u=null,w.R=!0,Wi(w,c)}t.Va=function(){this.C!=null&&(this.C=null,qo(this),bl(this),Dt(19))};function Ko(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Cn(c,y){var w=null;if(c.g==y){Ko(c),Rl(c),c.g=null;var I=2}else if(js(c.h,y))w=y.G,xl(c.h,y),I=1;else return;if(c.I!=0){if(y.o)if(I==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;I=Do(),Be(I,new bc(I,w)),xi(c)}else kl(c);else if(H=y.m,H==3||H==0&&y.X>0||!(I==1&&Uc(c,y)||I==2&&bl(c)))switch(w&&w.length>0&&(y=c.h,y.i=y.i.concat(w)),H){case 1:Ti(c,5);break;case 4:Ti(c,10);break;case 3:Ti(c,6);break;default:Ti(c,2)}}}function $c(c,y){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*y}function Ti(c,y){if(c.j.info("Error code "+y),y==2){var w=f(c.bb,c),I=c.Ua;const H=!I;I=new We(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jn(I,"https"),et(I),H?$o(I.toString(),w):zc(I.toString(),w)}else Dt(2);c.I=0,c.l&&c.l.pa(y),ii(c),pn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function ii(c){if(c.I=0,c.ja=[],c.l){const y=Tl(c.h);(y.length!=0||c.i.length!=0)&&(b(c.ja,y),b(c.ja,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.oa()}}function Ll(c,y,w){var I=w instanceof We?rn(w):new We(w);if(I.g!="")y&&(I.g=y+"."+I.g),Fn(I,I.u);else{var H=a.location;I=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const $=new We(null);I&&jn($,I),y&&($.g=y),H&&Fn($,H),w&&($.h=w),I=$}return w=c.G,y=c.wa,w&&y&&oe(I,w,y),oe(I,"VER",c.ka),Qi(c,I),I}function Nl(c,y,w){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ge(new Ee({ab:w})):new Ge(c.ma),y.Fa(c.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qo(){}t=Qo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Xo(){}Xo.prototype.g=function(c,y){return new qt(c,y)};function qt(c,y){Le.call(this),this.g=new Al(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!O(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Nr(this)}g(qt,Le),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Me(this.g)},qt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=Mo(c),c=w);y.i.push(new cp(y.Ya++,c)),y.I==3&&xi(y)},qt.prototype.N=function(){this.g.l=null,delete this.j,Me(this.g),delete this.g,qt.Z.N.call(this)};function Ml(c){Ns.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const w in y){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}g(Ml,Ns);function Gc(){Oo.call(this),this.status=1}g(Gc,Oo);function Nr(c){this.g=c}g(Nr,Qo),Nr.prototype.ra=function(){Be(this.g,"a")},Nr.prototype.qa=function(c){Be(this.g,new Ml(c))},Nr.prototype.pa=function(c){Be(this.g,new Gc)},Nr.prototype.oa=function(){Be(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,QS=function(){return new Xo},KS=function(){return Do()},ZS=Hi,Mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vo.NO_ERROR=0,Vo.TIMEOUT=8,Vo.HTTP_ERROR=6,Kh=Vo,Rc.COMPLETE="complete",qS=Rc,Ac.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",Le.prototype.listen=Le.prototype.J,su=Ac,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,GS=Ge}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});const dx="@firebase/firestore",fx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new w_("@firebase/firestore");function aa(){return vo.logLevel}function se(t,...e){if(vo.logLevel<=Ve.DEBUG){const n=e.map(E_);vo.debug(`Firestore (${ul}): ${t}`,...n)}}function vr(t,...e){if(vo.logLevel<=Ve.ERROR){const n=e.map(E_);vo.error(`Firestore (${ul}): ${t}`,...n)}}function Qa(t,...e){if(vo.logLevel<=Ve.WARN){const n=e.map(E_);vo.warn(`Firestore (${ul}): ${t}`,...n)}}function E_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,XS(t,i,n)}function XS(t,e,n){let i=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw vr(i),new Error(i)}function Ze(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||XS(e,r,i)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class PV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SV{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ds,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ds)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new YS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class CV{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IV{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new CV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class px{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const i=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,se("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new px(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new px(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=kV(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function je(t,e){return t<e?-1:t>e?1:0}function Og(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return lm(r)===lm(o)?je(r,o):lm(r)?1:-1}return je(t.length,e.length)}const bV=55296,RV=57343;function lm(t){const e=t.charCodeAt(0);return e>=bV&&e<=RV}function Xa(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="__name__";class Ii{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Ii.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return je(e.length,n.length)}static compareSegments(e,n){const i=Ii.isNumericId(e),r=Ii.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Ii.extractNumericId(e).compare(Ii.extractNumericId(n)):Og(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class rt extends Ii{construct(e,n,i){return new rt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const LV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Ii{construct(e,n,i){return new Ht(e,n,i)}static isValidIdentifier(e){return LV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mx}static keyField(){return new Ht([mx])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new he(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new he(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new he(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new he(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(rt.fromString(e))}static fromName(e){return new me(rt.fromString(e).popFirst(5))}static empty(){return new me(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t,e,n){if(!n)throw new he(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NV(t,e,n,i){if(e===!0&&i===!0)throw new he(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gx(t){if(!me.isDocumentKey(t))throw new he(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yx(t){if(me.isDocumentKey(t))throw new he(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function S_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=S_(t);throw new he(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function yc(t,e){if(!eC(t))throw new he(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new he(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=-62135596800,vx=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*vx);return new st(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_x)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vx}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_x;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:bt("string",st._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new st(0,0))}static max(){return new Se(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=-1;function MV(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new st(n+1,0):new st(n,i));return new vs(r,me.empty(),e)}function OV(t){return new vs(t.readTime,t.key,Ju)}class vs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new vs(Se.min(),me.empty(),Ju)}static max(){return new vs(Se.max(),me.empty(),Ju)}}function DV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==VV)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new K((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function FV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ff.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=-1;function Bf(t){return t==null}function Ud(t){return t===0&&1/t==-1/0}function BV(t){return typeof t=="number"&&Number.isInteger(t)&&!Ud(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="";function zV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wx(e)),e=UV(t.get(n),e);return wx(e)}function UV(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case tC:n+="";break;default:n+=o}}return n}function wx(t){return t+tC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||Ut.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ch(this.root,e,this.comparator,!0)}}class Ch{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ut.RED,this.left=r??Ut.EMPTY,this.right=o??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ut(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ut.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tx(this.data.getIterator())}getIteratorFrom(e){return new Tx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class Tx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new di([])}unionWith(e){let n=new Ot(Ht.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iC("Invalid base64 string: "+o):o}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const HV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(t){if(Ze(!!t,39018),typeof t=="string"){let e=0;const n=HV.exec(t);if(Ze(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xs(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="server_timestamp",sC="__type__",oC="__previous_value__",aC="__local_write_time__";function I_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sC])==null?void 0:i.stringValue)===rC}function zf(t){const e=t.mapValue.fields[oC];return I_(e)?zf(e):e}function ec(t){const e=ws(t.mapValue.fields[aC].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Hd="(default)";class tc{constructor(e,n){this.projectId=e,this.database=n||Hd}static empty(){return new tc("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof tc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__type__",$V="__max__",Ih={mapValue:{}},uC="__vector__",Wd="value";function Ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?I_(t)?4:qV(t)?9007199254740991:GV(t)?10:11:we(28295,{value:t})}function Bi(t,e){if(t===e)return!0;const n=Ts(t);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ec(t).isEqual(ec(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=ws(r.timestampValue),u=ws(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return xs(r.bytesValue).isEqual(xs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return wt(r.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(r.geoPointValue.longitude)===wt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return wt(r.integerValue)===wt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=wt(r.doubleValue),u=wt(o.doubleValue);return a===u?Ud(a)===Ud(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Xa(t.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(xx(a)!==xx(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Bi(a[h],u[h])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function nc(t,e){return(t.values||[]).find(n=>Bi(n,e))!==void 0}function Ya(t,e){if(t===e)return 0;const n=Ts(t),i=Ts(e);if(n!==i)return je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=wt(o.integerValue||o.doubleValue),h=wt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Ex(t.timestampValue,e.timestampValue);case 4:return Ex(ec(t),ec(e));case 5:return Og(t.stringValue,e.stringValue);case 6:return function(o,a){const u=xs(o),h=xs(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=je(u[f],h[f]);if(m!==0)return m}return je(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=je(wt(o.latitude),wt(a.latitude));return u!==0?u:je(wt(o.longitude),wt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Px(t.arrayValue,e.arrayValue);case 10:return function(o,a){var _,T,b,A;const u=o.fields||{},h=a.fields||{},f=(_=u[Wd])==null?void 0:_.arrayValue,m=(T=h[Wd])==null?void 0:T.arrayValue,g=je(((b=f==null?void 0:f.values)==null?void 0:b.length)||0,((A=m==null?void 0:m.values)==null?void 0:A.length)||0);return g!==0?g:Px(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ih.mapValue&&a===Ih.mapValue)return 0;if(o===Ih.mapValue)return 1;if(a===Ih.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let g=0;g<h.length&&g<m.length;++g){const _=Og(h[g],m[g]);if(_!==0)return _;const T=Ya(u[h[g]],f[m[g]]);if(T!==0)return T}return je(h.length,m.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Ex(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=ws(t),i=ws(e),r=je(n.seconds,i.seconds);return r!==0?r:je(n.nanos,i.nanos)}function Px(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ya(n[r],i[r]);if(o)return o}return je(n.length,i.length)}function Ja(t){return Dg(t)}function Dg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ws(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Dg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Dg(n.fields[a])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function Qh(t){switch(Ts(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zf(t);return e?16+Qh(e):16;case 5:return 2*t.stringValue.length;case 6:return xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Qh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Ao(i.fields,(o,a)=>{r+=o.length+Qh(a)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function Vg(t){return!!t&&"integerValue"in t}function A_(t){return!!t&&"arrayValue"in t}function Sx(t){return!!t&&"nullValue"in t}function Cx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xh(t){return!!t&&"mapValue"in t}function GV(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lC])==null?void 0:i.stringValue)===uC}function Eu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ao(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Eu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eu(t.arrayValue.values[n]);return e}return{...t}}function qV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$V}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(n)}setAll(e){let n=Ht.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Eu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Xh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ao(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Zn(Eu(this.value))}}function cC(t){const e=[];return Ao(t.fields,(n,i)=>{const r=new Ht([n]);if(Xh(i)){const o=cC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new en(e,0,Se.min(),Se.min(),Se.min(),Zn.empty(),0)}static newFoundDocument(e,n,i,r){return new en(e,1,n,Se.min(),i,r,0)}static newNoDocument(e,n){return new en(e,2,n,Se.min(),Se.min(),Zn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,Se.min(),Se.min(),Zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n){this.position=e,this.inclusive=n}}function Ix(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=me.comparator(me.fromName(a.referenceValue),n.key):i=Ya(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ax(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{}class Lt extends hC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new QV(e,n,i):n==="array-contains"?new JV(e,i):n==="in"?new e4(e,i):n==="not-in"?new t4(e,i):n==="array-contains-any"?new n4(e,i):new Lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new XV(e,i):new YV(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ya(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends hC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new zi(e,n)}matches(e){return dC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dC(t){return t.op==="and"}function fC(t){return KV(t)&&dC(t)}function KV(t){for(const e of t.filters)if(e instanceof zi)return!1;return!0}function jg(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+Ja(t.value);if(fC(t))return t.filters.map(e=>jg(e)).join(",");{const e=t.filters.map(n=>jg(n)).join(",");return`${t.op}(${e})`}}function pC(t,e){return t instanceof Lt?function(i,r){return r instanceof Lt&&i.op===r.op&&i.field.isEqual(r.field)&&Bi(i.value,r.value)}(t,e):t instanceof zi?function(i,r){return r instanceof zi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&pC(a,r.filters[u]),!0):!1}(t,e):void we(19439)}function mC(t){return t instanceof Lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`}(t):t instanceof zi?function(n){return n.op.toString()+" {"+n.getFilters().map(mC).join(" ,")+"}"}(t):"Filter"}class QV extends Lt{constructor(e,n,i){super(e,n,i),this.key=me.fromName(i.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class XV extends Lt{constructor(e,n){super(e,"in",n),this.keys=gC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class YV extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=gC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>me.fromName(i.referenceValue))}class JV extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return A_(n)&&nc(n.arrayValue,this.value)}}class e4 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nc(this.value.arrayValue,n)}}class t4 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nc(this.value.arrayValue,n)}}class n4 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!A_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>nc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function kx(t,e=null,n=[],i=[],r=null,o=null,a=null){return new i4(t,e,n,i,r,o,a)}function k_(t){const e=Ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>jg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Bf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ja(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ja(i)).join(",")),e.Te=n}return e.Te}function b_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ax(t.startAt,e.startAt)&&Ax(t.endAt,e.endAt)}function Fg(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function r4(t,e,n,i,r,o,a,u){return new Uf(t,e,n,i,r,o,a,u)}function R_(t){return new Uf(t)}function bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function s4(t){return t.collectionGroup!==null}function Pu(t){const e=Ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Ot(Ht.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Gd(o,i))}),n.has(Ht.keyField().canonicalString())||e.Ie.push(new Gd(Ht.keyField(),i))}return e.Ie}function Ni(t){const e=Ie(t);return e.Ee||(e.Ee=o4(e,Pu(t))),e.Ee}function o4(t,e){if(t.limitType==="F")return kx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Gd(r.field,o)});const n=t.endAt?new $d(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new $d(t.startAt.position,t.startAt.inclusive):null;return kx(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Bg(t,e,n){return new Uf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hf(t,e){return b_(Ni(t),Ni(e))&&t.limitType===e.limitType}function yC(t){return`${k_(Ni(t))}|lt:${t.limitType}`}function la(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>mC(r)).join(", ")}]`),Bf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ja(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ja(r)).join(",")),`Target(${i})`}(Ni(t))}; limitType=${t.limitType})`}function Wf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Pu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=Ix(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,Pu(i),r)||i.endAt&&!function(a,u,h){const f=Ix(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,Pu(i),r))}(t,e)}function a4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _C(t){return(e,n)=>{let i=!1;for(const r of Pu(t)){const o=l4(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function l4(t,e,n){const i=t.field.isKeyField()?me.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Ya(h,f):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=new mt(me.comparator);function wr(){return u4}const vC=new mt(me.comparator);function ou(...t){let e=vC;for(const n of t)e=e.insert(n.key,n);return e}function wC(t){let e=vC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function io(){return Su()}function xC(){return Su()}function Su(){return new ko(t=>t.toString(),(t,e)=>t.isEqual(e))}const c4=new mt(me.comparator),h4=new Ot(me.comparator);function Fe(...t){let e=h4;for(const n of t)e=e.add(n);return e}const d4=new Ot(je);function f4(){return d4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ud(e)?"-0":e}}function TC(t){return{integerValue:""+t}}function p4(t,e){return BV(e)?TC(e):L_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this._=void 0}}function m4(t,e,n){return t instanceof qd?function(r,o){const a={fields:{[sC]:{stringValue:rC},[aC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&I_(o)&&(o=zf(o)),o&&(a.fields[oC]=o),{mapValue:a}}(n,e):t instanceof ic?PC(t,e):t instanceof rc?SC(t,e):function(r,o){const a=EC(r,o),u=Rx(a)+Rx(r.Ae);return Vg(a)&&Vg(r.Ae)?TC(u):L_(r.serializer,u)}(t,e)}function g4(t,e,n){return t instanceof ic?PC(t,e):t instanceof rc?SC(t,e):n}function EC(t,e){return t instanceof Zd?function(i){return Vg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class qd extends $f{}class ic extends $f{constructor(e){super(),this.elements=e}}function PC(t,e){const n=CC(e);for(const i of t.elements)n.some(r=>Bi(r,i))||n.push(i);return{arrayValue:{values:n}}}class rc extends $f{constructor(e){super(),this.elements=e}}function SC(t,e){let n=CC(e);for(const i of t.elements)n=n.filter(r=>!Bi(r,i));return{arrayValue:{values:n}}}class Zd extends $f{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Rx(t){return wt(t.integerValue||t.doubleValue)}function CC(t){return A_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function y4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ic&&r instanceof ic||i instanceof rc&&r instanceof rc?Xa(i.elements,r.elements,Bi):i instanceof Zd&&r instanceof Zd?Bi(i.Ae,r.Ae):i instanceof qd&&r instanceof qd}(t.transform,e.transform)}class _4{constructor(e,n){this.version=e,this.transformResults=n}}class Mi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gf{}function IC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new N_(t.key,Mi.none()):new _c(t.key,t.data,Mi.none());{const n=t.data,i=Zn.empty();let r=new Ot(Ht.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new bo(t.key,i,new di(r.toArray()),Mi.none())}}function v4(t,e,n){t instanceof _c?function(r,o,a){const u=r.value.clone(),h=Nx(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof bo?function(r,o,a){if(!Yh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=Nx(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(AC(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Cu(t,e,n,i){return t instanceof _c?function(o,a,u,h){if(!Yh(o.precondition,a))return u;const f=o.value.clone(),m=Mx(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof bo?function(o,a,u,h){if(!Yh(o.precondition,a))return u;const f=Mx(o.fieldTransforms,h,a),m=a.data;return m.setAll(AC(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return Yh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function w4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=EC(i.transform,r||null);o!=null&&(n===null&&(n=Zn.empty()),n.set(i.field,o))}return n||null}function Lx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Xa(i,r,(o,a)=>y4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _c extends Gf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bo extends Gf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Nx(t,e,n){const i=new Map;Ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,g4(a,u,n[r]))}return i}function Mx(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,m4(o,a,e))}return i}class N_ extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x4 extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&v4(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Cu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Cu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=xC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=IC(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(n,i)=>Lx(n,i))&&Xa(this.baseMutations,e.baseMutations,(n,i)=>Lx(n,i))}}class M_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ze(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return c4}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new M_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Ue;function S4(t){switch(t){case X.OK:return we(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function kC(t){if(t===void 0)return vr("GRPC error has no .code"),X.UNKNOWN;switch(t){case Ct.OK:return X.OK;case Ct.CANCELLED:return X.CANCELLED;case Ct.UNKNOWN:return X.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return X.INTERNAL;case Ct.UNAVAILABLE:return X.UNAVAILABLE;case Ct.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Ct.NOT_FOUND:return X.NOT_FOUND;case Ct.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Ct.ABORTED:return X.ABORTED;case Ct.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Ct.DATA_LOSS:return X.DATA_LOSS;default:return we(39323,{code:t})}}(Ue=Ct||(Ct={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new hs([4294967295,4294967295],0);function Ox(t){const e=C4().encode(t),n=new $S;return n.update(e),new Uint8Array(n.digest())}function Dx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hs([n,i],0),new hs([r,o],0)]}class O_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new au(`Invalid padding: ${n}`);if(i<0)throw new au(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new au(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(hs.fromNumber(i)));return r.compare(I4)===1&&(r=new hs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ox(e),[i,r]=Dx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new O_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=Ox(e),[i,r]=Dx(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new qf(Se.min(),r,new mt(je),wr(),Fe())}}class vc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new vc(i,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class bC{constructor(e,n){this.targetId=e,this.Ce=n}}class RC{constructor(e,n,i=Gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Vx{constructor(){this.ve=0,this.Fe=jx(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),i=Fe();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:we(38017,{changeType:o})}}),new vc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=jx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class A4{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=Ah(),this.He=Ah(),this.Ye=new mt(je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(Fg(o))if(i===0){const a=new me(o.path);this.et(n,a,en.newNoDocument(a,Se.min()))}else Ze(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=xs(i).toUint8Array()}catch(h){if(h instanceof iC)return Qa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new O_(a,r,o)}catch(h){return Qa(h instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&Fg(u.target)){const h=new me(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,en.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Fe();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new qf(e,n,this.Ye,this.je,i);return this.je=wr(),this.Je=Ah(),this.He=Ah(),this.Ye=new mt(je),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Vx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ot(je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ot(je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ah(){return new mt(me.comparator)}function jx(){return new mt(me.comparator)}const k4={asc:"ASCENDING",desc:"DESCENDING"},b4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},R4={and:"AND",or:"OR"};class L4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zg(t,e){return t.useProto3Json||Bf(e)?e:{value:e}}function Kd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N4(t,e){return Kd(t,e.toTimestamp())}function Oi(t){return Ze(!!t,49232),Se.fromTimestamp(function(n){const i=ws(n);return new st(i.seconds,i.nanos)}(t))}function D_(t,e){return Ug(t,e).canonicalString()}function Ug(t,e){const n=function(r){return new rt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NC(t){const e=rt.fromString(t);return Ze(jC(e),10190,{key:e.toString()}),e}function Hg(t,e){return D_(t.databaseId,e.path)}function um(t,e){const n=NC(e);if(n.get(1)!==t.databaseId.projectId)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(OC(n))}function MC(t,e){return D_(t.databaseId,e)}function M4(t){const e=NC(t);return e.length===4?rt.emptyPath():OC(e)}function Wg(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OC(t){return Ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Fx(t,e,n){return{name:Hg(t,e),fields:n.value.mapValue.fields}}function O4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Ze(m===void 0||typeof m=="string",58123),Gt.fromBase64String(m||"")):(Ze(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Gt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?X.UNKNOWN:kC(f.code);return new he(m,f.message||"")}(a);n=new RC(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=um(t,i.document.name),o=Oi(i.document.updateTime),a=i.document.createTime?Oi(i.document.createTime):Se.min(),u=new Zn({mapValue:{fields:i.document.fields}}),h=en.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Jh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=um(t,i.document),o=i.readTime?Oi(i.readTime):Se.min(),a=en.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Jh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=um(t,i.document),o=i.removedTargetIds||[];n=new Jh([],o,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new P4(r,o),u=i.targetId;n=new bC(u,a)}}return n}function D4(t,e){let n;if(e instanceof _c)n={update:Fx(t,e.key,e.value)};else if(e instanceof N_)n={delete:Hg(t,e.key)};else if(e instanceof bo)n={update:Fx(t,e.key,e.data),updateMask:$4(e.fieldMask)};else{if(!(e instanceof x4))return we(16599,{Vt:e.type});n={verify:Hg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof qd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ic)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof rc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Zd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw we(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:N4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(t,e.precondition)),n}function V4(t,e){return t&&t.length>0?(Ze(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Oi(r.updateTime):Oi(o);return a.isEqual(Se.min())&&(a=Oi(o)),new _4(a,r.transformResults||[])}(n,e))):[]}function j4(t,e){return{documents:[MC(t,e.path)]}}function F4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=MC(t,r);const o=function(f){if(f.length!==0)return VC(zi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(_){return{field:ua(_.field),direction:U4(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=zg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function B4(t){let e=M4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ze(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=DC(g);return _ instanceof zi&&fC(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(b){return new Gd(ca(b.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,Bf(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(g){const _=!!g.before,T=g.values||[];return new $d(T,_)}(n.startAt));let f=null;return n.endAt&&(f=function(g){const _=!g.before,T=g.values||[];return new $d(T,_)}(n.endAt)),r4(e,r,a,o,u,"F",h,f)}function z4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ca(n.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ca(n.unaryFilter.field);return Lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ca(n.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ca(n.unaryFilter.field);return Lt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return Lt.create(ca(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zi.create(n.compositeFilter.filters.map(i=>DC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function U4(t){return k4[t]}function H4(t){return b4[t]}function W4(t){return R4[t]}function ua(t){return{fieldPath:t.canonicalString()}}function ca(t){return Ht.fromServerFormat(t.fieldPath)}function VC(t){return t instanceof Lt?function(n){if(n.op==="=="){if(Cx(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NAN"}};if(Sx(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cx(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NAN"}};if(Sx(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(n.field),op:H4(n.op),value:n.value}}}(t):t instanceof zi?function(n){const i=n.getFilters().map(r=>VC(r));return i.length===1?i[0]:{compositeFilter:{op:W4(n.op),filters:i}}}(t):we(54877,{filter:t})}function $4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,i,r,o=Se.min(),a=Se.min(),u=Gt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.yt=e}}function q4(t){const e=B4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.Cn=new K4}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(vs.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class K4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ot(rt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ot(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FC=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(FC,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new el(0)}static cr(){return new el(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="LruGarbageCollector",Q4=1048576;function Ux([t,e],[n,i]){const r=je(t,n);return r===0?je(e,i):r}class X4{constructor(e){this.Ir=e,this.buffer=new Ot(Ux),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Ux(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Y4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(zx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hl(n)?se(zx,"Ignoring IndexedDB error during garbage collection: ",n):await cl(n)}await this.Vr(3e5)})}}class J4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Ff.ce);const i=new X4(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Bx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(f=Date.now(),aa()<=Ve.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function ej(t,e){return new J4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.changes=new ko(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Cu(i.mutation,r,di.empty(),st.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Fe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Fe()){const r=io();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=ou();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=io();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Fe()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=wr();const a=Su(),u=function(){return Su()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof bo)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Cu(m.mutation,f,m.mutation.getFieldMask(),st.now())):a.set(f.key,di.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new nj(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=Su();let r=new mt((a,u)=>a-u),o=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||di.empty();m=u.applyToLocalView(f,m),i.set(h,m);const g=(r.get(u.batchId)||Fe()).add(h);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,g=xC();m.forEach(_=>{if(!o.has(_)){const T=IC(n.get(_),i.get(_));T!==null&&g.set(_,T),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return me.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):s4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):K.resolve(io());let u=Ju,h=o;return a.next(f=>K.forEach(f,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?K.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{h=h.insert(m,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Fe())).next(m=>({batchId:u,changes:wC(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(i=>{let r=ou();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=ou();return this.indexManager.getCollectionParents(e,o).next(u=>K.forEach(u,h=>{const f=function(g,_){return new Uf(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,en.newInvalidDocument(m)))});let u=ou();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&Cu(m.mutation,f,di.empty(),st.now()),Wf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Oi(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:q4(r.bundledQuery),readTime:Oi(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.overlays=new mt(me.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=io();return K.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=io(),o=n.length+1,a=new me(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new mt((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=io(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=io(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return K.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new E4(n,i));let o=this.qr.get(n);o===void 0&&(o=Fe(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.Qr=new Ot(jt.$r),this.Ur=new Ot(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new jt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new me(new rt([])),i=new jt(n,e),r=new jt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new rt([])),i=new jt(n,e),r=new jt(n,e+1);let o=Fe();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new jt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||je(e.Yr,n.Yr)}static Kr(e,n){return je(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(jt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new T4(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new jt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?C_:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new jt(n,0),r=new jt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ot(je);return n.forEach(r=>{const o=new jt(r,0),a=new jt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),K.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;me.isDocumentKey(o)||(o=o.child(""));const a=new jt(new me(o),0);let u=new Ot(je);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),K.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return K.forEach(n.mutations,r=>{const o=new jt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new jt(n,0),r=this.Zr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.ri=e,this.docs=function(){return new mt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let i=wr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():en.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=wr();const a=n.path,u=new me(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||DV(OV(m),i)<=0||(r.has(m.key)||Wf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,r){we(9500)}ii(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new uj(this)}getSize(e){return K.resolve(this.size)}}class uj extends tj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.persistence=e,this.si=new ko(n=>k_(n),b_),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new V_,this.targetCount=0,this.ai=el.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new el(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),K.waitFor(o).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ff(0),this.li=!1,this.li=!0,this.hi=new oj,this.referenceDelegate=e(this),this.Pi=new cj(this),this.indexManager=new Z4,this.remoteDocumentCache=function(r){return new lj(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new G4(n),this.Ii=new rj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new aj(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){se("MemoryPersistence","Starting transaction:",e);const r=new hj(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return K.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class hj extends jV{constructor(e){super(),this.currentSequenceNumber=e}}class j_{constructor(e){this.persistence=e,this.Ri=new V_,this.Vi=null}static mi(e){return new j_(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,i=>{const r=me.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Qd{constructor(e,n){this.persistence=e,this.pi=new ko(i=>zV(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=ej(this,n)}static mi(e,n){return new Qd(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,Se.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qh(e.data.value)),n}br(e,n,i){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Fe(),r=Fe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new F_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return sD()?8:FV(nn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new dj;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(aa()<=Ve.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",la(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(aa()<=Ve.DEBUG&&se("QueryEngine","Query:",la(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(aa()<=Ve.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",la(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(n))):K.resolve())}ys(e,n){if(bx(n))return K.resolve(null);let i=Ni(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Bg(n,null,"F"),i=Ni(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Fe(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Bg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return bx(n)||r.isEqual(Se.min())?K.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?K.resolve(null):(aa()<=Ve.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),la(n)),this.vs(e,a,n,MV(r,Ju)).next(u=>u))})}Ds(e,n){let i=new Ot(_C(e));return n.forEach((r,o)=>{Wf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return aa()<=Ve.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",la(n)),this.ps.getDocumentsMatchingQuery(e,n,vs.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="LocalStore",pj=3e8;class mj{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new mt(je),this.xs=new ko(o=>k_(o),b_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ij(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function gj(t,e,n,i){return new mj(t,e,n,i)}async function zC(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Fe();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function yj(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const g=f.batch,_=g.keys();let T=K.resolve();return _.forEach(b=>{T=T.next(()=>m.getEntry(h,b)).next(A=>{const j=f.docVersions.get(b);Ze(j!==null,48541),A.version.compareTo(j)<0&&(g.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),m.addEntry(A)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Fe();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function UC(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function _j(t,e){const n=Ie(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,g)));let T=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Gt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(A,j,k){return A.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=pj?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(_,T,m)&&u.push(n.Pi.updateTargetData(o,T))});let h=wr(),f=Fe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(vj(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(Se.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return K.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function vj(t,e,n){let i=Fe(),r=Fe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=wr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Se.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):se(B_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function wj(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=C_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xj(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,K.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Xr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function $g(t,e,n){const i=Ie(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!hl(a))throw a;se(B_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Hx(t,e,n){const i=Ie(t);let r=Se.min(),o=Fe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const g=Ie(h),_=g.xs.get(m);return _!==void 0?K.resolve(g.Ms.get(_)):g.Pi.getTargetData(f,m)}(i,a,Ni(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:Se.min(),n?o:Fe())).next(u=>(Tj(i,a4(e),u),{documents:u,Qs:o})))}function Tj(t,e,n){let i=t.Os.get(e)||Se.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Wx{constructor(){this.activeTargetIds=f4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ej{constructor(){this.Mo=new Wx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="ConnectivityMonitor";class Gx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se($x,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se($x,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh=null;function Gg(){return kh===null?kh=function(){return 268435456+Math.round(2147483648*Math.random())}():kh++,"0x"+kh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="RestConnection",Sj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Hd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Gg(),u=this.zo(e,n.toUriEncodedString());se(cm,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=al(f);return this.Jo(e,u,h,i,m).then(g=>(se(cm,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Qa(cm,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ul}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=Sj[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class Aj extends Cj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Gg();return new Promise((u,h)=>{const f=new GS;f.setWithCredentials(!0),f.listenOnce(qS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Kh.NO_ERROR:const g=f.getResponseJson();se(Qt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Kh.TIMEOUT:se(Qt,`RPC '${e}' ${a} timed out`),h(new he(X.DEADLINE_EXCEEDED,"Request time out"));break;case Kh.HTTP_ERROR:const _=f.getStatus();if(se(Qt,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const b=T==null?void 0:T.error;if(b&&b.status&&b.message){const A=function(k){const P=k.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(P)>=0?P:X.UNKNOWN}(b.status);h(new he(A,b.message))}else h(new he(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new he(X.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{se(Qt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);se(Qt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Gg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=QS(),u=KS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");se(Qt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const g=a.createWebChannel(m,h);this.I_(g);let _=!1,T=!1;const b=new Ij({Yo:j=>{T?se(Qt,`Not sending because RPC '${e}' stream ${r} is closed:`,j):(_||(se(Qt,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),se(Qt,`RPC '${e}' stream ${r} sending:`,j),g.send(j))},Zo:()=>g.close()}),A=(j,k,P)=>{j.listen(k,C=>{try{P(C)}catch(B){setTimeout(()=>{throw B},0)}})};return A(g,su.EventType.OPEN,()=>{T||(se(Qt,`RPC '${e}' stream ${r} transport opened.`),b.o_())}),A(g,su.EventType.CLOSE,()=>{T||(T=!0,se(Qt,`RPC '${e}' stream ${r} transport closed`),b.a_(),this.E_(g))}),A(g,su.EventType.ERROR,j=>{T||(T=!0,Qa(Qt,`RPC '${e}' stream ${r} transport errored. Name:`,j.name,"Message:",j.message),b.a_(new he(X.UNAVAILABLE,"The operation could not be completed")))}),A(g,su.EventType.MESSAGE,j=>{var k;if(!T){const P=j.data[0];Ze(!!P,16349);const C=P,B=(C==null?void 0:C.error)||((k=C[0])==null?void 0:k.error);if(B){se(Qt,`RPC '${e}' stream ${r} received error:`,B);const q=B.status;let U=function(N){const D=Ct[N];if(D!==void 0)return kC(D)}(q),R=B.message;U===void 0&&(U=X.INTERNAL,R="Unknown error status: "+q+" with message "+B.message),T=!0,b.a_(new he(U,R)),g.close()}else se(Qt,`RPC '${e}' stream ${r} received:`,P),b.u_(P)}}),A(u,ZS.STAT_EVENT,j=>{j.stat===Mg.PROXY?se(Qt,`RPC '${e}' stream ${r} detected buffering proxy`):j.stat===Mg.NOPROXY&&se(Qt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){return new L4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="PersistentStream";class WC{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new he(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(qx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(qx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kj extends WC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=O4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?Oi(a.readTime):Se.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Wg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Fg(h)?{documents:j4(o,h)}:{query:F4(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=LC(o,a.resumeToken);const f=zg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=Kd(o,a.snapshotVersion.toTimestamp());const f=zg(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=z4(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Wg(this.serializer),n.removeTarget=e,this.q_(n)}}class bj extends WC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=V4(e.writeResults,e.commitTime),i=Oi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Wg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>D4(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{}class Lj extends Rj{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Ug(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(X.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Ug(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Nj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vr(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="RemoteStore";class Mj{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Ro(this)&&(se(wo,"Restarting streams for network reachability change."),await async function(h){const f=Ie(h);f.Ea.add(4),await wc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Kf(f)}(this))})}),this.Ra=new Nj(i,r)}}async function Kf(t){if(Ro(t))for(const e of t.da)await e(!0)}async function wc(t){for(const e of t.da)await e(!1)}function $C(t,e){const n=Ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),W_(n)?H_(n):dl(n).O_()&&U_(n,e))}function z_(t,e){const n=Ie(t),i=dl(n);n.Ia.delete(e),i.O_()&&GC(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ro(n)&&n.Ra.set("Unknown"))}function U_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dl(t).Y_(e)}function GC(t,e){t.Va.Ue(e),dl(t).Z_(e)}function H_(t){t.Va=new A4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),dl(t).start(),t.Ra.ua()}function W_(t){return Ro(t)&&!dl(t).x_()&&t.Ia.size>0}function Ro(t){return Ie(t).Ea.size===0}function qC(t){t.Va=void 0}async function Oj(t){t.Ra.set("Online")}async function Dj(t){t.Ia.forEach((e,n)=>{U_(t,e)})}async function Vj(t,e){qC(t),W_(t)?(t.Ra.ha(e),H_(t)):t.Ra.set("Unknown")}async function jj(t,e,n){if(t.Ra.set("Online"),e instanceof RC&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){se(wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xd(t,i)}else if(e instanceof Jh?t.Va.Ze(e):e instanceof bC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const i=await UC(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Gt.EMPTY_BYTE_STRING,m.snapshotVersion)),GC(o,h);const g=new Xr(m.target,h,f,m.sequenceNumber);U_(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){se(wo,"Failed to raise snapshot:",i),await Xd(t,i)}}async function Xd(t,e,n){if(!hl(e))throw e;t.Ea.add(1),await wc(t),t.Ra.set("Offline"),n||(n=()=>UC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(wo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Kf(t)})}function ZC(t,e){return e().catch(n=>Xd(t,n,e))}async function Qf(t){const e=Ie(t),n=Es(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:C_;for(;Fj(e);)try{const r=await wj(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,Bj(e,r)}catch(r){await Xd(e,r)}KC(e)&&QC(e)}function Fj(t){return Ro(t)&&t.Ta.length<10}function Bj(t,e){t.Ta.push(e);const n=Es(t);n.O_()&&n.X_&&n.ea(e.mutations)}function KC(t){return Ro(t)&&!Es(t).x_()&&t.Ta.length>0}function QC(t){Es(t).start()}async function zj(t){Es(t).ra()}async function Uj(t){const e=Es(t);for(const n of t.Ta)e.ea(n.mutations)}async function Hj(t,e,n){const i=t.Ta.shift(),r=M_.from(i,e,n);await ZC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Qf(t)}async function Wj(t,e){e&&Es(t).X_&&await async function(i,r){if(function(a){return S4(a)&&a!==X.ABORTED}(r.code)){const o=i.Ta.shift();Es(i).B_(),await ZC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Qf(i)}}(t,e),KC(t)&&QC(t)}async function Zx(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),se(wo,"RemoteStore received new credentials");const i=Ro(n);n.Ea.add(3),await wc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Kf(n)}async function $j(t,e){const n=Ie(t);e?(n.Ea.delete(2),await Kf(n)):e||(n.Ea.add(2),await wc(n),n.Ra.set("Unknown"))}function dl(t){return t.ma||(t.ma=function(n,i,r){const o=Ie(n);return o.sa(),new kj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:Oj.bind(null,t),t_:Dj.bind(null,t),r_:Vj.bind(null,t),H_:jj.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),W_(t)?H_(t):t.Ra.set("Unknown")):(await t.ma.stop(),qC(t))})),t.ma}function Es(t){return t.fa||(t.fa=function(n,i,r){const o=Ie(n);return o.sa(),new bj(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:zj.bind(null,t),r_:Wj.bind(null,t),ta:Uj.bind(null,t),na:Hj.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Qf(t)):(await t.fa.stop(),t.Ta.length>0&&(se(wo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new $_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G_(t,e){if(vr("AsyncQueue",`${e}: ${t}`),hl(t))return new he(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{static emptySet(e){return new Ma(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||me.comparator(n.key,i.key):(n,i)=>me.comparator(n.key,i.key),this.keyedMap=ou(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ma;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.ga=new mt(me.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class tl{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new tl(e,n,Ma.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class qj{constructor(){this.queries=Qx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ie(n),o=r.queries;r.queries=Qx(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new he(X.ABORTED,"Firestore shutting down"))}}function Qx(){return new ko(t=>yC(t),Hf)}async function XC(t,e){const n=Ie(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new Gj,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=G_(a,`Initialization of query '${la(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&q_(n)}async function YC(t,e){const n=Ie(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Zj(t,e){const n=Ie(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&q_(n)}function Kj(t,e,n){const i=Ie(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function q_(t){t.Ca.forEach(e=>{e.next()})}var qg,Xx;(Xx=qg||(qg={})).Ma="default",Xx.Cache="cache";class JC{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new tl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.key=e}}class tI{constructor(e){this.key=e}}class Qj{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=_C(e),this.tu=new Ma(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Kx,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),T=Wf(this.query,g)?g:null,b=!!_&&this.mutatedKeys.has(_.key),A=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let j=!1;_&&T?_.data.isEqual(T.data)?b!==A&&(i.track({type:3,doc:T}),j=!0):this.su(_,T)||(i.track({type:2,doc:T}),j=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!_&&T?(i.track({type:0,doc:T}),j=!0):_&&!T&&(i.track({type:1,doc:_}),j=!0,(h||f)&&(u=!0)),j&&(T?(a=a.add(T),o=A?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,g)=>function(T,b){const A=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:j})}};return A(T)-A(b)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new tl(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new tI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new eI(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Z_="SyncEngine";class Xj{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Yj{constructor(e){this.key=e,this.hu=!1}}class Jj{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ko(u=>yC(u),Hf),this.Iu=new Map,this.Eu=new Set,this.du=new mt(me.comparator),this.Au=new Map,this.Ru=new V_,this.Vu={},this.mu=new Map,this.fu=el.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function e3(t,e,n=!0){const i=aI(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await nI(i,e,n,!0),r}async function t3(t,e){const n=aI(t);await nI(n,e,!0,!1)}async function nI(t,e,n,i){const r=await xj(t.localStore,Ni(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await n3(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&$C(t.remoteStore,r),u}async function n3(t,e,n,i,r){t.pu=(g,_,T)=>async function(A,j,k,P){let C=j.view.ru(k);C.Cs&&(C=await Hx(A.localStore,j.query,!1).then(({documents:R})=>j.view.ru(R,C)));const B=P&&P.targetChanges.get(j.targetId),q=P&&P.targetMismatches.get(j.targetId)!=null,U=j.view.applyChanges(C,A.isPrimaryClient,B,q);return Jx(A,j.targetId,U.au),U.snapshot}(t,g,_,T);const o=await Hx(t.localStore,e,!0),a=new Qj(e,o.Qs),u=a.ru(o.documents),h=vc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);Jx(t,n,f.au);const m=new Xj(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function i3(t,e,n){const i=Ie(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!Hf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await $g(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&z_(i.remoteStore,r.targetId),Zg(i,r.targetId)}).catch(cl)):(Zg(i,r.targetId),await $g(i.localStore,r.targetId,!0))}async function r3(t,e){const n=Ie(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),z_(n.remoteStore,i.targetId))}async function s3(t,e,n){const i=d3(t);try{const r=await function(a,u){const h=Ie(a),f=st.now(),m=u.reduce((T,b)=>T.add(b.key),Fe());let g,_;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let b=wr(),A=Fe();return h.Ns.getEntries(T,m).next(j=>{b=j,b.forEach((k,P)=>{P.isValidDocument()||(A=A.add(k))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,b)).next(j=>{g=j;const k=[];for(const P of u){const C=w4(P,g.get(P.key).overlayedDocument);C!=null&&k.push(new bo(P.key,C,cC(C.value.mapValue),Mi.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,k,u)}).next(j=>{_=j;const k=j.applyToLocalDocumentSet(g,A);return h.documentOverlayCache.saveOverlays(T,j.batchId,k)})}).then(()=>({batchId:_.batchId,changes:wC(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new mt(je)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await xc(i,r.changes),await Qf(i.remoteStore)}catch(r){const o=G_(r,"Failed to persist write");n.reject(o)}}async function iI(t,e){const n=Ie(t);try{const i=await _j(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Ze(a.hu,14607):r.removedDocuments.size>0&&(Ze(a.hu,42227),a.hu=!1))}),await xc(n,i,e)}catch(i){await cl(i)}}function Yx(t,e,n){const i=Ie(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=Ie(a);h.onlineState=u;let f=!1;h.queries.forEach((m,g)=>{for(const _ of g.Sa)_.va(u)&&(f=!0)}),f&&q_(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function o3(t,e,n){const i=Ie(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new mt(me.comparator);a=a.insert(o,en.newNoDocument(o,Se.min()));const u=Fe().add(o),h=new qf(Se.min(),new Map,new mt(je),a,u);await iI(i,h),i.du=i.du.remove(o),i.Au.delete(e),K_(i)}else await $g(i.localStore,e,!1).then(()=>Zg(i,e,n)).catch(cl)}async function a3(t,e){const n=Ie(t),i=e.batch.batchId;try{const r=await yj(n.localStore,e);sI(n,i,null),rI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await xc(n,r)}catch(r){await cl(r)}}async function l3(t,e,n){const i=Ie(t);try{const r=await function(a,u){const h=Ie(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(g=>(Ze(g!==null,37113),m=g.keys(),h.mutationQueue.removeMutationBatch(f,g))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);sI(i,e,n),rI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await xc(i,r)}catch(r){await cl(r)}}function rI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function sI(t,e,n){const i=Ie(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Zg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||oI(t,i)})}function oI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(z_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),K_(t))}function Jx(t,e,n){for(const i of n)i instanceof eI?(t.Ru.addReference(i.key,e),u3(t,i)):i instanceof tI?(se(Z_,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||oI(t,i.key)):we(19791,{wu:i})}function u3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(se(Z_,"New document in limbo: "+n),t.Eu.add(i),K_(t))}function K_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new me(rt.fromString(e)),i=t.fu.next();t.Au.set(i,new Yj(n)),t.du=t.du.insert(n,i),$C(t.remoteStore,new Xr(Ni(R_(n.path)),i,"TargetPurposeLimboResolution",Ff.ce))}}async function xc(t,e,n){const i=Ie(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){r.push(f);const g=F_.As(h.targetId,f);o.push(g)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=Ie(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>K.forEach(f,_=>K.forEach(_.Es,T=>m.persistence.referenceDelegate.addReference(g,_.targetId,T)).next(()=>K.forEach(_.ds,T=>m.persistence.referenceDelegate.removeReference(g,_.targetId,T)))))}catch(g){if(!hl(g))throw g;se(B_,"Failed to update sequence numbers: "+g)}for(const g of f){const _=g.targetId;if(!g.fromCache){const T=m.Ms.get(_),b=T.snapshotVersion,A=T.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(_,A)}}}(i.localStore,o))}async function c3(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){se(Z_,"User change. New user:",e.toKey());const i=await zC(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new he(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xc(n,i.Ls)}}function h3(t,e){const n=Ie(t),i=n.Au.get(e);if(i&&i.hu)return Fe().add(i.key);{let r=Fe();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function aI(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o3.bind(null,e),e.Pu.H_=Zj.bind(null,e.eventManager),e.Pu.yu=Kj.bind(null,e.eventManager),e}function d3(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l3.bind(null,e),e}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gj(this.persistence,new fj,e.initialUser,this.serializer)}Cu(e){return new BC(j_.mi,this.serializer)}Du(e){return new Ej}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class f3 extends Yd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof Qd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Y4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new BC(i=>Qd.mi(i,n),this.serializer)}}class Kg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=c3.bind(null,this.syncEngine),await $j(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qj}()}createDatastore(e){const n=Zf(e.databaseInfo.databaseId),i=function(o){return new Aj(o)}(e.databaseInfo);return function(o,a,u,h){return new Lj(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new Mj(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Yx(this.syncEngine,n,0),function(){return Gx.v()?new Gx:new Pj}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const g=new Jj(r,o,a,u,h,f);return m&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ie(r);se(wo,"RemoteStore shutting down."),o.Ea.add(5),await wc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Kg.provider={build:()=>new Kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class p3{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Yt.UNAUTHENTICATED,this.clientId=P_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{se(Ps,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(se(Ps,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=G_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function dm(t,e){t.asyncQueue.verifyOperationInProgress(),se(Ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await zC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await m3(t);se(Ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Zx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Zx(e.remoteStore,r)),t._onlineComponents=e}async function m3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Ps,"Using user provided OfflineComponentProvider");try{await dm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Qa("Error using user provided cache. Falling back to memory cache: "+n),await dm(t,new Yd)}}else se(Ps,"Using default OfflineComponentProvider"),await dm(t,new f3(void 0));return t._offlineComponents}async function uI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Ps,"Using user provided OnlineComponentProvider"),await eT(t,t._uninitializedComponentsProvider._online)):(se(Ps,"Using default OnlineComponentProvider"),await eT(t,new Kg))),t._onlineComponents}function g3(t){return uI(t).then(e=>e.syncEngine)}async function Qg(t){const e=await uI(t),n=e.eventManager;return n.onListen=e3.bind(null,e.syncEngine),n.onUnlisten=i3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=r3.bind(null,e.syncEngine),n}function y3(t,e,n={}){const i=new ds;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new lI({next:_=>{m.Nu(),a.enqueueAndForget(()=>YC(o,g)),_.fromCache&&h.source==="server"?f.reject(new he(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),g=new JC(u,m,{includeMetadataChanges:!0,qa:!0});return XC(o,g)}(await Qg(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="firestore.googleapis.com",nT=!0;class iT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hI,this.ssl=nT}else this.host=e.host,this.ssl=e.ssl??nT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q4)throw new he(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new EV;switch(i.type){case"firstParty":return new IV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=tT.get(n);i&&(se("ComponentProvider","Removing Datastore"),tT.delete(n),i.terminate())}(this),Promise.resolve()}}function _3(t,e,n,i={}){var f;t=dr(t,Xf);const r=al(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(VS(`https://${u}`),jS("Firestore",!0)),o.host!==hI&&o.host!==u&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!yo(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Yt.MOCK_USER;else{m=QO(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new he(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Yt(_)}t._authCredentials=new PV(new YS(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Tc(this.firestore,e,this._query)}}class Mt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(yc(n,Mt._jsonSchema))return new Mt(e,i||null,new me(rt.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:bt("string",Mt._jsonSchemaVersion),referencePath:bt("string")};class fs extends Tc{constructor(e,n,i){super(e,n,R_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new me(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function Ys(t,e,...n){if(t=Nn(t),JS("collection","path",e),t instanceof Xf){const i=rt.fromString(e,...n);return yx(i),new fs(t,null,i)}{if(!(t instanceof Mt||t instanceof fs))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(rt.fromString(e,...n));return yx(i),new fs(t.firestore,null,i)}}function An(t,e,...n){if(t=Nn(t),arguments.length===1&&(e=P_.newId()),JS("doc","path",e),t instanceof Xf){const i=rt.fromString(e,...n);return gx(i),new Mt(t,null,new me(i))}{if(!(t instanceof Mt||t instanceof fs))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(rt.fromString(e,...n));return gx(i),new Mt(t.firestore,t instanceof fs?t.converter:null,new me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="AsyncQueue";class sT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HC(this,"async_queue_retry"),this._c=()=>{const i=hm();i&&se(rT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=hm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=hm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ds;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hl(e))throw e;se(rT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,vr("INTERNAL UNHANDLED ERROR: ",oT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=$_.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:oT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function oT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class nl extends Xf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new sT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sT(e),this._firestoreClient=void 0,await e}}}function v3(t,e){const n=typeof t=="object"?t:US(),i=typeof t=="string"?t:Hd,r=T_(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=ZO("firestore");o&&_3(r,...o)}return r}function Q_(t){if(t._terminated)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||w3(t),t._firestoreClient}function w3(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new WV(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,cI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new p3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Gt.fromBase64String(e))}catch(n){throw new he(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:bt("string",Kn._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(yc(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:bt("string",Di._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Vi(e.vectorValues);throw new he(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:bt("string",Vi._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=/^__.*__$/;class T3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,n,this.fieldTransforms):new _c(e,this.data,n,this.fieldTransforms)}}function fI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class Y_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Y_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fI(this.Ac)&&x3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class E3{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Zf(e)}Cc(e,n,i,r=!1){return new Y_({Ac:e,methodName:n,Dc:i,path:Ht.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function P3(t){const e=t._freezeSettings(),n=Zf(t._databaseId);return new E3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function S3(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);yI("Data must be an object, but it was:",a,i);const u=mI(i,a);let h,f;if(o.merge)h=new di(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=C3(e,g,n);if(!a.contains(_))throw new he(X.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);A3(m,_)||m.push(_)}h=new di(m),f=a.fieldTransforms.filter(g=>h.covers(g.field))}else h=null,f=a.fieldTransforms;return new T3(new Zn(u),h,f)}function pI(t,e){if(gI(t=Nn(t)))return yI("Unsupported field value:",e,t),mI(t,e);if(t instanceof dI)return function(i,r){if(!fI(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=pI(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Nn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return p4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=st.fromDate(i);return{timestampValue:Kd(r.serializer,o)}}if(i instanceof st){const o=new st(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Kd(r.serializer,o)}}if(i instanceof Di)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kn)return{bytesValue:LC(r.serializer,i._byteString)};if(i instanceof Mt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:D_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Vi)return function(a,u){return{mapValue:{fields:{[lC]:{stringValue:uC},[Wd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return L_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${S_(i)}`)}(t,e)}function mI(t,e){const n={};return nC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(t,(i,r)=>{const o=pI(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function gI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Di||t instanceof Kn||t instanceof Mt||t instanceof dI||t instanceof Vi)}function yI(t,e,n){if(!gI(n)||!eC(n)){const i=S_(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function C3(t,e,n){if((e=Nn(e))instanceof X_)return e._internalPath;if(typeof e=="string")return _I(t,e);throw Jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const I3=new RegExp("[~\\*/\\[\\]]");function _I(t,e,n){if(e.search(I3)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new X_(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new he(X.INVALID_ARGUMENT,u+t+h)}function A3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k3 extends vI{data(){return super.data()}}function wI(t,e){return typeof e=="string"?_I(t,e):e instanceof X_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class b3{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ao(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Wd].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>wt(a.doubleValue));return new Vi(n)}convertGeoPoint(e){return new Di(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=zf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){const n=ws(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=rt.fromString(e);Ze(jC(i),9688,{name:e});const r=new tc(i.get(1),i.get(3)),o=new me(i.popFirst(5));return r.isEqual(n)||vr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class lu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ao extends vI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(wI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ao._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",ao._jsonSchema={type:bt("string",ao._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class ed extends ao{data(e={}){return super.data(e)}}class lo{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new lu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ed(this._firestore,this._userDataWriter,i.key,i,new lu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new ed(r._firestore,r._userDataWriter,u.doc.key,u.doc,new lu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new ed(r._firestore,r._userDataWriter,u.doc.key,u.doc,new lu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:L3(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=P_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function L3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}lo._jsonSchemaVersion="firestore/querySnapshot/1.0",lo._jsonSchema={type:bt("string",lo._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class J_ extends b3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function ef(t){t=dr(t,Tc);const e=dr(t.firestore,nl),n=Q_(e),i=new J_(e);return xI(t._query),y3(n,t._query).then(r=>new lo(e,i,t,r))}function Ai(t,e,n){t=dr(t,Mt);const i=dr(t.firestore,nl),r=R3(t.converter,e,n);return TI(i,[S3(P3(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Mi.none())])}function Iu(t){return TI(dr(t.firestore,nl),[new N_(t._key,Mi.none())])}function fm(t,...e){var h,f,m;t=Nn(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||aT(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(aT(e[i])){const g=e[i];e[i]=(h=g.next)==null?void 0:h.bind(g),e[i+1]=(f=g.error)==null?void 0:f.bind(g),e[i+2]=(m=g.complete)==null?void 0:m.bind(g)}let o,a,u;if(t instanceof Mt)a=dr(t.firestore,nl),u=R_(t._key.path),o={next:g=>{e[i]&&e[i](N3(a,t,g))},error:e[i+1],complete:e[i+2]};else{const g=dr(t,Tc);a=dr(g.firestore,nl),u=g._query;const _=new J_(a);o={next:T=>{e[i]&&e[i](new lo(a,_,g,T))},error:e[i+1],complete:e[i+2]},xI(t._query)}return function(_,T,b,A){const j=new lI(A),k=new JC(T,j,b);return _.asyncQueue.enqueueAndForget(async()=>XC(await Qg(_),k)),()=>{j.Nu(),_.asyncQueue.enqueueAndForget(async()=>YC(await Qg(_),k))}}(Q_(a),u,r,o)}function TI(t,e){return function(i,r){const o=new ds;return i.asyncQueue.enqueueAndForget(async()=>s3(await g3(i),r,o)),o.promise}(Q_(t),e)}function N3(t,e,n){const i=n.docs.get(e._key),r=new J_(t);return new ao(t,r,e._key,i,new lu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ul=r})(ll),Ka(new _o("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new nl(new SV(i.getProvider("auth-internal")),new AV(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new he(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),cs(dx,fx,e),cs(dx,fx,"esm2020")})();function EI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M3=EI,PI=new mc("auth","Firebase",EI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new w_("@firebase/auth");function O3(t,...e){tf.logLevel<=Ve.WARN&&tf.warn(`Auth (${ll}): ${t}`,...e)}function td(t,...e){tf.logLevel<=Ve.ERROR&&tf.error(`Auth (${ll}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,...e){throw ev(t,...e)}function ji(t,...e){return ev(t,...e)}function SI(t,e,n){const i={...M3(),[e]:n};return new mc("auth","Firebase",i).create(e,{appName:t.name})}function ps(t){return SI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ev(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return PI.create(t,...e)}function xe(t,e,...n){if(!t)throw ev(e,...n)}function ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw td(e),new Error(e)}function Tr(t,e){t||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function D3(){return lT()==="http:"||lT()==="https:"}function lT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D3()||nD()||"connection"in navigator)?navigator.onLine:!0}function j3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tr(n>e,"Short delay should be less than long delay!"),this.isMobile=JO()||iD()}get(){return V3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e){Tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],z3=new Ec(3e4,6e4);function Yf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function fl(t,e,n,i,r={}){return II(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=gc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return tD()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&al(t.emulatorConfig.host)&&(f.credentials="include"),CI.fetch()(await kI(t,t.config.apiHost,n,u),f)})}async function II(t,e,n){t._canInitEmulator=!1;const i={...F3,...e};try{const r=new U3(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw bh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw bh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw bh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw bh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw SI(t,m,f);xr(t,m)}}catch(r){if(r instanceof Sr)throw r;xr(t,"network-request-failed",{message:String(r)})}}async function AI(t,e,n,i,r={}){const o=await fl(t,e,n,i,r);return"mfaPendingCredential"in o&&xr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function kI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?tv(t.config,r):`${t.config.apiScheme}://${r}`;return B3.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class U3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ji(this.auth,"network-request-failed")),z3.get())})}}function bh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ji(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t,e){return fl(t,"POST","/v1/accounts:delete",e)}async function nf(t,e){return fl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function W3(t,e=!1){const n=Nn(t),i=await n.getIdToken(e),r=nv(i);xe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Au(pm(r.auth_time)),issuedAtTime:Au(pm(r.iat)),expirationTime:Au(pm(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function pm(t){return Number(t)*1e3}function nv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return td("JWT malformed, contained fewer than 3 sections"),null;try{const r=NS(n);return r?JSON.parse(r):(td("Failed to decode base64 JWT payload"),null)}catch(r){return td("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function uT(t){const e=nv(t);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sr&&$3(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function $3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(t){var g;const e=t.auth,n=await t.getIdToken(),i=await sc(t,nf(e,{idToken:n}));xe(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(g=r.providerUserInfo)!=null&&g.length?bI(r.providerUserInfo):[],a=Z3(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Yg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function q3(t){const e=Nn(t);await rf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z3(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function bI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K3(t,e){const n=await II(t,{},async()=>{const i=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await kI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&al(t.emulatorConfig.host)&&(h.credentials="include"),CI.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Q3(t,e){return fl(t,"POST","/v2/accounts:revokeToken",Yf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=uT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await K3(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Oa;return i&&(xe(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(xe(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(xe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t,e){xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new G3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Yg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await sc(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return W3(this,e)}reload(){return q3(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await rf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await sc(this,H3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:T,providerData:b,stsTokenManager:A}=n;xe(g&&A,e,"internal-error");const j=Oa.fromJSON(this.name,A);xe(typeof g=="string",e,"internal-error"),Dr(i,e.name),Dr(r,e.name),xe(typeof _=="boolean",e,"internal-error"),xe(typeof T=="boolean",e,"internal-error"),Dr(o,e.name),Dr(a,e.name),Dr(u,e.name),Dr(h,e.name),Dr(f,e.name),Dr(m,e.name);const k=new fi({uid:g,auth:e,email:r,emailVerified:_,displayName:i,isAnonymous:T,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:j,createdAt:f,lastLoginAt:m});return b&&Array.isArray(b)&&(k.providerData=b.map(P=>({...P}))),h&&(k._redirectEventId=h),k}static async _fromIdTokenResponse(e,n,i=!1){const r=new Oa;r.updateFromServerResponse(n);const o=new fi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await rf(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];xe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?bI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Oa;u.updateFromIdToken(i);const h=new fi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Yg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new Map;function lr(t){Tr(t instanceof Function,"Expected a class definition");let e=cT.get(t);return e?(Tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RI.type="NONE";const hT=RI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t,e,n){return`firebase:${t}:${e}:${n}`}class Da{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=nd(this.userKey,r.apiKey,o),this.fullPersistenceKey=nd("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nf(this.auth,{idToken:e}).catch(()=>{});return n?fi._fromGetAccountInfoResponse(this.auth,n,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Da(lr(hT),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||lr(hT);const a=nd(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let g;if(typeof m=="string"){const _=await nf(e,{idToken:m}).catch(()=>{});if(!_)break;g=await fi._fromGetAccountInfoResponse(e,_,m)}else g=fi._fromJSON(e,m);f!==o&&(u=g),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Da(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Da(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VI(e))return"Blackberry";if(jI(e))return"Webos";if(NI(e))return"Safari";if((e.includes("chrome/")||MI(e))&&!e.includes("edge/"))return"Chrome";if(DI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function LI(t=nn()){return/firefox\//i.test(t)}function NI(t=nn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MI(t=nn()){return/crios\//i.test(t)}function OI(t=nn()){return/iemobile/i.test(t)}function DI(t=nn()){return/android/i.test(t)}function VI(t=nn()){return/blackberry/i.test(t)}function jI(t=nn()){return/webos/i.test(t)}function iv(t=nn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function X3(t=nn()){var e;return iv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Y3(){return rD()&&document.documentMode===10}function FI(t=nn()){return iv(t)||DI(t)||jI(t)||VI(t)||/windows phone/i.test(t)||OI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e=[]){let n;switch(t){case"Browser":n=dT(nn());break;case"Worker":n=`${dT(nn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ll}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(t,e={}){return fl(t,"GET","/v2/passwordPolicy",Yf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=6;class nF{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fT(this),this.idTokenSubscription=new fT(this),this.beforeStateQueue=new J3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Da.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nf(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ci(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(ps(this));const n=e?Nn(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eF(this),n=new nF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Q3(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lr(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await Da.create(this,[lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&O3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Jf(t){return Nn(t)}class fT{constructor(e){this.auth=e,this.observer=null,this.addObserver=dD(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rF(t){rv=t}function sF(t){return rv.loadJS(t)}function oF(){return rv.gapiScript}function aF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t,e){const n=T_(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(yo(o,e??{}))return r;xr(r,"already-initialized")}return n.initialize({options:e})}function uF(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function cF(t,e,n){const i=Jf(t);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=zI(e),{host:a,port:u}=hF(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(yo(f,i.config.emulator)&&yo(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,al(a)?(VS(`${o}//${a}${h}`),jS("Auth",!0)):dF()}function zI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hF(t){const e=zI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:pT(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:pT(a)}}}function pT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t,e){return AI(t,"POST","/v1/accounts:signInWithIdp",Yf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF="http://localhost";class xo extends UI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new xo(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Va(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Va(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Va(e,n)}buildRequest(){const e={requestUri:fF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends HI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Pc{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xo._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return $r.credential(n,i)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Pc{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.GITHUB_SIGN_IN_METHOD="github.com";Gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Pc{constructor(){super("twitter.com")}static credential(e,n){return xo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return qr.credential(n,i)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pF(t,e){return AI(t,"POST","/v1/accounts:signUp",Yf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await fi._fromIdTokenResponse(e,i,r),a=mT(i);return new Ss({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=mT(i);return new Ss({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function mT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(t){var r;if(ci(t.app))return Promise.reject(ps(t));const e=Jf(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new Ss({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await pF(e,{returnSecureToken:!0}),i=await Ss._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends Sr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,sf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new sf(e,n,i,r)}}function WI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sf._fromErrorAndOperation(t,o,e,i):o})}async function gF(t,e,n=!1){const i=await sc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ss._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(t,e,n=!1){const{auth:i}=t;if(ci(i.app))return Promise.reject(ps(i));const r="reauthenticate";try{const o=await sc(t,WI(i,r,e,t),n);xe(o.idToken,i,"internal-error");const a=nv(o.idToken);xe(a,i,"internal-error");const{sub:u}=a;return xe(t.uid===u,i,"user-mismatch"),Ss._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&xr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(t,e,n=!1){if(ci(t.app))return Promise.reject(ps(t));const i="signIn",r=await WI(t,i,e),o=await Ss._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function vF(t,e,n,i){return Nn(t).onIdTokenChanged(e,n,i)}function wF(t,e,n){return Nn(t).beforeAuthStateChanged(e,n)}function xF(t,e,n,i){return Nn(t).onAuthStateChanged(e,n,i)}const of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(of,"1"),this.storage.removeItem(of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=1e3,EF=10;class GI extends $I{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Y3()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,EF):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},TF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}GI.type="LOCAL";const PF=GI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI extends $I{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qI.type="SESSION";const ZI=qI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new ep(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await SF(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ep.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=sv("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}function IF(t){Fi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function AF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function bF(){return KI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="firebaseLocalStorageDb",RF=1,af="firebaseLocalStorage",XI="fbase_key";class Sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function tp(t,e){return t.transaction([af],e?"readwrite":"readonly").objectStore(af)}function LF(){const t=indexedDB.deleteDatabase(QI);return new Sc(t).toPromise()}function Jg(){const t=indexedDB.open(QI,RF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(af,{keyPath:XI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(af)?e(i):(i.close(),await LF(),e(await Jg()))})})}async function gT(t,e,n){const i=tp(t,!0).put({[XI]:e,value:n});return new Sc(i).toPromise()}async function NF(t,e){const n=tp(t,!1).get(e),i=await new Sc(n).toPromise();return i===void 0?null:i.value}function yT(t,e){const n=tp(t,!0).delete(e);return new Sc(n).toPromise()}const MF=800,OF=3;class YI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>OF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ep._getInstance(bF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await AF(),!this.activeServiceWorker)return;this.sender=new CF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jg();return await gT(e,of,"1"),await yT(e,of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>gT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>NF(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=tp(r,!1).getAll();return new Sc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YI.type="LOCAL";const DF=YI;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t,e){return e?lr(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov extends UI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Va(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Va(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Va(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jF(t){return _F(t.auth,new ov(t),t.bypassAuthState)}function FF(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),yF(n,new ov(t),t.bypassAuthState)}async function BF(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),gF(n,new ov(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jF;case"linkViaPopup":case"linkViaRedirect":return BF;case"reauthViaPopup":case"reauthViaRedirect":return FF;default:xr(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=new Ec(2e3,1e4);class Ia extends JI{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Ia.currentPopupAction&&Ia.currentPopupAction.cancel(),Ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const e=sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zF.get())};e()}}Ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF="pendingRedirect",id=new Map;class HF extends JI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const i=await WF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WF(t,e){const n=qF(e),i=GF(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function $F(t,e){id.set(t._key(),e)}function GF(t){return lr(t._redirectPersistence)}function qF(t){return nd(UF,t.config.apiKey,t.name)}async function ZF(t,e,n=!1){if(ci(t.app))return Promise.reject(ps(t));const i=Jf(t),r=VF(i,e),a=await new HF(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=10*60*1e3;class QF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!eA(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(ji(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KF&&this.cachedEventUids.clear(),this.cachedEventUids.has(_T(e))}saveEventToCache(e){this.cachedEventUids.add(_T(e)),this.lastProcessedEventTime=Date.now()}}function _T(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YF(t,e={}){return fl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e5=/^https?/;async function t5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YF(t);for(const n of e)try{if(n5(n))return}catch{}xr(t,"unauthorized-domain")}function n5(t){const e=Xg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!e5.test(n))return!1;if(JF.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=new Ec(3e4,6e4);function vT(){const t=Fi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function r5(t){return new Promise((e,n)=>{var r,o,a;function i(){vT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vT(),n(ji(t,"network-request-failed"))},timeout:i5.get()})}if((o=(r=Fi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Fi().gapi)!=null&&a.load)i();else{const u=aF("iframefcb");return Fi()[u]=()=>{gapi.load?i():n(ji(t,"network-request-failed"))},sF(`${oF()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw rd=null,e})}let rd=null;function s5(t){return rd=rd||r5(t),rd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=new Ec(5e3,15e3),a5="__/auth/iframe",l5="emulator/auth/iframe",u5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},c5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h5(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?tv(e,l5):`https://${t.config.authDomain}/${a5}`,i={apiKey:e.apiKey,appName:t.name,v:ll},r=c5.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${gc(i).slice(1)}`}async function d5(t){const e=await s5(t),n=Fi().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:h5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u5,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=ji(t,"network-request-failed"),u=Fi().setTimeout(()=>{o(a)},o5.get());function h(){Fi().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p5=500,m5=600,g5="_blank",y5="http://localhost";class wT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _5(t,e,n,i=p5,r=m5){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...f5,width:i.toString(),height:r.toString(),top:o,left:a},f=nn().toLowerCase();n&&(u=MI(f)?g5:n),LI(f)&&(e=e||y5,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[T,b])=>`${_}${T}=${b},`,"");if(X3(f)&&u!=="_self")return v5(e||"",u),new wT(null);const g=window.open(e||"",u,m);xe(g,t,"popup-blocked");try{g.focus()}catch{}return new wT(g)}function v5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="__/auth/handler",x5="emulator/auth/handler",T5=encodeURIComponent("fac");async function xT(t,e,n,i,r,o){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ll,eventId:r};if(e instanceof HI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",hD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Pc){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${T5}=${encodeURIComponent(h)}`:"";return`${E5(t)}?${gc(u).slice(1)}${f}`}function E5({config:t}){return t.emulator?tv(t,x5):`https://${t.authDomain}/${w5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class P5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZI,this._completeRedirectFn=ZF,this._overrideRedirectResult=$F}async _openPopup(e,n,i,r){var a;Tr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await xT(e,n,i,Xg(),r);return _5(e,o,sv())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await xT(e,n,i,Xg(),r);return IF(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Tr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await d5(e),i=new QF(e);return n.register("authEvent",r=>(xe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mm,{type:mm},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[mm];o!==void 0&&n(!!o),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return FI()||NI()||iv()}}const S5=P5;var TT="@firebase/auth",ET="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A5(t){Ka(new _o("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;xe(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BI(t)},f=new iF(i,r,o,h);return uF(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ka(new _o("auth-internal",e=>{const n=Jf(e.getProvider("auth").getImmediate());return(i=>new C5(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(TT,ET,I5(t)),cs(TT,ET,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=5*60,b5=DS("authIdTokenMaxAge")||k5;let PT=null;const R5=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>b5)return;const r=n==null?void 0:n.token;PT!==r&&(PT=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function L5(t=US()){const e=T_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lF(t,{popupRedirectResolver:S5,persistence:[DF,PF,ZI]}),i=DS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=R5(o.toString());wF(n,a,()=>a(n.currentUser)),vF(n,u=>a(u))}}const r=MS("auth");return r&&cF(n,`http://${r}`),n}function N5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}rF({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=ji("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",N5().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A5("Browser");var M5="firebase",O5="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(M5,O5,"app");const D5={apiKey:"AIzaSyCES_Zfi78paxI--dycL2LmBK0-g4fvvEM",authDomain:"famu-nodes.firebaseapp.com",projectId:"famu-nodes",storageBucket:"famu-nodes.firebasestorage.app",messagingSenderId:"67316044555",appId:"1:67316044555:web:72a88c28871236912f480e",measurementId:"G-LB6V1P1JVW"},tA=zS(D5),At=v3(tA),ST=L5(tA),lf={palmovka:{id:"palmovka",name:"Palmovka",center:[50.1036,14.47],zoom:15,description:"Prague metro hub"},vysocany:{id:"vysocany",name:"Vysoany",center:[50.109,14.505],zoom:15,description:"Prague industrial district"},podebrady:{id:"podebrady",name:"Podbrady",center:[50.1465,15.1215],zoom:16,description:"Spa town east of Prague"}},V5="vysocany",nA=lf[V5].center,iA=15,j5=13,F5=18,CT={tileUrl:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap &copy; CARTO"},uo=["red","blue"],rA={sticker:{points:25,radius:4},small:{points:50,radius:5},medium:{points:100,radius:6},large:{points:200,radius:8}},IT=[{name:"Kikova",location:[50.0905,14.4528]},{name:"Invalidovna",location:[50.0942,14.4665]},{name:"Palmovka",location:[50.1036,14.4744]},{name:"eskomoravsk",location:[50.1069,14.4892]},{name:"Vysoansk",location:[50.1097,14.4989]},{name:"Kolbenova",location:[50.1084,14.5113]},{name:"Hloubtn",location:[50.1064,14.5194]},{name:"Rajsk zahrada",location:[50.1028,14.5339]},{name:"ern Most",location:[50.1011,14.5582]}],hi=[{id:"art-01",name:"Kolbenova 1",location:[50.110192,14.503811],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-02",name:"Kolbenova 2",location:[50.110203,14.503764],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-03",name:"Kolbenova 3",location:[50.109847,14.50425],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-04",name:"Kolbenova 4",location:[50.109981,14.504933],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-05",name:"Kolbenova 5",location:[50.109764,14.505742],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-06",name:"Kolbenova 6",location:[50.109672,14.505847],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-07",name:"Hloubtn 1",location:[50.110383,14.508192],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-08",name:"Hloubtn 2",location:[50.110508,14.509567],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-09",name:"Vysoany 1",location:[50.110817,14.505475],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-10",name:"Vysoany 2",location:[50.110986,14.504672],size:"small",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-11",name:"Vysoany 3",location:[50.110706,14.504081],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-12",name:"Vysoany 4",location:[50.110217,14.50365],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-13",name:"Vysoany 5",location:[50.1096,14.505878],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-14",name:"Vysoany 6",location:[50.109736,14.508125],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-15",name:"Vysoany 7",location:[50.109908,14.508189],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-16",name:"Vysoany 8",location:[50.109517,14.509489],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-17",name:"Hloubtn 3",location:[50.110383,14.509569],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-18",name:"Hloubtn 4",location:[50.110369,14.509569],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-19",name:"Hloubtn 5",location:[50.110717,14.509906],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-20",name:"Harfa",location:[50.109428,14.498994],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-21",name:"Harfa 2",location:[50.110039,14.504783],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-22",name:"Karln",location:[50.091603,14.440019],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Karln",hood:"palmovka"},{id:"art-23",name:"Palmovka 1",location:[50.103611,14.46465],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-24",name:"Libe 1",location:[50.110244,14.477544],size:"small",status:"active",mhd:"tram12",capturedBy:null,area:"Libe",hood:"palmovka"},{id:"art-25",name:"Palmovka 2",location:[50.103378,14.472653],size:"medium",status:"ghost",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-26",name:"Palmovka 3",location:[50.103625,14.470758],size:"sticker",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-27",name:"Palmovka 4",location:[50.103608,14.47075],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-28",name:"Vysoany 9",location:[50.111042,14.503097],size:"large",status:"active",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-29",name:"Hloubtn 6",location:[50.108322,14.507908],size:"medium",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-30",name:"Prosek",location:[50.112683,14.499019],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Prosek",hood:"vysocany"},{id:"art-31",name:"Hloubtn 7",location:[50.108422,14.507728],size:"small",status:"active",mhd:"metroB",capturedBy:null,area:"Hloubtn",hood:"vysocany"},{id:"art-32",name:"Vysoany 10",location:[50.109811,14.504333],size:"sticker",status:"ghost",mhd:"metroB",capturedBy:null,area:"Vysoany",hood:"vysocany"},{id:"art-33",name:"Palmovka 5",location:[50.103458,14.463819],size:"medium",status:"active",mhd:"tram12",capturedBy:null,area:"Palmovka",hood:"palmovka"},{id:"art-34",name:"Podbrady 1",location:[50.14585,15.117822],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-35",name:"Podbrady 2",location:[50.147622,15.118736],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-36",name:"Podbrady 3",location:[50.14875,15.121333],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-37",name:"Podbrady 4",location:[50.148394,15.123386],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-38",name:"Podbrady 5",location:[50.148381,15.124169],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-39",name:"Podbrady 6",location:[50.148353,15.124464],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-40",name:"Podbrady 7",location:[50.147914,15.125636],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-41",name:"Podbrady 8",location:[50.148311,15.125564],size:"sticker",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-42",name:"Podbrady 9",location:[50.147572,15.125086],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-43",name:"Podbrady 10",location:[50.145967,15.124406],size:"large",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-44",name:"Podbrady 11",location:[50.143106,15.121906],size:"medium",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"},{id:"art-45",name:"Podbrady 12",location:[50.143394,15.116619],size:"small",status:"active",mhd:null,capturedBy:null,area:"Podbrady",hood:"podebrady"}];function ja(t){var e;return((e=rA[t.size])==null?void 0:e.points)||100}function B5(t,e=.008){const n={};uo.forEach(r=>n[r]=[]);const i={};return uo.forEach(r=>i[r]=[]),t.forEach(r=>{r.capturedBy&&i[r.capturedBy]&&i[r.capturedBy].push(r)}),uo.forEach(r=>{const o=i[r],a=new Set;for(let u=0;u<o.length;u++)for(let h=u+1;h<o.length;h++){const f=o[u],m=o[h],g=`${f.id}-${m.id}`,_=f.location[0]-m.location[0],T=(f.location[1]-m.location[1])*1.6,b=Math.sqrt(_*_+T*T);b<=e&&!a.has(g)&&(a.add(g),n[r].push({from:f.location,to:m.location,distance:b}))}}),n}function gm(t){const e={red:"#ff6b6b",blue:"#4dabf7",green:"#51cf66",yellow:"#fcc419",neutral:"#495057"};return e[t]||e.neutral}function sA(t){const e={};return uo.forEach(n=>e[n]=0),t.forEach(n=>{if(n.capturedBy&&e[n.capturedBy]!==void 0){const i=ja(n),r=n.status==="ghost"?Math.floor(i/2):i;e[n.capturedBy]+=r}}),e}const oA=V.createContext(null),gn={player:"streetart-ctf-player",captures:"streetart-ctf-captures",discoveries:"streetart-discoveries",gameMode:"streetart-game-mode"},Rh={SOLO:"solo",TEAM:"team"},Kl="streetart-captures",Lh="streetart-players",ym="streetart-teams",z5={red:{hex:"#ff6b6b",rgb:[1,.42,.42]},blue:{hex:"#4dabf7",rgb:[.3,.67,.97]},neutral:{hex:"#495057",rgb:[.29,.31,.34]}};function Ql(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function Xl(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.warn("Failed to save to localStorage:",n)}}function U5({children:t}){const[e,n]=V.useState(null),[i,r]=V.useState(!0),[o,a]=V.useState(()=>Ql(gn.gameMode,Rh.SOLO)),[u,h]=V.useState(()=>Ql(gn.discoveries,{})),[f,m]=V.useState(()=>Ql(gn.player,{id:`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,totalDistance:0,lastCaptureTime:null,lastCaptureLocation:null,captureCount:0,recaptureCount:0,firstCaptureCount:0,discoveryCount:0,uniqueAreasVisited:[]})),[g,_]=V.useState(()=>{const te=Ql(gn.captures,{});return hi.map(le=>({...le,capturedBy:te[le.id]||null}))}),[T,b]=V.useState(null),[A,j]=V.useState(!1),[k,P]=V.useState(null);V.useEffect(()=>{const te=xF(ST,le=>{le?(n(le),m(ge=>({...ge,id:le.uid}))):mF(ST).catch(ge=>{console.log("Auth not available, using local mode")})});return()=>te()},[]);const[C,B]=V.useState(null),[q,U]=V.useState([]),R=V.useRef({});V.useEffect(()=>{let te=!0;const le=Ys(At,Kl),ge=fm(le,Te=>{const de={},Ae={},Et=[];Te.forEach(ye=>{var at,Le,Be,Pn;const ke=ye.data();if(ke.status&&(Ae[ye.id]=ke.status),ke.capturedBy){de[ye.id]={team:ke.capturedBy,playerName:ke.playerName||"Unknown",capturedAt:((Le=(at=ke.capturedAt)==null?void 0:at.toDate)==null?void 0:Le.call(at))||null};const ei=hi.find(Rs=>Rs.id===ye.id);Et.push({id:ye.id,artName:(ei==null?void 0:ei.name)||ye.id,area:(ei==null?void 0:ei.area)||"Unknown",team:ke.capturedBy,playerName:ke.playerName||"Unknown",capturedAt:((Pn=(Be=ke.capturedAt)==null?void 0:Be.toDate)==null?void 0:Pn.call(Be))||new Date,points:ke.points||100,isRecapture:ke.isRecapture||!1})}});const gt=Et.sort((ye,ke)=>ke.capturedAt-ye.capturedAt).slice(0,10);U(gt),te||Te.docChanges().forEach(ye=>{var ke;if(ye.type==="added"||ye.type==="modified"){const at=ye.doc.data(),Le=(ke=R.current[ye.doc.id])==null?void 0:ke.team;if(at.capturedBy&&Le!==at.capturedBy){const Be=hi.find(Pn=>Pn.id===ye.doc.id);Be&&(B({artName:Be.name,team:at.capturedBy,playerName:at.playerName||"Someone",points:at.points||ja(Be),streak:at.streak||0,isRecapture:at.isRecapture||!!Le,timestamp:Date.now()}),setTimeout(()=>B(null),4e3))}}}),te=!1,R.current=de,_(hi.map(ye=>{const ke=de[ye.id];return{...ye,capturedBy:(ke==null?void 0:ke.team)||null,capturedByPlayer:(ke==null?void 0:ke.playerName)||null,capturedAt:(ke==null?void 0:ke.capturedAt)||null,status:Ae[ye.id]||ye.status}})),Xl(gn.captures,de),r(!0),console.log("Firebase: Synced",Object.keys(de).length,"captures")},Te=>{console.warn("Firestore sync error:",Te),r(!1)});return()=>ge()},[]);const[S,N]=V.useState({red:0,blue:0});V.useEffect(()=>{const te=Ys(At,ym),le=fm(te,ge=>{const Te={red:0,blue:0};ge.forEach(de=>{const Ae=de.data();(de.id==="red"||de.id==="blue")&&(Te[de.id]=Ae.score||0)}),N(Te),console.log("Team scores:",Te)});return()=>le()},[]);const[D,M]=V.useState([]);V.useEffect(()=>{const te=Ys(At,Lh),le=fm(te,ge=>{const Te=[];ge.forEach(de=>{const Ae=de.data();Ae.name&&Ae.team&&Te.push({id:de.id,name:Ae.name,team:Ae.team,score:Ae.score||0,captures:Ae.captures||0})}),M(Te.sort((de,Ae)=>Ae.score-de.score)),console.log("Players loaded:",Te.length)});return()=>le()},[]),V.useEffect(()=>{Xl(gn.player,f)},[f]);const z=V.useCallback(async(te,le)=>{if(i)try{await Ai(An(At,Kl,te),{artId:te,capturedBy:le.team,capturedAt:new Date,playerId:f.id,playerName:f.name,points:le.points,streak:le.streak,isFirstCapture:le.isFirstCapture,isRecapture:le.isRecapture})}catch(ge){console.warn("Failed to sync capture to Firebase:",ge)}},[i,f.id,f.name]);V.useCallback(async te=>{if(i)try{await Ai(An(At,Kl,"global"),te,{merge:!0})}catch(le){console.warn("Failed to sync to Firebase:",le)}},[i]);const O=sA(g),fe={red:Math.max(S.red,O.red),blue:Math.max(S.blue,O.blue)},Xe=V.useCallback(async te=>{if(uo.includes(te)&&(m(le=>({...le,team:te})),i&&f.id))try{await Ai(An(At,Lh,f.id),{name:f.name,team:te,score:f.score||0,captures:f.captureCount||0,joinedAt:new Date},{merge:!0})}catch(le){console.warn("Failed to sync player to Firebase:",le)}},[i,f.id,f.name,f.score,f.captureCount]),be=V.useCallback(te=>{m(le=>({...le,name:te}))},[]),Je=V.useCallback((te,le,ge=50)=>{let Te=null,de=1/0;return g.forEach(Ae=>{const Et=(Ae.location[0]-te)*111e3,gt=(Ae.location[1]-le)*111e3*Math.cos(te*Math.PI/180),ye=Math.sqrt(Et*Et+gt*gt);ye<de&&ye<=ge&&(de=ye,Te={...Ae,distance:Math.round(ye)})}),Te},[g]),Z=V.useCallback((te,le,ge,Te)=>{const de=(ge-te)*111e3,Ae=(Te-le)*111e3*Math.cos(te*Math.PI/180);return Math.sqrt(de*de+Ae*Ae)},[]),ce=V.useCallback((te,le,ge=null)=>{const Te=ja(te),de=[];let Ae=Te;const Et=te.capturedBy&&te.capturedBy!==le.team,gt=!te.capturedBy,ye=Date.now(),ke=le.lastCaptureTime?(ye-le.lastCaptureTime)/1e3/60:1/0,at=le.streak||0;if(at>0){const Le=Math.min(at*.1,1),Be=Math.round(Te*Le);Be>0&&(Ae+=Be,de.push({type:"streak",label:`${at}x Streak`,points:Be}))}if(Et){const Le=Math.round(Te*.5);Ae+=Le,de.push({type:"recapture",label:"Recapture",points:Le})}if(gt){const Le=Math.round(Te*.25);Ae+=Le,de.push({type:"first",label:"First Capture",points:Le})}if(ke<5){const Le=Math.round(Te*.2);Ae+=Le,de.push({type:"speed",label:"Speed Bonus",points:Le})}if(ge&&le.lastCaptureLocation){const Le=Z(le.lastCaptureLocation[0],le.lastCaptureLocation[1],ge[0],ge[1]);if(Le>50){const Be=Math.min(Math.round(Le/100)*5,50);Be>0&&(Ae+=Be,de.push({type:"distance",label:`${Math.round(Le)}m walked`,points:Be}))}}return{basePoints:Te,totalPoints:Ae,bonuses:de,isRecapture:Et,isFirstCapture:gt}},[Z]),J=V.useCallback((te,le=null)=>{if(!f.team)return{success:!1,message:"Join a team first!"};const ge=g.find(ye=>ye.id===te);if(!ge)return{success:!1,message:"Art not found"};if(ge.capturedBy===f.team)return{success:!1,message:"Already yours!"};if(ge.status==="ghost")return{success:!1,message:"This art no longer exists"};const Te=le||ge.location,de=ce(ge,f,Te),Ae=ge.capturedBy;_(ye=>ye.map(ke=>ke.id===te?{...ke,capturedBy:f.team}:ke));const Et=f.streak+1;m(ye=>({...ye,score:ye.score+de.totalPoints,capturedArt:[...ye.capturedArt.filter(ke=>ke!==te),te],streak:Et,maxStreak:Math.max(ye.maxStreak,Et),lastCaptureTime:Date.now(),lastCaptureLocation:Te,captureCount:ye.captureCount+1,recaptureCount:de.isRecapture?ye.recaptureCount+1:ye.recaptureCount,firstCaptureCount:de.isFirstCapture?ye.firstCaptureCount+1:ye.firstCaptureCount,totalDistance:ye.totalDistance+(le&&ye.lastCaptureLocation?Z(ye.lastCaptureLocation[0],ye.lastCaptureLocation[1],le[0],le[1]):0)})),z(te,{team:f.team,points:de.totalPoints,streak:Et,isFirstCapture:de.isFirstCapture,isRecapture:de.isRecapture});const gt=Ql(gn.captures,{});return Xl(gn.captures,{...gt,[te]:f.team}),{success:!0,art:ge,points:de.totalPoints,basePoints:de.basePoints,bonuses:de.bonuses,streak:Et,previousTeam:Ae,message:Ae?`Stolen from ${Ae}!`:"Captured!"}},[f,g,z,ce,Z]),ne=V.useCallback(async(te,le)=>{j(!0);const ge=Je(le.lat,le.lng,100);if(!ge){j(!1),b({success:!1,message:"No street art nearby. Get closer!"});return}P({art:ge,photo:te,location:le}),j(!1)},[Je]),Ce=V.useCallback(()=>{if(!k)return;const te=J(k.art.id);b(te),P(null)},[k,J]),Ye=V.useCallback(()=>{P(null),b(null)},[]),Ne=V.useCallback(te=>{(te===Rh.SOLO||te===Rh.TEAM)&&(a(te),Xl(gn.gameMode,te))},[]),Re=V.useCallback(async(te,le=null)=>{const ge=g.find(gt=>gt.id===te);if(!ge)return{success:!1,message:"Art not found"};if(u[te])return{success:!1,message:"Already discovered!",alreadyDiscovered:!0};const Te=new Date,de={artId:te,artName:ge.name,area:ge.area,size:ge.size,points:ja(ge),discoveredAt:Te.toISOString(),location:le||ge.location},Ae={...u,[te]:de};h(Ae),Xl(gn.discoveries,Ae);const Et=new Set([...f.uniqueAreasVisited,ge.area]);if(m(gt=>({...gt,score:gt.score+de.points,discoveryCount:gt.discoveryCount+1,uniqueAreasVisited:[...Et],lastCaptureTime:Te.getTime(),lastCaptureLocation:le||ge.location})),i&&f.id)try{await Ai(An(At,"streetart-discoveries",`${f.id}_${te}`),{...de,playerId:f.id,playerName:f.name})}catch(gt){console.warn("Failed to sync discovery to Firebase:",gt)}return{success:!0,message:"Discovered!",discovery:de}},[g,u,f,i]),pe=V.useCallback(async()=>{if(console.log("Resetting all data..."),localStorage.removeItem(gn.player),localStorage.removeItem(gn.captures),localStorage.removeItem(gn.discoveries),localStorage.removeItem(gn.gameMode),Object.keys(localStorage).forEach(te=>{te.startsWith("streetart-")&&localStorage.removeItem(te)}),i)try{const te=await ef(Ys(At,Kl)),le=te.docs.map(de=>Iu(An(At,Kl,de.id)));await Promise.all(le),console.log("Deleted",te.size,"captures");const ge=await ef(Ys(At,Lh)),Te=ge.docs.map(de=>Iu(An(At,Lh,de.id)));await Promise.all(Te),console.log("Deleted",ge.size,"players"),await Ai(An(At,ym,"red"),{score:0}),await Ai(An(At,ym,"blue"),{score:0}),console.log("Reset team scores")}catch(te){console.warn("Failed to reset Firebase:",te)}m({id:(e==null?void 0:e.uid)||`player-${Date.now()}`,name:"Street Artist",team:null,score:0,capturedArt:[],streak:0,maxStreak:0,captureCount:0,recaptureCount:0,firstCaptureCount:0,totalDistance:0,discoveryCount:0,uniqueAreasVisited:[]}),_(hi.map(te=>({...te,capturedBy:null}))),h({}),b(null),P(null),U([]),console.log("Reset complete!"),window.location.reload()},[e,i]),ut={player:f,artPoints:g,teamScores:fe,globalTeamScores:S,allPlayers:D,recentCaptures:q,captureNotification:C,scanResult:T,isScanning:A,pendingCapture:k,isOnline:i,teams:uo,gameMode:o,discoveries:u,discoveryCount:Object.keys(u).length,setGameMode:Ne,joinTeam:Xe,setPlayerName:be,captureArt:J,discoverArt:Re,startCapture:ne,confirmCapture:Ce,cancelCapture:Ye,findNearestArt:Je,setScanResult:b,resetAll:pe,TEAM_COLORS:z5,GAME_MODES:Rh};return x.jsx(oA.Provider,{value:ut,children:t})}function Ui(){const t=V.useContext(oA);if(!t)throw new Error("useGame must be used within a GameProvider");return t}const AT=["Swift","Bold","Neon","Urban","Wild","Cosmic","Pixel","Mystic","Shadow","Electric"],kT=["Artist","Hunter","Rebel","Ghost","Ninja","Pirate","Wizard","Rogue","Phoenix","Storm"];function bT(){const t=AT[Math.floor(Math.random()*AT.length)],e=kT[Math.floor(Math.random()*kT.length)],n=Math.floor(Math.random()*99)+1;return`${t}${e}${n}`}function RT({text:t,className:e="",delay:n=0}){const i=t.split(" ");return x.jsx("span",{className:e,children:i.map((r,o)=>x.jsx(re.span,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n+o*.08,duration:.4},className:"inline-block mr-[0.3em]",children:r},o))})}function Yl({text:t,className:e="",delay:n=0}){return x.jsx("span",{className:e,children:t.split("").map((i,r)=>x.jsx(re.span,{initial:{opacity:0,y:40,rotate:-10},animate:{opacity:1,y:0,rotate:0},transition:{delay:n+r*.04,duration:.5,type:"spring",stiffness:200},className:"inline-block",style:{display:i===" "?"inline":"inline-block"},children:i===" "?"":i},r))})}function H5(){const t=Af(),{player:e,joinTeam:n,setPlayerName:i,allPlayers:r}=Ui(),[o,a]=V.useState(0),[u,h]=V.useState(()=>e.name&&e.name!=="Street Artist"?e.name:bT()),[f,m]=V.useState(null);V.useEffect(()=>{e.team&&e.name&&e.name!=="Street Artist"&&t("/map")},[]);const g=()=>{if(f)return f;const k=r.filter(B=>B.team==="red").length,P=r.filter(B=>B.team==="blue").length;return k<P?"red":P<k?"blue":Math.random()<.5?"red":"blue"},_=()=>h(bT()),T=()=>{if(o===1&&u.trim()){i(u.trim());const k=g();m(k),n(k)}if(o===3){t("/map");return}a(o+1)},b=()=>o===1?u.trim().length>=2:!0,A=f==="red"?"#E53935":"#1E88E5",j=f==="red"?"RED":"BLUE";return x.jsxs("div",{className:"h-screen bg-[#FAFAFA] flex flex-col overflow-hidden font-nohemi",children:[x.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-black/5 z-10",children:x.jsx(re.div,{className:"h-full bg-black",initial:{width:"0%"},animate:{width:`${(o+1)/4*100}%`},transition:{duration:.5,ease:"easeOut"}})}),x.jsxs(Xu,{mode:"wait",children:[o===0&&x.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-100},transition:{duration:.4},className:"flex-1 flex flex-col justify-between p-6 pt-16",children:[x.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[x.jsx(re.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-sm tracking-widest text-black/40 mb-4",children:"WELCOME TO"}),x.jsxs("h1",{className:"text-[3.5rem] leading-[0.95] font-bold text-black mb-8 tracking-tight",children:[x.jsx(Yl,{text:"Street",delay:.3}),x.jsx("br",{}),x.jsx(Yl,{text:"Art",delay:.5}),x.jsx("br",{}),x.jsx(Yl,{text:"CTF",delay:.7})]}),x.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"text-lg text-black/50 max-w-[280px] leading-relaxed",children:"The city becomes your canvas. Find street art. Claim territory. Win the game."})]}),x.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.4},className:"space-y-6",children:x.jsxs("div",{className:"flex gap-8 text-sm text-black/40",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-2xl font-bold text-black",children:hi.length}),x.jsx("div",{children:"locations"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-2xl font-bold text-black",children:"2"}),x.jsx("div",{children:"teams"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-2xl font-bold text-black",children:"1"}),x.jsx("div",{children:"winner"})]})]})})]},"intro"),o===1&&x.jsxs(re.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.4},className:"flex-1 flex flex-col justify-center p-6",children:[x.jsx(re.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-sm tracking-widest text-black/40 mb-4",children:"STEP 1 OF 3"}),x.jsx("h1",{className:"text-4xl font-bold text-black mb-3 tracking-tight",children:x.jsx(RT,{text:"Who are you?",delay:.2})}),x.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-black/40 mb-10",children:"Pick a name. Make it memorable."}),x.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[x.jsx("input",{type:"text",value:u,onChange:k=>h(k.target.value),placeholder:"Your name",maxLength:20,className:"w-full py-4 text-3xl font-bold text-black bg-transparent border-b-2 border-black/20 focus:border-black focus:outline-none placeholder:text-black/20 transition-colors"}),x.jsx("button",{onClick:_,className:"mt-6 text-sm text-black/40 hover:text-black transition-colors underline underline-offset-4",children:"Randomize"})]})]},"name"),o===2&&x.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-100},transition:{duration:.4},className:"flex-1 flex flex-col justify-center items-center p-6 text-center relative overflow-hidden",style:{backgroundColor:A},children:x.jsxs(re.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:150},children:[x.jsxs(re.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/60 text-sm tracking-widest mb-2",children:[u.toUpperCase(),", YOU ARE"]}),x.jsxs("h1",{className:"text-[5rem] leading-none font-black text-white tracking-tight",children:[x.jsx(Yl,{text:"TEAM",delay:.6}),x.jsx("br",{}),x.jsx(Yl,{text:j,delay:.9})]}),x.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.4},className:"mt-6 text-white/50 text-lg",children:f==="red"?"Burn bright. Conquer all.":"Flow strong. Take over."})]})},"team"),o===3&&x.jsxs(re.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0},transition:{duration:.4},className:"flex-1 flex flex-col justify-center p-6",children:[x.jsx(re.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-4",children:"HOW IT WORKS"}),x.jsx("h1",{className:"text-4xl font-bold text-black mb-10 tracking-tight",children:x.jsx(RT,{text:"Three simple steps",delay:.1})}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs(re.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.3},className:"flex gap-5",children:[x.jsx("div",{className:"text-5xl font-black text-black/10",children:"1"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-black mb-1",children:"Find"}),x.jsx("p",{className:"text-black/50 leading-relaxed",children:"Walk the streets. Look for Chumpsters hiding in plain sight."})]})]}),x.jsxs(re.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.5},className:"flex gap-5",children:[x.jsx("div",{className:"text-5xl font-black text-black/10",children:"2"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-black mb-1",children:"Scan"}),x.jsx("p",{className:"text-black/50 leading-relaxed",children:"Point your camera. The AR scanner recognizes the art instantly."})]})]}),x.jsxs(re.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.7},className:"flex gap-5",children:[x.jsx("div",{className:"text-5xl font-black text-black/10",children:"3"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-black mb-1",children:"Capture"}),x.jsx("p",{className:"text-black/50 leading-relaxed",children:"Claim it for your team. Build streaks. Dominate the map."})]})]})]})]},"how")]}),x.jsx("div",{className:"p-6 flex-shrink-0",style:{paddingBottom:"max(24px, env(safe-area-inset-bottom))"},children:x.jsx(re.button,{whileTap:{scale:.98},onClick:T,disabled:!b(),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:`w-full py-5 font-bold text-lg tracking-wide transition-all ${o===2?"bg-white text-black":b()?"bg-black text-white":"bg-black/10 text-black/30 cursor-not-allowed"}`,children:o===3?"LET'S GO":o===2?"CONTINUE":"NEXT"})})]})}const tr={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};function W5(t){const e=Math.floor((new Date-t)/1e3);if(e<60)return"now";const n=Math.floor(e/60);if(n<60)return`${n}m`;const i=Math.floor(n/60);return i<24?`${i}h`:`${Math.floor(i/24)}d`}function $5(){const{player:t,teamScores:e,recentCaptures:n,isOnline:i,artPoints:r}=Ui(),o=e.red+e.blue,a=o>0?Math.round(e.red/o*100):50,u=100-a,h=e.red>e.blue?"red":e.blue>e.red?"blue":null,f=(r==null?void 0:r.filter(_=>_.capturedBy==="red"&&_.status!=="ghost").length)||0,m=(r==null?void 0:r.filter(_=>_.capturedBy==="blue"&&_.status!=="ghost").length)||0,g=(r==null?void 0:r.filter(_=>_.status!=="ghost").length)||0;return x.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi",children:[x.jsxs("div",{className:"p-6 pt-10",children:[x.jsx(re.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-1",children:i?"LIVE":"OFFLINE"}),x.jsx(re.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl font-bold text-black tracking-tight",children:"War Room"})]}),x.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"px-6 mb-8",children:[x.jsxs("div",{className:"flex justify-between items-end mb-4",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-sm text-black/40 mb-1",children:"RED"}),x.jsx("div",{className:"text-5xl font-black",style:{color:h==="red"?tr.red.color:"rgba(0,0,0,0.2)"},children:e.red})]}),x.jsx("div",{className:"text-2xl font-bold text-black/20 pb-2",children:"vs"}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"text-sm text-black/40 mb-1",children:"BLUE"}),x.jsx("div",{className:"text-5xl font-black",style:{color:h==="blue"?tr.blue.color:"rgba(0,0,0,0.2)"},children:e.blue})]})]}),x.jsxs("div",{className:"h-2 bg-black/5 flex overflow-hidden",children:[x.jsx(re.div,{className:"h-full",style:{backgroundColor:tr.red.color},initial:{width:"50%"},animate:{width:`${a}%`},transition:{duration:.8,ease:"easeOut"}}),x.jsx(re.div,{className:"h-full",style:{backgroundColor:tr.blue.color},initial:{width:"50%"},animate:{width:`${u}%`},transition:{duration:.8,ease:"easeOut"}})]}),x.jsxs("div",{className:"flex justify-between mt-2 text-xs text-black/30",children:[x.jsxs("span",{children:[a,"%"]}),x.jsxs("span",{children:[u,"%"]})]}),x.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t border-black/5",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-black",style:{color:tr.red.color},children:f}),x.jsx("div",{className:"text-xs text-black/30",children:"territories"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-lg font-bold text-black/20",children:g-f-m}),x.jsx("div",{className:"text-xs text-black/30",children:"unclaimed"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-black",style:{color:tr.blue.color},children:m}),x.jsx("div",{className:"text-xs text-black/30",children:"territories"})]})]})]}),t.team&&x.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mx-6 mb-8 p-5",style:{backgroundColor:tr[t.team].color},children:x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-white/60 text-xs tracking-widest mb-1",children:"YOU"}),x.jsx("div",{className:"text-2xl font-bold text-white",children:t.name}),x.jsxs("div",{className:"text-white/60 text-sm mt-1",children:["Team ",tr[t.team].name]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"text-4xl font-black text-white",children:t.score}),x.jsx("div",{className:"text-white/60 text-xs",children:"points"})]})]})}),x.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"px-6 pb-32",children:[x.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"ACTIVITY"}),n.length===0?x.jsxs("div",{className:"py-12 text-center",children:[x.jsx("div",{className:"text-6xl font-black text-black/5 mb-2",children:"0"}),x.jsx("div",{className:"text-black/30",children:"No captures yet"}),x.jsx("div",{className:"text-black/20 text-sm",children:"Be the first to claim territory"})]}):x.jsx("div",{className:"space-y-1",children:n.map((_,T)=>{const b=tr[_.team]||{color:"#888"},A=_.isRecapture;return x.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+T*.05},className:"flex items-center gap-4 py-3 border-b border-black/5",children:[x.jsx("div",{className:"w-1 h-10 flex-shrink-0",style:{backgroundColor:b.color}}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-bold text-black truncate",children:_.artName}),x.jsxs("div",{className:"text-sm text-black/40",children:[_.playerName,"  ",_.area]})]}),x.jsxs("div",{className:"text-right flex-shrink-0",children:[A?x.jsx("div",{className:"font-bold text-black/60",children:"STOLEN"}):x.jsxs("div",{className:"font-bold",style:{color:b.color},children:["+",_.points]}),x.jsx("div",{className:"text-xs text-black/30",children:W5(_.capturedAt)})]})]},_.id)})})]})]})}function G5(t,e){const n=V.useRef(e);V.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function q5(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const Z5=1;function K5(t){return Object.freeze({__version:Z5,map:t})}function np(t,e){return Object.freeze({...t,...e})}const aA=V.createContext(null),lA=aA.Provider;function av(){const t=V.useContext(aA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function uA(t){function e(n,i){const{instance:r,context:o}=t(n).current;return V.useImperativeHandle(i,()=>r),n.children==null?null:co.createElement(lA,{value:o},n.children)}return V.forwardRef(e)}function Q5(t){function e(n,i){const{instance:r}=t(n).current;return V.useImperativeHandle(i,()=>r),null}return V.forwardRef(e)}function cA(t,e){const n=V.useRef();V.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function lv(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var ey={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})($A,function(n){var i="1.9.4";function r(s){var l,d,p,v;for(d=1,p=arguments.length;d<p;d++){v=arguments[d];for(l in v)s[l]=v[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,v,E,F;return F=function(){p=!1,v&&(E.apply(d,v),v=!1)},E=function(){p?v=arguments:(s.apply(d,arguments),setTimeout(F,l),p=!0)},E}function m(s,l,d){var p=l[1],v=l[0],E=p-v;return s===p&&d?s:((s-v)%E+E)%E+v}function g(){return!1}function _(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function b(s){return T(s).split(/\s+/)}function A(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function j(s,l,d){var p=[];for(var v in s)p.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function P(s,l){return s.replace(k,function(d,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var C=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function U(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function S(s){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(s,d)}var N=window.requestAnimationFrame||U("RequestAnimationFrame")||S,D=window.cancelAnimationFrame||U("CancelAnimationFrame")||U("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function M(s,l,d){if(d&&N===S)s.call(l);else return N.call(window,a(s,l))}function z(s){s&&D.call(window,s)}var O={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:_,trim:T,splitWords:b,setOptions:A,getParamString:j,template:P,isArray:C,indexOf:B,emptyImageUrl:q,requestFn:N,cancelFn:D,requestAnimFrame:M,cancelAnimFrame:z};function fe(){}fe.extend=function(s){var l=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&r(l,s.statics),s.includes&&(Xe(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,F=p._initHooks.length;E<F;E++)p._initHooks[E].call(this)}},l},fe.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},fe.mergeOptions=function(s){return r(this.prototype.options,s),this},fe.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Xe(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=C(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var be={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=b(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=b(s);for(var v=arguments.length===1,E=0,F=s.length;E<F;E++)v?this._off(s[E]):this._off(s[E],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,d){var p,v,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,E=p.length;v<E;v++)p[v].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var F=this._listens(s,l,d);if(F!==!1){var W=p[F];this._firingCount&&(W.fn=g,this._events[s]=p=p.slice()),p.splice(F,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var E=0,F=v.length;E<F;E++){var W=v[E],G=W.fn;W.once&&this.off(s,G,W.ctx),G.call(W.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,d=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,v,d)!==!1)return!0;if(p){for(var F in this._eventParents)if(this._eventParents[F].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var v=0,E=p.length;v<E;v++)if(p[v].fn===l&&p[v].ctx===d)return v;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=b(s);for(var v=0,E=s.length;v<E;v++)this._on(s[v],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};be.addEventListener=be.on,be.removeEventListener=be.clearAllEventListeners=be.off,be.addOneTimeEventListener=be.once,be.fireEvent=be.fire,be.hasEventListeners=be.listens;var Je=fe.extend(be);function Z(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function J(s,l,d){return s instanceof Z?s:C(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,d)}function ne(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}ne.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=Ce(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof Z?s=J(s):s=Ce(s),s instanceof ne?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Ce(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>=l.x&&p.x<=d.x,F=v.y>=l.y&&p.y<=d.y;return E&&F},overlaps:function(s){s=Ce(s);var l=this.min,d=this.max,p=s.min,v=s.max,E=v.x>l.x&&p.x<d.x,F=v.y>l.y&&p.y<d.y;return E&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,v=Math.abs(l.y-d.y)*s;return Ce(J(l.x-p,l.y-v),J(d.x+p,d.y+v))},equals:function(s){return s?(s=Ce(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Ce(s,l){return!s||s instanceof ne?s:new ne(s,l)}function Ye(s,l){if(s)for(var d=l?[s,l]:s,p=0,v=d.length;p<v;p++)this.extend(d[p])}Ye.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,v;if(s instanceof Re)p=s,v=s;else if(s instanceof Ye){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(pe(s)||Ne(s)):this;return!l&&!d?(this._southWest=new Re(p.lat,p.lng),this._northEast=new Re(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,v=Math.abs(l.lng-d.lng)*s;return new Ye(new Re(l.lat-p,l.lng-v),new Re(d.lat+p,d.lng+v))},getCenter:function(){return new Re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Re(this.getNorth(),this.getWest())},getSouthEast:function(){return new Re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Re||"lat"in s?s=pe(s):s=Ne(s);var l=this._southWest,d=this._northEast,p,v;return s instanceof Ye?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=d.lat&&p.lng>=l.lng&&v.lng<=d.lng},intersects:function(s){s=Ne(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>=l.lat&&p.lat<=d.lat,F=v.lng>=l.lng&&p.lng<=d.lng;return E&&F},overlaps:function(s){s=Ne(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),E=v.lat>l.lat&&p.lat<d.lat,F=v.lng>l.lng&&p.lng<d.lng;return E&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Ne(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ne(s,l){return s instanceof Ye?s:new Ye(s,l)}function Re(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Re.prototype={equals:function(s,l){if(!s)return!1;s=pe(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+_(this.lat,s)+", "+_(this.lng,s)+")"},distanceTo:function(s){return te.distance(this,pe(s))},wrap:function(){return te.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ne([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Re(this.lat,this.lng,this.alt)}};function pe(s,l,d){return s instanceof Re?s:C(s)&&typeof s[0]!="object"?s.length===3?new Re(s[0],s[1],s[2]):s.length===2?new Re(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Re(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Re(s,l,d)}var ut={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new ne(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Re(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,v=l.lng-d.lng;if(p===0&&v===0)return s;var E=s.getSouthWest(),F=s.getNorthEast(),W=new Re(E.lat-p,E.lng-v),G=new Re(F.lat-p,F.lng-v);return new Ye(W,G)}},te=r({},ut,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,v=l.lat*d,E=Math.sin((l.lat-s.lat)*d/2),F=Math.sin((l.lng-s.lng)*d/2),W=E*E+Math.cos(p)*Math.cos(v)*F*F,G=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*G}}),le=6378137,ge={R:le,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),v=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new Re((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=le*Math.PI;return new ne([-s,-s],[s,s])}()};function Te(s,l,d,p){if(C(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}Te.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function de(s,l,d,p){return new Te(s,l,d,p)}var Ae=r({},te,{code:"EPSG:3857",projection:ge,transformation:function(){var s=.5/(Math.PI*ge.R);return de(s,.5,-s,.5)}()}),Et=r({},Ae,{code:"EPSG:900913"});function gt(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ye(s,l){var d="",p,v,E,F,W,G;for(p=0,E=s.length;p<E;p++){for(W=s[p],v=0,F=W.length;v<F;v++)G=W[v],d+=(v?"L":"M")+G.x+" "+G.y;d+=l?ue.svg?"z":"x":""}return d||"M0 0"}var ke=document.documentElement.style,at="ActiveXObject"in window,Le=at&&!document.addEventListener,Be="msLaunchUri"in navigator&&!("documentMode"in document),Pn=dn("webkit"),ei=dn("android"),Rs=dn("android 2")||dn("android 3"),rp=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ls=ei&&dn("Google")&&rp<537&&!("AudioNode"in window),No=!!window.opera,pl=!Be&&dn("chrome"),Mo=dn("gecko")&&!Pn&&!No&&!at,sp=!pl&&dn("safari"),Ic=dn("phantom"),ml="OTransition"in ke,Ac=navigator.platform.indexOf("Win")===0,Cr=at&&"transition"in ke,Ns="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Rs,Oo="MozPerspective"in ke,Hi=!window.L_DISABLE_3D&&(Cr||Ns||Oo)&&!ml&&!Ic,Ir=typeof orientation<"u"||dn("mobile"),Do=Ir&&Pn,kc=Ir&&Ns,Ar=!window.PointerEvent&&window.MSPointerEvent,gl=!!(window.PointerEvent||Ar),Dt="ontouchstart"in window||!!window.TouchEvent,bc=!window.L_NO_TOUCH&&(Dt||gl),Ms=Ir&&No,Os=Ir&&Mo,op=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ap=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),kr=function(){return!!document.createElement("canvas").getContext}(),yl=!!(document.createElementNS&&gt("svg").createSVGRect),lp=!!yl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Vo=!yl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Rc=navigator.platform.indexOf("Mac")===0,Lc=navigator.platform.indexOf("Linux")===0;function dn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ue={ie:at,ielt9:Le,edge:Be,webkit:Pn,android:ei,android23:Rs,androidStock:Ls,opera:No,chrome:pl,gecko:Mo,safari:sp,phantom:Ic,opera12:ml,win:Ac,ie3d:Cr,webkit3d:Ns,gecko3d:Oo,any3d:Hi,mobile:Ir,mobileWebkit:Do,mobileWebkit3d:kc,msPointer:Ar,pointer:gl,touch:bc,touchNative:Dt,mobileOpera:Ms,mobileGecko:Os,retina:op,passiveEvents:ap,canvas:kr,svg:yl,vml:Vo,inlineSvg:lp,mac:Rc,linux:Lc},Nc=ue.msPointer?"MSPointerDown":"pointerdown",ti=ue.msPointer?"MSPointerMove":"pointermove",_l=ue.msPointer?"MSPointerUp":"pointerup",vl=ue.msPointer?"MSPointerCancel":"pointercancel",Ds={touchstart:Nc,touchmove:ti,touchend:_l,touchcancel:vl},jo={touchstart:wl,touchmove:Vn,touchend:Vn,touchcancel:Vn},Wi={},Mc=!1;function Oc(s,l,d){return l==="touchstart"&&Vs(),jo[l]?(d=jo[l].bind(this,d),s.addEventListener(Ds[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function up(s,l,d){if(!Ds[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ds[l],d,!1)}function Fo(s){Wi[s.pointerId]=s}function Dc(s){Wi[s.pointerId]&&(Wi[s.pointerId]=s)}function Bo(s){delete Wi[s.pointerId]}function Vs(){Mc||(document.addEventListener(Nc,Fo,!0),document.addEventListener(ti,Dc,!0),document.addEventListener(_l,Bo,!0),document.addEventListener(vl,Bo,!0),Mc=!0)}function Vn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Wi)l.touches.push(Wi[d]);l.changedTouches=[l],s(l)}}function wl(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Pt(l),Vn(s,l)}function cp(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Vc=200;function jc(s,l){s.addEventListener("dblclick",l);var d=0,p;function v(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var F=Sl(E);if(!(F.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!F.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var W=Date.now();W-d<=Vc?(p++,p===2&&l(cp(E))):p=1,d=W}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Fc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var js=zo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$i=zo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xl=$i==="webkitTransition"||$i==="OTransition"?$i+"End":"transitionend";function Tl(s){return typeof s=="string"?document.getElementById(s):s}function br(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function ze(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function We(s){var l=s.parentNode;l&&l.removeChild(s)}function rn(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function jn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Fn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Fs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=yi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function oe(s,l){if(s.classList!==void 0)for(var d=b(l),p=0,v=d.length;p<v;p++)s.classList.add(d[p]);else if(!Fs(s,l)){var E=yi(s);Gi(s,(E?E+" ":"")+l)}}function et(s,l){s.classList!==void 0?s.classList.remove(l):Gi(s,T((" "+yi(s)+" ").replace(" "+l+" "," ")))}function Gi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function yi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function fn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Bc(s,l)}function Bc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function zo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function qi(s,l,d){var p=l||new Z(0,0);s.style[js]=(ue.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function yt(s,l){s._leaflet_pos=l,ue.any3d?qi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Zi(s){return s._leaflet_pos||new Z(0,0)}var ni,Sn,Uo;if("onselectstart"in document)ni=function(){Ee(window,"selectstart",Pt)},Sn=function(){Ke(window,"selectstart",Pt)};else{var Rr=zo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ni=function(){if(Rr){var s=document.documentElement.style;Uo=s[Rr],s[Rr]="none"}},Sn=function(){Rr&&(document.documentElement.style[Rr]=Uo,Uo=void 0)}}function Ho(){Ee(window,"dragstart",Pt)}function Wo(){Ke(window,"dragstart",Pt)}var Bs,_i;function El(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&($o(),Bs=s,_i=s.style.outlineStyle,s.style.outlineStyle="none",Ee(window,"keydown",$o))}function $o(){Bs&&(Bs.style.outlineStyle=_i,Bs=void 0,_i=void 0,Ke(window,"keydown",$o))}function zc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Bn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var hp={__proto__:null,TRANSFORM:js,TRANSITION:$i,TRANSITION_END:xl,get:Tl,getStyle:br,create:ze,remove:We,empty:rn,toFront:jn,toBack:Fn,hasClass:Fs,addClass:oe,removeClass:et,setClass:Gi,getClass:yi,setOpacity:fn,testProp:zo,setTransform:qi,setPosition:yt,getPosition:Zi,get disableTextSelection(){return ni},get enableTextSelection(){return Sn},disableImageDrag:Ho,enableImageDrag:Wo,preventOutline:El,restoreOutline:$o,getSizedParentNode:zc,getScale:Bn};function Ee(s,l,d,p){if(l&&typeof l=="object")for(var v in l)Go(s,v,l[v],d);else{l=b(l);for(var E=0,F=l.length;E<F;E++)Go(s,l[E],d,p)}return this}var sn="_leaflet_events";function Ke(s,l,d,p){if(arguments.length===1)Lr(s),delete s[sn];else if(l&&typeof l=="object")for(var v in l)zs(s,v,l[v],d);else if(l=b(l),arguments.length===2)Lr(s,function(W){return B(l,W)!==-1});else for(var E=0,F=l.length;E<F;E++)zs(s,l[E],d,p);return this}function Lr(s,l){for(var d in s[sn]){var p=d.split(/\d/)[0];(!l||l(p))&&zs(s,p,null,null,d)}}var Ki={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Go(s,l,d,p){var v=l+h(d)+(p?"_"+h(p):"");if(s[sn]&&s[sn][v])return this;var E=function(W){return d.call(p||s,W||window.event)},F=E;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?E=Oc(s,l,E):ue.touch&&l==="dblclick"?E=jc(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Ki[l]||l,E,ue.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(W){W=W||window.event,Il(s,W)&&F(W)},s.addEventListener(Ki[l],E,!1)):s.addEventListener(l,F,!1):s.attachEvent("on"+l,E),s[sn]=s[sn]||{},s[sn][v]=E}function zs(s,l,d,p,v){v=v||l+h(d)+(p?"_"+h(p):"");var E=s[sn]&&s[sn][v];if(!E)return this;!ue.touchNative&&ue.pointer&&l.indexOf("touch")===0?up(s,l,E):ue.touch&&l==="dblclick"?Fc(s,E):"removeEventListener"in s?s.removeEventListener(Ki[l]||l,E,!1):s.detachEvent("on"+l,E),s[sn][v]=null}function Ge(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Pl(s){return Go(s,"wheel",Ge),this}function Us(s){return Ee(s,"mousedown touchstart dblclick contextmenu",Ge),s._leaflet_disable_click=!0,this}function Pt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function vi(s){return Pt(s),Ge(s),this}function Sl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Hs(s,l){if(!l)return new Z(s.clientX,s.clientY);var d=Bn(l),p=d.boundingClientRect;return new Z((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var wi=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Cl(s){return ue.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/wi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Il(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Ws={__proto__:null,on:Ee,off:Ke,stopPropagation:Ge,disableScrollPropagation:Pl,disableClickPropagation:Us,preventDefault:Pt,stop:vi,getPropagationPath:Sl,getMousePosition:Hs,getWheelDelta:Cl,isExternalTarget:Il,addListener:Ee,removeListener:Ke},Al=Je.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Zi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),yt(this._el,d),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Me=Je.extend({options:{crs:Ae,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=A(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(pe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$i&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,xl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(pe(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),E=s instanceof Z?s:this.latLngToContainerPoint(s),F=E.subtract(v).multiplyBy(1-1/p),W=this.containerPointToLatLng(v.add(F));return this.setView(W,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Ne(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,d.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var E=p.subtract(d).divideBy(2),F=this.project(s.getSouthWest(),v),W=this.project(s.getNorthEast(),v),G=this.unproject(F.add(W).divideBy(2).add(E),v);return{center:G,zoom:v}},fitBounds:function(s,l){if(s=Ne(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Al,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){oe(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!ue.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),v=this.project(s),E=this.getSize(),F=this._zoom;s=pe(s),l=l===void 0?F:l;var W=Math.max(E.x,E.y),G=W*this.getZoomScale(F,l),Q=v.distanceTo(p)||1,ie=1.42,_e=ie*ie;function Oe(St){var ih=St?-1:1,BA=St?G:W,zA=G*G-W*W+ih*_e*_e*Q*Q,UA=2*BA*_e*Q,gp=zA/UA,Nv=Math.sqrt(gp*gp+1)-gp,HA=Nv<1e-9?-18:Math.log(Nv);return HA}function on(St){return(Math.exp(St)-Math.exp(-St))/2}function Vt(St){return(Math.exp(St)+Math.exp(-St))/2}function Hn(St){return on(St)/Vt(St)}var mn=Oe(0);function sa(St){return W*(Vt(mn)/Vt(mn+ie*St))}function DA(St){return W*(Vt(mn)*Hn(mn+ie*St)-on(mn))/_e}function VA(St){return 1-Math.pow(1-St,1.5)}var jA=Date.now(),Rv=(Oe(1)-mn)/ie,FA=d.duration?1e3*d.duration:1e3*Rv*.8;function Lv(){var St=(Date.now()-jA)/FA,ih=VA(St)*Rv;St<=1?(this._flyToFrame=M(Lv,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(DA(ih)/Q)),F),this.getScaleZoom(W/sa(ih),F),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Lv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Ne(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Ne(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),E=this.project(s),F=this.getPixelBounds(),W=Ce([F.min.add(d),F.max.subtract(p)]),G=W.getSize();if(!W.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(W.getCenter()),ie=W.extend(E).getSize().subtract(G);v.x+=Q.x<0?-ie.x:ie.x,v.y+=Q.y<0?-ie.y:ie.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),v=d.divideBy(2).round(),E=p.subtract(v);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Re(l,d),v=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var F=this.getBoundsZoom(v);this.setView(p,E.maxZoom?Math.min(F,E.maxZoom):F)}var W={latlng:p,bounds:v,timestamp:s.timestamp};for(var G in s.coords)typeof s.coords[G]=="number"&&(W[G]=s.coords[G]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),We(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)We(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=ze("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Ye(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Ne(s),d=J(d||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),E=this.getMaxZoom(),F=s.getNorthWest(),W=s.getSouthEast(),G=this.getSize().subtract(d),Q=Ce(this.project(W,p),this.project(F,p)).getSize(),ie=ue.any3d?this.options.zoomSnap:1,_e=G.x/Q.x,Oe=G.y/Q.y,on=l?Math.max(_e,Oe):Math.min(_e,Oe);return p=this.getScaleZoom(on,p),ie&&(p=Math.round(p/(ie/100))*(ie/100),p=l?Math.ceil(p/ie)*ie:Math.floor(p/ie)*ie),Math.max(v,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new ne(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(pe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(pe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(pe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ne(s))},distance:function(s,l){return this.options.crs.distance(pe(s),pe(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(s)))},mouseEventToContainerPoint:function(s){return Hs(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Tl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,oe(s,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=br(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),yt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(oe(s.markerPane,"leaflet-zoom-hide"),oe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){yt(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){yt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Ke:Ee;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,v=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,F=!1;E;){if(p=this._targets[h(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){F=!0;break}if(p&&p.listens(l,!0)&&(v&&!Il(E,s)||(d.push(p),v))||E===this._container)break;E=E.parentNode}return!d.length&&!F&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&El(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var v=this._findEventTargets(s,l);if(d){for(var E=[],F=0;F<d.length;F++)d[F].listens(l,!0)&&E.push(d[F]);v=E.concat(v)}if(v.length){l==="contextmenu"&&Pt(s);var W=v[0],G={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);G.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=Q?W.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(F=0;F<v.length;F++)if(v[F].fire(l,G,!0),G.originalEvent._stopped||v[F].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Zi(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Ce([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),E=new ne(p.subtract(v),p.add(v)),F=this._getBoundsOffset(E,d,l);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?s:this.unproject(p.add(F),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new ne(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Ce(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=p.min.subtract(s.min),E=p.max.subtract(s.max),F=this._rebound(v.x,-E.x),W=this._rebound(v.y,-E.y);return new Z(F,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ue.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=ze("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=js,p=this._proxy.style[d];qi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){We(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();qi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(v)?!1:(M(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function qo(s,l){return new Me(s,l)}var pn=fe.extend({options:{position:"topright"},initialize:function(s){A(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return oe(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(We(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),xi=function(s){return new pn(s)};Me.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=ze("div",l+"control-container",this._container);function p(v,E){var F=l+v+" "+l+E;s[v+E]=ze("div",F,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)We(this._controlCorners[s]);We(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Uc=pn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){A(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return pn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=ze("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Us(l),Pl(l);var p=this._section=ze("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Ee(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=ze("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ee(v,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Pt(E),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=ze("div",s+"-base",p),this._separator=ze("div",s+"-separator",p),this._overlaysList=ze("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rn(this._baseLayersList),rn(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,v=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),Ee(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(v);var F=s.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],v=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||v.push(d);for(E=0;E<v.length;E++)this._map.hasLayer(v[E])&&this._map.removeLayer(v[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ee(s,"click",Pt),this.expand();var l=this;setTimeout(function(){Ke(s,"click",Pt),l._preventClick=!1})}}),Hc=function(s,l,d){return new Uc(s,l,d)},Qi=pn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=ze("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,v){var E=ze("a",d,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Us(E),Ee(E,"click",vi),Ee(E,"click",v,this),Ee(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";et(this._zoomInButton,l),et(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(oe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(oe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Me.mergeOptions({zoomControl:!0}),Me.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qi,this.addControl(this.zoomControl))});var Wc=function(s){return new Qi(s)},kl=pn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=ze("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=ze("div",l,d)),s.imperial&&(this._iScale=ze("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,v;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),bl=function(s){return new kl(s)},Rl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Zo=pn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Rl+" ":"")+"Leaflet</a>"},initialize:function(s){A(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=ze("div","leaflet-control-attribution"),Us(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Me.mergeOptions({attributionControl:!0}),Me.addInitHook(function(){this.options.attributionControl&&new Zo().addTo(this)});var Ko=function(s){return new Zo(s)};pn.Layers=Uc,pn.Zoom=Qi,pn.Scale=kl,pn.Attribution=Zo,xi.layers=Hc,xi.zoom=Wc,xi.scale=bl,xi.attribution=Ko;var Cn=fe.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Cn.addTo=function(s,l){return s.addHandler(l,this),this};var $c={Events:be},Ti=ue.touch?"touchstart mousedown":"mousedown",ii=Je.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){A(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(Ee(this._dragStartTarget,Ti,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ii._dragging===this&&this.finishDrag(!0),Ke(this._dragStartTarget,Ti,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Fs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ii._dragging===this&&this.finishDrag();return}if(!(ii._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ii._dragging=this,this._preventOutline&&El(this._element),Ho(),ni(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=zc(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=Zi(this._element),this._parentScale=Bn(d);var p=s.type==="mousedown";Ee(document,p?"mousemove":"touchmove",this._onMove,this),Ee(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Pt(s),this._moved||(this.fire("dragstart"),this._moved=!0,oe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),yt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){et(document.body,"leaflet-dragging"),this._lastTarget&&(et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ke(document,"mousemove touchmove",this._onMove,this),Ke(document,"mouseup touchend touchcancel",this._onUp,this),Wo(),Sn();var l=this._moved&&this._moving;this._moving=!1,ii._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ll(s,l,d){var p,v=[1,4,2,8],E,F,W,G,Q,ie,_e,Oe;for(E=0,ie=s.length;E<ie;E++)s[E]._code=$(s[E],l);for(W=0;W<4;W++){for(_e=v[W],p=[],E=0,ie=s.length,F=ie-1;E<ie;F=E++)G=s[E],Q=s[F],G._code&_e?Q._code&_e||(Oe=H(Q,G,_e,l,d),Oe._code=$(Oe,l),p.push(Oe)):(Q._code&_e&&(Oe=H(Q,G,_e,l,d),Oe._code=$(Oe,l),p.push(Oe)),p.push(G));s=p}return s}function Nl(s,l){var d,p,v,E,F,W,G,Q,ie;if(!s||s.length===0)throw new Error("latlngs not passed");$e(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var _e=pe([0,0]),Oe=Ne(s),on=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());on<1700&&(_e=Qo(s));var Vt=s.length,Hn=[];for(d=0;d<Vt;d++){var mn=pe(s[d]);Hn.push(l.project(pe([mn.lat-_e.lat,mn.lng-_e.lng])))}for(W=G=Q=0,d=0,p=Vt-1;d<Vt;p=d++)v=Hn[d],E=Hn[p],F=v.y*E.x-E.y*v.x,G+=(v.x+E.x)*F,Q+=(v.y+E.y)*F,W+=F*3;W===0?ie=Hn[0]:ie=[G/W,Q/W];var sa=l.unproject(J(ie));return pe([sa.lat+_e.lat,sa.lng+_e.lng])}function Qo(s){for(var l=0,d=0,p=0,v=0;v<s.length;v++){var E=pe(s[v]);l+=E.lat,d+=E.lng,p++}return pe([l/p,d/p])}var Xo={__proto__:null,clipPolygon:Ll,polygonCenter:Nl,centroid:Qo};function qt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=y(s,d),s=Nr(s,d),s}function Ml(s,l,d){return Math.sqrt(Pe(s,l,d,!0))}function Gc(s,l,d){return Pe(s,l,d)}function Nr(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(d);v[0]=v[d-1]=1,c(s,v,l,0,d-1);var E,F=[];for(E=0;E<d;E++)v[E]&&F.push(s[E]);return F}function c(s,l,d,p,v){var E=0,F,W,G;for(W=p+1;W<=v-1;W++)G=Pe(s[W],s[p],s[v],!0),G>E&&(F=W,E=G);E>d&&(l[F]=1,c(s,l,d,p,F),c(s,l,d,F,v))}function y(s,l){for(var d=[s[0]],p=1,v=0,E=s.length;p<E;p++)ee(s[p],s[v])>l&&(d.push(s[p]),v=p);return v<E-1&&d.push(s[E-1]),d}var w;function I(s,l,d,p,v){var E=p?w:$(s,d),F=$(l,d),W,G,Q;for(w=F;;){if(!(E|F))return[s,l];if(E&F)return!1;W=E||F,G=H(s,l,W,d,v),Q=$(G,d),W===E?(s=G,E=Q):(l=G,F=Q)}}function H(s,l,d,p,v){var E=l.x-s.x,F=l.y-s.y,W=p.min,G=p.max,Q,ie;return d&8?(Q=s.x+E*(G.y-s.y)/F,ie=G.y):d&4?(Q=s.x+E*(W.y-s.y)/F,ie=W.y):d&2?(Q=G.x,ie=s.y+F*(G.x-s.x)/E):d&1&&(Q=W.x,ie=s.y+F*(W.x-s.x)/E),new Z(Q,ie,v)}function $(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ee(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function Pe(s,l,d,p){var v=l.x,E=l.y,F=d.x-v,W=d.y-E,G=F*F+W*W,Q;return G>0&&(Q=((s.x-v)*F+(s.y-E)*W)/G,Q>1?(v=d.x,E=d.y):Q>0&&(v+=F*Q,E+=W*Q)),F=s.x-v,W=s.y-E,p?F*F+W*W:new Z(v,E)}function $e(s){return!C(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function qe(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$e(s)}function vt(s,l){var d,p,v,E,F,W,G,Q;if(!s||s.length===0)throw new Error("latlngs not passed");$e(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ie=pe([0,0]),_e=Ne(s),Oe=_e.getNorthWest().distanceTo(_e.getSouthWest())*_e.getNorthEast().distanceTo(_e.getNorthWest());Oe<1700&&(ie=Qo(s));var on=s.length,Vt=[];for(d=0;d<on;d++){var Hn=pe(s[d]);Vt.push(l.project(pe([Hn.lat-ie.lat,Hn.lng-ie.lng])))}for(d=0,p=0;d<on-1;d++)p+=Vt[d].distanceTo(Vt[d+1])/2;if(p===0)Q=Vt[0];else for(d=0,E=0;d<on-1;d++)if(F=Vt[d],W=Vt[d+1],v=F.distanceTo(W),E+=v,E>p){G=(E-p)/v,Q=[W.x-G*(W.x-F.x),W.y-G*(W.y-F.y)];break}var mn=l.unproject(J(Q));return pe([mn.lat+ie.lat,mn.lng+ie.lng])}var zn={__proto__:null,simplify:qt,pointToSegmentDistance:Ml,closestPointOnSegment:Gc,clipSegment:I,_getEdgeIntersection:H,_getBitCode:$,_sqClosestPointOnSegment:Pe,isFlat:$e,_flat:qe,polylineCenter:vt},ri={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new Re(s.y,s.x)},bounds:new ne([-180,-90],[180,90])},Un={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ne([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,v=this.R_MINOR/d,E=Math.sqrt(1-v*v),F=E*Math.sin(p),W=Math.tan(Math.PI/4-p/2)/Math.pow((1-F)/(1+F),E/2);return p=-d*Math.log(Math.max(W,1e-10)),new Z(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,v=Math.sqrt(1-p*p),E=Math.exp(-s.y/d),F=Math.PI/2-2*Math.atan(E),W=0,G=.1,Q;W<15&&Math.abs(G)>1e-7;W++)Q=v*Math.sin(F),Q=Math.pow((1-Q)/(1+Q),v/2),G=Math.PI/2-2*Math.atan(E*Q)-F,F+=G;return new Re(F*l,s.x*l/d)}},Ei={__proto__:null,LonLat:ri,Mercator:Un,SphericalMercator:ge},Yo=r({},te,{code:"EPSG:3395",projection:Un,transformation:function(){var s=.5/(Math.PI*Un.R);return de(s,.5,-s,.5)}()}),Jo=r({},te,{code:"EPSG:4326",projection:ri,transformation:de(1/180,1,-1/180,.5)}),pA=r({},ut,{projection:ri,transformation:de(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});ut.Earth=te,ut.EPSG3395=Yo,ut.EPSG3857=Ae,ut.EPSG900913=Et,ut.EPSG4326=Jo,ut.Simple=pA;var si=Je.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Me.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?C(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ea=si.extend({initialize:function(s,l){A(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),mA=function(s,l){return new ea(s,l)},Xi=ea.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),ea.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),ea.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ye;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),gA=function(s,l){return new Xi(s,l)},ta=fe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){A(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=J(p),E=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ue.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function yA(s){return new ta(s)}var Ol=ta.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ol.imagePath!="string"&&(Ol.imagePath=this._detectIconPath()),(this.options.imagePath||Ol.imagePath)+ta.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,v){var E=p.exec(d);return E&&E[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=ze("div","leaflet-default-icon-path",document.body),l=br(s,"background-image")||br(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),dv=Cn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ii(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),oe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,E=Zi(l._icon),F=d.getPixelBounds(),W=d.getPixelOrigin(),G=Ce(F.min._subtract(W).add(v),F.max._subtract(W).subtract(v));if(!G.contains(E)){var Q=J((Math.max(G.max.x,E.x)-G.max.x)/(F.max.x-G.max.x)-(Math.min(G.min.x,E.x)-G.min.x)/(F.min.x-G.min.x),(Math.max(G.max.y,E.y)-G.max.y)/(F.max.y-G.max.y)-(Math.min(G.min.y,E.y)-G.min.y)/(F.min.y-G.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),yt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=M(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Zi(l._icon),v=l._map.layerPointToLatLng(p);d&&yt(d,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),qc=si.extend({options:{icon:new Ol,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){A(this,l),this._latlng=pe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),oe(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(d,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),E=!1;v!==this._shadow&&(this._removeShadow(),E=!0),v&&(oe(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ke(this._icon,"focus",this._panOnFocus,this),We(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&We(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&yt(this._icon,s),this._shadow&&yt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),dv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new dv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&fn(this._icon,s),this._shadow&&fn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _A(s,l){return new qc(s,l)}var Mr=si.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return A(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zc=Mr.extend({options:{fill:!0,radius:10},initialize:function(s,l){A(this,l),this._latlng=pe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Mr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new ne(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function vA(s,l){return new Zc(s,l)}var dp=Zc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),A(this,l),this._latlng=pe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ye(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Mr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===te.distance){var v=Math.PI/180,E=this._mRadius/te.R/v,F=d.project([l+E,s]),W=d.project([l-E,s]),G=F.add(W).divideBy(2),Q=d.unproject(G).lat,ie=Math.acos((Math.cos(E*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(ie)||ie===0)&&(ie=E/Math.cos(Math.PI/180*l)),this._point=G.subtract(d.getPixelOrigin()),this._radius=isNaN(ie)?0:G.x-d.project([Q,s-ie]).x,this._radiusY=G.y-F.y}else{var _e=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(_e).x}this._updateBounds()}});function wA(s,l,d){return new dp(s,l,d)}var Yi=Mr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){A(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=Pe,v,E,F=0,W=this._parts.length;F<W;F++)for(var G=this._parts[F],Q=1,ie=G.length;Q<ie;Q++){v=G[Q-1],E=G[Q];var _e=p(s,v,E,!0);_e<l&&(l=_e,d=p(s,v,E))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=pe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ye,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return $e(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=$e(s),p=0,v=s.length;p<v;p++)d?(l[p]=pe(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new ne;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new ne([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Re,v=s.length,E,F;if(p){for(F=[],E=0;E<v;E++)F[E]=this._map.latLngToLayerPoint(s[E]),d.extend(F[E]);l.push(F)}else for(E=0;E<v;E++)this._projectLatlngs(s[E],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,v,E,F,W,G;for(d=0,v=0,E=this._rings.length;d<E;d++)for(G=this._rings[d],p=0,F=G.length;p<F-1;p++)W=I(G[p],G[p+1],s,p,!0),W&&(l[v]=l[v]||[],l[v].push(W[0]),(W[1]!==G[p+1]||p===F-2)&&(l[v].push(W[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=qt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,v,E,F,W,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,E=this._parts.length;d<E;d++)for(W=this._parts[d],p=0,F=W.length,v=F-1;p<F;v=p++)if(!(!l&&p===0)&&Ml(s,W[v],W[p])<=G)return!0;return!1}});function xA(s,l){return new Yi(s,l)}Yi._flat=qe;var na=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Yi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Re&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Yi.prototype._setLatLngs.call(this,s),$e(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $e(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new Z(l,l);if(s=new ne(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,E;p<v;p++)E=Ll(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,v,E,F,W,G,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,G=this._parts.length;E<G;E++)for(d=this._parts[E],F=0,Q=d.length,W=Q-1;F<Q;W=F++)p=d[F],v=d[W],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||Yi.prototype._containsPoint.call(this,s,!0)}});function TA(s,l){return new na(s,l)}var Ji=Xi.extend({initialize:function(s,l){A(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=C(s)?s:s.features,d,p,v;if(l){for(d=0,p=l.length;d<p;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var F=Kc(s,E);return F?(F.feature=Yc(s),F.defaultOptions=F.options,this.resetStyle(F),E.onEachFeature&&E.onEachFeature(s,F),this.addLayer(F)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Kc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,v=[],E=l&&l.pointToLayer,F=l&&l.coordsToLatLng||fp,W,G,Q,ie;if(!p&&!d)return null;switch(d.type){case"Point":return W=F(p),fv(E,s,W,l);case"MultiPoint":for(Q=0,ie=p.length;Q<ie;Q++)W=F(p[Q]),v.push(fv(E,s,W,l));return new Xi(v);case"LineString":case"MultiLineString":return G=Qc(p,d.type==="LineString"?0:1,F),new Yi(G,l);case"Polygon":case"MultiPolygon":return G=Qc(p,d.type==="Polygon"?1:2,F),new na(G,l);case"GeometryCollection":for(Q=0,ie=d.geometries.length;Q<ie;Q++){var _e=Kc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);_e&&v.push(_e)}return new Xi(v);case"FeatureCollection":for(Q=0,ie=d.features.length;Q<ie;Q++){var Oe=Kc(d.features[Q],l);Oe&&v.push(Oe)}return new Xi(v);default:throw new Error("Invalid GeoJSON object.")}}function fv(s,l,d,p){return s?s(l,d):new qc(d,p&&p.markersInheritOptions&&p)}function fp(s){return new Re(s[1],s[0],s[2])}function Qc(s,l,d){for(var p=[],v=0,E=s.length,F;v<E;v++)F=l?Qc(s[v],l-1,d):(d||fp)(s[v]),p.push(F);return p}function pp(s,l){return s=pe(s),s.alt!==void 0?[_(s.lng,l),_(s.lat,l),_(s.alt,l)]:[_(s.lng,l),_(s.lat,l)]}function Xc(s,l,d,p){for(var v=[],E=0,F=s.length;E<F;E++)v.push(l?Xc(s[E],$e(s[E])?0:l-1,d,p):pp(s[E],p));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function ia(s,l){return s.feature?r({},s.feature,{geometry:l}):Yc(l)}function Yc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var mp={toGeoJSON:function(s){return ia(this,{type:"Point",coordinates:pp(this.getLatLng(),s)})}};qc.include(mp),dp.include(mp),Zc.include(mp),Yi.include({toGeoJSON:function(s){var l=!$e(this._latlngs),d=Xc(this._latlngs,l?1:0,!1,s);return ia(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),na.include({toGeoJSON:function(s){var l=!$e(this._latlngs),d=l&&!$e(this._latlngs[0]),p=Xc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),ia(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),ea.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),ia(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var E=v.toGeoJSON(s);if(d)p.push(E.geometry);else{var F=Yc(E);F.type==="FeatureCollection"?p.push.apply(p,F.features):p.push(F)}}}),d?ia(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function pv(s,l){return new Ji(s,l)}var EA=pv,Jc=si.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Ne(l),A(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){We(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&jn(this._image),this},bringToBack:function(){return this._map&&Fn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ne(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:ze("img");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;qi(this._image,d,l)},_reset:function(){var s=this._image,l=new ne(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();yt(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){fn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),PA=function(s,l,d){return new Jc(s,l,d)},mv=Jc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:ze("video");if(oe(l,"leaflet-image-layer"),this._zoomAnimated&&oe(l,"leaflet-zoom-animated"),this.options.className&&oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],v=0;v<d.length;v++)p.push(d[v].src);this._url=d.length>0?p:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var F=ze("source");F.src=this._url[E],l.appendChild(F)}}});function SA(s,l,d){return new mv(s,l,d)}var gv=Jc.extend({_initImage:function(){var s=this._image=this._url;oe(s,"leaflet-image-layer"),this._zoomAnimated&&oe(s,"leaflet-zoom-animated"),this.options.className&&oe(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function CA(s,l,d){return new gv(s,l,d)}var Pi=si.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Re||C(s))?(this._latlng=pe(s),A(this,l)):(A(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&fn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&fn(this._container,1),this.bringToFront(),this.options.interactive&&(oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(fn(this._container,0),this._removeTimeout=setTimeout(a(We,void 0,this._container),200)):We(this._container),this.options.interactive&&(et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=pe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jn(this._container),this},bringToBack:function(){return this._map&&Fn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Xi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?yt(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Me.include({_initOverlay:function(s,l,d,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),d&&v.setLatLng(d),v}}),si.include({_initOverlay:function(s,l,d,p){var v=d;return v instanceof s?(A(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(d)),v}});var eh=Pi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Pi.prototype.openOn.call(this,s)},onAdd:function(s){Pi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mr||this._source.on("preclick",Ge))},onRemove:function(s){Pi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mr||this._source.off("preclick",Ge))},getEvents:function(){var s=Pi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=ze("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=ze("div",s+"-content-wrapper",l);if(this._contentNode=ze("div",s+"-content",d),Us(l),Pl(this._contentNode),Ee(l,"contextmenu",Ge),this._tipContainer=ze("div",s+"-tip-container",l),this._tip=ze("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=ze("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(p,"click",function(v){Pt(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,E="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",oe(s,E)):et(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();yt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(br(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,v=new Z(this._containerLeft,-d-this._containerBottom);v._add(Zi(this._container));var E=s.layerPointToContainerPoint(v),F=J(this.options.autoPanPadding),W=J(this.options.autoPanPaddingTopLeft||F),G=J(this.options.autoPanPaddingBottomRight||F),Q=s.getSize(),ie=0,_e=0;E.x+p+G.x>Q.x&&(ie=E.x+p-Q.x+G.x),E.x-ie-W.x<0&&(ie=E.x-W.x),E.y+d+G.y>Q.y&&(_e=E.y+d-Q.y+G.y),E.y-_e-W.y<0&&(_e=E.y-W.y),(ie||_e)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ie,_e]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),IA=function(s,l){return new eh(s,l)};Me.mergeOptions({closePopupOnClick:!0}),Me.include({openPopup:function(s,l,d){return this._initOverlay(eh,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),si.include({bindPopup:function(s,l){return this._popup=this._initOverlay(eh,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Xi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){vi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Mr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var th=Pi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Pi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Pi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Pi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ze("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,v=this._container,E=p.latLngToContainerPoint(p.getCenter()),F=p.layerPointToContainerPoint(s),W=this.options.direction,G=v.offsetWidth,Q=v.offsetHeight,ie=J(this.options.offset),_e=this._getAnchor();W==="top"?(l=G/2,d=Q):W==="bottom"?(l=G/2,d=0):W==="center"?(l=G/2,d=Q/2):W==="right"?(l=0,d=Q/2):W==="left"?(l=G,d=Q/2):F.x<E.x?(W="right",l=0,d=Q/2):(W="left",l=G+(ie.x+_e.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ie).add(_e),et(v,"leaflet-tooltip-right"),et(v,"leaflet-tooltip-left"),et(v,"leaflet-tooltip-top"),et(v,"leaflet-tooltip-bottom"),oe(v,"leaflet-tooltip-"+W),yt(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&fn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),AA=function(s,l){return new th(s,l)};Me.include({openTooltip:function(s,l,d){return this._initOverlay(th,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),si.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(th,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Xi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Ee(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ee(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var yv=ta.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(rn(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function kA(s){return new yv(s)}ta.Default=Ol;var Dl=si.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){A(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),We(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,v=l.length,E;p<v;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(d=s(d,+E));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){fn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var E=Math.min(1,(s-v.loaded)/200);fn(v.el,E),E<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=ze("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(We(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=ze("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)We(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var v=Math.floor(s/2),E=Math.floor(l/2),F=d-1,W=new Z(+v,+E);W.z=+F;var G=this._tileCoordsToKey(W),Q=this._tiles[G];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),F>p?this._retainParent(v,E,F,p):!1)},_retainChildren:function(s,l,d,p){for(var v=2*s;v<2*s+2;v++)for(var E=2*l;E<2*l+2;E++){var F=new Z(v,E);F.z=d+1;var W=this._tileCoordsToKey(F),G=this._tiles[W];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);d+1<p&&this._retainChildren(v,E,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var E=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||E)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ue.any3d?qi(s.el,v,p):yt(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),v=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new ne(v.subtract(E),v.add(E))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),E=v.getCenter(),F=[],W=this.options.keepBuffer,G=new ne(v.getBottomLeft().subtract([W,-W]),v.getTopRight().add([W,-W]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ie=this._tiles[Q].coords;(ie.z!==this._tileZoom||!G.contains(new Z(ie.x,ie.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var _e=v.min.y;_e<=v.max.y;_e++)for(var Oe=v.min.x;Oe<=v.max.x;Oe++){var on=new Z(Oe,_e);if(on.z=this._tileZoom,!!this._isValidTile(on)){var Vt=this._tiles[this._tileCoordsToKey(on)];Vt?Vt.current=!0:F.push(on)}}if(F.sort(function(mn,sa){return mn.distanceTo(E)-sa.distanceTo(E)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Hn=document.createDocumentFragment();for(Oe=0;Oe<F.length;Oe++)this._addTile(F[Oe],Hn);this._level.el.appendChild(Hn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Ne(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),v=p.add(d),E=l.unproject(p,s.z),F=l.unproject(v,s.z);return[E,F]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Ye(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new Z(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(We(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){oe(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,ue.ielt9&&this.options.opacity<1&&fn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&M(a(this._tileReady,this,s,null,v)),yt(v,d),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(fn(d.el,0),z(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(oe(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new ne(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function bA(s){return new Dl(s)}var ra=Dl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=A(this,l),l.detectRetina&&ue.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return Ee(d,"load",a(this._tileOnLoad,this,l,d)),Ee(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:ue.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(s,l){ue.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=q;var d=this._tiles[s].coords;We(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),Dl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===q))return Dl.prototype._tileReady.call(this,s,l,d)}});function _v(s,l){return new ra(s,l)}var vv=ra.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=A(this,l);var v=l.detectRetina&&ue.retina?2:1,E=this.getTileSize();d.width=E.x*v,d.height=E.y*v,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ra.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Ce(d.project(l[0]),d.project(l[1])),v=p.min,E=p.max,F=(this._wmsVersion>=1.3&&this._crs===Jo?[v.y,v.x,E.y,E.x]:[v.x,v.y,E.x,E.y]).join(","),W=ra.prototype.getTileUrl.call(this,s);return W+j(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function RA(s,l){return new vv(s,l)}ra.WMS=vv,_v.wms=RA;var er=si.extend({options:{padding:.1},initialize:function(s){A(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),E=p.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(s,l));ue.any3d?qi(this._container,E,d):yt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new ne(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),wv=er.extend({options:{tolerance:0},getEvents:function(){var s=er.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){er.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ee(s,"mousemove",this._onMouseMove,this),Ee(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,We(this._container),Ke(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=ue.retina?2:1;yt(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){er.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ne,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,v,E,F=s._parts,W=F.length,G=this._ctx;if(W){for(G.beginPath(),d=0;d<W;d++){for(p=0,v=F[d].length;p<v;p++)E=F[d][p],G[p?"lineTo":"moveTo"](E.x,E.y);l&&G.closePath()}this._fillStroke(G,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(et(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(oe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function xv(s){return ue.canvas?new wv(s):null}var Vl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),LA={_initContainer:function(){this._container=ze("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(er.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Vl("shape");oe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Vl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;We(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Vl("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=C(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Vl("fill")),v.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(v.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){jn(s._container)},_bringToBack:function(s){Fn(s._container)}},nh=ue.vml?Vl:gt,jl=er.extend({_initContainer:function(){this._container=nh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){We(this._container),Ke(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),yt(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=nh("path");s.options.className&&oe(l,s.options.className),s.options.interactive&&oe(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){We(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,ye(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,v="a"+d+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){jn(s._path)},_bringToBack:function(s){Fn(s._path)}});ue.vml&&jl.include(LA);function Tv(s){return ue.svg||ue.vml?new jl(s):null}Me.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&xv(s)||Tv(s)}});var Ev=na.extend({initialize:function(s,l){na.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ne(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function NA(s,l){return new Ev(s,l)}jl.create=nh,jl.pointsToPath=ye,Ji.geometryToLayer=Kc,Ji.coordsToLatLng=fp,Ji.coordsToLatLngs=Qc,Ji.latLngToCoords=pp,Ji.latLngsToCoords=Xc,Ji.getFeature=ia,Ji.asFeature=Yc,Me.mergeOptions({boxZoom:!0});var Pv=Cn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ke(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){We(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ni(),Ho(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ee(document,{contextmenu:vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=ze("div","leaflet-zoom-box",this._container),oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new ne(this._point,this._startPoint),d=l.getSize();yt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(We(this._box),et(this._container,"leaflet-crosshair")),Sn(),Wo(),Ke(document,{contextmenu:vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Me.addInitHook("addHandler","boxZoom",Pv),Me.mergeOptions({doubleClickZoom:!0});var Sv=Cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Me.addInitHook("addHandler","doubleClickZoom",Sv),Me.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cv=Cn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ii(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){et(this._map._container,"leaflet-grab"),et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ne(this._map.options.maxBounds);this._offsetLimit=Ce(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+d)%s+l-d,E=(p+l+d)%s-l-d,F=Math.abs(v+d)<Math.abs(E+d)?v:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,F=d.easeLinearity,W=v.multiplyBy(F/E),G=W.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,G),ie=W.multiplyBy(Q/G),_e=Q/(d.inertiaDeceleration*F),Oe=ie.multiplyBy(-_e/2).round();!Oe.x&&!Oe.y?l.fire("moveend"):(Oe=l._limitOffset(Oe,l.options.maxBounds),M(function(){l.panBy(Oe,{duration:_e,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Me.addInitHook("addHandler","dragging",Cv),Me.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Iv=Cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ee(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ke(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,v;for(p=0,v=d.left.length;p<v;p++)l[d.left[p]]=[-1*s,0];for(p=0,v=d.right.length;p<v;p++)l[d.right[p]]=[s,0];for(p=0,v=d.down.length;p<v;p++)l[d.down[p]]=[0,s];for(p=0,v=d.up.length;p<v;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,v;for(p=0,v=d.zoomIn.length;p<v;p++)l[d.zoomIn[p]]=s;for(p=0,v=d.zoomOut.length;p<v;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ke(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(v)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;vi(s)}}});Me.addInitHook("addHandler","keyboard",Iv),Me.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Av=Cn.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ke(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Cl(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),vi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=d?Math.ceil(v/d)*d:v,F=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,F&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+F):s.setZoomAround(this._lastMousePos,l+F))}});Me.addInitHook("addHandler","scrollWheelZoom",Av);var MA=600;Me.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var kv=Cn.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ke(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",Pt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),MA),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ke(document,"touchend",Pt),Ke(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ke(document,"touchend touchcancel contextmenu",this._cancel,this),Ke(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Me.addInitHook("addHandler","tapHold",kv),Me.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var bv=Cn.extend({addHooks:function(){oe(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){et(this._map._container,"leaflet-touch-zoom"),Ke(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),Pt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var E=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var F=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(F,this,!0),Pt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Ke(document,"touchmove",this._onTouchMove,this),Ke(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Me.addInitHook("addHandler","touchZoom",bv),Me.BoxZoom=Pv,Me.DoubleClickZoom=Sv,Me.Drag=Cv,Me.Keyboard=Iv,Me.ScrollWheelZoom=Av,Me.TapHold=kv,Me.TouchZoom=bv,n.Bounds=ne,n.Browser=ue,n.CRS=ut,n.Canvas=wv,n.Circle=dp,n.CircleMarker=Zc,n.Class=fe,n.Control=pn,n.DivIcon=yv,n.DivOverlay=Pi,n.DomEvent=Ws,n.DomUtil=hp,n.Draggable=ii,n.Evented=Je,n.FeatureGroup=Xi,n.GeoJSON=Ji,n.GridLayer=Dl,n.Handler=Cn,n.Icon=ta,n.ImageOverlay=Jc,n.LatLng=Re,n.LatLngBounds=Ye,n.Layer=si,n.LayerGroup=ea,n.LineUtil=zn,n.Map=Me,n.Marker=qc,n.Mixin=$c,n.Path=Mr,n.Point=Z,n.PolyUtil=Xo,n.Polygon=na,n.Polyline=Yi,n.Popup=eh,n.PosAnimation=Al,n.Projection=Ei,n.Rectangle=Ev,n.Renderer=er,n.SVG=jl,n.SVGOverlay=gv,n.TileLayer=ra,n.Tooltip=th,n.Transformation=Te,n.Util=O,n.VideoOverlay=mv,n.bind=a,n.bounds=Ce,n.canvas=xv,n.circle=wA,n.circleMarker=vA,n.control=xi,n.divIcon=kA,n.extend=r,n.featureGroup=gA,n.geoJSON=pv,n.geoJson=EA,n.gridLayer=bA,n.icon=yA,n.imageOverlay=PA,n.latLng=pe,n.latLngBounds=Ne,n.layerGroup=mA,n.map=qo,n.marker=_A,n.point=J,n.polygon=TA,n.polyline=xA,n.popup=IA,n.rectangle=NA,n.setOptions=A,n.stamp=h,n.svg=Tv,n.svgOverlay=CA,n.tileLayer=_v,n.tooltip=AA,n.transformation=de,n.version=i,n.videoOverlay=SA;var OA=window.L;n.noConflict=function(){return window.L=OA,this},window.L=n})})(ey,ey.exports);var Lo=ey.exports;const uv=FT(Lo);function Cc(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function cv(t,e){return e==null?function(i,r){const o=V.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=V.useRef();o.current||(o.current=t(i,r));const a=V.useRef(i),{instance:u}=o.current;return V.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function hA(t,e){V.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function dA(t){return function(n){const i=av(),r=t(lv(n,i),i);return G5(i.map,n.attribution),cA(r.current,n.eventHandlers),hA(r.current,i),r}}function X5(t,e){const n=V.useRef();V.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function Y5(t){return function(n){const i=av(),r=t(lv(n,i),i);return cA(r.current,n.eventHandlers),hA(r.current,i),X5(r.current,n),r}}function J5(t,e){const n=cv(t,e),i=dA(n);return uA(i)}function hv(t,e){const n=cv(t,e),i=Y5(n);return uA(i)}function eB(t,e){const n=cv(t,e),i=dA(n);return Q5(i)}function tB(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function ip(){return av().map}function nB(t){const e=ip();return V.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const fA=hv(function({center:e,children:n,...i},r){const o=new Lo.CircleMarker(e,i);return Cc(o,np(r,{overlayContainer:o}))},q5);function ty(){return ty=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ty.apply(this,arguments)}function iB({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},g){const[_]=V.useState({className:r,id:o,style:u}),[T,b]=V.useState(null);V.useImperativeHandle(g,()=>(T==null?void 0:T.map)??null,[T]);const A=V.useCallback(k=>{if(k!==null&&T===null){const P=new Lo.Map(k,m);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),b(K5(P))}},[]);V.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const j=T?co.createElement(lA,{value:T},i):a??null;return co.createElement("div",ty({},_,{ref:A}),j)}const rB=V.forwardRef(iB),sB=J5(function({position:e,...n},i){const r=new Lo.Marker(e,n);return Cc(r,np(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),oB=hv(function({positions:e,...n},i){const r=new Lo.Polygon(e,n);return Cc(r,np(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),LT=hv(function({positions:e,...n},i){const r=new Lo.Polyline(e,n);return Cc(r,np(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),aB=eB(function({url:e,...n},i){const r=new Lo.TileLayer(e,lv(n,i));return Cc(r,i)},function(e,n,i){tB(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Dn=(t,e)=>{const n=V.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>V.createElement("svg",{ref:m,...lB,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${uB(t)}`,u].join(" "),...f},[...e.map(([g,_])=>V.createElement(g,_)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=Dn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=Dn("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=Dn("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=Dn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=Dn("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=Dn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=Dn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Dn("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=Dn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=Dn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=Dn("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=Dn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=Dn("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),sd={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};delete uv.Icon.Default.prototype._getIconUrl;uv.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const wB="/street-art-ctf/chumper.png",OT=t=>{if(!t)return 0;const e=Date.now(),n=t instanceof Date?t.getTime():new Date(t).getTime(),i=(e-n)/(1e3*60*60);return Math.min(i/24,1)},xB=(t,e=!1,n=!1,i=0,r=!1)=>{let o="";const a=1-i*.5,u=1-i*.3;return e?o="grayscale(100%) opacity(0.3)":t?t==="red"?o=`hue-rotate(160deg) saturate(${1.5*a}) opacity(${u})`:o=`saturate(${a}) opacity(${u})`:o=`grayscale(100%) opacity(${r?.1:1})`,uv.divIcon({html:`<div style="position:relative;"><img src="${wB}" style="width: 32px; height: 32px; filter: ${o};" /></div>`,className:"chumper-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})};function TB({devMode:t}){const[e,n]=V.useState(iA),[i,r]=V.useState(nA);return nB({zoomend:o=>n(o.target.getZoom()),moveend:o=>{const a=o.target.getCenter();r([a.lat.toFixed(6),a.lng.toFixed(6)])}}),t?x.jsx("div",{className:"absolute bottom-24 left-4 z-[1000] bg-purple-500 shadow-lg px-3 py-2 font-nohemi",children:x.jsxs("div",{className:"text-[10px] font-mono text-white",children:[x.jsxs("div",{children:["Z ",e]}),x.jsx("div",{children:i[0]}),x.jsx("div",{children:i[1]})]})}):null}function EB({hood:t}){const e=ip();return V.useEffect(()=>{t&&e.flyTo(t.center,t.zoom,{duration:1.5})},[t,e]),null}function PB({onShow:t}){const e=ip(),[n,i]=V.useState(null);if(V.useEffect(()=>{const o=localStorage.getItem("streetart-ctf-lastCapture");if(o)try{const a=JSON.parse(o);a.location&&Array.isArray(a.location)&&a.location.length===2?(i(a),localStorage.removeItem("streetart-ctf-lastCapture"),setTimeout(()=>{e.flyTo(a.location,17,{duration:1.5}),t&&t(a)},500),setTimeout(()=>{i(null)},5e3)):localStorage.removeItem("streetart-ctf-lastCapture")}catch{localStorage.removeItem("streetart-ctf-lastCapture")}},[e,t]),!n||!n.location)return null;const r=n.team==="red"?"#E53935":"#1E88E5";return x.jsx(fA,{center:n.location,radius:25,pathOptions:{color:r,fillColor:r,fillOpacity:.2,weight:2}})}function SB(){const t=ip(),[e,n]=V.useState(!1),i=()=>{n(!0),t.locate({setView:!0,maxZoom:16}),setTimeout(()=>n(!1),2e3)};return x.jsx(re.button,{onClick:i,className:"absolute bottom-24 right-4 z-[1000] w-12 h-12 bg-[#FAFAFA] shadow-lg flex items-center justify-center",whileTap:{scale:.95},children:x.jsx(re.div,{animate:e?{rotate:360}:{},transition:{duration:1,repeat:e?1/0:0},children:x.jsx(dB,{size:20,className:"text-black"})})})}function CB({point:t,onClose:e,isDiscovered:n,isSoloView:i}){var u;const r=t.capturedBy?((u=sd[t.capturedBy])==null?void 0:u.color)||"#888":null,o=ja(t),a=t.status==="ghost";return x.jsx(re.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},className:"absolute bottom-20 left-4 right-4 z-[1000] font-nohemi",children:x.jsxs("div",{className:"bg-[#FAFAFA] p-5 shadow-2xl",children:[x.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-black/30 hover:text-black transition-colors",children:x.jsx(_B,{size:20})}),x.jsxs("div",{className:"pr-8",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a&&x.jsx("span",{className:"text-[10px] tracking-widest text-black/30",children:"GHOST"}),i?n?x.jsx("span",{className:"text-[10px] tracking-widest text-purple-600",children:"DISCOVERED"}):x.jsx("span",{className:"text-[10px] tracking-widest text-black/30",children:"UNDISCOVERED"}):t.capturedBy?x.jsxs("span",{className:"text-[10px] tracking-widest",style:{color:r},children:["TEAM ",t.capturedBy.toUpperCase()]}):x.jsx("span",{className:"text-[10px] tracking-widest text-black/30",children:"UNCLAIMED"})]}),x.jsx("h3",{className:"text-2xl font-bold text-black tracking-tight mb-1",children:t.name}),x.jsx("p",{className:"text-black/40 mb-4",children:t.area}),x.jsxs("div",{className:"flex items-center gap-6",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-3xl font-black text-black",children:o}),x.jsx("div",{className:"text-xs text-black/40",children:"points"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-lg font-bold text-black capitalize",children:t.size}),x.jsx("div",{className:"text-xs text-black/40",children:"size"})]}),t.mhd&&x.jsxs("div",{children:[x.jsx("div",{className:"text-lg font-bold",style:{color:t.mhd==="metroB"?"#eab308":"#E53935"},children:t.mhd==="metroB"?"Metro B":"Tram 12"}),x.jsx("div",{className:"text-xs text-black/40",children:"nearby"})]})]}),!i&&t.capturedByPlayer&&x.jsxs("div",{className:"mt-4 pt-4 border-t border-black/10",children:[x.jsx("span",{className:"text-xs text-black/40",children:"Captured by "}),x.jsx("span",{className:"text-sm font-bold text-black",children:t.capturedByPlayer})]})]})]})})}const _m=[null,...uo],IB=(t,e)=>{if(e==="off")return[];const n=t.filter(r=>r.capturedBy&&r.status!=="ghost"),i=[];return n.forEach(r=>{const[o,a]=r.location,u=.002,h=r.capturedBy;if(e==="circles"){const m=[];for(let g=0;g<32;g++){const _=g/32*2*Math.PI;m.push([o+u*Math.cos(_),a+u*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id,capturedAt:r.capturedAt})}else if(e==="squares"){const f=u*.8;i.push({team:h,coords:[[o-f,a-f*1.5],[o-f,a+f*1.5],[o+f,a+f*1.5],[o+f,a-f*1.5]],pointId:r.id,capturedAt:r.capturedAt})}else if(e==="hexagons"){const f=u*.9,m=[];for(let g=0;g<6;g++){const _=g/6*2*Math.PI+Math.PI/6;m.push([o+f*Math.cos(_),a+f*Math.sin(_)*1.5])}i.push({team:h,coords:m,pointId:r.id,capturedAt:r.capturedAt})}}),i};function AB(){var D;const{player:t,artPoints:e,captureArt:n,discoveries:i}=Ui(),[r,o]=V.useState(null),[a,u]=V.useState(!1),[h,f]=V.useState(e),[m,g]=V.useState(lf.vysocany),[_,T]=V.useState("solo"),[b,A]=V.useState(!1),[j,k]=V.useState("circles");V.useEffect(()=>{f(e)},[e]);const P=M=>{a?f(z=>z.map(O=>{if(O.id===M.id){const Xe=(_m.indexOf(O.capturedBy)+1)%_m.length;return{...O,capturedBy:_m[Xe]}}return O})):o(M)},C=()=>{f(e.map(M=>({...M,capturedBy:null})))},B=a?h:e,q=V.useMemo(()=>B5(B),[B]),U=V.useMemo(()=>IB(B,j),[B,j]),R=V.useMemo(()=>sA(B),[B]);Object.values(R).reduce((M,z)=>M+z,0),Object.keys(i).length,hi.length;const S=V.useMemo(()=>{const M=hi.filter(O=>{const fe={palmovka:"Palmovka",vysocany:"Vysocany",podebrady:"Podebrady"};return O.area===fe[m.id]||O.area===m.name});return{found:M.filter(O=>i[O.id]).length,total:M.length}},[i,m]),N=_==="solo";return x.jsxs("div",{className:"relative w-full h-full",children:[x.jsxs("div",{className:"absolute top-3 left-3 right-3 z-[1000] flex items-center gap-2 font-nohemi",children:[x.jsxs("div",{className:"flex bg-[#FAFAFA] shadow-lg",children:[x.jsx("button",{onClick:()=>T("solo"),className:`px-3 py-2 text-xs font-bold tracking-wide transition-all ${N?"bg-black text-white":"text-black/40"}`,children:"SOLO"}),x.jsx("button",{onClick:()=>T("multi"),className:`px-3 py-2 text-xs font-bold tracking-wide transition-all ${N?"text-black/40":"bg-black text-white"}`,children:"BATTLE"})]}),x.jsx("div",{className:"flex bg-[#FAFAFA] shadow-lg",children:Object.values(lf).map(M=>x.jsx("button",{onClick:()=>g(M),className:`px-3 py-2 text-xs font-bold transition-all ${m.id===M.id?"text-black":"text-black/30"}`,children:M.name.toUpperCase()},M.id))}),x.jsx("div",{className:"ml-auto flex items-center gap-3 bg-[#FAFAFA] shadow-lg px-4 py-2",children:N?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"text-xs font-bold",style:{color:(D=sd[t.team])==null?void 0:D.color},children:S.found}),x.jsxs("span",{className:"text-xs text-black/30",children:["/ ",S.total]})]}):x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"text-sm font-black",style:{color:sd.red.color},children:R.red||0}),x.jsx("span",{className:"text-xs text-black/20",children:"vs"}),x.jsx("span",{className:"text-sm font-black",style:{color:sd.blue.color},children:R.blue||0})]})})]}),x.jsxs("div",{className:"absolute bottom-24 right-4 z-[1000] flex flex-col gap-2",children:[x.jsx(re.button,{onClick:()=>u(!a),className:`w-10 h-10 shadow-lg flex items-center justify-center transition-colors ${a?"bg-purple-500 text-white":"bg-[#FAFAFA] text-black/30"}`,whileTap:{scale:.95},children:x.jsx(hB,{size:16})}),a&&x.jsx(re.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},onClick:C,className:"w-10 h-10 bg-[#FAFAFA] shadow-lg flex items-center justify-center text-black/30",whileTap:{scale:.95},children:x.jsx(mB,{size:16})})]}),x.jsx(Xu,{children:a&&x.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-16 left-1/2 -translate-x-1/2 z-[1000] px-4 py-2 bg-purple-500 shadow-lg font-nohemi",children:x.jsx("span",{className:"text-xs text-white font-bold tracking-widest",children:"DEV MODE"})})}),x.jsxs(rB,{center:nA,zoom:iA,minZoom:j5,maxZoom:F5,className:"w-full h-full",zoomControl:!1,attributionControl:!1,style:{background:"#FAFAFA"},children:[x.jsx(aB,{url:CT.tileUrl,attribution:CT.attribution}),x.jsx(SB,{}),x.jsx(TB,{devMode:a}),x.jsx(EB,{hood:m}),x.jsx(PB,{}),x.jsx(LT,{positions:IT.map(M=>M.location),pathOptions:{color:"#eab308",weight:4,opacity:.6}}),IT.map(M=>x.jsx(fA,{center:M.location,radius:5,pathOptions:{color:"#eab308",fillColor:"#FAFAFA",fillOpacity:1,weight:2}},M.name)),!N&&U.map((M,z)=>{const O=M.capturedAt?OT(M.capturedAt):0,fe=.15*(1-O*.7),Xe=.4*(1-O*.5);return x.jsx(oB,{positions:M.coords,pathOptions:{color:gm(M.team),fillColor:gm(M.team),fillOpacity:fe,weight:1,opacity:Xe}},`territory-${M.pointId}`)}),!N&&b&&Object.entries(q).map(([M,z])=>z.map((O,fe)=>x.jsx(LT,{positions:[O.from,O.to],pathOptions:{color:gm(M),weight:3,opacity:.6,dashArray:null,lineCap:"round",lineJoin:"round"}},`${M}-line-${fe}`))),B.filter(M=>N||M.status!=="ghost").map(M=>{const z=M.status==="ghost",O=i[M.id],fe=N?O?t.team:null:M.capturedBy,Xe=!N&&M.capturedBy&&M.capturedAt?OT(M.capturedAt):0,be=xB(fe,z,!1,Xe,!N);return x.jsx(sB,{position:M.location,icon:be,eventHandlers:{click:Je=>{Je.originalEvent.stopPropagation(),P(M)}}},`${M.id}-${fe||"none"}-${Math.floor(Xe*10)}`)})]}),x.jsx(Xu,{children:r&&x.jsx(CB,{point:r,onClose:()=>o(null),isDiscovered:i[r.id],isSoloView:N})})]})}function kB(){return x.jsx(re.div,{className:"flex-1 relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:x.jsx(AB,{})})}function bB(){const{player:t}=Ui(),[e,n]=V.useState(!1);return V.useEffect(()=>{if(t.team&&!e){n(!0);const i="/street-art-ctf/";window.location.href=i+"ar-scanner.html"}},[t.team,e]),t.team?x.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-[#FAFAFA] font-nohemi",children:x.jsxs(re.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},children:[x.jsx(re.div,{className:"text-7xl font-black text-black/10 mb-4",animate:{opacity:[.1,.2,.1]},transition:{repeat:1/0,duration:1.5},children:"AR"}),x.jsx("h2",{className:"text-xl font-bold mb-2 text-black",children:"Opening Scanner"}),x.jsx("p",{className:"text-black/40 text-sm",children:"Point camera at street art"})]})}):x.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-[#FAFAFA] font-nohemi",children:x.jsxs(re.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[x.jsx("div",{className:"text-8xl font-black text-black/5 mb-4",children:"!"}),x.jsx("h2",{className:"text-2xl font-bold mb-2 text-black",children:"Join a Team"}),x.jsx("p",{className:"text-black/40 text-sm",children:"Select your team from home to start scanning"})]})})}const Jl={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};function RB(){var m,g;const{teamScores:t,player:e,allPlayers:n}=Ui(),i=t.red+t.blue,r=i>0?Math.round(t.red/i*100):50,o=i>0?100-r:50,a=t.red>t.blue?"red":t.blue>t.red?"blue":null,u=[...n],h=u.findIndex(_=>_.id===e.id||_.name===e.name);h>=0?u[h]={...u[h],score:Math.max(u[h].score,e.score||0),captures:Math.max(u[h].captures||0,e.captureCount||((m=e.capturedArt)==null?void 0:m.length)||0)}:e.team&&e.name&&e.name!=="Street Artist"&&u.push({id:e.id||"current",name:e.name,team:e.team,score:e.score||0,captures:e.captureCount||((g=e.capturedArt)==null?void 0:g.length)||0});const f=u.sort((_,T)=>(T.score||0)-(_.score||0));return x.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi pb-20",children:[x.jsxs("div",{className:"p-6 pt-10",children:[x.jsx(re.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-1",children:"LEADERBOARD"}),x.jsx(re.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl font-bold text-black tracking-tight",children:"Rankings"})]}),x.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"px-6 mb-8",children:[x.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"TEAMS"}),x.jsxs("div",{className:"flex justify-between items-end mb-4",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-6xl font-black",style:{color:a==="red"?Jl.red.color:"rgba(0,0,0,0.15)"},children:t.red}),x.jsxs("div",{className:"text-sm text-black/40 mt-1",children:["RED  ",r,"%"]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"text-6xl font-black",style:{color:a==="blue"?Jl.blue.color:"rgba(0,0,0,0.15)"},children:t.blue}),x.jsxs("div",{className:"text-sm text-black/40 mt-1",children:["BLUE  ",o,"%"]})]})]}),x.jsxs("div",{className:"h-3 bg-black/5 flex overflow-hidden",children:[x.jsx(re.div,{style:{backgroundColor:Jl.red.color},initial:{width:"50%"},animate:{width:`${r}%`},transition:{duration:.8}}),x.jsx(re.div,{style:{backgroundColor:Jl.blue.color},initial:{width:"50%"},animate:{width:`${o}%`},transition:{duration:.8}})]})]}),x.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"px-6",children:[x.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"PLAYERS"}),x.jsxs("div",{className:"space-y-1",children:[f.map((_,T)=>{var k;const b=_.name===e.name,A=((k=Jl[_.team])==null?void 0:k.color)||"#888",j=T<3;return x.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+T*.03},className:`flex items-center gap-4 py-3 border-b border-black/5 ${b?"bg-black/5 -mx-2 px-2":""}`,children:[x.jsx("div",{className:"w-8",children:x.jsx("span",{className:`text-2xl font-black ${j?"text-black":"text-black/20"}`,children:T+1})}),x.jsx("div",{className:"w-1 h-8",style:{backgroundColor:A}}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:`font-bold truncate ${b?"text-black":"text-black/80"}`,children:_.name}),b&&x.jsx("span",{className:"text-[10px] tracking-widest text-black/40",children:"YOU"})]}),x.jsxs("div",{className:"text-xs text-black/40",children:[_.captures||0," captures"]})]}),x.jsx("div",{className:"text-right",children:x.jsx("div",{className:"text-xl font-black text-black",children:_.score})})]},_.id||_.name)}),f.length===0&&x.jsxs("div",{className:"py-12 text-center",children:[x.jsx("div",{className:"text-6xl font-black text-black/5 mb-2",children:"0"}),x.jsx("div",{className:"text-black/30",children:"No players yet"})]})]})]})]})}const DT={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}},VT={Vysoany:{name:"Vysoany"},Hloubtn:{name:"Hloubtn"},Podbrady:{name:"Podbrady"},Palmovka:{name:"Palmovka"},Karln:{name:"Karln"},Libe:{name:"Libe"},Prosek:{name:"Prosek"}};function LB(){const{player:t,artPoints:e,resetAll:n,discoveries:i}=Ui(),[r,o]=V.useState(!1),a=(e==null?void 0:e.filter(_=>t.capturedArt.includes(_.id)))||[],u=V.useMemo(()=>{const _={},T=Object.keys(i||{});return Object.keys(VT).forEach(b=>{const A=hi.filter(k=>k.area===b),j=A.filter(k=>T.includes(k.id));_[b]={total:A.length,found:j.length,complete:j.length===A.length&&A.length>0}}),_},[i]),h=V.useMemo(()=>{const _=hi.length,T=Object.keys(i||{}).length;return{total:_,found:T,percent:Math.round(T/_*100)}},[i]),f=t.team?DT[t.team].color:"#888",m=t.team?DT[t.team].name:"?",g=async()=>{if(!r){o(!0);try{const _=["red","blue"];let T=0,b=0;for(const A of hi){const j=_[Math.floor(Math.random()*_.length)],k=ja(A);j==="red"?T+=k:b+=k,await Ai(An(At,"streetart-captures",A.id),{artId:A.id,capturedBy:j,capturedAt:new Date,playerId:"system",playerName:"Game Master",points:k,isFirstCapture:!0,isRecapture:!1})}await Ai(An(At,"streetart-teams","red"),{score:T},{merge:!0}),await Ai(An(At,"streetart-teams","blue"),{score:b},{merge:!0})}catch(_){console.error("Failed to randomize:",_)}o(!1)}};return x.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#FAFAFA] font-nohemi pb-20",children:[x.jsxs("div",{className:"p-6 pt-10",children:[x.jsx(re.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm tracking-widest text-black/40 mb-1",children:"YOUR COLLECTION"}),x.jsx(re.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl font-bold text-black tracking-tight",children:t.name}),x.jsxs(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},style:{color:f},children:["Team ",m]})]}),x.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"px-6 mb-8",children:x.jsxs("div",{className:"flex gap-6",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-5xl font-black text-black",children:t.score}),x.jsx("div",{className:"text-xs text-black/40 mt-1",children:"POINTS"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-5xl font-black text-black",children:t.captureCount||a.length}),x.jsx("div",{className:"text-xs text-black/40 mt-1",children:"CAPTURES"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-5xl font-black text-black",children:t.maxStreak||0}),x.jsx("div",{className:"text-xs text-black/40 mt-1",children:"BEST STREAK"})]})]})}),x.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"px-6 mb-8",children:[x.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"COLLECTION"}),x.jsxs("div",{className:"mb-4",children:[x.jsxs("div",{className:"flex justify-between mb-2",children:[x.jsx("span",{className:"font-bold text-black",children:"Total Collected"}),x.jsxs("span",{className:"text-black/40",children:[h.found," / ",h.total]})]}),x.jsx("div",{className:"h-2 bg-black/5",children:x.jsx(re.div,{className:"h-full",style:{backgroundColor:f},initial:{width:0},animate:{width:`${h.percent}%`},transition:{duration:.8,delay:.4}})})]}),x.jsx("div",{className:"space-y-3",children:Object.entries(VT).map(([_,T],b)=>{const A=u[_]||{found:0,total:0,complete:!1},j=A.total>0?Math.round(A.found/A.total*100):0;return x.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+b*.1},className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-8 text-2xl font-black text-black/10",children:A.found}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex justify-between mb-1",children:[x.jsxs("span",{className:`text-sm ${A.complete?"font-bold text-black":"text-black/60"}`,children:[T.name,A.complete&&x.jsx("span",{className:"ml-2 text-green-600",children:"COMPLETE"})]}),x.jsxs("span",{className:"text-xs text-black/30",children:[A.found,"/",A.total]})]}),x.jsx("div",{className:"h-1 bg-black/5",children:x.jsx("div",{className:"h-full transition-all duration-500",style:{backgroundColor:A.complete?"#22c55e":"rgba(0,0,0,0.2)",width:`${j}%`}})})]})]},_)})})]}),x.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"px-6 mb-8",children:[x.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"STATS"}),x.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[x.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[x.jsx("span",{className:"text-black/50",children:"Recaptures"}),x.jsx("span",{className:"font-bold text-black",children:t.recaptureCount||0})]}),x.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[x.jsx("span",{className:"text-black/50",children:"First captures"}),x.jsx("span",{className:"font-bold text-black",children:t.firstCaptureCount||0})]}),x.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[x.jsx("span",{className:"text-black/50",children:"Current streak"}),x.jsx("span",{className:"font-bold text-black",children:t.streak||0})]}),x.jsxs("div",{className:"flex justify-between border-b border-black/5 pb-2",children:[x.jsx("span",{className:"text-black/50",children:"Distance"}),x.jsxs("span",{className:"font-bold text-black",children:[t.totalDistance?(t.totalDistance/1e3).toFixed(1):"0"," km"]})]})]})]}),x.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"px-6 mb-8",children:[x.jsx("p",{className:"text-sm tracking-widest text-black/40 mb-4",children:"ADMIN"}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("button",{onClick:g,disabled:r,className:"w-full py-3 bg-black/5 text-black/60 font-bold text-sm tracking-wide hover:bg-black/10 transition-colors disabled:opacity-50",children:r?"RANDOMIZING...":"RANDOMIZE TERRITORIES"}),x.jsx("button",{onClick:n,className:"w-full py-3 text-black/30 font-bold text-sm tracking-wide hover:text-red-500 transition-colors",children:"RESET ALL DATA"})]})]}),x.jsx("p",{className:"text-center text-xs text-black/20 pb-4",children:"v3.0.4"})]})}const NB="123";function MB(){const t=Af(),{artPoints:e,allPlayers:n,teamScores:i}=Ui(),[r,o]=V.useState(!1),[a,u]=V.useState(""),[h,f]=V.useState("all"),[m,g]=V.useState({}),[_,T]=V.useState(null);V.useEffect(()=>{sessionStorage.getItem("admin-auth")==="true"&&o(!0)},[]);const b=U=>{U.preventDefault(),a===NB?(o(!0),sessionStorage.setItem("admin-auth","true")):(T({type:"error",text:"Wrong password"}),setTimeout(()=>T(null),2e3))},A=(U,R)=>{T({type:U,text:R}),setTimeout(()=>T(null),3e3)},j=async(U,R)=>{g(S=>({...S,[U]:!0}));try{const S=R==="ghost"?"active":"ghost";await Ai(An(At,"streetart-captures",U),{status:S,statusUpdatedAt:new Date},{merge:!0}),A("success",`Point ${U} set to ${S}`)}catch(S){A("error","Failed to update: "+S.message),console.error(S)}g(S=>({...S,[U]:!1}))},k=async U=>{g(R=>({...R,[`reset-${U}`]:!0}));try{await Iu(An(At,"streetart-captures",U)),A("success",`Ownership reset for ${U}`)}catch(R){A("error","Failed to reset ownership"),console.error(R)}g(R=>({...R,[`reset-${U}`]:!1}))},P=async()=>{if(confirm("Are you sure? This will reset ALL captures!")){g(U=>({...U,resetAll:!0}));try{const R=(await ef(Ys(At,"streetart-captures"))).docs.map(S=>Iu(S.ref));await Promise.all(R),A("success","All captures reset!")}catch(U){A("error","Failed to reset all captures"),console.error(U)}g(U=>({...U,resetAll:!1}))}},C=async()=>{if(confirm("Are you sure? This will delete ALL player data!")){g(U=>({...U,resetPlayers:!0}));try{const R=(await ef(Ys(At,"streetart-players"))).docs.map(S=>Iu(S.ref));await Promise.all(R),A("success","All players reset!")}catch(U){A("error","Failed to reset players"),console.error(U)}g(U=>({...U,resetPlayers:!1}))}},B=h==="all"?e:e.filter(U=>U.hood===h),q={total:e.length,captured:e.filter(U=>U.capturedBy).length,red:e.filter(U=>U.capturedBy==="red").length,blue:e.filter(U=>U.capturedBy==="blue").length,ghost:e.filter(U=>U.status==="ghost").length,players:n.length};return r?x.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] pb-24 overflow-y-auto",children:[x.jsx("div",{className:"sticky top-0 z-50 bg-[#0a0a0f]/90 backdrop-blur-xl border-b border-white/10 px-4 py-3",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2",children:x.jsx(cB,{size:24,className:"text-white/70"})}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(NT,{size:18,className:"text-purple-400"}),x.jsx("span",{className:"font-bold",children:"God Mode"})]}),x.jsx("div",{className:"w-10"})]})}),_&&x.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:`fixed top-16 left-4 right-4 z-50 p-3 rounded-xl text-center text-sm font-medium ${_.type==="error"?"bg-red-500/90":"bg-green-500/90"}`,children:_.text}),x.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[x.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[x.jsx("div",{className:"text-2xl font-bold",children:q.total}),x.jsx("div",{className:"text-xs text-white/40",children:"Points"})]}),x.jsxs("div",{className:"p-3 rounded-xl bg-red-500/20 text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-red-400",children:q.red}),x.jsx("div",{className:"text-xs text-red-400/60",children:"Red"})]}),x.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/20 text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-blue-400",children:q.blue}),x.jsx("div",{className:"text-xs text-blue-400/60",children:"Blue"})]}),x.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-white/60",children:q.ghost}),x.jsx("div",{className:"text-xs text-white/40",children:"Ghost"})]}),x.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[x.jsx("div",{className:"text-2xl font-bold",children:q.players}),x.jsx("div",{className:"text-xs text-white/40",children:"Players"})]}),x.jsxs("div",{className:"p-3 rounded-xl bg-white/5 text-center",children:[x.jsx("div",{className:"text-2xl font-bold",children:q.captured}),x.jsx("div",{className:"text-xs text-white/40",children:"Captured"})]})]}),x.jsxs("div",{className:"px-4 mb-6",children:[x.jsxs("h2",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[x.jsx(vB,{size:14}),"Danger Zone"]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:P,disabled:m.resetAll,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetAll?x.jsx(Nh,{size:16,className:"animate-spin"}):x.jsx(gB,{size:16}),"Reset Captures"]}),x.jsxs("button",{onClick:C,disabled:m.resetPlayers,className:"flex-1 py-3 rounded-xl bg-red-500/20 border border-red-500/30 text-red-400 font-medium text-sm flex items-center justify-center gap-2",children:[m.resetPlayers?x.jsx(Nh,{size:16,className:"animate-spin"}):x.jsx(MT,{size:16}),"Reset Players"]})]})]}),x.jsx("div",{className:"px-4 mb-4",children:x.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[x.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h==="all"?"bg-white text-black":"bg-white/10 text-white/60"}`,children:"All"}),Object.values(lf).map(U=>x.jsx("button",{onClick:()=>f(U.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap ${h===U.id?"bg-white text-black":"bg-white/10 text-white/60"}`,children:U.name},U.id))]})}),x.jsxs("div",{className:"px-4 space-y-2",children:[x.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2",children:["Art Points (",B.length,")"]}),B.map(U=>{var S;const R=U.status==="ghost";return x.jsxs("div",{className:`p-4 rounded-xl border ${R?"bg-white/5 border-white/10 opacity-60":"bg-white/5 border-white/10"}`,children:[x.jsxs("div",{className:"flex items-start justify-between mb-2",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"font-medium",children:U.name}),R&&x.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-white/10 text-white/40",children:"GHOST"})]}),x.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[U.id,"  ",U.area,"  ",U.size,"  ",(S=rA[U.size])==null?void 0:S.points,"pts"]})]}),U.capturedBy&&x.jsx("div",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:U.capturedBy==="red"?"#ff6b6b20":"#4dabf720",color:U.capturedBy==="red"?"#ff6b6b":"#4dabf7"},children:U.capturedBy.toUpperCase()})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>j(U.id,U.status),disabled:m[U.id],className:`flex-1 py-2 rounded-lg text-xs font-medium flex items-center justify-center gap-1.5 ${R?"bg-green-500/20 text-green-400":"bg-white/10 text-white/60"}`,children:m[U.id]?x.jsx(Nh,{size:14,className:"animate-spin"}):R?x.jsxs(x.Fragment,{children:[x.jsx(fB,{size:14})," Make Active"]}):x.jsxs(x.Fragment,{children:[x.jsx(pB,{size:14})," Make Ghost"]})}),U.capturedBy&&x.jsx("button",{onClick:()=>k(U.id),disabled:m[`reset-${U.id}`],className:"py-2 px-3 rounded-lg bg-white/10 text-white/60 text-xs font-medium flex items-center gap-1.5",children:m[`reset-${U.id}`]?x.jsx(Nh,{size:14,className:"animate-spin"}):x.jsxs(x.Fragment,{children:[x.jsx(yB,{size:14})," Reset"]})})]})]},U.id)})]}),x.jsxs("div",{className:"px-4 mt-8",children:[x.jsxs("h2",{className:"text-sm font-bold text-white/60 mb-2 flex items-center gap-2",children:[x.jsx(MT,{size:14}),"Players (",n.length,")"]}),x.jsx("div",{className:"space-y-2",children:n.map(U=>x.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"font-medium",children:U.name}),x.jsxs("div",{className:"text-xs text-white/40",children:[U.captures||0," captures"]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-sm font-bold",children:U.score||0}),x.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:U.team==="red"?"#ff6b6b":"#4dabf7"}})]})]},U.id))})]})]}):x.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-6",children:x.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-purple-500/20 flex items-center justify-center",children:x.jsx(NT,{size:32,className:"text-purple-400"})}),x.jsx("h1",{className:"text-2xl font-bold",children:"Admin Access"}),x.jsx("p",{className:"text-white/40 text-sm mt-1",children:"God Mode Panel"})]}),x.jsxs("form",{onSubmit:b,className:"space-y-4",children:[x.jsx("input",{type:"password",value:a,onChange:U=>u(U.target.value),placeholder:"Enter password...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-center focus:outline-none focus:border-purple-500/50"}),x.jsx("button",{type:"submit",className:"w-full py-3 rounded-xl bg-purple-500 text-white font-bold",children:"Enter"})]}),_&&x.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},className:`mt-4 p-3 rounded-lg text-center text-sm ${_.type==="error"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:_.text}),x.jsx("button",{onClick:()=>t(-1),className:"mt-6 w-full py-2 text-white/40 text-sm",children:" Back"})]})})}const OB=[{path:"/",label:"WAR"},{path:"/map",label:"MAP"},{path:"/scanner",label:"SCAN"},{path:"/leaderboard",label:"RANKS"},{path:"/profile",label:"COLLECTION"}];function DB(){return x.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-[2000] font-nohemi",children:[x.jsx("div",{className:"absolute inset-0 bg-[#FAFAFA] shadow-[0_-4px_20px_rgba(0,0,0,0.1)]"}),x.jsx("div",{className:"relative flex justify-around items-center h-14 px-2",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:OB.map(({path:t,label:e})=>x.jsx(wL,{to:t,className:"flex-1 flex justify-center",children:({isActive:n})=>x.jsxs(re.div,{className:"relative py-2 px-3",whileTap:{scale:.95},children:[n&&x.jsx(re.div,{layoutId:"nav-indicator",className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-1 h-1 bg-black",transition:{type:"spring",stiffness:400,damping:30}}),x.jsx("span",{className:`text-xs font-bold tracking-wider transition-colors ${n?"text-black":"text-black/30"}`,children:e})]})},t))})]})}const jT={red:{color:"#E53935",name:"RED"},blue:{color:"#1E88E5",name:"BLUE"}};function VB(){var a,u;const{captureNotification:t}=Ui();if(!t)return null;const e=((a=jT[t.team])==null?void 0:a.color)||"#888",n=((u=jT[t.team])==null?void 0:u.name)||"?",i=t.points||100,r=t.streak||0,o=t.isRecapture;return x.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none overflow-hidden bg-[#FAFAFA] font-nohemi",children:[x.jsx(re.div,{className:"absolute top-0 left-0 right-0 h-2",style:{backgroundColor:e},initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.3}}),x.jsxs(re.div,{initial:{y:40,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,type:"spring",stiffness:100},className:"text-center px-8",children:[x.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-sm tracking-widest text-black/30 mb-2",children:o?"TERRITORY STOLEN":"TERRITORY CAPTURED"}),x.jsx(re.h1,{className:"text-5xl font-black text-black tracking-tight mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},children:o?"STOLEN":"CAPTURED"}),x.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.25},className:"text-lg text-black/50 mb-8",children:t.artName}),x.jsx(re.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:150},className:"mb-2",children:x.jsxs("span",{className:"text-8xl font-black",style:{color:e},children:["+",i]})}),x.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-sm tracking-widest text-black/30 mb-6",children:"POINTS"}),r>1&&x.jsx(re.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.45},className:"inline-flex items-center gap-2 px-4 py-2 bg-black/5 mb-6",children:x.jsxs("span",{className:"font-black text-black",children:["STREAK x",r]})}),x.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex items-center justify-center gap-2",children:[x.jsx("span",{className:"font-bold text-black",children:t.playerName}),x.jsx("span",{className:"px-3 py-1 text-xs font-black text-white",style:{backgroundColor:e},children:n})]})]})]})}function Mh({children:t}){const{player:e}=Ui();return e.team&&e.name&&e.name!=="Street Artist"?t:x.jsx(aP,{to:"/onboarding",replace:!0})}function jB(){const t=So(),{player:e}=Ui(),n=e.team&&e.name&&e.name!=="Street Artist",i=t.pathname==="/onboarding"||t.pathname==="/admin";return x.jsxs("div",{className:"h-full w-full flex flex-col",children:[x.jsx(Xu,{children:x.jsx(VB,{})}),x.jsx(Xu,{mode:"wait",children:x.jsxs(lL,{location:t,children:[x.jsx(Vr,{path:"/onboarding",element:x.jsx(H5,{})}),x.jsx(Vr,{path:"/",element:n?x.jsx($5,{}):x.jsx(aP,{to:"/onboarding",replace:!0})}),x.jsx(Vr,{path:"/map",element:x.jsx(Mh,{children:x.jsx(kB,{})})}),x.jsx(Vr,{path:"/scanner",element:x.jsx(Mh,{children:x.jsx(bB,{})})}),x.jsx(Vr,{path:"/leaderboard",element:x.jsx(Mh,{children:x.jsx(RB,{})})}),x.jsx(Vr,{path:"/profile",element:x.jsx(Mh,{children:x.jsx(LB,{})})}),x.jsx(Vr,{path:"/admin",element:x.jsx(MB,{})})]},t.pathname)}),!i&&n&&x.jsx(DB,{})]})}function FB(){return x.jsx(U5,{children:x.jsx(jB,{})})}vm.createRoot(document.getElementById("root")).render(x.jsx(co.StrictMode,{children:x.jsx(gL,{children:x.jsx(FB,{})})}));
